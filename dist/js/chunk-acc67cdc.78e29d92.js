(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-acc67cdc"],{"14df":function(e,t,i){"use strict";i("4973")},"1c40":function(e,t,i){"use strict";i("6c27")},"20b5":function(e,t,i){},2365:function(e,t,i){},"23f6":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o}));var s=i("b775"),a="api/contentGrade",n={save:"/classcipe/".concat(a,"/save"),getStatByContentId:"/classcipe/".concat(a,"/getStatByContentId")};function r(e){return Object(s["d"])({url:n.save,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(s["d"])({url:n.getStatByContentId,method:"get",params:e})}},"295a":function(e,t,i){"use strict";i("ed14")},"2e09":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-space",[null!==e.currentBloom?i("a-popover",{attrs:{trigger:"click",overlayClassName:"choose-con",visible:e.bloomTagVisible},on:{visibleChange:e.handleBloomChange}},[i("template",{slot:"content"},[i("div",{staticClass:"choose-bar-title"},[e._v("Set Bloom's taxonomy")]),i("div",{staticClass:"choose-bar"},e._l(e.bloomLevel,(function(t,s){return i("div",{key:"bloom_"+t.title,staticClass:"choose-bar-item",style:{background:e.COLOR_LEVEL.BLOOM[s],height:e.HEIGHT[s]+"px"},on:{click:function(i){return e.changeLevel("bloomTag",t.title)}}},[i("label",[e._v(e._s(t.title))])])})),0)]),e.currentBloom?i("a-rate",{staticClass:"rate-bar-con super-small bloom-color",attrs:{tooltips:e.bloomLevelDesc,count:e.bloomLevel.length,value:e.currentBloomLevel,disabled:""}},[i("div",{attrs:{slot:"character"},slot:"character"},[i("div",{staticClass:"rate-bar"})])]):i("a-icon",{staticClass:"default-icon",attrs:{type:"plus-circle"}})],2):e._e(),null!==e.currentKnowledge?i("a-popover",{attrs:{trigger:"click",overlayClassName:"choose-con",visible:e.knowledgeDimensionVisible},on:{visibleChange:e.handleKnowledgeChange}},[i("template",{slot:"content"},[i("div",{staticClass:"choose-bar-title"},[e._v("Set Knowledge Dimensions")]),i("div",{staticClass:"choose-bar"},e._l(e.knowledgeLevel,(function(t,s){return i("div",{key:"knowledge_"+t.title,staticClass:"choose-bar-item",style:{background:e.COLOR_LEVEL.KNOWLEDGE[s],height:e.HEIGHT[s]+"px"},on:{click:function(i){return e.changeLevel("knowledgeDimension",t.title)}}},[i("label",[e._v(e._s(t.title))])])})),0)]),e.currentKnowledge?i("a-rate",{staticClass:"rate-bar-con super-small knowledge-color",attrs:{tooltips:e.knowledgeLevelDesc,count:e.knowledgeLevel.length,value:e.currentKnowledgeLevel,disabled:""}},[i("div",{attrs:{slot:"character"},slot:"character"},[i("div",{staticClass:"rate-bar"})])]):i("a-icon",{staticClass:"default-icon",attrs:{type:"plus-circle"}})],2):e._e()],1)},a=[],n=i("3835"),r=(i("d81d"),i("7db0"),i("d3b7"),i("3ca3"),i("ddb0"),i("f93e")),o=i("2934"),c={name:"RateLevel",props:{bloom:{type:String,default:null},knowledge:{type:String,default:null}},watch:{bloom:{handler:function(e){this.currentBloom=e}},knowledge:{handler:function(e){this.currentKnowledge=e}}},computed:{bloomLevelDesc:function(){return this.bloomLevel&&this.bloomLevel.length>0?this.bloomLevel.map((function(e){return e.title})):[]},currentBloomLevel:function(){var e=this;if(this.currentBloom&&this.bloomLevel.length>0){var t=this.bloomLevel.find((function(t){return t.text===e.currentBloom}));return t?parseInt(t.value):0}return 0},knowledgeLevelDesc:function(){return this.knowledgeLevel&&this.knowledgeLevel.length>0?this.knowledgeLevel.map((function(e){return e.title})):[]},currentKnowledgeLevel:function(){var e=this;if(this.currentKnowledge&&this.knowledgeLevel.length>0){var t=this.knowledgeLevel.find((function(t){return t.text===e.currentKnowledge}));return t?parseInt(t.value):0}return 0}},data:function(){return{COLOR_LEVEL:r["f"],bloomTagVisible:!1,knowledgeDimensionVisible:!1,HEIGHT:[20,27,35,45,56,67,78,100],currentBloom:this.bloom,currentKnowledge:this.knowledge,bloomLevel:[],knowledgeLevel:[]}},created:function(){this.initDict()},methods:{initDict:function(){var e=this;Promise.all([Object(o["a"])(r["k"]),Object(o["a"])(r["l"])]).then((function(t){var i=Object(n["a"])(t,2),s=i[0],a=i[1];s.success&&(e.bloomLevel=s.result),a.success&&(e.knowledgeLevel=a.result)}))},changeLevel:function(e,t){this[e+"Visible"]=!1,this.$emit("change",{type:e,title:t})},handleKnowledgeChange:function(e){this.knowledgeDimensionVisible=e},handleBloomChange:function(e){this.bloomTagVisible=e}}},l=c,d=(i("dec2"),i("295a"),i("0c7c")),u=Object(d["a"])(l,s,a,!1,null,"0a638762",null);t["a"]=u.exports},"3b34":function(e,t,i){"use strict";i("fde4")},4357:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"link-text",style:{"font-size":e.size+"px","line-height":e.size+"px",color:e.color,cursor:e.disabled?"not-allowed":"pointer"},on:{click:e.handleClick}},[e._t("prefix"),i("div",{staticClass:"text"},[e._v(" "+e._s(e.text)+" ")]),e._t("suffix")],2)},a=[],n=(i("a9e3"),{name:"CustomLinkText",props:{text:{type:String,default:null},color:{type:String,default:"#007A8E"},size:{type:Number,default:14},disabled:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},methods:{handleClick:function(){this.$emit("click")}}}),r=n,o=(i("671b"),i("0c7c")),c=Object(o["a"])(r,s,a,!1,null,"5d459e12",null);t["a"]=c.exports},"4362e":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cc-card"},[i("div",{staticClass:"cover-img relative-position",style:{backgroundImage:"url('"+(e.content.image||"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+"')",width:e.width+"rem"}},[e.innerDesc?i("div",{staticClass:"inner-mask"}):e._e(),e.innerDesc?i("div",{staticClass:"card-bottom-section q-pa-sm col q-gutter-xs inner-desc absolute-bottom"},[i("div",{staticClass:"type-tag"},[i("a-tag",{attrs:{color:"#15C39A"}},[e._v(e._s(e._f("type2Name")(e.content.type)))])],1),i("div",{staticClass:"card-title",attrs:{title:e.mainTitle}},[e._v(e._s(e.mainTitle))]),i("div",{staticClass:"card-sub-title",attrs:{title:e.subDescription}},[e._v(" "+e._s(e.subDescription)+" ")])]):e._e(),e.outerDesc?i("div",{staticClass:"inner-tag"},[i("a-tag",{attrs:{color:"#15C39A"}},[e._v(e._s(e._f("type2Name")(e.content.type)))])],1):e._e(),0===e.content.status&&e.content.createBy===e.$store.getters.email?i("div",{staticClass:"publish-tag"},[i("a-tooltip",{attrs:{title:"Wait to publish"}},[i("publish-icon",{staticStyle:{width:"13px",height:"14px"}})],1)],1):e._e()]),e.outerDesc?i("div",{staticClass:"card-bottom-section outer-desc",style:{width:e.width+"rem"}},[i("div",{staticClass:"main-title-line"},[i("div",{staticClass:"main-title",attrs:{title:e.mainTitle}},[e._v(" "+e._s(e.mainTitle)+" ")]),i("div",{staticClass:"main-action"},[i("a-space",[e.content.star?i("a-rate",{staticClass:"cc-library-rate",attrs:{value:e.content.star||10,disabled:""}}):e._e(),e.content.star?e._e():i("div",{staticClass:"no-review"},[e._v("No reviews")]),i("div",{staticClass:"share-icon",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[i("a-tooltip",{attrs:{trigger:"click",getPopupContainer:function(e){return e.parentElement},placement:"bottomRight"}},[i("template",{slot:"title"},[i("div",{staticClass:"detail-share"},[i("share-button",{attrs:{link:e.wrapperLink(e.content),title:e.content.name}})],1)]),i("a-icon",{attrs:{type:"share-alt"}})],2)],1)],1)],1)]),i("div",{staticClass:"sub-desc",attrs:{title:e.subDescription}},[e._v(" "+e._s(e.subDescription)+" ")])]):e._e()])},a=[],n=(i("a9e3"),i("b0c0"),i("fb6a"),i("a4d3"),i("e01a"),i("99af"),i("5fc3")),r=i("e6fe"),o=i.n(r),c={name:"CardListItem",components:{ShareButton:n["a"],PublishIcon:o.a},props:{content:{type:Object,required:!0},width:{type:Number,default:20},innerDesc:{type:Boolean,default:!1},outerDesc:{type:Boolean,default:!0}},computed:{mainTitle:function(){var e=this.content.name||"Untitled";return e.slice(0,1).toUpperCase()+e.slice(1)},subDescription:function(){return this.content.description||""}},data:function(){return{}},created:function(){},methods:{wrapperLink:function(e){if(e&&e.id){var t=this.$classcipe.getContentTypeName(e.type);return"".concat("https://www.classcipe.com","/v2/").concat(t,"/").concat(e.id)}return""}}},l=c,d=(i("a0cf"),i("0c7c")),u=Object(d["a"])(l,s,a,!1,null,"747bf6a7",null);t["a"]=u.exports},"44f5":function(e,t,i){"use strict";i.d(t,"d",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return c})),i.d(t,"e",(function(){return l})),i.d(t,"c",(function(){return d}));var s=i("b775"),a="live",n={CreateQRCode:"/classcipe/api/v2/".concat(a,"/createQRCode"),FindWorkShops:"/classcipe/api/v2/".concat(a,"/findWorkShops"),SaveRegisteredRecord:"/classcipe/api/v2/".concat(a,"/saveRegisteredRecord"),CancelRegistered:"/classcipe/api/v2/".concat(a,"/cancelRegistered"),DetailBySessionId:"/classcipe/api/v2/".concat(a,"/detailBySessionId")};function r(e){return Object(s["d"])({url:n.FindWorkShops,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(s["d"])({url:n.CreateQRCode,method:"get",responseType:"blob",params:e})}function c(e){return Object(s["d"])({url:n.CancelRegistered,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(s["d"])({url:n.SaveRegisteredRecord,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(s["d"])({url:n.DetailBySessionId,method:"get",params:e})}},4973:function(e,t,i){},"5fc3":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"share-button"},[i("div",{staticClass:"share-title"},[e._v("Share by QR code")]),i("a-spin",{attrs:{spinning:e.loading}},[i("div",{staticClass:"share-qrcode"},[i("img",{attrs:{src:e.qrCode,alt:"qrCode"}})])]),i("div",{staticClass:"share-divider"},[e._v("Or")]),i("div",{staticClass:"share-out"},[i("icon-font",{attrs:{type:"icon-Facebook"},on:{click:function(t){return e.share("fb")}}}),i("icon-font",{attrs:{type:"icon-Linkdin"},on:{click:function(t){return e.share("in")}}}),i("icon-font",{attrs:{type:"icon-Twitter"},on:{click:function(t){return e.share("twitter")}}}),i("icon-font",{attrs:{type:"icon-lianjie1"},on:{click:e.handleCopy}})],1)],1)},a=[],n=(i("99af"),i("9911"),i("d3b7"),i("44f5")),r={name:"ShareButton",props:{link:{type:String,required:!0},title:{type:String,default:"Share"}},data:function(){return{qrCode:"",loading:!1,shareLink:{fb:"https://www.facebook.com/share.php?title=".concat(this.title,"&u=").concat(encodeURIComponent(this.link)),in:"https://www.linkedin.com/shareArticle?mini=true&source=str&title=".concat(this.title,"&url=").concat(encodeURIComponent(this.link)),twitter:"https://twitter.com/intent/tweet?text=".concat(this.title,"&url=").concat(encodeURIComponent(this.link)),whatsapp:"https://api.whatsapp.com/send?text=".concat(encodeURIComponent(this.link))}}},created:function(){this.initQrcode()},methods:{initQrcode:function(){var e=this;this.link&&(this.loading=!0,Object(n["b"])({url:this.link}).then((function(t){var i=new FileReader;i.readAsDataURL(new Blob([t])),i.onload=function(){e.qrCode=i.result},i.onerror=function(){}})).finally((function(t){e.loading=!1})))},share:function(e){window.open(this.shareLink[e],"_blank")},handleCopy:function(){var e=this;this.$copyText(this.link).then((function(){e.$message.success("Copy successfully")})).catch((function(){e.$message.error("Copy failed")}))}}},o=r,c=(i("8190"),i("0c7c")),l=Object(c["a"])(o,s,a,!1,null,"35e10260",null);t["a"]=l.exports},"65a0":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"price-slider"},[i("a-slider",{attrs:{marks:e.marks,"tip-formatter":e.tipFormatter,min:e.min,max:e.max,disabled:e.disabled},model:{value:e.currentVal,callback:function(t){e.currentVal=t},expression:"currentVal"}}),i("div",{ref:"sliderLabel",staticClass:"slider-label"},e._l(e.lines,(function(t,s){return i("div",{key:"line_"+s,class:{"slider-label-item":!0,current:t.isCurrent,origin:t.isOrigin},style:{left:t.left,width:t.width}},[t.isCurrent?i("a-tooltip",{attrs:{title:e.tipFormatter(t.label)}},[e._v(e._s(t.label))]):[e._v(e._s(t.label))]],2)})),0)],1)},a=[],n=i("2909"),r=i("5530"),o=(i("a9e3"),i("d81d"),i("159b"),i("99af"),i("f93e")),c=i("2f62"),l=i("944d"),d={name:"PriceSlider",props:{current:{type:[Number],default:0},origin:{type:[Number],default:null},priceList:{type:Array,default:function(){return[{value:1,price:10},{value:10,price:8},{value:50,price:5}]}}},watch:{current:{handler:function(e){this.currentVal=e},immediate:!0}},data:function(){return{datas:this.priceList.map((function(e){return{value:e.value||e.registeredNum,price:e.price}})),result:null,currentVal:this.current,min:0,disabled:!0}},computed:Object(r["a"])(Object(r["a"])({},Object(c["e"])({device:function(e){return e.app.device}})),{},{PREFIX:function(){return this.device===o["j"].DESKTOP?" person":" p"},PREFIXS:function(){return this.device===o["j"].DESKTOP?" people":" p"},max:function(){var e=this.datas.map((function(e){return e.value})),t=Math.max.apply(Math,Object(n["a"])(e));return Math.max.apply(Math,Object(n["a"])(e))+Math.floor(t/this.datas.length)||1},marks:function(){var e=this,t=this.datas.map((function(e){return e.value})).sort(),i={};return t.forEach((function(t,s){i[t]=t+(t>1?e.PREFIXS:e.PREFIX)})),i},lines:function(){var e=this.datas.map((function(e){return e.price})),t=this.datas.concat([{value:this.max}]);t=Object(l["a"])(t,"value");var i=[],s=!0;null!==this.origin&&i.push({width:"",left:0,isOrigin:!0,label:"$"+this.origin});for(var a=1;a<t.length;a++){var n=(t[a-1].value-this.min)/(this.max-this.min)*100+"%";i.push({width:"",left:n,label:"$"+e[a-1]})}if(this.currentVal&&this.currentVal>0&&s){var r=Math.min((this.currentVal-this.min)/(this.max-this.min)*100,100)+"%";i.push({left:"calc(".concat(r," - 0px)"),width:"auto",label:this.currentVal,isCurrent:!0})}return i}}),methods:{tipFormatter:function(e){var t=this.currentVal>1?this.PREFIXS:this.PREFIX;return"".concat(this.currentVal," ").concat(t," already registered")}}},u=d,h=(i("1c40"),i("0c7c")),v=Object(h["a"])(u,s,a,!1,null,"2aef589c",null);t["a"]=v.exports},"671b":function(e,t,i){"use strict";i("adbe")},"68f0":function(e,t,i){var s=i("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{t:"1651925668470",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3847","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"48",height:"48"},children:[{tag:"defs"},{tag:"path",attrsMap:{d:"M0.558545 512a512 511.441455 90 1 0 1022.88291 0 512 511.441455 90 1 0-1022.88291 0Z",fill:"#686C7A","p-id":"3848"}},{tag:"path",attrsMap:{d:"M703.953455 622.703709a76.576582 76.576582 0 0 0-71.493819 44.776727l-238.312727-116.233309a97.745455 97.745455 0 0 0 11.357091-73.858327l149.690182-111.355345a79.872 79.872 0 0 0 48.965818 16.160581 79.387927 79.387927 0 1 0-78.568727-79.387927 83.781818 83.781818 0 0 0 5.957818 31.390255l-142.056727 104.429381a100.296145 100.296145 0 0 0-82.664728-47.085381A101.804218 101.804218 0 0 0 205.358545 493.549382v0.465454a101.673891 101.673891 0 0 0 101.096728 102.4h0.372363a105.304436 105.304436 0 0 0 56.599273-15.676509l261.771636 126.380218a78.773527 78.773527 0 1 0 78.75491-84.47069z",fill:"#FFFFFF","p-id":"3849"}}]})}},"6b36":function(e,t,i){"use strict";i.r(t),i.d(t,"reviewsTaskAPIUrl",(function(){return a})),i.d(t,"ReviewsTaskSave",(function(){return n})),i.d(t,"ReviewsTaskList",(function(){return r})),i.d(t,"ReviewsTaskMyReview",(function(){return o})),i.d(t,"ReviewsTaskStats",(function(){return c})),i.d(t,"ReviewsTaskDelete",(function(){return l})),i.d(t,"ReviewsTaskMyReviewBySession",(function(){return d})),i.d(t,"getReviewsStatByContentId",(function(){return u}));var s=i("b775"),a={delete:"/classcipe/api/reviewsTask/delete",getMyReviews:"/classcipe/api/reviewsTask/library/getMyReviews",getMyReviewsSession:"/classcipe/api/reviewsTask/session/getMyReviews",getReviewsStat:"/classcipe/api/reviewsTask/library/getReviewsStat",list:"/classcipe/api/reviewsTask/list",save:"/classcipe/api/reviewsTask/save",getReviewsStatByContentId:"/classcipe/api/reviewsTask/getReviewsStatByContentId"};function n(e){return Object(s["d"])({url:a.save,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(s["d"])({url:a.list,method:"get",params:e})}function o(e){return Object(s["d"])({url:a.getMyReviews,method:"get",params:e})}function c(e){return Object(s["d"])({url:a.getReviewsStat,method:"get",params:e})}function l(e){return Object(s["d"])({url:a.delete+"?id="+e.id,method:"get",data:e})}function d(e){return Object(s["d"])({url:a.getMyReviewsSession,method:"get",params:e})}function u(e){return Object(s["d"])({url:a.getReviewsStatByContentId,method:"get",params:e})}},"6c27":function(e,t,i){},"6f26":function(e,t,i){"use strict";i("20b5")},"70fe":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticClass:"content-preview-detail",attrs:{id:e.contentId+"box"}},[e.showTopFixedHeader&&e.content&&e.displayFixedHeader?i("div",{staticClass:"top-fixed-header"},[i("div",{staticClass:"header-left"},[i("div",{staticClass:"back vertical-left",on:{click:e.handleClose}},[i("a-icon",{attrs:{type:"left"}}),i("div",{staticClass:"back-text"},[e._v(" Back ")])],1),i("a-space",{staticClass:"name"},[e._v(" "+e._s(e.liveWorkShopSession&&e.liveWorkShopSession.title||e.content.name||"Untitled")+" "),e.liveWorkShopCode&&e.liveWorkShopSession&&e.liveWorkShopSession.sessionStartTime?i("label",{attrs:{for:""}},[e._v(" "+e._s(e._f("dayjs")(e.liveWorkShopSession.sessionStartTime,"YYYY-MM-DD HH:mm"))+" - "+e._s(e._f("dayjs")(e.liveWorkShopSession.sessionEndTime,"YYYY-MM-DD HH:mm"))+" ")]):e._e()])],1),i("div",{staticClass:"header-right"},[i("div",{staticClass:"buy-button vertical-right"},[i("a-space",[e.liveWorkShopCode?i("a-space",[e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.REGISTERED.value===e.liveWorkShopSession.workshopsType&&e.isReadyStart24(e.liveWorkShopSession)&&e.WORK_SHOPS_STATUS.ENDED.value!==e.liveWorkShopSession.workshopsStatus?i("a-button",{staticClass:"buy-now",attrs:{type:"danger",shape:"round",loading:e.buyLoading},on:{click:e.handleCancelSession}},[e._v(" Cancel ")]):e._e(),!e.liveWorkShopSession||e.WORK_SHOPS_TYPE.REGISTERED.value!==e.liveWorkShopSession.workshopsType||e.isReadyStart24(e.liveWorkShopSession)&&e.WORK_SHOPS_STATUS.ENDED.value!==e.liveWorkShopSession.workshopsStatus?e._e():i("div",{staticClass:"label-action"},[e._v(" Registered ")]),e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.FEATURE.value===e.liveWorkShopSession.workshopsType&&e.liveWorkShopSession.session&&(!e.filterDeadline||e.moment.utc(e.filterDeadline).local().isAfter(e.moment()))?i("a-button",{attrs:{shape:"round",type:"primary",loading:e.buyLoading},on:{click:e.handleRegisterSession}},[e._v(" Register ")]):e._e(),i("a-tooltip",{attrs:{title:"Expired"}},[e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.FEATURE.value===e.liveWorkShopSession.workshopsType&&e.liveWorkShopSession.session&&e.filterDeadline&&e.moment.utc(e.filterDeadline).local().isBefore(e.moment())?i("a-button",{attrs:{shape:"round",type:"primary",disabled:!0,loading:e.buyLoading}},[e._v(" Register ")]):e._e()],1)],1):i("a-space",[e.content.createBy!==e.$store.getters.userInfo.email&&e.showBuyButton&&!e.content.buyed?i("a-button",{staticClass:"buy-now",attrs:{type:"danger",shape:"round",loading:e.buyLoading},on:{click:e.handleBuyItem}},[e._v(" Buy now ")]):e._e(),e.content.createBy!==e.$store.getters.userInfo.email&&e.showBuyButton&&e.content.buyed&&-1!=e.content.myContentId?i("a-button",{staticClass:"cc-dark-button",attrs:{shape:"round"},on:{click:e.handleEditBuy}},[e._v(" Edit ")]):e._e(),i("a-tooltip",{attrs:{title:"You have already purchased this content, please copy it directly",placement:"top"}},[e.showBuyButton&&e.content.createBy!==e.$store.getters.userInfo.email&&e.content.buyed&&-1==e.content.myContentId?i("a-button",{attrs:{shape:"round",type:"primary",loading:e.copyLoading,icon:"copy"},on:{click:e.handleDuplicateItem}},[e._v(" Copy ")]):e._e()],1)],1)],1)],1),i("div",{staticClass:"more-action vertical-right"},[i("a-tooltip",{attrs:{trigger:"click",getPopupContainer:function(e){return e.parentElement},placement:"bottomRight"}},[i("template",{slot:"title"},[i("div",{staticClass:"detail-share"},[e.content?i("share-button",{attrs:{link:e.wrapperLink(e.content),title:e.content.name}}):e._e()],1)]),i("icon-font",{staticClass:"detail-font",attrs:{type:"icon-share"}})],2)],1)])]):e._e(),i("div",{staticClass:"preview-carousel-wrapper"},[e.carouselContentLoading?e._e():i("preview-carousel",{attrs:{"filter-page-object-list":e.filterThumbnailList,"filter-video-list":e.filterVideoList,"page-object-list":e.thumbnailList,"video-list":e.videoList}}),e.carouselContentLoading?i("a-skeleton"):e._e()],1),e.content?i("div",{staticClass:"preview-main-content"},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[i("a-space",{staticClass:"content-info-item"},[i("div",{staticClass:"cc-ellipsis cc-info-left",attrs:{span:"24"}},[i("h3",[e._v(e._s(e.liveWorkShopSession&&e.liveWorkShopSession.title||e.content.name||"Untitled"))])]),i("div",{staticClass:"more-action",staticStyle:{"margin-bottom":"8px"}},[i("a-tooltip",{attrs:{trigger:"click",getPopupContainer:function(e){return e.parentElement},placement:"bottomRight"}},[i("template",{slot:"title"},[i("div",{staticClass:"detail-share"},[e.content?i("share-button",{attrs:{link:e.wrapperLink(e.content),title:e.liveWorkShopSession&&e.liveWorkShopSession.title||e.content.name}}):e._e()],1)]),i("icon-font",{staticClass:"detail-font",attrs:{type:"icon-share"}})],2)],1)]),i("a-space",{attrs:{direction:"vertical"}},[e.liveWorkShopCode&&e.liveWorkShopSession&&e.liveWorkShopSession.sessionStartTime?i("label",{attrs:{for:""}},[i("span",{staticStyle:{display:"inline-block",width:"150px"}},[e._v("Scheduled:")]),e._v(" "+e._s(e._f("dayjs")(e.liveWorkShopSession.sessionStartTime,"YYYY-MM-DD HH:mm"))+" - "+e._s(e._f("dayjs")(e.liveWorkShopSession.sessionEndTime,"YYYY-MM-DD HH:mm"))+" ")]):e._e(),e.liveWorkShopCode&&e.liveWorkShopSession&&e.liveWorkShopSession.session.register&&e.liveWorkShopSession.session.register.registerBefore&&e.WORK_SHOPS_TYPE.FEATURE.value===e.liveWorkShopSession.workshopsType?i("label",{attrs:{for:""}},[i("span",{staticStyle:{display:"inline-block",width:"150px"}},[e._v("Registration Deadline:")]),e._v(" "+e._s(e._f("countDown")(e.filterDeadline))+" ")]):e._e()])],1),i("a-row",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.visibilityChanged,expression:"visibilityChanged"}],staticClass:"content-info-item"},[i("a-col",{staticClass:"cc-ellipsis cc-info-left",attrs:{lg:{span:12},xs:{span:24}}},[i("div",{staticClass:"author-info"},[i("div",{staticClass:"author-avatar"},[i("a-tooltip",{attrs:{title:e.showAvatarTips?"0"===e.session.schoolId?"Personal":e.session.schoolName:""}},[e.isSchoolResource?i("a-avatar",{attrs:{size:"large",src:e.currentSchool.logo}}):e.content.owner.avatar?i("a-avatar",{attrs:{size:"large",src:e.content.owner.avatar}}):i("a-avatar",{staticStyle:{"background-color":"#517f3f"},attrs:{size:"large"}},[e._v(e._s((e.content.owner?e.content.owner.firstname+" "+e.content.owner.lastname:e.content.createBy).toUpperCase()[0]))])],1)],1),i("div",{staticClass:"author-info-detail"},[e.isSchoolResource?i("div",{staticClass:"author-name"},[e._v(e._s(e.currentSchool.schoolName))]):i("div",{staticClass:"author-name"},[e._v(" "+e._s(e._f("upCaseFirst")(e.content.owner?e.content.owner.firstname+" "+e.content.owner.lastname:e.content.createBy))+" ")]),i("div",{staticClass:"rate-star"},[i("review-stat",{attrs:{contentId:e.contentId},on:{goReviews:e.goReviews}}),i("div",{staticClass:"star-info"},[i("a-space",{attrs:{size:15}},[i("div",{staticClass:"start-it",on:{click:e.handleFavorite}},[i("div",{staticClass:"favorite"},[e.favoriteFlag?i("a-icon",{style:{color:"#fb0"},attrs:{type:"heart",theme:"filled"}}):e._e(),e.favoriteFlag?e._e():i("a-icon",{attrs:{type:"heart"}})],1),i("div",{staticClass:"favorite-num"},[e._v(" "+e._s(e.stat&&e.stat.saved||0)+" ")])]),i("div",{staticClass:"sales"},[e._v(" Sales "+e._s(e.stat&&e.stat.sold||0)+" ")])])],1)],1)])])]),i("a-col",{staticClass:"cc-info-right",attrs:{lg:{span:12},xs:{span:24}}},[e.liveWorkShopCode?i("div",{staticClass:"live-price-info"},[e.showPriceInfo&&e.liveWorkShopSession&&e.liveWorkShopSession.priceList&&e.liveWorkShopSession.priceList.length>0?i("div",{staticClass:"share-live-price"},[e.liveWorkShopSession?i("price-slider",{attrs:{priceList:e.liveWorkShopSession.priceList,current:e.liveWorkShopSession.registeredNum,origin:e.liveWorkShopSession.price}}):e._e()],1):i("div"),e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.LUNCHEDBYME.value!==e.liveWorkShopSession.workshopsType?i("div",{staticClass:"buy-button"},[i("a-space",[e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.REGISTERED.value===e.liveWorkShopSession.workshopsType&&e.isReadyStart24(e.liveWorkShopSession)&&e.WORK_SHOPS_STATUS.ENDED.value!==e.liveWorkShopSession.workshopsStatus?i("a-button",{staticClass:"buy-now",attrs:{type:"danger",shape:"round",loading:e.buyLoading},on:{click:e.handleCancelSession}},[e._v(" Cancel ")]):e._e(),!e.liveWorkShopSession||e.WORK_SHOPS_TYPE.REGISTERED.value!==e.liveWorkShopSession.workshopsType||e.isReadyStart24(e.liveWorkShopSession)&&e.WORK_SHOPS_STATUS.ENDED.value!==e.liveWorkShopSession.workshopsStatus?e._e():i("div",{staticClass:"label-action"},[e._v(" Registered ")]),e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.FEATURE.value===e.liveWorkShopSession.workshopsType&&e.liveWorkShopSession.session&&(!e.filterDeadline||e.moment.utc(e.filterDeadline).local().isAfter(e.moment()))?i("a-button",{attrs:{shape:"round",type:"primary",loading:e.buyLoading},on:{click:e.handleRegisterSession}},[e._v(" Register ")]):e._e(),i("a-tooltip",{attrs:{title:"Expired"}},[e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.FEATURE.value===e.liveWorkShopSession.workshopsType&&e.liveWorkShopSession.session&&e.filterDeadline&&e.moment.utc(e.filterDeadline).local().isBefore(e.moment())?i("a-button",{attrs:{shape:"round",type:"primary",disabled:!0,loading:e.buyLoading}},[e._v(" Register ")]):e._e()],1)],1)],1):e._e()]):i("div",{staticClass:"col-info"},[i("div",{staticClass:"price-info"},[i("a-space",{directives:[{name:"show",rawName:"v-show",value:e.showPriceInfo&&(!e.schoolResource||!(e.content.buyed&&-1==e.content.myContentId)),expression:"showPriceInfo && (!schoolResource || !(content.buyed && content.myContentId == -1))"}],attrs:{size:5}},[i("div",{staticClass:"discount-price"},[e._v(" $"+e._s(e.content.discountPrice||e.content.price||0)+" ")]),e.content.discountPrice>0&&e.content.discountPrice!==e.content.price?i("div",{staticClass:"price_was"},[e._v("$"+e._s(e.content.price))]):e._e()])],1),i("div",{staticClass:"buy-button"},[i("a-space",[e.content.createBy!==e.$store.getters.userInfo.email&&e.showBuyButton&&!e.content.buyed?i("a-button",{staticClass:"buy-now",attrs:{type:"danger",shape:"round",loading:e.buyLoading},on:{click:e.handleBuyItem}},[e._v(" Buy now ")]):e._e(),e.content.createBy!==e.$store.getters.userInfo.email&&e.showEditButton&&e.content.buyed&&-1!=e.content.myContentId?i("a-button",{staticClass:"cc-dark-button",attrs:{shape:"round"},on:{click:e.handleEditBuy}},[e._v(" Edit ")]):e._e(),e.showCopyButton&&e.content.createBy!==e.$store.getters.userInfo.email&&e.content.buyed&&-1==e.content.myContentId?i("a-button",{attrs:{shape:"round",type:"primary",loading:e.copyLoading,icon:"copy"},on:{click:e.handleDuplicateItem}},[e._v(" Copy ")]):e._e()],1)],1)])])],1),i("div",{staticClass:"split-line"}),!e.liveWorkShopCode&&e.content.createBy===e.$store.getters.userInfo.email&&e.showEditButton?i("div",{staticClass:"edit-content"},[i("a-button",{staticClass:"cc-dark-button",staticStyle:{width:"90px"},attrs:{shape:"round"},on:{click:e.handleEdit}},[e._v("Edit")])],1):e._e(),e.content.customTags&&e.content.customTags.length?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Tags ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"preview-tag-list"},e._l(e.content.customTags,(function(t,s){return i("div",{key:s,staticClass:"skt-tag-item"},[i("a-tag",{staticClass:"tag-item cc-custom-tag-item"},[e._v(e._s(t.name||t.category))])],1)})),0)])])]:e._e(),e.content.name&&e.content.name.trim()&&e.contentType!==e.typeMap.pd?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title",style:{color:e.labelColor.name}},[e.content.type===e.typeMap.task?[e._v("Title")]:e._e(),e.content.type!==e.typeMap.task?[e._v("Name")]:e._e()],2),i("div",{staticClass:"content-detail"},[e._v(" "+e._s(e.content.name)+" ")])])]:e._e(),e.content.hasOwnProperty("videoList")&&e.contentType===e.typeMap.video?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Purpose of video ")]),i("div",{staticClass:"content-detail"},[0===e.content.contentType?[e._v("Student self-learning")]:e._e(),1===e.content.contentType?[e._v("Teacher PD")]:e._e()],2)])]:e._e(),e.content.goals&&e.contentType===e.typeMap.pd?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" PD goals ")]),i("div",{staticClass:"content-detail"},[e._v(" "+e._s(e.content.goals)+" ")])])]:e._e(),e.content.video&&e.contentType!==e.typeMap.video?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Video ")]),i("div",{staticClass:"content-detail video-detail"},[i("video",{staticClass:"video-item",attrs:{src:e.content.video,autoplay:"",controls:""}})])])]:e._e(),e.content.overview&&e.content.overview.trim()?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title",style:{color:e.labelColor.overview}},[e.content.type===e.typeMap.task?[e._v("Task Detail")]:e._e(),e.content.type!==e.typeMap.task?[e._v("Overview")]:e._e()],2),i("div",{staticClass:"content-detail"},[e._v(" "+e._s(e.content.overview)+" ")])])]:e._e(),e.content.inquiry&&e.content.inquiry.trim()?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title",style:{color:e.labelColor.bigIdea}},[e._v(" Big Idea/ Statement of Inquiry/ Central Idea ")]),i("div",{staticClass:"content-detail"},[e._v(" "+e._s(e.content.inquiry)+" ")])])]:e._e(),e.content.questions&&e.content.questions.length?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title",style:{color:e.labelColor.keyQuestion}},[e._v(" Key question(s) / Line(s) of inquiry ")]),i("div",{staticClass:"content-detail"},e._l(e.content.questions,(function(t,s){return i("div",{key:s,staticClass:"content-detail-item"},[e._v(" "+e._s(t.name)+" ")])})),0)])]:e._e(),e.content.subjectList&&e.content.subjectList.length?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Subject ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"subject-list vertical-left"},e._l(e.content.subjectList,(function(t){return i("div",{key:t,staticClass:"subject-item"},[e._v(" "+e._s(t)+" ")])})),0)])])]:e._e(),e.content.yearList||e.content.unitType||e.content.projectBased?i("a-row",{staticClass:"line-data"},[e.content.yearList.length?i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Grade Level : ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"subject-list vertical-left"},[e.content.yearList?[e._v(" "+e._s(e.content.yearList.join(", "))+" ")]:e._e()],2)])]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.content.unitType,expression:"content.unitType !== undefined"}],staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Unit type : ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"subject-list vertical-left"},[0===e.content.unitType?[e._v("Single-subject Unit")]:e._e(),1===e.content.unitType?[e._v("Integrated Unit")]:e._e()],2)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.content.projectBased,expression:"content.projectBased !== undefined"}],staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Project-based Unit : ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"subject-list vertical-left"},[0===e.content.projectBased?[e._v("No")]:e._e(),1===e.content.projectBased?[e._v("Yes")]:e._e()],2)])])]):e._e(),i("div",{staticClass:"line-split"}),e.content.learnOuts&&e.content.learnOuts.length?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Learning Objectives ")]),i("div",{staticClass:"content-detail"},e._l(e.content.learnOuts,(function(t,s){return i("div",{key:s,staticClass:"content-detail-item"},[i("div",{staticClass:"desc-item"},[e._v(" "+e._s(t.desc)+" ")]),i("div",{staticClass:"more-tag vertical-left"},[i("div",{staticClass:"item-bloom-wrapper"},[i("div",{staticClass:"bloom-wrapper"},[i("label",[e._v("Bloom's Taxonomy:")]),i("rate-level",{attrs:{bloom:t.bloomTag||""}})],1),i("div",{staticClass:"bloom-wrapper"},[i("label",[e._v("Knowledge Dimensions:")]),i("rate-level",{attrs:{knowledge:t.knowledgeDimension||""}})],1)])]),i("div",{staticClass:"more-tag"},[t.commandTerms&&t.commandTerms.length>0?i("div",{staticClass:"item-command-wrapper"},[i("label",[e._v("Command Term:")]),i("div",{staticClass:"wrapper-list"},e._l(t.commandTerms,(function(t){return i("div",{key:t.name,staticClass:"wrapper-list-item"},[i("a-tag",{staticClass:"command-tag"},[i("div",{staticClass:"tag-content"},[e._v(e._s(t.name))])])],1)})),0)]):e._e(),t.knowledgeTags&&t.knowledgeTags.length>0?i("div",{staticClass:"item-command-wrapper"},[i("label",[e._v("Knowledge tag:")]),i("div",{staticClass:"wrapper-list"},e._l(t.knowledgeTags,(function(t){return i("div",{key:t.name,staticClass:"wrapper-list-item"},[i("a-tag",{staticClass:"command-tag knowledge"},[i("div",{staticClass:"tag-content"},[e._v(e._s(t.name))])])],1)})),0)]):e._e()])])})),0)])]:e._e(),i("div",{staticClass:"line-split"}),e.showSubtask&&e.content.subTasks&&e.content.subTasks.length?i("div",{staticClass:"card-list-wrapper"},[i("div",{staticClass:"card-list-title"},[i("div",{staticClass:"sub-task-title"},[e._v(" Sub tasks ("+e._s(e.content.subTasks.length)+") ")]),!e.showEnterButton||e.isLibrary||e.schoolResource?e._e():i("div",{staticClass:"go-to-list"},[i("custom-link-text",{directives:[{name:"show",rawName:"v-show",value:e.content.createBy===e.$store.getters.email,expression:"content.createBy === $store.getters.email"}],attrs:{text:"Enter"},on:{click:e.goToSubTaskList}})],1)]),i("div",{staticClass:"scroll-left",on:{click:function(t){return e.scrollLeft("subTask")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"left-circle"}})],1),i("div",{staticClass:"scroll-right",on:{click:function(t){return e.scrollRight("subTask")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"right-circle"}})],1),i("div",{staticClass:"card-list",attrs:{id:"subTask"}},e._l(e.content.subTasks,(function(t,s){return i("div",{key:s,staticClass:"card-item",on:{click:function(i){return e.handlePreviewItem(t)}}},[i("card-list-item",{attrs:{content:t,width:16,"inner-desc":!1,"outer-desc":!0}})],1)})),0)]):e._e(),e.showRelated&&e.associateList.length?i("div",{staticClass:"card-list-wrapper"},[i("div",{staticClass:"card-list-title"},[i("div",{staticClass:"sub-task-title"},[e.associateList[0].type===e.typeMap["unit-plan"]?[e._v("Related Unit")]:e._e(),e.associateList[0].type===e.typeMap.task?[e._v("Related Task")]:e._e(),e._v(" ("+e._s(e.associateList.length)+") ")],2),!e.showEnterButton||e.isLibrary||e.schoolResource?e._e():i("div",{staticClass:"go-to-list"},[i("custom-link-text",{directives:[{name:"show",rawName:"v-show",value:e.content.createBy===e.$store.getters.email,expression:"content.createBy === $store.getters.email"}],attrs:{text:"Enter"},on:{click:e.goTLinkList}})],1)]),i("div",{staticClass:"scroll-left",on:{click:function(t){return e.scrollLeft("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"left-circle"}})],1),i("div",{staticClass:"scroll-right",on:{click:function(t){return e.scrollRight("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"right-circle"}})],1),i("div",{staticClass:"card-list",attrs:{id:"taskUnit"}},e._l(e.associateList,(function(t,s){return i("div",{key:s,staticClass:"card-item",on:{click:function(i){return e.handlePreviewItem(t)}}},[i("card-list-item",{attrs:{content:t,width:16,"inner-desc":!1,"outer-desc":!0}})],1)})),0)]):e._e(),e.showRelated&&e.associateVideoList.length?i("div",{staticClass:"card-list-wrapper"},[i("div",{staticClass:"card-list-title"},[i("div",{staticClass:"sub-task-title"},[e._v(" Video ("+e._s(e.associateVideoList.length)+") ")]),i("div",{staticClass:"go-to-list"})]),i("div",{staticClass:"scroll-left",on:{click:function(t){return e.scrollLeft("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"left-circle"}})],1),i("div",{staticClass:"scroll-right",on:{click:function(t){return e.scrollRight("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"right-circle"}})],1),i("div",{staticClass:"card-list",attrs:{id:"video"}},e._l(e.associateVideoList,(function(t,s){return i("div",{key:s,staticClass:"card-item",on:{click:function(i){return e.handlePreviewItem(t)}}},[i("card-list-item",{attrs:{content:t,width:16,"inner-desc":!1,"outer-desc":!0}})],1)})),0)]):e._e(),e.showRecommend&&e.associateRecommendList.length?i("div",{staticClass:"card-list-wrapper"},[e._m(0),i("div",{staticClass:"scroll-left",on:{click:function(t){return e.scrollLeft("associateRecommendList")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"left-circle"}})],1),i("div",{staticClass:"scroll-right",on:{click:function(t){return e.scrollRight("associateRecommendList")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"right-circle"}})],1),i("div",{staticClass:"card-list",attrs:{id:"associateRecommendList"}},e._l(e.associateRecommendList,(function(t,s){return i("div",{key:s,staticClass:"card-item",on:{click:function(i){return e.handlePreviewItem(t)}}},[i("card-list-item",{attrs:{content:t,width:16,"inner-desc":!1,"outer-desc":!0}})],1)})),0)]):e._e()],2):e._e(),i("div",{staticClass:"preview-extra-data"}),i("div",{staticClass:"preview-review",attrs:{id:"reviews"}},[i("a-row",{staticClass:"reviews-info"},["student"===e.currentRole?i("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[i("rate-by-percent",{attrs:{rates:e.reviewsStats}}),i("reviews-preview",{attrs:{id:e.contentId,role:"student",needSearch:!1,list:e.ReviewsTask.ReviewsTaskList,save:e.ReviewsTask.ReviewsTaskSave,del:e.ReviewsTask.ReviewsTaskDelete,myReview:e.ReviewsTask.ReviewsTaskMyReview}})],1):i("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[i("reviews-preview",{attrs:{id:e.contentId,role:"teacher",needSearch:!1,list:e.ReviewsTeacher.ReviewsTeacherList,save:e.ReviewsTeacher.ReviewsTeacherSave,del:e.ReviewsTeacher.ReviewsTeacherDelete,myReview:e.ReviewsTeacher.ReviewsTeacherMyReview,canEdit:e.reviewEdit,canCreate:e.reviewCreate&&!!(e.content&&e.content.createBy!==e.$store.getters.userInfo.email&&e.showBuyButton&&e.showCopyButton),canList:e.reviewList},on:{update:e.loadReviewStats}})],1)],1)],1),i("div",{staticClass:"preview-recommend"}),e.previewVisible?i("content-preview",{attrs:{"content-id":e.previewCurrentId,"content-type":e.previewType,"allow-preview-sub-content":!1,"review-edit":e.reviewEdit,"review-create":e.reviewCreate,"review-list":e.reviewList,"is-library":e.isLibrary,"school-resource":e.schoolResource},on:{close:e.handlePreviewClose}}):e._e(),i("a-modal",{attrs:{title:null,closable:!1,"append-to-body":!0,"destroy-on-close":!1,width:"500px"},on:{ok:e.handleEnsureBuyStat,cancel:e.handleCancelBuyStat},model:{value:e.contentBuyStatVisible,callback:function(t){e.contentBuyStatVisible=t},expression:"contentBuyStatVisible"}},[i("modal-header",{attrs:{title:"Which age(s) will you use this resource with?"},on:{close:e.handleCancelBuyStat}}),i("div",{staticClass:"grade-list"},[i("div",{staticClass:"content-tag-list"},e._l(e.allAges,(function(t){return i("div",{key:t.value,staticClass:"content-tag",class:{"selected-tag":-1!==e.selectedGradeList.indexOf(t.value)},on:{click:function(i){return e.toggleSelectContentTag(t.value)}}},[e._v(" "+e._s(t.name)+" ")])})),0)])],1),i("a-back-top",{attrs:{target:e.topTarget,visibilityHeight:100}})],1)},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-list-title"},[i("div",{staticClass:"sub-task-title"},[e._v(" Recommend ")])])}],n=i("1da1"),r=i("2909"),o=i("5530"),c=(i("96cf"),i("a9e3"),i("d81d"),i("a630"),i("3ca3"),i("d3b7"),i("6062"),i("ddb0"),i("4de4"),i("99af"),i("fb6a"),i("caad"),i("2532"),i("159b"),i("b0c0"),i("a434"),i("d350")),l=i("de0d"),d=i("980a"),u=i("b199"),h=i("093a"),v=i("c621"),p=i("9afb"),f=i("2f62"),m=i("823b"),g=i("ca00"),y=i("d33b"),b=i("1b72"),w=i("95c6"),S=i("4362e"),C=i("2f59"),_=i("68f0"),k=i.n(_),R=i("d980"),L=i("dd6e"),I=i("abb8"),T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-popover",{attrs:{placement:"bottom"}},[i("template",{slot:"content"},[i("div",{staticClass:"review-stat"},[i("div",{staticClass:"review-stat-content"},[i("div",{staticClass:"review-stat-overall"},[i("div",{staticClass:"content-title"},[e._v(" Ratings ")]),e._l(e.reviews,(function(t,s){return i("a-space",{key:"percent_"+s,staticClass:"detail-bar",attrs:{align:"center"}},[i("span",[e._v(e._s(t.reviewsScore)+" star(s)")]),i("a-progress",{style:{width:e.progressWidth},attrs:{strokeLinecap:"square",strokeColor:"#FFBB00",percent:t.reviewsScoreRate,showInfo:!1}}),i("span",[e._v(e._s(e._f("NumberFormat")(t.reviewsScoreCount)))])],1)}))],2),i("div",{staticClass:"review-stat-chart"},[i("div",{staticClass:"content-title"},[e._v(" Ages used with ")]),i("e-bar",{attrs:{datas:e.charts}})],1)]),i("div",{staticClass:"review-divider"}),i("div",{staticClass:"review-stat-opt"},[i("a-button",{attrs:{type:"link"},on:{click:e.goAll}},[e._v("See all reviews")])],1)])]),i("a-rate",{attrs:{value:e.reviewsStats.overall,"allow-half":"",disabled:""}})],2)},O=[],x=i("3835"),E=(i("07ac"),i("c2e5")),j=i("23f6"),B=i("6b36"),D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"chartGraph",style:{height:e.height}},[i("v-chart",{ref:"chart",attrs:{option:e.options,autoresize:!0}})],1)},P=[],A=i("22b4"),F=i("f95e"),M=i("6d8b"),$=i("9d57"),W=i("fdde"),N=i("7fae"),V=i("4f85"),U=i("1830"),H=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return Object(N["a"])(t,e),t.prototype.getInitialData=function(e,t){return Object(U["a"])(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e){var t=this.coordinateSystem;if(t&&t.clampData){var i=t.dataToPoint(t.clampData(e)),s=this.getData(),a=s.getLayout("offset"),n=s.getLayout("size"),r=t.getBaseAxis().isHorizontal()?0:1;return i[r]+=a+n/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(V["a"]);V["a"].registerClass(H);var q=H,z=i("8918"),Y=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return Object(N["a"])(t,e),t.prototype.getInitialData=function(){return Object(U["a"])(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,i){return i.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Object(z["d"])(q.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(q),G=Y,K=i("cbe5"),Q=i("2dc5"),X=i("2306"),J=i("deab"),Z=i("c7a2"),ee=i("4aa2"),te=i("861c"),ie=i("7d6c"),se=i("7837"),ae=i("88b3"),ne=i("b0af"),re=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}return e}(),oe=function(e){function t(t){var i=e.call(this,t)||this;return i.type="sausage",i}return Object(N["a"])(t,e),t.prototype.getDefaultShape=function(){return new re},t.prototype.buildPath=function(e,t){var i=t.cx,s=t.cy,a=Math.max(t.r0||0,0),n=Math.max(t.r,0),r=.5*(n-a),o=a+r,c=t.startAngle,l=t.endAngle,d=t.clockwise,u=2*Math.PI,h=d?l-c<u:c-l<u;h||(c=l-(d?u:-u));var v=Math.cos(c),p=Math.sin(c),f=Math.cos(l),m=Math.sin(l);h?(e.moveTo(v*a+i,p*a+s),e.arc(v*o+i,p*o+s,r,-Math.PI+c,c,!d)):e.moveTo(v*n+i,p*n+s),e.arc(i,s,n,c,l,!d),e.arc(f*o+i,m*o+s,r,l-2*Math.PI,l-Math.PI,!d),0!==a&&e.arc(i,s,a,l,c,d)},t}(K["b"]),ce=oe,le=i("e887"),de=i("5426"),ue=i("c775"),he=i("e86a");function ve(e,t){t=t||{};var i=t.isRoundCap;return function(t,s,a){var n=s.position;if(!n||n instanceof Array)return Object(he["c"])(t,s,a);var r=e(n),o=null!=s.distance?s.distance:5,c=this.shape,l=c.cx,d=c.cy,u=c.r,h=c.r0,v=(u+h)/2,p=c.startAngle,f=c.endAngle,m=(p+f)/2,g=i?Math.abs(u-h)/2:0,y=Math.cos,b=Math.sin,w=l+u*y(p),S=d+u*b(p),C="left",_="top";switch(r){case"startArc":w=l+(h-o)*y(m),S=d+(h-o)*b(m),C="center",_="top";break;case"insideStartArc":w=l+(h+o)*y(m),S=d+(h+o)*b(m),C="center",_="bottom";break;case"startAngle":w=l+v*y(p)+fe(p,o+g,!1),S=d+v*b(p)+me(p,o+g,!1),C="right",_="middle";break;case"insideStartAngle":w=l+v*y(p)+fe(p,-o+g,!1),S=d+v*b(p)+me(p,-o+g,!1),C="left",_="middle";break;case"middle":w=l+v*y(m),S=d+v*b(m),C="center",_="middle";break;case"endArc":w=l+(u+o)*y(m),S=d+(u+o)*b(m),C="center",_="bottom";break;case"insideEndArc":w=l+(u-o)*y(m),S=d+(u-o)*b(m),C="center",_="top";break;case"endAngle":w=l+v*y(f)+fe(f,o+g,!0),S=d+v*b(f)+me(f,o+g,!0),C="left",_="middle";break;case"insideEndAngle":w=l+v*y(f)+fe(f,-o+g,!0),S=d+v*b(f)+me(f,-o+g,!0),C="right",_="middle";break;default:return Object(he["c"])(t,s,a)}return t=t||{},t.x=w,t.y=S,t.align=C,t.verticalAlign=_,t}}function pe(e,t,i,s){if(Object(M["y"])(s))e.setTextConfig({rotation:s});else if(Object(M["s"])(t))e.setTextConfig({rotation:0});else{var a,n=e.shape,r=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,c=(r+o)/2,l=i(t);switch(l){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":a=c;break;case"startAngle":case"insideStartAngle":a=r;break;case"endAngle":case"insideEndAngle":a=o;break;default:return void e.setTextConfig({rotation:0})}var d=1.5*Math.PI-a;"middle"===l&&d>Math.PI/2&&d<1.5*Math.PI&&(d-=Math.PI),e.setTextConfig({rotation:d})}}function fe(e,t,i){return t*Math.sin(e)*(i?-1:1)}function me(e,t,i){return t*Math.cos(e)*(i?1:-1)}var ge=Math.max,ye=Math.min;function be(e,t){var i=e.getArea&&e.getArea();if(Object(de["a"])(e,"cartesian2d")){var s=e.getBaseAxis();if("category"!==s.type||!s.onBand){var a=t.getLayout("bandWidth");s.isHorizontal()?(i.x-=a,i.width+=2*a):(i.y-=a,i.height+=2*a)}}return i}var we=function(e){function t(){var i=e.call(this)||this;return i.type=t.type,i._isFirstFrame=!0,i}return Object(N["a"])(t,e),t.prototype.render=function(e,t,i,s){this._model=e,this._removeOnRenderedListener(i),this._updateDrawMode(e);var a=e.get("coordinateSystem");("cartesian2d"===a||"polar"===a)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,i):this._renderNormal(e,t,i,s))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){Object(X["traverseElements"])(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,i,s){var a,n=this.group,r=e.getData(),o=this._data,c=e.coordinateSystem,l=c.getBaseAxis();"cartesian2d"===c.type?a=l.isHorizontal():"polar"===c.type&&(a="angle"===l.dim);var d=e.isAnimationEnabled()?e:null,u=_e(e,c);u&&this._enableRealtimeSort(u,r,i);var h=e.get("clip",!0)||u,v=be(c,r);n.removeClipPath();var p=e.get("roundCap",!0),f=e.get("showBackground",!0),m=e.getModel("backgroundStyle"),g=m.get("borderRadius")||0,y=[],b=this._backgroundEls,w=s&&s.isInitSort,S=s&&"changeAxisOrder"===s.type;function C(e){var t=Oe[c.type](r,e),i=We(c,a,t);return i.useStyle(m.getItemStyle()),"cartesian2d"===c.type&&i.setShape("r",g),y[e]=i,i}r.diff(o).add((function(t){var i=r.getItemModel(t),s=Oe[c.type](r,t,i);if(f&&C(t),r.hasValue(t)&&Te[c.type](s)){var o=!1;h&&(o=Se[c.type](v,s));var m=Ce[c.type](e,r,t,s,a,d,l.model,!1,p);u&&(m.forceLabelAnimation=!0),je(m,r,t,i,s,e,a,"polar"===c.type),w?m.attr({shape:s}):u?ke(u,d,m,s,t,a,!1,!1):Object(J["a"])(m,{shape:s},e,t),r.setItemGraphicEl(t,m),n.add(m),m.ignore=o}})).update((function(t,i){var s=r.getItemModel(t),_=Oe[c.type](r,t,s);if(f){var k=void 0;0===b.length?k=C(i):(k=b[i],k.useStyle(m.getItemStyle()),"cartesian2d"===c.type&&k.setShape("r",g),y[t]=k);var R=Oe[c.type](r,t),L=$e(a,R,c);Object(J["f"])(k,{shape:L},d,t)}var I=o.getItemGraphicEl(i);if(r.hasValue(t)&&Te[c.type](_)){var T=!1;if(h&&(T=Se[c.type](v,_),T&&n.remove(I)),I?Object(J["e"])(I):I=Ce[c.type](e,r,t,_,a,d,l.model,!!I,p),u&&(I.forceLabelAnimation=!0),S){var O=I.getTextContent();if(O){var x=Object(se["d"])(O);null!=x.prevValue&&(x.prevValue=x.value)}}else je(I,r,t,s,_,e,a,"polar"===c.type);w?I.attr({shape:_}):u?ke(u,d,I,_,t,a,!0,S):Object(J["f"])(I,{shape:_},e,t,null),r.setItemGraphicEl(t,I),I.ignore=T,n.add(I)}else n.remove(I)})).remove((function(t){var i=o.getItemGraphicEl(t);i&&Object(J["d"])(i,e,t)})).execute();var _=this._backgroundGroup||(this._backgroundGroup=new Q["a"]);_.removeAll();for(var k=0;k<y.length;++k)_.add(y[k]);n.add(_),this._backgroundEls=y,this._data=r},t.prototype._renderLarge=function(e,t,i){this._clear(),Ae(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),Ae(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&Object(ne["a"])(e.coordinateSystem,!1,e),i=this.group;t?i.setClipPath(t):i.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,i){var s=this;if(t.count()){var a=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,i),this._isFirstFrame=!1;else{var n=function(e){var i=t.getItemGraphicEl(e),s=i&&i.shape;return s&&Math.abs(a.isHorizontal()?s.height:s.width)||0};this._onRendered=function(){s._updateSortWithinSameData(t,n,a,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,i){var s=[];return e.each(e.mapDimension(t.dim),(function(e,t){var a=i(t);a=null==a?NaN:a,s.push({dataIndex:t,mappedValue:a,ordinalNumber:e})})),s.sort((function(e,t){return t.mappedValue-e.mappedValue})),{ordinalNumbers:Object(M["F"])(s,(function(e){return e.ordinalNumber}))}},t.prototype._isOrderChangedWithinSameData=function(e,t,i){for(var s=i.scale,a=e.mapDimension(i.dim),n=Number.MAX_VALUE,r=0,o=s.getOrdinalMeta().categories.length;r<o;++r){var c=e.rawIndexOf(a,s.getRawOrdinalNumber(r)),l=c<0?Number.MIN_VALUE:t(e.indexOfRawIndex(c));if(l>n)return!0;n=l}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var i=t.scale,s=i.getExtent(),a=Math.max(0,s[0]),n=Math.min(s[1],i.getOrdinalMeta().categories.length-1);a<=n;++a)if(e.ordinalNumbers[a]!==i.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(e,t,i,s){if(this._isOrderChangedWithinSameData(e,t,i)){var a=this._dataSort(e,i,t);this._isOrderDifferentInView(a,i)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(e,t,i){var s=t.baseAxis,a=this._dataSort(e,s,(function(i){return e.get(e.mapDimension(t.otherAxis.dim),i)}));i.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:a})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,i=this._data;e&&e.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl((function(t){Object(J["d"])(t,e,Object(te["a"])(t).dataIndex)}))):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(le["a"]),Se={cartesian2d:function(e,t){var i=t.width<0?-1:1,s=t.height<0?-1:1;i<0&&(t.x+=t.width,t.width=-t.width),s<0&&(t.y+=t.height,t.height=-t.height);var a=e.x+e.width,n=e.y+e.height,r=ge(t.x,e.x),o=ye(t.x+t.width,a),c=ge(t.y,e.y),l=ye(t.y+t.height,n),d=o<r,u=l<c;return t.x=d&&r>a?o:r,t.y=u&&c>n?l:c,t.width=d?0:o-r,t.height=u?0:l-c,i<0&&(t.x+=t.width,t.width=-t.width),s<0&&(t.y+=t.height,t.height=-t.height),d||u},polar:function(e,t){var i=t.r0<=t.r?1:-1;if(i<0){var s=t.r;t.r=t.r0,t.r0=s}var a=ye(t.r,e.r),n=ge(t.r0,e.r0);t.r=a,t.r0=n;var r=a-n<0;if(i<0){s=t.r;t.r=t.r0,t.r0=s}return r}},Ce={cartesian2d:function(e,t,i,s,a,n,r,o,c){var l=new Z["a"]({shape:Object(M["m"])({},s),z2:1});if(l.__dataIndex=i,l.name="item",n){var d=l.shape,u=a?"height":"width";d[u]=0}return l},polar:function(e,t,i,s,a,n,r,o,c){var l=!a&&c?ce:ee["a"],d=new l({shape:s,z2:1});d.name="item";var u=Ee(a);if(d.calculateTextPosition=ve(u,{isRoundCap:l===ce}),n){var h=d.shape,v=a?"r":"endAngle",p={};h[v]=a?0:s.startAngle,p[v]=s[v],(o?J["f"]:J["a"])(d,{shape:p},n)}return d}};function _e(e,t){var i=e.get("realtimeSort",!0),s=t.getBaseAxis();if(i&&"category"===s.type&&"cartesian2d"===t.type)return{baseAxis:s,otherAxis:t.getOtherAxis(s)}}function ke(e,t,i,s,a,n,r,o){var c,l;n?(l={x:s.x,width:s.width},c={y:s.y,height:s.height}):(l={y:s.y,height:s.height},c={x:s.x,width:s.width}),o||(r?J["f"]:J["a"])(i,{shape:c},t,a,null);var d=t?e.baseAxis.model:null;(r?J["f"]:J["a"])(i,{shape:l},d,a)}function Re(e,t){for(var i=0;i<t.length;i++)if(!isFinite(e[t[i]]))return!0;return!1}var Le=["x","y","width","height"],Ie=["cx","cy","r","startAngle","endAngle"],Te={cartesian2d:function(e){return!Re(e,Le)},polar:function(e){return!Re(e,Ie)}},Oe={cartesian2d:function(e,t,i){var s=e.getItemLayout(t),a=i?Be(i,s):0,n=s.width>0?1:-1,r=s.height>0?1:-1;return{x:s.x+n*a/2,y:s.y+r*a/2,width:s.width-n*a,height:s.height-r*a}},polar:function(e,t,i){var s=e.getItemLayout(t);return{cx:s.cx,cy:s.cy,r0:s.r0,r:s.r,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}}};function xe(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function Ee(e){return function(e){var t=e?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(e)}function je(e,t,i,s,a,n,r,o){var c=t.getItemVisual(i,"style");o||e.setShape("r",s.get(["itemStyle","borderRadius"])||0),e.useStyle(c);var l=s.getShallow("cursor");l&&e.attr("cursor",l);var d=o?r?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":r?a.height>=0?"bottom":"top":a.width>=0?"right":"left",u=Object(se["c"])(s);Object(se["e"])(e,u,{labelFetcher:n,labelDataIndex:i,defaultText:Object(ue["b"])(n.getData(),i),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:d});var h=e.getTextContent();if(o&&h){var v=s.get(["label","position"]);e.textConfig.inside="middle"===v||null,pe(e,"outside"===v?d:v,Ee(r),s.get(["label","rotate"]))}Object(se["f"])(h,u,n.getRawValue(i),(function(e){return Object(ue["a"])(t,e)}));var p=s.getModel(["emphasis"]);Object(ie["E"])(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),Object(ie["D"])(e,s),xe(a)&&(e.style.fill="none",e.style.stroke="none",Object(M["k"])(e.states,(function(e){e.style&&(e.style.fill=e.style.stroke="none")})))}function Be(e,t){var i=e.get(["itemStyle","borderColor"]);if(!i||"none"===i)return 0;var s=e.get(["itemStyle","borderWidth"])||0,a=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),n=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(s,a,n)}var De=function(){function e(){}return e}(),Pe=function(e){function t(t){var i=e.call(this,t)||this;return i.type="largeBar",i}return Object(N["a"])(t,e),t.prototype.getDefaultShape=function(){return new De},t.prototype.buildPath=function(e,t){for(var i=t.points,s=this.baseDimIdx,a=1-this.baseDimIdx,n=[],r=[],o=this.barWidth,c=0;c<i.length;c+=3)r[s]=o,r[a]=i[c+2],n[s]=i[c+s],n[a]=i[c+a],e.rect(n[0],n[1],r[0],r[1])},t}(K["b"]);function Ae(e,t,i,s){var a=e.getData(),n=a.getLayout("valueAxisHorizontal")?1:0,r=a.getLayout("largeDataIndices"),o=a.getLayout("size"),c=e.getModel("backgroundStyle"),l=a.getLayout("largeBackgroundPoints");if(l){var d=new Pe({shape:{points:l},incremental:!!s,silent:!0,z2:0});d.baseDimIdx=n,d.largeDataIndices=r,d.barWidth=o,d.useStyle(c.getItemStyle()),t.add(d),i&&i.push(d)}var u=new Pe({shape:{points:a.getLayout("largePoints")},incremental:!!s,z2:1});u.baseDimIdx=n,u.largeDataIndices=r,u.barWidth=o,t.add(u),u.useStyle(a.getVisual("style")),Object(te["a"])(u).seriesIndex=e.seriesIndex,e.get("silent")||(u.on("mousedown",Fe),u.on("mousemove",Fe)),i&&i.push(u)}var Fe=Object(ae["c"])((function(e){var t=this,i=Me(t,e.offsetX,e.offsetY);Object(te["a"])(t).dataIndex=i>=0?i:null}),30,!1);function Me(e,t,i){for(var s=e.baseDimIdx,a=1-s,n=e.shape.points,r=e.largeDataIndices,o=[],c=[],l=e.barWidth,d=0,u=n.length/3;d<u;d++){var h=3*d;if(c[s]=l,c[a]=n[h+2],o[s]=n[h+s],o[a]=n[h+a],c[a]<0&&(o[a]+=c[a],c[a]=-c[a]),t>=o[0]&&t<=o[0]+c[0]&&i>=o[1]&&i<=o[1]+c[1])return r[d]}return-1}function $e(e,t,i){if(Object(de["a"])(i,"cartesian2d")){var s=t,a=i.getArea();return{x:e?s.x:a.x,y:e?a.y:s.y,width:e?s.width:a.width,height:e?a.height:s.height}}a=i.getArea();var n=t;return{cx:a.cx,cy:a.cy,r0:e?a.r0:n.r0,r:e?a.r:n.r,startAngle:e?n.startAngle:0,endAngle:e?n.endAngle:2*Math.PI}}function We(e,t,i){var s="polar"===e.type?ee["a"]:Z["a"];return new s({shape:$e(t,i,e),silent:!0,z2:0})}var Ne=we;function Ve(e){e.registerChartView(Ne),e.registerSeriesModel(G),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,M["h"]($["b"],"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Object($["a"])("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Object(W["a"])("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(e,t){var i=e.componentType||"series";t.eachComponent({mainType:i,query:e},(function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)}))}))}var Ue=i("9394"),He=i("2da7"),qe=i("ff32"),ze=i("104d"),Ye=i("4b2a"),Ge=i("3094"),Ke=i("5c7f"),Qe=i("e0d4");Object(A["a"])([F["a"],Ve,Ue["a"],He["a"],qe["a"],ze["a"],Ye["a"],Ge["a"]]);var Xe={name:"EBar",mixins:[Qe["a"]],props:{color:{type:Array,default:function(){return["#EF4136","#FFBD00","#4484CF","#946EDB","#8D7B7B","#54C7B0","#F47920","#194283","#59C754"]}},height:{type:[String,Number],default:"100%"},datas:{type:Object,default:function(){}}},components:{"v-chart":Ke["a"]},watch:{datas:{handler:function(e,t){this.initData(e)},immediate:!0,deep:!0}},mounted:function(){this.datas.length>0&&this.initData(this.datas)},data:function(){return{options:null}},methods:{initData:function(e){var t=this,i=[],s=[];e&&e.data&&e.data.forEach((function(e){i.push(e.label),s.push(e.value)})),this.options={color:this.color,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:20,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:i,axisLabel:{textStyle:{color:"#999",fontSize:10}},axisLine:{show:!1},axisTick:{show:!1},boundaryGap:!0,splitLine:{show:!1}}],yAxis:[{type:"value",axisTick:{show:!1}}],series:[{cursor:"default",name:e.title,showAllSymbol:!0,type:"bar",label:{normal:{show:!0,position:"top",color:"#333",formatter:function(e){return t.formatNum(e.value,0)}}},data:s}]}}}},Je=Xe,Ze=(i("7a29"),i("0c7c")),et=Object(Ze["a"])(Je,D,P,!1,null,"553b8881",null),tt=et.exports,it=i("85b1"),st={name:"ReviewStat",components:{EBar:tt},props:{contentId:{type:[String,Number],required:!0}},watch:{contentId:function(e){this.id=e,this.handleInit()}},data:function(){return{loading:!1,id:this.contentId,progressWidth:"80px",reviews:[],charts:[],reviewsStats:{avgReviewsScore:0,reviewsScoreStatDetail:[],reviewsCount:0,effectiveness:0,overall:0,quality:0,studentsEngagement:0}}},created:function(){this.initData(),this.loadReviewStats(),this.handleInit=Object(it["a"])(this.initData,300)},methods:{initData:function(){var e=this;this.loading=!0,Promise.all([Object(E["byOverall"])({purchasesId:this.id}),Object(j["b"])({contentId:this.id})]).then((function(t){var i=Object(x["a"])(t,2),s=i[0],a=i[1];if(0===s.code&&s.result){var n=[5,4,3,2,1],r=Object.values(s.result).reduce((function(e,t){return e+t?t:0}),0);e.reviews=n.map((function(e){return{reviewsScore:e,reviewsScoreCount:s.result[e]||0,reviewsScoreRate:r?(s.result[e]||0)/r*100:0}}))}if(0===a.code&&a.result){for(var o=[],c=3;c<19;c++)o.push({label:c,value:a.result[c]||0});e.charts={title:"User(s)",data:o}}})).finally((function(){e.loading=!1}))},loadReviewStats:function(){var e=this,t=null;t="student"===this.currentRole?B["ReviewsTaskStats"]:E["ReviewsTeacherStats"],t&&t({taskId:this.id,purchasesId:this.id}).then((function(t){t.success&&(e.reviewsStats=t.result)}))},goAll:function(){document.querySelector(".ant-popover").style.display="none",this.$emit("goReviews")}}},at=st,nt=(i("3b34"),Object(Ze["a"])(at,T,O,!1,null,"b4cf1724",null)),rt=nt.exports,ot=i("65a0"),ct=i("f93e"),lt=i("5fc3"),dt=i("4357"),ut=i("ce85"),ht=i("f031"),vt=i("48fb"),pt=i("60427"),ft=i("2e09"),mt=i("82bf"),gt=i("44f5"),yt=i("9fb0"),bt=i("c1df"),wt=i.n(bt),St={name:"ContentPreviewDetail",components:{RateLevel:ft["a"],ModalHeader:pt["a"],ContentPreview:ut["a"],CustomLinkText:dt["a"],ShareButton:lt["a"],CardListItem:S["a"],PreviewCarousel:c["a"],ShareIcon:k.a,RateByPercent:R["a"],ReviewsPreview:L["a"],ReviewScore:I["a"],ReviewStat:rt,PriceSlider:ot["a"]},props:{contentId:{type:[String,Number],required:!0},contentType:{type:[String,Number],required:!0},showBuyButton:{type:Boolean,default:!0},showCopyButton:{type:Boolean,default:!0},showEditButton:{type:Boolean,default:!0},showEnterButton:{type:Boolean,default:!0},displayFixedHeader:{type:Boolean,default:!0},showPriceInfo:{type:Boolean,default:!0},allowPreviewSubContent:{type:Boolean,default:!0},liveWorkShopCode:{type:String,default:""},reviewEdit:{type:Boolean,default:!0},reviewCreate:{type:Boolean,default:!0},reviewList:{type:Boolean,default:!0},session:{type:Object,default:null},schoolResource:{type:Boolean,default:!1},schoolResourceId:{type:String,default:null},showSubtask:{type:Boolean,default:!0},showRelated:{type:Boolean,default:!0},showRecommend:{type:Boolean,default:!0},isLibrary:{type:Boolean,default:!1},showAvatarTips:{type:Boolean,default:!1}},mixins:[y["a"],C["a"],ht["a"]],data:function(){return{moment:wt.a,contentLoading:!0,isSchoolResource:!1,WORK_SHOPS_TYPE:ct["bb"],WORK_SHOPS_STATUS:ct["ab"],content:null,carouselContentLoading:!0,thumbnailList:[],pageObjectIds:[],videoList:[],associateList:[],associatePdList:[],associateVideoList:[],favoriteFlag:!1,typeMap:this.$classcipe.typeMap,buyLoading:!1,copyLoading:!1,showTopFixedHeader:!1,stat:null,reviewsStats:{avgReviewsScore:0,reviewsScoreStatDetail:[],reviewsCount:0,effectiveness:0,overall:0,quality:0,studentsEngagement:0},RATE_TOOLTIPS:ct["y"],ReviewsTask:B,ReviewsTeacher:E,contentBuyStatVisible:!1,selectedGradeList:[],associateRecommendList:[],liveWorkShopSession:null,filterDeadline:null,timer:null}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},computed:Object(o["a"])(Object(o["a"])({},Object(f["e"])({currentSchool:function(e){return e.user.currentSchool},userMode:function(e){return e.app.userMode},currentRole:function(e){return e.user.currentRole}})),{},{allAges:function(){for(var e=[],t=3;t<19;t++)e.push({name:t+" years",value:t+""});return e},lastChangeSavedTime:function(){if(this.content){m["info"]("lastChangeSavedTime data",this.content);var e=this.content.updateTime||this.content.createTime;if(e)return Object(g["formatLocalUTC"])(e)}return""},inActiveTypes:function(){var e=[];return this.itemsList&&(e=this.itemsList.map((function(e){return e.type}))),Array.from(new Set(e))},realRecommendList:function(){var e=this,t=this.associateList.filter((function(t){return t.sourceFromUser!==e.$store.getters.email}));return[].concat(Object(r["a"])(this.associateRecommendList),Object(r["a"])(t))},realAssociateList:function(){var e=this;return this.associateList.filter((function(t){return t.createBy===e.$store.getters.email}))},labelColor:function(){return this.content.type===this.typeMap["unit-plan"]?{name:"#01b4ff",overview:"#6dee1c",bigIdea:"#ffec19",keyQuestion:"#ff2600"}:{name:"#000",overview:"#000",bigIdea:"#000",keyQuestion:"#000"}},filterThumbnailList:function(){var e=!1;if(this.liveWorkShopCode?this.liveWorkShopSession&&ct["bb"].FEATURE.value===this.liveWorkShopSession.workshopsType&&(e=!0):this.content.createBy===this.$store.getters.userInfo.email||this.content.buyed||(e=!0),e&&this.thumbnailList&&this.thumbnailList.length>1){var t=Math.ceil((this.thumbnailList.length-1)/3);return this.thumbnailList.slice(0,t)}return this.thumbnailList},filterVideoList:function(){var e=!1;if(this.liveWorkShopCode?this.liveWorkShopSession&&ct["bb"].FEATURE.value===this.liveWorkShopSession.workshopsType&&(e=!0):this.content.createBy===this.$store.getters.userInfo.email||this.content.buyed||(e=!0),e&&this.videoList&&this.videoList.length>1){var t=Math.ceil(this.videoList.length/3);return this.videoList.slice(0,t)}return this.videoList}}),created:function(){this.loadDetail(),this.initTimer()},methods:{loadDetail:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.contentLoading=!0,t.next=4,e.loadDetailByContentIDType(e.contentId,e.contentType);case 4:return i=t.sent,0===i.code?(e.content=i.result,e.isSchoolResource=e.$route.path.includes("/teacher/resource")&&e.content.owner.schoolId===e.$store.getters.userInfo.school,e.favoriteFlag=e.content&&e.content.isFavorite,e.loadExtraData()):e.$message.error(i.message),t.next=8,e.loadStat();case 8:return t.prev=8,e.contentLoading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})))()},loadStat:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(vt["b"])({contentId:e.contentId});case 2:i=t.sent,e.$logger.info("statRet",i),e.stat=i.result;case 5:case"end":return t.stop()}}),t)})))()},loadDetailByContentIDType:function(e,t){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t=parseInt(t),a={id:e},i.schoolResource&&(a.schoolId=i.currentSchool.id,i.schoolResourceId&&(a.schoolId=i.schoolResourceId)),i.isLibrary&&(a.published=1),t!==i.$classcipe.typeMap["unit-plan"]){s.next=8;break}return s.abrupt("return",Object(l["UnitPlanQueryById"])(a));case 8:if(t!==i.$classcipe.typeMap.task){s.next=12;break}return s.abrupt("return",Object(u["TaskQueryById"])(a));case 12:if(t!==i.$classcipe.typeMap.video){s.next=16;break}return s.abrupt("return",Object(h["c"])(a));case 16:if(t!==i.$classcipe.typeMap.pd){s.next=18;break}return s.abrupt("return",Object(d["c"])(a));case 18:case"end":return s.stop()}}),s)})))()},loadExtraData:function(){var e=parseInt(this.contentType);e===this.$classcipe.typeMap.task||e===this.$classcipe.typeMap.pd?(this.initVideoList(),this.loadSlideData()):(this.carouselContentLoading=!0,this.initVideoList(),this.initImgList(),this.carouselContentLoading=!1),this.loadAssociateData(),this.loadAssociateRecommendData(),this.content.presentationId&&this.getClassInfo(this.content.presentationId),this.liveWorkShopCode&&this.initLiveDetail()},initLiveDetail:function(){var e=this;Object(gt["c"])({sessionId:this.liveWorkShopCode}).then((function(t){t.success&&(e.liveWorkShopSession=t.result,e.initDeadLine())}))},initTimer:function(){var e=this,t=6e4;this.timer=setInterval((function(){e.initDeadLine()}),t)},initDeadLine:function(){this.filterDeadline="",this.liveWorkShopSession&&this.liveWorkShopSession.session.register&&this.liveWorkShopSession.session.register.registerBefore&&(this.filterDeadline=this.liveWorkShopSession.session.register.registerBefore)},loadReviewStats:function(){var e=this;if(this.reviewList){var t=null;t="student"===this.currentRole?B["ReviewsTaskStats"]:E["ReviewsTeacherStats"],t&&t({taskId:this.contentId,purchasesId:this.contentId}).then((function(t){t.success&&(e.reviewsStats=t.result)}))}else this.handleClose()},initVideoList:function(){this.videoList=[],this.content&&this.content.video&&this.videoList.push({url:this.content.video}),this.content&&this.content.coverVideo&&this.videoList.push({url:this.content.coverVideo})},initImgList:function(){this.thumbnailList=[],this.content.image&&this.thumbnailList.push({contentUrl:this.content.image}),0===this.thumbnailList.length&&this.thumbnailList.push({contentUrl:"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png"}),this.$logger.info("initImgList",this.thumbnailList)},loadSlideData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.carouselContentLoading=!0,i={taskId:e.contentId},e.session&&(i.sessionId=e.session.id),t.next=6,Object(v["d"])(i);case 6:return s=t.sent,e.thumbnailList=s.result.pageObjects,e.pageObjectIds=s.result.pageObjectIds,t.next=11,e.loadMaterialData();case 11:0===e.thumbnailList.length?e.content.image?e.thumbnailList.push({contentUrl:e.content.image}):e.thumbnailList.push({contentUrl:"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png"}):e.content.image&&(e.thumbnailList=[{contentUrl:e.content.image}].concat(e.thumbnailList)),t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](0);case 16:return t.prev=16,e.carouselContentLoading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,14,16,19]])})))()},loadAssociateData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i={id:e.contentId,type:e.contentType,published:e.isLibrary?1:0,preview:!0},e.schoolResource&&(i.schoolId=e.currentSchool.id,e.schoolResourceId&&(i.schoolId=e.schoolResourceId)),t.next=5,Object(p["GetAssociate"])(i);case 5:s=t.sent,a=s.result.owner,e.associateList=[],a.forEach((function(t){t.contents.forEach((function(t){t.type===e.$classcipe.typeMap.task&&e.associateList.push(t),t.type===e.$classcipe.typeMap["unit-plan"]&&e.associateList.push(t),t.type===e.$classcipe.typeMap.pd&&e.associatePdList.push(t),t.type===e.$classcipe.typeMap.video&&e.associateVideoList.push(t)}))})),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})))()},loadAssociateRecommendData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i={id:e.contentId,type:e.contentType},e.schoolResource&&(i.schoolId=e.currentSchool.id,e.schoolResourceId&&(i.schoolId=e.schoolResourceId)),e.isLibrary&&(i.published=1),t.next=6,Object(p["GetAssociateRecommend"])(i);case 6:s=t.sent,e.associateRecommendList=s.result,t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},loadMaterialData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(b["d"])({slideId:e.content.presentationId,pageIds:e.pageObjectIds});case 3:i=t.sent,i.result.relements.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),i.result.items.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),e.elementsList=i.result.relements,e.itemsList=i.result.items,t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},handleFavorite:function(){this.favoriteFlag?this.handleRemoveFavorite():this.handleAddFavorite()},handleAddFavorite:function(){var e=this;Object(w["FavoritesAdd"])({sourceId:this.contentId,sourceType:this.contentType}).then((function(t){e.$logger.info("FavoritesAdd ",t),e.favoriteFlag=!e.favoriteFlag})).finally(Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadStat();case 2:case"end":return t.stop()}}),t)}))))},handleRemoveFavorite:function(){var e=this;Object(w["FavoritesDelete"])({sourceId:this.contentId,sourceType:this.contentType}).then((function(t){e.$logger.info("handleRemoveFavorite ",t),e.favoriteFlag=!e.favoriteFlag})).finally(Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadStat();case 2:case"end":return t.stop()}}),t)}))))},handleEdit:function(){this.$logger.info("handleEdit",this.contentType),this.content.type===this.typeMap["unit-plan"]?this.$router.push("/teacher/unit-plan-redirect/"+this.content.id):this.content.type===this.typeMap.task?this.$router.push("/teacher/task-redirect/"+this.content.id):this.content.type===this.typeMap.pd?this.$router.push("/teacher/pd-content-redirect/"+this.content.id):this.contentType===this.typeMap.video&&this.$router.push("/teacher/video-redirect/"+this.content.id)},handleEditBuy:function(){this.$logger.info("handleEdit",this.content.myContentId),this.content.type===this.typeMap["unit-plan"]?this.$router.push("/teacher/unit-plan-redirect/"+this.content.myContentId):this.content.type===this.typeMap.task?this.$router.push("/teacher/task-redirect/"+this.content.myContentId):this.content.type===this.typeMap.pd?this.$router.push("/teacher/pd-content-redirect/"+this.content.myContentId):this.contentType===this.typeMap.video&&this.$router.push("/teacher/video-redirect/"+this.content.myContentId)},handleDuplicateItem:function(){var e=this;if(this.$logger.info("handleDuplicateItem",this.content),this.content.createBy!==this.$store.getters.userInfo.email)return this.handleBuyItem("Copy successfully");this.$confirm({title:"Confirm to copy",content:"Are you sure to copy "+this.content.name+" ?",centered:!0,onOk:function(){e.copyLoading=!0,Object(p["Duplicate"])({id:e.content.id,type:e.content.type}).then((function(t){t.code!==e.ErrorCode.ppt_google_token_expires&&t.code!==e.ErrorCode.ppt_forbidden?(e.$logger.info("Duplicate response",t),e.$message.success("Copy successfully"),e.$router.push({path:"/teacher/main/created-by-me"})):e.currentMethodName="handleDuplicateItem"})).finally((function(){e.copyLoading=!1}))}})},handleBuyItem:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$logger.info("handleBuyItem",this.content),Object(mt["a"])({id:this.content.id,type:this.content.type}).then((function(i){i.code!==e.ErrorCode.ppt_google_token_expires&&i.code!==e.ErrorCode.ppt_forbidden?(e.$logger.info("Duplicate response",i),t?e.$message.success(t):e.$message.success("Buy successfully")):e.currentMethodName="handleBuyItem"})).finally((function(){e.buyLoading=!1,e.contentBuyStatVisible=!0}))},handleEnsureBuyStat:function(){var e=this;Object(j["a"])({contentId:this.contentId,contentType:this.contentType,grades:this.selectedGradeList}).finally((function(){e.handleCancelBuyStat()}))},handleCancelBuyStat:function(){this.contentBuyStatVisible=!1,this.selectedGradeList=[],this.$router.push({path:"/teacher/main/created-by-me"})},toggleSelectContentTag:function(e){this.$logger.info("toggleSelectContentTag",e);var t=this.selectedGradeList.indexOf(e);-1===t?this.selectedGradeList.push(e):this.selectedGradeList.splice(t,1)},visibilityChanged:function(e,t){this.showTopFixedHeader=!e},scrollLeft:function(e){var t=document.getElementById(e);t.scrollBy({left:-600,behavior:"smooth"})},scrollRight:function(e){var t=document.getElementById(e);t.scrollBy({left:600,behavior:"smooth"})},handleClose:function(){this.$emit("close")},wrapperLink:function(e){if(e&&e.id){var t=this.$classcipe.getContentTypeName(e.type);return"".concat("https://www.classcipe.com","/v2/").concat(t,"/").concat(e.id)}return""},goToSubTaskList:function(){this.$router.push({path:"/teacher/sub-task/".concat(this.content.id)})},goTLinkList:function(){this.$router.push({path:"/teacher/link-content-list/".concat(this.content.type,"/").concat(this.content.id)})},handlePreviewItem:function(e){this.$logger.info("handlePreviewItem allowPreviewSubContent ".concat(this.allowPreviewSubContent),e),this.allowPreviewSubContent&&this.handlePreviewDetail(e)},goReviews:function(){document.getElementById("reviews").scrollIntoView({behavior:"smooth"})},handleRegisterSession:function(){var e=this;this.liveWorkShopSession&&this.liveWorkShopSession.sessionId&&(this.buyLoading=!0,Object(gt["e"])({contentId:this.liveWorkShopSession.content?this.liveWorkShopSession.content.id:null,sessionId:this.liveWorkShopSession.sessionId,channelId:Object(g["getCookie"])(yt["v"])}).then((function(t){t.success&&(e.$message.success("You have successfully registered in"),e.handleClose(),window.location.href="/teacher/main/live-workshops?workshopsType=3")})).finally((function(){e.buyLoading=!1})))},handleCancelSession:function(){var e=this;this.liveWorkShopSession&&this.liveWorkShopSession.sessionId&&(this.buyLoading=!0,Object(gt["a"])({contentId:this.liveWorkShopSession.content?this.liveWorkShopSession.content.id:null,sessionId:this.liveWorkShopSession.sessionId}).then((function(t){t.success&&(e.$message.success("Cancel successfully"),e.initLiveDetail(),e.$emit("reload"))})).finally((function(){e.buyLoading=!1})))},topTarget:function(){return document.getElementById(this.contentId+"box").parentElement.parentElement.parentElement},isReadyStart24:function(e){if(!e.sessionStartTime)return!0;var t=wt.a.utc(e.sessionStartTime).local().subtract(24,"hours");return wt()().isBefore(t)}}},Ct=St,_t=(i("14df"),Object(Ze["a"])(Ct,s,a,!1,null,"a86f9628",null));t["default"]=_t.exports},"72df":function(e,t,i){},"7a29":function(e,t,i){"use strict";i("b82c")},8190:function(e,t,i){"use strict";i("2365")},"82bf":function(e,t,i){"use strict";i.d(t,"e",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return c})),i.d(t,"d",(function(){return l}));var s=i("b775"),a={GetLinkCategory:"/classcipe/api/v2/mycontent/getLinkCategory",AddOrUpdateLinkCategory:"/classcipe/api/v2/mycontent/addOrUpdateLinkCategory",QueryTagsByIds:"/classcipe/api/v2/mycontent/queryTagsByIds",DeleteLinkCategory:"/classcipe/api/v2/mycontent/deleteLinkCategory",QueryCustomTags:"/classcipe/api/v2/mycontent/queryCustomTags",ImportOtherIdentityContent:"/classcipe/api/v2/mycontent/importOtherIdentityContent",UpdateContentField:"/classcipe/api/v2/mycontent/updateContentField",ContentBuy:"/classcipe/api/v2/mycontent/content/bye",QueryNewBigIdea:"/classcipe/api/v2/mycontent/queryNewBigIdea"};function n(e){return Object(s["d"])({url:a.QueryTagsByIds,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(s["d"])({url:a.QueryCustomTags,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(s["d"])({url:a.ImportOtherIdentityContent,method:"post",data:e})}function c(e){return Object(s["d"])({url:a.ContentBuy,method:"post",data:e})}function l(e){return Object(s["d"])({url:a.QueryNewBigIdea,method:"post",data:e})}},8757:function(e,t,i){},"88a9":function(e,t,i){},"95c6":function(e,t,i){"use strict";i.r(t),i.d(t,"favoritesAPIUrl",(function(){return a})),i.d(t,"FavoritesAdd",(function(){return n})),i.d(t,"FavoritesQueryById",(function(){return r})),i.d(t,"FavoritesDelete",(function(){return o})),i.d(t,"FavoritesDeleteBatch",(function(){return c})),i.d(t,"FavoritesList",(function(){return l})),i.d(t,"FavoritesGetMyFavorites",(function(){return d}));var s=i("b775"),a={FavoritesAdd:"/classcipe/api/favorites/add",FavoritesQueryById:"/classcipe/api/favorites/queryById",FavoritesDelete:"/classcipe/api/favorites/delete",FavoritesDeleteBatch:"/classcipe/api/favorites/deleteBatch",FavoritesList:"/classcipe/api/favorites/list",FavoritesGetMyFavorites:"/classcipe/api/favorites/getMyFavorites"};function n(e){return Object(s["d"])({url:a.FavoritesAdd,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(s["d"])({url:a.FavoritesQueryById,method:"get",params:e})}function o(e){return Object(s["d"])({url:a.FavoritesDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(s["d"])({url:a.FavoritesDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(s["d"])({url:a.FavoritesList,method:"get",params:e})}function d(e){return Object(s["d"])({url:a.FavoritesGetMyFavorites,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},a0cf:function(e,t,i){"use strict";i("88a9")},aac7:function(e,t,i){},ab4d:function(e,t,i){"use strict";i("72df")},abb8:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("label",{staticStyle:{"margin-right":"10px"},attrs:{for:""}},[e._v("Overall")]),"student"===e.currentRole?i("a-rate",{attrs:{"allow-half":"",disabled:""},model:{value:e.data.reviewsScore,callback:function(t){e.$set(e.data,"reviewsScore",t)},expression:"data.reviewsScore"}}):e._e(),"teacher"===e.currentRole?i("a-popover",{attrs:{placement:e.placement},on:{visibleChange:e.debouncedGetData}},[i("template",{slot:"content"},[i("a-spin",{attrs:{spinning:e.loading}},[i("a-space",{attrs:{direction:"vertical"}},[i("a-space",{attrs:{align:"center"}},[i("label",[e._v("Students engagement")]),i("a-rate",{staticStyle:{margin:"0"},attrs:{tooltips:e.RATE_TOOLTIPS.ENGAGEMENT,"allow-half":"",disabled:""},model:{value:e.data.studentsEngagement,callback:function(t){e.$set(e.data,"studentsEngagement",t)},expression:"data.studentsEngagement"}})],1),i("a-space",{attrs:{align:"center"}},[i("label",[e._v("Effectiveness of teaching & learning")]),i("a-rate",{staticStyle:{margin:"0"},attrs:{tooltips:e.RATE_TOOLTIPS.EFFETIVENESS,"allow-half":"",disabled:""},model:{value:e.data.effectiveness,callback:function(t){e.$set(e.data,"effectiveness",t)},expression:"data.effectiveness"}})],1),i("a-space",{attrs:{align:"center"}},[i("label",[e._v("Quality of the content")]),i("a-rate",{staticStyle:{margin:"0"},attrs:{tooltips:e.RATE_TOOLTIPS.QUALITY,"allow-half":"",disabled:""},model:{value:e.data.quality,callback:function(t){e.$set(e.data,"quality",t)},expression:"data.quality"}})],1)],1)],1)],1),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.OVERALL,"allow-half":"",disabled:""},model:{value:e.data.overall,callback:function(t){e.$set(e.data,"overall",t)},expression:"data.overall"}}),i("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"down"}})],2):e._e()],1)},a=[],n=i("5530"),r=(i("d3b7"),i("f93e")),o=i("c2e5"),c=i("6b36"),l=i("2f62"),d=i("4fcf"),u=d.debounce,h={name:"ReviewScore",props:{review:{type:Object,default:function(){}},placement:{type:String,default:"bottom"},id:{type:String,default:null}},watch:{review:{handler:function(e){this.data=e?Object(n["a"])({},e):{}},immediate:!0},id:{handler:function(e){e&&(this.reviewId=e)},immediate:!0}},computed:Object(n["a"])({},Object(l["e"])({currentRole:function(e){return e.user.currentRole}})),created:function(){this.debouncedGetData=u(this.getReview,300)},beforeDestroy:function(){this.timer&&clearTimeout(this.timer)},data:function(){return{RATE_TOOLTIPS:r["y"],data:{},reviewId:this.id,hasRender:!1,timer:null,loading:!1}},methods:{getReview:function(e){var t=this;if(this.reviewId&&e&&!this.hasRender){var i=null;i="student"===this.currentRole?c["ReviewsTaskStats"]:o["ReviewsTeacherStats"],this.loading=!0,i&&i({taskId:this.reviewId,purchasesId:this.reviewId}).then((function(e){e.success&&(t.data=e.result,t.hasRender=!0,t.timer=setTimeout((function(){t.hasRender=!1}),6e4))})).finally((function(){t.loading=!1}))}}}},v=h,p=i("0c7c"),f=Object(p["a"])(v,s,a,!1,null,"6e24629c",null);t["a"]=f.exports},adbe:function(e,t,i){},b4ab:function(e,t,i){},b82c:function(e,t,i){},c2e5:function(e,t,i){"use strict";i.r(t),i.d(t,"reviewsTeacherAPIUrl",(function(){return n})),i.d(t,"ReviewsTeacherSave",(function(){return r})),i.d(t,"ReviewsTeacherList",(function(){return o})),i.d(t,"ReviewsTeacherDelete",(function(){return c})),i.d(t,"ReviewsTeacherMyReview",(function(){return l})),i.d(t,"ReviewsTeacherStats",(function(){return d})),i.d(t,"byOverall",(function(){return u}));var s=i("b775"),a="reviewsTeacher",n={delete:"/classcipe/api/".concat(a,"/delete"),list:"/classcipe/api/".concat(a,"/list"),save:"/classcipe/api/".concat(a,"/save"),myReviews:"/classcipe/api/".concat(a,"/myReviews"),queryReviewsStat:"/classcipe/api/".concat(a,"/queryReviewsStat"),byOverall:"/classcipe/api/".concat(a,"/reviewsStat/byOverall")};function r(e){return Object(s["d"])({url:n.save,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(s["d"])({url:n.list,method:"get",params:e})}function c(e){return Object(s["d"])({url:n.delete+"?id="+e.id,method:"get",data:e})}function l(e){return Object(s["d"])({url:n.myReviews,method:"get",params:e})}function d(e){return Object(s["d"])({url:n.queryReviewsStat,method:"get",params:e})}function u(e){return Object(s["d"])({url:n.byOverall,method:"get",params:e})}},c813:function(e,t,i){"use strict";i("aac7")},d33b:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));i("159b"),i("9911"),i("4de4"),i("d81d"),i("d3b7");var s=i("7aef"),a=i("8448"),n=i.n(a),r=i("998c"),o=i.n(r),c=i("4084"),l=i.n(c),d=i("8a21"),u=i.n(d),h=i("1eeb"),v=i.n(h),p=i("5a1d"),f=i.n(p),m=i("6631"),g=i.n(m),y=i("1b72"),b={components:{TextTypeSvg:n.a,ImageTypeSvg:o.a,VideoTypeSvg:l.a,AudioTypeSvg:u.a,YoutubeTypeSvg:v.a,PdfTypeSvg:f.a,UrlTypeSvg:g.a},data:function(){return{loadingClass:!1,currentImgIndex:0,elementsList:[],itemsList:[],showMenuList:[],thumbnailList:[],fileTypeMap:s["a"],materialVisible:!1,mediaVisible:!1,mediaList:[],filterMaterialType:""}},created:function(){},computed:{currentPageElements:function(){var e=[];if(0===this.thumbnailList.length)return e;if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.elementsList.forEach((function(i){if(t===i.pageId){var a=i.data;"iframe"===a.type?e.push(s["a"].youtube):"image"===a.type?e.push(s["a"].img):"audio"===a.type?e.push(s["a"].audio):"text"===a.type?e.push(s["a"].txt):"video"===a.type?e.push(s["a"].video):"pdf"===a.type?e.push(s["a"].pdf):"website"===a.type&&e.push(s["a"].link)}}))}return e},currentPageElementLists:function(){var e=[];if(0===this.thumbnailList.length)return e;if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.elementsList.forEach((function(i){if(t===i.pageId){var s=i.data;e.push(s)}}))}return e},currentPageItem:function(){var e=[];if(0===this.thumbnailList.length)return"";if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.itemsList.forEach((function(i){if(t===i.pageId){var s=i.data;e.push(s)}}))}return e.length>0?e[0]:""},currentPageId:function(){return 0===this.thumbnailList.length?null:this.thumbnailList[this.currentImgIndex]?this.thumbnailList[this.currentImgIndex].id:void 0},currentPageTips:function(){if(0===this.thumbnailList.length)return"";var e=this.currentPageElementLists.filter((function(e){return"tip"===e.type}));return e?e[0]:""},currentPageMaterial:function(){var e={};if(0===this.thumbnailList.length)return e;if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.elementsList.forEach((function(i){if(t===i.pageId){var s=i.data;"tip"!==s.type&&(e.hasOwnProperty(s.type)||(e[s.type]=[]),e[s.type].push(s))}}))}return e}},methods:{getClassInfo:function(e){var t=this;this.loadingClass=!0;var i=this.thumbnailList.map((function(e){return e.id}));0===i.length?this.loadingClass=!1:Object(y["d"])({slideId:e,pageIds:i}).then((function(e){t.$logger.info("QueryByClassInfoSlideId ",e),e.success&&(e.result.relements.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),e.result.items.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),t.elementsList=e.result.relements,t.itemsList=e.result.items)})).finally((function(){t.loadingClass=!1,t.setTaskKnowAndBloomFormPPT()}))},setTaskKnowAndBloomFormPPT:function(){var e=this.thumbnailList.map((function(e){return e.id})),t=[],i=[];this.itemsList.forEach((function(s){if(-1!==e.indexOf(s.pageId)){var a=s.data;a.data&&a.data.bloomLevel&&-1===t.indexOf(a.data.bloomLevel)&&t.push(a.data.bloomLevel),a.data&&a.data.knowledgeLevel&&-1===i.indexOf(a.data.knowledgeLevel)&&i.push(a.data.knowledgeLevel)}})),t.length>0&&this.setCustomTagByPPT&&this.setCustomTagByPPT(t,"Bloom's Taxonomy"),i.length>0&&this.setCustomTagByPPT&&this.setCustomTagByPPT(i,"Knowledge Dimensions")},showPluginMaterial:function(e){var t=this.currentPageMaterial[e];this.$logger.info("showPluginMaterial ",t),"text"===e||"website"===e||"pdf"===e?t.length>1?(this.filterMaterialType=e,this.materialVisible=!0):"tip"!==t[0].type&&window.open(t[0].url,"_blank"):(this.mediaList=t,this.filterMaterialType=e,this.mediaVisible=!0)},showMaterialSize:function(e){return this.currentPageMaterial[e].length>1?this.currentPageMaterial[e].length:0},computerSize:function(e){var t=0,i=this.thumbnailList[this.currentImgIndex].id;return this.elementsList.forEach((function(s){if(i===s.pageId){var a=s.data;a.type===e&&t++}})),t},onChangePage:function(e){this.currentImgIndex=e},getTargetPageItemData:function(e){var t=null;return this.itemsList.forEach((function(i){e===i.pageId&&(t=i.data)})),t}}}},d350:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"preview-carousel"},[i("a-carousel",{ref:"carousel",attrs:{arrows:"","after-change":e.onChangePage}},[i("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"-15px",zIndex:"1"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[i("a-icon",{attrs:{type:"left-circle"}})],1),i("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"-15px"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[i("a-icon",{attrs:{type:"right-circle"}})],1),e._l(e.pageObjectList,(function(t,s){return[i("div",{key:"page"+s,staticClass:"slider-img-cover",style:{backgroundImage:"url('"+t.contentUrl+"')",filter:s>e.unPayPageIndex?"blur(3px)":"none"}})]})),e._l(e.videoList,(function(t,s){return i("div",{key:s,staticClass:"slider-video-cover"},[e.isYoutubeIframeUrl(t.url)?e._e():i("video",{ref:"video",refInFor:!0,attrs:{controls:"",src:t.url}}),e.isYoutubeIframeUrl(t.url)?i("iframe",{staticClass:"video-iframe",attrs:{src:t.url}}):e._e()])}))],2),e.currentImgIndex>0&&e.currentImgIndex>e.unPayIndex?i("div",{staticClass:"cover-unpay"},[e._v("Only available after purchase")]):e._e(),i("div",{staticClass:"carousel-page"},[e._v(e._s(e.showPage))])],1)},a=[],n=(i("99af"),i("159b"),i("d33b")),r={name:"PreviewCarousel",props:{pageObjectList:{type:Array,default:function(){return[]}},videoList:{type:Array,default:function(){return[]}},width:{type:String,default:"400px"},filterPageObjectList:{type:Array,default:function(){return[]}},filterVideoList:{type:Array,default:function(){return[]}}},mixins:[n["a"]],computed:{showArrow:function(){return this.pageObjectList.length+this.videoList.length>1},isYoutubeIframeUrl:function(e){return function(e){return e&&-1!==e.indexOf("youtube.com/embed")}},showPage:function(){if(0===this.currentImgIndex)return"Cover image";var e=this.videoList.length+this.pageObjectList.length-1;return"".concat(this.currentImgIndex," / ").concat(e)},unPayPageIndex:function(){return this.filterPageObjectList.length},unPayVideoIndex:function(){return this.filterVideoList.length},unPayIndex:function(){return this.filterPageObjectList.length+this.filterVideoList.length}},data:function(){return{currentImgIndex:0}},created:function(){this.$logger.info("PreviewCarousel created pageObjectList",this.pageObjectList,"videoList",this.videoList)},methods:{onChangePage:function(e){this.$logger.info("page",e,this.$refs.video),this.currentImgIndex=e,this.$refs.video&&this.$refs.video.forEach((function(e){return e.pause()}))}}},o=r,c=(i("c813"),i("0c7c")),l=Object(c["a"])(o,s,a,!1,null,"15046c5e",null);t["a"]=l.exports},d980:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"ratePercentCon",staticClass:"rate-percent-con"},[i("div",{staticClass:"rate-percent-wrap"},[i("div",{ref:"ratePercentSum",staticClass:"rate-percent__sum"},[i("div",{staticClass:"sum-title"},[e._v(e._s(e._f("percentFormat")(e.percents.avgReviewsScore)))]),i("div",{staticClass:"sum-desc"},[i("a-rate",{attrs:{defaultValue:e.percents.avgReviewsScore,"allow-half":"",disabled:""}})],1)]),i("div",{staticClass:"rate-percent__detail",attrs:{direction:"vertical"}},e._l(e.percents.reviewsScoreStatDetail.concat().reverse(),(function(t,s){return i("a-space",{key:"percent_"+s,staticClass:"detail-bar",attrs:{align:"center"}},[i("a-progress",{style:{width:e.progressWidth},attrs:{strokeLinecap:"square",strokeColor:"#FFBB00",percent:t.reviewsScoreRate,showInfo:!1}}),i("a-rate",{attrs:{defaultValue:t.reviewsScore,disabled:""}}),i("span",[e._v(e._s(t.reviewsScoreRate)+"%")])],1)})),1)])])},a=[],n=i("5530"),r=(i("b4ab"),{name:"RateByPercent",props:{rates:{type:Object,default:function(){return{avgReviewsScore:0,reviewsScoreStatDetail:[{reviewsScore:1,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:2,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:3,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:4,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:5,reviewsScoreCount:0,reviewsScoreRate:0}]}}}},watch:{rates:function(e){this.percents=Object(n["a"])({},e)}},data:function(){return{percents:this.rates,progressWidth:"135px"}},mounted:function(){if(this.$refs.ratePercentCon&&this.$refs.ratePercentSum){var e=this.$refs.ratePercentCon.getBoundingClientRect().width,t=this.$refs.ratePercentSum.getBoundingClientRect().width;this.progressWidth=e-40-t-45-200+"px"}}}),o=r,c=i("0c7c"),l=Object(c["a"])(o,s,a,!1,null,null,null);t["a"]=l.exports},dd6e:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reviews-wrapper"},[e.canList||e.showCreate||e.canEdit?s("div",{staticClass:"reviews-title"},[s("h4",[e._v("Reviews")])]):e._e(),s("review-edit",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],ref:"myReview",attrs:{role:e.role,footerBottom:!e.canList&&e.showCreate,canCreate:e.showCreate,myReviews:e.myReviews},on:{submit:e.handleSaveMyReview}}),e.needSearch&&e.canList?s("div",{staticClass:"reviews-search"},[s("div",{staticClass:"my-search"},[s("a-input-search",{attrs:{placeholder:"Search",allowClear:!0},on:{search:e.triggerSearch,pressEnter:e.triggerSearch},model:{value:e.reviewsNotes,callback:function(t){e.reviewsNotes=t},expression:"reviewsNotes"}})],1),s("a-select",{attrs:{getPopupContainer:function(e){return e.parentElement}},on:{change:e.triggerChangeRate},model:{value:e.reviewsScore,callback:function(t){e.reviewsScore=t},expression:"reviewsScore"}},[s("a-select-option",{attrs:{value:""}},[e._v(" All rating ")]),e._l([5,4,3,2,1],(function(t){return s("a-select-option",{key:"rate_choose_"+t,attrs:{value:t}},[e._v(" "+e._s(t)+" star ")])}))],2)],1):e._e(),e.canList?s("div",{staticClass:"reviews-content"},[s("a-spin",{attrs:{spinning:e.delLoading}},[e.myReviews?s("div",{staticClass:"reviews-content-detail reviews-me"},[s("div",{staticClass:"content-detail__avatar"},[e.myReviews.avatar?s("img",{attrs:{src:e.myReviews.avatar}}):s("img",{attrs:{src:i("4992")}})]),s("div",{staticClass:"content-detail__rate"},[s("review-score",{attrs:{review:e.myReviews}}),s("div",{staticClass:"content-detail__tag"},[s("a-tooltip",{attrs:{title:"Distance learning"}},[s("a-tag",{directives:[{name:"show",rawName:"v-show",value:e.myReviews.learningDistance,expression:"myReviews.learningDistance"}],attrs:{color:"#f50"}},[e._v(" Distance ")])],1),s("a-tooltip",{attrs:{title:"At home learning"}},[s("a-tag",{directives:[{name:"show",rawName:"v-show",value:e.myReviews.learningHome,expression:"myReviews.learningHome"}],attrs:{color:"#2db7f5"}},[e._v(" At home ")])],1),s("a-tooltip",{attrs:{title:"In-class learning"}},[s("a-tag",{directives:[{name:"show",rawName:"v-show",value:e.myReviews.learningClass,expression:"myReviews.learningClass"}],attrs:{color:"#87d068"}},[e._v(" In-class ")])],1)],1)],1),s("div",[s("div",{staticClass:"content-detail__title"},[s("div",{staticClass:"title-info"},[s("div",{staticClass:"info-author"},[e._v(" "+e._s(e.myReviews.nickName)+" ")]),s("div",{staticClass:"info-time"},[e._v(" "+e._s(e._f("dayjs")(e.myReviews.createTime))+" ")])])]),s("div",{staticClass:"content-detail__review"},[s("label",[e._v(" "+e._s(e.myReviews.reviewsNotes)+" ")])])]),s("a-space",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],staticClass:"content-detail__edit"},[s("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!0)}}},[e._v("Edit")]),s("a-button",{attrs:{type:"link"},on:{click:e.handleDelMyReview}},[e._v("Delete")])],1)],1):e._e()]),s("a-skeleton",{attrs:{loading:e.loading,active:""}},[e.reviewsList.length>0?s("a-list",{attrs:{"item-layout":"vertical",pagination:e.pagination,"data-source":e.reviewsList},scopedSlots:e._u([{key:"renderItem",fn:function(t){return s("a-list-item",{key:"item.id"},[s("div",{staticClass:"reviews-content-detail"},[s("div",{staticClass:"content-detail__avatar"},[t.avatar?s("img",{attrs:{src:t.avatar}}):s("img",{attrs:{src:i("4992")}})]),s("div",{staticClass:"content-detail__rate"},[s("review-score",{attrs:{review:t}}),s("div",{staticClass:"content-detail__tag"},[s("a-tooltip",{attrs:{title:"Distance learning"}},[s("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.learningDistance,expression:"item.learningDistance"}],attrs:{color:"#f50"}},[e._v(" Distance ")])],1),s("a-tooltip",{attrs:{title:"At home learning"}},[s("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.learningHome,expression:"item.learningHome"}],attrs:{color:"#2db7f5"}},[e._v(" At home ")])],1),s("a-tooltip",{attrs:{title:"In-class learning"}},[s("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.learningClass,expression:"item.learningClass"}],attrs:{color:"#87d068"}},[e._v(" In-class ")])],1)],1)],1),s("div",[s("div",{staticClass:"content-detail__title"},[s("div",{staticClass:"title-info"},[s("div",{staticClass:"info-author"},[e._v(" "+e._s(t.nickName)+" ")]),s("div",{staticClass:"info-time"},[e._v(" "+e._s(e._f("dayjs")(t.createTime))+" ")])])]),s("div",{staticClass:"content-detail__review"},[s("label",[e._v(" "+e._s(t.reviewsNotes)+" ")])])])])])}}],null,!1,2711396856)}):e._e(),e.myReviews||0!==e.reviewsList.length?e._e():s("a-empty",{attrs:{description:"No reviews yet"}})],1)],1):e._e()],1)},a=[],n=i("5530"),r=i("53ca"),o=(i("a9e3"),i("d3b7"),i("7db0"),i("823b")),c=i("f93e"),l=i("ed18"),d=i("abb8"),u={name:"ReviewsPreview",components:{ReviewEdit:l["a"],ReviewScore:d["a"]},props:{id:{type:[String,Number],required:!0},role:{type:String,default:"student"},save:{type:Function,default:function(){}},list:{type:Function,required:!0},del:{type:Function,default:function(){}},myReview:{type:Function,default:function(){}},canEdit:{type:Boolean,default:!0},canCreate:{type:Boolean,default:!0},canList:{type:Boolean,default:!0},needSearch:{type:Boolean,default:!0}},watch:{id:{handler:function(e){this.currentId=e,this.loadData()},immediate:!0},canCreate:function(e){this.showCreate=e}},data:function(){var e=this;return{loading:!1,delLoading:!1,subLoading:!1,showCreate:this.canCreate,RATE_TOOLTIPS:c["y"],isEdit:!1,myReviews:null,reviewsList:[],reviewsNotes:"",reviewsScore:"",currentId:this.id,pagination:{onChange:function(t){e.pageNo=t,e.loadReviewList()},showTotal:function(e){return"Total ".concat(e," items")},total:0,pageSize:10,size:"small"},pageNo:1,mockData:{reviewsLabel:1,reviewsNotes:"123213123",reviewsScore:1,overall:1,effectiveness:5,quality:4,studentsEngagement:1,createBy:"jacob",id:123213213,createTime:"123123"}}},mounted:function(){this.loadData()},methods:{justifyPromise:function(e){return("object"===Object(r["a"])(e)||"function"===typeof e)&&"function"===typeof e.then},loadData:function(){this.loadMyReview(),this.loadReviewList()},loadMyReview:function(){var e=this,t=this.myReview({taskId:this.currentId,purchasesId:this.currentId});this.justifyPromise(t)&&(this.$refs.myReview&&this.$refs.myReview.triggerLoading(!0),this.delLoading=!0,t.then((function(t){t.success&&t.result?e.myReviews=Object(n["a"])(Object(n["a"])({},t.result),{},{learningClass:Boolean(t.result.learningClass),learningDistance:Boolean(t.result.learningDistance),learningHome:Boolean(t.result.learningHome),updatedMsg:Boolean(t.result.updatedMsg)}):e.myReviews=null})).finally((function(){e.$refs.myReview&&e.$refs.myReview.triggerLoading(!1),e.delLoading=!1})))},loadReviewList:function(){var e=this,t=this.list({reviewsNotes:this.reviewsNotes,reviewsScore:this.reviewsScore,pageNo:this.pageNo,pageSize:this.pagination.pageSize,taskId:this.currentId,excludeSelf:1,overall:this.reviewsScore,searchKey:this.reviewsNotes,purchasesId:this.currentId});this.justifyPromise(t)&&(this.loading=!0,t.then((function(t){o["info"]("loadReviewList",t),t.result&&t.result.records&&t.result.records.length?(e.reviewsList=t.result.records,e.pagination.total=t.result.total):(e.reviewsList=[],e.pagination.total=0),o["info"]("reviewsList",e.reviewsList)})).finally((function(){e.loading=!1})))},handleDelMyReview:function(){var e=this;this.myReviews&&this.$confirm({title:"Confirm delete",content:"Are you sure to delete your review ?",centered:!0,onOk:function(){var t=e.del({id:e.myReviews.id});e.justifyPromise(t)&&(e.delLoading=!0,t.then((function(t){e.$logger.info("del response",t),t.success&&(e.$message.success("Del successfully"),e.myReviews=null,e.$emit("update"))})).finally((function(){e.delLoading=!1})))}})},handleSaveMyReview:function(e){var t=this;if("student"!==this.role||this.myReviews){var i=this.save(Object(n["a"])({taskId:this.currentId,purchasesId:this.currentId,id:this.myReviews&&this.myReviews.id?this.myReviews.id:null},e));this.justifyPromise(i)&&(this.$refs.myReview&&this.$refs.myReview.triggerLoading(!0),i.then((function(e){if(e.success){if(t.$message.success("Submitted successfully"),t.myReviews=Object(n["a"])(Object(n["a"])(Object(n["a"])({},t.myReviews),e.result),{},{learningClass:Boolean(e.result.learningClass),learningDistance:Boolean(e.result.learningDistance),learningHome:Boolean(e.result.learningHome),updatedMsg:Boolean(e.result.updatedMsg)}),t.myReviews&&t.myReviews.id){var i=t.reviewsList.find((function(e){return e.id===t.myReviews.id}));i&&(i=Object(n["a"])(Object(n["a"])({},i),e.result))}t.$refs.myReview&&t.$refs.myReview.triggerIsEdit(!1),t.$emit("update")}})).finally((function(){t.$refs.myReview&&t.$refs.myReview.triggerLoading(!1)})))}},triggerEdit:function(e){this.$refs.myReview&&this.$refs.myReview.triggerEdit(e)},triggerSearch:function(){this.loadReviewList()},triggerChangeRate:function(e){this.loadReviewList()}}},h=u,v=(i("6f26"),i("0c7c")),p=Object(v["a"])(h,s,a,!1,null,"807d777a",null);t["a"]=p.exports},dec2:function(e,t,i){"use strict";i("8757")},e6fe:function(e,t,i){var s=i("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{t:"1653279259330",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4202","xmlns:xlink":"http://www.w3.org/1999/xlink"},children:[{tag:"path",attrsMap:{d:"M54.859102 64.003017A64.804294 64.804294 0 0 0 120.321679 128.002743h783.356642a63.999726 63.999726 0 1 0 0-127.999452H120.321679A64.804294 64.804294 0 0 0 54.859102 64.003017zM212.115571 640.000549h103.862412v319.998628A65.060293 65.060293 0 0 0 381.44056 1023.998903h261.11888a65.060293 65.060293 0 0 0 65.462577-63.999726V640.000549h103.862412a63.926583 63.926583 0 0 0 46.079803-109.457817l-299.518717-293.740455a66.194002 66.194002 0 0 0-92.159605 0l-299.884429 293.740455A63.890012 63.890012 0 0 0 212.115571 640.000549z","p-id":"4203"}}]})}},ed14:function(e,t,i){},ed18:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-reviews"},[!e.myReviews&&"teacher"!==e.role||e.footerBottom?e._e():i("a-space",{staticClass:"reviews-opt"},["student"!==e.role||e.isEdit?e._e():i("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!0)}}},[e._v("Edit Review")]),"teacher"!==e.role||e.myReviews||e.isEdit||!e.showCreate?e._e():i("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!0)}}},[e._v("Leave a Review")]),e.isEdit?i("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!1)}}},[e._v("Cancel")]):e._e(),e.isEdit?i("a-button",{attrs:{type:"primary"},on:{click:e.handleSaveMyReview}},[e._v(e._s(e.myReviews?"Update":"Submit"))]):e._e()],1),"student"===e.role?i("a-spin",{attrs:{spinning:e.subLoading}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"reviews-edit"},[i("div",{staticClass:"reviews-edit__check"},[i("div",[i("label",[e._v("Difficulty Level")]),i("a-rate",{staticClass:"rate-bar-con",attrs:{count:3,tooltips:e.reviewsText,allowClear:!1},model:{value:e.subForm.reviewsLabel,callback:function(t){e.$set(e.subForm,"reviewsLabel",t)},expression:"subForm.reviewsLabel"}},[i("div",{attrs:{slot:"character"},slot:"character"},[i("div",{staticClass:"rate-bar"})])])],1),i("div",[i("label",[e._v("Overall review")]),i("a-rate",{attrs:{allowClear:!1},model:{value:e.subForm.reviewsScore,callback:function(t){e.$set(e.subForm,"reviewsScore",t)},expression:"subForm.reviewsScore"}})],1)]),i("div",{staticClass:"reviews-edit__text"},[i("a-textarea",{ref:"reviewsNotes",attrs:{placeholder:"Enter your reviews......","auto-size":{minRows:4,maxRows:6}},model:{value:e.subForm.reviewsNotes,callback:function(t){e.$set(e.subForm,"reviewsNotes",t)},expression:"subForm.reviewsNotes"}})],1)])]):e._e(),"teacher"===e.role?i("a-spin",{attrs:{spinning:e.subLoading}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"reviews-edit"},[i("div",{staticClass:"reviews-edit__check"},[i("div",[i("a-tooltip",{attrs:{title:"Overall review"}},[i("label",[e._v("Overall review")])]),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.OVERALL,allowClear:!1},model:{value:e.subForm.overall,callback:function(t){e.$set(e.subForm,"overall",t)},expression:"subForm.overall"}})],1),i("div",[i("a-tooltip",{attrs:{title:"Students engagement"}},[i("label",[e._v("Students engagement")])]),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.ENGAGEMENT,allowClear:!1},model:{value:e.subForm.studentsEngagement,callback:function(t){e.$set(e.subForm,"studentsEngagement",t)},expression:"subForm.studentsEngagement"}})],1)]),i("div",{staticClass:"reviews-edit__check"},[i("div",[i("a-tooltip",{attrs:{title:"Effectiveness of teaching & learning"}},[i("label",[e._v("Effectiveness of teaching & learning")])]),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.EFFETIVENESS,allowClear:!1},model:{value:e.subForm.effectiveness,callback:function(t){e.$set(e.subForm,"effectiveness",t)},expression:"subForm.effectiveness"}})],1),i("div",[i("a-tooltip",{attrs:{title:"Quality of the content"}},[i("label",[e._v("Quality of the content")])]),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.QUALITY,allowClear:!1},model:{value:e.subForm.quality,callback:function(t){e.$set(e.subForm,"quality",t)},expression:"subForm.quality"}})],1)]),i("div",{staticClass:"reviews-edit__check"},[i("div",[i("a-checkbox",{model:{value:e.subForm.learningDistance,callback:function(t){e.$set(e.subForm,"learningDistance",t)},expression:"subForm.learningDistance"}},[e._v(" Distance learning ")])],1),i("div",[i("a-checkbox",{model:{value:e.subForm.learningHome,callback:function(t){e.$set(e.subForm,"learningHome",t)},expression:"subForm.learningHome"}},[e._v(" At home learning ")])],1),i("div",[i("a-checkbox",{model:{value:e.subForm.learningClass,callback:function(t){e.$set(e.subForm,"learningClass",t)},expression:"subForm.learningClass"}},[e._v(" In-class learning ")])],1)]),i("div",{staticClass:"reviews-edit__text"},[i("a-textarea",{ref:"reviewsNotes",attrs:{placeholder:"Enter your reviews......","auto-size":{minRows:4,maxRows:6}},model:{value:e.subForm.reviewsNotes,callback:function(t){e.$set(e.subForm,"reviewsNotes",t)},expression:"subForm.reviewsNotes"}})],1)])]):e._e(),(e.myReviews||"teacher"===e.role)&&e.footerBottom?i("a-space",{staticClass:"reviews-footer"},[i("a-button",{on:{click:e.handleCancel}},[e._v("Cancel")]),i("a-button",{attrs:{type:"primary"},on:{click:e.handleSaveMyReview}},[e._v("Submit")])],1):e._e()],1)},a=[],n=i("5530"),r=(i("a9e3"),i("f93e")),o={name:"ReviewsEdit",props:{footerBottom:{type:Boolean,default:!1},role:{type:String,default:"student"},myReviews:{type:Object,default:null},canCreate:{type:Boolean,default:!0}},watch:{canCreate:function(e){this.showCreate=e,!this.footerBottom&&("teacher"!==this.role||!this.showCreate||this.myReviews&&this.myReviews.id)||(this.isEdit=!0)},myReviews:{handler:function(e){this.subForm=e?Object(n["a"])({},e):Object(n["a"])({},this.init),this.footerBottom||"teacher"===this.role&&this.showCreate&&(!e||!e.id)?this.isEdit=!0:this.isEdit=!1},immediate:!0}},data:function(){return{subLoading:!1,showCreate:this.canCreate,RATE_TOOLTIPS:r["y"],isEdit:!1,reviewsText:["Easy","Intermediate","Difficult"],subForm:this.myReviews,init:{reviewsLabel:1,reviewsNotes:"",reviewsScore:1,overall:1,effectiveness:1,quality:1,studentsEngagement:1,learningClass:!1,learningDistance:!1,learningHome:!1,updatedMsg:!0}}},mounted:function(){!this.footerBottom&&("teacher"!==this.role||!this.showCreate||this.myReviews&&this.myReviews.id)||(this.isEdit=!0)},methods:{handleSaveMyReview:function(){if("student"!==this.role||this.myReviews){this.subLoading=!0;var e=Object(n["a"])(Object(n["a"])({},this.subForm),{},{learningClass:Number(this.subForm.learningClass),learningDistance:Number(this.subForm.learningDistance),learningHome:Number(this.subForm.learningHome),updatedMsg:Number(this.subForm.updatedMsg)});this.$emit("submit",e)}},handleCancel:function(){this.$emit("cancel")},triggerLoading:function(e){this.subLoading=e},triggerIsEdit:function(e){this.isEdit=e},triggerEdit:function(e){var t=this;this.isEdit=e,this.$nextTick((function(){e&&t.$refs.reviewsNotes&&t.$refs.reviewsNotes.focus()}))}}},c=o,l=(i("ab4d"),i("0c7c")),d=Object(l["a"])(c,s,a,!1,null,"179193f5",null);t["a"]=d.exports},f031:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("1da1"),a=(i("d81d"),i("0481"),i("b0c0"),i("159b"),i("96cf"),i("c621")),n=i("f93e"),r=i("b199"),o=i("980a"),c=i("944d"),l={data:function(){return{allowPreview:!0,previewCurrentId:null,previewType:null,previewCode:null,previewVisible:!1,previewSchoolId:"0",updateEditSlideLoading:!1,setColor:["#FFEDAF","#C8F4FF","#E6E4FF","#ffccb0","#ffa9a2","#a3ecb9","#f7c5f8","#ffbfe2","#d5b9ff","#c4f6b1"],savingSlides:!1,formSteps:[],requiredFields:[],emptyRequiredFields:[]}},created:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},computed:{commandTermsList:function(){return Object(c["a"])(this.content.learnOuts.map((function(e){return e.commandTerms})).flat(2),"name").map((function(e){return e.name}))},knowledgeTagsList:function(){return Object(c["a"])(this.content.learnOuts.map((function(e){return e.knowledgeTags})).flat(2),"name").map((function(e){return e.name}))}},methods:{handlePreviewDetail:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$logger.info("handlePreviewDetail",e,"allowPreview",this.allowPreview),this.allowPreview&&(this.previewVisible=!1,this.$nextTick((function(){t.previewCurrentId=i&&e.sourceFrom||e.id,t.previewType=e.type,t.previewCode=e.sessionId||e.sessionInfo&&e.sessionInfo.classId,t.previewSchoolId=e.schoolId?e.schoolId:"0",t.reviewList=!1,t.reviewCreate=!!i,t.reviewEdit=!!i,t.previewVisible=!0})),this.$emit("preview",e))},handlePreviewDeleteDetail:function(e){var t=this;this.$logger.info("handlePreviewDeleteDetail",e,"allowPreview",this.allowPreview),this.allowPreview&&(this.previewVisible=!1,this.$nextTick((function(){t.previewCurrentId=e.contentId,t.previewType=e.contentType,t.previewCode=e.classId,t.reviewList=!1,t.reviewCreate=!1,t.reviewEdit=!1,t.previewVisible=!0})),this.$emit("preview",e))},handlePreviewClose:function(){this.$logger.info("handlePreviewClose"),this.previewVisible=!1,this.previewCurrentId=null,this.previewType=null,this.previewCode=null},updateEditSlideStatus:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.updateEditSlideLoading){t.next=26;break}if(t.prev=1,e.updateEditSlideLoading=!0,i=parseInt(e.content.type),s=null,i!==e.$classcipe.typeMap.task){t.next=11;break}return t.next=8,Object(a["c"])({taskId:e.content.id,needRefresh:!0});case 8:s=t.sent,t.next=15;break;case 11:if(i!==e.$classcipe.typeMap.pd){t.next=15;break}return t.next=14,Object(a["c"])({taskId:e.content.id,needRefresh:!0});case 14:s=t.sent;case 15:s&&0===s.code&&(e.content.presentationId=s.result.presentationId,e.content.pageObjects=s.result.pageObjects),e.content.slideEditing=!1,t.next=21;break;case 19:t.prev=19,t.t0=t["catch"](1);case 21:return t.prev=21,e.updateEditSlideLoading=!1,n=e.contentReget(),0===n.code&&(e.content.canPublish=n.result.canPublish),t.finish(21);case 26:case"end":return t.stop()}}),t,null,[[1,19,21,26]])})))()},contentReget:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=parseInt(e.content.type),s=null,i!==e.$classcipe.typeMap.task){t.next=8;break}return t.next=5,Object(r["TaskQueryById"])({id:e.content.id});case 5:s=t.sent,t.next=12;break;case 8:if(i!==e.$classcipe.typeMap.pd){t.next=12;break}return t.next=11,Object(o["c"])({id:e.content.id});case 11:s=t.sent;case 12:return t.abrupt("return",s);case 13:case"end":return t.stop()}}),t)})))()},simpleIsEmpty:function(e){return null===e||""===e||void 0===e||(!(!e.hasOwnProperty("length")||0!==e.length)||"{}"===JSON.stringify(e))},calculateCanPublish:function(){var e=this,t=!0;this.emptyRequiredFields=[],this.formSteps.forEach((function(e){e.showRequiredTips=!1,e.showSatisfiedTips=!1})),this.requiredFields.forEach((function(i){var s;i===n["V"].Slides||i===n["v"].Slides?e.content.presentationId&&null!==(s=e.content.pageObjects)&&void 0!==s&&s.length||(e.emptyRequiredFields.push(i),e.formSteps.forEach((function(e){e.commonFields.indexOf(i)>-1&&(e.showRequiredTips=!0,e.showSatisfiedTips=!1,t=!1)}))):i===n["V"].Link||i===n["w"].Link||"learnOuts"===i||"questions"===i||"overview"===i||"goals"===i||e.simpleIsEmpty(e.content[i])&&(e.$logger.info("".concat(i," is empty"),e.content[i]),e.emptyRequiredFields.push(i),e.formSteps.forEach((function(e){e.commonFields.indexOf(i)>-1&&(e.showRequiredTips=!0,e.showSatisfiedTips=!1,t=!1)})))})),this.content.canPublish,this.content.canPublish=t}}}},fde4:function(e,t,i){}}]);