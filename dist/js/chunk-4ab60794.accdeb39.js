(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ab60794"],{"073c":function(e,t,i){},1188:function(e,t,i){},"1d6d":function(e,t,i){"use strict";i("1188")},"21fb":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("b0c0");var a={data:function(){return{unwatch:null,routeName:this.$route.name}},created:function(){var e=this;this.unwatch=this.$store.watch((function(e){return e.user.currentSchool}),(function(t){return t&&e.$route.name===e.routeName&&e.handleSchoolChange(t)}))},computed:{},beforeDestroy:function(){this.unwatch&&this.unwatch()},methods:{handleSchoolChange:function(e){}}}},"2c45":function(e,t,i){"use strict";i("4180")},3264:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-library",style:{height:"modal"===e.displayMode?"600px":"100vh"},attrs:{id:"new-library"}},[a("div",{staticClass:"navigation"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.expandedListFlag,expression:"!expandedListFlag"}],staticClass:"navigation-item",style:{left:"100px",width:"1000px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showCurriculum,expression:"showCurriculum"}],staticClass:"select-curriculum"},[a("div",{staticClass:"my-curriculum-select"},[e.curriculumOptions.length?a("a-select",{staticClass:"select-curriculum",attrs:{"default-value":e.$store.getters.bindCurriculum},on:{change:e.handleCurriculumChange},model:{value:e.currentCurriculumId,callback:function(t){e.currentCurriculumId=t},expression:"currentCurriculumId"}},[e._l(e.curriculumOptions,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),a("div",{staticClass:"arrow-self",attrs:{slot:"suffixIcon"},slot:"suffixIcon"},[a("img",{attrs:{src:i("9c74")}})])],2):e._e()],1)]),a("new-navigation",{ref:"nav",attrs:{"current-curriculum":e.currentCurriculumId},on:{"update-path":e.handleUpdateCurrentNavPath}})],1)]),a("div",{staticClass:"main"},[a("div",{staticClass:"selected-content",style:{width:e.componentWidth-380+"px"}},[a("div",{staticClass:"main-content-list"},[!e.hasSelectedContent&&e.selectMode!==e.selectModelType.evaluationMode&&e.isEmptyRecommend?a("div",{staticClass:"no-select-content"},[e._m(0),a("div",{staticClass:"no-select-text"},[e._v(" You haven't added learning objectives yet ")])]):e._e(),e.isEmptyRecommend?e._e():a("div",{staticClass:"recommend-description"},[e._m(1),a("div",{staticClass:"recommend-detail"},e._l(e.myRecommendData,(function(t,s){return a("div",{key:s,staticClass:"recommend-list",attrs:{"data-item":JSON.stringify(t)}},[a("div",{staticClass:"recommend-from",attrs:{"data-from-id":t.fromId}},[a("h4",[e._v("From "),a("span",{staticClass:"from-type-name"},[e._v(e._s(t.fromTypeName))]),e._v(" : "+e._s(t.fromName))])]),t.skillList.length?[e._m(2,!0),e._l(t.skillList,(function(t,s){return a("div",{key:"ria-"+s,class:{"recommend-item":!0,"my-selected-item":-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId),"disabled-select-item":-1!==e.mySelectedIdList.indexOf(t.knowledgeId)},attrs:{"data-tag-type":t.tagType,"data-knowledge-id":t.knowledgeId,"data-selected-id-list":e.mySelectedIdList},on:{click:function(i){return e.handleAddRecommend(t)}}},[a("a-tooltip",{staticClass:"my-tooltip",attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[e._v(" "+e._s(t.path?t.path:t.name)+" ")]),a("div",{staticClass:"select-block"},[-1===e.selectedRecommendIdList.indexOf(t.knowledgeId)?a("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):e._e(),-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId)?a("div",{staticClass:"selected-icon"},[a("img",{attrs:{src:i("7aa6")}})]):e._e()],1),a("div",{staticClass:"right-name"},[t.isSelfCustom?a("div",{staticClass:"custom-icon"},[a("a-icon",{attrs:{type:"user-add"}})],1):e._e(),e._v(" "+e._s(t.name)+" ")]),a("div",{staticClass:"recommend-selected-left-bar",attrs:{"tag-type":t.tagType}})],2)],1)}))]:e._e(),t.knowledgeList.length?[e._m(3,!0),e._l(t.knowledgeList,(function(t,s){return a("div",{key:"ril-"+s,class:{"recommend-item":!0,"my-selected-item":-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId),"disabled-select-item":-1!==e.mySelectedIdList.indexOf(t.knowledgeId)},attrs:{"data-tag-type":t.tagType,"data-knowledge-id":t.knowledgeId,"data-selected-id-list":e.mySelectedIdList},on:{click:function(i){return e.handleAddRecommend(t)}}},[a("a-tooltip",{staticClass:"my-tooltip",attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[e._v(" "+e._s(t.path?t.path:t.name)+" ")]),a("div",{staticClass:"select-block"},[-1===e.selectedRecommendIdList.indexOf(t.knowledgeId)?a("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):e._e(),-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId)?a("div",{staticClass:"selected-icon"},[a("img",{attrs:{src:i("7aa6")}})]):e._e()],1),a("div",{staticClass:"right-name"},[t.isSelfCustom?a("div",{staticClass:"custom-icon"},[a("a-icon",{attrs:{type:"user-add"}})],1):e._e(),e._v(" "+e._s(t.name)+" ")]),a("div",{staticClass:"recommend-selected-left-bar",attrs:{"tag-type":t.tagType}})],2)],1)}))]:e._e(),t.centuryList.length?[a("div",{staticClass:"recommend-type-title"},[a("div",{staticClass:"title-item title-21"},[e._v(e._s(e.$classcipe.get21stCenturyDisplayNameByCurriculum(e.$store.getters.bindCurriculum)))])]),e._l(t.centuryList,(function(t,s){return a("div",{key:"ri2-"+s,class:{"recommend-item":!0,"my-selected-item":-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId),"disabled-select-item":-1!==e.mySelectedIdList.indexOf(t.knowledgeId)},attrs:{"data-tag-type":t.tagType,"data-knowledge-id":t.knowledgeId,"data-selected-id-list":e.mySelectedIdList},on:{click:function(i){return e.handleAddRecommend(t)}}},[a("a-tooltip",{staticClass:"my-tooltip",attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[e._v(" "+e._s(t.path?t.path:t.name)+" ")]),a("div",{staticClass:"select-block"},[-1===e.selectedRecommendIdList.indexOf(t.knowledgeId)?a("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):e._e(),-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId)?a("div",{staticClass:"selected-icon"},[a("img",{attrs:{src:i("7aa6")}})]):e._e()],1),a("div",{staticClass:"right-name"},[t.isSelfCustom?a("div",{staticClass:"custom-icon"},[a("a-icon",{attrs:{type:"user-add"}})],1):e._e(),e._v(" "+e._s(t.name)+" ")]),a("div",{staticClass:"recommend-selected-left-bar",attrs:{"tag-type":t.tagType}})],2)],1)}))]:e._e()],2)})),0)]),e.hasSelectedContent?a("div",{staticClass:"selected-list"},[e._m(4),a("div",{staticClass:"content-list"},[e.displayContentList(e.tagType.skill).length>0?a("div",{staticClass:"selected-category"},[a("div",{staticClass:"category-name title-item title-skill"},[e._v("Achievement objectives")]),a("div",{staticClass:"category-list"},e._l(e.displayContentList(e.tagType.skill),(function(t,s){return a("div",{key:"curr-"+s,class:{"content-item":!0,"selected-line":!0}},[a("div",{staticClass:"name"},[a("div",{staticClass:"selected-left-bar",attrs:{"tag-type":t.tagType}}),a("div",{staticClass:"name-text"},[e._v(" "+e._s(t.knowledgeData&&t.knowledgeData.name||t.bigIdea||t.item&&t.item.name||t.name)+" ")]),e._m(5,!0),a("div",{staticClass:"action-icon-right",on:{click:function(i){return e.handleRemoveSelected(t)}}},[a("img",{attrs:{src:i("4165")}})])])])})),0)]):e._e(),e.displayContentList(e.tagType.knowledge).length>0?a("div",{staticClass:"selected-category"},[a("div",{staticClass:"category-name title-item title-learnout"},[e._v("Learning outcomes")]),a("div",{staticClass:"category-list"},e._l(e.displayContentList(e.tagType.knowledge),(function(t,s){return a("div",{key:"curr-"+s,class:{"content-item":!0,"selected-line":!0}},[a("div",{staticClass:"name"},[a("div",{staticClass:"selected-left-bar",attrs:{"tag-type":t.tagType}}),a("div",{staticClass:"name-text"},[e._v(" "+e._s(t.knowledgeData&&t.knowledgeData.name||t.bigIdea||t.item&&t.item.name||t.name)+" ")]),e._m(6,!0),a("div",{staticClass:"action-icon-right",on:{click:function(i){return e.handleRemoveSelected(t)}}},[a("img",{attrs:{src:i("4165")}})])])])})),0)]):e._e(),e.displayContentList(e.tagType.century).length>0||e.selected21CenturyItem?a("div",{staticClass:"selected-category"},[a("div",{staticClass:"category-name title-item title-21"},[e._v(e._s(e.$classcipe.get21stCenturyDisplayNameByCurriculum(e.$store.getters.bindCurriculum)))]),a("div",{staticClass:"category-list"},[e._l(e.displayContentList(e.tagType.century),(function(t,s){return a("div",{key:"curr-"+s,class:{"content-item":!0,"selected-line":!0}},[a("div",{staticClass:"name"},[a("div",{staticClass:"selected-left-bar",attrs:{"tag-type":t.tagType}}),a("div",{staticClass:"name-text"},[e._v(" "+e._s(t.knowledgeData&&t.knowledgeData.name||t.bigIdea||t.item&&t.item.name||t.name)+" ")]),e._m(7,!0),a("div",{staticClass:"action-icon-right",on:{click:function(i){return e.handleRemoveSelected(t)}}},[a("img",{attrs:{src:i("4165")}})])])])})),e.selected21CenturyItem?[a("div",{class:{"content-item":!0,"selected-line":!0}},[a("div",{staticClass:"name"},[a("div",{staticClass:"selected-left-bar",attrs:{"tag-type":e.selected21CenturyItem.tagType}}),a("div",{staticClass:"name-text"},[e._v(" "+e._s(e.selected21CenturyItem.name)+" ")]),e._m(8),a("div",{staticClass:"action-icon-right",on:{click:e.handleRemoveMySelected21Century}},[a("img",{attrs:{src:i("4165")}})])])])]:e._e()],2)]):e._e(),a("div",{staticClass:"selected-action"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasSelectedContent,expression:"hasSelectedContent"}],staticClass:"modal-ensure-action-line-center"},[a("a-space",[a("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:e.handleCancelSelectData}},[e._v("Cancel")]),a("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:e.handleEnsureSelectData}},[e._v(" Ok ")])],1)],1)])])]):e._e()])]),a("div",{staticClass:"main-tree-content",style:{left:(e.expandedListFlag?e.componentWidth-400:100)+"px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.expandedListFlag,expression:"expandedListFlag"}],staticClass:"selected-toggle-mask",on:{click:function(t){e.expandedListFlag=!e.expandedListFlag}}}),a("div",{staticClass:"expand-icon",on:{click:function(t){e.expandedListFlag=!e.expandedListFlag}}},[a("div",{staticClass:"expand-icon-area"},[e.expandedListFlag?[a("a-icon",{staticStyle:{"font-size":"16px",color:"#07AB84"},attrs:{type:"left"}})]:e._e(),e.expandedListFlag?e._e():[a("a-icon",{staticStyle:{"font-size":"16px",color:"#07AB84"},attrs:{type:"right"}})]],2)]),a("div",{staticClass:"tree-navigation"},[a("new-tree-navigation",{attrs:{"select-mode":e.selectMode,"question-index":e.questionIndex,"show-menu":e.showMenu,"default-active-menu":e.defaultActiveMenu,"default-curriculum-id":e.defaultCurriculumId}})],1),a("div",{staticClass:"content-list"},[a("new-content-list",{ref:"contentList",attrs:{"selected-list":e.mySelectedList,"current-nav-path":e.currentNavPath},on:{"select-big-idea":e.handleSelectBigIdeaData,"select-sync":e.handleSelectListData,"select-curriculum":e.handleSelectCurriculumListData,"select-subject-specific-skill":e.handleSelectSubjectSpecificSkillListData,"select-century-skill":e.handleSelect21CenturySkillListData,"select-all-21-century":e.handleSelectAll21CenturyListData,"select-assessmentType":e.handleSelectAssessmentType,"select-idu":e.handleSelectIdu,"update-selected-list":e.handleUpdateSelectedList}})],1)])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"no-select-img"},[a("img",{staticClass:"logo",attrs:{src:i("64f9")}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"recommend-title"},[i("h3",[e._v("Recommended learning objectives")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"recommend-type-title"},[i("div",{staticClass:"title-item title-skill"},[e._v("Achievement objectives")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"recommend-type-title"},[i("div",{staticClass:"title-item title-learnout"},[e._v("Learning outcomes")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"recommend-title"},[i("h3",[e._v("Selected learning objectives")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"action-icon"},[a("img",{attrs:{src:i("7aa6")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"action-icon"},[a("img",{attrs:{src:i("7aa6")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"action-icon"},[a("img",{attrs:{src:i("7aa6")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"action-icon"},[a("img",{attrs:{src:i("7aa6")}})])}],n=i("2909"),r=(i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("159b"),i("c740"),i("a434"),i("4de4"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"nav-path-wrapper"},[i("div",{staticClass:"nav-path"},e._l(e.navPath,(function(t,a){return t?i("div",{key:a,staticClass:"nav-path-item",on:{click:function(i){return e.handleLibraryNavClick(t)}}},[t.name&&t.name.length>20?[i("a-tooltip",{attrs:{mouseEnterDelay:1}},[i("template",{slot:"title"},[e._v(" "+e._s(t.name)+" ")]),i("a-icon",{attrs:{type:"right"}}),e._v(" "+e._s(t.name)+" ")],2)]:[i("a-icon",{attrs:{type:"right"}}),e._v(" "+e._s(t.name)+" ")]],2):e._e()})),0)])}),d=[],l=(i("b0c0"),i("7db0"),i("a02e")),c=i("d597"),o={name:"NewNavigation",props:{currentCurriculum:{type:String,default:null}},data:function(){return{navPath:[],curriculumLabel:null}},created:function(){this.$logger.info("NewNavigation")},watch:{navPath:function(e){this.$logger.info("NewNavigation navPath changed",e);var t=this.curriculumLabel+">";e.forEach((function(e){e&&e.hasOwnProperty("name")&&(t+=e.name+">")})),t.lastIndexOf(">")===t.length-1&&(t=t.substring(0,t.length-1)),this.$emit("update-path",t)}},mounted:function(){l["LibraryEventBus"].$on(l["LibraryEvent"].ContentListUpdate,this.handleContentListUpdate),l["LibraryEventBus"].$on(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum),this.getCurriculums()},destroyed:function(){l["LibraryEventBus"].$off(l["LibraryEvent"].ContentListUpdate,this.handleContentListUpdate),l["LibraryEventBus"].$off(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum)},methods:{handleContentListUpdate:function(e){this.$logger.info("handleContentListUpdate",e);var t=Object.assign({},e),i=[t.parentTreeData,t.currentTreeData],a=t.parentTreeData;while(a&&a.parent)i.unshift(Object.assign({},a.parent)),a=a.parent;this.navPath=i},handleChangeCurriculum:function(){this.$logger.info("NewNavigation handleChangeCurriculum"),this.navPath=[]},handleLibraryNavClick:function(e){this.$logger.info("handleLibraryNavClick ",e),l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,parent:e.parent})},getCurriculums:function(){var e=this;Object(c["e"])().then((function(t){if(e.$logger.info("getAllCurriculums",t),t.success){var i=e.currentCurriculum?e.currentCurriculum:e.$store.getters.bindCurriculum,a=t.result.find((function(e){return parseInt(e.id)===parseInt(i)}));e.$logger.info("bindCurriculum",a),a&&(e.curriculumLabel=a.name)}}))}}},u=o,h=(i("97f2"),i("0c7c")),p=Object(h["a"])(u,r,d,!1,null,"2e45fe43",null),m=p.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-list-wrapper",style:{width:e.nameWidth+"px"}},[e._m(0),a("div",{staticClass:"content-list"},[e.contentDataList&&e.contentDataList.length?e._l(e.contentDataList,(function(t,s){return a("div",{key:s,class:{"content-item":!0,"odd-line":s%2===0,"even-line":s%2===1,"active-line":e.currentId===t.id,"selected-line":e.isSelectedItem(t)},attrs:{"data-item-id":t.id},on:{click:function(i){return e.handleContentListItemClick(t)}}},[a("div",{staticClass:"name"},[a("div",{staticClass:"icon item-type-icon"},[0!==t.children.length||t.gradeList&&0!==t.gradeList.length||t.hasOwnProperty("isGrade")&&t.isGrade||!t.hasOwnProperty("tagType")?[a("a-icon",{staticClass:"file-dir-icon",attrs:{type:"folder",theme:"filled"}})]:e.isSelectedItem(t)&&t.hasOwnProperty("tagType")?[a("img",{attrs:{src:i("7aa6")}})]:!e.isSelectedItem(t)&&t.hasOwnProperty("tagType")?[a("div",{staticClass:"empty-circle"})]:e._e()],2),a("a-tooltip",{attrs:{placement:"top"}},[t.gradeNames&&t.gradeNames.length>0?a("template",{slot:"title"},[e._v(e._s(e._f("gradeFormat")(t.gradeNames)))]):e._e(),a("div",{staticClass:"name-text"},[e._v(" "+e._s(t.name||t.description)+" ")])],2)],1)])})):[e.firstLoad?e._e():a("div",{staticClass:"content-empty"},[a("no-more-resources",{attrs:{tips:"No data under selected level, please check other levels."}})],1)]],2),a("a-drawer",{attrs:{destroyOnClose:"",placement:"right",closable:"",width:"800px",visible:e.previewVisible},on:{close:e.handlePreviewClose}},[a("div",{staticClass:"preview-wrapper"},[a("div",{staticClass:"preview-detail"},[e.previewType===e.typeMap["unit-plan"]?a("unit-plan-preview",{attrs:{"unit-plan-id":e.previewCurrentId,"show-associate":!0}}):e._e(),e.previewType===e.typeMap.material?a("material-preview",{attrs:{"material-id":e.previewCurrentId,"show-associate":!0}}):e._e()],1)])])],1)},y=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content-header"},[i("div",{staticClass:"name"},[e._v(" Name ")])])}],f=(i("4ec9"),i("8f46")),C=i("ea23"),I=i("7d7a"),v=i("3f76"),b=i("ab44"),T=i("69b3"),L=i("4fcf"),S=L.debounce,w={name:"NewContentList",components:{NoMoreResources:T["a"],ContentTypeIcon:f["a"],UnitPlanPreview:C["default"],MaterialPreview:I["default"]},props:{selectedList:{type:Array,default:function(){return[]}},currentNavPath:{type:String,default:null}},data:function(){return{currentId:null,nameWidth:500,contentDataList:[],parent:null,previewVisible:!1,previewCurrentId:"",previewType:"",blockIndex:0,typeMap:v["e"],firstLoad:!0,NavigationType:b["a"],selectedCurriculumIdList:[],selectedCurriculumMap:new Map,selectedKnowledgeIdList:[],selectedKnowledgeIdNameMap:new Map,selected21CenturySkillIdList:[],selected21CenturySkillIdMap:new Map,selectedSubjectSpecificSkillIdList:[],selectedSubjectSpecificSkillIdMap:new Map,selectedAssessmentIdList:[],selectedAssessmentMap:new Map,selectedAll21CenturyIdList:[],selectedAll21CenturyMap:new Map,selectedIDUIdList:[],selectedIDUMap:new Map,selectedIdList:[],selectedMap:new Map,selectedBigIdeaList:[],currentDataType:"none",mySelectedList:[],backgroundColor:"#ffffff"}},watch:{selectedList:function(e){var t=this;this.$logger.info("NewContentList selectedList change",e),this.mySelectedList=e,this.selectedIdList=[],this.selectedMap.clear(),this.mySelectedList.forEach((function(e){t.selectedIdList.push(e.knowledgeId),t.selectedMap.set(e.knowledgeId,e)}))}},mounted:function(){var e=this;l["LibraryEventBus"].$on(l["LibraryEvent"].ContentListUpdate,this.handleContentListUpdate),l["LibraryEventBus"].$on(l["LibraryEvent"].ContentListSelectedListUpdate,this.handleContentSelectedListUpdate),l["LibraryEventBus"].$on(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum),l["LibraryEventBus"].$on(l["LibraryEvent"].ResetContentList,this.handleResetContentList),this.nameWidth=document.getElementById("new-library").getBoundingClientRect().width-505,this.$logger.info("nameWidth "+this.nameWidth),this.$logger.info("NewContentList selectedList",this.selectedList),this.mySelectedList=this.selectedList,this.assignSelectedList(),window.onresize=S((function(){e.nameWidth=document.getElementById("new-library").getBoundingClientRect().width-505}),300)},methods:{isSelectedItem:function(e){if(-1!==this.selectedIdList.indexOf(e.id))return!0;switch(this.currentDataType){case b["a"].sync:return-1!==this.selectedKnowledgeIdList.indexOf(e.knowledgeId);case b["a"].learningOutcomes:return-1!==this.selectedCurriculumIdList.indexOf(e.id);case b["a"].specificSkills:return-1!==this.selectedSubjectSpecificSkillIdList.indexOf(e.id);case b["a"].centurySkills:case b["a"].AUGeneralCapabilities:case b["a"].NZKeyCompetencies:return-1!==this.selected21CenturySkillIdList.indexOf(e.id);case b["a"].sdg:return-1!==this.selectedBigIdeaList.indexOf(e.id);case b["a"].assessmentType:return-1!==this.selectedAssessmentIdList.indexOf(e.id);case b["a"].all21Century:return-1!==this.selectedAll21CenturyIdList.indexOf(e.id);case b["a"].idu:return-1!==this.selectedIDUIdList.indexOf(e.id);default:return!1}},handleChangeCurriculum:function(){this.$logger.info("NewContentList handleChangeCurriculum"),this.contentDataList=[],this.parent=null,this.firstLoad=!0,this.currentDataType=null},handleResetContentList:function(){this.$logger.info("NewContentList handleResetContentList"),this.contentDataList=[],this.parent=null,this.firstLoad=!0,this.currentDataType=null},assignSelectedList:function(){var e=this;this.$logger.info("assignSelectedList",this.selectedList),this.selectedIdList=[],this.selectedMap.clear(),this.selectedList.forEach((function(t){e.selectedIdList.push(t.knowledgeId),e.selectedMap.set(t.knowledgeId,t)})),this.$logger.info("assignSelectedList selectedIdList",this.selectedIdList)},handleContentListUpdate:function(e){this.$logger.info("NewContentList handleContentListUpdate ",e),this.backgroundColor=e.backgroundColor,this.contentDataList=e.contentList,this.parent=e.currentTreeData,this.currentDataType=e.dataType,this.firstLoad=!1},handleContentSelectedListUpdate:function(e){this.$logger.info("handleContentSelectedListUpdate ",e),-1===this.selectedCurriculumIdList.indexOf(e.id)?(this.selectedCurriculumIdList.push(e.id),this.selectedCurriculumMap.set(e.id,e)):(this.selectedCurriculumIdList.splice(this.selectedCurriculumIdList.indexOf(e.id),1),this.selectedCurriculumMap.delete(e.id)),this.$logger.info("after handleContentSelectedListUpdate ",this.selectedCurriculumIdList,this.selectedCurriculumMap)},handleContentListItemClick:function(e){var t=this;this.$logger.info(this.currentDataType+": handleContentListItemClick current item: ",e," parent:",this.parent),e.originParent=this.parent;var i=this.selectedIdList.indexOf(e.id);if(-1!==i){this.selectedIdList.splice(i,1),this.selectedMap.delete(e.id),this.$logger.info("delete from selectedIdList",this.selectedIdList);var a=this.mySelectedList.findIndex((function(t){return t.knowledgeId===e.id}));return this.mySelectedList.splice(a,1),void this.$emit("update-selected-list",this.mySelectedList)}if(this.currentDataType===b["a"].learningOutcomes)if(e.children.length||e.gradeList&&e.gradeList.length||e.hasOwnProperty("gradeList"))l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync",e,this.currentDataType,this.parent);else if(e.hasOwnProperty("isGrade")){var s={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,s),this.$logger.info("current is grade, skip empty children item!",s)}else{var n=this.selectedCurriculumIdList.indexOf(e.id);-1!==n?(this.selectedCurriculumIdList.splice(n,1),this.selectedCurriculumMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedCurriculumIdList.push(e.id),this.selectedCurriculumMap.set(e.id,e));var r=[];this.selectedCurriculumIdList.forEach((function(e){r.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedCurriculumMap.get(e)})})),this.$emit("select-curriculum",r),this.$logger.info("selectedCurriculumMap",this.selectedCurriculumMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].specificSkills)if(e.children.length||e.gradeList&&e.gradeList.length)l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync specificSkills",e,this.currentDataType,this.parent);else if(e.hasOwnProperty("isGrade")){var d={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,d),this.$logger.info("current is grade, skip empty children item!",d)}else{var c=this.selectedSubjectSpecificSkillIdList.indexOf(e.id);-1!==c?(this.selectedSubjectSpecificSkillIdList.splice(c,1),this.selectedSubjectSpecificSkillIdMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedSubjectSpecificSkillIdList.push(e.id),this.selectedSubjectSpecificSkillIdMap.set(e.id,e));var o=[];this.selectedSubjectSpecificSkillIdList.forEach((function(e){o.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedSubjectSpecificSkillIdMap.get(e)})})),this.$emit("select-subject-specific-skill",o),this.$logger.info("selectedSubjectSpecificSkillIdMap",this.selectedSubjectSpecificSkillIdMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].centurySkills||this.currentDataType===b["a"].AUGeneralCapabilities||this.currentDataType===b["a"].NZKeyCompetencies)if(e.children.length||e.gradeList&&e.gradeList.length)l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync");else if(e.hasOwnProperty("isGrade")){var u={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,u),this.$logger.info("current is grade, skip empty children item!",u)}else{var h=this.selected21CenturySkillIdList.indexOf(e.id);-1!==h?(this.selected21CenturySkillIdList.splice(h,1),this.selected21CenturySkillIdMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selected21CenturySkillIdList.push(e.id),this.selected21CenturySkillIdMap.set(e.id,e));var p=[];this.selected21CenturySkillIdList.forEach((function(e){p.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selected21CenturySkillIdMap.get(e)})})),this.$emit("select-century-skill",p),this.$logger.info("selected21CenturySkillIdMap",this.selected21CenturySkillIdMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].sdg)if(e.hasOwnProperty("isBigIdea")){var m=this.selectedBigIdeaList.indexOf(e.id);-1!==m?this.selectedBigIdeaList.splice(m,1):this.selectedBigIdeaList.push(e.id);var g=[];this.selectedBigIdeaList.forEach((function(e){g.push({dataType:t.currentDataType,bigIdea:e})})),this.$emit("select-big-idea",g),this.$logger.info("select-big-idea",this.selectedBigIdeaList),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else{var y={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,y),this.$logger.info("BigIdea $emit sync eventData",y)}else if(this.currentDataType===b["a"].assessmentType)if(!e.hasOwnProperty("isKnowledge")||e.gradeList&&e.gradeList.length)l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync");else if(e.hasOwnProperty("isGrade")){var f={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,f),this.$logger.info("current is grade, skip empty children item!",f)}else{var C=this.selectedAssessmentIdList.indexOf(e.id);-1!==C?(this.selectedAssessmentIdList.splice(C,1),this.selectedAssessmentMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedAssessmentIdList.push(e.id),this.selectedAssessmentMap.set(e.id,e));var I=[];this.selectedAssessmentIdList.forEach((function(e){I.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedAssessmentMap.get(e)})})),this.$emit("select-assessmentType",I),this.$logger.info("selectedAssessmentMap",this.selectedAssessmentMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].all21Century)if(e.children.length)l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync");else{var v=this.selectedAll21CenturyIdList.indexOf(e.id);-1!==v?(this.selectedAll21CenturyIdList.splice(v,1),this.selectedAll21CenturyMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedAll21CenturyIdList.push(e.id),this.selectedAll21CenturyMap.set(e.id,e));var T=[];this.selectedAll21CenturyIdList.forEach((function(e){T.push({dataType:t.currentDataType,all21Century:e,item:t.selectedAll21CenturyMap.get(e)})})),this.$emit("select-all-21-century",T),this.$logger.info("select-all-21-century",T),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].idu)if(e.hasOwnProperty("isGrade")){var L={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,L),this.$logger.info("current is grade, skip empty children item!",L)}else{var S=this.selectedIDUIdList.indexOf(e.id);-1!==S?(this.selectedIDUIdList.splice(S,1),this.selectedIDUMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedIDUIdList.push(e.id),this.selectedIDUMap.set(e.id,e));var w=[];this.selectedIDUIdList.forEach((function(e){w.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedIDUMap.get(e)})})),this.$emit("select-idu",w),this.$logger.info("selectedIDUMap",this.selectedIDUMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}},handlePreviewClose:function(){this.$logger.info("handlePreviewClose"),this.previewCurrentId="",this.previewType="",this.previewVisible=!1},handlePreviewDetail:function(e){this.$logger.info("handlePreviewDetail",e),this.previewCurrentId=e.id,this.previewType=e.type,this.previewVisible=!0},handleRemoveSelected:function(e){var t=this;if(this.$logger.info("Content List handleRemoveSelected "+e.dataType,e),e.dataType===b["a"].sync){var i=this.selectedKnowledgeIdList.indexOf(e.knowledgeId);-1!==i&&(this.selectedKnowledgeIdList.splice(i,1),this.selectedKnowledgeIdNameMap.delete(e.knowledgeId));var a=[];this.selectedKnowledgeIdList.forEach((function(i){a.push({dataType:e.dataType,knowledgeId:i,name:t.selectedKnowledgeIdNameMap.get(i),tagType:e.tagType,tags:e.tags})})),this.$emit("select-sync",a)}else if(e.dataType===b["a"].learningOutcomes){var s=this.selectedCurriculumIdList.indexOf(e.knowledgeData.id);-1!==s&&(this.selectedCurriculumIdList.splice(s,1),this.selectedCurriculumMap.delete(e.knowledgeData.id));var n=[];this.selectedCurriculumIdList.forEach((function(i){n.push({dataType:e.dataType,knowledgeId:i,knowledgeData:t.selectedCurriculumMap.get(i)})})),this.$emit("select-curriculum",n)}else if(e.dataType===b["a"].specificSkills){var r=this.selectedSubjectSpecificSkillIdList.indexOf(e.knowledgeData.id);-1!==r&&(this.selectedSubjectSpecificSkillIdList.splice(r,1),this.selectedSubjectSpecificSkillIdMap.delete(e.knowledgeData.id));var d=[];this.selectedSubjectSpecificSkillIdList.forEach((function(i){d.push({dataType:e.dataType,knowledgeId:i,knowledgeData:t.selectedSubjectSpecificSkillIdMap.get(i)})})),this.$emit("select-subject-specific-skill",d)}else if(e.dataType===b["a"].centurySkills||e.dataType===b["a"].AUGeneralCapabilities||e.dataType===b["a"].NZKeyCompetencies){var l=this.selected21CenturySkillIdList.indexOf(e.knowledgeData.id);-1!==l&&(this.selected21CenturySkillIdList.splice(l,1),this.selected21CenturySkillIdMap.delete(e.knowledgeData.id));var c=[];this.selected21CenturySkillIdList.forEach((function(i){c.push({dataType:e.dataType,knowledgeId:i,knowledgeData:t.selected21CenturySkillIdMap.get(i)})})),this.$emit("select-century-skill",c)}else if(e.dataType===b["a"].sdg){var o=this.selectedBigIdeaList.indexOf(e.bigIdea);-1!==o&&this.selectedBigIdeaList.splice(o,1);var u=[];this.selectedBigIdeaList.forEach((function(t){u.push({dataType:e.dataType,bigIdea:t})})),this.$emit("select-big-idea",u)}else if(e.dataType===b["a"].assessmentType){var h=this.selectedAssessmentIdList.indexOf(e.knowledgeData.id);-1!==h&&(this.selectedAssessmentIdList.splice(h,1),this.selectedAssessmentMap.delete(e.knowledgeData.id));var p=[];this.selectedAssessmentIdList.forEach((function(e){p.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedAssessmentMap.get(e)})})),this.$emit("select-assessmentType",p)}else if(e.dataType===b["a"].all21Century){var m=this.selectedAll21CenturyIdList.indexOf(e.item.id);-1!==m&&(this.selectedAll21CenturyIdList.splice(m,1),this.selectedAll21CenturyMap.delete(e.item.id));var g=[];this.selectedAll21CenturyIdList.forEach((function(i){g.push({dataType:e.dataType,all21Century:i,item:t.selectedAll21CenturyMap.get(i)})})),this.$emit("select-all-21-century",g)}else if(e.dataType===b["a"].idu){var y=this.selectedIDUIdList.indexOf(e.id);-1!==y?(this.selectedIDUIdList.splice(y,1),this.selectedIDUMap.delete(e.id)):(this.selectedIDUIdList.push(e.id),this.selectedIDUMap.set(e.id,e));var f=[];this.selectedIDUIdList.forEach((function(e){f.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedIDUMap.get(e)})})),this.$emit("select-idu",f),this.$logger.info("selectedIDUMap",this.selectedIDUMap)}}},destroyed:function(){l["LibraryEventBus"].$off(l["LibraryEvent"].ContentListUpdate,this.handleContentListUpdate),this.$logger.info("off NewContentList ContentListUpdate handler"),l["LibraryEventBus"].$off(l["LibraryEvent"].ContentListSelectedListUpdate,this.handleContentSelectedListUpdate),l["LibraryEventBus"].$off(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum),l["LibraryEventBus"].$off(l["LibraryEvent"].ResetContentList,this.handleResetContentList),this.$logger.info("off NewContentList ContentListSelectedListUpdate handler")}},k=w,D=(i("9f4c"),Object(h["a"])(k,g,y,!1,null,"67a7e17c",null)),$=D.exports,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"new-tree-navigation",attrs:{"data-display-menu":JSON.stringify(e.displayCategoryList)}},[e._l(e.treeDataList,(function(t,a){return e.loaded&&e.displayCategoryList&&-1!==e.showMenu.indexOf(t.type)?i("new-tree-item",{key:a,staticClass:"tree-item-type",attrs:{"grade-list":e.gradeList,"tree-item-data":t,"tree-current-parent":null,"default-background-color":t.backgroundColor,"default-deep":0,"current-item-type":t.type===e.NavigationType.learningOutcomes?"subject":t.type===e.NavigationType.sync?"sync":t.type===e.NavigationType.specificSkills||t.type===e.NavigationType.assessmentType?"subject":t.type===e.NavigationType.centurySkills||e.NavigationType.AUGeneralCapabilities||e.NavigationType.NZKeyCompetencies?"grade":t.type===e.NavigationType.sdg?"sdg":t.type===e.NavigationType.all21Century?"all21Century":t.type===e.NavigationType.idu?"grade":"none","select-mode":e.selectMode,"question-index":e.questionIndex,"default-expand-status":t.expandStatus,"tree-item-type":t.type,"root-type":t.type,"data-item-type":t.type,odd:a%2===1,"default-grade-id":e.defaultGradeId,"default-curriculum-id":e.defaultCurriculumId}}):e._e()})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.loaded&&0===e.displayCategoryList.length,expression:"loaded && displayCategoryList.length === 0"}],staticClass:"no-display-category"},[i("no-more-resources",{attrs:{tips:"The data is not available, please contact your school admin to upload first."}})],1),i("div",{staticClass:"loading-spin"},[i("a-spin",{directives:[{name:"show",rawName:"v-show",value:!e.loaded,expression:"!loaded"}]})],1)],2)},E=[],_=i("5530"),B=(i("99af"),i("d81d"),i("caad"),i("2532"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.treeItemData?a("div",{staticClass:"tree-item",attrs:{"data-deep":e.defaultDeep,"data-tree-type":e.treeItemType,"data-current-type":e.currentItemType,"data-selected-grade-id":e.treeItemData.selectedGradeId+"","data-selected-grade-name":e.treeItemData.selectedGradeName+"","data-root-type":e.rootType}},[a("div",{staticClass:"border-left-tag",style:{background:e.treeItemData.backgroundColor}}),a("div",{class:{"item-wrapper":!0,"odd-line":e.odd,"even-line":!e.odd},style:{paddingLeft:(e.defaultDeep*e.defaultPaddingLeft===0?e.defaultPaddingLeft/3:e.defaultDeep*e.defaultPaddingLeft)+"px"}},[a("div",{staticClass:"subtree-icon-wrapper"},[e.hasSubTree?a("div",{staticClass:"subtree-icon-item"},[e.subTreeExpandStatus?e._e():[e.subTreeLoading?e._e():a("a-icon",{staticClass:"subtree-icon",attrs:{type:"right"},on:{click:function(t){return e.handleExpandTreeItem(e.treeItemData)}}}),e.subTreeLoading?a("a-spin",{attrs:{size:"small"}}):e._e()],e.subTreeExpandStatus?[e.subTreeLoading?e._e():a("a-icon",{staticClass:"subtree-icon opened-subtree-icon",attrs:{type:"down"},on:{click:function(t){return e.handleCollapseTreeItem(e.treeItemData)}}}),e.subTreeLoading?a("a-spin",{attrs:{size:"small"}}):e._e()]:e._e()],2):e._e()]),a("div",{staticClass:"type-icon-wrapper",on:{click:function(t){return e.handleClickTreeItem(e.subTreeExpandStatus,e.treeItemData)}}},[e.subTreeExpandStatus?a("a-icon",{staticClass:"opened-file-dir-icon",attrs:{type:"folder-open",theme:"filled"}}):e._e(),e.subTreeExpandStatus?e._e():a("a-icon",{staticClass:"file-dir-icon",attrs:{type:"folder",theme:"filled"}})],1),a("div",{staticClass:"display-label-wrapper",on:{click:function(t){return e.handleClickTreeItem(e.subTreeExpandStatus,e.treeItemData)}}},[a("span",{class:{"display-label":!0,"opened-display-label":e.subTreeExpandStatus,"selected-display-label":e.selected21CenturyItem===e.treeItemData}},[e._v(e._s(e.treeItemData.name))]),e.selected21CenturyItem===e.treeItemData?a("img",{attrs:{src:i("7aa6")}}):e._e()])]),e.subItemType?[a("div",{directives:[{name:"show",rawName:"v-show",value:e.subTreeExpandStatus&&e.hasSubTree,expression:"subTreeExpandStatus && hasSubTree"}],staticClass:"sub-tree",attrs:{"data-sub-type":e.subItemType,"data-hasSubTree":e.hasSubTree}},["subject"===e.subItemType?e._l(e.treeItemData.children,(function(t,i){return a("new-tree-item",{key:i,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"default-background-color":e.defaultBackgroundColor,"current-item-type":e.subItemType,"data-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?i%2===1:i%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"grade"===e.subItemType?e._l(e.treeItemData.gradeList,(function(t,i){return a("new-tree-item",{key:i,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-expand-status":t.expandStatus,"default-background-color":e.defaultBackgroundColor,"default-grade-id":e.myDefaultGradeId,odd:e.odd?i%2===1:i%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"assessmentType"===e.subItemType?e._l(e.treeItemData.children,(function(t,i){return a("new-tree-item",{key:i,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?i%2===1:i%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"knowledge"===e.subItemType&&0!==e.treeItemData.children.length&&e.treeItemData.children[0]&&e.treeItemData.children[0].children&&e.treeItemData.children[0].children.length?e._l(e.treeItemData.children,(function(t,i){return a("new-tree-item",{key:i,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?i%2===1:i%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"sdgList"===e.subItemType?e._l(e.treeItemData.children,(function(t,i){return a("new-tree-item",{key:i,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?i%2===1:i%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"sdgKeyword"===e.subItemType?e._l(e.treeItemData.children,(function(t,i){return a("new-tree-item",{key:i,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?i%2===1:i%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"all21Century"===e.subItemType?e._l(e.treeItemData.children,(function(t,i){return a("new-tree-item",{key:i,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?i%2===1:i%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e()],2)]:e._e()],2):e._e()}),G=[],P=(i("a9e3"),i("b3db")),A=i("db6a"),M=i("489c"),U=i("a02e"),O=U.LibraryEvent,j=i("db6a"),N=j.KnowledgeGetTree,q=j.Get21Century,R={collapse:!1,open:!0},K={name:"NewTreeItem",props:{defaultDeep:{type:Number,default:0},defaultExpandStatus:{type:Boolean},gradeList:{type:Array},treeItemData:{type:Object,default:null},treeItemType:{type:String,default:null},rootType:{type:String,default:null},treeCurrentParent:{type:Object,default:null},odd:{type:Boolean,default:!1},defaultPaddingLeft:{type:Number,default:25},selectMode:{type:String,default:null},questionIndex:{type:String,default:null},currentItemType:{type:String,required:!0},defaultBackgroundColor:{type:String,default:null},defaultCurriculumId:{type:String,default:null},defaultGradeId:{type:String,default:null}},data:function(){return{subTreeExpandStatus:R.collapse,hasSubTree:!1,subTreeParent:null,subTreeLoading:!1,subItemType:null,NavigationType:b["a"],currentCurriculumId:null,SelectModel:M["a"],selected21CenturyItem:null,myDefaultGradeId:null}},watch:{hasSubTreeWatch:function(){this.treeItemData&&("subject"===this.currentItemType&&this.treeItemData.children||"knowledge"===this.currentItemType&&this.treeItemData.children||"grade"===this.currentItemType||"sdg"===this.currentItemType||"sdgKnowledge"===this.currentItemType||"all21Century"===this.currentItemType&&this.treeItemData.children.length&&this.treeItemData.children[0].children.length)?this.hasSubTree=!0:this.hasSubTree=!1},defaultCurriculumId:function(e){this.$logger.info("NewTreeItem defaultCurriculumId change currentCurriculumId "+e),this.currentCurriculumId=e},defaultGradeId:function(e){this.myDefaultGradeId=e}},created:function(){this.myDefaultGradeId=this.defaultGradeId,this.subTreeExpandStatus=!!this.treeItemData.expandStatus,this.currentCurriculumId=this.defaultCurriculumId?this.defaultCurriculumId:this.$store.getters.bindCurriculum,this.treeItemData&&this.treeItemData.children&&(this.hasSubTree=!0),"grade"===this.currentItemType&&(this.hasSubTree=!0);var e=Object.assign({},this.treeItemData);e.parent=this.treeCurrentParent,this.subTreeParent=e},mounted:function(){this.treeItemType===b["a"].learningOutcomes?"subject"===this.currentItemType?this.treeItemData.children.length&&!this.treeItemData.children[0].hasOwnProperty("isGrade")?this.subItemType="subject":this.subItemType="grade":("grade"===this.currentItemType||"knowledge"===this.currentItemType&&this.treeItemData.children.length)&&(this.subItemType="knowledge"):this.treeItemType===b["a"].specificSkills?"subject"===this.currentItemType?this.subItemType="grade":("grade"===this.currentItemType||"knowledge"===this.currentItemType&&this.treeItemData.children.length)&&(this.subItemType="knowledge"):this.treeItemType===b["a"].centurySkills||this.treeItemType===b["a"].NZKeyCompetencies||this.treeItemType===b["a"].AUGeneralCapabilities?("grade"===this.currentItemType||"knowledge"===this.currentItemType&&this.treeItemData.children.length)&&(this.subItemType="knowledge"):this.treeItemType===b["a"].sdg?"sdg"===this.currentItemType?this.subItemType="sdgList":"sdgList"===this.currentItemType?this.subItemType="sdgKeyword":"sdgKeyword"===this.currentItemType?this.subItemType="sdgIdea":"sdgIdea"===this.currentItemType&&(this.subItemType="sdgIdeaItem"):this.treeItemType===b["a"].assessmentType?"subject"===this.currentItemType?this.subItemType="grade":"grade"===this.currentItemType?this.subItemType="assessmentType":"assessmentType"===this.currentItemType&&this.treeItemData.children.length&&(this.subItemType="knowledge"):this.treeItemType===b["a"].assessmentType?this.treeItemData.children.length?this.subItemType="all21Century":this.subItemType="all21CenturyDescription":this.treeItemType===b["a"].idu&&"grade"===this.currentItemType&&(this.subItemType="knowledge"),"grade"===this.currentItemType&&this.myDefaultGradeId===this.treeItemData.id&&(this.$logger.info("find defaultGradeId",this.myDefaultGradeId,"current grade id",this.treeItemData.id),this.handleExpandTreeItem(this.treeItemData)),l["LibraryEventBus"].$on(O.ContentListItemClick,this.handleContentListItemClick),l["LibraryEventBus"].$on(O.CenturySkillsSelect,this.handleCenturySkillsSelect),l["LibraryEventBus"].$on(O.CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect)},destroyed:function(){l["LibraryEventBus"].$off(O.ContentListItemClick,this.handleContentListItemClick),l["LibraryEventBus"].$off(O.CenturySkillsSelect,this.handleCenturySkillsSelect),l["LibraryEventBus"].$off(O.CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect)},methods:{handleExpandTreeItem:function(e){this.$logger.info("handleExpandTreeItem "+!this.subTreeExpandStatus),this.$logger.info("handleExpandTreeItem deep: "+this.defaultDeep+" treeItemType: "+this.treeItemType+" currentItemType "+this.currentItemType+" treeItemData",e," parent ",this.treeCurrentParent),this.treeItemType===b["a"].learningOutcomes?this.handleExpandCurriculumTreeItem(e):this.treeItemType===b["a"].sync?this.handleExpandSyncDataList(e):this.treeItemType===b["a"].specificSkills?this.handleExpandSpecificSkillTreeItem(e):this.treeItemType===b["a"].centurySkills||this.treeItemType===b["a"].NZKeyCompetencies||this.treeItemType===b["a"].AUGeneralCapabilities?this.handleExpandCenturySkillTreeItem(e):this.treeItemType===b["a"].sdg?this.handleExpandSdgTreeItem(e):this.treeItemType===b["a"].assessmentType?this.handleExpandAssessmentTypeTreeItem(e):this.treeItemType===b["a"].all21Century?this.handleExpandAll21CenturyTypeTreeItem(e):this.treeItemType===b["a"].idu&&this.handleExpandIduTypeTreeItem(e),"knowledge"!==this.currentItemType||this.selectMode!==M["a"].evaluationMode||this.rootType!==b["a"].centurySkills&&this.rootType!==b["a"].NZKeyCompetencies&&this.rootType!==b["a"].AUGeneralCapabilities?this.handleCancel21CenturyClick():this.handle21CenturyClick(e)},handleExpandSyncDataList:function(e){this.$logger.info("handleExpandSyncDataList",e),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:0,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1},handleCollapseTreeItem:function(e){this.$logger.info("handleExpandTreeItem "+!this.subTreeExpandStatus),this.subTreeExpandStatus=!1},handleExpandCurriculumTreeItem:function(e){var t=this;if(this.$logger.info("handleExpandCurriculumTreeItem["+this.currentItemType+"] data ",e," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex});else{if("subject"===this.currentItemType&&(void 0!==e.children&&e.children.length?l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}):(this.subTreeLoading=!0,e.gradeList.length?this.$logger.info("use old gradeList ",e):(e.gradeList=[],this.gradeList.forEach((function(t){t.children=[],t.isGrade=!0,e.gradeList.push(Object.assign({},t)),e.children.push(Object.assign({},t))})),this.$logger.info("add gradeList ",e)),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.gradeList,gradeList:e.gradeList,questionIndex:this.questionIndex})),e.gradeList&&e.gradeList.length?this.subItemType="grade":this.subItemType="subject",this.subTreeLoading=!1,this.subTreeExpandStatus=!0,this.$logger.info("gradeList already add",e)),"grade"===this.currentItemType)if(e.children.length)l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0;else{this.subTreeLoading=!0;var i=e.id,a=this.treeCurrentParent.id;this.$logger.info("knowledgeTree gradeId "+i+" subjectId "+a),N({gradeId:i,subjectId:a}).then((function(i){t.$logger.info("KnowledgeGetTree response",i),i.result.forEach((function(i){i.gradeId=t.treeItemData.name,i.selectedGradeId=e.id,i.selectedGradeName=e.name})),e.children=i.result,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("mainKnowledgeList",e.children)})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})),this.subItemType="knowledge"}"knowledge"===this.currentItemType&&(this.$logger.info("selectMode",this.selectMode),e.children.length&&e.children[0].children.length?(this.$logger.info("select reach knowledge bottom"),this.subTreeLoading=!0,Object(A["KnowledgeQueryContentByDescriptionId"])({descriptionId:this.treeItemData.id}).then((function(i){t.$logger.info("KnowledgeQueryContentByDescriptionId response",i.result),i.result.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,currentTreeData:t.treeItemData,dataType:t.treeItemType,parentTreeData:t.treeCurrentParent,contentList:i.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0}))):(e.gradeId&&e.children.forEach((function(t){t.gradeId=e.gradeId,t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),e.children.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeExpandStatus=!0,this.subItemType="knowledge"))}this.$logger.info("handleExpandCurriculumTreeItem handle finish!")},handleExpandSpecificSkillTreeItem:function(e){var t=this;if(this.$logger.info("handleExpandSpecificSkillTreeItem data ",e," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="subject",this.subTreeLoading=!1,this.hasSubTree=!0;else{if("subject"===this.currentItemType&&(this.subTreeLoading=!0,this.subTreeExpandStatus=!0,e.gradeList.length?this.$logger.info("use old gradeList ",e):(e.gradeList=[],this.gradeList.forEach((function(t){t.children=[],t.isGrade=!0,e.children.push(Object.assign({},t)),e.gradeList.push(Object.assign({},t))})),this.$logger.info("add gradeList ",e)),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,gradeList:e.contentList,contentList:e.gradeList,questionIndex:this.questionIndex}),this.subItemType="grade",this.hasSubTree=!0),"grade"===this.currentItemType)if(e.children.length)this.subTreeLoading=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0;else{this.subTreeLoading=!0;var i=e.id,a=this.treeCurrentParent.id;this.$logger.info("knowledgeTree gradeId "+i+" subjectId "+a),N({gradeId:i,subjectId:a}).then((function(i){t.$logger.info("KnowledgeGetTree response",i),e.children=i.result,i.result.forEach((function(t){t.selectedGradeId=e.id,t.selectedGradeName=e.name})),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("mainKnowledgeList",e.children)})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})),this.subItemType="knowledge"}"knowledge"===this.currentItemType&&(this.$logger.info("selectMode",this.selectMode),void 0!==e.children&&e.children.length?(this.subTreeExpandStatus=!0,e.children.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="knowledge"):(this.$logger.info("select reach knowledge bottom"),this.subTreeLoading=!0,Object(A["KnowledgeQueryContentByDescriptionId"])({descriptionId:this.treeItemData.id}).then((function(i){t.$logger.info("KnowledgeQueryContentByDescriptionId response",i.result),i.result.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:i.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})))),this.subTreeLoading=!1}this.$logger.info("handleExpandCurriculumTreeItem handle finish!")},handleExpandAssessmentTypeTreeItem:function(e){var t=this;if(this.$logger.info("handleExpandAssessmentTypeTreeItem data ",e," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="subject",this.subTreeLoading=!1,this.hasSubTree=!0;else{if("subject"===this.currentItemType&&(this.subTreeLoading=!0,this.subTreeExpandStatus=!0,e.gradeList.length?this.$logger.info("use old gradeList ",e):(e.gradeList=[],this.gradeList.forEach((function(t){t.children=[],t.isGrade=!0,e.children.push(Object.assign({},t)),e.gradeList.push(Object.assign({},t))})),this.$logger.info("add gradeList ",e)),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,gradeList:e.contentList,contentList:e.gradeList,questionIndex:this.questionIndex}),this.subItemType="grade",this.hasSubTree=!0),"grade"===this.currentItemType){if(this.$logger.info("assessmentType grade"),e.children.length)l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0;else{this.subTreeLoading=!0;var i=e.id,a=this.treeCurrentParent.id;this.$logger.info("assessmentType gradeId "+i+" subjectId "+a),Object(A["GetAssessmentTypeList"])({gradeId:i,subjectId:a}).then((function(i){t.$logger.info("assessmentType response",i),i.result.forEach((function(t){t.children=[],t.isAssessmentType=!0,t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),t.$logger.info("assessmentType response.result",i.result),e.children=i.result,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("assessmentType children",e.children)})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0}))}this.subItemType="assessmentType"}if("assessmentType"===this.currentItemType){if(this.$logger.info("assessmentType QueryKnowledgesByAssessmentTypeId",this.selectMode),void 0!==e.children&&e.children.length)this.subTreeExpandStatus=!0,e.children.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex});else{this.$logger.info("assessmentType knowledge bottom"),this.subTreeLoading=!0;var s=this.treeCurrentParent.id;Object(A["QueryKnowledgesByAssessmentTypeId"])({assessmentTypeId:this.treeItemData.id,gradeId:s}).then((function(i){t.$logger.info("QueryKnowledgesByAssessmentTypeId response",i.result),i.result.forEach((function(t){t.children=[],t.isKnowledge=!0,t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:i.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0}))}this.subItemType="knowledge"}"knowledge"===this.currentItemType&&this.$logger.info("assessmentType currentItemType knowledge",e),this.subTreeLoading=!1}this.$logger.info("handleExpandCurriculumTreeItem handle finish!")},handleExpandAll21CenturyTypeTreeItem:function(e){0===this.defaultDeep?(this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="all21Century",this.subTreeLoading=!1,this.hasSubTree=!0):(this.subTreeLoading=!0,this.subTreeExpandStatus=!0,this.treeItemData.children.length&&this.treeItemData.children[0].children.length?(this.subItemType="all21Century",this.hasSubTree=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex})):(this.subItemType="all21CenturyDescription",this.hasSubTree=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.$logger.info("reach description",e)),this.subTreeLoading=!1)},handleExpandIduTypeTreeItem:function(e){var t=this;if(this.$logger.info("handleExpandIduTypeTreeItem defaultDeep = "+this.defaultDeep,e),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="grade",this.subTreeLoading=!1,this.hasSubTree=!0;else{if(this.subTreeLoading=!0,this.subTreeExpandStatus=!0,1===this.defaultDeep&&e.isGrade&&(this.$logger.info("handleExpandIduTypeTreeItem defaultDeep = 1",e),e.children.forEach((function(t){t.selectedGradeName=e.name,t.selectedGradeId=e.id}))),this.treeItemData.children.length)this.subItemType="iduList",this.hasSubTree=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex});else if(e.children.length)this.subItemType="iduList",this.hasSubTree=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex});else{var i=e.id;Object(A["GetIBIduList"])({gradeId:i}).then((function(i){t.$logger.info("GetIBIduList response",i),i.result?(i.result.forEach((function(t){t.selectedGradeName=e.name,t.selectedGradeId=e.id})),e.children=i.result,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("GetIBIduList",e.children),t.subTreeExpandStatus=!0):t.subTreeExpandStatus=!1})).finally((function(){t.subTreeLoading=!1,t.subItemType="iduList"}))}this.subTreeLoading=!1}},handleExpandCenturySkillTreeItem:function(e){var t=this;if(this.subItemType="knowledge",this.$logger.info("handleExpandCenturySkillTreeItem data ",e," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,gradeList:e.gradeList,contentList:e.gradeList,questionIndex:this.questionIndex}),this.subItemType="grade",this.subTreeLoading=!1,this.hasSubTree=!0;else{if("grade"===this.currentItemType)if(e.children.length)l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0;else{this.subTreeLoading=!0;var i=e.id,a=this.treeCurrentParent.id;this.$logger.info("knowledgeTree gradeId "+i+" subjectId "+a),q({gradeId:i,curriculumId:this.currentCurriculumId}).then((function(i){t.$logger.info("Get21Century response",i),i.result?(i.result.forEach((function(t){t.selectedGradeId=e.id,t.selectedGradeName=e.name})),e.children=i.result,l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("mainKnowledgeList",e.children),t.subTreeExpandStatus=!0):t.subTreeExpandStatus=!1})).finally((function(){t.subTreeLoading=!1})),this.subItemType="knowledge"}"knowledge"===this.currentItemType&&(this.$logger.info("selectMode",this.selectMode),void 0!==e.children&&e.children.length?(this.subTreeExpandStatus=!0,e.children.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,dataType:this.treeItemType,deep:this.defaultDeep,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="knowledge"):(this.$logger.info("select reach knowledge bottom"),this.subTreeLoading=!0,Object(A["KnowledgeQueryContentByDescriptionId"])({descriptionId:this.treeItemData.id}).then((function(i){t.$logger.info("KnowledgeQueryContentByDescriptionId response",i.result),i.result.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:i.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})))),this.subTreeLoading=!1}this.$logger.info("handleExpandCurriculumTreeItem handle finish!")},handleExpandSdgTreeItem:function(e){var t=this;this.$logger.info("handleExpandSdgTreeItem data ",e," currentItemType ",this.currentItemType," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep&&(l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeExpandStatus=!0),"sdgList"===this.currentItemType&&(this.$logger.info("init sdg keywords big idea list",e),e.children.length?(l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0):(this.subTreeLoading=!0,Object(P["ScenarioGetKeywordScenarios"])({sdgId:e.id}).then((function(i){if(t.$logger.info("init sdg keywords ScenarioGetKeywordScenarios response",i.result),i.result){var a=[];i.result.sdgKeyWords.forEach((function(e){a.push({id:e.id,name:e.name,children:[]})})),e.children=a,t.$logger.info("init sdg keywords list",e.children),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.subTreeExpandStatus=!0}else t.subTreeExpandStatus=!1})).finally((function(){t.subTreeLoading=!1})))),"sdgKeyword"===this.currentItemType?(this.$logger.info("init sdg big idea treeItemData",e),e.children.length?(this.$logger.info("sdg children has data",e),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0):(this.$logger.info("init sdg big idea list",e),this.subTreeLoading=!0,Object(P["QueryBigIdea"])({keywords:e.name}).then((function(i){t.$logger.info("QueryBigIdea response",i.result);var a=[];i.result.forEach((function(e){a.push({id:e,name:e,isBigIdea:!0,children:[]})})),e.children=a,t.$logger.info("sdg bigIdea list",e.children),l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})))):(l["LibraryEventBus"].$emit(O.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeExpandStatus=!0)},handleContentListItemClick:function(e){e.dataType===this.treeItemType&&"syncDir"===e.eventType&&e.item.id===this.treeItemData.id&&e.item.name===this.treeItemData.name&&(!e.parent||this.treeCurrentParent&&this.treeCurrentParent.name===e.parent.name)&&(this.$logger.info("handleContentListItemClick start ",e,this.treeItemData,this.treeCurrentParent),this.handleExpandTreeItem(this.treeItemData))},handleCenturySkillsSelect:function(e){this.selected21CenturyItem=e.item},handleCancelCenturySkillsSelect:function(){this.selected21CenturyItem=null},handle21CenturyClick:function(e){this.$logger.info("handle21CenturyClick start ",e),this.selected21CenturyItem===e?l["LibraryEventBus"].$emit(O.CancelCenturySkillsSelect):(this.$logger.info("emit "+O.CenturySkillsSelect,{item:e,parent:this.treeCurrentParent}),l["LibraryEventBus"].$emit(O.CenturySkillsSelect,{item:e,parent:this.treeCurrentParent}))},handleCancel21CenturyClick:function(){this.$logger.info("handleCancel21CenturyClick"),l["LibraryEventBus"].$emit(O.CancelCenturySkillsSelect)},handleClickTreeItem:function(e,t){this.$logger.info("handleClickTreeItem start ",e,t),!1===e?this.handleExpandTreeItem(t):(this.handleCollapseTreeItem(t),l["LibraryEventBus"].$emit(O.ResetContentList))}}},F=K,Q=(i("e03f"),Object(h["a"])(F,B,G,!1,null,"64bb509b",null)),J=Q.exports,V=i("f93e"),Z=i("8ded"),W=i.n(Z),Y=i("9fb0"),z=i("2f62"),H=i("6e84"),X=i("21fb"),ee=i("b3db"),te=ee.GetAllSdgs,ie=i("c418"),ae=ie.SubjectTree,se=i("4fcf"),ne=se.debounce,re={name:"NewTreeNavigation",mixins:[H["a"],X["a"]],components:{NoMoreResources:T["a"],NewTreeItem:J},props:{selectMode:{type:String,default:null},questionIndex:{type:String,default:null},showMenu:{type:Array,default:function(){return[]}},defaultActiveMenu:{type:String,default:null},defaultCurriculumId:{type:String,default:null},onlySubjects:{type:Array,default:function(){return[]}}},data:function(){return{loaded:!1,treeDataList:[],NavigationType:b["a"],sdgList:[],subjectTree:[],gradeList:[],defaultGradeId:null}},watch:{defaultCurriculumId:function(e){this.$logger.info("defaultCurriculumId change "+e),this.loaded=!1,this.treeDataList=[],this.sdgList=[],this.subjectTree=[],this.gradeList=[],this.initData()},onlySubjects:{handler:function(e){this.debounceResetData()}}},computed:Object(_["a"])(Object(_["a"])({},Object(z["e"])({currentSchool:function(e){return e.user.currentSchool},userMode:function(e){return e.app.userMode}})),{},{displayCategoryList:function(){var e=this,t=[];return this.treeDataList.forEach((function(i){-1!==e.showMenu.indexOf(i.type)&&t.push(i.type)})),t}}),created:function(){this.$logger.info("NewTreeNavigation selectMode",this.selectMode),this.initData(),this.debounceResetData=ne(this.resetData,1e3),l["LibraryEventBus"].$on(l["LibraryEvent"].GradeUpdate,this.handleGradeUpdate),l["LibraryEventBus"].$on(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum)},methods:{resetData:function(){this.treeDataList=[],this.sdgList=[],this.subjectTree=[],this.gradeList=[],this.initData()},handleSchoolChange:function(e){this.debounceResetData()},handleModeChange:function(e){this.debounceResetData()},initData:function(){var e=this,t=this.$store.getters.skillCategory;this.$logger.info("NewTreeNavigation skillCategory ",t),this.$logger.info("NewTreeNavigation defaultActiveMenu "+this.defaultActiveMenu);var i={id:"1",expandStatus:!1,type:b["a"].learningOutcomes,name:3===t.length?t[0]:"Curriculum",children:[],parent:null,sort:2,backgroundColor:"#B1D1CC"},a={expandStatus:!1,type:b["a"].sdg,name:"Big ideas",children:[],parent:null,sort:2,backgroundColor:"fade(@primary-color, 10%)"},s={id:"1",expandStatus:!1,type:b["a"].all21Century,name:b["a"].all21Century,children:[],parent:null,sort:2,backgroundColor:"#D7E0E9"},n=[];Promise.all([ae({curriculumId:this.defaultCurriculumId?this.defaultCurriculumId:this.$store.getters.bindCurriculum}),Object(c["a"])({curriculumId:this.defaultCurriculumId?this.defaultCurriculumId:this.$store.getters.bindCurriculum}),te(),Object(A["getAll21Century"])()].concat(n)).then((function(t){if(e.$logger.info("initData done",t),e.$logger.info("GetMyGrades Response ",t[1]),!t[1].code){if(e.gradeList=t[1].result,t[5]&&t[5].success){var n=t[5].result.gradeInfo;e.gradeList=e.gradeList.map((function(e){var t=n.find((function(t){return t.gradeId===e.id}));return t&&t.officialGradeName&&(e.name=t.officialGradeName),e}))}var r={};e.gradeList.forEach((function(e){r[e.centuryName]||(r[e.centuryName]=[]),r[e.centuryName].push(e.name)})),W.a.set(Y["i"],r)}if(e.$logger.info("SubjectTree Response ",t[0]),!t[0].code){e.subjectTree=t[0].result;var d=[];e.onlySubjects&&e.onlySubjects.length>0?d=e.onlySubjects.concat():e.userMode===V["Y"].SCHOOL&&e.currentSchool.curriculumId===e.defaultCurriculumId&&t[4]&&t[4].success&&(d=t[4].result.subjectInfo.map((function(e){return e.subjectId}))),d.length>0&&(e.subjectTree=e.subjectTree.map((function(e){return e.children&&e.children.length>0&&(e.children=e.children.filter((function(e){return d.includes(e.id)}))),e})).filter((function(e){return e.children.length>0}))),e.addGradeListProperty(e.subjectTree);var l=JSON.parse(JSON.stringify(e.subjectTree));i.children=l.filter((function(e){return e.subjectType===V["Q"].Learn||e.subjectType===V["Q"].LearnAndSkill}))}if(e.$logger.info("GetAllSdgs Response ",t[2]),t[2].code||(e.sdgList=t[2].result,e.sdgList.forEach((function(e){e.children=[]})),a.children=e.sdgList),e.$logger.info("getAll21Century Response ",t[3]),!t[3].code){var c=t[3].result;e.addParentObjListProperty(c,null),s.children=c,e.$logger.info("all21CenturyData addParentObjListProperty",s)}})).finally((function(){if(e.treeDataList=[],e.treeDataList.push(i),e.treeDataList.push(a),3===t.length){var n={id:"3",expandStatus:!1,type:b["a"].specificSkills,name:t[1],children:[],parent:null,sort:0,backgroundColor:"#FF978E"},r=JSON.parse(JSON.stringify(e.subjectTree));if(r.forEach((function(t){var i=JSON.parse(JSON.stringify(t));i.subjectType!==V["Q"].Skill&&i.subjectType!==V["Q"].LearnAndSkill||(i.children=[],i.gradeList=[],e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],i.gradeList.push(JSON.parse(JSON.stringify(e)))})),n.children.push(i))})),e.$store.getters.hiddenIbCurriculumId||e.treeDataList.unshift(n),4===parseInt(e.defaultCurriculumId)||5===parseInt(e.defaultCurriculumId)){var d={id:"6",expandStatus:!1,type:b["a"].idu,name:"Integrated Subject Skill",children:[],gradeList:[],parent:null,sort:1,backgroundColor:"#67C23A"};e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],d.gradeList.push(JSON.parse(JSON.stringify(e))),d.children.push(JSON.parse(JSON.stringify(e)))})),e.$store.getters.hiddenIbCurriculumId||e.treeDataList.push(d)}var l={id:"5",expandStatus:!1,type:b["a"].centurySkills,name:e.$classcipe.get21stCenturyDisplayNameByCurriculum(e.defaultCurriculumId),children:[],gradeList:[],parent:null,sort:2,backgroundColor:"#D7E0E9"};if(e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],l.gradeList.push(Object.assign({},e)),l.children.push(Object.assign({},e))})),e.treeDataList.push(l),2===parseInt(e.defaultCurriculumId)){var c={id:"51",expandStatus:!1,type:b["a"].NZKeyCompetencies,name:"NZ-Key competencies",children:[],gradeList:[],parent:null,backgroundColor:"rgba(83, 196, 28, 0.2)"};e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],c.gradeList.push(JSON.parse(JSON.stringify(e))),c.children.push(JSON.parse(JSON.stringify(e)))})),e.treeDataList.push(c)}if(1===parseInt(e.defaultCurriculumId)){var o={id:"52",expandStatus:!1,type:b["a"].AUGeneralCapabilities,name:"AU-General capabilities",children:[],gradeList:[],parent:null,sort:2,backgroundColor:"rgba(83, 196, 28, 0.2)"};e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],o.gradeList.push(JSON.parse(JSON.stringify(e))),o.children.push(JSON.parse(JSON.stringify(e)))})),e.treeDataList.push(o)}e.treeDataList.push(s),e.$logger.info("after handle treeDataList",e.treeDataList)}e.treeDataList=e.treeDataList.sort((function(e,t){return e.sort-t.sort})),e.$logger.info("sort treeDataList",e.treeDataList),e.loaded=!0,e.$emit("finishInit")}))},addGradeListProperty:function(e){var t=this;e.forEach((function(e){e.hasOwnProperty("gradeList")||(e.gradeList=[],e.gradeList.forEach((function(t){t.children=[],t.isGrade=!0,e.gradeList.push(JSON.parse(JSON.stringify(t)))}))),t.addGradeListProperty(e.children)}))},addParentObjListProperty:function(e,t){var i=this;e.forEach((function(e){e.hasOwnProperty("parentObj")||(e.parentObj=t,e.children.forEach((function(t){t.parentObj=e}))),i.addParentObjListProperty(e.children,e)}))},handleGradeUpdate:function(e){this.$logger.info("handleGradeUpdate start ",e),this.defaultGradeId=e},handleChangeCurriculum:function(){this.$logger.info("handleChangeCurriculum"),this.defaultGradeId=null}},destroyed:function(){l["LibraryEventBus"].$off(l["LibraryEvent"].GradeUpdate,this.handleGradeUpdate),l["LibraryEventBus"].$off(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum)}},de=re,le=(i("ce70"),Object(h["a"])(de,x,E,!1,null,"23bfff8e",null)),ce=le.exports,oe=i("d33b4"),ue=i("4fcf"),he=ue.debounce,pe={name:"NewBrowser",components:{NewNavigation:m,NewContentList:$,NewTreeNavigation:ce,ContentTypeIcon:f["a"]},props:{selectMode:{type:String,default:null},displayMode:{type:String,default:"modal"},questionIndex:{type:String,default:null},showMenu:{type:Array,default:function(){return[]}},defaultActiveMenu:{type:String,default:null},recommendData:{type:Array,default:function(){return[]}},selectedIdList:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}},showCurriculum:{type:Boolean,default:!1}},mixins:[oe["a"]],data:function(){return{expandedListFlag:!0,mainTreeContentLeft:200,selectedCurriculumList:[],selectedKnowledgeList:[],selected21CenturySkillList:[],selectedSubjectSpecificSkillList:[],selectedAssessmentList:[],selectedIduList:[],selectedAll21CenturyList:[],selectedBigIdeaList:[],selectedRecommendList:[],selectedRecommendIdList:[],currentCurriculumId:this.$store.getters.bindCurriculum?this.$store.getters.bindCurriculum:"1",defaultCurriculumId:this.$store.getters.bindCurriculum?this.$store.getters.bindCurriculum:"1",curriculumOptions:[],mySelectedIdList:[],mySelectedList:[],isEmptyRecommend:!0,selected21CenturyItem:null,selectedGradeIdSet:new Set,selectModelType:M["a"],tagType:V["U"],myRecommendData:[],currentNavPath:null,componentWidth:0}},computed:{hasSelectedContent:function(){return this.mySelectedList.length||this.selectedCurriculumList.length||this.selectedKnowledgeList.length||this.selected21CenturySkillList.length||this.selectedSubjectSpecificSkillList.length||this.selectedAssessmentList.length||this.selectedIduList.length||this.selectedAll21CenturyList.length||this.selectedBigIdeaList.length||this.selectedRecommendList.length||this.selected21CenturyItem}},watch:{currentCurriculumId:function(e){this.$logger.info("NewBrowser change currentCurriculumId to "+e),this.defaultCurriculumId=e}},created:function(){var e=this;this.$logger.info("NewBrowser selectMode",this.selectMode),this.$logger.info("NewBrowser showMenu",this.showMenu),this.$logger.info("recommendData",this.recommendData),this.$logger.info("selectedIdList",this.selectedIdList),this.$logger.info("selectedList",this.selectedList),this.mySelectedIdList=this.selectedIdList,this.myRecommendData=JSON.parse(JSON.stringify(this.recommendData)),Object(c["e"])().then((function(t){e.$logger.info("getAllCurriculums",t),e.curriculumOptions=t.result,e.$logger.info("getAllCurriculums",e.curriculumOptions)}));var t=[];this.myRecommendData.forEach((function(i){(!i.skillList||i.skillList&&!i.skillList.length)&&(i.skillList=[]),(!i.centuryList||i.centuryList&&!i.centuryList.length)&&(i.centuryList=[]),(!i.knowledgeList||i.knowledgeList&&!i.knowledgeList.length)&&(i.knowledgeList=[]),i.list.forEach((function(e){t.push(e.knowledgeId),e.tagType===V["U"].skill||e.tagType===V["U"].ibSkill||e.tagType===V["U"].idu?i.skillList.push(e):e.tagType===V["U"].century?i.centuryList.push(e):i.knowledgeList.push(e)})),i.list.length>0&&(e.isEmptyRecommend=!1)})),this.mySelectedList=[],this.selectedList.forEach((function(i){-1===t.indexOf(i.knowledgeId)?e.mySelectedList.push(i):(e.selectedRecommendIdList.push(i.knowledgeId),e.selectedRecommendList.push(i))})),this.updateSelectedGradeSet(),this.$logger.info("mySelectedList",this.mySelectedList),this.$logger.info("selectedRecommendList",this.selectedRecommendList),this.$logger.info("selectedRecommendIdList",this.selectedRecommendIdList),l["LibraryEventBus"].$on(l["LibraryEvent"].CenturySkillsSelect,this.handleCenturySkillsSelect),l["LibraryEventBus"].$on(l["LibraryEvent"].CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect)},destroyed:function(){l["LibraryEventBus"].$off(l["LibraryEvent"].CenturySkillsSelect,this.handleCenturySkillsSelect),l["LibraryEventBus"].$off(l["LibraryEvent"].CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect)},mounted:function(){var e=this,t=document.getElementById("new-library");t&&(this.componentWidth=t.getBoundingClientRect().width),window.onresize=he((function(){t&&(e.componentWidth=t.getBoundingClientRect().width)}),300)},methods:{handleCurriculumChange:function(e){this.$logger.info("handleCurriculumChange "+e),this.currentCurriculumId=e,l["LibraryEventBus"].$emit(l["LibraryEvent"].ChangeCurriculum,e)},handleSelectListData:function(e){this.$logger.info("NewBrowser handleSelectListData",e),this.selectedKnowledgeList=e,this.$emit("select-sync",e)},handleSelectCurriculumListData:function(e){this.$logger.info("NewBrowser handleSelectCurriculumListData",e),this.selectedCurriculumList=e,this.$emit("select-curriculum",e),this.updateSelectedGradeSet()},handleSelectSubjectSpecificSkillListData:function(e){this.$logger.info("NewBrowser handleSelectSubjectSpecificSkillListData",e),this.selectedSubjectSpecificSkillList=e,this.$emit("select-subject-specific-skill",e),this.updateSelectedGradeSet()},handleSelect21CenturySkillListData:function(e){this.$logger.info("NewBrowser handleSelect21CenturySkillListData",e),this.selected21CenturySkillList=e,this.$emit("select-century-skill",e),this.updateSelectedGradeSet()},handleSelectAll21CenturyListData:function(e){this.$logger.info("NewBrowser handleSelectAll21CenturyListData",e),this.selectedAll21CenturyList=e,this.$emit("select-all-21-century",e),this.updateSelectedGradeSet()},handleSelectAssessmentType:function(e){this.$logger.info("NewBrowser handleSelectAssessmentType",e),this.selectedAssessmentList=e,this.$emit("select-assessmentType",e),this.updateSelectedGradeSet()},handleSelectIdu:function(e){this.$logger.info("NewBrowser handleSelectIdu",e),this.selectedIduList=e,this.$emit("select-idu",e),this.updateSelectedGradeSet()},handleSelectBigIdeaData:function(e){this.$logger.info("NewBrowser handleSelectBigIdeaData",e),this.selectedBigIdeaList=e,this.$emit("select-big-idea",e),this.updateSelectedGradeSet()},handleRemoveSelected:function(e){this.$logger.info("NewBrowser handleRemoveSelected",e),e.dataType?(this.$refs["contentList"].handleRemoveSelected(e),this.updateSelectedGradeSet()):this.handleRemoveMySelected(e)},handleUpdateSelectedList:function(e){this.$logger.info("NewBrowser handleUpdateSelectedList",e),this.mySelectedList=e,this.updateSelectedGradeSet()},handleAddRecommend:function(e){if(this.$logger.info("NewBrowser handleAddRecommend",e,"this.mySelectedIdList.indexOf(recommendItem.knowledgeId)",this.mySelectedIdList.indexOf(e.knowledgeId)),-1===this.mySelectedIdList.indexOf(e.knowledgeId)){var t=this.selectedRecommendList.findIndex((function(t){return t.knowledgeId===e.knowledgeId})),i=this.selectedRecommendIdList.findIndex((function(t){return t===e.knowledgeId}));-1!==t?(this.selectedRecommendList.splice(t,1),this.selectedRecommendIdList.splice(i,1)):(this.selectedRecommendList.push(e),this.selectedRecommendIdList.push(e.knowledgeId)),this.$emit("select-recommend",this.selectedRecommendList),this.$logger.info("after NewBrowser handleAddRecommend",this.selectedRecommendList,this.selectedRecommendIdList)}this.updateSelectedGradeSet()},handleRemoveMySelected:function(e){this.$logger.info("NewBrowser handleRemoveMySelected",e);var t=this.mySelectedList.findIndex((function(t){return e.knowledgeId===t.knowledgeId}));t>-1&&this.mySelectedList.splice(t,1),this.updateSelectedGradeSet()},handleCancelSelectData:function(){this.$logger.info("NewBrowser handleCancelSelectData"),this.$emit("cancel-select")},handleEnsureSelectData:function(){var e=this;this.$logger.info("NewBrowser handleEnsureSelectData"),this.selectedGradeIdSet.size>1?this.$confirm({title:"Alert",okText:"Yes",cancelText:"Let me double check",content:"You have selected learning objectives from different grades/levels/stages, do you confirm to add them?",onOk:function(){e.$emit("ensure-select")}}):this.$emit("ensure-select")},handleCenturySkillsSelect:function(e){this.$logger.info("NewBrowser handleCenturySkillsSelect",e),this.selected21CenturyItem=e.item},handleCancelCenturySkillsSelect:function(){this.selected21CenturyItem=null},handleRemoveMySelected21Century:function(){l["LibraryEventBus"].$emit(l["LibraryEvent"].CancelCenturySkillsSelect)},updateSelectedGradeSet:function(){var e=this;this.$logger.info("NewBrowser updateSelectedGradeSet",this.mySelectedList,this.selectedCurriculumList,this.selectedKnowledgeList,this.selected21CenturySkillList,this.selectedSubjectSpecificSkillList,this.selectedAssessmentList,this.selectedIduList,this.selectedAll21CenturyList,this.selectedRecommendList,this.selected21CenturyItem),this.selectedGradeIdSet.clear(),this.mySelectedList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedCurriculumList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedKnowledgeList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selected21CenturySkillList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedSubjectSpecificSkillList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedAssessmentList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedIduList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedAll21CenturyList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedRecommendList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selected21CenturyItem&&this.selected21CenturyItem.gradeId&&this.selectedGradeIdSet.add(this.selected21CenturyItem.gradeId),this.$logger.info("------- this.selectedGradeIdSet",this.selectedGradeIdSet)},handleUpdateCurrentNavPath:function(e){this.$logger.info("NewBrowser handleUpdateCurrentNavPath",e),this.currentNavPath=e},displayContentList:function(e){var t=Object(n["a"])(this.mySelectedList);return this.selectedCurriculumList.length&&t.push.apply(t,Object(n["a"])(this.selectedCurriculumList)),this.selectedSubjectSpecificSkillList.length&&t.push.apply(t,Object(n["a"])(this.selectedSubjectSpecificSkillList)),this.selectedAssessmentList.length&&t.push.apply(t,Object(n["a"])(this.selectedAssessmentList)),this.selected21CenturySkillList.length&&t.push.apply(t,Object(n["a"])(this.selected21CenturySkillList)),this.selectedBigIdeaList.length&&t.push.apply(t,Object(n["a"])(this.selectedBigIdeaList)),this.selectedAll21CenturyList.length&&t.push.apply(t,Object(n["a"])(this.selectedAll21CenturyList)),this.selectedKnowledgeList.length&&t.push.apply(t,Object(n["a"])(this.selectedKnowledgeList)),this.selectedIduList.length&&t.push.apply(t,Object(n["a"])(this.selectedIduList)),t.forEach((function(e){e.tagType=e.tagType=e.tagType||e.item&&e.item.tagType||e.knowledgeData&&e.knowledgeData.tagType})),e===V["U"].skill?t.filter((function(e){return e.tagType===V["U"].skill||e.tagType===V["U"].ibSkill||e.tagType===V["U"].idu})):e===V["U"].century?t.filter((function(e){return e.tagType===V["U"].century||e.tagType===V["U"].common})):t.filter((function(t){return t.tagType===e}))}}},me=pe,ge=(i("5d2d"),Object(h["a"])(me,a,s,!1,null,"4954b1da",null));t["a"]=ge.exports},4165:function(e,t,i){e.exports=i.p+"img/delete.27f7fefc.png"},4180:function(e,t,i){},"489c":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var a={knowledgeDescription:"knowledgeDescription",syncData:"syncData",evaluationMode:"evaluationMode"}},"4c90":function(e,t,i){},"5d2d":function(e,t,i){"use strict";i("a27ed")},"6e84":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("b0c0");var a={data:function(){return{unwatch:null,routeName:this.$route.name}},computed:{redirectUrl:function(){return"student"===this.$store.state.user.currentRole?"/student/main/my-task":"/account/info"}},created:function(){var e=this;this.unwatch=this.$store.watch((function(e){return e.app.userMode}),(function(t){t&&e.$route.name===e.routeName&&(e.handleModeChange(t),e.routeInMode())})),this.routeInMode()},beforeDestroy:function(){this.unwatch&&this.unwatch()},methods:{routeInMode:function(){this.$route.meta.mode&&this.$route.meta.mode!==this.$store.state.app.userMode&&this.$router.push({path:this.redirectUrl})},handleModeChange:function(e){}}}},"770f":function(e,t,i){},"7d7a":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"material-preview"},[e.loading?[i("a-skeleton",{attrs:{active:""}})]:[i("a-row",{staticClass:"top-header",attrs:{gutter:[16,24]}},[i("a-col",{attrs:{span:"24"}},[i("span",{staticClass:"title"},[e._v(" "+e._s(e.materialData.name)+" ")]),e.lastChangeSavedTime?[i("a-divider",{attrs:{type:"vertical"}}),i("span",{staticClass:"last-change-time"},[e._v(" "+e._s(e.$t("teacher.material.last-change-saved-at-time",{time:e.lastChangeSavedTime}))+" ")])]:e._e()],2)],1),i("a-row",{staticClass:"top-info",attrs:{gutter:[16,24]}},[i("a-col",{staticClass:"left-preview",attrs:{span:"9"}},[i("a-carousel",{attrs:{arrows:""}},[i("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"10px","z-index":"1"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[i("a-icon",{attrs:{type:"left-circle"}})],1),i("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"10px"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[i("a-icon",{attrs:{type:"right-circle"}})],1),e.loading||e.imgList.length?e._e():i("div",{staticClass:"no-preview-img"},[i("a-empty")],1),e._l(e.imgList,(function(e,t){return i("div",{key:t,staticClass:"preview-img-item"},[i("div",{staticClass:"preview-block",style:{backgroundImage:"url("+e+")"},attrs:{"data-img":e}})])}))],2),i("div",{staticClass:"edit-action"},[i("a-button",{attrs:{type:"primary"}},[i("router-link",{attrs:{to:"/teacher/add-material/"+e.materialId}},[e._v(e._s(e.$t("teacher.material-preview.edit")))])],1)],1)],1),i("a-col",{staticClass:"right-detail",attrs:{span:"15"}},[i("div",{staticClass:"detail-wrapper"},[i("div",{staticClass:"detail-block"},[i("div",{staticClass:"block-title"},[e._v(" "+e._s(e.materialData.overview&&e.materialData.overview)+" "),i("span",{staticClass:"title-icon"},[i("a-tooltip",[i("template",{slot:"title"},[e._v(" "+e._s(e.$t("teacher.material.overview"))+" ")]),i("a-icon",{attrs:{type:"info-circle"}})],2)],1)])]),i("div",{staticClass:"detail-block material-detail"},[e.materialData&&e.materialData.files?i("div",{staticClass:"block-content"},e._l(e.materialData.files,(function(t,a){return i("div",{key:a,staticClass:"material-item"},[i("div",{staticClass:"material-item-content-wrapper"},[i("div",{staticClass:"material-item-content"},[t.fileType===e.fileTypeMap.txt?[i("div",{staticClass:"material-text-content",domProps:{innerHTML:e._s(t.description)}})]:e._e(),t.fileType===e.fileTypeMap.img?[i("div",{staticClass:"material-image-content"},[t&&t.fileUrl?i("img",{attrs:{src:t.fileUrl,alt:""}}):e._e()])]:e._e(),t.fileType===e.fileTypeMap.audio?[i("div",{staticClass:"material-audio-content",attrs:{"data-url":t.fileUrl}},[i("audio",{directives:[{name:"show",rawName:"v-show",value:t&&t.fileUrl,expression:"materialItem && materialItem.fileUrl"}],attrs:{src:t.fileUrl,controls:""}})])]:e._e(),t.fileType===e.fileTypeMap.video?[i("div",{staticClass:"material-video-content",attrs:{"data-url":t.fileUrl}},[i("video",{directives:[{name:"show",rawName:"v-show",value:t&&t.fileUrl,expression:"materialItem && materialItem.fileUrl"}],attrs:{src:t.fileUrl,controls:""}})])]:e._e(),t.fileType===e.fileTypeMap.link?[i("div",{staticClass:"material-embed-content",attrs:{"data-url":t.fileUrl}},[i("span",{staticClass:"iframe-url"},[e._v(" "+e._s(t.fileUrl)+" ")])])]:e._e()],2)])])})),0):e._e()])])])],1),e.showAssociate?i("a-divider"):e._e(),e.showAssociate?i("material-associate-preview",{attrs:{"material-id":e.materialId}}):e._e()]],2)},s=[],n=(i("d3b7"),i("159b"),i("823b")),r=i("3f76"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"unit-plan-sub-preview"},[e.loading?[i("a-skeleton",{attrs:{active:""}})]:[i("a-row",{staticClass:"bottom-relative",attrs:{gutter:[16,32]}},[i("a-col",{attrs:{span:"16"}},[i("a-space",[i("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.material?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.material)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.material"))+" ")]),i("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.task?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.task)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.task"))+" ")]),i("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.lesson?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.lesson)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.lesson"))+" ")]),i("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.evaluation?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.evaluation)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.evaluation"))+" ")])],1)],1),i("a-col",{attrs:{span:"8"}},[i("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.handleUserTypeChange},model:{value:e.activeUserType,callback:function(t){e.activeUserType=t},expression:"activeUserType"}},[i("a-radio-button",{staticClass:"left-button",attrs:{value:"owner"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-owner"))+" ")]),i("a-radio-button",{staticClass:"right-button",attrs:{value:"others"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-others"))+" ")])],1)],1)],1),i("a-row",[i("a-col",[i("div",{staticClass:"associate-info"},e._l(e.currentAssociateList,(function(t,a){return i("div",{key:a,staticClass:"associate-block-list"},[t.type===e.activeContentType&&t.datas?e._l(t.datas,(function(a,s){return i("div",{key:s,staticClass:"associate-block-item"},[a.question?i("div",{staticClass:"block-title",on:{click:function(i){return e.handleClickTitle(t)}}},[e._v(" "+e._s(a.question.name)+" ")]):e._e(),a.lists?i("div",{staticClass:"block-content-list"},e._l(a.lists,(function(a,s){return i("div",{key:s,staticClass:"block-content-item"},[i("a-row",[i("a-col",{staticClass:"block-content",attrs:{span:"14"},on:{click:function(t){return e.handleSubPreview(a)}}},[i("content-type-icon",{attrs:{type:t.type}}),i("span",{staticClass:"content-txt"},[e._v(" "+e._s(a.name)+" ")])],1),i("a-col",{staticClass:"block-last-change-time",attrs:{span:"6"}},[e._v(" "+e._s(e._f("moment")(a.updateTime))+" ")]),i("a-col",{staticClass:"favorite",attrs:{span:"2"},on:{click:function(t){return e.handleFavorite(a)}}},[i("span",{class:{"favorite-active":a.isFavorite}},[i("a-icon",{attrs:{type:"star",theme:a.isFavorite?"filled":"outlined"}}),a.isFavorite?[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.favorite"))+" ")]:e._e()],2)]),i("a-col",{staticClass:"action-item",attrs:{span:"2"}},[i("a",{on:{click:function(i){return e.handleEditItem(t.type,a)}}},[e._v(e._s(e.$t("teacher.unit-plan-preview.edit")))])])],1)],1)})),0):e._e()])})):e._e()],2)})),0)])],1),i("a-row"),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",closable:"",width:"800px",visible:e.subPreviewVisible},on:{close:e.handleSubPreviewClose}},[i("div",{staticClass:"preview-wrapper"},[i("div",{staticClass:"preview-detail"},[e.previewType===e.typeMap["unit-plan"]?i("unit-plan-preview",{attrs:{"unit-plan-id":e.materialId,"show-associate":!1}}):e._e()],1)])])]],2)},l=[],c=(i("3ca3"),i("ddb0"),i("8f46")),o=i("95c6"),u=o.FavoritesAdd,h=i("9afb"),p=h.GetAssociate,m={name:"MaterialAssociatePreview",props:{materialId:{type:String,default:null}},components:{ContentTypeIcon:c["a"],MaterialPreview:function(){return Promise.resolve().then(i.bind(null,"7d7a"))}},data:function(){return{loading:!0,associateData:null,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:r["e"].material,activeUserType:"owner",currentAssociateList:[],typeMap:r["e"],previewType:"",subPreviewVisible:!1}},created:function(){n["info"]("Material Associate Preview materialId "+this.materialId),this.loadMaterialAssociateData()},methods:{loadMaterialAssociateData:function(){var e=this;n["info"]("loadMaterialAssociateData "+this.materialId),this.loading=!0,p({id:this.materialId,type:r["e"].material}).then((function(t){n["info"]("GetAssociate ",t),e.associateData=t.result,e.currentAssociateList=e.associateData[e.activeUserType]})).then((function(){n["info"]("get favorite "+e.materialId)})).finally((function(){e.loading=!1}))},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1,this.previewType=null},handleUserTypeChange:function(e){n["info"]("handleUserTypeChange "+this.activeUserType),this.currentAssociateList=this.associateData[this.activeUserType],n["info"]("currentAssociateList",this.currentAssociateList)},handleClickTitle:function(e){n["info"]("handleClickTitle",e),this.previewType=r["e"].material,this.subPreviewVisible=!0},handleSubPreview:function(e,t){n["info"]("handleSubPreview",e,t),this.previewType=r["e"].material,this.subPreviewVisible=!0},handleFavorite:function(e){n["info"]("handleFavorite",e),u({sourceId:e.id,sourceType:e.type}).then((function(t){n["info"]("FavoritesAdd ",t),e.isFavorite=!e.isFavorite}))},handleEditItem:function(e,t){n["info"]("handleEditItem",e,t),this.$message.success("Edit Item")}}},g=m,y=(i("d066d"),i("0c7c")),f=Object(y["a"])(g,d,l,!1,null,"be5361ee",null),C=f.exports,I=i("7aef"),v=i("ca00"),b=v.formatLocalUTC,T=i("49de"),L=T.MaterialQueryById,S={name:"MaterialPreview",props:{materialId:{type:String,default:null},showAssociate:{type:Boolean,default:!1}},components:{MaterialAssociatePreview:C},computed:{lastChangeSavedTime:function(){if(this.materialData){n["info"]("lastChangeSavedTime materialData",this.materialData);var e=this.materialData.createTime||this.materialData.updateTime;if(e)return b(e)}return""}},mounted:function(){},data:function(){return{loading:!0,materialData:null,associateData:null,imgList:[],tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:-1,typeMap:r["e"],fileTypeMap:I["a"],subPreviewVisible:!1}},created:function(){n["info"]("MaterialPreview materialId "+this.materialId),this.loadMaterialData()},methods:{loadMaterialData:function(){var e=this;n["info"]("loadMaterialData "+this.materialId),this.loading=!0,L({id:this.materialId}).then((function(t){n["info"]("MaterialQueryById "+e.materialId,t.result),e.materialData=t.result,e.materialData&&e.materialData.files&&e.materialData.files.forEach((function(t){t.fileType===I["a"].img&&e.imgList.push(t.fileUrl)}))})).finally((function(){e.loading=!1}))},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1}}},w=S,k=(i("1d6d"),Object(y["a"])(w,a,s,!1,null,"0c94def8",null));t["default"]=k.exports},"8d23":function(e,t,i){},"8e47":function(e,t,i){"use strict";i("8d23")},"977d":function(e,t,i){},"97f2":function(e,t,i){"use strict";i("073c")},"9c74":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAASCAYAAAA6yNxSAAAABHNCSVQICAgIfAhkiAAAAdBJREFUSEtjZMABRJQC1ZiZGRoYGRhcGRgYRXCpwy/+/81/Bobd////r311Z8NdbGqB5mMCEeUAY2ZGxn2MjIx85FmMquv/f4aP/xgYHV/fWXse3TysDpBQCTrNwMhgQg3L4Wb8Zzjz4s46U8IOkAnllOD8+42qlgMNA0bDf+Zvf3iePduMYjZGCEhJ+XL95WL5Agx+rKFDicNefGfmYniy+juyGYMwCoDOE1UKtGFmZjxMiW/R9f77x2Dz6u66o4TTAFSFuEpQATAS+qnhCGAuKHx5Z90EorMhTKG4SmAHMCmUU+IIYNrrfHlnfQUuMwgmNAnVwAXAgiiePEf8X/ji9voEfHoJOoCBwZhVXFV+G1ChCymOAJaAe17efujFwHD2N4UOYGAQUvHkY2XgOAKMDl1iHAEM9su/GX7YvLuz/RMh9USEAMQIYTUfaZb/bCeBGqTxGQr0+dM/jL/M397a8pSQ5SB5oh0AUiyu5K/LwMQECgkcdQSw8vn7z+nlvY2XibGcZAeANEgoBzkyMP7fwsDIyIViyf//3/79Z3TDltcpTgPoBkio+GsxMDLNBAagDUgOmM+P/vnDmPL2wdobxPocpo6kKCDVcGLUD7gDANqtjBOzoMc+AAAAAElFTkSuQmCC"},"9f4c":function(e,t,i){"use strict";i("4c90")},a02e:function(e,t,i){"use strict";i.r(t),i.d(t,"LibraryEventBus",(function(){return s})),i.d(t,"LibraryEvent",(function(){return n}));var a=i("2b0e"),s=new a["a"],n={ChangeCurriculum:"ChangeCurriculum",ResetContentList:"ResetContentList",ContentListUpdate:"ContentListUpdate",ContentListItemClick:"ContentListItemClick",ContentListSelectClick:"ContentListSelectClick",ContentListSelectedListUpdate:"ContentListSelectedListUpdate",GradeUpdate:"GradeUpdate",CenturySkillsSelect:"CenturySkillsSelect",CancelCenturySkillsSelect:"CancelCenturySkillsSelect"}},a27ed:function(e,t,i){},ab44:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var a={learningOutcomes:"learningOutcomes",specificSkills:"specificSkills",centurySkills:"centurySkills",NZKeyCompetencies:"NZ-Key competencies",AUGeneralCapabilities:"AU-General capabilities",sdg:"sdg",assessmentType:"assessmentType",sync:"sync",all21Century:"21st century skills",idu:"idu"}},b3db:function(e,t,i){"use strict";i.r(t),i.d(t,"scenarioAPIUrl",(function(){return s})),i.d(t,"GetAllSdgs",(function(){return n})),i.d(t,"ScenarioSearch",(function(){return r})),i.d(t,"ScenarioAddOrUpdate",(function(){return d})),i.d(t,"ScenarioQueryById",(function(){return l})),i.d(t,"ScenarioDelete",(function(){return c})),i.d(t,"ScenarioDeleteBatch",(function(){return o})),i.d(t,"ScenarioList",(function(){return u})),i.d(t,"ScenarioGetKeywordScenarios",(function(){return h})),i.d(t,"ScenarioQueryContentByScenarioId",(function(){return p})),i.d(t,"QueryBigIdea",(function(){return m})),i.d(t,"QueryContentByBigIdea",(function(){return g})),i.d(t,"QueryTagsBySubjectIds",(function(){return y}));var a=i("b775"),s={GetAllSdgs:"/classcipe/api/scenario/getAllSdgs",ScenarioSearch:"/classcipe/api/scenario/search",ScenarioSearchKey:"/classcipe/api/scenario/searchKey",ScenarioAddOrUpdate:"/classcipe/api/scenario/addOrUpdate",ScenarioQueryById:"/classcipe/api/scenario/queryById",ScenarioDelete:"/classcipe/api/scenario/delete",ScenarioDeleteBatch:"/classcipe/api/scenario/deleteBatch",ScenarioList:"/classcipe/api/scenario/list",ScenarioGetKeywordScenarios:"/classcipe/api/scenario/getKeywordScenarios",ScenarioQueryContentByScenarioId:"/classcipe/api/scenario/queryContentByScenarioId",QueryBigIdea:"/classcipe/api/scenario/queryBigIdea",QueryContentByBigIdea:"/classcipe/api/scenario/queryContentByBigIdea",QueryTagsBySubjectIds:"/classcipe/api/scenario/queryTagsBySubjectIds"};function n(){return Object(a["d"])({url:s.GetAllSdgs,method:"get"})}function r(e){return Object(a["d"])({url:s.ScenarioSearch,method:"get",params:e})}function d(e){return Object(a["d"])({url:s.ScenarioAddOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(a["d"])({url:s.ScenarioQueryById,method:"get",params:e})}function c(e){return Object(a["d"])({url:s.ScenarioDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a["d"])({url:s.ScenarioDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(a["d"])({url:s.ScenarioList,method:"get",params:e})}function h(e){return Object(a["d"])({url:s.ScenarioGetKeywordScenarios,method:"get",params:e})}function p(e){return Object(a["d"])({url:s.ScenarioQueryContentByScenarioId,method:"get",params:e})}function m(e){return Object(a["d"])({url:s.QueryBigIdea,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(a["d"])({url:s.QueryContentByBigIdea,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(e){return Object(a["d"])({url:s.QueryTagsBySubjectIds,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},c418:function(e,t,i){"use strict";i.r(t),i.d(t,"subjectAPIUrl",(function(){return s})),i.d(t,"SubjectTree",(function(){return n})),i.d(t,"SubjectAddOrUpdate",(function(){return r})),i.d(t,"SubjectQueryById",(function(){return d})),i.d(t,"SubjectDelete",(function(){return l})),i.d(t,"SubjectDeleteBatch",(function(){return c})),i.d(t,"SubjectList",(function(){return o})),i.d(t,"SubjectStudentList",(function(){return u}));var a=i("b775"),s={SubjectTree:"/classcipe/api/subject/tree",SubjectAddOrUpdate:"/classcipe/api/subject/addOrUpdate",SubjectQueryById:"/classcipe/api/subject/queryById",SubjectDelete:"/classcipe/api/subject/delete",SubjectDeleteBatch:"/classcipe/api/subject/deleteBatch",SubjectList:"/classcipe/api/subject/list",SubjectStudentList:"/classcipe/api/subject/getStudentSubjects"};function n(e){return Object(a["d"])({url:s.SubjectTree,method:"get",params:e})}function r(e){return Object(a["d"])({url:s.SubjectAddOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(a["d"])({url:s.SubjectQueryById,method:"get",params:e})}function l(e){return Object(a["d"])({url:s.SubjectDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a["d"])({url:s.SubjectDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a["d"])({url:s.SubjectList,method:"get",params:e})}function u(e){return Object(a["d"])({url:s.SubjectStudentList,method:"get",params:e})}},ce70:function(e,t,i){"use strict";i("770f")},d066d:function(e,t,i){"use strict";i("fcd7")},e03f:function(e,t,i){"use strict";i("977d")},ea23:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"unit-plan-preview"},[e.loading?[i("a-skeleton",{attrs:{active:""}})]:[i("a-row",{staticClass:"top-header",attrs:{gutter:[16,24]}},[i("a-col",{attrs:{span:"24"}},[i("span",{staticClass:"title"},[e._v(" "+e._s(e.unitPlanData.name)+" ")]),e.lastChangeSavedTime?[i("a-divider",{attrs:{type:"vertical"}}),i("span",{staticClass:"last-change-time"},[e._v(" "+e._s(e.$t("teacher.add-unit-plan.last-change-saved-at-time",{time:e.lastChangeSavedTime}))+" ")])]:e._e()],2)],1),i("a-row",{staticClass:"action-header"},[i("a-col",{staticClass:"action-header-toggle",attrs:{span:"24"}},[i("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.handleViewModeChange},model:{value:e.viewMode,callback:function(t){e.viewMode=t},expression:"viewMode"}},[i("a-radio-button",{staticClass:"left-button",attrs:{value:"Detail"}},[e._v(" Detail ")]),i("a-radio-button",{staticClass:"right-button",attrs:{value:"Preview"}},[e._v(" Preview ")])],1),i("div",{staticClass:"edit-item"},[i("a-button",{attrs:{type:"primary"}},[i("router-link",{attrs:{to:"/teacher/unit-plan-redirect/"+e.unitPlanId}},[e._v(e._s(e.$t("teacher.unit-plan-preview.edit")))])],1)],1)],1)],1),i("a-row",{directives:[{name:"show",rawName:"v-show",value:"Preview"===e.viewMode,expression:"viewMode === 'Preview'"}],staticClass:"top-info",attrs:{gutter:[16,24]}},[i("a-col",{staticClass:"left-preview",attrs:{span:"24"}},[i("a-carousel",{attrs:{arrows:""}},[i("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"10px","z-index":"1"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[i("a-icon",{attrs:{type:"left-circle"}})],1),i("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"10px"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[i("a-icon",{attrs:{type:"right-circle"}})],1),e.loading||e.imgList.length?e._e():i("div",{staticClass:"no-preview-img"},[i("a-empty")],1),e._l(e.imgList,(function(e,t){return i("div",{key:t,staticClass:"preview-img-item"},[i("div",{staticClass:"preview-block",style:{backgroundImage:"url('"+e+"')"},attrs:{"data-img":e}})])}))],2)],1)],1),i("a-row",{directives:[{name:"show",rawName:"v-show",value:"Detail"===e.viewMode,expression:"viewMode === 'Detail'"}],staticClass:"top-info",attrs:{gutter:[16,24]}},[i("a-col",{staticClass:"right-detail",attrs:{span:"24"}},[i("div",{staticClass:"detail-wrapper"},[i("div",{staticClass:"detail-block"},[i("div",{staticClass:"block-title"},[e._v(" "+e._s(e.unitPlanData.scenario&&e.unitPlanData.scenario.description)+" "),i("span",{staticClass:"title-icon"},[i("a-tooltip",[i("template",{slot:"title"},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.scenario-description"))+" ")]),i("a-icon",{attrs:{type:"info-circle"}})],2)],1)]),i("div",{staticClass:"block-content"},[e.unitPlanData.scenario&&e.unitPlanData.scenario.sdgKeyWords?i("div",{staticClass:"content-list"},e._l(e.unitPlanData.scenario.sdgKeyWords,(function(t,a){return i("div",{key:a,staticClass:"content-item"},[i("div",{staticClass:"question"},[e._v(" "+e._s(a+1)+"、"+e._s(t.sdgName)+" ")]),i("div",{staticClass:"tags"},e._l(t.keywords,(function(t,a){return i("div",{key:a,staticClass:"tag-item"},[i("a-tag",{attrs:{color:e.tagColorList[a%e.tagColorList.length]}},[e._v(" "+e._s(t.name)+" ")])],1)})),0)])})),0):i("div",{staticClass:"content-list"},[i("a-empty")],1)])]),i("div",{staticClass:"detail-block"},[i("div",{staticClass:"block-title"},[e._v(" "+e._s(e.unitPlanData.inquiry)+" "),i("span",{staticClass:"title-icon"},[i("a-tooltip",[i("template",{slot:"title"},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.direction-of-inquiry"))+" ")]),i("a-icon",{attrs:{type:"info-circle"}})],2)],1)]),i("div",{staticClass:"block-content"},[e.unitPlanData.questions&&e.unitPlanData.questions.length?i("div",{staticClass:"content-list"},e._l(e.unitPlanData.questions,(function(t,a){return i("div",{key:a,staticClass:"content-item"},[i("div",{staticClass:"question"},[e._v(" "+e._s(t.name)+" ")]),i("div",{staticClass:"content-sub-list"},e._l(t.knowledgeTags,(function(t,s){return i("div",{key:s,staticClass:"content-sub-item"},[i("div",{staticClass:"sub-title"},[e._v(" "+e._s(a+1)+"."+e._s(s+1)+"、"+e._s(t.description)+" "),t.subSubjectName?i("span",{staticClass:"subject-name"},[e._v(e._s(t.subSubjectName))]):e._e(),i("a-tag",{attrs:{color:e.tagColorList[s%e.tagColorList.length]}},[e._v(" "+e._s(t.name)+" ")])],1)])})),0),i("div",{staticClass:"content-sub-list"},e._l(t.skillTags,(function(t,s){return i("div",{key:s,staticClass:"content-sub-item"},[i("div",{staticClass:"sub-title"},[e._v(" "+e._s(a+1)+"."+e._s(s+1)+"、"+e._s(t.description)+" "),i("a-tag",{attrs:{color:e.tagColorList[s%e.tagColorList.length]}},[e._v(" "+e._s(t.name)+" ")])],1)])})),0)])})),0):i("div",{staticClass:"content-list"},[i("a-empty")],1)])])])])],1),e.showAssociate?i("a-divider"):e._e(),e.showAssociate?i("unit-plan-associate-preview",{attrs:{"unit-plan-id":e.unitPlanId}}):e._e()]],2)},s=[],n=(i("d3b7"),i("823b")),r=i("3f76"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"unit-plan-sub-preview"},[e.loading?[i("a-skeleton",{attrs:{active:""}})]:[i("a-row",{staticClass:"bottom-relative",attrs:{gutter:[16,32]}},[i("a-col",{attrs:{span:"16"}},[i("a-space",[i("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.material?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.material)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.material"))+" ")]),i("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.task?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.task)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.task"))+" ")]),i("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.lesson?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.lesson)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.lesson"))+" ")]),i("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.evaluation?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.evaluation)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.evaluation"))+" ")])],1)],1),i("a-col",{attrs:{span:"8"}},[i("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.handleUserTypeChange},model:{value:e.activeUserType,callback:function(t){e.activeUserType=t},expression:"activeUserType"}},[i("a-radio-button",{staticClass:"left-button",attrs:{value:"owner"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-owner"))+" ")]),i("a-radio-button",{staticClass:"right-button",attrs:{value:"others"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-others"))+" ")])],1)],1)],1),i("a-row",[i("a-col",[i("div",{staticClass:"associate-info"},e._l(e.currentAssociateList,(function(t,a){return i("div",{key:a,staticClass:"associate-block-list"},[t.type===e.activeContentType&&t.datas?e._l(t.datas,(function(a,s){return i("div",{key:s,staticClass:"associate-block-item"},[a.question?i("div",{staticClass:"block-title",on:{click:function(i){return e.handleClickTitle(t)}}},[e._v(" "+e._s(a.question.name)+" ")]):e._e(),a.lists?i("div",{staticClass:"block-content-list"},e._l(a.lists,(function(a,s){return i("div",{key:s,staticClass:"block-content-item"},[i("a-row",[i("a-col",{staticClass:"block-content",attrs:{span:"14"},on:{click:function(t){return e.handleSubPreview(a)}}},[i("content-type-icon",{attrs:{type:t.type}}),i("span",{staticClass:"content-txt"},[e._v(" "+e._s(a.name)+" ")])],1),i("a-col",{staticClass:"block-last-change-time",attrs:{span:"6"}},[e._v(" "+e._s(e._f("moment")(a.updateTime))+" ")]),i("a-col",{staticClass:"favorite",attrs:{span:"2"},on:{click:function(t){return e.handleFavorite(a)}}},[i("span",{class:{"favorite-active":a.isFavorite}},[i("a-icon",{attrs:{type:"star",theme:a.isFavorite?"filled":"outlined"}}),a.isFavorite?[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.favorite"))+" ")]:e._e()],2)]),i("a-col",{staticClass:"action-item",attrs:{span:"2"}},[i("a",{on:{click:function(i){return e.handleEditItem(t.type,a)}}},[e._v(e._s(e.$t("teacher.unit-plan-preview.edit")))])])],1)],1)})),0):e._e()])})):e._e()],2)})),0)])],1),i("a-row"),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",closable:"",width:"800px",visible:e.subPreviewVisible},on:{close:e.handleSubPreviewClose}},[i("div",{staticClass:"preview-wrapper"},[i("div",{staticClass:"preview-detail"},[e.previewType===e.typeMap["unit-plan"]?i("unit-plan-preview",{attrs:{"unit-plan-id":e.unitPlanId,"show-associate":!1}}):e._e()],1)])])]],2)},l=[],c=(i("3ca3"),i("ddb0"),i("8f46")),o=i("95c6"),u=o.FavoritesAdd,h=i("9afb"),p=h.GetAssociate,m={name:"UnitPlanAssociatePreview",props:{unitPlanId:{type:String,default:null}},components:{ContentTypeIcon:c["a"],UnitPlanPreview:function(){return Promise.resolve().then(i.bind(null,"ea23"))}},data:function(){return{loading:!0,associateData:null,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:r["e"].material,activeUserType:"owner",currentAssociateList:[],typeMap:r["e"],previewType:"",subPreviewVisible:!1}},created:function(){n["info"]("UnitPlan Associate Preview unitPlanId "+this.unitPlanId),this.loadUnitPlanAssociateData()},methods:{loadUnitPlanAssociateData:function(){var e=this;n["info"]("loadUnitPlanAssociateData "+this.unitPlanId),this.loading=!0,p({id:this.unitPlanId,type:r["e"]["unit-plan"]}).then((function(t){n["info"]("GetAssociate ",t),e.associateData=t.result,e.currentAssociateList=e.associateData[e.activeUserType]})).then((function(){n["info"]("get favorite "+e.unitPlanId)})).finally((function(){e.loading=!1}))},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1,this.previewType=null},handleUserTypeChange:function(e){n["info"]("handleUserTypeChange "+this.activeUserType),this.currentAssociateList=this.associateData[this.activeUserType],n["info"]("currentAssociateList",this.currentAssociateList)},handleClickTitle:function(e){n["info"]("handleClickTitle",e),this.previewType=r["e"]["unit-plan"],this.subPreviewVisible=!0},handleSubPreview:function(e,t){n["info"]("handleSubPreview",e,t),this.previewType=r["e"]["unit-plan"],this.subPreviewVisible=!0},handleFavorite:function(e){n["info"]("handleFavorite",e),u({sourceId:e.id,sourceType:e.type}).then((function(t){n["info"]("FavoritesAdd ",t),e.isFavorite=!e.isFavorite}))},handleEditItem:function(e,t){n["info"]("handleEditItem",e,t),this.$message.success("Edit Item")}}},g=m,y=(i("2c45"),i("0c7c")),f=Object(y["a"])(g,d,l,!1,null,"dcb9f240",null),C=f.exports,I=i("ca00"),v=I.formatLocalUTC,b=i("de0d"),T=b.UnitPlanQueryById,L={name:"UnitPlanPreview",props:{unitPlanId:{type:String,default:null},showAssociate:{type:Boolean,default:!1}},components:{UnitPlanAssociatePreview:C},computed:{lastChangeSavedTime:function(){if(this.unitPlanData){n["info"]("lastChangeSavedTime unitPlanData",this.unitPlanData);var e=this.unitPlanData.createTime||this.unitPlanData.updateTime;if(e)return v(e)}return""}},mounted:function(){},data:function(){return{loading:!0,unitPlanData:null,imgList:[],viewMode:"Detail",tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:-1,typeMap:r["e"],subPreviewVisible:!1}},created:function(){n["info"]("UnitPlanPreview unitPlanId "+this.unitPlanId),this.loadUnitPlanData()},methods:{loadUnitPlanData:function(){var e=this;n["info"]("loadUnitPlanData "+this.unitPlanId),this.loading=!0,T({id:this.unitPlanId}).then((function(t){n["info"]("UnitPlanQueryById "+e.unitPlanId,t.result),e.unitPlanData=t.result,e.unitPlanData&&e.unitPlanData.image&&(e.imgList=[e.unitPlanData.image])})).finally((function(){e.loading=!1}))},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1},handleViewModeChange:function(){this.$logger.info("handleViewModeChange "+this.viewMode)}}},S=L,w=(i("8e47"),Object(y["a"])(S,a,s,!1,null,"6fb1cca6",null));t["default"]=w.exports},fcd7:function(e,t,i){}}]);