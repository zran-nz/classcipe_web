(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addPreference"],{1034:function(e,t,r){"use strict";r("f1b5")},"49ce":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-content"},[r("div",{staticClass:"card-wrapper"},[r("div",{staticClass:"card-steps"},[r("a-steps",{attrs:{current:e.currentStep,direction:"horizontal"}},[r("a-step",{attrs:{title:e.$t("role.step.what-can-you-do")}},[r("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("result.success.step1-title")))])]),"expert"===e.$store.getters.currentRole?r("a-step",{attrs:{title:e.$t("role.step.personal-information")}},[r("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("expert-select-area")))])]):e._e(),"teacher"===e.$store.getters.currentRole?r("a-step",{attrs:{title:e.$t("role.step.personal-information")}},[r("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("teacher-tell-class")))])]):e._e()],1)],1),r("div",{staticClass:"form-items"},["expert"===e.$store.getters.currentRole?r("a-form-model",{ref:"expertForm",attrs:{model:e.expertForm,rules:e.expertRules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:"Area(s)",prop:"areaIds"}},[r("a-select",{attrs:{placeholder:"Please select"},model:{value:e.expertForm.areaIds,callback:function(t){e.$set(e.expertForm,"areaIds",t)},expression:"expertForm.areaIds"}},e._l(e.areaOptions,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id},nativeOn:{click:function(r){return e.handleSelectAreaOption(t)}}},[e._v(e._s(t.name))])})),1)],1),r("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:e.currentArea&&"Others"===e.currentArea.name,expression:"currentArea && currentArea.name === 'Others'"}],ref:"others",attrs:{label:"Others",prop:"others"}},[r("a-input",{attrs:{placeholder:"Please input"},on:{blur:function(){e.$refs.others.onFieldBlur()}},model:{value:e.expertForm.others,callback:function(t){e.$set(e.expertForm,"others",t)},expression:"expertForm.others"}})],1)],1):e._e(),"teacher"===e.$store.getters.currentRole?r("a-form-model",{ref:"teacherForm",attrs:{model:e.teacherForm,rules:e.teacherRules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:"Curriculum",prop:"curriculumId"}},[r("a-select",{attrs:{placeholder:"Please select curriculum"},model:{value:e.teacherForm.curriculumId,callback:function(t){e.$set(e.teacherForm,"curriculumId",t)},expression:"teacherForm.curriculumId"}},e._l(e.curriculumOptions,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id},nativeOn:{click:function(r){return e.handleSelectCurriculumOption(t)}}},[e._v(e._s(t.name))])})),1)],1),r("a-form-model-item",{attrs:{label:"Subject",prop:"subjectIds"}},[r("a-select",{attrs:{mode:"multiple"},model:{value:e.teacherForm.subjectIds,callback:function(t){e.$set(e.teacherForm,"subjectIds",t)},expression:"teacherForm.subjectIds"}},e._l(e.subjectOptions,(function(t){return t.subjectType===e.subjectType.Skill||t.subjectType===e.subjectType.LearnAndSkill?r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))]):e._e()})),1)],1),r("a-form-model-item",{attrs:{label:"Grade",prop:"gradeIds"}},[r("a-select",{attrs:{placeholder:"Please select grade",mode:"multiple"},model:{value:e.teacherForm.gradeIds,callback:function(t){e.$set(e.teacherForm,"gradeIds",t)},expression:"teacherForm.gradeIds"}},e._l(e.gradeOptions,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1):e._e()],1),r("div",{staticClass:"actions"},[r("div",{staticClass:"action-first"},[r("a-button",{attrs:{type:"primary",block:""},on:{click:e.goBack}},[e._v(" Last step ")])],1),r("div",{staticClass:"action-second"},[r("a-button",{attrs:{type:"primary",block:""},on:{click:e.saveDetail}},[e._v(" Save my detail ")])],1)])])])},a=[],c=(r("b0c0"),r("d73b")),l=r("d597"),o=r("823b"),u=r("f93e"),i={name:"AddPreference",data:function(){var e=this,t=function(t,r,s){o["info"]("validateOthers",r),!r&&e.currentArea&&"Others"===e.currentArea.name?s(new Error("Please input")):s()};return{currentStep:1,labelCol:{lg:{span:5},sm:{span:5}},wrapperCol:{lg:{span:19},sm:{span:19}},areaOptions:[],expertForm:{areaIds:null,others:null},expertRules:{areaIds:[{required:!0,message:"Please select",trigger:"blur"}],others:[{validator:t,trigger:"blur"},{min:2,max:50,message:"Length should be 2 to 50",trigger:"blur"}]},currentArea:null,teacherForm:{curriculumId:null,subjectIds:[],gradeIds:[]},teacherRules:{curriculumId:[{required:!0,message:"Please select curriculum",trigger:"blur"}],subjectIds:[{required:!0,message:"Please select subject",trigger:"blur"}],gradeIds:[{required:!0,message:"Please select grade",trigger:"blur"}]},currentCurriculum:null,curriculumOptions:[],subjectOptions:[],gradeOptions:[],subjectType:u["P"]}},created:function(){this.initOptions()},watch:{"teacherForm.curriculumId":function(e){o["info"]("teacherForm.curriculumId change",e),this.loadSubjectByCurriculumId(e)}},methods:{initOptions:function(){var e=this;"expert"===this.$store.getters.currentRole?Object(l["f"])({curriculumId:u["h"].Cambridge}).then((function(t){e.areaOptions=t.result})):"teacher"===this.$store.getters.currentRole&&Object(l["e"])().then((function(t){o["info"]("getAllCurriculums",t),e.curriculumOptions=t.result,o["info"]("getAllCurriculums",e.curriculumOptions)}))},goBack:function(){this.$router.push({path:c["f"]})},handleSelectAreaOption:function(e){o["info"]("handleSelectAreaOption",e),this.currentArea=e},handleSelectCurriculumOption:function(e){o["info"]("handleSelectCurriculumOption",e),null!==this.currentCurriculum&&this.currentCurriculum.id===e.id||(this.teacherForm.subjectIds=[]),this.currentCurriculum=e},loadSubjectByCurriculumId:function(e){var t=this;this.teacherForm.subjectIds=[],this.teacherForm.gradeIds=[],Object(l["f"])({curriculumId:e}).then((function(e){o["info"]("subjectOptions",e.result),t.subjectOptions=e.result})),Object(l["a"])({curriculumId:e}).then((function(e){o["info"]("GetGradesByCurriculumId",e),t.gradeOptions=e.result,o["info"]("gradeOptions",t.gradeOptions)}))},saveDetail:function(){var e=this;"expert"===this.$store.getters.currentRole?this.$refs.expertForm.validate((function(t){if(!t)return!1;o["info"]("save expert",e.expertForm);var r={areaIds:[e.expertForm.areaIds]};e.expertForm.others&&(r.others=e.expertForm.others),Object(l["c"])(r).then((function(t){e.$store.dispatch("GetInfo").then((function(){e.$router.push(c["e"])}))}))})):"teacher"===this.$store.getters.currentRole&&this.$refs.teacherForm.validate((function(t){if(!t)return!1;o["info"]("save teacher",e.teacherForm),Object(l["c"])(e.teacherForm).then((function(t){e.$store.dispatch("GetInfo").then((function(){e.$router.push(c["e"])}))}))}))}}},n=i,p=(r("1034"),r("0c7c")),d=Object(p["a"])(n,s,a,!1,null,"6c67ac88",null);t["default"]=d.exports},f1b5:function(e,t,r){}}]);