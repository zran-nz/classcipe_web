(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8ae00ffa"],{"14c39":function(e,t,a){"use strict";a("9bb9")},"178d":function(e,t,a){},"1fce":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-row",{staticStyle:{"flex-wrap":"nowrap"},attrs:{type:"flex"}},[s("a-col",{staticClass:"account-settings-info-view",attrs:{flex:"auto"}},[s("a-spin",{attrs:{size:"large",spinning:e.loading}},[e.editMode?e._e():s("div",{staticClass:"edit-action-wrapper"},[s("div",{staticClass:"edit-action",on:{click:function(t){e.editMode=!e.editMode}}},[s("a-icon",{attrs:{type:"edit"}}),e._v(" Edit ")],1)]),s("avatar-modal",{ref:"modal",on:{ok:e.setAvatar}}),s("a-row",{attrs:{gutter:[16,16]}},[s("a-col",{staticClass:"username-line",style:{minHeight:"180px"},attrs:{span:"16"}},[s("div",{staticClass:"ant-upload-preview",on:{click:function(t){return e.$refs.modal.edit(1)}}},[s("a-icon",{staticClass:"upload-icon",attrs:{type:"cloud-upload-o"}}),s("div",{staticClass:"mask"},[s("a-icon",{attrs:{type:"plus"}})],1),e.userInfo.avatar?s("img",{attrs:{src:e.userInfo.avatar}}):s("img",{attrs:{src:a("4992")}})],1),s("div",{staticStyle:{width:"100%"}},[s("div",{staticClass:"user-name"},[e.editMode?e._e():s("h1",[e._v(e._s(e.userInfo.nickname||e.userInfo.firstname+" "+e.userInfo.lastname))]),e.editMode?s("div",{staticClass:"edit-user-name"},[s("a-input",{attrs:{size:"large",maxLength:80},model:{value:e.userInfo.tempNickname,callback:function(t){e.$set(e.userInfo,"tempNickname",t)},expression:"userInfo.tempNickname"}})],1):e._e()]),s("a-icon",{staticStyle:{"margin-left":"30px"},attrs:{type:"profile"}}),e._v("  "+e._s(e.userInfo.email)+" ")],1)])],1),s("a-divider"),s("a-row",{attrs:{gutter:[16,16]}},[s("a-col",{attrs:{span:"24"}},[s("div",{staticClass:"profile-title"},[e._v(" "+e._s(e.userMode===e.USER_MODE.SELF?"Personal account":"School account: "+e.currentSchool.schoolName)+" ")])]),s("a-col",{attrs:{span:"24"}},[s("div",{staticClass:"profile-item-line"},[s("div",{staticClass:"profile-label"},[s("span",{staticClass:"label-txt"},[e._v("Role : ")])]),s("a-space",{staticClass:"profile-text profile-data"},e._l(e.rolesName,(function(t){return s("a-tag",{key:"roleName_"+t},[e._v(" "+e._s(t)+" ")])})),1)],1),s("div",{staticClass:"profile-item-line"},[s("div",{staticClass:"profile-label"},[s("span",{staticClass:"label-txt"},[e._v("Member since :")])]),s("div",{staticClass:"profile-text profile-data"},[e.userMode===e.USER_MODE.SELF?[e._v(" "+e._s(e._f("dayjs")(e.userInfo.createTime))+" ")]:[e._v(" "+e._s(e._f("dayjs")(e.currentSchool.schoolJoinDate))+" ")]],2)]),"expert"===e.$store.getters.currentRole?s("div",{staticClass:"profile-item-line"},[s("div",{staticClass:"profile-label"},[s("span",{staticClass:"label-txt"},[e._v("Area(s) :")])]),e.editMode&&e.canEdit?s("div",{staticClass:"profile-input profile-data"},[s("a-select",{attrs:{getPopupContainer:function(e){return e.parentElement},placeholder:"Please select",mode:"multiple"},model:{value:e.userInfo.areaIds,callback:function(t){e.$set(e.userInfo,"areaIds",t)},expression:"userInfo.areaIds"}},e._l(e.areaOptions,(function(t){return s("a-select-option",{key:t.id,attrs:{value:t.id},nativeOn:{click:function(a){return e.handleSelectAreaOption(t)}}},[e._v(e._s(t.name)+" ")])})),1),e.currentArea&&"Others"===e.currentArea.name?s("a-input",{staticClass:"area-input",attrs:{placeholder:"Please input"},model:{value:e.userInfo.tempOthers,callback:function(t){e.$set(e.userInfo,"tempOthers",t)},expression:"userInfo.tempOthers"}}):e._e()],1):s("div",{staticClass:"profile-text profile-data"},[e._l(e.userInfo.areaNameList,(function(t,a){return s("div",{key:a,staticClass:"profile-tag-item"},[s("a-tag",[e._v(e._s(t))])],1)})),e.userInfo.others&&e.userInfo.others.length?e._l(e.userInfo.others,(function(t,a){return s("div",{key:"o"+a,staticClass:"profile-tag-item"},[s("a-tag",{attrs:{color:"#108ee9"}},[e._v(e._s(t))])],1)})):e._e()],2)]):e._e(),"teacher"===e.$store.getters.currentRole?s("div",{staticClass:"profile-item-line"},[s("div",{staticClass:"profile-label"},[s("span",{staticClass:"label-txt"},[e._v("Curriculum :")])]),e.editMode&&e.canEdit?s("div",{staticClass:"profile-input profile-data"},[s("a-select",{attrs:{getPopupContainer:function(e){return e.parentElement},placeholder:"Please select curriculum"},model:{value:e.userInfo.curriculumId,callback:function(t){e.$set(e.userInfo,"curriculumId",t)},expression:"userInfo.curriculumId"}},e._l(e.curriculumOptions,(function(t){return s("a-select-option",{key:t.id,attrs:{value:t.id},nativeOn:{click:function(a){return e.handleSelectCurriculumOption(t)}}},[e._v(e._s(t.name)+" ")])})),1)],1):s("div",{staticClass:"profile-text profile-data"},[e._v(" "+e._s(e.userInfo.curriculumName)+" ")])]):e._e(),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["teacher","student"],expression:"['teacher', 'student']"}],staticClass:"profile-item-line"},[s("div",{staticClass:"profile-label"},[s("span",{staticClass:"label-txt"},[e._v("Subject(s) :")])]),e.editMode&&e.canEdit?s("div",{staticClass:"profile-input profile-data"},[s("a-select",{attrs:{getPopupContainer:function(e){return e.parentElement},mode:"multiple"},model:{value:e.userInfo.subjects,callback:function(t){e.$set(e.userInfo,"subjects",t)},expression:"userInfo.subjects"}},e._l(e.subjectOptionsFilter,(function(t){return s("a-select-option",{key:t.id,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1):s("div",{staticClass:"profile-text profile-data"},e._l(e.userInfo.subjects,(function(t,a){return s("div",{key:a,staticClass:"profile-tag-item"},[s("a-tag",[e._v(e._s(t))])],1)})),0)]),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"profile-item-line"},[s("div",{staticClass:"profile-label"},[s("span",{staticClass:"label-txt"},[e._v("Age : ")])]),e.editMode&&e.canEdit?s("div",{staticClass:"profile-input profile-data"},[s("a-select",{attrs:{getPopupContainer:function(e){return e.parentElement},placeholder:"Please select age"},model:{value:e.userInfo.age,callback:function(t){e.$set(e.userInfo,"age",t)},expression:"userInfo.age"}},e._l(e.ageList,(function(t){return s("a-select-option",{key:"age_"+t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1):s("div",{staticClass:"profile-text profile-data"},[e._v(" "+e._s(e.userInfo.age)+" ")])]),"teacher"===e.$store.getters.currentRole?s("div",{staticClass:"profile-item-line"},[s("div",{staticClass:"profile-label"},[s("span",{staticClass:"label-txt"},[e._v("Level/Grade :")])]),e.editMode&&e.canEdit?s("div",{staticClass:"profile-input profile-data"},[s("a-select",{attrs:{getPopupContainer:function(e){return e.parentElement},placeholder:"Please select grade",mode:"multiple"},model:{value:e.userInfo.gradeIds,callback:function(t){e.$set(e.userInfo,"gradeIds",t)},expression:"userInfo.gradeIds"}},e._l(e.gradeOptions,(function(t){return s("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1):s("div",{staticClass:"profile-text profile-data"},e._l(e.userInfo.gradeNameList,(function(t,a){return s("div",{key:a,staticClass:"profile-tag-item"},[s("a-tag",[e._v(e._s(t))])],1)})),0)]):e._e(),"teacher"===e.$store.getters.currentRole?s("div",{staticClass:"profile-item-line"},[s("div",{staticClass:"profile-label"},[s("span",{staticClass:"label-txt"},[e._v("Customized tags :")])]),s("div",{staticClass:"profile-text profile-data"},[s("a",{attrs:{slot:"extra",href:"#"},on:{click:e.handleSetting},slot:"extra"},[s("a-icon",{attrs:{type:"edit"}}),e._v(" Tags setting")],1)])]):e._e(),s("div",{staticClass:"profile-item-line"},[s("div",{staticClass:"profile-label"},[s("span",{staticClass:"label-txt"},[e._v("Linked School(s):")])]),s("div",{staticClass:"profile-text profile-data"},[e.linkedSchool.length>0?s("a-space",e._l(e.linkedSchool,(function(t){return s("a-tag",{key:"linkedSchool_"+t,attrs:{color:"#ffc001"}},[e._v(" "+e._s(t)+" ")])})),1):e._e(),0===e.linkedSchool.length&&"teacher"===e.currentRole?s("div",[s("a-button",{on:{click:function(t){e.userFormVisible=!0}}},[e._v("Refer your principal")])],1):e._e(),0===e.linkedSchool.length&&"student"===e.currentRole?s("div",{staticClass:"no-linked-school-name"},[e._v("You have not linked to any school")]):e._e()],1)])])],1),s("a-row",[s("a-col",{staticClass:"action-line",attrs:{span:"24"}},[e.editMode?s("div",{staticClass:"submit-action-wrapper"},[s("a-button",{attrs:{type:"primary",loading:e.loadSaving},on:{click:e.saveDetail}},[e._v(e._s(e.$t("account.settings.basic.update")))])],1):e._e(),e.editMode?s("div",{staticClass:"submit-action-wrapper-second"},[s("a-button",{on:{click:e.cancelDetail}},[e._v(e._s(e.$t("account.settings.basic.cancel")))])],1):e._e()])],1),s("a-modal",{attrs:{title:"Tags Setting",footer:null,destroyOnClose:"",width:"600px","dialog-style":{top:"20px"}},model:{value:e.settingVisible,callback:function(t){e.settingVisible=t},expression:"settingVisible"}},[s("div",[s("tag-setting")],1)])],1)],1),s("a-col",{directives:[{name:"show",rawName:"v-show",value:e.userFormVisible,expression:"userFormVisible"}],attrs:{flex:"30px"}},[s("a-divider",{staticStyle:{height:"100%",margin:"0 15px"},attrs:{type:"vertical"}})],1),s("a-col",{directives:[{name:"show",rawName:"v-show",value:e.userFormVisible,expression:"userFormVisible"}],attrs:{flex:"500px"}},[s("div",{staticClass:"account-info"},[s("div",{staticClass:"account-info-title"},[e._v(" Complete the form below to send your principal an email about Classcipe ")]),s("div",{staticClass:"account-info-sub"},[s("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.adminFormVisible,expression:"!adminFormVisible"}],attrs:{type:"link"},on:{click:function(t){e.adminFormVisible=!0}}},[e._v("I'm an administrator >")]),s("a-button",{directives:[{name:"show",rawName:"v-show",value:e.adminFormVisible,expression:"adminFormVisible"}],attrs:{type:"link"},on:{click:function(t){e.adminFormVisible=!1}}},[e._v("I'm not an administrator >")])],1),s("a-spin",{attrs:{spinning:e.confirmLoading}},[s("a-form-model",{directives:[{name:"show",rawName:"v-show",value:!e.adminFormVisible,expression:"!adminFormVisible"}],ref:"userForm",staticClass:"account-info-form",attrs:{layout:e.userForm.layout,model:e.userForm,rules:e.validatorRules}},[s("a-row",{attrs:{gutter:16}},[s("a-col",{attrs:{span:12}},[s("a-form-model-item",{attrs:{label:"Your Frist Name",prop:"firstname"}},[s("a-input",{attrs:{size:"large",placeholder:"input your first name"},model:{value:e.userForm.firstname,callback:function(t){e.$set(e.userForm,"firstname",t)},expression:"userForm.firstname"}})],1)],1),s("a-col",{attrs:{span:12}},[s("a-form-model-item",{attrs:{label:"Your Last Name",prop:"lastname"}},[s("a-input",{attrs:{size:"large",placeholder:"input your last Name"},model:{value:e.userForm.lastname,callback:function(t){e.$set(e.userForm,"lastname",t)},expression:"userForm.lastname"}})],1)],1)],1),s("a-form-model-item",{attrs:{label:"Your Email Address",prop:"email"}},[s("a-input",{attrs:{size:"large",placeholder:"input your email address"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),s("a-row",{attrs:{gutter:16}},[s("a-col",{attrs:{span:12}},[s("a-form-model-item",{attrs:{label:"Principal's Frist Name",prop:"principleFirstname"}},[s("a-input",{attrs:{size:"large",placeholder:"input principal's first name"},model:{value:e.userForm.principleFirstname,callback:function(t){e.$set(e.userForm,"principleFirstname",t)},expression:"userForm.principleFirstname"}})],1)],1),s("a-col",{attrs:{span:12}},[s("a-form-model-item",{attrs:{label:"Principal's Last Name",prop:"principleLastname"}},[s("a-input",{attrs:{size:"large",placeholder:"input principal's last Name"},model:{value:e.userForm.principleLastname,callback:function(t){e.$set(e.userForm,"principleLastname",t)},expression:"userForm.principleLastname"}})],1)],1)],1),s("a-form-model-item",{attrs:{label:"Principal's Email Address",prop:"principleEmail"}},[s("a-input",{attrs:{size:"large",placeholder:"input principal's email address"},model:{value:e.userForm.principleEmail,callback:function(t){e.$set(e.userForm,"principleEmail",t)},expression:"userForm.principleEmail"}})],1),s("a-form-model-item",{key:"School",attrs:{label:"School",prop:"schoolId"}},[s("a-select",{attrs:{placeholder:"Please select school","show-search":"","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null,"option-label-prop":"label"},on:{change:e.changeUserSchool,search:e.handleSearchSchool,focus:e.handleSearchSchool},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return s("div",{},[s("v-nodes",{attrs:{vnodes:t}}),e.ifShowCreate?s("div",[s("a-divider",{staticStyle:{margin:"4px 0"}}),s("div",{staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{mousedown:function(e){return e.preventDefault()},click:function(t){return e.handleCreateSchool("userForm")}}},[e._v(" Create School: "),s("a-tag",{attrs:{color:"#15c39a"}},[e._v(e._s(e.createSchoolName))])],1)],1):e._e()],1)}}]),model:{value:e.userForm.schoolId,callback:function(t){e.$set(e.userForm,"schoolId",t)},expression:"userForm.schoolId"}},e._l(e.myCreateSchoolOptions.concat(e.schoolOptions),(function(t){return s("a-select-option",{key:t.id,attrs:{value:t.id,label:t.name}},[s("label",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("span",[e._v(e._s(t.name))]),s("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.country,expression:"schoolOption.country"}],attrs:{type:"primary"}},[e._v(e._s(t.country))])],1)])})),1)],1),s("a-form-model-item",{attrs:{prop:"country",label:"Country/Region"}},[s("a-select",{attrs:{"show-search":"",placeholder:"Please Select a Country","option-filter-prop":"children","filter-option":e.filterOptions,getPopupContainer:function(e){return e.parentNode}},model:{value:e.userForm.country,callback:function(t){e.$set(e.userForm,"country",t)},expression:"userForm.country"}},e._l(e.countries,(function(t){return s("a-select-option",{key:"country_"+t.en,attrs:{value:t.en}},[e._v(" "+e._s(t.en)+" ")])})),1)],1),s("a-form-model-item",{attrs:{label:"Your Personalized Message (Optional)"}},[s("a-textarea",{attrs:{"auto-size":{minRows:3},size:"large",placeholder:"input your personalized message"},model:{value:e.userForm.personalizedMessage,callback:function(t){e.$set(e.userForm,"personalizedMessage",t)},expression:"userForm.personalizedMessage"}})],1),s("a-form-model-item",{staticStyle:{"text-align":"right"}},[s("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.confirmLoading},on:{click:e.doSaveUserForm}},[e._v(" Send ")])],1)],1),s("a-form-model",{directives:[{name:"show",rawName:"v-show",value:e.adminFormVisible,expression:"adminFormVisible"}],ref:"adminForm",staticClass:"account-info-form",attrs:{layout:"vertical",model:e.adminForm,rules:e.validatorRules}},[s("a-row",{attrs:{gutter:16}},[s("a-col",{attrs:{span:12}},[s("a-form-model-item",{attrs:{label:"Your Frist Name",prop:"firstname"}},[s("a-input",{attrs:{size:"large",placeholder:"input your first name"},model:{value:e.adminForm.firstname,callback:function(t){e.$set(e.adminForm,"firstname",t)},expression:"adminForm.firstname"}})],1)],1),s("a-col",{attrs:{span:12}},[s("a-form-model-item",{attrs:{label:"Your Last Name",prop:"lastname"}},[s("a-input",{attrs:{size:"large",placeholder:"input your last Name"},model:{value:e.adminForm.lastname,callback:function(t){e.$set(e.adminForm,"lastname",t)},expression:"adminForm.lastname"}})],1)],1)],1),s("a-form-model-item",{attrs:{label:"Email",prop:"email"}},[s("a-input",{attrs:{placeholder:"Please Input Email"},model:{value:e.adminForm.email,callback:function(t){e.$set(e.adminForm,"email",t)},expression:"adminForm.email"}})],1),s("a-form-model-item",{key:"School",attrs:{label:"School",prop:"schoolId"}},[s("a-select",{attrs:{placeholder:"Please select school","show-search":"","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null,"option-label-prop":"label"},on:{change:e.changeAdminSchool,search:e.handleSearchSchool,focus:e.handleSearchSchool},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return s("div",{},[s("v-nodes",{attrs:{vnodes:t}}),e.ifShowCreate?s("div",[s("a-divider",{staticStyle:{margin:"4px 0"}}),s("div",{staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{mousedown:function(e){return e.preventDefault()},click:function(t){return e.handleCreateSchool("adminForm")}}},[e._v(" Create School: "),s("a-tag",{attrs:{color:"#15c39a"}},[e._v(e._s(e.createSchoolName))])],1)],1):e._e()],1)}}]),model:{value:e.adminForm.schoolId,callback:function(t){e.$set(e.adminForm,"schoolId",t)},expression:"adminForm.schoolId"}},e._l(e.myCreateSchoolOptions.concat(e.schoolOptions),(function(t){return s("a-select-option",{key:t.id,attrs:{value:t.id,label:t.name}},[s("label",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("span",[e._v(e._s(t.name))]),s("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.country,expression:"schoolOption.country"}],attrs:{type:"primary"}},[e._v(e._s(t.country))])],1)])})),1)],1),s("a-form-model-item",{attrs:{prop:"country",label:"School Country"}},[s("a-select",{attrs:{"show-search":"",placeholder:"Please Select a Country","option-filter-prop":"children","filter-option":e.filterOptions,getPopupContainer:function(e){return e.parentNode}},model:{value:e.adminForm.country,callback:function(t){e.$set(e.adminForm,"country",t)},expression:"adminForm.country"}},e._l(e.countries,(function(t){return s("a-select-option",{key:"adminCountry_"+t.en,attrs:{value:t.en}},[e._v(" "+e._s(t.en)+" ")])})),1)],1),s("a-form-model-item",{attrs:{prop:"position",label:"Position"}},[s("a-select",{attrs:{placeholder:"Please Select a Position",getPopupContainer:function(e){return e.parentNode}},model:{value:e.adminForm.position,callback:function(t){e.$set(e.adminForm,"position",t)},expression:"adminForm.position"}},e._l(e.positions,(function(t){return s("a-select-option",{key:"position_"+t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),s("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:"Other position"===e.adminForm.position,expression:"adminForm.position === 'Other position'"}],staticStyle:{"margin-top":"20px"},attrs:{prop:"positionInput",label:""}},[s("a-input",{attrs:{placeholder:"Please Input Position"},model:{value:e.adminForm.positionInput,callback:function(t){e.$set(e.adminForm,"positionInput",t)},expression:"adminForm.positionInput"}})],1)],1),s("a-form-model-item",{attrs:{label:"I Would Like a Quote For"}},[s("a-radio-group",{model:{value:e.adminForm.planFor,callback:function(t){e.$set(e.adminForm,"planFor",t)},expression:"adminForm.planFor"}},[s("a-radio",{attrs:{value:"1"}},[e._v(" Plan for my school ")]),s("a-radio",{attrs:{value:"2"}},[e._v(" Plan for a group ")])],1)],1),s("a-form-model-item",{attrs:{label:"Notes"}},[s("a-input",{attrs:{placeholder:"Please Input Notes"},model:{value:e.adminForm.notes,callback:function(t){e.$set(e.adminForm,"notes",t)},expression:"adminForm.notes"}})],1),s("a-form-model-item",{staticStyle:{"text-align":"right"}},[s("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.confirmLoading},on:{click:e.doSaveAdminForm}},[e._v(" Send ")])],1)],1)],1)],1)])],1)},r=[],i=a("2909"),n=a("5530"),o=(a("d81d"),a("99af"),a("7db0"),a("b0c0"),a("4de4"),a("159b"),a("caad"),a("2532"),a("d3b7"),a("3ca3"),a("ddb0"),a("a15b"),a("8d90")),c=a("823b"),l=a("c24f"),u=a("d597"),d=a("caa4"),p=a("4e8a"),m=a("b842"),h=a("c418"),f=a("4d59"),g=a("e0dd"),v=a("b2b5"),y=a("f93e"),b=a("2f62"),I=a("6e84"),C=a("21fb"),T=a("4fcf"),S=T.debounce,w={name:"BasicSetting",mixins:[I["a"],C["a"]],components:{AvatarModal:o["a"],TagSetting:m["a"],VNodes:{functional:!0,render:function(e,t){return t.props.vnodes}}},data:function(){return{USER_MODE:y["Y"],loadSaving:!1,curriculumList:[],subjectList:[],gradeList:[],userInfo:{avatar:"",nickname:"",tempNickname:"",email:this.$store.getters.email,currentRole:"",createTime:null,curriculumId:this.$store.getters.bindCurriculum,curriculumName:null,gradeNameList:[],areaNameList:[],subjects:[],gradeIds:[],areaIds:[],others:null,tempOthers:null,age:5},currentArea:null,otherAreaId:null,currentCurriculum:null,curriculumOptions:[],subjectOptions:[],gradeOptions:[],areaOptions:[],customizedTags:[],customizedTagIds:[],loading:!0,editMode:!1,settingVisible:!1,disableQuestion:this.$store.getters.disableQuestion,subjectType:y["Q"],ageList:[5,6,7,8,9,10,11,12,13,14,15,16,17,18],userFormVisible:!1,adminFormVisible:!1,confirmLoading:!1,userForm:{layout:"vertical",firstname:"",lastname:"",email:"",principleFirstname:"",principleLastname:"",principleEmail:"",schoolId:void 0,schoolName:void 0,country:void 0,personalizedMessage:""},adminForm:{layout:"vertical",position:"Teacher",positionInfo:"Teacher",positionInput:"",firstname:"",lastname:"",email:"",schoolId:void 0,schoolName:void 0,country:void 0},countries:[],positions:["Teacher","School administrator","Principle/Deputy principle","Other position"],schoolOptions:[],myCreateSchoolOptions:[],createSchoolName:"",schoolUserInfo:{}}},watch:{"userInfo.curriculumId":function(e){c["info"]("userInfo.curriculumId change",e),this.loadSubjectByCurriculumId(e)}},computed:Object(n["a"])(Object(n["a"])({},Object(b["e"])({userInfoStore:function(e){return e.user.info},currentRole:function(e){return e.user.currentRole},userMode:function(e){return e.app.userMode},currentSchool:function(e){return e.user.currentSchool}})),{},{canEdit:function(){return this.userMode===y["Y"].SELF},rolesName:function(){var e=this;return this.userMode===y["Y"].SCHOOL?this.currentSchool.roleNames.map((function(t){return e.upperCaseName(t)})):[this.upperCaseName(this.userInfoStore.currentRole)]},linkedSchool:function(){return this.userMode===y["Y"].SELF?this.userInfoStore.schoolList.map((function(e){return e.schoolName})):this.currentSchool.schoolName?[this.currentSchool.schoolName]:[]},ifShowCreate:function(){var e=this,t=[].concat(Object(i["a"])(this.myCreateSchoolOptions),Object(i["a"])(this.schoolOptions)),a=t.find((function(t){return t.name===e.createSchoolName}));return this.createSchoolName&&!a},subjectOptionsFilter:function(){return"student"===this.$store.getters.currentRole?this.subjectOptions:this.subjectOptions?this.subjectOptions.filter((function(e){return e.subjectType===y["Q"].Skill||e.subjectType===y["Q"].LearnAndSkill})):[]},validatorRules:function(){return{firstname:[{required:!0,message:"Please Input First Name!"}],lastname:[{required:!0,message:"Please Input Last Name!"}],email:[{required:!0,message:"Please Input Email!"},{required:!1,type:"email",message:"The email is not correct!",trigger:"blur"}],principleFirstname:[{required:!0,message:"Please Input First Name!"}],principleLastname:[{required:!0,message:"Please Input Last Name!"}],principleEmail:[{required:!0,message:"Please Input Email!"},{required:!1,type:"email",message:"The email is not correct!",trigger:"blur"}],schoolId:[{required:!0,message:"Please Select a School!"}],country:[{required:!0,message:"Please Select a Country!"}]}},validatorAdminRules:function(){return{firstname:[{required:!0,message:"Please Input First Name!"}],lastname:[{required:!0,message:"Please Input Last Name!"}],email:[{required:!0,message:"Please Input Email!"},{required:!1,type:"email",message:"The email is not correct!",trigger:"blur"}],position:[{required:!0,message:"Please Select a Position!"}],positionInput:[{required:"Other position"===this.adminForm.position,message:"Please Input Position!"}],countryId:[{required:!0,message:"Please Select a Country!"}],country:[{required:!0,message:"Please Select a Country!"}]}}}),created:function(){this.debouncedSearchSchool=S(this.searchSchool,500),this.debounceGetUserInfo=S(this.getUserInfo,500),this.getUserInfo(this.currentSchool),this.initDict()},methods:{initDict:function(){var e=this;Object(v["b"])({}).then((function(t){e.countries=t}))},initBasic:function(){var e=this;this.userInfo.subjects=[],this.userInfo.gradeNameList=[],this.userInfo.areaNameList=[],this.userInfo.avatar=this.userInfoStore.avatar,this.userInfo.firstname=this.userInfoStore.firstname,this.userInfo.lastname=this.userInfoStore.lastname,this.userInfo.nickname=this.userInfoStore.nickname,this.userInfo.tempNickname=this.userInfoStore.nickname,this.userInfo.currentRole=this.userInfoStore.currentRole,this.userInfo.createTime=this.userInfoStore.createTime,this.userMode===y["Y"].SELF?(this.userInfo.curriculumId=this.userInfoStore.bindCurriculum,this.userInfo.subjects=this.userInfoStore.preference.subjects,this.userInfo.gradeIds=this.userInfoStore.preference.gradeIds):(this.userInfo.curriculumId=this.currentSchool.curriculumId||this.userInfoStore.bindCurriculum,this.userInfo.subjects=this.schoolUserInfo.classes?this.schoolUserInfo.classes.map((function(e){return e.subject})):[],this.userInfo.gradeIds=this.schoolUserInfo.grades),this.userInfo.areaIds=this.userInfoStore.preference.areaIds,this.userInfo.others=this.userInfoStore.preference.others,this.userInfo.age=this.userInfoStore.age,this.userForm.firstname=this.userInfoStore.firstname,this.userForm.lastname=this.userInfoStore.lastname,this.userForm.email=this.userInfoStore.email,this.adminForm.firstname=this.userInfoStore.firstname,this.adminForm.lastname=this.userInfoStore.lastname,this.adminForm.email=this.userInfoStore.email,this.customizedTagIds=[],this.$store.getters.userInfo.customizedTags.forEach((function(t){e.customizedTagIds.push({label:t.name,value:t.id})})),this.gradeOptions&&this.gradeOptions.length>0&&this.userInfo.gradeIds&&this.userInfo.gradeIds.length>0&&(this.userInfo.gradeNameList=this.gradeOptions.filter((function(t){return e.userInfo.gradeIds.includes(t.id)})).map((function(e){return e.name}))),this.$logger.info("user info loaded",this.userInfo)},initData:function(){var e=this;this.$logger.info("init data"),this.initBasic(),this.loading=!0,"teacher"===this.$store.getters.currentRole?Promise.all([Object(u["e"])(),Object(u["a"])({curriculumId:this.userInfo.curriculumId}),Object(u["f"])({curriculumId:this.userInfo.curriculumId}),Object(u["g"])()]).then((function(t){e.$logger.info("init data",t),t[0].code||(c["info"]("getAllCurriculums response",t[0]),e.curriculumOptions=t[0].result,e.curriculumOptions.forEach((function(t){t.id===e.userInfo.curriculumId&&(e.userInfo.curriculumName=t.name)}))),t[1].code||(e.userInfo.gradeNameList=[],e.gradeOptions=t[1].result,e.gradeOptions.forEach((function(t){-1!==e.userInfo.gradeIds.indexOf(t.id)&&e.userInfo.gradeNameList.push(t.name)}))),t[2].code||(e.userInfo.subjectNameList=[],c["info"]("SubjectTree response",t[2]),e.subjectOptions=t[2].result),t[3].code||(c["info"]("getCustomizedTags response",t[3]),e.customizedTags=t[3].result,e.customizedTags.forEach((function(e){e.selectable=0===e.children.length}))),e.loading=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1})):Promise.all([Object(u["d"])(),Object(h["SubjectStudentList"])()]).then((function(t){e.$logger.info("init data",t),t[0].code||(c["info"]("getAllAreas response",t[0]),e.areaOptions=t[0].result,e.areaOptions.forEach((function(t){-1!==e.userInfo.areaIds.indexOf(t.id)&&(e.userInfo.areaNameList.push(t.name),e.currentArea=t,"Others"===t.name&&(e.userInfo.tempOthers=e.userInfo.others&&e.userInfo.others.length?e.userInfo.others[0]:null)),"Others"===t.name&&(e.otherAreaId=t.id)}))),t[1].code||(c["info"]("SubjectTree response",t[1]),e.subjectOptions=t[1].result),e.loading=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},getUserInfo:function(e){var t=this;this.userInfoStore.username&&Object(p["h"])({schoolId:e.id,username:this.userInfoStore.username}).then((function(e){e.success&&(t.schoolUserInfo=Object(n["a"])({},e.result),t.initData())}))},handleSchoolChange:function(e){this.userMode===y["Y"].SCHOOL&&this.debounceGetUserInfo(e)},handleModeChange:function(e){this.debounceGetUserInfo(this.currentSchool)},handleSelectCurriculumOption:function(e){c["info"]("handleSelectCurriculumOption",e),null!==this.currentCurriculum&&this.currentCurriculum.id===e.id||(this.currentSubject=null,this.userInfo.subjectIds=[]),this.currentCurriculum=e},handleSelectAreaOption:function(e){c["info"]("handleSelectAreaOption",e),this.currentArea=e},loadSubjectByCurriculumId:function(e){var t=this;this.$logger.info("loadSubjectByCurriculumId "+e),this.userInfo.subjectIds=[],this.userInfo.gradeIds=[],Object(u["f"])({curriculumId:e}).then((function(e){c["info"]("subjectOptions",e.result),t.subjectOptions=e.result})),Object(u["a"])({curriculumId:e}).then((function(e){c["info"]("GetGradesByCurriculumId",e),t.gradeOptions=e.result,c["info"]("gradeOptions",t.gradeOptions)}))},setAvatar:function(e){var t=this;c["info"]("setAvatar "+e),this.userInfo.avatar=e;var a={avatar:this.userInfo.avatar,nickname:this.userInfo.tempNickname,id:this.$store.getters.userInfo.id};Object(l["e"])(a).then((function(e){t.$logger.info("update preference and edit user response",e)})).finally((function(){t.$store.dispatch("GetInfo").then((function(){t.initData()}))}))},saveDetail:function(){var e=this,t=null;if(this.loadSaving=!0,"expert"===this.$store.getters.currentRole?(t={areaIds:Array.isArray(this.userInfo.areaIds)?this.userInfo.areaIds:[this.userInfo.areaIds]},-1!==t.areaIds.indexOf(this.otherAreaId)&&(this.$logger.info("others ",this.userInfo.tempOthers),this.userInfo.tempOthers&&this.userInfo.tempOthers.length<=80?t.others=[this.userInfo.tempOthers]:this.$message.warn("illegal [others] contents"))):"teacher"===this.$store.getters.currentRole?t={curriculumId:this.userInfo.curriculumId,gradeIds:this.userInfo.gradeIds,subjects:this.userInfo.subjects,tagIds:this.customizedTagIds.map((function(e){return e.value}))}:"student"===this.$store.getters.currentRole&&(t={subjectIds:this.userInfo.subjectIds,age:this.userInfo.age}),this.$logger.info("tempNickname ",this.userInfo.tempNickname),this.userInfo.tempNickname&&this.userInfo.tempNickname.length<80){var a={avatar:this.userInfo.avatar,nickname:this.userInfo.tempNickname,id:this.$store.getters.userInfo.id,currentRole:this.userInfo.currentRole};this.$logger.info("update preference and edit user post data",t,a);var s=[Object(l["e"])(a)];this.canEdit&&s.push(Object(u["c"])(t)),Promise.all(s).then((function(t){e.$logger.info("update preference and edit user response",t)})).finally((function(){e.$store.dispatch("GetInfo").then((function(){e.initData(),e.editMode=!1,e.loadSaving=!1}))}))}else this.$message.warn("illegal nickname")},cancelDetail:function(){this.initBasic(),this.editMode=!1},onChange:function(e){e?e instanceof Array?(this.$emit("change",e.map((function(e){return e.value})).join(",")),this.treeValue=e):(this.$emit("change",e.value,e.label),this.treeValue=e):(this.$emit("change",""),this.treeValue=null)},onSearch:function(e){},handleSetting:function(){this.settingVisible=!0},onChangeSwitch:function(e){var t=this;this.disableQuestion=!e,Object(l["d"])({disableQuestion:this.disableQuestion}).then((function(e){t.$logger.info("UserSetting",e.result),e.success?t.$store.dispatch("GetInfo"):t.$message.error(e.message)})).finally((function(){}))},filterOptions:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},changeUserSchool:function(e){var t=[].concat(Object(i["a"])(this.myCreateSchoolOptions),Object(i["a"])(this.schoolOptions)),a=t.find((function(t){return t.id===e}));a&&(a.country&&(this.userForm.country=a.country),this.userForm.schoolName=a.name)},changeAdminSchool:function(e){var t=[].concat(Object(i["a"])(this.myCreateSchoolOptions),Object(i["a"])(this.schoolOptions)),a=t.find((function(t){return t.id===e}));a&&(a.country&&(this.adminForm.country=a.country),this.adminForm.schoolName=a.name)},doSaveUserForm:function(){var e=this;this.$refs.userForm.validate((function(t){if(t){var a=e.myCreateSchoolOptions.find((function(t){return t.id===e.userForm.schoolId})),s=e.schoolOptions.find((function(t){return t.id===e.userForm.schoolId}));a||s&&d["a"].country!==e.userForm.country?(e.confirmLoading=!0,Object(d["a"])({name:(a||s).name,country:e.userForm.country,principleEmail:e.userForm.principleEmail,principleFirstname:e.userForm.principleFirstname,principleLastname:e.userForm.principleLastname,curriculumId:e.userInfo.curriculumId}).then((function(t){t.success&&(a&&(a.id=t.result.id),s&&e.schoolOptions.push({id:t.result.id,name:t.result.name}),e.userForm.schoolId=t.result.id,e.userForm.schoolName=t.result.name,Object(f["a"])(e.userForm).then((function(t){t.success&&(e.$message.success("Send successfully"),e.userFormVisible=!1)})))})).finally((function(t){e.confirmLoading=!1}))):(e.confirmLoading=!0,Object(f["a"])(e.userForm).then((function(t){t.success&&(e.$message.success("Send successfully"),e.userFormVisible=!1)})).finally((function(t){e.confirmLoading=!1})))}}))},doSaveAdminForm:function(){var e=this;this.$refs.adminForm.validate((function(t){if(t){var a=e.myCreateSchoolOptions.find((function(t){return t.id===e.adminForm.schoolId})),s=e.schoolOptions.find((function(t){return t.id===e.adminForm.schoolId}));e.confirmLoading=!0,(a||s&&d["a"].country!==e.adminForm.country)&&(e.adminForm.schoolId=null),Object(g["a"])(e.adminForm).then((function(t){t.success&&(e.$message.success("Send successfully"),e.userFormVisible=!1,e.adminFormVisible=!1)})).finally((function(t){e.confirmLoading=!1}))}}))},handleSearchSchool:function(e){this.createSchoolName=e,this.debouncedSearchSchool(e)},searchSchool:function(e){var t=this;e&&Object(d["b"])({name:e}).then((function(e){c["info"]("schools",e),e.success?t.schoolOptions=e.result||[]:t.schoolOptions=[]}))},handleCreateSchool:function(e){var t={id:(new Date).getTime(),name:this.createSchoolName};this.myCreateSchoolOptions.push(t)},upperCaseName:function(e){return e.substr(0,1).toUpperCase()+e.substr(1)}}},O=w,k=(a("14c39"),a("0c7c")),L=Object(k["a"])(O,s,r,!1,null,"529b3fbe",null);t["default"]=L.exports},"21fb":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("b0c0");var s={data:function(){return{unwatch:null,routeName:this.$route.name}},created:function(){var e=this;this.unwatch=this.$store.watch((function(e){return e.user.currentSchool}),(function(t){return t&&e.$route.name===e.routeName&&e.handleSchoolChange(t)}))},computed:{},beforeDestroy:function(){this.unwatch&&this.unwatch()},methods:{handleSchoolChange:function(e){}}}},4992:function(e,t,a){e.exports=a.p+"img/default-avatar.db1c5445.png"},"4c77":function(e,t,a){"use strict";a("178d")},"4d59":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("b775"),r="schoolPrinciple",i={SchoolPrincipleList:"/classcipe/school/".concat(r,"/list"),SchoolPrincipleDelete:"/classcipe/school/".concat(r,"/delete"),SchoolPrincipleGetBySchoolId:"/classcipe/school/".concat(r,"/getBySchoolId"),SchoolPrincipleQueryById:"/classcipe/school/".concat(r,"/queryById"),SchoolPrincipleSave:"/classcipe/school/".concat(r,"/save")};function n(e){return Object(s["d"])({url:i.SchoolPrincipleSave,method:"post",data:e,params:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"4e8a":function(e,t,a){"use strict";a.d(t,"j",(function(){return r})),a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"k",(function(){return d})),a.d(t,"g",(function(){return p})),a.d(t,"m",(function(){return m})),a.d(t,"i",(function(){return h})),a.d(t,"h",(function(){return f})),a.d(t,"l",(function(){return g}));var s=a("b775"),r={getSchoolRoleList:"/classcipe/api/school/role/getRoles",getSchoolClassList:"/classcipe/api/school/class/list",addStaff:"/classcipe/api/school/user/addStaff",addStudent:"/classcipe/api/school/user/addStudents",getOrCreateInvite:"/classcipe/api/school/user/getOrCreateInvite",checkInvite:"/classcipe/api/school/user/checkInvite",acceptInvite:"/classcipe/api/school/user/acceptInvite",updateInvite:"/classcipe/api/school/user/updateInvite",getSchoolUsers:"/classcipe/api/school/user/getSchoolUsers",queryUser:"/classcipe/api/school/user/queryUser",updateUserStatus:"/classcipe/api/school/user/updateUserStatus",importStaff:"/classcipe/api/school/user/importStaffByExcel",importStudent:"/classcipe/api/school/user/importStudentByExcel",exportInvalidStaff:"/classcipe/api/school/user/exportInvalidStaff",exportInvalidStudent:"/classcipe/api/school/user/exportInvalidStudent",removeSchoolUser:"/classcipe/api/school/user/removeSchoolUser",getUserInfo:"/classcipe/api/school/user/getUserInfo",updateProfile:"/classcipe/api/school/user/updateProfile"};function i(e){return Object(s["d"])({url:r.getSchoolRoleList,method:"get",params:e})}function n(e){return Object(s["d"])({url:r.getSchoolClassList,method:"get",params:e})}function o(e){return Object(s["d"])({url:r.addStaff,method:"post",params:e})}function c(e){return Object(s["d"])({url:r.addStudent,method:"post",params:e})}function l(e){return Object(s["d"])({url:r.getOrCreateInvite,method:"post",params:e})}function u(e){return Object(s["d"])({url:r.checkInvite,method:"get",params:e})}function d(e){return Object(s["d"])({url:r.updateInvite,method:"post",params:e})}function p(e){return Object(s["d"])({url:r.getSchoolUsers,method:"get",params:e})}function m(e){return Object(s["d"])({url:r.updateUserStatus,method:"post",params:e})}function h(e){return Object(s["d"])({url:r.removeSchoolUser,method:"post",params:e})}function f(e){return Object(s["d"])({url:r.getUserInfo,method:"get",params:e})}function g(e){return Object(s["d"])({url:r.updateProfile,method:"post",data:e})}},"6e84":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("b0c0");var s={data:function(){return{unwatch:null,routeName:this.$route.name}},computed:{redirectUrl:function(){return"student"===this.$store.state.user.currentRole?"/student/main/my-task":"/account/info"}},created:function(){var e=this;this.unwatch=this.$store.watch((function(e){return e.app.userMode}),(function(t){t&&e.$route.name===e.routeName&&(e.handleModeChange(t),e.routeInMode())})),this.routeInMode()},beforeDestroy:function(){this.unwatch&&this.unwatch()},methods:{routeInMode:function(){this.$route.meta.mode&&this.$route.meta.mode!==this.$store.state.app.userMode&&this.$router.push({path:this.redirectUrl})},handleModeChange:function(e){}}}},7715:function(e,t,a){},"8d90":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.$t("account.settings.avatar.edit"),visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading,width:800,footer:null},on:{cancel:e.cancelHandel}},[a("a-row",[a("a-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[a("vue-cropper",{ref:"cropper",attrs:{img:e.options.img,info:!0,autoCrop:e.options.autoCrop,autoCropWidth:e.options.autoCropWidth,autoCropHeight:e.options.autoCropHeight,fixedBox:e.options.fixedBox},on:{realTime:e.realTime}})],1),a("a-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[a("div",{staticClass:"avatar-upload-preview"},[a("img",{style:e.previews.img,attrs:{src:e.previews.url}})])])],1),a("br"),a("a-row",[a("a-col",{attrs:{lg:2,md:2}},[a("a-upload",{attrs:{name:"file",beforeUpload:e.beforeUpload,showUploadList:!1}},[a("a-button",{attrs:{icon:"upload"}},[e._v(e._s(e.$t("account.settings.avatar.select-image")))])],1)],1),a("a-col",{attrs:{lg:{span:1,offset:2},md:2}},[a("a-button",{attrs:{icon:"plus"},on:{click:function(t){return e.changeScale(1)}}})],1),a("a-col",{attrs:{lg:{span:1,offset:1},md:2}},[a("a-button",{attrs:{icon:"minus"},on:{click:function(t){return e.changeScale(-1)}}})],1),a("a-col",{attrs:{lg:{span:1,offset:1},md:2}},[a("a-button",{attrs:{icon:"undo"},on:{click:e.rotateLeft}})],1),a("a-col",{attrs:{lg:{span:1,offset:1},md:2}},[a("a-button",{attrs:{icon:"redo"},on:{click:e.rotateRight}})],1),a("a-col",{attrs:{lg:{span:4,offset:6},md:4}},[a("a-space",[a("a-button",{on:{click:e.close}},[e._v(" Cancel ")]),a("a-button",{attrs:{type:"primary",disabled:e.confirmLoading,loading:e.confirmLoading},on:{click:e.uploadImage}},[e._v("Save")])],1)],1)],1)],1)},r=[],i=(a("ac1f"),a("1276"),a("466d"),a("ace4"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("99af"),a("fb6a"),a("25f0"),a("d0d0")),n={data:function(){return{visible:!1,id:null,confirmLoading:!1,fileList:[],uploading:!1,options:{img:"",autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},previews:{}}},methods:{edit:function(e){this.visible=!0,this.id=e},close:function(){this.id=null,this.visible=!1},cancelHandel:function(){this.close()},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},beforeUpload:function(e){var t=this,a=new FileReader;return a.readAsDataURL(e),a.onload=function(){t.options.img=a.result},!1},uploadImage:function(){var e=this;this.$refs.cropper.getCropData((function(t){var a=t.split(","),s=a[0].match(/:(.*?);/)[1],r=atob(a[1]),n=r.length,o=new Uint8Array(n);while(n--)o[n]=r.charCodeAt(n);e.model=!0,e.modelSrc=t;var c=s.split("/")[1],l=new File([o],"custom_image_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2),".").concat(c),{type:s});e.$logger.info("upload file",l),e.confirmLoading=!0,Object(i["a"])(e.$store.getters.userInfo.id,l,e.getProgressUpLoad,(function(t){e.onSuccess(l,t)}),!0)}))},getProgressUpLoad:function(e){this.$logger.info("getProgressUpLoad",e),this.confirmLoading=!0},onSuccess:function(e,t){this.$logger.info("upload success",e,t),this.$emit("ok",t),this.confirmLoading=!1,this.okHandel()},okHandel:function(){var e=this;e.confirmLoading=!0,setTimeout((function(){e.confirmLoading=!1,e.close(),e.$message.success("update avatar successfully!")}),2e3)},realTime:function(e){this.previews=e}}},o=n,c=(a("4c77"),a("0c7c")),l=Object(c["a"])(o,s,r,!1,null,"06163b63",null);t["a"]=l.exports},"9bb9":function(e,t,a){},acba:function(e,t,a){"use strict";a("7715")},b842:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag-setting",on:{click:e.trySaveTagCategory}},[a("a-spin",{attrs:{spinning:e.tagLoading}},[a("div",{staticClass:"tag-content-wrapper"},[a("div",{staticClass:"tag-tab",attrs:{id:"tag-tab"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.userTagList.length,expression:"userTagList.length"}],staticClass:"icon-left icon-nav",on:{click:function(t){return t.stopPropagation(),e.scrollLeft.apply(null,arguments)}}},[a("a-icon",{attrs:{type:"left"}})],1),e.userTagList.length?a("div",{staticClass:"user-tag-category-tabs",attrs:{id:"user-tag-category-tabs"}},e._l(e.userTagList,(function(t,s){return a("div",{key:s,class:{"user-tag-item":!0,"active-tab":t.name===e.currentActiveTagCategoryName},on:{click:function(a){return e.handleActiveTagCategory(t)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.editing,expression:"userTagItem.editing === false"}],staticClass:"action-icon"},[a("div",{staticClass:"tag-title-item"},[a("div",{staticClass:"tag-title",on:{dblclick:function(a){return e.handleEditTagCategory(t)}}},[e._v(e._s(t.name))]),a("div",{staticClass:"tag-delete-icon",on:{click:function(a){return e.handleDeleteTagCategory(t.name)}}},[a("a-icon",{style:{fontSize:"12px",color:"#15c39a"},attrs:{type:"delete"}})],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.editing,expression:"userTagItem.editing === true"}],staticClass:"editing-title",on:{click:function(e){e.stopPropagation()}}},[a("a-input",{staticClass:"my-tag-category-input",attrs:{placeholder:"Name your category",id:"tag-category-"+t.name},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleEnsureUpdateTagCategory(t)}},model:{value:e.currentEditTagCategoryName,callback:function(t){e.currentEditTagCategoryName=t},expression:"currentEditTagCategoryName"}})],1)])})),0):e._e(),a("div",{staticClass:"icon-right icon-nav"},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:e.userTagList.length,expression:"userTagList.length"}],attrs:{type:"right"},on:{click:function(t){return t.stopPropagation(),e.scrollRight.apply(null,arguments)}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.userTagList.length>=1,expression:"userTagList.length >= 1"}],staticClass:"icon-add"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[e._v(" Add tag type ")]),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:e.showAddCategory,expression:"showAddCategory"}],style:{fontSize:"18px",color:"#15c39a"},attrs:{type:"plus-circle"},on:{click:function(t){return t.stopPropagation(),e.handleInitCreateTagCategory.apply(null,arguments)}}})],2)],1)]),a("div",{staticClass:"user-tag-list-wrapper"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"skt-tag-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.userTagList.length,expression:"userTagList.length"}],staticClass:"skt-tag-list"},[a("div",{staticClass:"search-tag-wrapper tag-wrapper"},[e._l(e.displayTagList,(function(t){return a("div",{key:t,staticClass:"skt-tag-item"},[a("a-tag",{staticClass:"tag-item",class:{"active-tag-item":e.tagSearchList.indexOf(t)>-1}},[e._v(" "+e._s(t)+" "),a("a-icon",{attrs:{type:"close"},on:{click:function(a){return e.handleDeleteTag(t)}}})],1)],1)})),a("div",{staticClass:"create-tag-item-btn"},[a("a-input",{directives:[{name:"show",rawName:"v-show",value:e.createTagInputVisible,expression:"createTagInputVisible"}],ref:"search-input",staticClass:"search-input",attrs:{placeholder:"Create Tags"},on:{pressEnter:e.handleEnsureCreateTag,change:e.handleFilterSearchTag},nativeOn:{blur:function(t){return e.handleEnsureCreateTag.apply(null,arguments)}},model:{value:e.inputTag,callback:function(t){e.inputTag=t},expression:"inputTag"}}),a("div",{staticClass:"create-tag-item-wrapper"},[0!==e.displayTagList.length||e.createTagInputVisible?e._e():a("div",{staticClass:"no-tag-list"},[a("div",{staticClass:"no-tips"},[e._v(" There is no tag under the current type. ")])]),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[e._v(" Create tag ")]),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:!e.createTagInputVisible,expression:"!createTagInputVisible"}],style:{fontSize:"18px",color:"#15c39a"},attrs:{type:"plus-circle"},on:{click:e.handleShowSearchInput}})],2)],1)],1)],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.userTagList.length&&!e.tagLoading,expression:"userTagList.length === 0 && !tagLoading"}],staticClass:"no-tag-tips"},[a("no-more-resources",{attrs:{tips:""}}),a("div",{staticClass:"no-tips"},[e._v(" No tags type have been added yet, create one now ? ")]),a("div",{staticClass:"create-tag-btn"},[a("a-button",{attrs:{type:"primary",shape:"round"},on:{click:e.handleInitCreateTagCategory}},[e._v("Create")])],1)],1)])])])])])],1)},r=[],i=(a("b0c0"),a("159b"),a("498a"),a("d3b7"),a("7db0"),a("a630"),a("3ca3"),a("4de4"),a("d28d")),n=a("d33b4"),o=a("69b3"),c={name:"TagSetting",mixins:[n["a"]],components:{NoMoreResources:o["a"]},data:function(){return{currentActiveTagCategory:null,currentActiveTagCategoryName:"",currentEditTagCategoryName:"",userTagList:[],createTagName:"",tagLoading:!1,inputTag:"",tagSearchList:[],currentEditTagName:"",displayTagList:[],createTagInputVisible:!1}},computed:{showAddCategory:function(){return this.userTagList.every((function(e){return!1===e.editing}))}},created:function(){this.handleUpdateUserTags()},methods:{handleActiveTagCategory:function(e){this.$logger.info("handleActiveTagCategory",e),this.currentActiveTagCategoryName=e.name,this.currentActiveTagCategory=e,this.displayTagList=e.keywords,this.filterKeyword()},handleEditTagCategory:function(e){this.$logger.info("handleEditTagCategory",e),this.currentEditTagCategoryName=e.name,this.userTagList.forEach((function(e){e.editing=!1})),e.editing=!0},handleEnsureUpdateTagCategory:function(e){this.$logger.info("handleEnsureUpdateTagCategory "+this.currentEditTagCategoryName,e),this.currentEditTagCategoryName=this.currentEditTagCategoryName&&this.currentEditTagCategoryName.trim()?this.currentEditTagCategoryName.trim():"Untitled category "+(this.userTagList.length+1),e.newTag?this.handleCreateTagCategory(e):this.handleUpdateTagCategory(e)},handleCreateTagCategory:function(e){var t=this;this.$logger.info("handleCreateTagCategory",e),this.tagLoading=!0,Object(i["a"])({parentName:this.currentEditTagCategoryName}).then((function(e){t.$logger.info("add AddUserParentTag ",e.result),e.success?t.handleUpdateUserTags():(t.$message.error(e.message),t.tagLoading=!1)})).catch((function(){t.tagLoading=!1}))},handleUpdateTagCategory:function(e){var t=this;this.$logger.info("handleUpdateTagCategory",e),e.name&&this.currentEditTagCategoryName&&e.name!==this.currentEditTagCategoryName&&(this.tagLoading=!0,Object(i["k"])({name:e.name,newName:this.currentEditTagCategoryName}).then((function(e){t.$logger.info("UpdateUserParentTag response",e.result),e.success?t.handleUpdateUserTags():(t.$message.error(e.message),t.tagLoading=!1)})).catch((function(){t.tagLoading=!1})))},handleInitCreateTagCategory:function(){var e=this;this.$logger.info("handleInitCreateTagCategory"),this.currentEditTagName="Untitled category "+(this.userTagList.length+1);var t={name:this.currentEditTagName,editing:!0,newTag:!0,keywords:[]};this.currentActiveTagCategoryName=t.name,this.currentEditTagCategoryName=t.name,this.currentActiveTagCategory=t,this.displayTagList=[],this.userTagList.push(t),this.$nextTick((function(){var a=document.getElementById("tag-category-"+t.name);a&&a.focus(),e.scrollRight()}))},handleUpdateUserTags:function(){var e=this;this.tagLoading=!0,Object(i["c"])({}).then((function(t){if(e.$logger.info("FindCustomTags response",t.result),t.success){var a=[];t.result.userTags.forEach((function(e){e.name&&(e.editing=!1,e.newTag=!1,a.push(e))})),e.userTagList=a,e.$logger.info("userTagList",e.userTagList);var s=e.userTagList.find((function(t){return t.name&&e.currentActiveTagCategoryName===t.name}));s||(s=e.userTagList.find((function(t){return t.name&&e.currentEditTagCategoryName===t.name}))),!s&&e.userTagList.length>0&&(s=e.userTagList.find((function(e){return e.name}))),s&&(e.currentActiveTagCategoryName=s.name,e.currentActiveTagCategory=s,e.displayTagList=s.keywords),e.$logger.info("currentActiveTagCategory",e.currentActiveTagCategory,"displayTagList",e.displayTagList),e.filterKeyword()}else e.$message.error(t.message)})).finally((function(){e.tagLoading=!1}))},filterKeyword:function(){var e=this;if(this.currentActiveTagCategoryName){this.tagSearchList=[];var t=this.userTagList.find((function(t){return t.name===e.currentActiveTagCategoryName}));if(this.$logger.info("userTagItem",t),!t||t.keywords&&0===t.keywords.length)return;this.tagSearchList=Array.from(t.keywords),this.tagSearchList=this.tagSearchList.filter((function(t){return e.inputTag&&e.inputTag.trim()&&t.toLowerCase().indexOf(e.inputTag.toLowerCase())>-1})),this.$logger.info("tagSearchList",this.tagSearchList)}},handleEnsureCreateTag:function(){this.$logger.info("handleEnsureCreateTag",this.inputTag),this.createTagName=this.inputTag,this.inputTag="",this.createTagInputVisible=!1,this.handleCreateTagByInput()},handleCreateTagByInput:function(){var e=this;this.$logger.info("handleCreateTagByInput "+this.createTagName);var t=!1,a=this.userTagList.find((function(t){return t.name===e.currentActiveTagCategoryName}));if(a&&a.keywords){var s=a.keywords.find((function(t){return t.toLowerCase()===e.createTagName.toLowerCase()}));s&&(t=!0)}if(t)this.$message.warn("Already exist same name tag");else if(this.createTagName&&this.createTagName.trim()){var r={name:this.createTagName,parentName:this.currentActiveTagCategoryName};this.tagLoading=!0,Object(i["b"])(r).then((function(t){e.$logger.info("add AddUserTagNew ",t.result),t.success?(e.handleUpdateUserTags(),e.$message.success("Add tag successfully"),e.inputTag="",e.createTagName="",e.$emit("change-add-keywords",r)):e.$message.error(t.message)})).finally((function(){e.tagLoading=!1}))}else;},handleFilterSearchTag:function(){this.$logger.info("tag handleFilterSearchTag",this.inputTag),this.createTagName=this.inputTag,this.filterKeyword()},handleDeleteTag:function(e){var t=this;this.$createElement;this.$confirm({title:"Delete tag "+e,content:function(e){return e("div",{class:"my-delete-tips"},["Are you sure you want to delete this tag ? This is permanent and can not be undone ."])},bodyStyle:{padding:"10px"},okText:"Confirm",centered:!0,onOk:function(){t.handleEnsureDeleteTag(e)}})},handleEnsureDeleteTag:function(e){var t=this;this.$logger.info("handleEnsureDeleteTag "+this.currentActiveTagCategoryName+" "+e),this.tagLoading=!0,Object(i["l"])({parentName:this.currentActiveTagCategoryName,name:e}).then((function(e){t.$logger.info("add UserTagDeleteNew ",e.result),e.success?(t.handleUpdateUserTags(),t.$message.success("Delete successfully")):t.$message.error(e.message)})).finally((function(){t.tagLoading=!1}))},handleDeleteTagCategory:function(e){var t=this;this.$createElement;this.$confirm({title:"Delete tag type "+e,content:function(e){return e("div",{class:"my-delete-tips"},["Are you sure you want to delete this tag type ? After deleting, all tags under this type will be deleted as well."])},bodyStyle:{padding:"10px"},okText:"Confirm",centered:!0,onOk:function(){t.handleEnsureDeleteTagCategory(e)}})},handleEnsureDeleteTagCategory:function(e){var t=this;this.$logger.info("handleEnsureDeleteTagCategory "+e),this.tagLoading=!0,Object(i["l"])({parentName:e}).then((function(e){t.$logger.info("add UserTagDeleteNew ",e.result),e.success?(t.handleUpdateUserTags(),t.$message.success("Delete successfully")):t.$message.error(e.message)})).finally((function(){t.tagLoading=!1}))},handleShowSearchInput:function(){var e=this;this.createTagInputVisible=!0,this.$nextTick((function(){e.$refs["search-input"].focus()}))},scrollLeft:function(){this.$logger.info("scrollLeft");var e=document.getElementById("user-tag-category-tabs");e.scrollTo({left:e.scrollLeft-400,behavior:"smooth"})},scrollRight:function(){this.$logger.info("scrollRight");var e=document.getElementById("user-tag-category-tabs");e.scrollTo({left:e.scrollLeft+400,behavior:"smooth"})},trySaveTagCategory:function(){this.$logger.info("trySaveTagCategory");var e=this.userTagList.find((function(e){return e.editing&&e.name}));e?(this.$logger.info("trySaveTagCategory userTagItem",e),e.newTag?this.handleCreateTagCategory(e):this.handleUpdateTagCategory(e)):this.$logger.info("no editing tag category")}}},l=c,u=(a("acba"),a("0c7c")),d=Object(u["a"])(l,s,r,!1,null,"7e71e60a",null);t["a"]=d.exports},c418:function(e,t,a){"use strict";a.r(t),a.d(t,"subjectAPIUrl",(function(){return r})),a.d(t,"SubjectTree",(function(){return i})),a.d(t,"SubjectAddOrUpdate",(function(){return n})),a.d(t,"SubjectQueryById",(function(){return o})),a.d(t,"SubjectDelete",(function(){return c})),a.d(t,"SubjectDeleteBatch",(function(){return l})),a.d(t,"SubjectList",(function(){return u})),a.d(t,"SubjectStudentList",(function(){return d}));var s=a("b775"),r={SubjectTree:"/classcipe/api/subject/tree",SubjectAddOrUpdate:"/classcipe/api/subject/addOrUpdate",SubjectQueryById:"/classcipe/api/subject/queryById",SubjectDelete:"/classcipe/api/subject/delete",SubjectDeleteBatch:"/classcipe/api/subject/deleteBatch",SubjectList:"/classcipe/api/subject/list",SubjectStudentList:"/classcipe/api/subject/getStudentSubjects"};function i(e){return Object(s["d"])({url:r.SubjectTree,method:"get",params:e})}function n(e){return Object(s["d"])({url:r.SubjectAddOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(s["d"])({url:r.SubjectQueryById,method:"get",params:e})}function c(e){return Object(s["d"])({url:r.SubjectDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(s["d"])({url:r.SubjectDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(s["d"])({url:r.SubjectList,method:"get",params:e})}function d(e){return Object(s["d"])({url:r.SubjectStudentList,method:"get",params:e})}},d28d:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"k",(function(){return u})),a.d(t,"l",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"h",(function(){return m})),a.d(t,"i",(function(){return h})),a.d(t,"j",(function(){return f})),a.d(t,"g",(function(){return g}));var s=a("b775"),r={GetUserTags:"/classcipe/api/tag/getUserTags",UserTagAddOrUpdate:"/classcipe/api/tag/addOrUpdateUserTag",AddUserTagNew:"/classcipe/api/tag/addUserTagNew",AddUserParentTag:"/classcipe/api/tag/addUserParentTag",UpdateUserParentTag:"/classcipe/api/tag/updateUserParentTag",UserTagDelete:"/classcipe/api/tag/userTagDelete",UserTagDeleteNew:"/classcipe/api/tag/userTagDeleteNew",GetTreeByKey:"/classcipe/api/tag/getTreeByKey",GetGlobalTree:"/classcipe/api/tag/getTree",GetRootGlobalTag:"/classcipe/api/tag/getRootGlobalTag",GetGlobalTagKeywords:"/classcipe/api/tag/getTagKeywords",TagQueryById:"/classcipe/api/tag/queryById",TagDelete:"/classcipe/api/tag/delete",TagDeleteBatch:"/classcipe/api/tag/deleteBatch",FindCustomTags:"/classcipe/api/tag/findCustomTags",GetTagYearTips:"/classcipe/api/tag/getTagYearTips",QuerySourceTagByCategory:"/classcipe/api/tag/querySourceTagByParent",SchoolRootCustomList:"/classcipe/api/tag/rootSchoolCustomList",SchoolAddOrUpdateTag:"/classcipe/api/tag/addOrUpdate",SchoolTagSet:"/classcipe/api/tag/schoolTagSet",SchoolSelectLibrary:"/classcipe/api/tag/schoolSelectLibrary",SchoolTagDelete:"/classcipe/api/tag/schoolTagDelete",SchoolCommonTagList:"/classcipe/api/tag/schoolCommonTagList"};function i(e){return Object(s["d"])({url:r.GetTreeByKey,method:"get",params:e})}function n(e){return Object(s["d"])({url:r.GetTagYearTips,method:"get",params:e})}function o(e){return Object(s["d"])({url:r.GetGlobalTagKeywords,method:"get",params:e})}function c(e){return Object(s["d"])({url:r.AddUserTagNew,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(s["d"])({url:r.AddUserParentTag,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(s["d"])({url:r.UpdateUserParentTag,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(s["d"])({url:r.UserTagDeleteNew,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(s["d"])({url:r.FindCustomTags,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(s["d"])({url:r.SchoolSelectLibrary,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(e){return Object(s["d"])({url:r.SchoolTagDelete+"?id="+e.id,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(s["d"])({url:r.SchoolTagSet,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(s["d"])({url:r.SchoolCommonTagList,method:"get",params:e})}},d33b4:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("4de4"),a("b0c0");var s=a("823b"),r=a("3f76"),i=a("c1df"),n=a.n(i),o={data:function(){return{type2Name:{1:"Topic",2:"Unit Plan",3:"Material",4:"Task",5:"Lesson",6:"Evaluation"},browserDataType:{bigIdea:"bigIdea",sync:"sync",curriculum:"curriculum",subjectSpecificSkill:"subjectSpecificSkill",centurySkill:"centurySkill",all21Century:"all21Century",assessmentType:"assessmentType",idu:"idu"}}},created:function(){},computed:{getWeek:function(){if(2===this.rangeDate.length){var e="",t=Math.abs(parseInt(this.rangeDate[0].diff(this.rangeDate[1],"days")/7)),a=Math.abs(this.rangeDate[0].diff(this.rangeDate[1],"days"))%7;return t>0&&(e+=t>1?t+" weeks ":t+" week "),a>0&&(e+=a>1?a+" days ":a+" day "),e}return""}},methods:{tagIsExist:function(e,t){return t.filter((function(t){return t.toLowerCase()===e.toLowerCase()})).length>0},tagNameIsExist:function(e,t){return t.filter((function(t){return t.name.toLowerCase()===e.toLowerCase()})).length>0},handleOpenItem:function(e){e.type=this.type,s["info"]("handleEditItem",e),e.type===r["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+e.id,"_blank"):e.type===r["e"].task?window.open("/teacher/task-redirect/"+e.id,"_blank"):e.type===r["e"].pd?window.open("/teacher/pd-content-redirect/"+e.id,"_blank"):e.type===r["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+e.id,"_blank")},handleLocationItem:function(e){s["info"]("handleEditItem",e),e.type===r["e"]["unit-plan"]?window.location.href="/teacher/unit-plan-redirect/"+e.id:e.type===r["e"].task?window.location.href="/teacher/task-redirect/"+e.id:e.type===r["e"].pd?window.location.href="/teacher/pd-content-redirect/"+e.id:e.type===r["e"].evaluation&&(window.location.href="/teacher/evaluation-redirect/"+e.id)},getWeekByDate:function(e,t){if(this.$logger.info("getWeekByDate",e,t),e&&t){var a="",s=n()(t).diff(n()(e),"days");this.$logger.info("diffDays",s);var r=Math.floor(Math.abs(s/7)),i=Math.ceil(Math.abs(s%7));return r>0&&(a+=r>1?r+" weeks ":r+" week "),i>0&&(a+=i>1?i+" days ":i+" day "),this.$logger.info("getWeekByDate str",a),a}return""}}}},e0dd:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a("b775"),r="quotation",i={QuotationList:"/classcipe/api/school/".concat(r,"/list"),QuotationGetBySchoolId:"/classcipe/api/school/".concat(r,"/getBySchoolId"),QuotationAddOrUpdate:"/classcipe/api/school/".concat(r,"/addOrUpdate")};function n(e){return Object(s["d"])({url:i.QuotationAddOrUpdate,method:"post",data:e,params:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}}}]);