(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e94ae5e"],{"0db6":function(e,a,t){"use strict";t("a22e")},"5b0a":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{ref:"card",attrs:{bordered:!1}},[t("a-row",{staticClass:"class-header"},[t("a-col",{attrs:{span:"12"}},[t("a-space",[t("a-button",{staticClass:"nav-back-btn",attrs:{type:"link"},on:{click:function(a){return e.$router.go(-1)}}},[t("a-icon",{attrs:{type:"left"}}),e._v(" "+e._s(e.$t("teacher.add-unit-plan.back"))+" ")],1)],1)],1)],1),t("a-skeleton",{attrs:{loading:e.skeletonLoading,active:""}},[t("a-table",{attrs:{columns:e.columns,"data-source":e.data,pagination:!1,rowKey:"id"},scopedSlots:e._u([{key:"date",fn:function(a){return t("span",{},[e._v(" "+e._s(e._f("formatDate")(a)))])}},{key:"status",fn:function(a){return t("span",{},[e._v(" "+e._s(a)+" ")])}},{key:"action",fn:function(a,n){return t("span",{},[t("a",{on:{click:function(a){return e.handleProject(n)}}},[t("a-icon",{attrs:{type:"select"}})],1),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(a){return e.handleOpenDashboard(n)}}},[t("a-icon",{attrs:{type:"layout"}})],1),t("a-divider",{attrs:{type:"vertical"}}),"live"===n.status?[t("a-dropdown",[t("a-icon",{attrs:{type:"more"}}),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",[t("a",{on:{click:function(a){return e.handleTurnOnStudentPaced(n)}}},[t("a-icon",{attrs:{type:"usergroup-add"}}),e._v(" Turn On Student Paced ")],1)]),t("a-menu-item",[t("a",{on:{click:function(a){return e.handleEndSession(n)}}},[t("a-icon",{attrs:{type:"poweroff"}}),e._v(" End Session ")],1)]),t("a-menu-item",[t("a",{on:{click:function(a){return e.handleShowNameSessionModal(n)}}},[t("a-icon",{attrs:{type:"edit"}}),e._v(" Name This Session ")],1)])],1)],1)]:[t("a-dropdown",[t("a-icon",{attrs:{type:"more"}}),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",[t("a",{on:{click:function(a){return e.handleReopenSession(n)}}},[t("a-icon",{attrs:{type:"sync"}}),e._v(" Reopen Session ")],1)]),t("a-menu-item",[t("a",{on:{click:function(a){return e.handleShowNameSessionModal(n)}}},[t("a-icon",{attrs:{type:"edit"}}),e._v(" Name This Session ")],1)])],1)],1)]],2)}}])})],1),t("div",{staticClass:"loading-status"},[e.loading&&!e.skeletonLoading?t("a-spin"):e._e(),e.loadFinished?t("span",[e._v("All data loaded~")]):e._e()],1),t("a-modal",{attrs:{closable:!1,title:"Name This Session","ok-text":"ensure","cancel-text":"cancel"},on:{ok:function(a){return e.handleEnsureNameSession(e.nameSessionRecord)},cancel:e.handleCancelNameSession},model:{value:e.showNameSessionModal,callback:function(a){e.showNameSessionModal=a},expression:"showNameSessionModal"}},[t("a-input",{attrs:{placeholder:"Please input new session name","allow-clear":""},model:{value:e.nameSessionRecord.class_name,callback:function(a){e.$set(e.nameSessionRecord,"class_name",a)},expression:"nameSessionRecord.class_name"}})],1)],1)},s=[],o=(t("d3b7"),t("159b"),t("99af"),t("2af9")),i=t("c0d2"),d=t("8897"),r=t("823b"),c=t("9f06"),l=[{title:"Date",dataIndex:"date",scopedSlots:{customRender:"date"}},{title:"Status",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"Class name",dataIndex:"class_name"},{title:"Type",dataIndex:"type"},{title:"File name",dataIndex:"file_name"},{title:"Action",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],u={live:{status:"success",text:"Live"},"student-paced":{status:"processing",text:"Student-paced "},close:{status:"default",text:"Close"}},p={name:"Class",components:{STable:o["d"],Ellipsis:o["c"],PageHeaderWrapper:i["b"]},data:function(){return{columns:l,data:[],loading:!0,selectedRowKeys:[],selectedRows:[],showNameSessionModal:!1,nameSessionRecord:{class_id:"",class_name:""},skeletonLoading:!0,loadFailed:!1,cursor:0,currentPage:0,pageSize:50,total:0}},computed:{loadFinished:function(){return!this.loading&&this.total===this.data.length}},created:function(){this.loadTeacherClasses(this.pageSize,this.cursor,this.$route.query.slideId)},mounted:function(){window.addEventListener("scroll",this.loadTeacherClassesOnScroll,!0)},filters:{statusFilter:function(e){return u[e].text},statusTypeFilter:function(e){return u[e].status}},methods:{loadTeacherClasses:function(e,a,t){var n=this;r["info"]("loadTeacherClasses  limit:"+e+"cursor:"+a+" slideId:"+t),this.loading=!0,Object(c["FindMyClasses"])({limit:e,cursor:a,slideId:t}).then((function(t){r["info"]("findMyClasses",t.result.data),t.success&&(t.result.data.records.forEach((function(e){e.date=1e3*e.date})),n.data=e&&a?n.data.concat(t.result.data.records):t.result.data.records),n.total=t.result.data.total,r["info"]("cursor "+a+" data",n.data),n.loading=!1})).finally((function(){n.skeletonLoading=!1}))},loadTeacherClassesOnScroll:function(){var e=this.$refs.card.$el.getBoundingClientRect(),a=e.y,t=e.height,n=document.documentElement.clientHeight;n>=a+t&&!this.loading&&(r["info"]("到达底部"),this.data.length===this.total?r["info"]("数据全部加载完"):this.loadTeacherClasses(this.pageSize,this.data.length?this.data[this.data.length-1].id:void 0))},handleProject:function(e){r["info"]("handleProject",e),window.open(e.class_link_for_teacher)},handleOpenDashboard:function(e){r["info"]("handleOpenDashboard",e),window.open(e.dashboard_link)},handleEndSession:function(e){var a=this;r["info"]("handleEndSession",e),Object(d["d"])({class_id:e.class_id}).then((function(e){a.loadTeacherClasses(a.data.length)}))},handleShowNameSessionModal:function(e){this.showNameSessionModal=!0,this.nameSessionRecord.class_id=e.class_id,this.nameSessionRecord.class_name=e.class_name},handleEnsureNameSession:function(e){var a=this;r["info"]("handleEnsureNameSession",e),Object(d["e"])({class_id:e.class_id,class_name:this.nameSessionRecord.class_name}).then((function(e){a.showNameSessionModal=!1,a.nameSessionRecord.class_name="",a.nameSessionRecord.class_id="",a.loadTeacherClasses(a.data.length),a.$message.success("name session successfully!")}))},handleCancelNameSession:function(){this.showNameSessionModal=!1,this.nameSessionRecord.class_name="",this.nameSessionRecord.class_id=""},handleTurnOnStudentPaced:function(e){var a=this;r["info"]("handleTurnOnStudentPaced",e),Object(d["g"])({class_id:e.class_id}).then((function(e){a.loadTeacherClasses(a.data.length)}))},handleReopenSession:function(e){var a=this;r["info"]("handleReopenSession",e),Object(d["f"])({class_id:e.class_id}).then((function(e){a.loadTeacherClasses(a.data.length)}))}}},f=p,h=(t("0db6"),t("0c7c")),m=Object(h["a"])(f,n,s,!1,null,"9c2665ec",null);a["default"]=m.exports},8897:function(e,a,t){"use strict";t.d(a,"g",(function(){return o})),t.d(a,"d",(function(){return i})),t.d(a,"f",(function(){return d})),t.d(a,"e",(function(){return r})),t.d(a,"c",(function(){return c})),t.d(a,"b",(function(){return l})),t.d(a,"a",(function(){return u}));var n=t("ef87"),s={GetMyClasses:"/class/get_my_classes",TurnOnStudentPaced:"/class/turn_on_student_paced",EndSession:"/class/end_session",ReopenSession:"/class/reopen_session",NameSession:"/class/name_session",StartLesson:"/slide/start_lesson",GetStudents:"/class/get_students",GetStudentResponse:"/class/get_student_response",SlideGetAll:"/slide/get_all",GetClassMembers:"/class/get_class_members"};function o(e){return Object(n["a"])({url:s.TurnOnStudentPaced,method:"post",data:e})}function i(e){return Object(n["a"])({url:s.EndSession,method:"post",data:e})}function d(e){return Object(n["a"])({url:s.ReopenSession,method:"post",data:e})}function r(e){return Object(n["a"])({url:s.NameSession,method:"post",data:e})}function c(e){return Object(n["a"])({url:s.StartLesson,method:"post",data:e})}function l(e){return Object(n["a"])({url:s.GetStudents,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(n["a"])({url:s.GetStudentResponse,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"9f06":function(e,a,t){"use strict";t.r(a),t.d(a,"evaluationAPIUrl",(function(){return d})),t.d(a,"EvaluationAddOrUpdate",(function(){return r})),t.d(a,"EvaluationQueryById",(function(){return c})),t.d(a,"EvaluationQueryByIds",(function(){return l})),t.d(a,"EvaluationDelete",(function(){return u})),t.d(a,"FindMyClasses",(function(){return p})),t.d(a,"GetSessionEvaluationByClassId",(function(){return f})),t.d(a,"SaveSessionEvaluation",(function(){return h})),t.d(a,"QuerySessionEvaluation",(function(){return m})),t.d(a,"QuerySessionEvidence",(function(){return v})),t.d(a,"SaveSessionEvidence",(function(){return S})),t.d(a,"QuerySessionTakeaway",(function(){return y})),t.d(a,"SaveSessionTakeaway",(function(){return b})),t.d(a,"GetEvaluationFormSet",(function(){return _})),t.d(a,"SaveEvaluationFormSet",(function(){return g})),t.d(a,"GetEvaluationMode",(function(){return E})),t.d(a,"SaveEvaluationMode",(function(){return O}));var n=t("b775"),s=t("8ded"),o=t.n(s),i=t("9fb0"),d={addOrUpdate:"/classcipe/api/evaluation/addOrUpdate",delete:"/classcipe/api/evaluation/delete",deleteBatch:"/classcipe/api/evaluation/deleteBatch",list:"/classcipe/api/evaluation/list",queryById:"/classcipe/api/evaluation/queryById",queryByIds:"/classcipe/api/evaluation/queryByIds",findMyClasses:"/classcipe/api/evaluation/findMyClasses",GetSessionEvaluationByClassId:"/classcipe/api/evaluation/getSessionEvaluationByClassId",querySessionEvaluation:"/classcipe/api/evaluation/querySessionEvaluation",saveSessionEvaluation:"/classcipe/api/evaluation/saveSessionEvaluation",querySessionEvidence:"/classcipe/api/evaluation/querySessionEvidence",saveSessionEvidence:"/classcipe/api/evaluation/saveSessionEvidence",getEvaluationFormSet:"/classcipe/api/evaluation/getEvaluationFormSet",saveEvaluationFormSet:"/classcipe/api/evaluation/saveEvaluationFormSet",getEvaluationMode:"/classcipe/api/evaluation/getEvaluationMode",saveEvaluationMode:"/classcipe/api/evaluation/saveEvaluationMode",saveSessionTakeaway:"/classcipe/api/evaluation/saveSessionTakeaway",querySessionTakeaway:"/classcipe/api/evaluation/querySessionTakeaway"};function r(e){return Object(n["d"])({url:d.addOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(n["d"])({url:d.queryById,method:"get",params:e})}function l(e){return Object(n["d"])({url:d.queryByIds,method:"post",data:e})}function u(e){return Object(n["d"])({url:d.delete+"?id="+e.id,method:"post",data:e})}function p(e){var a=o.a.get(i["a"]);return e["token"]=a,Object(n["d"])({url:d.findMyClasses,method:"post",data:e})}function f(e){return Object(n["d"])({url:d.GetSessionEvaluationByClassId,method:"get",params:e})}function h(e){return Object(n["d"])({url:d.saveSessionEvaluation,method:"post",data:e})}function m(e){return Object(n["d"])({url:d.querySessionEvaluation,method:"post",data:e})}function v(e){return Object(n["d"])({url:d.querySessionEvidence,method:"post",data:e})}function S(e){return Object(n["d"])({url:d.saveSessionEvidence,method:"post",data:e})}function y(e){return Object(n["d"])({url:d.querySessionTakeaway,method:"post",data:e})}function b(e){return Object(n["d"])({url:d.saveSessionTakeaway,method:"post",data:e})}function _(e){return Object(n["d"])({url:d.getEvaluationFormSet,method:"post",data:e})}function g(e){return Object(n["d"])({url:d.saveEvaluationFormSet,method:"post",data:e})}function E(e){return Object(n["d"])({url:d.getEvaluationMode,method:"post",data:e})}function O(e){return Object(n["d"])({url:d.saveEvaluationMode,method:"post",data:e})}},a22e:function(e,a,t){},ef87:function(e,a,t){"use strict";t("d3b7");var n=t("bc3a"),s=t.n(n),o=t("8ded"),i=t.n(o),d=t("56cd"),r=(t("a27e"),t("9fb0")),c=t("823b"),l=s.a.create({baseURL:"https://api.app.classcipe.com",timeout:6e3}),u=function(e){if(e.response){var a=e.response.data;403===e.response.status&&d["a"].error({message:"Forbidden",description:a.message})}return Promise.reject(e)};l.interceptors.request.use((function(e){var a=i.a.get(r["a"]);return a?e.data?e.data["token"]||(e.data["token"]=a):e.data={token:a}:c["info"](r["a"]+" no set"),e}),u),l.interceptors.response.use((function(e){return e&&e.data&&e.data.code&&"ok"!==e.data.code&&200!==e.data.code&&c["error"](e.data),e.data}),u);a["a"]=l}}]);