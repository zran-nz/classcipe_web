(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10b256c8"],{"0a60":function(e,t,i){},"11fa":function(e,t,i){"use strict";i("eedc")},"1c40":function(e,t,i){"use strict";i("6c27")},2365:function(e,t,i){},"23f6":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o}));var a=i("b775"),n="api/contentGrade",s={save:"/classcipe/".concat(n,"/save"),getStatByContentId:"/classcipe/".concat(n,"/getStatByContentId")};function r(e){return Object(a["d"])({url:s.save,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a["d"])({url:s.getStatByContentId,method:"get",params:e})}},"295a":function(e,t,i){"use strict";i("ed14")},"2e09":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-space",[null!==e.currentBloom?i("a-popover",{attrs:{trigger:"click",overlayClassName:"choose-con",visible:e.bloomTagVisible},on:{visibleChange:e.handleBloomChange}},[i("template",{slot:"content"},[i("div",{staticClass:"choose-bar-title"},[e._v("Set Bloom's taxonomy")]),i("div",{staticClass:"choose-bar"},e._l(e.bloomLevel,(function(t,a){return i("div",{key:"bloom_"+t.title,staticClass:"choose-bar-item",style:{background:e.COLOR_LEVEL.BLOOM[a],height:e.HEIGHT[a]+"px"},on:{click:function(i){return e.changeLevel("bloomTag",t.title)}}},[i("label",[e._v(e._s(t.title))])])})),0)]),e.currentBloom?i("a-rate",{staticClass:"rate-bar-con super-small bloom-color",attrs:{tooltips:e.bloomLevelDesc,count:e.bloomLevel.length,value:e.currentBloomLevel,disabled:""}},[i("div",{attrs:{slot:"character"},slot:"character"},[i("div",{staticClass:"rate-bar"})])]):i("a-icon",{staticClass:"default-icon",attrs:{type:"plus-circle"}})],2):e._e(),null!==e.currentKnowledge?i("a-popover",{attrs:{trigger:"click",overlayClassName:"choose-con",visible:e.knowledgeDimensionVisible},on:{visibleChange:e.handleKnowledgeChange}},[i("template",{slot:"content"},[i("div",{staticClass:"choose-bar-title"},[e._v("Set Knowledge Dimensions")]),i("div",{staticClass:"choose-bar"},e._l(e.knowledgeLevel,(function(t,a){return i("div",{key:"knowledge_"+t.title,staticClass:"choose-bar-item",style:{background:e.COLOR_LEVEL.KNOWLEDGE[a],height:e.HEIGHT[a]+"px"},on:{click:function(i){return e.changeLevel("knowledgeDimension",t.title)}}},[i("label",[e._v(e._s(t.title))])])})),0)]),e.currentKnowledge?i("a-rate",{staticClass:"rate-bar-con super-small knowledge-color",attrs:{tooltips:e.knowledgeLevelDesc,count:e.knowledgeLevel.length,value:e.currentKnowledgeLevel,disabled:""}},[i("div",{attrs:{slot:"character"},slot:"character"},[i("div",{staticClass:"rate-bar"})])]):i("a-icon",{staticClass:"default-icon",attrs:{type:"plus-circle"}})],2):e._e()],1)},n=[],s=i("3835"),r=(i("d81d"),i("7db0"),i("d3b7"),i("3ca3"),i("ddb0"),i("f93e")),o=i("2934"),c={name:"RateLevel",props:{bloom:{type:String,default:null},knowledge:{type:String,default:null}},watch:{bloom:{handler:function(e){this.currentBloom=e}},knowledge:{handler:function(e){this.currentKnowledge=e}}},computed:{bloomLevelDesc:function(){return this.bloomLevel&&this.bloomLevel.length>0?this.bloomLevel.map((function(e){return e.title})):[]},currentBloomLevel:function(){var e=this;if(this.currentBloom&&this.bloomLevel.length>0){var t=this.bloomLevel.find((function(t){return t.text===e.currentBloom}));return t?parseInt(t.value):0}return 0},knowledgeLevelDesc:function(){return this.knowledgeLevel&&this.knowledgeLevel.length>0?this.knowledgeLevel.map((function(e){return e.title})):[]},currentKnowledgeLevel:function(){var e=this;if(this.currentKnowledge&&this.knowledgeLevel.length>0){var t=this.knowledgeLevel.find((function(t){return t.text===e.currentKnowledge}));return t?parseInt(t.value):0}return 0}},data:function(){return{COLOR_LEVEL:r["f"],bloomTagVisible:!1,knowledgeDimensionVisible:!1,HEIGHT:[20,27,35,45,56,67,78,100],currentBloom:this.bloom,currentKnowledge:this.knowledge,bloomLevel:[],knowledgeLevel:[]}},created:function(){this.initDict()},methods:{initDict:function(){var e=this;Promise.all([Object(o["a"])(r["k"]),Object(o["a"])(r["l"])]).then((function(t){var i=Object(s["a"])(t,2),a=i[0],n=i[1];a.success&&(e.bloomLevel=a.result),n.success&&(e.knowledgeLevel=n.result)}))},changeLevel:function(e,t){this[e+"Visible"]=!1,this.$emit("change",{type:e,title:t})},handleKnowledgeChange:function(e){this.knowledgeDimensionVisible=e},handleBloomChange:function(e){this.bloomTagVisible=e}}},l=c,d=(i("dec2"),i("295a"),i("0c7c")),u=Object(d["a"])(l,a,n,!1,null,"0a638762",null);t["a"]=u.exports},"3b34":function(e,t,i){"use strict";i("fde4")},4357:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"link-text",style:{"font-size":e.size+"px","line-height":e.size+"px",color:e.color,cursor:e.disabled?"not-allowed":"pointer"},on:{click:e.handleClick}},[e._t("prefix"),i("div",{staticClass:"text"},[e._v(" "+e._s(e.text)+" ")]),e._t("suffix")],2)},n=[],s=(i("a9e3"),{name:"CustomLinkText",props:{text:{type:String,default:null},color:{type:String,default:"#007A8E"},size:{type:Number,default:14},disabled:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},methods:{handleClick:function(){this.$emit("click")}}}),r=s,o=(i("671b"),i("0c7c")),c=Object(o["a"])(r,a,n,!1,null,"5d459e12",null);t["a"]=c.exports},"4362e":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cc-card"},[i("div",{staticClass:"cover-img relative-position",style:{backgroundImage:"url("+(e.content.image||"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+")",width:e.width+"rem"}},[e.innerDesc?i("div",{staticClass:"inner-mask"}):e._e(),e.innerDesc?i("div",{staticClass:"card-bottom-section q-pa-sm col q-gutter-xs inner-desc absolute-bottom"},[i("div",{staticClass:"type-tag"},[i("a-tag",{attrs:{color:"#15C39A"}},[e._v(e._s(e._f("type2Name")(e.content.type)))])],1),i("div",{staticClass:"card-title",attrs:{title:e.mainTitle}},[e._v(e._s(e.mainTitle))]),i("div",{staticClass:"card-sub-title",attrs:{title:e.subDescription}},[e._v(" "+e._s(e.subDescription)+" ")])]):e._e(),e.outerDesc?i("div",{staticClass:"inner-tag"},[i("a-tag",{attrs:{color:"#15C39A"}},[e._v(e._s(e._f("type2Name")(e.content.type)))])],1):e._e()]),e.outerDesc?i("div",{staticClass:"card-bottom-section outer-desc",style:{width:e.width+"rem"}},[i("div",{staticClass:"main-title-line"},[i("div",{staticClass:"main-title",attrs:{title:e.mainTitle}},[e._v(" "+e._s(e.mainTitle)+" ")]),i("div",{staticClass:"main-action"},[i("a-space",[e.content.star?i("a-rate",{staticClass:"cc-library-rate",attrs:{value:e.content.star||10,disabled:""}}):e._e(),e.content.star?e._e():i("div",{staticClass:"no-review"},[e._v("No reviews")]),i("div",{staticClass:"share-icon",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[i("a-tooltip",{attrs:{trigger:"click",getPopupContainer:function(e){return e.parentElement},placement:"bottomRight"}},[i("template",{slot:"title"},[i("div",{staticClass:"detail-share"},[i("share-button",{attrs:{link:e.wrapperLink(e.content),title:e.content.name}})],1)]),i("a-icon",{attrs:{type:"share-alt"}})],2)],1)],1)],1)]),i("div",{staticClass:"sub-desc",attrs:{title:e.subDescription}},[e._v(" "+e._s(e.subDescription)+" ")])]):e._e()])},n=[],s=(i("a9e3"),i("b0c0"),i("fb6a"),i("a4d3"),i("e01a"),i("99af"),i("5fc3")),r={name:"CardListItem",components:{ShareButton:s["a"]},props:{content:{type:Object,required:!0},width:{type:Number,default:20},innerDesc:{type:Boolean,default:!1},outerDesc:{type:Boolean,default:!0}},computed:{mainTitle:function(){var e=this.content.name||"Untitled";return e.slice(0,1).toUpperCase()+e.slice(1)},subDescription:function(){return this.content.description||""}},data:function(){return{}},created:function(){},methods:{wrapperLink:function(e){if(e&&e.id){var t=this.$classcipe.getContentTypeName(e.type);return"".concat("https://www.classcipe.com","/v2/").concat(t,"/").concat(e.id)}return""}}},o=r,c=(i("697f"),i("0c7c")),l=Object(c["a"])(o,a,n,!1,null,"5c48bee0",null);t["a"]=l.exports},"44f5":function(e,t,i){"use strict";i.d(t,"d",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return c})),i.d(t,"e",(function(){return l})),i.d(t,"c",(function(){return d}));var a=i("b775"),n="live",s={CreateQRCode:"/classcipe/api/v2/".concat(n,"/createQRCode"),FindWorkShops:"/classcipe/api/v2/".concat(n,"/findWorkShops"),SaveRegisteredRecord:"/classcipe/api/v2/".concat(n,"/saveRegisteredRecord"),CancelRegistered:"/classcipe/api/v2/".concat(n,"/cancelRegistered"),DetailBySessionId:"/classcipe/api/v2/".concat(n,"/detailBySessionId")};function r(e){return Object(a["d"])({url:s.FindWorkShops,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a["d"])({url:s.CreateQRCode,method:"get",responseType:"blob",params:e})}function c(e){return Object(a["d"])({url:s.CancelRegistered,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(a["d"])({url:s.SaveRegisteredRecord,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(a["d"])({url:s.DetailBySessionId,method:"get",params:e})}},"4f10":function(e,t,i){},"5fc3":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"share-button"},[i("div",{staticClass:"share-title"},[e._v("Share by QR code")]),i("a-spin",{attrs:{spinning:e.loading}},[i("div",{staticClass:"share-qrcode"},[i("img",{attrs:{src:e.qrCode,alt:"qrCode"}})])]),i("div",{staticClass:"share-divider"},[e._v("Or")]),i("div",{staticClass:"share-out"},[i("icon-font",{attrs:{type:"icon-Facebook"},on:{click:function(t){return e.share("fb")}}}),i("icon-font",{attrs:{type:"icon-Linkdin"},on:{click:function(t){return e.share("in")}}}),i("icon-font",{attrs:{type:"icon-Twitter"},on:{click:function(t){return e.share("twitter")}}}),i("icon-font",{attrs:{type:"icon-lianjie1"},on:{click:e.handleCopy}})],1)],1)},n=[],s=(i("99af"),i("9911"),i("d3b7"),i("44f5")),r={name:"ShareButton",props:{link:{type:String,required:!0},title:{type:String,default:"Share"}},data:function(){return{qrCode:"",loading:!1,shareLink:{fb:"https://www.facebook.com/share.php?title=".concat(this.title,"&u=").concat(encodeURIComponent(this.link)),in:"https://www.linkedin.com/shareArticle?mini=true&source=str&title=".concat(this.title,"&url=").concat(encodeURIComponent(this.link)),twitter:"https://twitter.com/intent/tweet?text=".concat(this.title,"&url=").concat(encodeURIComponent(this.link)),whatsapp:"https://api.whatsapp.com/send?text=".concat(encodeURIComponent(this.link))}}},created:function(){this.initQrcode()},methods:{initQrcode:function(){var e=this;this.link&&(this.loading=!0,Object(s["b"])({url:this.link}).then((function(t){var i=new FileReader;i.readAsDataURL(new Blob([t])),i.onload=function(){e.qrCode=i.result},i.onerror=function(){}})).finally((function(t){e.loading=!1})))},share:function(e){window.open(this.shareLink[e],"_blank")},handleCopy:function(){var e=this;this.$copyText(this.link).then((function(){e.$message.success("Copy successfully")})).catch((function(){e.$message.error("Copy failed")}))}}},o=r,c=(i("8190"),i("0c7c")),l=Object(c["a"])(o,a,n,!1,null,"35e10260",null);t["a"]=l.exports},"65a0":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"price-slider"},[i("a-slider",{attrs:{marks:e.marks,"tip-formatter":e.tipFormatter,min:e.min,max:e.max,disabled:e.disabled},model:{value:e.currentVal,callback:function(t){e.currentVal=t},expression:"currentVal"}}),i("div",{ref:"sliderLabel",staticClass:"slider-label"},e._l(e.lines,(function(t,a){return i("div",{key:"line_"+a,class:{"slider-label-item":!0,current:t.isCurrent,origin:t.isOrigin},style:{left:t.left,width:t.width}},[t.isCurrent?i("a-tooltip",{attrs:{title:e.tipFormatter(t.label)}},[e._v(e._s(t.label))]):[e._v(e._s(t.label))]],2)})),0)],1)},n=[],s=i("2909"),r=i("5530"),o=(i("a9e3"),i("d81d"),i("159b"),i("99af"),i("f93e")),c=i("2f62"),l=i("944d"),d={name:"PriceSlider",props:{current:{type:[Number],default:0},origin:{type:[Number],default:null},priceList:{type:Array,default:function(){return[{value:1,price:10},{value:10,price:8},{value:50,price:5}]}}},watch:{current:{handler:function(e){this.currentVal=e},immediate:!0}},data:function(){return{datas:this.priceList.map((function(e){return{value:e.value||e.registeredNum,price:e.price}})),result:null,currentVal:this.current,min:0,disabled:!0}},computed:Object(r["a"])(Object(r["a"])({},Object(c["e"])({device:function(e){return e.app.device}})),{},{PREFIX:function(){return this.device===o["j"].DESKTOP?" person":" p"},PREFIXS:function(){return this.device===o["j"].DESKTOP?" people":" p"},max:function(){var e=this.datas.map((function(e){return e.value})),t=Math.max.apply(Math,Object(s["a"])(e));return Math.max.apply(Math,Object(s["a"])(e))+Math.floor(t/this.datas.length)||1},marks:function(){var e=this,t=this.datas.map((function(e){return e.value})).sort(),i={};return t.forEach((function(t,a){i[t]=t+(t>1?e.PREFIXS:e.PREFIX)})),i},lines:function(){var e=this.datas.map((function(e){return e.price})),t=this.datas.concat([{value:this.max}]);t=Object(l["a"])(t,"value");var i=[],a=!0;null!==this.origin&&i.push({width:"",left:0,isOrigin:!0,label:"$"+this.origin});for(var n=1;n<t.length;n++){var s=(t[n-1].value-this.min)/(this.max-this.min)*100+"%";i.push({width:"",left:s,label:"$"+e[n-1]})}if(this.currentVal&&this.currentVal>0&&a){var r=Math.min((this.currentVal-this.min)/(this.max-this.min)*100,100)+"%";i.push({left:"calc(".concat(r," - 0px)"),width:"auto",label:this.currentVal,isCurrent:!0})}return i}}),methods:{tipFormatter:function(e){var t=this.currentVal>1?this.PREFIXS:this.PREFIX;return"".concat(this.currentVal," ").concat(t," already registered")}}},u=d,h=(i("1c40"),i("0c7c")),v=Object(h["a"])(u,a,n,!1,null,"2aef589c",null);t["a"]=v.exports},"671b":function(e,t,i){"use strict";i("adbe")},"68f0":function(e,t,i){var a=i("b2b7");e.exports={__esModule:!0,default:a.svgComponent({tag:"svg",attrsMap:{t:"1651925668470",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3847","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"48",height:"48"},children:[{tag:"defs"},{tag:"path",attrsMap:{d:"M0.558545 512a512 511.441455 90 1 0 1022.88291 0 512 511.441455 90 1 0-1022.88291 0Z",fill:"#686C7A","p-id":"3848"}},{tag:"path",attrsMap:{d:"M703.953455 622.703709a76.576582 76.576582 0 0 0-71.493819 44.776727l-238.312727-116.233309a97.745455 97.745455 0 0 0 11.357091-73.858327l149.690182-111.355345a79.872 79.872 0 0 0 48.965818 16.160581 79.387927 79.387927 0 1 0-78.568727-79.387927 83.781818 83.781818 0 0 0 5.957818 31.390255l-142.056727 104.429381a100.296145 100.296145 0 0 0-82.664728-47.085381A101.804218 101.804218 0 0 0 205.358545 493.549382v0.465454a101.673891 101.673891 0 0 0 101.096728 102.4h0.372363a105.304436 105.304436 0 0 0 56.599273-15.676509l261.771636 126.380218a78.773527 78.773527 0 1 0 78.75491-84.47069z",fill:"#FFFFFF","p-id":"3849"}}]})}},"697f":function(e,t,i){"use strict";i("d3b0")},"6b36":function(e,t,i){"use strict";i.r(t),i.d(t,"reviewsTaskAPIUrl",(function(){return n})),i.d(t,"ReviewsTaskSave",(function(){return s})),i.d(t,"ReviewsTaskList",(function(){return r})),i.d(t,"ReviewsTaskMyReview",(function(){return o})),i.d(t,"ReviewsTaskStats",(function(){return c})),i.d(t,"ReviewsTaskDelete",(function(){return l})),i.d(t,"ReviewsTaskMyReviewBySession",(function(){return d})),i.d(t,"getReviewsStatByContentId",(function(){return u}));var a=i("b775"),n={delete:"/classcipe/api/reviewsTask/delete",getMyReviews:"/classcipe/api/reviewsTask/library/getMyReviews",getMyReviewsSession:"/classcipe/api/reviewsTask/session/getMyReviews",getReviewsStat:"/classcipe/api/reviewsTask/library/getReviewsStat",list:"/classcipe/api/reviewsTask/list",save:"/classcipe/api/reviewsTask/save",getReviewsStatByContentId:"/classcipe/api/reviewsTask/getReviewsStatByContentId"};function s(e){return Object(a["d"])({url:n.save,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(a["d"])({url:n.list,method:"get",params:e})}function o(e){return Object(a["d"])({url:n.getMyReviews,method:"get",params:e})}function c(e){return Object(a["d"])({url:n.getReviewsStat,method:"get",params:e})}function l(e){return Object(a["d"])({url:n.delete+"?id="+e.id,method:"get",data:e})}function d(e){return Object(a["d"])({url:n.getMyReviewsSession,method:"get",params:e})}function u(e){return Object(a["d"])({url:n.getReviewsStatByContentId,method:"get",params:e})}},"6c27":function(e,t,i){},"70fe":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticClass:"content-preview-detail"},[e.showTopFixedHeader&&e.content&&e.displayFixedHeader?i("div",{staticClass:"top-fixed-header"},[i("div",{staticClass:"header-left"},[i("div",{staticClass:"back vertical-left",on:{click:e.handleClose}},[i("a-icon",{attrs:{type:"left"}}),i("div",{staticClass:"back-text"},[e._v(" Back ")])],1),i("div",{staticClass:"name"},[e._v(" "+e._s(e.content.name||"Untitled")+" ")])]),i("div",{staticClass:"header-right"},[i("div",{staticClass:"buy-button vertical-right"},[i("a-space",[e.liveWorkShopCode?i("a-space",[e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.REGISTERED.value===e.liveWorkShopSession.workshopsType?i("a-button",{staticClass:"buy-now",attrs:{type:"danger",shape:"round",loading:e.buyLoading},on:{click:e.handleCancelSession}},[e._v(" Cancel ")]):e._e(),e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.FEATURE.value===e.liveWorkShopSession.workshopsType?i("a-button",{attrs:{shape:"round",type:"primary",loading:e.buyLoading},on:{click:e.handleRegisterSession}},[e._v(" Register now ")]):e._e()],1):i("a-space",[e.content.createBy!==e.$store.getters.userInfo.email&&e.showBuyButton&&!e.content.buyed?i("a-button",{staticClass:"buy-now",attrs:{type:"danger",shape:"round",loading:e.buyLoading},on:{click:e.handleBuyItem}},[e._v(" Buy now ")]):e._e(),e.content.createBy!==e.$store.getters.userInfo.email&&e.showBuyButton&&e.content.buyed&&-1!=e.content.myContentId?i("a-button",{staticClass:"cc-dark-button",attrs:{shape:"round"},on:{click:e.handleEditBuy}},[e._v(" Edit ")]):e._e(),i("a-tooltip",{attrs:{title:"You have already purchased this content, please copy it directly",placement:"top"}},[e.content.createBy!==e.$store.getters.userInfo.email&&e.content.buyed&&-1==e.content.myContentId?i("a-button",{attrs:{shape:"round",type:"primary",loading:e.copyLoading,icon:"copy"},on:{click:e.handleDuplicateItem}},[e._v(" Copy ")]):e._e()],1)],1)],1)],1),i("div",{staticClass:"more-action vertical-right"},[i("a-tooltip",{attrs:{trigger:"click",getPopupContainer:function(e){return e.parentElement},placement:"bottomRight"}},[i("template",{slot:"title"},[i("div",{staticClass:"detail-share"},[e.content?i("share-button",{attrs:{link:e.wrapperLink(e.content),title:e.content.name}}):e._e()],1)]),i("icon-font",{staticClass:"detail-font",attrs:{type:"icon-share"}})],2)],1)])]):e._e(),i("div",{staticClass:"preview-carousel-wrapper"},[e.carouselContentLoading?e._e():i("preview-carousel",{attrs:{"page-object-list":e.thumbnailList,"video-list":e.videoList}}),e.carouselContentLoading?i("a-skeleton"):e._e()],1),e.content?i("div",{staticClass:"preview-main-content"},[i("a-space",{staticClass:"content-info-item"},[i("div",{staticClass:"cc-ellipsis cc-info-left",attrs:{span:"24"}},[i("h3",[e._v(e._s(e.content.name||"Untitled"))])]),i("div",{staticClass:"more-action",staticStyle:{"margin-bottom":"8px"}},[i("a-tooltip",{attrs:{trigger:"click",getPopupContainer:function(e){return e.parentElement},placement:"bottomRight"}},[i("template",{slot:"title"},[i("div",{staticClass:"detail-share"},[e.content?i("share-button",{attrs:{link:e.wrapperLink(e.content),title:e.content.name}}):e._e()],1)]),i("icon-font",{staticClass:"detail-font",attrs:{type:"icon-share"}})],2)],1)]),i("a-row",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.visibilityChanged,expression:"visibilityChanged"}],staticClass:"content-info-item"},[i("a-col",{staticClass:"cc-ellipsis cc-info-left",attrs:{lg:{span:12},xs:{span:24}}},[i("div",{staticClass:"author-info"},[i("div",{staticClass:"author-avatar"},[i("a-avatar",{staticStyle:{"background-color":"#517f3f"},attrs:{size:"large"}},[e._v(e._s((e.content.owner?e.content.owner.firstname+" "+e.content.owner.lastname:e.content.createBy).toUpperCase()[0]))])],1),i("div",{staticClass:"author-info-detail"},[i("div",{staticClass:"author-name"},[e._v(" "+e._s(e._f("upCaseFirst")(e.content.owner?e.content.owner.firstname+" "+e.content.owner.lastname:e.content.createBy))+" ")]),i("div",{staticClass:"rate-star"},[i("review-stat",{attrs:{contentId:e.contentId},on:{goReviews:e.goReviews}}),i("div",{staticClass:"star-info"},[i("a-space",{attrs:{size:15}},[i("div",{staticClass:"start-it",on:{click:e.handleFavorite}},[i("div",{staticClass:"favorite"},[e.favoriteFlag?i("a-icon",{style:{color:"#fb0"},attrs:{type:"heart",theme:"filled"}}):e._e(),e.favoriteFlag?e._e():i("a-icon",{attrs:{type:"heart"}})],1),i("div",{staticClass:"favorite-num"},[e._v(" "+e._s(e.stat&&e.stat.saved||0)+" ")])]),i("div",{staticClass:"sales"},[e._v(" Sales "+e._s(e.stat&&e.stat.sold||0)+" ")])])],1)],1)])])]),i("a-col",{staticClass:"cc-info-right",attrs:{lg:{span:12},xs:{span:24}}},[e.liveWorkShopCode?i("div",{staticClass:"live-price-info"},[e.showPriceInfo&&e.liveWorkShopSession&&e.liveWorkShopSession.priceList&&e.liveWorkShopSession.priceList.length>0?i("div",{staticClass:"share-live-price"},[e.liveWorkShopSession?i("price-slider",{attrs:{priceList:e.liveWorkShopSession.priceList,current:e.liveWorkShopSession.registeredNum,origin:e.liveWorkShopSession.price}}):e._e()],1):i("div"),e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.LUNCHEDBYME.value!==e.liveWorkShopSession.workshopsType?i("div",{staticClass:"buy-button"},[i("a-space",[e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.REGISTERED.value===e.liveWorkShopSession.workshopsType?i("a-button",{staticClass:"buy-now",attrs:{type:"danger",shape:"round",loading:e.buyLoading},on:{click:e.handleCancelSession}},[e._v(" Cancel ")]):e._e(),e.liveWorkShopSession&&e.WORK_SHOPS_TYPE.FEATURE.value===e.liveWorkShopSession.workshopsType?i("a-button",{attrs:{shape:"round",type:"primary",loading:e.buyLoading},on:{click:e.handleRegisterSession}},[e._v(" Register now ")]):e._e()],1)],1):e._e()]):i("div",{staticClass:"col-info"},[i("div",{staticClass:"price-info"},[i("a-space",{directives:[{name:"show",rawName:"v-show",value:e.showPriceInfo,expression:"showPriceInfo"}],attrs:{size:5}},[i("div",{staticClass:"discount-price"},[e._v(" $"+e._s(e.content.discountPrice||e.content.price||0)+" ")]),e.content.discountPrice!==e.content.price?i("div",{staticClass:"price_was"},[e._v("$"+e._s(e.content.price))]):e._e()])],1),i("div",{staticClass:"buy-button"},[i("a-space",[e.content.createBy!==e.$store.getters.userInfo.email&&e.showBuyButton&&!e.content.buyed?i("a-button",{staticClass:"buy-now",attrs:{type:"danger",shape:"round",loading:e.buyLoading},on:{click:e.handleBuyItem}},[e._v(" Buy now ")]):e._e(),e.content.createBy!==e.$store.getters.userInfo.email&&e.showEditButton&&e.content.buyed&&-1!=e.content.myContentId?i("a-button",{staticClass:"cc-dark-button",attrs:{shape:"round"},on:{click:e.handleEditBuy}},[e._v(" Edit ")]):e._e(),e.content.createBy!==e.$store.getters.userInfo.email&&e.content.buyed&&-1==e.content.myContentId?i("a-button",{attrs:{shape:"round",type:"primary",loading:e.copyLoading,icon:"copy"},on:{click:e.handleDuplicateItem}},[e._v(" Copy ")]):e._e()],1)],1)])])],1),i("div",{staticClass:"split-line"}),!e.liveWorkShopCode&&e.content.createBy===e.$store.getters.userInfo.email&&e.showEditButton?i("div",{staticClass:"edit-content"},[i("a-button",{staticClass:"cc-dark-button",staticStyle:{width:"90px"},attrs:{shape:"round"},on:{click:e.handleEdit}},[e._v("Edit")])],1):e._e(),e.content.customTags&&e.content.customTags.length?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Tags ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"preview-tag-list"},e._l(e.content.customTags,(function(t,a){return i("div",{key:a,staticClass:"skt-tag-item"},[i("a-tag",{staticClass:"tag-item cc-custom-tag-item"},[e._v(e._s(t.name||t.category))])],1)})),0)])])]:e._e(),e.content.name&&e.content.name.trim()&&e.contentType!==e.typeMap.pd?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title",style:{color:e.labelColor.name}},[e.content.type===e.typeMap.task?[e._v("Title")]:e._e(),e.content.type!==e.typeMap.task?[e._v("Name")]:e._e()],2),i("div",{staticClass:"content-detail"},[e._v(" "+e._s(e.content.name)+" ")])])]:e._e(),e.content.hasOwnProperty("videoList")&&e.contentType===e.typeMap.video?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Purpose of video ")]),i("div",{staticClass:"content-detail"},[0===e.content.contentType?[e._v("Student self-learning")]:e._e(),1===e.content.contentType?[e._v("Teacher PD")]:e._e()],2)])]:e._e(),e.content.goals&&e.contentType===e.typeMap.pd?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" PD goals ")]),i("div",{staticClass:"content-detail"},[e._v(" "+e._s(e.content.goals)+" ")])])]:e._e(),e.content.video&&e.contentType!==e.typeMap.video?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Video ")]),i("div",{staticClass:"content-detail video-detail"},[i("video",{staticClass:"video-item",attrs:{src:e.content.video,autoplay:"",controls:""}})])])]:e._e(),e.content.overview&&e.content.overview.trim()?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title",style:{color:e.labelColor.overview}},[e.content.type===e.typeMap.task?[e._v("Task Detail")]:e._e(),e.content.type!==e.typeMap.task?[e._v("Overview")]:e._e()],2),i("div",{staticClass:"content-detail"},[e._v(" "+e._s(e.content.overview)+" ")])])]:e._e(),e.content.inquiry&&e.content.inquiry.trim()?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title",style:{color:e.labelColor.bigIdea}},[e._v(" Big Idea/ Statement of Inquiry/ Central Idea ")]),i("div",{staticClass:"content-detail"},[e._v(" "+e._s(e.content.inquiry)+" ")])])]:e._e(),e.content.questions&&e.content.questions.length?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title",style:{color:e.labelColor.keyQuestion}},[e._v(" Key question(s) / Line(s) of inquiry ")]),i("div",{staticClass:"content-detail"},e._l(e.content.questions,(function(t,a){return i("div",{key:a,staticClass:"content-detail-item"},[e._v(" "+e._s(t.name)+" ")])})),0)])]:e._e(),e.content.subjectList&&e.content.subjectList.length?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Subject ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"subject-list vertical-left"},e._l(e.content.subjectList,(function(t){return i("div",{key:t,staticClass:"subject-item"},[e._v(" "+e._s(t)+" ")])})),0)])])]:e._e(),e.content.yearList||e.content.unitType||e.content.projectBased?i("a-row",{staticClass:"line-data"},[e.content.yearList.length?i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Grade Level : ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"subject-list vertical-left"},[e.content.yearList?[e._v(" "+e._s(e.content.yearList.join(", "))+" ")]:e._e()],2)])]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.content.unitType,expression:"content.unitType !== undefined"}],staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Unit type : ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"subject-list vertical-left"},[0===e.content.unitType?[e._v("Single-subject Unit")]:e._e(),1===e.content.unitType?[e._v("Integrated Unit")]:e._e()],2)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.content.projectBased,expression:"content.projectBased !== undefined"}],staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Project-based Unit : ")]),i("div",{staticClass:"content-detail"},[i("div",{staticClass:"subject-list vertical-left"},[0===e.content.projectBased?[e._v("No")]:e._e(),1===e.content.projectBased?[e._v("Yes")]:e._e()],2)])])]):e._e(),i("div",{staticClass:"line-split"}),e.content.learnOuts&&e.content.learnOuts.length?[i("div",{staticClass:"content-block"},[i("div",{staticClass:"content-title"},[e._v(" Learning Objectives ")]),i("div",{staticClass:"content-detail"},e._l(e.content.learnOuts,(function(t,a){return i("div",{key:a,staticClass:"content-detail-item"},[i("div",{staticClass:"desc-item"},[e._v(" "+e._s(t.desc)+" ")]),i("div",{staticClass:"more-tag vertical-left"},[i("div",{staticClass:"item-bloom-wrapper"},[i("div",{staticClass:"bloom-wrapper"},[i("label",[e._v("Bloom's Taxonomy:")]),i("rate-level",{attrs:{bloom:t.bloomTag||""}})],1),i("div",{staticClass:"bloom-wrapper"},[i("label",[e._v("Knowledge Dimensions:")]),i("rate-level",{attrs:{knowledge:t.knowledgeDimension||""}})],1)])]),i("div",{staticClass:"more-tag"},[t.commandTerms&&t.commandTerms.length>0?i("div",{staticClass:"item-command-wrapper"},[i("label",[e._v("Command Term:")]),i("div",{staticClass:"wrapper-list"},e._l(t.commandTerms,(function(t){return i("div",{key:t.name,staticClass:"wrapper-list-item"},[i("a-tag",{staticClass:"command-tag"},[i("div",{staticClass:"tag-content"},[e._v(e._s(t.name))])])],1)})),0)]):e._e(),t.knowledgeTags&&t.knowledgeTags.length>0?i("div",{staticClass:"item-command-wrapper"},[i("label",[e._v("Knowledge tag:")]),i("div",{staticClass:"wrapper-list"},e._l(t.knowledgeTags,(function(t){return i("div",{key:t.name,staticClass:"wrapper-list-item"},[i("a-tag",{staticClass:"command-tag knowledge"},[i("div",{staticClass:"tag-content"},[e._v(e._s(t.name))])])],1)})),0)]):e._e()])])})),0)])]:e._e(),i("div",{staticClass:"line-split"}),e.content.subTasks&&e.content.subTasks.length?i("div",{staticClass:"card-list-wrapper"},[i("div",{staticClass:"card-list-title"},[i("div",{staticClass:"sub-task-title"},[e._v(" Sub tasks ("+e._s(e.content.subTasks.length)+") ")]),i("div",{staticClass:"go-to-list"},[i("custom-link-text",{directives:[{name:"show",rawName:"v-show",value:e.content.createBy===e.$store.getters.email,expression:"content.createBy === $store.getters.email"}],attrs:{text:"Enter"},on:{click:e.goToSubTaskList}})],1)]),i("div",{staticClass:"scroll-left",on:{click:function(t){return e.scrollLeft("subTask")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"left-circle"}})],1),i("div",{staticClass:"scroll-right",on:{click:function(t){return e.scrollRight("subTask")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"right-circle"}})],1),i("div",{staticClass:"card-list",attrs:{id:"subTask"}},e._l(e.content.subTasks,(function(t,a){return i("div",{key:a,staticClass:"card-item",on:{click:function(i){return e.handlePreviewItem(t)}}},[i("card-list-item",{attrs:{content:t,width:16,"inner-desc":!1,"outer-desc":!0}})],1)})),0)]):e._e(),e.associateList.length?i("div",{staticClass:"card-list-wrapper"},[i("div",{staticClass:"card-list-title"},[i("div",{staticClass:"sub-task-title"},[e.associateList[0].type===e.typeMap["unit-plan"]?[e._v("Unit")]:e._e(),e.associateList[0].type===e.typeMap.task?[e._v("Task")]:e._e(),e._v(" ("+e._s(e.associateList.length)+") ")],2),i("div",{staticClass:"go-to-list"},[i("custom-link-text",{directives:[{name:"show",rawName:"v-show",value:e.content.createBy===e.$store.getters.email,expression:"content.createBy === $store.getters.email"}],attrs:{text:"Enter"},on:{click:e.goTLinkList}})],1)]),i("div",{staticClass:"scroll-left",on:{click:function(t){return e.scrollLeft("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"left-circle"}})],1),i("div",{staticClass:"scroll-right",on:{click:function(t){return e.scrollRight("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"right-circle"}})],1),i("div",{staticClass:"card-list",attrs:{id:"taskUnit"}},e._l(e.associateList,(function(t,a){return i("div",{key:a,staticClass:"card-item",on:{click:function(i){return e.handlePreviewItem(t)}}},[i("card-list-item",{attrs:{content:t,width:16,"inner-desc":!1,"outer-desc":!0}})],1)})),0)]):e._e(),e.associatePdList.length?i("div",{staticClass:"card-list-wrapper"},[i("div",{staticClass:"card-list-title"},[i("div",{staticClass:"sub-task-title"},[e._v(" PD Content ("+e._s(e.associatePdList.length)+") ")]),i("div",{staticClass:"go-to-list"})]),i("div",{staticClass:"scroll-left",on:{click:function(t){return e.scrollLeft("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"left-circle"}})],1),i("div",{staticClass:"scroll-right",on:{click:function(t){return e.scrollRight("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"right-circle"}})],1),i("div",{staticClass:"card-list",attrs:{id:"pd"}},e._l(e.associatePdList,(function(t,a){return i("div",{key:a,staticClass:"card-item",on:{click:function(i){return e.handlePreviewItem(t)}}},[i("card-list-item",{attrs:{content:t,width:16,"inner-desc":!1,"outer-desc":!0}})],1)})),0)]):e._e(),e.associateVideoList.length?i("div",{staticClass:"card-list-wrapper"},[i("div",{staticClass:"card-list-title"},[i("div",{staticClass:"sub-task-title"},[e._v(" Video ("+e._s(e.associateVideoList.length)+") ")]),i("div",{staticClass:"go-to-list"})]),i("div",{staticClass:"scroll-left",on:{click:function(t){return e.scrollLeft("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"left-circle"}})],1),i("div",{staticClass:"scroll-right",on:{click:function(t){return e.scrollRight("taskUnit")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"right-circle"}})],1),i("div",{staticClass:"card-list",attrs:{id:"video"}},e._l(e.associateVideoList,(function(t,a){return i("div",{key:a,staticClass:"card-item",on:{click:function(i){return e.handlePreviewItem(t)}}},[i("card-list-item",{attrs:{content:t,width:16,"inner-desc":!1,"outer-desc":!0}})],1)})),0)]):e._e(),e.associateRecommendList.length?i("div",{staticClass:"card-list-wrapper"},[e._m(0),i("div",{staticClass:"scroll-left",on:{click:function(t){return e.scrollLeft("associateRecommendList")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"left-circle"}})],1),i("div",{staticClass:"scroll-right",on:{click:function(t){return e.scrollRight("associateRecommendList")}}},[i("a-icon",{style:{fontSize:"22px",color:"#dddddd"},attrs:{type:"right-circle"}})],1),i("div",{staticClass:"card-list",attrs:{id:"associateRecommendList"}},e._l(e.associateRecommendList,(function(t,a){return i("div",{key:a,staticClass:"card-item",on:{click:function(i){return e.handlePreviewItem(t)}}},[i("card-list-item",{attrs:{content:t,width:16,"inner-desc":!1,"outer-desc":!0}})],1)})),0)]):e._e()],2):e._e(),i("div",{staticClass:"preview-extra-data"}),i("div",{staticClass:"preview-review",attrs:{id:"reviews"}},[i("a-row",{staticClass:"reviews-info"},["student"===e.currentRole?i("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[i("rate-by-percent",{attrs:{rates:e.reviewsStats}}),i("reviews-preview",{attrs:{id:e.contentId,role:"student",needSearch:!1,list:e.ReviewsTask.ReviewsTaskList,save:e.ReviewsTask.ReviewsTaskSave,del:e.ReviewsTask.ReviewsTaskDelete,myReview:e.ReviewsTask.ReviewsTaskMyReview}})],1):i("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[i("reviews-preview",{attrs:{id:e.contentId,role:"teacher",needSearch:!1,list:e.ReviewsTeacher.ReviewsTeacherList,save:e.ReviewsTeacher.ReviewsTeacherSave,del:e.ReviewsTeacher.ReviewsTeacherDelete,myReview:e.ReviewsTeacher.ReviewsTeacherMyReview,canEdit:e.reviewEdit,canCreate:e.reviewCreate&&!!(e.content&&e.content.createBy!==e.$store.getters.userInfo.email&&e.showBuyButton&&e.showCopyButton),canList:e.reviewList},on:{update:e.loadReviewStats}})],1)],1)],1),i("div",{staticClass:"preview-recommend"}),e.previewVisible?i("content-preview",{attrs:{"content-id":e.previewCurrentId,"content-type":e.previewType,"allow-preview-sub-content":!1,"review-edit":e.reviewEdit,"review-create":e.reviewCreate,"review-list":e.reviewList},on:{close:e.handlePreviewClose}}):e._e(),i("a-modal",{attrs:{title:null,closable:!1,"append-to-body":!0,"destroy-on-close":!1,width:"500px"},on:{ok:e.handleEnsureBuyStat,cancel:e.handleCancelBuyStat},model:{value:e.contentBuyStatVisible,callback:function(t){e.contentBuyStatVisible=t},expression:"contentBuyStatVisible"}},[i("modal-header",{attrs:{title:"Which age(s) will you use this resource with?"},on:{close:e.handleCancelBuyStat}}),i("div",{staticClass:"grade-list"},[i("div",{staticClass:"content-tag-list"},e._l(e.allAges,(function(t){return i("div",{key:t.value,staticClass:"content-tag",class:{"selected-tag":-1!==e.selectedGradeList.indexOf(t.value)},on:{click:function(i){return e.toggleSelectContentTag(t.value)}}},[e._v(" "+e._s(t.name)+" ")])})),0)])],1)],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-list-title"},[i("div",{staticClass:"sub-task-title"},[e._v(" Recommend ")])])}],s=i("1da1"),r=i("2909"),o=i("5530"),c=(i("96cf"),i("a9e3"),i("d81d"),i("a630"),i("3ca3"),i("d3b7"),i("6062"),i("ddb0"),i("4de4"),i("99af"),i("159b"),i("b0c0"),i("a434"),i("d350")),l=i("de0d"),d=i("980a"),u=i("b199"),h=i("093a"),v=i("c621"),p=i("9afb"),f=i("2f62"),m=i("823b"),g=i("ca00"),y=i("d33b"),b=i("1b72"),w=i("95c6"),C=i("4362e"),_=i("2f59"),k=i("68f0"),S=i.n(k),L=i("d980"),I=i("dd6e"),R=i("abb8"),x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-popover",{attrs:{placement:"bottom"}},[i("template",{slot:"content"},[i("div",{staticClass:"review-stat"},[i("div",{staticClass:"review-stat-content"},[i("div",{staticClass:"review-stat-overall"},[i("div",{staticClass:"content-title"},[e._v(" Ratings ")]),e._l(e.reviews,(function(t,a){return i("a-space",{key:"percent_"+a,staticClass:"detail-bar",attrs:{align:"center"}},[i("span",[e._v(e._s(t.reviewsScore)+" star(s)")]),i("a-progress",{style:{width:e.progressWidth},attrs:{strokeLinecap:"square",strokeColor:"#FFBB00",percent:t.reviewsScoreRate,showInfo:!1}}),i("span",[e._v(e._s(e._f("NumberFormat")(t.reviewsScoreCount)))])],1)}))],2),i("div",{staticClass:"review-stat-chart"},[i("div",{staticClass:"content-title"},[e._v(" Ages used with ")]),i("e-bar",{attrs:{datas:e.charts}})],1)]),i("div",{staticClass:"review-divider"}),i("div",{staticClass:"review-stat-opt"},[i("a-button",{attrs:{type:"link"},on:{click:e.goAll}},[e._v("See all reviews")])],1)])]),i("a-rate",{attrs:{value:e.reviewsStats.overall,"allow-half":"",disabled:""}})],2)},T=[],O=i("3835"),E=(i("07ac"),i("c2e5")),j=i("23f6"),B=i("6b36"),A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"chartGraph",style:{height:e.height}},[i("v-chart",{ref:"chart",attrs:{option:e.options,autoresize:!0}})],1)},D=[],F=i("22b4"),P=i("f95e"),M=i("6d8b"),$=i("9d57"),N=i("fdde"),V=i("7fae"),U=i("4f85"),W=i("1830"),q=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return Object(V["a"])(t,e),t.prototype.getInitialData=function(e,t){return Object(W["a"])(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e){var t=this.coordinateSystem;if(t&&t.clampData){var i=t.dataToPoint(t.clampData(e)),a=this.getData(),n=a.getLayout("offset"),s=a.getLayout("size"),r=t.getBaseAxis().isHorizontal()?0:1;return i[r]+=n+s/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(U["a"]);U["a"].registerClass(q);var z=q,G=i("8918"),H=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return Object(V["a"])(t,e),t.prototype.getInitialData=function(){return Object(W["a"])(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,i){return i.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Object(G["d"])(z.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(z),K=H,Q=i("cbe5"),Y=i("2dc5"),X=i("2306"),J=i("deab"),Z=i("c7a2"),ee=i("4aa2"),te=i("861c"),ie=i("7d6c"),ae=i("7837"),ne=i("88b3"),se=i("b0af"),re=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}return e}(),oe=function(e){function t(t){var i=e.call(this,t)||this;return i.type="sausage",i}return Object(V["a"])(t,e),t.prototype.getDefaultShape=function(){return new re},t.prototype.buildPath=function(e,t){var i=t.cx,a=t.cy,n=Math.max(t.r0||0,0),s=Math.max(t.r,0),r=.5*(s-n),o=n+r,c=t.startAngle,l=t.endAngle,d=t.clockwise,u=2*Math.PI,h=d?l-c<u:c-l<u;h||(c=l-(d?u:-u));var v=Math.cos(c),p=Math.sin(c),f=Math.cos(l),m=Math.sin(l);h?(e.moveTo(v*n+i,p*n+a),e.arc(v*o+i,p*o+a,r,-Math.PI+c,c,!d)):e.moveTo(v*s+i,p*s+a),e.arc(i,a,s,c,l,!d),e.arc(f*o+i,m*o+a,r,l-2*Math.PI,l-Math.PI,!d),0!==n&&e.arc(i,a,n,l,c,d)},t}(Q["b"]),ce=oe,le=i("e887"),de=i("5426"),ue=i("c775"),he=i("e86a");function ve(e,t){t=t||{};var i=t.isRoundCap;return function(t,a,n){var s=a.position;if(!s||s instanceof Array)return Object(he["c"])(t,a,n);var r=e(s),o=null!=a.distance?a.distance:5,c=this.shape,l=c.cx,d=c.cy,u=c.r,h=c.r0,v=(u+h)/2,p=c.startAngle,f=c.endAngle,m=(p+f)/2,g=i?Math.abs(u-h)/2:0,y=Math.cos,b=Math.sin,w=l+u*y(p),C=d+u*b(p),_="left",k="top";switch(r){case"startArc":w=l+(h-o)*y(m),C=d+(h-o)*b(m),_="center",k="top";break;case"insideStartArc":w=l+(h+o)*y(m),C=d+(h+o)*b(m),_="center",k="bottom";break;case"startAngle":w=l+v*y(p)+fe(p,o+g,!1),C=d+v*b(p)+me(p,o+g,!1),_="right",k="middle";break;case"insideStartAngle":w=l+v*y(p)+fe(p,-o+g,!1),C=d+v*b(p)+me(p,-o+g,!1),_="left",k="middle";break;case"middle":w=l+v*y(m),C=d+v*b(m),_="center",k="middle";break;case"endArc":w=l+(u+o)*y(m),C=d+(u+o)*b(m),_="center",k="bottom";break;case"insideEndArc":w=l+(u-o)*y(m),C=d+(u-o)*b(m),_="center",k="top";break;case"endAngle":w=l+v*y(f)+fe(f,o+g,!0),C=d+v*b(f)+me(f,o+g,!0),_="left",k="middle";break;case"insideEndAngle":w=l+v*y(f)+fe(f,-o+g,!0),C=d+v*b(f)+me(f,-o+g,!0),_="right",k="middle";break;default:return Object(he["c"])(t,a,n)}return t=t||{},t.x=w,t.y=C,t.align=_,t.verticalAlign=k,t}}function pe(e,t,i,a){if(Object(M["y"])(a))e.setTextConfig({rotation:a});else if(Object(M["s"])(t))e.setTextConfig({rotation:0});else{var n,s=e.shape,r=s.clockwise?s.startAngle:s.endAngle,o=s.clockwise?s.endAngle:s.startAngle,c=(r+o)/2,l=i(t);switch(l){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":n=c;break;case"startAngle":case"insideStartAngle":n=r;break;case"endAngle":case"insideEndAngle":n=o;break;default:return void e.setTextConfig({rotation:0})}var d=1.5*Math.PI-n;"middle"===l&&d>Math.PI/2&&d<1.5*Math.PI&&(d-=Math.PI),e.setTextConfig({rotation:d})}}function fe(e,t,i){return t*Math.sin(e)*(i?-1:1)}function me(e,t,i){return t*Math.cos(e)*(i?1:-1)}var ge=Math.max,ye=Math.min;function be(e,t){var i=e.getArea&&e.getArea();if(Object(de["a"])(e,"cartesian2d")){var a=e.getBaseAxis();if("category"!==a.type||!a.onBand){var n=t.getLayout("bandWidth");a.isHorizontal()?(i.x-=n,i.width+=2*n):(i.y-=n,i.height+=2*n)}}return i}var we=function(e){function t(){var i=e.call(this)||this;return i.type=t.type,i._isFirstFrame=!0,i}return Object(V["a"])(t,e),t.prototype.render=function(e,t,i,a){this._model=e,this._removeOnRenderedListener(i),this._updateDrawMode(e);var n=e.get("coordinateSystem");("cartesian2d"===n||"polar"===n)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,i):this._renderNormal(e,t,i,a))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){Object(X["traverseElements"])(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,i,a){var n,s=this.group,r=e.getData(),o=this._data,c=e.coordinateSystem,l=c.getBaseAxis();"cartesian2d"===c.type?n=l.isHorizontal():"polar"===c.type&&(n="angle"===l.dim);var d=e.isAnimationEnabled()?e:null,u=ke(e,c);u&&this._enableRealtimeSort(u,r,i);var h=e.get("clip",!0)||u,v=be(c,r);s.removeClipPath();var p=e.get("roundCap",!0),f=e.get("showBackground",!0),m=e.getModel("backgroundStyle"),g=m.get("borderRadius")||0,y=[],b=this._backgroundEls,w=a&&a.isInitSort,C=a&&"changeAxisOrder"===a.type;function _(e){var t=Te[c.type](r,e),i=Ne(c,n,t);return i.useStyle(m.getItemStyle()),"cartesian2d"===c.type&&i.setShape("r",g),y[e]=i,i}r.diff(o).add((function(t){var i=r.getItemModel(t),a=Te[c.type](r,t,i);if(f&&_(t),r.hasValue(t)&&xe[c.type](a)){var o=!1;h&&(o=Ce[c.type](v,a));var m=_e[c.type](e,r,t,a,n,d,l.model,!1,p);u&&(m.forceLabelAnimation=!0),je(m,r,t,i,a,e,n,"polar"===c.type),w?m.attr({shape:a}):u?Se(u,d,m,a,t,n,!1,!1):Object(J["a"])(m,{shape:a},e,t),r.setItemGraphicEl(t,m),s.add(m),m.ignore=o}})).update((function(t,i){var a=r.getItemModel(t),k=Te[c.type](r,t,a);if(f){var S=void 0;0===b.length?S=_(i):(S=b[i],S.useStyle(m.getItemStyle()),"cartesian2d"===c.type&&S.setShape("r",g),y[t]=S);var L=Te[c.type](r,t),I=$e(n,L,c);Object(J["f"])(S,{shape:I},d,t)}var R=o.getItemGraphicEl(i);if(r.hasValue(t)&&xe[c.type](k)){var x=!1;if(h&&(x=Ce[c.type](v,k),x&&s.remove(R)),R?Object(J["e"])(R):R=_e[c.type](e,r,t,k,n,d,l.model,!!R,p),u&&(R.forceLabelAnimation=!0),C){var T=R.getTextContent();if(T){var O=Object(ae["d"])(T);null!=O.prevValue&&(O.prevValue=O.value)}}else je(R,r,t,a,k,e,n,"polar"===c.type);w?R.attr({shape:k}):u?Se(u,d,R,k,t,n,!0,C):Object(J["f"])(R,{shape:k},e,t,null),r.setItemGraphicEl(t,R),R.ignore=x,s.add(R)}else s.remove(R)})).remove((function(t){var i=o.getItemGraphicEl(t);i&&Object(J["d"])(i,e,t)})).execute();var k=this._backgroundGroup||(this._backgroundGroup=new Y["a"]);k.removeAll();for(var S=0;S<y.length;++S)k.add(y[S]);s.add(k),this._backgroundEls=y,this._data=r},t.prototype._renderLarge=function(e,t,i){this._clear(),Fe(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),Fe(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&Object(se["a"])(e.coordinateSystem,!1,e),i=this.group;t?i.setClipPath(t):i.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,i){var a=this;if(t.count()){var n=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,i),this._isFirstFrame=!1;else{var s=function(e){var i=t.getItemGraphicEl(e),a=i&&i.shape;return a&&Math.abs(n.isHorizontal()?a.height:a.width)||0};this._onRendered=function(){a._updateSortWithinSameData(t,s,n,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,i){var a=[];return e.each(e.mapDimension(t.dim),(function(e,t){var n=i(t);n=null==n?NaN:n,a.push({dataIndex:t,mappedValue:n,ordinalNumber:e})})),a.sort((function(e,t){return t.mappedValue-e.mappedValue})),{ordinalNumbers:Object(M["F"])(a,(function(e){return e.ordinalNumber}))}},t.prototype._isOrderChangedWithinSameData=function(e,t,i){for(var a=i.scale,n=e.mapDimension(i.dim),s=Number.MAX_VALUE,r=0,o=a.getOrdinalMeta().categories.length;r<o;++r){var c=e.rawIndexOf(n,a.getRawOrdinalNumber(r)),l=c<0?Number.MIN_VALUE:t(e.indexOfRawIndex(c));if(l>s)return!0;s=l}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var i=t.scale,a=i.getExtent(),n=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);n<=s;++n)if(e.ordinalNumbers[n]!==i.getRawOrdinalNumber(n))return!0},t.prototype._updateSortWithinSameData=function(e,t,i,a){if(this._isOrderChangedWithinSameData(e,t,i)){var n=this._dataSort(e,i,t);this._isOrderDifferentInView(n,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:n}))}},t.prototype._dispatchInitSort=function(e,t,i){var a=t.baseAxis,n=this._dataSort(e,a,(function(i){return e.get(e.mapDimension(t.otherAxis.dim),i)}));i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:n})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,i=this._data;e&&e.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl((function(t){Object(J["d"])(t,e,Object(te["a"])(t).dataIndex)}))):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(le["a"]),Ce={cartesian2d:function(e,t){var i=t.width<0?-1:1,a=t.height<0?-1:1;i<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var n=e.x+e.width,s=e.y+e.height,r=ge(t.x,e.x),o=ye(t.x+t.width,n),c=ge(t.y,e.y),l=ye(t.y+t.height,s),d=o<r,u=l<c;return t.x=d&&r>n?o:r,t.y=u&&c>s?l:c,t.width=d?0:o-r,t.height=u?0:l-c,i<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),d||u},polar:function(e,t){var i=t.r0<=t.r?1:-1;if(i<0){var a=t.r;t.r=t.r0,t.r0=a}var n=ye(t.r,e.r),s=ge(t.r0,e.r0);t.r=n,t.r0=s;var r=n-s<0;if(i<0){a=t.r;t.r=t.r0,t.r0=a}return r}},_e={cartesian2d:function(e,t,i,a,n,s,r,o,c){var l=new Z["a"]({shape:Object(M["m"])({},a),z2:1});if(l.__dataIndex=i,l.name="item",s){var d=l.shape,u=n?"height":"width";d[u]=0}return l},polar:function(e,t,i,a,n,s,r,o,c){var l=!n&&c?ce:ee["a"],d=new l({shape:a,z2:1});d.name="item";var u=Ee(n);if(d.calculateTextPosition=ve(u,{isRoundCap:l===ce}),s){var h=d.shape,v=n?"r":"endAngle",p={};h[v]=n?0:a.startAngle,p[v]=a[v],(o?J["f"]:J["a"])(d,{shape:p},s)}return d}};function ke(e,t){var i=e.get("realtimeSort",!0),a=t.getBaseAxis();if(i&&"category"===a.type&&"cartesian2d"===t.type)return{baseAxis:a,otherAxis:t.getOtherAxis(a)}}function Se(e,t,i,a,n,s,r,o){var c,l;s?(l={x:a.x,width:a.width},c={y:a.y,height:a.height}):(l={y:a.y,height:a.height},c={x:a.x,width:a.width}),o||(r?J["f"]:J["a"])(i,{shape:c},t,n,null);var d=t?e.baseAxis.model:null;(r?J["f"]:J["a"])(i,{shape:l},d,n)}function Le(e,t){for(var i=0;i<t.length;i++)if(!isFinite(e[t[i]]))return!0;return!1}var Ie=["x","y","width","height"],Re=["cx","cy","r","startAngle","endAngle"],xe={cartesian2d:function(e){return!Le(e,Ie)},polar:function(e){return!Le(e,Re)}},Te={cartesian2d:function(e,t,i){var a=e.getItemLayout(t),n=i?Be(i,a):0,s=a.width>0?1:-1,r=a.height>0?1:-1;return{x:a.x+s*n/2,y:a.y+r*n/2,width:a.width-s*n,height:a.height-r*n}},polar:function(e,t,i){var a=e.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function Oe(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function Ee(e){return function(e){var t=e?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(e)}function je(e,t,i,a,n,s,r,o){var c=t.getItemVisual(i,"style");o||e.setShape("r",a.get(["itemStyle","borderRadius"])||0),e.useStyle(c);var l=a.getShallow("cursor");l&&e.attr("cursor",l);var d=o?r?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":r?n.height>=0?"bottom":"top":n.width>=0?"right":"left",u=Object(ae["c"])(a);Object(ae["e"])(e,u,{labelFetcher:s,labelDataIndex:i,defaultText:Object(ue["b"])(s.getData(),i),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:d});var h=e.getTextContent();if(o&&h){var v=a.get(["label","position"]);e.textConfig.inside="middle"===v||null,pe(e,"outside"===v?d:v,Ee(r),a.get(["label","rotate"]))}Object(ae["f"])(h,u,s.getRawValue(i),(function(e){return Object(ue["a"])(t,e)}));var p=a.getModel(["emphasis"]);Object(ie["E"])(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),Object(ie["D"])(e,a),Oe(n)&&(e.style.fill="none",e.style.stroke="none",Object(M["k"])(e.states,(function(e){e.style&&(e.style.fill=e.style.stroke="none")})))}function Be(e,t){var i=e.get(["itemStyle","borderColor"]);if(!i||"none"===i)return 0;var a=e.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),s=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(a,n,s)}var Ae=function(){function e(){}return e}(),De=function(e){function t(t){var i=e.call(this,t)||this;return i.type="largeBar",i}return Object(V["a"])(t,e),t.prototype.getDefaultShape=function(){return new Ae},t.prototype.buildPath=function(e,t){for(var i=t.points,a=this.baseDimIdx,n=1-this.baseDimIdx,s=[],r=[],o=this.barWidth,c=0;c<i.length;c+=3)r[a]=o,r[n]=i[c+2],s[a]=i[c+a],s[n]=i[c+n],e.rect(s[0],s[1],r[0],r[1])},t}(Q["b"]);function Fe(e,t,i,a){var n=e.getData(),s=n.getLayout("valueAxisHorizontal")?1:0,r=n.getLayout("largeDataIndices"),o=n.getLayout("size"),c=e.getModel("backgroundStyle"),l=n.getLayout("largeBackgroundPoints");if(l){var d=new De({shape:{points:l},incremental:!!a,silent:!0,z2:0});d.baseDimIdx=s,d.largeDataIndices=r,d.barWidth=o,d.useStyle(c.getItemStyle()),t.add(d),i&&i.push(d)}var u=new De({shape:{points:n.getLayout("largePoints")},incremental:!!a,z2:1});u.baseDimIdx=s,u.largeDataIndices=r,u.barWidth=o,t.add(u),u.useStyle(n.getVisual("style")),Object(te["a"])(u).seriesIndex=e.seriesIndex,e.get("silent")||(u.on("mousedown",Pe),u.on("mousemove",Pe)),i&&i.push(u)}var Pe=Object(ne["c"])((function(e){var t=this,i=Me(t,e.offsetX,e.offsetY);Object(te["a"])(t).dataIndex=i>=0?i:null}),30,!1);function Me(e,t,i){for(var a=e.baseDimIdx,n=1-a,s=e.shape.points,r=e.largeDataIndices,o=[],c=[],l=e.barWidth,d=0,u=s.length/3;d<u;d++){var h=3*d;if(c[a]=l,c[n]=s[h+2],o[a]=s[h+a],o[n]=s[h+n],c[n]<0&&(o[n]+=c[n],c[n]=-c[n]),t>=o[0]&&t<=o[0]+c[0]&&i>=o[1]&&i<=o[1]+c[1])return r[d]}return-1}function $e(e,t,i){if(Object(de["a"])(i,"cartesian2d")){var a=t,n=i.getArea();return{x:e?a.x:n.x,y:e?n.y:a.y,width:e?a.width:n.width,height:e?n.height:a.height}}n=i.getArea();var s=t;return{cx:n.cx,cy:n.cy,r0:e?n.r0:s.r0,r:e?n.r:s.r,startAngle:e?s.startAngle:0,endAngle:e?s.endAngle:2*Math.PI}}function Ne(e,t,i){var a="polar"===e.type?ee["a"]:Z["a"];return new a({shape:$e(t,i,e),silent:!0,z2:0})}var Ve=we;function Ue(e){e.registerChartView(Ve),e.registerSeriesModel(K),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,M["h"]($["b"],"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Object($["a"])("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Object(N["a"])("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(e,t){var i=e.componentType||"series";t.eachComponent({mainType:i,query:e},(function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)}))}))}var We=i("9394"),qe=i("2da7"),ze=i("ff32"),Ge=i("104d"),He=i("4b2a"),Ke=i("3094"),Qe=i("5c7f"),Ye=i("e0d4");Object(F["a"])([P["a"],Ue,We["a"],qe["a"],ze["a"],Ge["a"],He["a"],Ke["a"]]);var Xe={name:"EBar",mixins:[Ye["a"]],props:{color:{type:Array,default:function(){return["#EF4136","#FFBD00","#4484CF","#946EDB","#8D7B7B","#54C7B0","#F47920","#194283","#59C754"]}},height:{type:[String,Number],default:"100%"},datas:{type:Object,default:function(){}}},components:{"v-chart":Qe["a"]},watch:{datas:{handler:function(e,t){this.initData(e)},immediate:!0,deep:!0}},mounted:function(){this.datas.length>0&&this.initData(this.datas)},data:function(){return{options:null}},methods:{initData:function(e){var t=this,i=[],a=[];e&&e.data&&e.data.forEach((function(e){i.push(e.label),a.push(e.value)})),this.options={color:this.color,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:20,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:i,axisLabel:{textStyle:{color:"#999",fontSize:10}},axisLine:{show:!1},axisTick:{show:!1},boundaryGap:!0,splitLine:{show:!1}}],yAxis:[{type:"value",axisTick:{show:!1}}],series:[{cursor:"default",name:e.title,showAllSymbol:!0,type:"bar",label:{normal:{show:!0,position:"top",color:"#333",formatter:function(e){return t.formatNum(e.value,0)}}},data:a}]}}}},Je=Xe,Ze=(i("7a29"),i("0c7c")),et=Object(Ze["a"])(Je,A,D,!1,null,"553b8881",null),tt=et.exports,it=i("85b1"),at={name:"ReviewStat",components:{EBar:tt},props:{contentId:{type:[String,Number],required:!0}},watch:{contentId:function(e){this.id=e,this.handleInit()}},data:function(){return{loading:!1,id:this.contentId,progressWidth:"80px",reviews:[],charts:[],reviewsStats:{avgReviewsScore:0,reviewsScoreStatDetail:[],reviewsCount:0,effectiveness:0,overall:0,quality:0,studentsEngagement:0}}},created:function(){this.initData(),this.loadReviewStats(),this.handleInit=Object(it["a"])(this.initData,300)},methods:{initData:function(){var e=this;this.loading=!0,Promise.all([Object(E["byOverall"])({purchasesId:this.id}),Object(j["b"])({contentId:this.id})]).then((function(t){var i=Object(O["a"])(t,2),a=i[0],n=i[1];if(0===a.code&&a.result){var s=[5,4,3,2,1],r=Object.values(a.result).reduce((function(e,t){return e+t?t:0}),0);e.reviews=s.map((function(e){return{reviewsScore:e,reviewsScoreCount:a.result[e]||0,reviewsScoreRate:r?(a.result[e]||0)/r*100:0}}))}if(0===n.code&&n.result){for(var o=[],c=3;c<19;c++)o.push({label:c,value:n.result[c]||0});e.charts={title:"User(s)",data:o}}})).finally((function(){e.loading=!1}))},loadReviewStats:function(){var e=this,t=null;t="student"===this.currentRole?B["ReviewsTaskStats"]:E["ReviewsTeacherStats"],t&&t({taskId:this.id,purchasesId:this.id}).then((function(t){t.success&&(e.reviewsStats=t.result)}))},goAll:function(){document.querySelector(".ant-popover").style.display="none",this.$emit("goReviews")}}},nt=at,st=(i("3b34"),Object(Ze["a"])(nt,x,T,!1,null,"b4cf1724",null)),rt=st.exports,ot=i("65a0"),ct=i("f93e"),lt=i("5fc3"),dt=i("4357"),ut=i("ce85"),ht=i("f031"),vt=i("48fb"),pt=i("60427"),ft=i("2e09"),mt=i("82bf"),gt=i("44f5"),yt=i("9fb0"),bt={name:"ContentPreviewDetail",components:{RateLevel:ft["a"],ModalHeader:pt["a"],ContentPreview:ut["a"],CustomLinkText:dt["a"],ShareButton:lt["a"],CardListItem:C["a"],PreviewCarousel:c["a"],ShareIcon:S.a,RateByPercent:L["a"],ReviewsPreview:I["a"],ReviewScore:R["a"],ReviewStat:rt,PriceSlider:ot["a"]},props:{contentId:{type:[String,Number],required:!0},contentType:{type:[String,Number],required:!0},showBuyButton:{type:Boolean,default:!0},showCopyButton:{type:Boolean,default:!0},showEditButton:{type:Boolean,default:!0},displayFixedHeader:{type:Boolean,default:!0},showPriceInfo:{type:Boolean,default:!0},allowPreviewSubContent:{type:Boolean,default:!0},liveWorkShopCode:{type:String,default:""},reviewEdit:{type:Boolean,default:!0},reviewCreate:{type:Boolean,default:!0},reviewList:{type:Boolean,default:!0}},mixins:[y["a"],_["a"],ht["a"]],data:function(){return{contentLoading:!0,WORK_SHOPS_TYPE:ct["ab"],content:null,carouselContentLoading:!0,thumbnailList:[],pageObjectIds:[],videoList:[],associateList:[],associatePdList:[],associateVideoList:[],favoriteFlag:!1,typeMap:this.$classcipe.typeMap,buyLoading:!1,copyLoading:!1,showTopFixedHeader:!1,stat:null,reviewsStats:{avgReviewsScore:0,reviewsScoreStatDetail:[],reviewsCount:0,effectiveness:0,overall:0,quality:0,studentsEngagement:0},RATE_TOOLTIPS:ct["y"],ReviewsTask:B,ReviewsTeacher:E,contentBuyStatVisible:!1,selectedGradeList:[],associateRecommendList:[],liveWorkShopSession:null}},computed:Object(o["a"])(Object(o["a"])({},Object(f["e"])({userMode:function(e){return e.app.userMode},currentRole:function(e){return e.user.currentRole}})),{},{allAges:function(){for(var e=[],t=3;t<19;t++)e.push({name:t+" years",value:t+""});return e},lastChangeSavedTime:function(){if(this.content){m["info"]("lastChangeSavedTime data",this.content);var e=this.content.updateTime||this.content.createTime;if(e)return Object(g["formatLocalUTC"])(e)}return""},inActiveTypes:function(){var e=[];return this.itemsList&&(e=this.itemsList.map((function(e){return e.type}))),Array.from(new Set(e))},realRecommendList:function(){var e=this,t=this.associateList.filter((function(t){return t.sourceFromUser!==e.$store.getters.email}));return[].concat(Object(r["a"])(this.associateRecommendList),Object(r["a"])(t))},realAssociateList:function(){var e=this;return this.associateList.filter((function(t){return t.createBy===e.$store.getters.email}))},labelColor:function(){return this.content.type===this.typeMap["unit-plan"]?{name:"#01b4ff",overview:"#6dee1c",bigIdea:"#ffec19",keyQuestion:"#ff2600"}:{name:"#000",overview:"#000",bigIdea:"#000",keyQuestion:"#000"}}}),created:function(){this.loadDetail()},methods:{loadDetail:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.contentLoading=!0,t.next=4,e.loadDetailByContentIDType(e.contentId,e.contentType);case 4:return i=t.sent,0===i.code?(e.content=i.result,e.favoriteFlag=e.content.isFavorite,e.loadExtraData()):e.$message.error(i.message),t.next=8,e.loadStat();case 8:return t.prev=8,e.contentLoading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})))()},loadStat:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(vt["b"])({contentId:e.contentId});case 2:i=t.sent,e.$logger.info("statRet",i),e.stat=i.result;case 5:case"end":return t.stop()}}),t)})))()},loadDetailByContentIDType:function(e,t){var i=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=parseInt(t),t!==i.$classcipe.typeMap["unit-plan"]){a.next=5;break}return a.abrupt("return",Object(l["UnitPlanQueryById"])({id:e}));case 5:if(t!==i.$classcipe.typeMap.task){a.next=9;break}return a.abrupt("return",Object(u["TaskQueryById"])({id:e}));case 9:if(t!==i.$classcipe.typeMap.video){a.next=13;break}return a.abrupt("return",Object(h["c"])({id:e}));case 13:if(t!==i.$classcipe.typeMap.pd){a.next=15;break}return a.abrupt("return",Object(d["c"])({id:e}));case 15:case"end":return a.stop()}}),a)})))()},loadExtraData:function(){var e=parseInt(this.contentType);e===this.$classcipe.typeMap.task||e===this.$classcipe.typeMap.pd?(this.initVideoList(),this.loadSlideData()):(this.carouselContentLoading=!0,this.initVideoList(),this.initImgList(),this.carouselContentLoading=!1),this.loadAssociateData(),this.loadAssociateRecommendData(),this.content.presentationId&&this.getClassInfo(this.content.presentationId),this.liveWorkShopCode&&this.initLiveDetail()},initLiveDetail:function(){var e=this;Object(gt["c"])({sessionId:this.liveWorkShopCode}).then((function(t){t.success&&(e.liveWorkShopSession=t.result)}))},loadReviewStats:function(){var e=this,t=null;t="student"===this.currentRole?B["ReviewsTaskStats"]:E["ReviewsTeacherStats"],t&&t({taskId:this.contentId,purchasesId:this.contentId}).then((function(t){t.success&&(e.reviewsStats=t.result)}))},initVideoList:function(){this.videoList=[],this.content.video&&this.videoList.push({url:this.content.video}),this.content.coverVideo&&this.videoList.push({url:this.content.coverVideo})},initImgList:function(){this.thumbnailList=[],this.content.image&&this.thumbnailList.push({contentUrl:this.content.image}),0===this.thumbnailList.length&&this.thumbnailList.push({contentUrl:"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png"}),this.$logger.info("initImgList",this.thumbnailList)},loadSlideData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.carouselContentLoading=!0,t.next=4,Object(v["d"])({taskId:e.contentId});case 4:return i=t.sent,e.thumbnailList=i.result.pageObjects,e.pageObjectIds=i.result.pageObjectIds,t.next=9,e.loadMaterialData();case 9:0===e.thumbnailList.length&&(e.content.image?e.thumbnailList.push({contentUrl:e.content.image}):e.thumbnailList.push({contentUrl:"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png"})),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](0);case 14:return t.prev=14,e.carouselContentLoading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,12,14,17]])})))()},loadAssociateData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i=location.href.indexOf("library")>0||location.href.indexOf("my-published")>0,t.next=4,Object(p["GetAssociate"])({id:e.contentId,type:e.contentType,published:i?1:0,preview:!0});case 4:a=t.sent,n=a.result.owner,e.associateList=[],n.forEach((function(t){t.contents.forEach((function(t){t.type===e.$classcipe.typeMap.task&&e.associateList.push(t),t.type===e.$classcipe.typeMap["unit-plan"]&&e.associateList.push(t),t.type===e.$classcipe.typeMap.pd&&e.associatePdList.push(t),t.type===e.$classcipe.typeMap.video&&e.associateVideoList.push(t)}))})),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},loadAssociateRecommendData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p["GetAssociateRecommend"])({id:e.contentId,type:e.contentType});case 3:i=t.sent,e.associateRecommendList=i.result,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},loadMaterialData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(b["d"])({slideId:e.content.presentationId,pageIds:e.pageObjectIds});case 3:i=t.sent,i.result.relements.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),i.result.items.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),e.elementsList=i.result.relements,e.itemsList=i.result.items,t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},handleFavorite:function(){this.favoriteFlag?this.handleRemoveFavorite():this.handleAddFavorite()},handleAddFavorite:function(){var e=this;Object(w["FavoritesAdd"])({sourceId:this.contentId,sourceType:this.contentType}).then((function(t){e.$logger.info("FavoritesAdd ",t),e.favoriteFlag=!e.favoriteFlag})).finally(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadStat();case 2:case"end":return t.stop()}}),t)}))))},handleRemoveFavorite:function(){var e=this;Object(w["FavoritesDelete"])({sourceId:this.contentId,sourceType:this.contentType}).then((function(t){e.$logger.info("handleRemoveFavorite ",t),e.favoriteFlag=!e.favoriteFlag})).finally(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadStat();case 2:case"end":return t.stop()}}),t)}))))},handleEdit:function(){this.$logger.info("handleEdit",this.contentType),this.content.type===this.typeMap["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+this.content.id,"_blank"):this.content.type===this.typeMap.task?window.open("/teacher/task-redirect/"+this.content.id,"_blank"):this.content.type===this.typeMap.pd?window.open("/teacher/pd-content-redirect/"+this.content.id,"_blank"):this.contentType===this.typeMap.video&&window.open("/teacher/video-redirect/"+this.content.id,"_blank")},handleEditBuy:function(){this.$logger.info("handleEdit",this.content.myContentId),this.content.type===this.typeMap["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+this.content.myContentId,"_blank"):this.content.type===this.typeMap.task?window.open("/teacher/task-redirect/"+this.content.myContentId,"_blank"):this.content.type===this.typeMap.pd?window.open("/teacher/pd-content-redirect/"+this.content.myContentId,"_blank"):this.contentType===this.typeMap.video&&window.open("/teacher/video-redirect/"+this.content.myContentId,"_blank")},handleDuplicateItem:function(){var e=this;if(this.$logger.info("handleDuplicateItem",this.content),this.content.createBy!==this.$store.getters.userInfo.email)return this.handleBuyItem("Copy successfully");this.$confirm({title:"Confirm to copy",content:"Are you sure to copy "+this.content.name+" ?",centered:!0,onOk:function(){e.copyLoading=!0,Object(p["Duplicate"])({id:e.content.id,type:e.content.type}).then((function(t){t.code!==e.ErrorCode.ppt_google_token_expires&&t.code!==e.ErrorCode.ppt_forbidden?(e.$logger.info("Duplicate response",t),e.$message.success("Copy successfully"),e.$router.push({path:"/teacher/main/created-by-me"})):e.currentMethodName="handleDuplicateItem"})).finally((function(){e.copyLoading=!1}))}})},handleBuyItem:function(e){var t=this;this.$logger.info("handleBuyItem",this.content),Object(mt["a"])({id:this.content.id,type:this.content.type}).then((function(i){i.code!==t.ErrorCode.ppt_google_token_expires&&i.code!==t.ErrorCode.ppt_forbidden?(t.$logger.info("Duplicate response",i),e?t.$message.success(e):t.$message.success("Buy successfully")):t.currentMethodName="handleBuyItem"})).finally((function(){t.buyLoading=!1,t.contentBuyStatVisible=!0}))},handleEnsureBuyStat:function(){var e=this;Object(j["a"])({contentId:this.contentId,contentType:this.contentType,grades:this.selectedGradeList}).finally((function(){e.handleCancelBuyStat()}))},handleCancelBuyStat:function(){this.contentBuyStatVisible=!1,this.selectedGradeList=[],this.$router.push({path:"/teacher/main/created-by-me"})},toggleSelectContentTag:function(e){this.$logger.info("toggleSelectContentTag",e);var t=this.selectedGradeList.indexOf(e);-1===t?this.selectedGradeList.push(e):this.selectedGradeList.splice(t,1)},visibilityChanged:function(e,t){this.showTopFixedHeader=!e},scrollLeft:function(e){var t=document.getElementById(e);t.scrollBy({left:-600,behavior:"smooth"})},scrollRight:function(e){var t=document.getElementById(e);t.scrollBy({left:600,behavior:"smooth"})},handleClose:function(){this.$emit("close")},wrapperLink:function(e){if(e&&e.id){var t=this.$classcipe.getContentTypeName(e.type);return"".concat("https://www.classcipe.com","/v2/").concat(t,"/").concat(e.id)}return""},goToSubTaskList:function(){this.$router.push({path:"/teacher/sub-task/".concat(this.content.id)})},goTLinkList:function(){this.$router.push({path:"/teacher/link-content-list/".concat(this.content.type,"/").concat(this.content.id)})},handlePreviewItem:function(e){this.$logger.info("handlePreviewItem allowPreviewSubContent ".concat(this.allowPreviewSubContent),e),this.allowPreviewSubContent&&this.handlePreviewDetail(e)},goReviews:function(){document.getElementById("reviews").scrollIntoView({behavior:"smooth"})},handleRegisterSession:function(){var e=this;this.liveWorkShopSession&&this.liveWorkShopSession.content&&this.liveWorkShopSession.sessionId&&(this.buyLoading=!0,Object(gt["e"])({contentId:this.liveWorkShopSession.content.id,sessionId:this.liveWorkShopSession.sessionId,channelId:Object(g["getCookie"])(yt["v"])}).then((function(t){t.success&&(e.$message.success("You have successfully registered in"),e.initLiveDetail(),e.$emit("reload"))})).finally((function(){e.buyLoading=!1})))},handleCancelSession:function(){var e=this;this.liveWorkShopSession&&this.liveWorkShopSession.content&&this.liveWorkShopSession.sessionId&&(this.buyLoading=!0,Object(gt["a"])({contentId:this.liveWorkShopSession.content.id,sessionId:this.liveWorkShopSession.sessionId}).then((function(t){t.success&&(e.$message.success("Cancel successfully"),e.initLiveDetail(),e.$emit("reload"))})).finally((function(){e.buyLoading=!1})))}}},wt=bt,Ct=(i("96bb"),Object(Ze["a"])(wt,a,n,!1,null,"3f8dd9bd",null));t["default"]=Ct.exports},"7a29":function(e,t,i){"use strict";i("b82c")},8190:function(e,t,i){"use strict";i("2365")},"82bf":function(e,t,i){"use strict";i.d(t,"e",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return c})),i.d(t,"d",(function(){return l}));var a=i("b775"),n={GetLinkCategory:"/classcipe/api/v2/mycontent/getLinkCategory",AddOrUpdateLinkCategory:"/classcipe/api/v2/mycontent/addOrUpdateLinkCategory",QueryTagsByIds:"/classcipe/api/v2/mycontent/queryTagsByIds",DeleteLinkCategory:"/classcipe/api/v2/mycontent/deleteLinkCategory",QueryCustomTags:"/classcipe/api/v2/mycontent/queryCustomTags",ImportOtherIdentityContent:"/classcipe/api/v2/mycontent/importOtherIdentityContent",UpdateContentField:"/classcipe/api/v2/mycontent/updateContentField",ContentBuy:"/classcipe/api/v2/mycontent/content/bye",QueryNewBigIdea:"/classcipe/api/v2/mycontent/queryNewBigIdea"};function s(e){return Object(a["d"])({url:n.QueryTagsByIds,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(a["d"])({url:n.QueryCustomTags,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a["d"])({url:n.ImportOtherIdentityContent,method:"post",data:e})}function c(e){return Object(a["d"])({url:n.ContentBuy,method:"post",data:e})}function l(e){return Object(a["d"])({url:n.QueryNewBigIdea,method:"post",data:e})}},8757:function(e,t,i){},"95c6":function(e,t,i){"use strict";i.r(t),i.d(t,"favoritesAPIUrl",(function(){return n})),i.d(t,"FavoritesAdd",(function(){return s})),i.d(t,"FavoritesQueryById",(function(){return r})),i.d(t,"FavoritesDelete",(function(){return o})),i.d(t,"FavoritesDeleteBatch",(function(){return c})),i.d(t,"FavoritesList",(function(){return l})),i.d(t,"FavoritesGetMyFavorites",(function(){return d}));var a=i("b775"),n={FavoritesAdd:"/classcipe/api/favorites/add",FavoritesQueryById:"/classcipe/api/favorites/queryById",FavoritesDelete:"/classcipe/api/favorites/delete",FavoritesDeleteBatch:"/classcipe/api/favorites/deleteBatch",FavoritesList:"/classcipe/api/favorites/list",FavoritesGetMyFavorites:"/classcipe/api/favorites/getMyFavorites"};function s(e){return Object(a["d"])({url:n.FavoritesAdd,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(a["d"])({url:n.FavoritesQueryById,method:"get",params:e})}function o(e){return Object(a["d"])({url:n.FavoritesDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(a["d"])({url:n.FavoritesDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(a["d"])({url:n.FavoritesList,method:"get",params:e})}function d(e){return Object(a["d"])({url:n.FavoritesGetMyFavorites,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"96bb":function(e,t,i){"use strict";i("0a60")},a0bd:function(e,t,i){},abb8:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("label",{staticStyle:{"margin-right":"10px"},attrs:{for:""}},[e._v("Overall")]),"student"===e.currentRole?i("a-rate",{attrs:{"allow-half":"",disabled:""},model:{value:e.data.reviewsScore,callback:function(t){e.$set(e.data,"reviewsScore",t)},expression:"data.reviewsScore"}}):e._e(),"teacher"===e.currentRole?i("a-popover",{attrs:{placement:e.placement},on:{visibleChange:e.debouncedGetData}},[i("template",{slot:"content"},[i("a-spin",{attrs:{spinning:e.loading}},[i("a-space",{attrs:{direction:"vertical"}},[i("a-space",{attrs:{align:"center"}},[i("label",[e._v("Students engagement")]),i("a-rate",{staticStyle:{margin:"0"},attrs:{tooltips:e.RATE_TOOLTIPS.ENGAGEMENT,"allow-half":"",disabled:""},model:{value:e.data.studentsEngagement,callback:function(t){e.$set(e.data,"studentsEngagement",t)},expression:"data.studentsEngagement"}})],1),i("a-space",{attrs:{align:"center"}},[i("label",[e._v("Effectiveness of teaching & learning")]),i("a-rate",{staticStyle:{margin:"0"},attrs:{tooltips:e.RATE_TOOLTIPS.EFFETIVENESS,"allow-half":"",disabled:""},model:{value:e.data.effectiveness,callback:function(t){e.$set(e.data,"effectiveness",t)},expression:"data.effectiveness"}})],1),i("a-space",{attrs:{align:"center"}},[i("label",[e._v("Quality of the content")]),i("a-rate",{staticStyle:{margin:"0"},attrs:{tooltips:e.RATE_TOOLTIPS.QUALITY,"allow-half":"",disabled:""},model:{value:e.data.quality,callback:function(t){e.$set(e.data,"quality",t)},expression:"data.quality"}})],1)],1)],1)],1),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.OVERALL,"allow-half":"",disabled:""},model:{value:e.data.overall,callback:function(t){e.$set(e.data,"overall",t)},expression:"data.overall"}}),i("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"down"}})],2):e._e()],1)},n=[],s=i("5530"),r=(i("d3b7"),i("f93e")),o=i("c2e5"),c=i("6b36"),l=i("2f62"),d=i("4fcf"),u=d.debounce,h={name:"ReviewScore",props:{review:{type:Object,default:function(){}},placement:{type:String,default:"bottom"},id:{type:String,default:null}},watch:{review:{handler:function(e){this.data=e?Object(s["a"])({},e):{}},immediate:!0},id:{handler:function(e){e&&(this.reviewId=e)},immediate:!0}},computed:Object(s["a"])({},Object(l["e"])({currentRole:function(e){return e.user.currentRole}})),created:function(){this.debouncedGetData=u(this.getReview,300)},beforeDestroy:function(){this.timer&&clearTimeout(this.timer)},data:function(){return{RATE_TOOLTIPS:r["y"],data:{},reviewId:this.id,hasRender:!1,timer:null,loading:!1}},methods:{getReview:function(e){var t=this;if(this.reviewId&&e&&!this.hasRender){var i=null;i="student"===this.currentRole?c["ReviewsTaskStats"]:o["ReviewsTeacherStats"],this.loading=!0,i&&i({taskId:this.reviewId,purchasesId:this.reviewId}).then((function(e){e.success&&(t.data=e.result,t.hasRender=!0,t.timer=setTimeout((function(){t.hasRender=!1}),6e4))})).finally((function(){t.loading=!1}))}}}},v=h,p=i("0c7c"),f=Object(p["a"])(v,a,n,!1,null,"6e24629c",null);t["a"]=f.exports},adbe:function(e,t,i){},b4ab:function(e,t,i){},b763:function(e,t,i){"use strict";i("4f10")},b82c:function(e,t,i){},c2e5:function(e,t,i){"use strict";i.r(t),i.d(t,"reviewsTeacherAPIUrl",(function(){return s})),i.d(t,"ReviewsTeacherSave",(function(){return r})),i.d(t,"ReviewsTeacherList",(function(){return o})),i.d(t,"ReviewsTeacherDelete",(function(){return c})),i.d(t,"ReviewsTeacherMyReview",(function(){return l})),i.d(t,"ReviewsTeacherStats",(function(){return d})),i.d(t,"byOverall",(function(){return u}));var a=i("b775"),n="reviewsTeacher",s={delete:"/classcipe/api/".concat(n,"/delete"),list:"/classcipe/api/".concat(n,"/list"),save:"/classcipe/api/".concat(n,"/save"),myReviews:"/classcipe/api/".concat(n,"/myReviews"),queryReviewsStat:"/classcipe/api/".concat(n,"/queryReviewsStat"),byOverall:"/classcipe/api/".concat(n,"/reviewsStat/byOverall")};function r(e){return Object(a["d"])({url:s.save,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a["d"])({url:s.list,method:"get",params:e})}function c(e){return Object(a["d"])({url:s.delete+"?id="+e.id,method:"get",data:e})}function l(e){return Object(a["d"])({url:s.myReviews,method:"get",params:e})}function d(e){return Object(a["d"])({url:s.queryReviewsStat,method:"get",params:e})}function u(e){return Object(a["d"])({url:s.byOverall,method:"get",params:e})}},d33b:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));i("159b"),i("9911"),i("4de4"),i("d81d"),i("d3b7");var a=i("7aef"),n=i("8448"),s=i.n(n),r=i("998c"),o=i.n(r),c=i("4084"),l=i.n(c),d=i("8a21"),u=i.n(d),h=i("1eeb"),v=i.n(h),p=i("5a1d"),f=i.n(p),m=i("6631"),g=i.n(m),y=i("1b72"),b={components:{TextTypeSvg:s.a,ImageTypeSvg:o.a,VideoTypeSvg:l.a,AudioTypeSvg:u.a,YoutubeTypeSvg:v.a,PdfTypeSvg:f.a,UrlTypeSvg:g.a},data:function(){return{loadingClass:!1,currentImgIndex:0,elementsList:[],itemsList:[],showMenuList:[],thumbnailList:[],fileTypeMap:a["a"],materialVisible:!1,mediaVisible:!1,mediaList:[],filterMaterialType:""}},created:function(){},computed:{currentPageElements:function(){var e=[];if(0===this.thumbnailList.length)return e;if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.elementsList.forEach((function(i){if(t===i.pageId){var n=i.data;"iframe"===n.type?e.push(a["a"].youtube):"image"===n.type?e.push(a["a"].img):"audio"===n.type?e.push(a["a"].audio):"text"===n.type?e.push(a["a"].txt):"video"===n.type?e.push(a["a"].video):"pdf"===n.type?e.push(a["a"].pdf):"website"===n.type&&e.push(a["a"].link)}}))}return e},currentPageElementLists:function(){var e=[];if(0===this.thumbnailList.length)return e;if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.elementsList.forEach((function(i){if(t===i.pageId){var a=i.data;e.push(a)}}))}return e},currentPageItem:function(){var e=[];if(0===this.thumbnailList.length)return"";if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.itemsList.forEach((function(i){if(t===i.pageId){var a=i.data;e.push(a)}}))}return e.length>0?e[0]:""},currentPageId:function(){return 0===this.thumbnailList.length?null:this.thumbnailList[this.currentImgIndex]?this.thumbnailList[this.currentImgIndex].id:void 0},currentPageTips:function(){if(0===this.thumbnailList.length)return"";var e=this.currentPageElementLists.filter((function(e){return"tip"===e.type}));return e?e[0]:""},currentPageMaterial:function(){var e={};if(0===this.thumbnailList.length)return e;if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.elementsList.forEach((function(i){if(t===i.pageId){var a=i.data;"tip"!==a.type&&(e.hasOwnProperty(a.type)||(e[a.type]=[]),e[a.type].push(a))}}))}return e}},methods:{getClassInfo:function(e){var t=this;this.loadingClass=!0;var i=this.thumbnailList.map((function(e){return e.id}));0===i.length?this.loadingClass=!1:Object(y["d"])({slideId:e,pageIds:i}).then((function(e){t.$logger.info("QueryByClassInfoSlideId ",e),e.success&&(e.result.relements.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),e.result.items.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),t.elementsList=e.result.relements,t.itemsList=e.result.items)})).finally((function(){t.loadingClass=!1,t.setTaskKnowAndBloomFormPPT()}))},setTaskKnowAndBloomFormPPT:function(){var e=this.thumbnailList.map((function(e){return e.id})),t=[],i=[];this.itemsList.forEach((function(a){if(-1!==e.indexOf(a.pageId)){var n=a.data;n.data&&n.data.bloomLevel&&-1===t.indexOf(n.data.bloomLevel)&&t.push(n.data.bloomLevel),n.data&&n.data.knowledgeLevel&&-1===i.indexOf(n.data.knowledgeLevel)&&i.push(n.data.knowledgeLevel)}})),t.length>0&&this.setCustomTagByPPT&&this.setCustomTagByPPT(t,"Bloom's Taxonomy"),i.length>0&&this.setCustomTagByPPT&&this.setCustomTagByPPT(i,"Knowledge Dimensions")},showPluginMaterial:function(e){var t=this.currentPageMaterial[e];this.$logger.info("showPluginMaterial ",t),"text"===e||"website"===e||"pdf"===e?t.length>1?(this.filterMaterialType=e,this.materialVisible=!0):"tip"!==t[0].type&&window.open(t[0].url,"_blank"):(this.mediaList=t,this.filterMaterialType=e,this.mediaVisible=!0)},showMaterialSize:function(e){return this.currentPageMaterial[e].length>1?this.currentPageMaterial[e].length:0},computerSize:function(e){var t=0,i=this.thumbnailList[this.currentImgIndex].id;return this.elementsList.forEach((function(a){if(i===a.pageId){var n=a.data;n.type===e&&t++}})),t},onChangePage:function(e){this.currentImgIndex=e},getTargetPageItemData:function(e){var t=null;return this.itemsList.forEach((function(i){e===i.pageId&&(t=i.data)})),t}}}},d350:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"preview-carousel"},[i("a-carousel",{ref:"carousel",attrs:{arrows:"","after-change":e.onChangePage}},[i("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"-15px",zIndex:"1"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[i("a-icon",{attrs:{type:"left-circle"}})],1),i("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"-15px"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[i("a-icon",{attrs:{type:"right-circle"}})],1),e._l(e.videoList,(function(t,a){return i("div",{key:a,staticClass:"slider-video-cover"},[e.isYoutubeIframeUrl(t.url)?e._e():i("video",{ref:"video",refInFor:!0,attrs:{controls:"",src:t.url}}),e.isYoutubeIframeUrl(t.url)?i("iframe",{staticClass:"video-iframe",attrs:{src:t.url}}):e._e()])})),e._l(e.pageObjectList,(function(e,t){return i("div",{key:t,staticClass:"slider-img-cover",style:{backgroundImage:"url("+e.contentUrl+")"}})}))],2)],1)},n=[],s=(i("159b"),i("d33b")),r={name:"PreviewCarousel",props:{pageObjectList:{type:Array,default:function(){return[]}},videoList:{type:Array,default:function(){return[]}},width:{type:String,default:"400px"}},mixins:[s["a"]],computed:{showArrow:function(){return this.pageObjectList.length+this.videoList.length>1},isYoutubeIframeUrl:function(e){return function(e){return e&&-1!==e.indexOf("youtube.com/embed")}}},data:function(){return{currentImgIndex:0}},created:function(){this.$logger.info("PreviewCarousel created pageObjectList",this.pageObjectList,"videoList",this.videoList)},methods:{onChangePage:function(e){this.$logger.info("page",e,this.$refs.video),this.currentImgIndex=e,this.$refs.video&&this.$refs.video.forEach((function(e){return e.pause()}))}}},o=r,c=(i("b763"),i("0c7c")),l=Object(c["a"])(o,a,n,!1,null,"5ebc1f0c",null);t["a"]=l.exports},d3b0:function(e,t,i){},d980:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"ratePercentCon",staticClass:"rate-percent-con"},[i("div",{staticClass:"rate-percent-wrap"},[i("div",{ref:"ratePercentSum",staticClass:"rate-percent__sum"},[i("div",{staticClass:"sum-title"},[e._v(e._s(e._f("percentFormat")(e.percents.avgReviewsScore)))]),i("div",{staticClass:"sum-desc"},[i("a-rate",{attrs:{defaultValue:e.percents.avgReviewsScore,"allow-half":"",disabled:""}})],1)]),i("div",{staticClass:"rate-percent__detail",attrs:{direction:"vertical"}},e._l(e.percents.reviewsScoreStatDetail.concat().reverse(),(function(t,a){return i("a-space",{key:"percent_"+a,staticClass:"detail-bar",attrs:{align:"center"}},[i("a-progress",{style:{width:e.progressWidth},attrs:{strokeLinecap:"square",strokeColor:"#FFBB00",percent:t.reviewsScoreRate,showInfo:!1}}),i("a-rate",{attrs:{defaultValue:t.reviewsScore,disabled:""}}),i("span",[e._v(e._s(t.reviewsScoreRate)+"%")])],1)})),1)])])},n=[],s=i("5530"),r=(i("b4ab"),{name:"RateByPercent",props:{rates:{type:Object,default:function(){return{avgReviewsScore:0,reviewsScoreStatDetail:[{reviewsScore:1,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:2,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:3,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:4,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:5,reviewsScoreCount:0,reviewsScoreRate:0}]}}}},watch:{rates:function(e){this.percents=Object(s["a"])({},e)}},data:function(){return{percents:this.rates,progressWidth:"135px"}},mounted:function(){if(this.$refs.ratePercentCon&&this.$refs.ratePercentSum){var e=this.$refs.ratePercentCon.getBoundingClientRect().width,t=this.$refs.ratePercentSum.getBoundingClientRect().width;this.progressWidth=e-40-t-45-200+"px"}}}),o=r,c=i("0c7c"),l=Object(c["a"])(o,a,n,!1,null,null,null);t["a"]=l.exports},dd6e:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reviews-wrapper"},[e.canList||e.showCreate||e.canEdit?a("div",{staticClass:"reviews-title"},[a("h4",[e._v("Reviews")])]):e._e(),a("review-edit",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],ref:"myReview",attrs:{role:e.role,footerBottom:!e.canList&&e.showCreate,canCreate:e.showCreate,myReviews:e.myReviews},on:{submit:e.handleSaveMyReview}}),e.needSearch&&e.canList?a("div",{staticClass:"reviews-search"},[a("div",{staticClass:"my-search"},[a("a-input-search",{attrs:{placeholder:"Search",allowClear:!0},on:{search:e.triggerSearch,pressEnter:e.triggerSearch},model:{value:e.reviewsNotes,callback:function(t){e.reviewsNotes=t},expression:"reviewsNotes"}})],1),a("a-select",{attrs:{getPopupContainer:function(e){return e.parentElement}},on:{change:e.triggerChangeRate},model:{value:e.reviewsScore,callback:function(t){e.reviewsScore=t},expression:"reviewsScore"}},[a("a-select-option",{attrs:{value:""}},[e._v(" All rating ")]),e._l([5,4,3,2,1],(function(t){return a("a-select-option",{key:"rate_choose_"+t,attrs:{value:t}},[e._v(" "+e._s(t)+" star ")])}))],2)],1):e._e(),e.canList?a("div",{staticClass:"reviews-content"},[a("a-spin",{attrs:{spinning:e.delLoading}},[e.myReviews?a("div",{staticClass:"reviews-content-detail reviews-me"},[a("div",{staticClass:"content-detail__avatar"},[e.myReviews.avatar?a("img",{attrs:{src:e.myReviews.avatar}}):a("img",{attrs:{src:i("4992")}})]),a("div",{staticClass:"content-detail__rate"},[a("review-score",{attrs:{review:e.myReviews}}),a("div",{staticClass:"content-detail__tag"},[a("a-tooltip",{attrs:{title:"Distance learning"}},[a("a-tag",{directives:[{name:"show",rawName:"v-show",value:e.myReviews.learningDistance,expression:"myReviews.learningDistance"}],attrs:{color:"#f50"}},[e._v(" Distance ")])],1),a("a-tooltip",{attrs:{title:"At home learning"}},[a("a-tag",{directives:[{name:"show",rawName:"v-show",value:e.myReviews.learningHome,expression:"myReviews.learningHome"}],attrs:{color:"#2db7f5"}},[e._v(" At home ")])],1),a("a-tooltip",{attrs:{title:"In-class learning"}},[a("a-tag",{directives:[{name:"show",rawName:"v-show",value:e.myReviews.learningClass,expression:"myReviews.learningClass"}],attrs:{color:"#87d068"}},[e._v(" In-class ")])],1)],1)],1),a("div",[a("div",{staticClass:"content-detail__title"},[a("div",{staticClass:"title-info"},[a("div",{staticClass:"info-author"},[e._v(" "+e._s(e.myReviews.nickName)+" ")]),a("div",{staticClass:"info-time"},[e._v(" "+e._s(e._f("dayjs")(e.myReviews.createTime))+" ")])])]),a("div",{staticClass:"content-detail__review"},[a("label",[e._v(" "+e._s(e.myReviews.reviewsNotes)+" ")])])]),a("a-space",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],staticClass:"content-detail__edit"},[a("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!0)}}},[e._v("Edit")]),a("a-button",{attrs:{type:"link"},on:{click:e.handleDelMyReview}},[e._v("Delete")])],1)],1):e._e()]),a("a-skeleton",{attrs:{loading:e.loading,active:""}},[e.reviewsList.length>0?a("a-list",{attrs:{"item-layout":"vertical",pagination:e.pagination,"data-source":e.reviewsList},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{key:"item.id"},[a("div",{staticClass:"reviews-content-detail"},[a("div",{staticClass:"content-detail__avatar"},[t.avatar?a("img",{attrs:{src:t.avatar}}):a("img",{attrs:{src:i("4992")}})]),a("div",{staticClass:"content-detail__rate"},[a("review-score",{attrs:{review:t}}),a("div",{staticClass:"content-detail__tag"},[a("a-tooltip",{attrs:{title:"Distance learning"}},[a("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.learningDistance,expression:"item.learningDistance"}],attrs:{color:"#f50"}},[e._v(" Distance ")])],1),a("a-tooltip",{attrs:{title:"At home learning"}},[a("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.learningHome,expression:"item.learningHome"}],attrs:{color:"#2db7f5"}},[e._v(" At home ")])],1),a("a-tooltip",{attrs:{title:"In-class learning"}},[a("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.learningClass,expression:"item.learningClass"}],attrs:{color:"#87d068"}},[e._v(" In-class ")])],1)],1)],1),a("div",[a("div",{staticClass:"content-detail__title"},[a("div",{staticClass:"title-info"},[a("div",{staticClass:"info-author"},[e._v(" "+e._s(t.nickName)+" ")]),a("div",{staticClass:"info-time"},[e._v(" "+e._s(e._f("dayjs")(t.createTime))+" ")])])]),a("div",{staticClass:"content-detail__review"},[a("label",[e._v(" "+e._s(t.reviewsNotes)+" ")])])])])])}}],null,!1,2711396856)}):e._e(),e.myReviews||0!==e.reviewsList.length?e._e():a("a-empty",{attrs:{description:"No reviews yet"}})],1)],1):e._e()],1)},n=[],s=i("5530"),r=i("53ca"),o=(i("a9e3"),i("d3b7"),i("7db0"),i("823b")),c=i("f93e"),l=i("ed18"),d=i("abb8"),u={name:"ReviewsPreview",components:{ReviewEdit:l["a"],ReviewScore:d["a"]},props:{id:{type:[String,Number],required:!0},role:{type:String,default:"student"},save:{type:Function,default:function(){}},list:{type:Function,required:!0},del:{type:Function,default:function(){}},myReview:{type:Function,default:function(){}},canEdit:{type:Boolean,default:!0},canCreate:{type:Boolean,default:!0},canList:{type:Boolean,default:!0},needSearch:{type:Boolean,default:!0}},watch:{id:{handler:function(e){this.currentId=e,this.loadData()},immediate:!0},canCreate:function(e){this.showCreate=e}},data:function(){var e=this;return{loading:!1,delLoading:!1,subLoading:!1,showCreate:this.canCreate,RATE_TOOLTIPS:c["y"],isEdit:!1,myReviews:null,reviewsList:[],reviewsNotes:"",reviewsScore:"",currentId:this.id,pagination:{onChange:function(t){e.pageNo=t,e.loadReviewList()},showTotal:function(e){return"Total ".concat(e," items")},total:0,pageSize:10,size:"small"},pageNo:1,mockData:{reviewsLabel:1,reviewsNotes:"123213123",reviewsScore:1,overall:1,effectiveness:5,quality:4,studentsEngagement:1,createBy:"jacob",id:123213213,createTime:"123123"}}},mounted:function(){this.loadData()},methods:{justifyPromise:function(e){return("object"===Object(r["a"])(e)||"function"===typeof e)&&"function"===typeof e.then},loadData:function(){this.loadMyReview(),this.loadReviewList()},loadMyReview:function(){var e=this,t=this.myReview({taskId:this.currentId,purchasesId:this.currentId});this.justifyPromise(t)&&(this.$refs.myReview&&this.$refs.myReview.triggerLoading(!0),this.delLoading=!0,t.then((function(t){t.success&&t.result?e.myReviews=Object(s["a"])(Object(s["a"])({},t.result),{},{learningClass:Boolean(t.result.learningClass),learningDistance:Boolean(t.result.learningDistance),learningHome:Boolean(t.result.learningHome),updatedMsg:Boolean(t.result.updatedMsg)}):e.myReviews=null})).finally((function(){e.$refs.myReview&&e.$refs.myReview.triggerLoading(!1),e.delLoading=!1})))},loadReviewList:function(){var e=this,t=this.list({reviewsNotes:this.reviewsNotes,reviewsScore:this.reviewsScore,pageNo:this.pageNo,pageSize:this.pagination.pageSize,taskId:this.currentId,excludeSelf:1,overall:this.reviewsScore,searchKey:this.reviewsNotes,purchasesId:this.currentId});this.justifyPromise(t)&&(this.loading=!0,t.then((function(t){o["info"]("loadReviewList",t),t.result&&t.result.records&&t.result.records.length?(e.reviewsList=t.result.records,e.pagination.total=t.result.total):(e.reviewsList=[],e.pagination.total=0),o["info"]("reviewsList",e.reviewsList)})).finally((function(){e.loading=!1})))},handleDelMyReview:function(){var e=this;this.myReviews&&this.$confirm({title:"Confirm delete",content:"Are you sure to delete your review ?",centered:!0,onOk:function(){var t=e.del({id:e.myReviews.id});e.justifyPromise(t)&&(e.delLoading=!0,t.then((function(t){e.$logger.info("del response",t),t.success&&(e.$message.success("Del successfully"),e.myReviews=null,e.$emit("update"))})).finally((function(){e.delLoading=!1})))}})},handleSaveMyReview:function(e){var t=this;if("student"!==this.role||this.myReviews){var i=this.save(Object(s["a"])({taskId:this.currentId,purchasesId:this.currentId,id:this.myReviews&&this.myReviews.id?this.myReviews.id:null},e));this.justifyPromise(i)&&(this.$refs.myReview&&this.$refs.myReview.triggerLoading(!0),i.then((function(e){if(e.success){if(t.$message.success("Save successfully"),t.myReviews=Object(s["a"])(Object(s["a"])(Object(s["a"])({},t.myReviews),e.result),{},{learningClass:Boolean(e.result.learningClass),learningDistance:Boolean(e.result.learningDistance),learningHome:Boolean(e.result.learningHome),updatedMsg:Boolean(e.result.updatedMsg)}),t.myReviews&&t.myReviews.id){var i=t.reviewsList.find((function(e){return e.id===t.myReviews.id}));i&&(i=Object(s["a"])(Object(s["a"])({},i),e.result))}t.$refs.myReview&&t.$refs.myReview.triggerIsEdit(!1),t.$emit("update")}})).finally((function(){t.$refs.myReview&&t.$refs.myReview.triggerLoading(!1)})))}},triggerEdit:function(e){this.$refs.myReview&&this.$refs.myReview.triggerEdit(e)},triggerSearch:function(){this.loadReviewList()},triggerChangeRate:function(e){this.loadReviewList()}}},h=u,v=(i("f05c"),i("0c7c")),p=Object(v["a"])(h,a,n,!1,null,"152c5a2d",null);t["a"]=p.exports},dec2:function(e,t,i){"use strict";i("8757")},ed14:function(e,t,i){},ed18:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-reviews"},[!e.myReviews&&"teacher"!==e.role||e.footerBottom?e._e():i("a-space",{staticClass:"reviews-opt"},["student"!==e.role||e.isEdit?e._e():i("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!0)}}},[e._v("Edit Review")]),"teacher"!==e.role||e.myReviews||e.isEdit||!e.showCreate?e._e():i("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!0)}}},[e._v("Leave a Review")]),e.isEdit?i("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!1)}}},[e._v("Cancel")]):e._e(),e.isEdit?i("a-button",{attrs:{type:"primary"},on:{click:e.handleSaveMyReview}},[e._v(e._s(e.myReviews?"Update":"Send"))]):e._e()],1),"student"===e.role?i("a-spin",{attrs:{spinning:e.subLoading}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"reviews-edit"},[i("div",{staticClass:"reviews-edit__check"},[i("div",[i("label",[e._v("Difficulty Level")]),i("a-rate",{staticClass:"rate-bar-con",attrs:{count:3,tooltips:e.reviewsText,allowClear:!1},model:{value:e.subForm.reviewsLabel,callback:function(t){e.$set(e.subForm,"reviewsLabel",t)},expression:"subForm.reviewsLabel"}},[i("div",{attrs:{slot:"character"},slot:"character"},[i("div",{staticClass:"rate-bar"})])])],1),i("div",[i("label",[e._v("Overall review")]),i("a-rate",{attrs:{allowClear:!1},model:{value:e.subForm.reviewsScore,callback:function(t){e.$set(e.subForm,"reviewsScore",t)},expression:"subForm.reviewsScore"}})],1)]),i("div",{staticClass:"reviews-edit__text"},[i("a-textarea",{ref:"reviewsNotes",attrs:{placeholder:"Enter your reviews......","auto-size":{minRows:4,maxRows:6}},model:{value:e.subForm.reviewsNotes,callback:function(t){e.$set(e.subForm,"reviewsNotes",t)},expression:"subForm.reviewsNotes"}})],1)])]):e._e(),"teacher"===e.role?i("a-spin",{attrs:{spinning:e.subLoading}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"reviews-edit"},[i("div",{staticClass:"reviews-edit__check"},[i("div",[i("a-tooltip",{attrs:{title:"Overall review"}},[i("label",[e._v("Overall review")])]),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.OVERALL,allowClear:!1},model:{value:e.subForm.overall,callback:function(t){e.$set(e.subForm,"overall",t)},expression:"subForm.overall"}})],1),i("div",[i("a-tooltip",{attrs:{title:"Students engagement"}},[i("label",[e._v("Students engagement")])]),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.ENGAGEMENT,allowClear:!1},model:{value:e.subForm.studentsEngagement,callback:function(t){e.$set(e.subForm,"studentsEngagement",t)},expression:"subForm.studentsEngagement"}})],1)]),i("div",{staticClass:"reviews-edit__check"},[i("div",[i("a-tooltip",{attrs:{title:"Effectiveness of teaching & learning"}},[i("label",[e._v("Effectiveness of teaching & learning")])]),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.EFFETIVENESS,allowClear:!1},model:{value:e.subForm.effectiveness,callback:function(t){e.$set(e.subForm,"effectiveness",t)},expression:"subForm.effectiveness"}})],1),i("div",[i("a-tooltip",{attrs:{title:"Quality of the content"}},[i("label",[e._v("Quality of the content")])]),i("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.QUALITY,allowClear:!1},model:{value:e.subForm.quality,callback:function(t){e.$set(e.subForm,"quality",t)},expression:"subForm.quality"}})],1)]),i("div",{staticClass:"reviews-edit__check"},[i("div",[i("a-checkbox",{model:{value:e.subForm.learningDistance,callback:function(t){e.$set(e.subForm,"learningDistance",t)},expression:"subForm.learningDistance"}},[e._v(" Distance learning ")])],1),i("div",[i("a-checkbox",{model:{value:e.subForm.learningHome,callback:function(t){e.$set(e.subForm,"learningHome",t)},expression:"subForm.learningHome"}},[e._v(" At home learning ")])],1),i("div",[i("a-checkbox",{model:{value:e.subForm.learningClass,callback:function(t){e.$set(e.subForm,"learningClass",t)},expression:"subForm.learningClass"}},[e._v(" In-class learning ")])],1)]),i("div",{staticClass:"reviews-edit__text"},[i("a-textarea",{ref:"reviewsNotes",attrs:{placeholder:"Enter your reviews......","auto-size":{minRows:4,maxRows:6}},model:{value:e.subForm.reviewsNotes,callback:function(t){e.$set(e.subForm,"reviewsNotes",t)},expression:"subForm.reviewsNotes"}})],1),i("div",{staticClass:"reviews-edit__check",staticStyle:{"border-top":"0","border-bottom":"1px solid #d9d9d9"}},[i("a-checkbox",{model:{value:e.subForm.updatedMsg,callback:function(t){e.$set(e.subForm,"updatedMsg",t)},expression:"subForm.updatedMsg"}},[e._v(" Let me know if this resource is updated ")])],1)])]):e._e(),(e.myReviews||"teacher"===e.role)&&e.footerBottom?i("a-space",{staticClass:"reviews-footer"},[i("a-button",{on:{click:e.handleCancel}},[e._v("Cancel")]),i("a-button",{attrs:{type:"primary"},on:{click:e.handleSaveMyReview}},[e._v("Send")])],1):e._e()],1)},n=[],s=i("5530"),r=(i("a9e3"),i("f93e")),o={name:"ReviewsEdit",props:{footerBottom:{type:Boolean,default:!1},role:{type:String,default:"student"},myReviews:{type:Object,default:null},canCreate:{type:Boolean,default:!0}},watch:{canCreate:function(e){this.showCreate=e,!this.footerBottom&&("teacher"!==this.role||!this.showCreate||this.myReviews&&this.myReviews.id)||(this.isEdit=!0)},myReviews:{handler:function(e){this.subForm=e?Object(s["a"])({},e):Object(s["a"])({},this.init),this.footerBottom||"teacher"===this.role&&this.showCreate&&(!e||!e.id)?this.isEdit=!0:this.isEdit=!1},immediate:!0}},data:function(){return{subLoading:!1,showCreate:this.canCreate,RATE_TOOLTIPS:r["y"],isEdit:!1,reviewsText:["Easy","Intermediate","Difficult"],subForm:this.myReviews,init:{reviewsLabel:1,reviewsNotes:"",reviewsScore:1,overall:1,effectiveness:1,quality:1,studentsEngagement:1,learningClass:!1,learningDistance:!1,learningHome:!1,updatedMsg:!0}}},mounted:function(){!this.footerBottom&&("teacher"!==this.role||!this.showCreate||this.myReviews&&this.myReviews.id)||(this.isEdit=!0)},methods:{handleSaveMyReview:function(){if("student"!==this.role||this.myReviews){this.subLoading=!0;var e=Object(s["a"])(Object(s["a"])({},this.subForm),{},{learningClass:Number(this.subForm.learningClass),learningDistance:Number(this.subForm.learningDistance),learningHome:Number(this.subForm.learningHome),updatedMsg:Number(this.subForm.updatedMsg)});this.$emit("submit",e)}},handleCancel:function(){this.$emit("cancel")},triggerLoading:function(e){this.subLoading=e},triggerIsEdit:function(e){this.isEdit=e},triggerEdit:function(e){var t=this;this.isEdit=e,this.$nextTick((function(){e&&t.$refs.reviewsNotes&&t.$refs.reviewsNotes.focus()}))}}},c=o,l=(i("11fa"),i("0c7c")),d=Object(l["a"])(c,a,n,!1,null,"0bba4ebc",null);t["a"]=d.exports},eedc:function(e,t,i){},f031:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var a=i("1da1"),n=(i("96cf"),i("d81d"),i("0481"),i("b0c0"),i("c621")),s=i("944d"),r={data:function(){return{allowPreview:!0,previewCurrentId:null,previewType:null,previewCode:null,previewVisible:!1,updateEditSlideLoading:!1,setColor:["#FFEDAF","#C8F4FF","#E6E4FF","#ffccb0","#ffa9a2","#a3ecb9","#f7c5f8","#ffbfe2","#d5b9ff","#c4f6b1"],savingSlides:!1}},computed:{commandTermsList:function(){return Object(s["a"])(this.content.learnOuts.map((function(e){return e.commandTerms})).flat(2),"name").map((function(e){return e.name}))},knowledgeTagsList:function(){return Object(s["a"])(this.content.learnOuts.map((function(e){return e.knowledgeTags})).flat(2),"name").map((function(e){return e.name}))}},methods:{handlePreviewDetail:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$logger.info("handlePreviewDetail",e,"allowPreview",this.allowPreview),this.allowPreview&&(this.previewVisible=!1,this.$nextTick((function(){t.previewCurrentId=i&&e.sourceFrom||e.id,t.previewType=e.type,t.previewCode=e.sessionId,t.reviewList=!1,t.reviewCreate=!!i,t.reviewEdit=!!i,t.previewVisible=!0})),this.$emit("preview",e))},handlePreviewClose:function(){this.$logger.info("handlePreviewClose"),this.previewVisible=!1,this.previewCurrentId=null,this.previewType=null,this.previewCode=null},updateEditSlideStatus:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.updateEditSlideLoading){t.next=20;break}if(t.prev=1,e.updateEditSlideLoading=!0,i=parseInt(e.content.type),i!==e.$classcipe.typeMap.task){t.next=9;break}return t.next=7,Object(n["c"])({taskId:e.content.id,needRefresh:!0});case 7:t.next=12;break;case 9:if(i!==e.$classcipe.typeMap.pd){t.next=12;break}return t.next=12,Object(n["c"])({taskId:e.content.id,needRefresh:!0});case 12:e.content.slideEditing=!1,t.next=17;break;case 15:t.prev=15,t.t0=t["catch"](1);case 17:return t.prev=17,e.updateEditSlideLoading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,15,17,20]])})))()}}}},f05c:function(e,t,i){"use strict";i("a0bd")},fde4:function(e,t,i){}}]);