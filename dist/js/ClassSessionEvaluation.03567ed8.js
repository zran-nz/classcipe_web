(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ClassSessionEvaluation"],{"03fe":function(e,t,a){e.exports=a.p+"img/2.34f982bd.png"},"09cf":function(e,t,a){var s=a("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 44 44",style:"color: #15c39a;"},children:[{tag:"defs"},{tag:"g",attrsMap:{transform:"translate(-144 -421)"},children:[{tag:"circle",attrsMap:{class:"a",cx:"22",cy:"22",r:"22",transform:"translate(144 421)"}},{tag:"g",attrsMap:{transform:"translate(155 431)",style:"color: #fff;"},children:[{tag:"path",attrsMap:{class:"b",d:"M7.518,11.828a6.693,6.693,0,1,1,4.293,1.558,9.45,9.45,0,0,0-9.417,8.662H2.362a1.181,1.181,0,1,1-2.308-.356,11.821,11.821,0,0,1,7.464-9.863Zm4.293-.8A4.331,4.331,0,1,0,7.48,6.693a4.331,4.331,0,0,0,4.331,4.331Z"}},{tag:"path",attrsMap:{class:"b",d:"M645.312,645.31v-1.969a1.181,1.181,0,0,1,2.362,0v1.969h1.969a1.181,1.181,0,0,1,0,2.362h-1.969v1.969a1.181,1.181,0,1,1-2.362,0v-1.969h-1.969a1.181,1.181,0,0,1,0-2.362Z",transform:"translate(-628.321 -628.319)"}}]}]}]})}},1036:function(e,t,a){},1707:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABGtJREFUeF7tm1toFFcYx/+T3exG4+aq1mSzGyPx0qpNWsHUxDSxwQsECnnw9iIai1JtqRSkNTSaQPBSfChSS1ulqRR88qEigqBB30wUbFD70sRoNKuJl407bpKd2d2ZcrZdXWdms5eZuDvjOTAM7J7v/833m3O+c2bOHAZRyvJTvQsYwbQLENcDTHG0em/i96aFhWe+rS5ePxW+GCXRqt9v74Yo/jgVDpPR3Lx4Jsb9QmdLjb05GfvJbGQAVpzqtQuCaUhrR2r0CIDszAyMeAPHvqu1f6VGS2orA1D12812MMx+LZ2o1QoDIDqPvP6O/bUlrWo1w/ZyAJ23/gJQqZUDLXQiARA9F8vtbatzHtVCWwkAC8CmhbhWGlIARHfQw+/oqHecUOtDAcBtFyCmNOtLg1ICEBTE4BAb2NSxquSMGgi6BUCC5oPiuIvlPj34SWlXshB0DYAEPeEX3ANubvUP6+beSAaC7gGQoL180NX/1FdzvHHeYKIQDAGABM1yQv+5+88+uLJhiTcRCIYBQIJ+7gvc3LvCXvHWAiCBuycCV7+ptlfHC8FQLSAc9JOxwKWWlfbV8UAwJAAS+LCX/7O11tEUC4IuADQ6bCgqnBYrFtn/D1/wfxz42LFlMkNdAJifZUbdooKEARCDIZY/3l7n+CKasS4ABEZ9aK4uhsVqTgrCoIc71FHvbFEy1gUAcuEOAGsrZycFgBj1u8f3HWkoOywV0A0AcuEz/QJqyvMwKz8rYRCiCPSPcp9/3+D8OdJYVwBCM77hMeRPN6NgeiZsNkvCIE5vXGRmGCYYNtQdgPCFB/0CAlwgYQC9Xy57LWbdAkg48v8NerYtpQB0nQOSvfNhO9oCaBegOYAmQZoEIwjQeYB0WKnqTL+FEbVDX6Q9HQbpMJjCYbDYZkFpjgXOXCucOVY4cy2hs+sFj10X7mrZ0qNqTWkXsFlMIEHaZ2SGzqFjxn9n8pspQ/GDFNwYHjMGgM8qZ4MciRYKgLYAg3cBDxfEyJifLFbgodePPvcE/nH70Of2oXvrEuPlgJO9j0MBk+MBy+ORl4+aFgwLgECIp1AARu0CtAXQLkBzQDw50LjDoFIOsJoyUF+aA0fOqyUtMnU23FSYBC8FkJ9lxtGGUiyeJf/QQbcAyvOz0LSwAGV51pfN/cM52aHgpQAme1DSJYDG8jy0rixR7OdKADa8W4ivq4pk9cls8dj1YXTd88SVM9RW0ux9wE/rykDutlLZc/Eeul3y7xUb5uaGHpffyc5E36gPXXc9uDDwHCz3crVabXwx7TUDsGd5ETa9Vyhz+PeTcWw/PxDzQlJVQTMAJIA183JDr7TC5fIgizujvlTFFpdfTQHE5THNKlEA9LV4Cl+Lp0NvoF0gdhdIv21zGrackZ5tS+dE6slWKj7qvNUmAgc0dJo+UqL4a0/z+zsnBZCOW2e1IsiIwrLu5orXNlfpYvO0FgBEQWi/tr2iTaqlvFgHIJ22z6sAMAJRPMtA/EV658Oa/wJolqxfGeNBmwAAAABJRU5ErkJggg=="},"200e":function(e,t,a){"use strict";a("8760")},4133:function(e,t,a){"use strict";a("973f")},4551:function(e,t){e.exports="data:image/png;base64,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"},"462b":function(e,t,a){e.exports=a.p+"img/6.4fb8f45e.png"},"49cf":function(e,t,a){var s=a("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#808191;",d:"M147.606,67.158q-.2.222-.369.394l-.3.3a3.363,3.363,0,0,1-.271.246l-3.325-3.35q.2-.2.493-.468t.493-.419a1.45,1.45,0,0,1,1.059-.345,2.553,2.553,0,0,1,.911.222,3.346,3.346,0,0,1,.825.69,3.912,3.912,0,0,1,.7,1.034,3.168,3.168,0,0,1,.16.813A1.114,1.114,0,0,1,147.606,67.158ZM138.2,69.892l3.818-3.818L145.34,69.4q-2.094,2.094-3.818,3.793-.739.714-1.441,1.416T138.8,75.865q-.579.554-.948.924l-.443.443a4.227,4.227,0,0,1-.394.345,2.45,2.45,0,0,1-.493.3q-.271.123-.751.3t-1,.333q-.517.16-.985.3a4.376,4.376,0,0,1-.714.16q-.468.049-.5-.086a1.879,1.879,0,0,1,.037-.6q.025-.246.123-.727t.2-.973q.1-.493.209-.924a4.73,4.73,0,0,1,.185-.6,3.071,3.071,0,0,1,.259-.468,3.28,3.28,0,0,1,.382-.443Zm8.35,3.571a2.087,2.087,0,0,1,.985.246A1.033,1.033,0,0,1,148,74.72v5.591a3.074,3.074,0,0,1-.259,1.268,3.234,3.234,0,0,1-.7,1.01,3.176,3.176,0,0,1-1.01.665,3.007,3.007,0,0,1-1.158.234H131.128a2.761,2.761,0,0,1-1.158-.259,3.276,3.276,0,0,1-1-.7,3.6,3.6,0,0,1-.7-1.047A3.121,3.121,0,0,1,128,80.188V66.468a2.241,2.241,0,0,1,.271-1.022,3.8,3.8,0,0,1,.7-.961,3.966,3.966,0,0,1,.973-.714,2.321,2.321,0,0,1,1.084-.283h5.739a1.022,1.022,0,0,1,.973.5,2.069,2.069,0,0,1,.283,1.022,1.937,1.937,0,0,1-.283,1,1.036,1.036,0,0,1-.973.48h-4.507a1.071,1.071,0,0,0-.837.357,1.263,1.263,0,0,0-.32.874V79.3a1.143,1.143,0,0,0,.32.825,1.11,1.11,0,0,0,.837.333h11.4a1.28,1.28,0,0,0,.887-.333,1.065,1.065,0,0,0,.369-.825V74.72a1.061,1.061,0,0,1,.16-.591,1.289,1.289,0,0,1,.394-.394,1.594,1.594,0,0,1,.517-.209A2.6,2.6,0,0,1,146.547,73.463Z",transform:"translate(-128 -63.488)"}}]})}},"4bc1":function(e,t,a){"use strict";a("1036")},"4bd5":function(e,t,a){e.exports=a.p+"img/0.b1ca977a.png"},"4e45":function(e,t,a){var s=a("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"21.64",viewBox:"0 0 28 21.64"},children:[{tag:"defs"},{tag:"g",attrsMap:{transform:"translate(-0.067 -0.001)"},children:[{tag:"path",attrsMap:{class:"a",d:"M231.788,11.965a6.5,6.5,0,1,0-7.057,0,.543.543,0,0,1-.091.954,9.515,9.515,0,0,0-5.734,7.137,1.358,1.358,0,0,0,1.345,1.584h16.021a1.358,1.358,0,0,0,1.344-1.584,9.512,9.512,0,0,0-5.734-7.131.543.543,0,0,1-.088-.959Z",transform:"translate(-214.193 0)"}},{tag:"path",attrsMap:{class:"a",d:"M28.054,186.476a6.3,6.3,0,0,0-3.8-4.72.357.357,0,0,1-.058-.632,4.3,4.3,0,0,0-2.1-7.91,4.374,4.374,0,0,0-.536.005,7.994,7.994,0,0,1-1.89,8.553,11.013,11.013,0,0,1,4.757,5.751h2.735a.9.9,0,0,0,.893-1.047Zm-19.594-4.7a8.032,8.032,0,0,1-1.894-8.557l-.064,0a4.3,4.3,0,0,0-2.565,7.91.357.357,0,0,1-.06.632,6.3,6.3,0,0,0-3.8,4.721.9.9,0,0,0,.892,1.049H3.706a11.013,11.013,0,0,1,4.753-5.75Z",transform:"translate(0 -169.544)"}}]}]})}},5399:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA1FJREFUWEe92DtoFFEUBuD/jI8kYOGjsbCwECwVFLTQQtBCRDRooWAjCgoWyWqQgMK9Z+MDLLIzkkaMhZUpFFNEUEhhEVBQ0M5ABBuLFCFRtIgkmV9m1pVNsrPzzlQLe+653565c/beETRd1aq3z/fRD/AoRDY3fxf7mfxI+udVr3+NjW0KGBhwdy8tiQvwIIDvAMbIubuq+jsIk0asqneLpIXI+jQTLIslR63t7U46XrV2gnRGINi0Is8EyZOqlR8hUNUzBGzSxJFxxLy1PV1J8hjzYLtIxzcIOlvGE+Pk7HGpVt0Dvo+JXJX7PwMXrendkAQYxBhTOyuOPANa3zWBXBVr3ZcQOZ00ads44rW1PcfT5IpBfhar3hyAdA9Ea8EkuNBtbd9kFFDVPVOvXO+L5phIJPE7ALJ1Qs7QD5/K8TQVaYcjMRI+mYJziZDEeCSQvl9RrbiF4hodglxMgJymv3S4HfCIauVtXmBwW8PKrWxfbZFODVw4FiyXUoGRuMavjkSaTlWdD5dD1Bqk7+eqYCwuBtn4uhRgYtwyJE8bU3m1ckkVDkyNC0TEJPnniOrN6VKBReMKXYNl4AoDloUrBFgmLjewbFwu4FrgMgPXCpcJWBauWn24x/f9IYgcCnshOeE46EvVqFW9UySfp9p9t2nCjaZsjOkUZ+sUgB3LGjWRfLNQP0Ns/JLqtJcAV9/A1naK43xrtXNKXMHw1AfcSbz9SogrDGit9w6C4OwafxETwYmscbaNG5C7guEakS2/Eq29lLhCKmjM4H5x1n2IqwQy4AoBqnrXCAy1BWbEFQK01nsMweUI4A+QQ+ScqupibJVbBOReg1a9d8CyB2S+fjv5FJgbTfowROGLAH4KD/fkW0DekLNjeVHN2NzALLctzRhjBneJsy74J1l1RTZqAa8a0/sozURZY1XdS4QMpwKCnBHBhY6Orvf9/Vd+Zp283bh794a2LSwsHiVleNU7wn8Dxao7BciuMgAF5JyWmBZSwBw5UpCjYkxtrzjyIeolYo70uYfS58nwFbC1DwcgvJ07Y5EJiBFre86HQGPMepGt9yHoK3KOzLmI5+TsxaDX/n/LX4e6h0RwAyLBtmp75gkyDeQMKO8B/4m1ldFGir8fcc419qfJGAAAAABJRU5ErkJggg=="},"53a3":function(e,t,a){e.exports=a.p+"img/1.3740e00d.png"},5952:function(e,t,a){},"5f34":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"my-content"},[s("div",{staticClass:"content-wrapper"},[s("a-skeleton",{attrs:{loading:e.skeletonLoading,active:""}},[s("div",{staticClass:"content-list"},[s("a-list",{attrs:{size:"large",pagination:e.pagination,"data-source":e.myContentList,loading:e.loading},scopedSlots:e._u([{key:"renderItem",fn:function(t){return s("a-list-item",{key:"item.key",class:{"my-list-item":!0,"active-item":-1!==e.mySelectedList.indexOf(t.type+"-"+t.id)},on:{click:function(a){return e.handleToggleSelect(t)}}},[s("div",{staticClass:"my-list-item-info"},[s("div",{staticClass:"select-block",on:{click:function(a){return e.handleSelectItem(t,a)}}},[-1===e.mySelectedList.indexOf(t.type+"-"+t.id)?s("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):e._e(),-1!==e.mySelectedList.indexOf(t.type+"-"+t.id)?s("div",{staticClass:"selected-icon"},[s("img",{attrs:{src:a("7aa6")}})]):e._e()],1),s("span",{staticClass:"content-info-left",on:{click:function(a){return e.handleSelectItem(t,a)}}},[s("content-type-icon",{attrs:{type:t.type}}),s("span",{staticClass:"name-content"},[s("span",{staticClass:"name-text"},[e._v(" "+e._s(t.name?t.name:"Untitled")+" ")])])],1),s("span",{staticClass:"content-info-right"},[s("span",{staticClass:"link-status",on:{click:function(a){return e.handleSelectItem(t,a)}}},[e._v(" Linked ")]),s("span",{staticClass:"status",on:{click:function(a){return e.handleSelectItem(t,a)}}},[0===t.status?[e._v("Draft")]:e._e(),1===t.status?[e._v("Published")]:e._e()],2),s("span",{staticClass:"update-time",on:{click:function(a){return e.handleSelectItem(t,a)}}},[e._v(" "+e._s(e._f("dayjs")(t.updateTime||t.createTime))+" ")]),s("div",{staticClass:"action"},[s("div",{staticClass:"action-wrapper"},[s("div",{staticClass:"action-item",on:{click:function(e){t.expand=!t.expand}}},[t.expand?s("arrow-top"):s("arrow-down")],1)])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.expand&&t.forms.length,expression:"item.expand && item.forms.length"}],staticClass:"my-list-expand"},[s("div",{staticClass:"form-list"},e._l(t.forms,(function(t,a){return s("div",{key:a,class:{"form-item":!0,"form-item-active":-1!==e.selectedFormIdList.indexOf(t.formId)}},[s("div",{staticClass:"form-mask",on:{click:function(a){return e.handleAddFormItem(t)}}}),s("evaluation-table",{ref:"evaluationTable",refInFor:!0,attrs:{"form-id":t.formId,"init-raw-headers":t.initRawHeaders,"init-raw-data":t.initRawData,"form-type":t.formType,mode:e.EvaluationTableMode.Preview}})],1)})),0)])])}}])}),s("div",{staticClass:"modal-ensure-action-line"},[s("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:e.handleCancel}},[e._v("Cancel")]),s("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:e.handleEnsure}},[e._v("Confirm")])],1)],1)])],1)])},i=[],n=(a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("4de4"),a("159b"),a("a434"),a("ac1f"),a("1276"),a("c740"),a("823b")),o=a("9afb"),r=a("3f76"),l=a("8f46"),d=a("57a5b"),c=a("69b3"),u=a("9501"),m=a.n(u),f=a("91e8"),h=a.n(f),v=a("9f06"),p=a("90e8"),g=a("1138"),b={name:"SelectEvaluationList",components:{ContentTypeIcon:l["a"],NoMoreResources:c["a"],ArrowTop:m.a,ArrowDown:h.a,EvaluationTable:g["a"]},props:{taskId:{type:String,required:!1,default:null},classId:{type:String,required:!1,default:null},hiddenEvaluationId:{type:String,default:function(){return[]}}},data:function(){var e=this;return{skeletonLoading:!0,loading:!0,loadFailed:!1,myContentList:[],displayMode:d["a"],EvaluationTableMode:p["a"],pagination:{onChange:function(t){n["info"]("pagination onChange",t),e.pageNo=t,e.loadMyContent()},showTotal:function(e){return"Total ".concat(e," items")},total:0,pageSize:10},pageNo:1,typeMap:r["e"],mySelectedList:[],mySelectedMap:new Map,selectedFormIdList:[],selectedFormList:[]}},created:function(){this.$logger.info("SelectEvaluationList taskId "+this.taskId+" classId "+this.classId+" hiddenEvaluationId "+this.hiddenEvaluationId),this.loadMyContent()},methods:{loadMyContent:function(){var e=this;this.loading=!0,Object(o["FindMyContent"])({owner:r["c"][this.currentOwner],types:[r["e"].evaluation],pageNo:this.pageNo,pageSize:this.pagination.pageSize,currentId:this.currentId}).then((function(t){if(n["info"]("loadMyContent",t),t.result&&t.result.records&&t.result.records.length){t.result.records=t.result.records.filter((function(t){return t.id!==e.hiddenEvaluationId})),t.result.records.forEach((function(e,t){e.key=t,e.expand=!1}));var a=t.result.records;a.forEach((function(e){e.forms=[]})),e.myContentList=t.result.records,e.pagination.total=t.result.total}else e.myContentList=[],e.pagination.total=0;n["info"]("myContentList",e.myContentList)})).finally((function(){e.loading=!1,e.skeletonLoading=!1}))},handleSelectItem:function(e,t){n["info"]("handleSelectItem",e),t.preventDefault(),t.stopPropagation();var a=e.type+"-"+e.id,s=this.mySelectedList.indexOf(a);-1!==s?(this.mySelectedList.splice(s,1),this.mySelectedMap.delete(a)):(this.mySelectedList.push(a),this.mySelectedMap.set(a,e)),this.$logger.info("mySelectedList",this.mySelectedList)},handleToggleSelect:function(e){var t=this;n["info"]("handleToggleSelect",e),e.expand&&Object(v["EvaluationQueryByIds"])({ids:[e.id]}).then((function(a){t.$logger.info("handleToggleSelect EvaluationQueryByIds "+e.id,a);var s=[];a.result.forEach((function(e){e.forms.forEach((function(e){s.push({title:e.title,titleEditing:!1,formType:e.formType,se:e.se,pe:e.pe,menuVisible:!1,id:e.id,formId:e.formId,initRawHeaders:JSON.parse(e.initRawHeaders),initRawData:JSON.parse(e.initRawData)})}))})),e.forms=s,0===e.forms.length&&t.$message.warn("The current assessment tool form has not been created")}))},handleCancel:function(){this.$logger.info("cancel"),this.$emit("cancel")},handleEnsure:function(){this.$logger.info("handleEnsure");var e=[];this.mySelectedList.forEach((function(t){e.push(t.split("-")[1])}));var t={evaluationIdList:e,selectedFormList:this.selectedFormList};this.$emit("selected",t)},handleAddFormItem:function(e){n["info"]("handleAddFormItem",e);var t=this.selectedFormList.findIndex((function(t){return t.formId===e.formId}));-1!==t?this.selectedFormList.splice(t,1):this.selectedFormList.push(e);var a=[];this.selectedFormList.forEach((function(e){a.push(e.formId)})),this.selectedFormIdList=a}}},I=b,E=(a("200e"),a("0c7c")),w=Object(E["a"])(I,s,i,!1,null,"2dba5a7f",null);t["a"]=w.exports},"66a8":function(e,t){e.exports="data:image/png;base64,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"},7735:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ppt-slide-view"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"score-number-item"},[s("score-number",{attrs:{score:e.studentScore}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.mode,expression:"mode"}],staticClass:"go-session-detail"},[s("a-space",[s("a-button",{attrs:{shape:"round",type:"primary",disabled:e.loading},on:{click:e.handleEnsureEvidence}},[e._v("Confirm")]),s("a-button",{attrs:{shape:"round"},on:{click:e.handleCancelEvidence}},[e._v("Cancel")])],1)],1),e.loading?e._e():s("div",{staticClass:"student-profile"},[s("div",{staticClass:"student-info"},[s("div",{staticClass:"student-name"},[e._v("Student :")]),e._v(" "+e._s(e.studentName)+" ")])]),e.loading?e._e():s("div",{staticClass:"tips"},[s("h3",[e._v("Multiple choice")])]),e.loading?e._e():s("div",{staticClass:"slide-content-list",style:{height:e.mode?"calc(100vh - 200px)":"400px"}},[e._l(e.slideDataList,(function(t,i){return s("div",{key:i,class:{"slide-comment-item":!0,"active-slide-item":-1!==e.selectedSlidePageIdList.indexOf(t.pageObjectId)||-1!==e.selectedStudentSlidePageIdList.indexOf(t.pageObjectId)},attrs:{"data-pageObjectId":t.pageObjectId,"data-selectedSlidePageIdList":JSON.stringify(e.selectedSlidePageIdList)},on:{click:function(a){return e.handleAddSlideItem(t)}}},[s("div",{staticClass:"slide-header-label"},[s("h3",[e._v("Slide "+e._s(i+1))]),s("div",{staticClass:"selected-icon"},[-1!==e.selectedSlidePageIdList.indexOf(t.pageObjectId)?s("div",{staticClass:"icon-item"},[s("teacher-icon")],1):e._e(),-1!==e.selectedStudentSlidePageIdList.indexOf(t.pageObjectId)?s("div",{staticClass:"icon-item"},[s("student-icon")],1):e._e()])]),s("div",{staticClass:"slide-body"},[s("div",{staticClass:"slide-img"},[s("img",{attrs:{src:t.contentUrl,"data-url":t.contentUrl},on:{click:function(t){return e.handleClickImg(t)}}}),s("div",{staticClass:"top-icon-groups"},[Object.keys(t.material).length>0?s("a-col",{staticClass:"material-row"},[s("div",{staticClass:"icon-group"},[t.material.hasOwnProperty("text")?s("a-badge",{attrs:{count:t.material["text"]?t.material["text"].length:0}},[s("div",{staticClass:"icon",on:{click:function(a){return e.showPluginMaterial(t,"text")}}},[s("text-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Text")])],1)]):e._e(),t.material.hasOwnProperty("image")?s("a-badge",{attrs:{count:t.material["image"]?t.material["image"].length:0}},[s("div",{staticClass:"icon",on:{click:function(a){return e.showPluginMaterial(t,"image")}}},[s("image-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Image")])],1)]):e._e(),t.material.hasOwnProperty("video")?s("a-badge",{attrs:{count:t.material["video"]?t.material["video"].length:0}},[s("div",{staticClass:"icon",on:{click:function(a){return e.showPluginMaterial(t,"video")}}},[s("video-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Video")])],1)]):e._e(),t.material.hasOwnProperty("audio")?s("a-badge",{attrs:{count:t.material["audio"]?t.material["audio"].length:0}},[s("div",{staticClass:"icon",on:{click:function(a){return e.showPluginMaterial(t,"audio")}}},[s("audio-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Audio")])],1)]):e._e(),t.material.hasOwnProperty("iframe")?s("a-badge",{attrs:{count:t.material["iframe"]?t.material["iframe"].length:0}},[s("div",{staticClass:"icon",on:{click:function(a){return e.showPluginMaterial(t,"iframe")}}},[s("youtube-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Youtube")])],1)]):e._e(),t.material.hasOwnProperty("pdf")?s("a-badge",{attrs:{count:t.material["pdf"]?t.material["pdf"].length:0}},[s("div",{staticClass:"icon",on:{click:function(a){return e.showPluginMaterial(t,"pdf")}}},[s("pdf-type-svg"),s("div",{staticClass:"icon-text"},[e._v("PDF")])],1)]):e._e(),t.material.hasOwnProperty("website")?s("a-badge",{attrs:{count:t.material["website"]?t.material["website"].length:0}},[s("div",{staticClass:"icon",on:{click:function(a){return e.showPluginMaterial(t,"website")}}},[s("url-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Website")])],1)]):e._e()],1)]):e._e()],1)]),s("div",{staticClass:"slide-response"},[s("div",{staticClass:"data-list"},[t.commentList.length?s("div",{staticClass:"data-item"},[s("div",{staticClass:"comment-bg",on:{click:function(e){e.stopPropagation()}}},[s("img",{staticClass:"cover",attrs:{src:t.contentUrl}}),s("img",{staticClass:"expand-icon",attrs:{src:a("d815")},on:{click:function(a){return a.stopPropagation(),e.handleViewExpand(t)}}}),e._l(t.commentList,(function(e,t){return s("div",{key:t,staticClass:"dot-item",style:{position:"absolute",border:"2px solid #aaa",backgroundColor:e.background,left:e.left/e.content_width*280+"px",top:e.top/e.content_height*160+"px"}})}))],2)]):e._e(),t.material&&t.material.hasOwnProperty("image")?s("div",{staticClass:"img-item-list",on:{click:function(e){e.stopPropagation()}}},e._l(t.material.image,(function(t,a){return s("div",{key:a,staticClass:"img-item",on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"img-cover",style:{"background-image":"url('"+t.url+"')"}}),s("div",{staticClass:"view-item",on:{click:function(a){return a.stopPropagation(),e.handleViewItem(t.url)}}},[e._v("View "),s("a-icon",{attrs:{type:"eye"}})],1)])})),0):e._e(),t.material&&t.material.hasOwnProperty("audio")?s("div",{staticClass:"audio-item-list"},e._l(t.material.audio,(function(e,t){return s("div",{key:t,staticClass:"audio-item",on:{click:function(e){e.stopPropagation()}}},[s("img",{staticClass:"img-icon",attrs:{src:a("1707")}}),s("div",{staticClass:"audio-view"},[s("audio",{attrs:{controls:"",src:e.url}})])])})),0):e._e(),t.material&&t.material.hasOwnProperty("video")?s("div",{staticClass:"video-item-list"},e._l(t.material.video,(function(e,t){return s("div",{key:t,staticClass:"video-item",on:{click:function(e){e.stopPropagation()}}},[s("img",{staticClass:"img-icon",attrs:{src:a("66a8")}}),s("div",{staticClass:"video-view"},[s("video",{attrs:{controls:"",src:e.url}})])])})),0):e._e(),e._l(t.responseList,(function(t,a){return s("div",{key:a,staticClass:"data-item"},["media"===t.itemData.type?["audio"===t.responseData.content.mediaType?[s("audio",{attrs:{src:t.responseData.content.link,controls:""}})]:e._e()]:e._e(),"audio"===t.responseData.type?[s("audio",{attrs:{src:t.responseData.content.link,controls:""}})]:e._e(),"draw"===t.responseData.type?[s("img",{attrs:{src:t.responseData.content}})]:e._e(),"text"===t.responseData.type?[e._v(" "+e._s(t.responseData.content)+" ")]:e._e(),t.itemData&&t.itemData.data&&t.itemData.data.options?[s("div",{staticClass:"option-list",on:{click:function(e){e.stopPropagation()}}},e._l(t.itemData.data.options,(function(t,a){return s("div",{key:a,staticClass:"option-item"},[s("a-radio",{attrs:{checked:t.isAnswer}},[e._v(e._s(t.text))]),t.isAnswer?s("span",{staticClass:"correct-option"},[e._v("Correct answer")]):e._e()],1)})),0)]:e._e()],2)}))],2)]),s("div",{staticClass:"slide-comment"},[s("div",{staticClass:"teacher-data",on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"teacher-score"},[s("a-row",{staticClass:"score-item",attrs:{gutter:5}},[s("a-col",{attrs:{span:"5"}},[s("h3",{staticStyle:{"text-align":"right"}},[e._v("Score")])]),s("a-col",{attrs:{span:"16"}},[s("a-input",{attrs:{placeholder:"Max 10",type:"number",min:"0",max:"10"},nativeOn:{keyup:function(e){e.stopPropagation(),t.score=t.score>10?10:t.score}},model:{value:t.score,callback:function(a){e.$set(t,"score",a)},expression:"slideItem.score"}})],1)],1),s("div",{staticClass:"comment-list"},e._l(t.teacherCommentList,(function(t,a){return s("div",{key:a,staticClass:"comment-item"},[s("div",{staticClass:"comment-user-info"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:t.avatar}})]),s("div",{staticClass:"profile"},[s("div",{staticClass:"name"},[e._v(e._s(t.createBy))]),s("div",{staticClass:"time"},[e._v(e._s(e._f("formatDate")(t.createTime)))])])]),s("div",{staticClass:"comment-detail"},[e._v(e._s(t.comment))])])})),0),s("div",{staticClass:"comment-add"},[s("div",{staticClass:"add-comment-wrapper"},[s("div",{staticClass:"comment-input-wrapper"},[s("div",{staticClass:"input"},[s("evidence-comment-input",{attrs:{extra:t},on:{send:e.handleAddComment}})],1)])])])],1)]),s("div",{staticClass:"action-item"},[e.mode===e.EvaluationTableMode.TeacherEvaluate?[-1!==e.selectedSlidePageIdList.indexOf(t.pageObjectId)?[e._m(0,!0)]:e._e(),-1===e.selectedSlidePageIdList.indexOf(t.pageObjectId)?[e._m(1,!0)]:e._e()]:e._e(),e.mode===e.EvaluationTableMode.StudentEvaluate?[-1!==e.selectedStudentSlidePageIdList.indexOf(t.pageObjectId)?[e._m(2,!0)]:e._e(),-1===e.selectedStudentSlidePageIdList.indexOf(t.pageObjectId)?[e._m(3,!0)]:e._e()]:e._e()],2)])])])})),s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px",zIndex:6e3,title:"My Materials"},on:{ok:function(t){e.materialVisible=!1},cancel:function(t){e.materialVisible=!1}},model:{value:e.materialVisible,callback:function(t){e.materialVisible=t},expression:"materialVisible"}},[s("task-material-preview",{attrs:{"current-page-element-lists":e.currentPageElementLists,"filter-type":e.filterMaterialType}})],1),s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"900px",zIndex:5e3,title:null},on:{ok:function(t){e.mediaVisible=!1},cancel:function(t){e.mediaVisible=!1}},model:{value:e.mediaVisible,callback:function(t){e.mediaVisible=t},expression:"mediaVisible"}},[s("media-preview",{attrs:{"media-list":e.mediaList,"material-type":e.filterMaterialType}})],1),s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"1000px",zIndex:5e3,title:null},on:{ok:function(t){e.viewSlideItemVisible=!1},cancel:function(t){e.viewSlideItemVisible=!1}},model:{value:e.viewSlideItemVisible,callback:function(t){e.viewSlideItemVisible=t},expression:"viewSlideItemVisible"}},[s("slide-preview",{attrs:{"slide-item":e.currentViewSlideItem}})],1)],2),e.loading?s("div",{staticClass:"loading"},[s("a-spin")],1):e._e(),s("a-modal",{attrs:{destroyOnClose:"",footer:null,closable:!1,width:"800px",bodyStyle:{padding:"0px"}},on:{ok:function(t){e.previewItemVisible=!1}},model:{value:e.previewItemVisible,callback:function(t){e.previewItemVisible=t},expression:"previewItemVisible"}},[s("div",{staticClass:"preview-item"},[s("img",{staticClass:"preview-img",attrs:{src:e.previewItemUrl},on:{load:function(t){e.previewLoading=!1}}}),e.previewLoading?s("div",{staticClass:"preview-loading"},[s("a-spin",{staticClass:"preview-loading"})],1):e._e()])])],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"action-btn-delete"},[s("div",{staticClass:"action-icon"},[s("img",{attrs:{src:a("8dab"),alt:""}})]),s("div",{staticClass:"text"},[e._v(" Delete ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"action-btn-add"},[s("div",{staticClass:"action-icon"},[s("img",{attrs:{src:a("ce1b"),alt:""}})]),s("div",{staticClass:"text"},[e._v(" Add ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"action-btn-delete"},[s("div",{staticClass:"action-icon"},[s("img",{attrs:{src:a("8dab"),alt:""}})]),s("div",{staticClass:"text"},[e._v(" Delete ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"action-btn-add"},[s("div",{staticClass:"action-icon"},[s("img",{attrs:{src:a("ce1b"),alt:""}})]),s("div",{staticClass:"text"},[e._v(" Add ")])])}],n=a("3835"),o=a("b85c"),r=a("5530"),l=(a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("a434"),a("b0c0"),a("8897")),d=a("9f06"),c=a("c621"),u=a("90e8"),m=a("519d"),f=a.n(m),h=a("a615f"),v=a.n(h),p=a("1b72"),g=a("873a"),b=a("542c"),I=a("8448"),E=a.n(I),w=a("998c"),A=a.n(w),C=a("4084"),y=a.n(C),S=a("8a21"),T=a.n(S),L=a("1eeb"),k=a.n(L),x=a("5a1d"),O=a.n(x),D=a("6631"),M=a.n(D),F=a("f4e6"),N=a("97e7"),U=a("de36"),B=a("2f59"),P={name:"PptSlideView",components:{ScoreNumber:N["a"],SlidePreview:F["a"],EvidenceCommentInput:U["a"],StudentIcon:f.a,TeacherIcon:v.a,MediaPreview:g["a"],TaskMaterialPreview:b["a"],TextTypeSvg:E.a,ImageTypeSvg:A.a,VideoTypeSvg:y.a,AudioTypeSvg:T.a,YoutubeTypeSvg:k.a,PdfTypeSvg:O.a,UrlTypeSvg:M.a},mixins:[B["a"]],props:{mode:{type:String,default:""},slideId:{type:String,required:!0},formId:{type:String,default:null},rowId:{type:String,default:null},classId:{type:String,default:null},sessionId:{type:String,default:null},selectedIdList:{type:Array,default:function(){return[]}},selectedIdStudentList:{type:Array,default:function(){return[]}},studentName:{type:String,default:null}},data:function(){return{loading:!0,EvaluationTableMode:u["a"],selectedSlidePageIdList:[],selectedStudentSlidePageIdList:[],rawSlideDataMap:new Map,slideDataList:[],elementsList:[],itemsList:[],materialVisible:!1,mediaVisible:!1,filterMaterialType:null,currentPageElementLists:[],mediaList:[],currentViewSlideItem:null,viewSlideItemVisible:!1,previewItemUrl:null,previewItemVisible:!1,previewLoading:!1}},watch:{studentName:function(){this.loadData()}},computed:{studentScore:function(){var e=0;return this.slideDataList.forEach((function(t){e+=parseInt(t.score)})),e},totalScore:function(){return 10*this.slideDataList.length}},created:function(){this.$logger.info("PptSlideView"+this.slideId+" classId "+this.classId,"selectedIdList",this.selectedIdList,"selectedIdStudentList",this.selectedIdStudentList,"studentName",this.studentName),this.selectedSlidePageIdList=this.selectedIdList,this.selectedStudentSlidePageIdList=this.selectedIdStudentList,this.loadData()},methods:{resetData:function(){this.rawSlideDataMap.clear(),this.slideDataList=[],this.elementsList=[],this.itemsList=[],this.currentPageElementLists=[],this.mediaList=[],this.materialVisible=!1,this.mediaVisible=!1,this.viewSlideItemVisible=!1,this.previewItemVisible=!1,this.previewLoading=!1,this.filterMaterialType=null,this.previewItemUrl=null,this.currentViewSlideItem=null},loadData:function(){var e=this;this.loading=!0,this.resetData(),this.$logger.info("加载PPT数据 "+this.classId+" slideId "+this.slideId+" formId"+this.formId+" rowId "+this.rowId),Promise.all([Object(c["d"])({taskId:this.formId}),Object(p["c"])({slideId:this.slideId}),Object(d["QuerySessionEvidence"])({sessionId:this.sessionId,user:this.studentName}),Object(p["d"])({classId:this.sessionId})]).then((function(t){if(e.$logger.info("加载PPT数据 response",t),t[2].result&&t[2].result.result){e.$logger.info("使用历史评估数据",t[2].result.result);var a=JSON.parse(t[2].result.result);e.$logger.info("解析历史数据",a),e.slideDataList=a.slideDataList,e.elementsList=a.elementsList,e.itemsList=a.itemsList,e.$logger.info("使用历史评估数据 this.slideDataList",e.slideDataList," this.elementsList",e.elementsList," this.itemsList",e.itemsList),e.loading=!1}else{if(t[0].code!==e.ErrorCode.ppt_google_token_expires&&t[0].code!==e.ErrorCode.ppt_forbidden){var s=t[0].result.pageObjects;s.length?(s.forEach((function(t){t.responseList=[],t.commentList=[],t.pageObjectId&&e.rawSlideDataMap.set(t.pageObjectId,t)})),e.loadStudentData()):(e.loading=!1,e.$logger.info("loaded data",e.imgList,e.commentData))}t[1].success&&(e.elementsList=t[1].result.relements,e.itemsList=t[1].result.items)}}))},handleAuthCallback:function(){this.$logger.info("handleAuthCallback"),this.loadData()},loadStudentData:function(){var e=this;this.$logger.info("loadStudentData",this.rawSlideDataMap),Object(l["a"])({class_id:this.sessionId}).then((function(t){e.$logger.info("GetStudentResponse response",t);var a=t.data.presentation_comments;a.forEach((function(t){var a=JSON.parse(t.data),s=a.page_id,i=e.rawSlideDataMap.get(s);i?(i.commentList.push(Object(r["a"])(Object(r["a"])({},a),{},{user_id:t.user_id})),e.rawSlideDataMap.set(s,i)):e.$logger.warn("commentList no get slideIem by pageId "+s)}));var s=t.data.response,i=[];s.forEach((function(t){var a=JSON.parse(t.response_data),s=JSON.parse(t.item_data),n=t.response_type,o=t.student_user_id,r=a.page_id,l=e.rawSlideDataMap.get(r);l&&-1===i.indexOf(s.item_id)&&(i.push(s.item_id),e.$logger.info("find slideItem response "+a.page_id,s),l.responseList.push({responseData:a,itemData:s,responseType:n,studentUserId:o}),e.rawSlideDataMap.set(r,l))})),e.$logger.info("after set rawSlideDataMap ",e.rawSlideDataMap);var l,d=Object(o["a"])(e.rawSlideDataMap);try{var c=function(){var t=Object(n["a"])(l.value,2),a=t[0],s=t[1],i={};e.elementsList.forEach((function(e){if(a===e.pageId){var t=JSON.parse(e.data);"tip"!==t.type&&(i.hasOwnProperty(t.type)||(i[t.type]=[]),i[t.type].push(t))}})),e.slideDataList.push(Object(r["a"])(Object(r["a"])({},s),{},{pageId:a,material:i,score:0,teacherCommentList:[]})),s.commentList.length&&e.$logger.info("commentList have data"+JSON.stringify(s)),s.responseList.length&&e.$logger.info("responseList have data"+JSON.stringify(s))};for(d.s();!(l=d.n()).done;)c()}catch(u){d.e(u)}finally{d.f()}e.$logger.info("slideDataList",e.slideDataList)})).finally((function(){e.loading=!1}))},showPluginMaterial:function(e,t){var a=e.material[t],s=e.pageId;this.$logger.info("showPluginMaterial ",e,t);var i=[];0!==this.slideDataList.length&&this.elementsList.forEach((function(e){if(s===e.pageId){var t=JSON.parse(e.data);i.push(t)}})),this.currentPageElementLists=i,"text"===t||"website"===t||"pdf"===t?a.length>1?(this.filterMaterialType=t,this.materialVisible=!0):"tip"!==a[0].type&&window.open(a[0].url,"_blank"):(this.mediaList=a,this.filterMaterialType=t,this.mediaVisible=!0)},handleAddSlideItem:function(e){if(this.$logger.info("handleAddSlideItem",e),this.mode===u["a"].TeacherEvaluate){var t=this.selectedSlidePageIdList.indexOf(e.pageId);-1!==t?this.selectedSlidePageIdList.splice(t,1):this.selectedSlidePageIdList.push(e.pageId)}else if(this.mode===u["a"].StudentEvaluate){var a=this.selectedStudentSlidePageIdList.indexOf(e.pageId);-1!==a?this.selectedStudentSlidePageIdList.splice(a,1):this.selectedStudentSlidePageIdList.push(e.pageId)}},handleClickImg:function(e){this.$logger.info("handleClickImg",e),e.target.src=e.target.src+"#"+(new Date).getTime()},handleEnsureEvidence:function(){var e=this;this.$logger.info("handleEnsureEvidence "+this.mode,this.mode===u["a"].TeacherEvaluate?this.selectedSlidePageIdList:this.selectedStudentSlidePageIdList);var t={slideDataList:this.slideDataList,elementsList:this.elementsList,itemsList:this.itemsList};this.$logger.info("保存evaluation数据",t),Object(d["SaveSessionEvidence"])({sessionId:this.sessionId,user:this.studentName,result:JSON.stringify(t)}).then((function(){e.$emit("ensure-evidence-finish",{mode:e.mode,data:e.mode===u["a"].TeacherEvaluate?e.selectedSlidePageIdList:e.selectedStudentSlidePageIdList,row:e.rowId,user:e.studentName,formId:e.formId,slideDataList:JSON.stringify(e.slideDataList)})}))},handleCancelEvidence:function(){this.$emit("cancel-evidence-finish")},handleAddComment:function(e){this.$logger.info("handleAddComment",e),e.extra.teacherCommentList.push({comment:e.inputValue,avatar:this.$store.getters.avatar,createBy:this.$store.state.user.name,createTime:(new Date).getTime()})},handleViewExpand:function(e){this.$logger.info("handleViewExpand",e),this.currentViewSlideItem=e,this.viewSlideItemVisible=!0},handleViewItem:function(e){this.previewItemUrl=e,this.previewItemVisible=!0,this.previewLoading=!0}}},j=P,_=(a("93ba"),a("0c7c")),R=Object(_["a"])(j,s,i,!1,null,"1a73cb12",null);t["a"]=R.exports},"7aa6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAABWlJREFUWEfVmX9MHFUQx7/THvGuLaAUKNge7Qnyo9IgAYUWjNo0NipEaqgl0QQbDOgfNcFEA4l/mNSERhJJ1Kgl4o9EE6pVUUi1ptLGKumlJaQttaAVECilSLFAhSP8eGaWXXK3t3e7e3do+/7Zy723bz47b2bevHmEIJoQIg9AAYAkAHEANshPnnUYwKD87ALwPRH9Eqg4MvuiEOJBAM/KgNEm3x8F0ALgA7PQhkGFECkADgAoUuB6pyfw3bU+tE+OYGR2CkMzU9KTW2zYKtita7DWYsX9EXF4JCoBDluE+3c1Aagiom4jH6sLKoSwAqgD8BwAyz/zs6gf6kTj1d/Q65owImNpjMMagZJ1ySi/Mx2rV4bx/3OsXQCVROTyN5lfUCEE293XAHLnxAI+Gb6Iuv4OjMxOmwJUD44Ns6EyIROlcWmw0AruPgVgFxGxXWs2n6BCiAzZnjb0uybxzK9H0TX1d1CA6pdTV92BTzfvRII1nLvY8QqI6KyWEE1QGfJnAGuc48Mo6zoWtBZ9fSFrtyF1B3IiefFwA0C+FqwXqLzcpznUNI/2oLy7FfNChFST6slWEqE+ZTsKo+/irj4AW9Vm4AEqO85xtknWZFFny7JDKtAM25ReoGiWV/NhImJnk5oa9D0Az7NNPnb2m2Vbbn9mcCTjCcVm3yeiF7xAhRCpAM7PiQXL9o6vQu44Rm2HHaw180mOBqzNNCK65KFRIQSHoaKGKxdQ/Ueb0XkDHsdLzaFpZmHea47axHyUxqfx/01EtGsJVN4WT3AwzzlzaNmXvCohGy/aMyTQhqELqO7xVAxHAmf2HmVTyCUip2SjQoiPeP+uG+hAzZ9nAtaSkRf3O3JRsX6Lx9Dyrh/RNNrj8V/1xmxU2jP5v4+JaC8JISwArgCIZm2a3RaNwCljtCC5782BDhxQKSjJdjvasnZz9ygRxTBoPoCTnGDktB8yI9fUWF+QPElx5xH8dP2y13zOrD1KIvMAg9ZwFvPu4Dm81uc0JdzoYH+Q/uTud2xFxfp0FvM6g37BH1V28Riar/UalW14nD/I+svn8Wov5yParXCtAw1pO7jzMIOe5P218Ny3cE5c1XyjOCZJSs04lLDDtV7n/EG/BQPJs2+LjEfTFj5A4ASDsho3ZZ1uxMDMpJd0t8FSH6d75V2taNHRfrCQLMt+Wzja7yvhn30Mysml1d72oWbwrdqYjZcWw8RS04MNBSQLW73Cgt5te/nnDV3QkthkvJXMxyTP5gs2VJBaoH6Xnre6L9Mfl+xFDzaUkFpLr+tMvASN9zyqpGCaZpATsc5rx1EG6nm3L7dUO5Oh8OQP1p//BwrJc6rDk+GAbxY2GEgGVQd8eQsdR07757rB0ShssJAM4sx6Cg5bJP+UtlDTSYkebCggvZISxlXSPK0sxpeKfcGGApJlusXvxTRPBn0IwHGziTPD1iTmSdUP3l7f6G/H24Oax3Jdk3IfoEqc+UR6aulwt3QU0ci49aQwsEvMh+zEWpuYh9L4zSzW8ygia/XWONzJsDfTcfkdItqnrOatWYCQtcpFoJu7pKOoWQhxL5+j/qciGXt5p9qB/ZUdGbaZi2X/UdmRi2OFWpAMbaqQ+9lwtxQr/wqykBsTZsMrCVl4Oi5FKeRyUWx3QIVcNzPwKo0fHOrE4ZHfcWl6XC/EevQn2SJRHHs3KrxL4/vcK3dak+rW8N2A+Yqm1vOyYRw/jPVLh8KxORcGXJMYm10sxUeFWWG3hiPKYgXnqouXDVKCoTS+bHhZKYLpfbFhUDdgzrbKgry+Ocjboh6ce79pUPeX5SrLTgC8q/Gd0yb5ycP4TokdhJ98IXaUiNgWA2r/AqKY1RuF7jn8AAAAAElFTkSuQmCC"},"7bd1":function(e,t,a){},"7e18":function(e,t,a){"use strict";a("c05b6")},"7ee9":function(e,t,a){e.exports=a.p+"img/5.2460f902.png"},"80a9":function(e,t,a){e.exports=a.p+"img/button_line_1.e8da84a5.png"},"81c4":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-row",{staticClass:"common-form-header"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.getters.hiddenHeader&&e.debounceHiddenHeader,expression:"$store.getters.hiddenHeader && debounceHiddenHeader"}],staticClass:"hover-bar",on:{mouseenter:e.handleMouseEnterOutHoverBar,mouseout:e.handleCancelBounce}}),s("a-col",{attrs:{span:"15"}},[s("a-space",[e.showBack?s("span",{staticClass:"back-icon"},[s("a-icon",{attrs:{type:"left"}})],1):e._e(),e.showBack?s("a-button",{staticClass:"nav-back-btn",attrs:{type:"link"},on:{click:e.handleBack}},[e._v(e._s(e.$t("teacher.add-lesson.back")))]):e._e(),s("span",[s("content-type-icon",{attrs:{type:e.form.type}})],1),e.form.type===e.typeMap.classSessionEvaluation?[s("div",{staticClass:"edit-form-name"},[s("div",{staticClass:"form-name"},[e._v(" "+e._s(e.form.className?e.form.className:"Untitled session")+" ")]),s("div",{staticClass:"class-name"},[e._v(" "+e._s(e.form.name?e.form.name:"Untitled className")+" ")])])]:e._e(),e.form.type===e.typeMap.evaluation?[s("div",{staticClass:"edit-form-name"},[s("div",{staticClass:"form-name"},[e.editFormNameMode?[s("a-input",{attrs:{maxLength:240},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnsureNewFormName.apply(null,arguments)},click:function(e){e.stopPropagation()}},model:{value:e.formName,callback:function(t){e.formName=t},expression:"formName"}})]:[e._v(e._s(e.form.name?e.form.name:"Untitled session"))]],2),s("div",{staticClass:"edit-icon",on:{click:function(t){t.stopPropagation(),e.editFormNameMode=!e.editFormNameMode}}},[s("img",{attrs:{src:a("5399"),alt:""}})])])]:e._e(),e.form.type!==e.typeMap.evaluation&&e.form.type!==e.typeMap.classSessionEvaluation?[e.lastChangeSavedTime?s("span",{staticClass:"unit-last-change-time"},[s("span",{staticClass:"unit-nav-title"},[e._v(" "+e._s(e.form.name?e.form.name:"Untitled")+" ")]),e.form.name?s("a-divider",{attrs:{type:"vertical"}}):e._e(),e._v(" "+e._s(e.$t("teacher.add-lesson.last-change-saved-at-time",{time:e.lastChangeSavedTime}))+" ")],1):e._e()]:e._e()],2)],1),s("a-col",{staticClass:"unit-right-action",attrs:{span:"9"}},[s("a-space",[e.showCollaborate?[s("div",{staticClass:"collaborate-users"},[e._l(e.collaborateUserList,(function(t,a){return a<5?s("div",{key:a,class:{"item-avator":!0,gray:-1===e.onlineUsers.indexOf(t.email)},style:{"z-index":1e3-a}},[s("a-tooltip",{attrs:{title:e.formatOnlineEmail(t.email),placement:"bottom"}},[s("a-badge",{attrs:{color:"green"}},[s("a-avatar",{staticClass:"user-item",attrs:{size:30,src:t.userAvatar}})],1)],1)],1):e._e()})),s("a-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.collaborateUserList.length>5,expression:"collaborateUserList.length > 5"}],attrs:{overlayStyle:{"z-index":"3000"}}},[s("a",{staticClass:"ant-dropdown-link",staticStyle:{"font-size":"16px","margin-left":"15px"}},[e._v(" +"+e._s(e.collaborateUserList.length-5)+" ")]),s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},e._l(e.collaborateUserList,(function(t,a){return a>4?s("a-menu-item",{key:a},[s("a-avatar",{class:{"user-item":!0,gray:-1===e.onlineUsers.indexOf(t.email)},attrs:{size:"small",src:t.userAvatar}}),e._v(" "+e._s(t.userName)+" ")],1):e._e()})),1)],1)],2),s("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.isOwner,expression:"isOwner"}],attrs:{placement:"bottom",title:"Collaborate"}},[s("div",{staticClass:"collaborate-comment",on:{click:e.handleStartCollaborate}},[s("collaborate-user-icon",{staticClass:"active-icon"})],1)]),e.isOwner||e.isEditCollaborater?s("div",{staticClass:"collaborate-comment",on:{click:e.handleViewComment}},[s("comment-icon",{staticClass:"active-icon"})],1):e._e()]:e._e(),s("a-button",{directives:[{name:"show",rawName:"v-show",value:e.showShare&&(e.isOwner||e.isEditCollaborater),expression:"showShare && (isOwner || isEditCollaborater)"}],staticClass:"my-form-header-btn",on:{click:e.handleSharing}},[s("div",{staticClass:"btn-icon"},[s("a-icon",{style:{fontSize:"16px",color:"#15c39a"},attrs:{type:"share-alt"}})],1),s("div",{staticClass:"btn-text"},[e.isShare?[e._v(" Sharing ")]:[e._v(" Share ")]],2)]),s("a-button",{directives:[{name:"show",rawName:"v-show",value:e.isOwner||e.isEditCollaborater,expression:"isOwner || isEditCollaborater"}],staticClass:"my-form-header-btn",attrs:{loading:e.saving},on:{click:e.handleSave}},[s("div",{staticClass:"btn-icon"},[s("img",{attrs:{src:a("4551")}})]),s("div",{staticClass:"btn-text",attrs:{"data-isOwner":e.isOwner+"","data-isEditCollaborater":e.isEditCollaborater+""}},[e._v(" Save ")])]),e.isOwner&&0===e.form.status&&e.form.type!==e.typeMap.classSessionEvaluation?s("a-button",{staticClass:"my-form-header-btn",attrs:{loading:e.publishing},on:{click:function(t){return e.handlePublish(1)}}},[s("div",{staticClass:"btn-icon"},[s("img",{attrs:{src:a("f7b2")}})]),s("div",{staticClass:"btn-text",attrs:{"data-isOwner":e.isOwner+"","data-form-status":e.form.status+""}},[e._v(" Publish ")])]):e._e(),e.isOwner&&1===e.form.status?s("a-button",{staticClass:"my-form-header-btn",attrs:{loading:e.publishing},on:{click:function(t){return e.handlePublish(0)}}},[s("div",{staticClass:"btn-icon"},[s("a-icon",{style:{fontSize:"16px",color:"#15c39a"},attrs:{theme:"filled",type:"down-square"}})],1),s("div",{staticClass:"btn-text",attrs:{"data-isOwner":e.isOwner+"","data-form-status":e.form.status+""}},[e._v(" Unpublish ")])]):e._e()],2),e.allowHiddenHeader?s("div",{staticClass:"hidden-top-header",style:{"background-color":(e.hiddenHeader,"#fff")}},[s("div",{staticClass:"hidden-toggle",on:{click:e.toggleHiddenHeader}},[e.hiddenHeader?[s("a-icon",{style:{fontSize:"16px",color:"#182552"},attrs:{type:"caret-down"}})]:e._e()],2)]):e._e()],1)],1)},i=[],n=(a("cd17"),a("ed3b")),o=a("5530"),r=(a("a9e3"),a("c740"),a("99af"),a("b0c0"),a("a434"),a("4de4"),a("a903")),l=a.n(r),d=a("09cf"),c=a.n(d),u=a("8f46"),m=a("3f76"),f=a("49cf"),h=a.n(f),v=a("2f62"),p=a("9fb0"),g=a("4fcf"),b=g.debounce,I={name:"CommonFormHeader",components:{CommentIcon:l.a,ContentTypeIcon:u["a"],EditIcon:h.a,CollaborateUserIcon:c.a},props:{form:{type:Object,default:function(){return null}},collaborate:{type:Object,default:function(){return null}},lastChangeSavedTime:{type:String,default:""},showCollaborate:{type:Boolean,default:!0},showBack:{type:Boolean,default:!0},shareStatus:{type:Number,default:0},showShare:{type:Boolean,default:!0},isPreviewMode:{type:Boolean,default:!1}},data:function(){return{publishing:!1,saving:!1,typeMap:m["e"],editFormNameMode:!1,formName:"",collaborateUserList:[],owner:{},isShare:!1,onlineUsers:[this.$store.getters.userInfo.email],debounceHiddenHeader:null}},computed:Object(o["a"])(Object(o["a"])({isOwner:function(){return this.$store.getters.userInfo.email===this.form.createBy},isCollaborater:function(){var e=this,t=this.collaborateUserList.findIndex((function(t){return t.email===e.$store.getters.userInfo.email}));return t>-1},isEditCollaborater:function(){var e=this,t=this.collaborateUserList.findIndex((function(t){return t.email===e.$store.getters.userInfo.email}));return t>-1&&"Edit"===this.collaborateUserList[t].permissions}},Object(v["e"])({removedCollaborate:function(e){return e.websocket.removedCollaborate},hiddenHeader:function(e){return e.app.hiddenHeader}})),{},{allowHiddenHeader:function(){return this.$route.meta.allowHiddenHeader}}),watch:{collaborate:function(e){this.owner=e.owner;var t=[this.$store.getters.userInfo.email].concat(e.onlineEmails);this.onlineUsers=t,this.formatUserList(e.users)},shareStatus:function(e){this.isShare=1===e},removedCollaborate:function(e){var t=this;e&&e.indexOf(this.form.id)>-1&&n["a"].error({title:"Alert",content:"You have been removed from the collaborating list of "+this.form.name,okText:"Ok",mask:!0,onOk:function(){t.$router.push({path:"/teacher/main/created-by-me"})}});var a=this.collaborate.users.findIndex((function(e){return e.email===t.$store.getters.userInfo.email}));a>-1&&this.collaborate.users.splice(a,1),this.removedCollaborateAction(!1)}},created:function(){this.$logger.info("form header name:"+this.form.name+" lastChangeSavedTime:"+this.lastChangeSavedTime),this.form&&this.form.name&&(this.formName=this.form.name),this.debounceHiddenHeader=b(this.toggleHiddenHeader,500)},methods:Object(o["a"])(Object(o["a"])({handleMouseEnterOutHoverBar:function(){this.debounceHiddenHeader()}},Object(v["b"])(["removedCollaborateAction"])),{},{formatUserList:function(e){var t=this,a=[];this.owner&&(a=[{userName:this.owner.nickname,userAvatar:this.owner.avatar,email:this.owner.email}]),e&&(a=a.concat(e.filter((function(e){return t.onlineUsers.indexOf(e.email)>-1&&e.email!==t.owner.email}))),a=a.concat(e.filter((function(e){return-1===t.onlineUsers.indexOf(e.email)&&e.email!==t.owner.email})))),this.collaborateUserList=a},handleBack:function(){this.$logger.info("handleBack"),this.isPreviewMode?this.$emit("back"):(this.isOwner,this.$router.push({path:"/teacher/main/created-by-me"}))},handleSave:function(){this.saving=!0,this.$logger.info("handleSave"),this.$emit("save")},handlePublish:function(e){this.publishing=!0,this.$logger.info("handlePublish"),this.$emit("publish",e)},handleStartCollaborate:function(){this.$logger.info("handleStartCollaborate"),this.$emit("collaborate")},handleViewComment:function(){this.$emit("view-collaborate")},handleEnsureNewFormName:function(){if(this.$logger.info("handleEnsureNewFormName "+this.form.name),this.editFormNameMode=!1,this.formName&&this.formName!==this.form.name){var e=Object.assign({},this.form);e.name=this.formName,this.$emit("update-form",e)}this.$logger.info("editFormNameMode "+this.editFormNameMode)},handleSharing:function(){this.sharing=!0,this.$logger.info("handleSharing"),this.$emit("share")},formatOnlineEmail:function(e){return e===this.form.createBy?"Owner: "+e:e},toggleHiddenHeader:function(){this.$logger.info("toggleHiddenHeader"),this.$store.commit(p["j"],!this.$store.getters.hiddenHeader)},handleCancelBounce:function(){this.$logger.info("handleCancelBounce"),this.debounceHiddenHeader.cancel()}})},E=I,w=(a("9bc1"),a("0c7c")),A=Object(w["a"])(E,s,i,!1,null,"b4133aa6",null);t["a"]=A.exports},8760:function(e,t,a){},8897:function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return r})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return u}));var s=a("ef87"),i={GetMyClasses:"/class/get_my_classes",TurnOnStudentPaced:"/class/turn_on_student_paced",EndSession:"/class/end_session",ReopenSession:"/class/reopen_session",NameSession:"/class/name_session",StartLesson:"/slide/start_lesson",GetStudents:"/class/get_students",GetStudentResponse:"/class/get_student_response",SlideGetAll:"/slide/get_all",GetClassMembers:"/class/get_class_members"};function n(e){return Object(s["a"])({url:i.TurnOnStudentPaced,method:"post",data:e})}function o(e){return Object(s["a"])({url:i.EndSession,method:"post",data:e})}function r(e){return Object(s["a"])({url:i.ReopenSession,method:"post",data:e})}function l(e){return Object(s["a"])({url:i.NameSession,method:"post",data:e})}function d(e){return Object(s["a"])({url:i.StartLesson,method:"post",data:e})}function c(e){return Object(s["a"])({url:i.GetStudents,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(s["a"])({url:i.GetStudentResponse,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"8dab":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAABKRJREFUWEfNWFtoFGcU/s4/yWaTmM1uVoRgHpqW9kF8EiRVm7q5QJpuZolIpIkQURCEPkQbIQHtmxf6YJu0BZ9UGi1K85LsbEgCQZO0Bm1BEASJtaiQYhHNZjddk2x25pSZdDe3vczkUvrDPOzOOef//u+c/1yGYHFxba0jJEQNhKhmoneZeTsB23UzDPwpiCbA/EzVtCFo2qC7vz9sZQsyKxzy+bwa8ykiKmfAZkaPgCiAUQ3oKPL7+0zqpBcL+3z7VOAigHIzBlPJMPMvIGov8vvvprOTkiFuaJBCMzNfMdEXIDLNZFrQzAzmr525uW3U3a0mk026UbC+3glN6wZQvR5WUrIFDJIQn7l6eqZWyqwCNOX1uiDEfSZ6fzPAJGwy/y6i0Q8LBwcnl+6zDJDupqm5uYHNYibJAYecOTmfLHXfMkBBn+97AJ9vKjMrjTN/61KUlvjfCUDBujoPhLizFjBSaSn0RwsGEXv4ENA0a2Y0rcIVCAzrSglAkz7fPQLKLFkSAnktLbB5PAk19cULRM6dg/bqlRVTYy6/f18CUNDr9UGSeq1Y0GVz6uuRe/Qo5h88QPT2bYMl+8GDiD16hL/PnLFkTtI0nyMQUAyGgrL8M4g+smQBwJZLlyAVFyN07BgwO2uo550+DVt5OUJHjoCnVt3qdFuMuvz+/RSuqnKreXl/gSgrlTS53Sjo6IBwOKxiXrzlkQimW1uhvXyZ3AZzTIvF3DQpy01E9GPadJ6fj/yzZyFKSgxQWjicYCQtwuxsCJcLHIlAnZhA5MKFtKyxqjZS0Of7AUCzmaPbKiuNIH7b2WnETKaVtXMntpw/j9mbNzF761Ymcf19lw5oBMDHZqT/A0CjOqBxAB+sBZD98GHMj41Be/0a9kOHMNPVBbF1K2zV1Zi9fh1rYOgJBWU5BCJT0bqSIWdvr+EO/Zrrrplub0fWjh3IbW42bplUUmLNZczhDQWk5x6dFXtjI8LHj0Ns27YGQOtw2UqG1g0IeLKuoN4EQEZQr/nabwKgLlOJMX4DkwX1zI0bUB8/Xgjq1lYjhvT6FmpqMmqblTxkJEYzpSMVoOyyMsTGx41MbKuqQnRgAFRQgKxduzA/MmLt2sdLx7/F9Q6IFnuIFEkpnldmrl3DXE9PxtSVvXcv8tva8PbyZQNs2sU87FKUioVqb7b9sNtRePUqOBpdKAVRfexKsSTJaE9EcTGmT5zI2B8x86dFitK/2DHK8jCI9mc6tu4mvcUgW+ZZkVUVM1euINqXYUZkHnEpiuGhBKA3dXV7hBBjmQAZSk6nkZHJbk8pzvPzUJ8+Td1uLNEUzHsKFeXeMkD6jzey/I0gOmkG1EbJaJrW6Q4EEnv+v8cg/dShmpoiLSfnVwDvbRQLKez8Qaq629nXF1z6PukoHT5wwK3GYj+BqHKTQA1BiAZTo3QcAHs8WVMOR8eGD47M3znt9lOWPjYsZSXo9VawJF20PLOtpvYuVPVLV19f2mHU9GeWSVmuE8BJJtLb3WyTrpwH86gEdDgUJWBGxzSguLGgx+PkgoJaAnYDKAXROwD0R1/PwfwcwDMGfiNJ6k8WJ+mA/QM7FWPB1r8LHAAAAABJRU5ErkJggg=="},"8f46":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"status-icon-item"},[e.type===e.typeMap.task?a("span",[e._v("Task")]):e._e(),e.type===e.typeMap["unit-plan"]?a("span",[e._v("Unit")]):e._e(),e.type===e.typeMap.pd?a("span",[e._v("PD")]):e._e(),e.type===e.typeMap.video?a("span",[e._v("Video")]):e._e()])},i=[],n=(a("a9e3"),a("3f76")),o={name:"ContentTypeIcon",props:{type:{type:Number,default:-1},size:{type:String,default:"30px"}},data:function(){return{typeMap:n["e"]}}},r=o,l=(a("4133"),a("0c7c")),d=Object(l["a"])(r,s,i,!1,null,"a464ed10",null);t["a"]=d.exports},"91e8":function(e,t,a){var s=a("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"9",viewBox:"0 0 16 9"},children:[{tag:"defs"},{tag:"path",attrsMap:{class:"a",d:"M6.505,1.682a2,2,0,0,1,2.99,0l3.546,3.99A2,2,0,0,1,11.546,9H4.454A2,2,0,0,1,2.959,5.671Z",transform:"translate(16 9) rotate(180)"}}]})}},"93ba":function(e,t,a){"use strict";a("d4fb")},9501:function(e,t,a){var s=a("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"9",viewBox:"0 0 16 9"},children:[{tag:"defs"},{tag:"path",attrsMap:{class:"a",d:"M6.505,1.682a2,2,0,0,1,2.99,0l3.546,3.99A2,2,0,0,1,11.546,9H4.454A2,2,0,0,1,2.959,5.671Z"}}]})}},"95c6":function(e,t,a){"use strict";a.r(t),a.d(t,"favoritesAPIUrl",(function(){return i})),a.d(t,"FavoritesAdd",(function(){return n})),a.d(t,"FavoritesQueryById",(function(){return o})),a.d(t,"FavoritesDelete",(function(){return r})),a.d(t,"FavoritesDeleteBatch",(function(){return l})),a.d(t,"FavoritesList",(function(){return d})),a.d(t,"FavoritesGetMyFavorites",(function(){return c}));var s=a("b775"),i={FavoritesAdd:"/classcipe/api/favorites/add",FavoritesQueryById:"/classcipe/api/favorites/queryById",FavoritesDelete:"/classcipe/api/favorites/delete",FavoritesDeleteBatch:"/classcipe/api/favorites/deleteBatch",FavoritesList:"/classcipe/api/favorites/list",FavoritesGetMyFavorites:"/classcipe/api/favorites/getMyFavorites"};function n(e){return Object(s["d"])({url:i.FavoritesAdd,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(s["d"])({url:i.FavoritesQueryById,method:"get",params:e})}function r(e){return Object(s["d"])({url:i.FavoritesDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(s["d"])({url:i.FavoritesDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(s["d"])({url:i.FavoritesList,method:"get",params:e})}function c(e){return Object(s["d"])({url:i.FavoritesGetMyFavorites,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"973f":function(e,t,a){},"97e7":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"score-number"},[s("div",{staticClass:"score-number-label"},e._l(e.numberLetters,(function(t,i){return s("div",{key:i,staticClass:"score-number-item"},["0"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("4bd5"),alt:t}}):e._e(),"1"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("53a3"),alt:t}}):e._e(),"2"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("03fe"),alt:t}}):e._e(),"3"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("bec2"),alt:t}}):e._e(),"4"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("e062"),alt:t}}):e._e(),"5"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("7ee9"),alt:t}}):e._e(),"6"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("462b"),alt:t}}):e._e(),"7"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("cbe2"),alt:t}}):e._e(),"8"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("edce"),alt:t}}):e._e(),"9"===t?s("img",{style:{width:e.size+"px"},attrs:{src:a("cf3a"),alt:t}}):e._e()])})),0),s("div",{staticClass:"number-underline"},[s("img",{style:{width:1.5*e.size+"px"},attrs:{src:a("80a9"),alt:""}}),s("img",{style:{width:1.5*e.size+"px"},attrs:{src:a("a8b4"),alt:""}})])])},i=[],n=(a("a9e3"),a("ac1f"),a("1276"),a("d3b7"),a("25f0"),{name:"ScoreNumber",props:{score:{type:Number,default:0},size:{type:Number,default:40}},data:function(){return{numberLetters:[]}},created:function(){var e=this.score.toString().split("");e.length?this.numberLetters=e:this.numberLetters=["0"]},watch:{score:function(e){var t=e.toString().split("");t.length?this.numberLetters=t:this.numberLetters=["0"]}}}),o=n,r=(a("4bc1"),a("0c7c")),l=Object(r["a"])(o,s,i,!1,null,"613e9fe3",null);t["a"]=l.exports},"980a":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return r}));var s=a("b775"),i={PDContentAddOrUpdate:"/classcipe/api/v2/pd/addOrUpdate",PDContentQueryById:"/classcipe/api/v2/pd/queryById",PDContentDelete:"/classcipe/api/v2/pd/delete",PDContentDeleteBatch:"/classcipe/api/v2/pd/deleteBatch",PDContentList:"/classcipe/api/v2/pd/list"};function n(e){return Object(s["d"])({url:i.PDContentAddOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(s["d"])({url:i.PDContentQueryById,method:"get",params:e})}function r(e){return Object(s["d"])({url:i.PDContentDelete+"?id="+e.id,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"98a4":function(e,t,a){var s=a("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"31.442",height:"40",viewBox:"0 0 31.442 40"},children:[{tag:"g",attrsMap:{transform:"translate(-179.2 -99.38)"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#808191;",d:"M311.741,121.054h-8.855a3.363,3.363,0,0,1-3.334-3.372l-2.351-14.93a3.363,3.363,0,0,1,3.334-3.372h13.558a3.363,3.363,0,0,1,3.334,3.372l-2.351,14.93A3.363,3.363,0,0,1,311.741,121.054Z",transform:"translate(-112.388)"}},{tag:"path",attrsMap:{class:"b",style:"fill:#dbdbdb;",d:"M309.8,99.48h-9.432A3.382,3.382,0,0,0,297,102.852l2.378,14.93a3.382,3.382,0,0,0,3.372,3.372S320.211,104.4,309.8,99.48Z",transform:"translate(-112.28 -0.095)"}},{tag:"path",attrsMap:{class:"c",style:"fill:#fff;opacity:0.5;",d:"M305.523,99.48h-5.151A3.382,3.382,0,0,0,297,102.852l1.493,9.318S310.432,104.916,305.523,99.48Z",transform:"translate(-112.256 -0.095)"}},{tag:"path",attrsMap:{class:"d",style:"fill:#e7e7e7;",d:"M193.655,253.831l-12.8-7.107A2.924,2.924,0,0,1,179.4,244.2V229.982a2.924,2.924,0,0,1,1.459-2.528l12.8-7.107a2.916,2.916,0,0,1,2.923,0l12.8,7.107a2.924,2.924,0,0,1,1.459,2.528V244.2a2.924,2.924,0,0,1-1.459,2.528l-12.8,7.107A2.939,2.939,0,0,1,193.655,253.831Z",transform:"translate(-0.19 -114.84)"}},{tag:"path",attrsMap:{class:"e",style:"fill:#acacac;opacity:0.2;",d:"M210.637,639.48v4.461a2.948,2.948,0,0,1-1.464,2.549l-12.8,7.168a2.9,2.9,0,0,1-2.923,0l-12.8-7.168a2.944,2.944,0,0,1-1.459-2.549v-4.257s1.01-.452,2.493,2.421c1.147,2.226,7.134,4.685,9.632,6.5a5.258,5.258,0,0,0,3.6,1.389,12.643,12.643,0,0,0,2.484-.576c2.233-.79,9.066-5.222,10.1-6.7C208.715,641,209.258,639.48,210.637,639.48Z",transform:"translate(0 -514.704)"}},{tag:"path",attrsMap:{class:"f",style:"fill:#b5b5b5;opacity:0.2;",d:"M234.729,224.149l-9.738-5.4a2.886,2.886,0,0,0-2.918,0L209.3,225.919s-.113,4.2,10.422,5.712,2.72.395,2.72.395S232.806,231.365,234.729,224.149Z",transform:"translate(-28.667 -113.316)"}},{tag:"path",attrsMap:{class:"g",style:"fill:#cecece;",d:"M375.76,446.593l.9,1.817a1.593,1.593,0,0,0,1.2.87l2.007.29a1.592,1.592,0,0,1,.88,2.716l-1.451,1.417a1.585,1.585,0,0,0-.457,1.408l.342,2a1.594,1.594,0,0,1-2.312,1.679l-1.793-.942a1.594,1.594,0,0,0-1.479,0l-1.793.942a1.593,1.593,0,0,1-2.312-1.679l.342-2a1.581,1.581,0,0,0-.457-1.408l-1.451-1.417a1.592,1.592,0,0,1,.885-2.716l2.007-.29a1.593,1.593,0,0,0,1.2-.87l.9-1.817a1.583,1.583,0,0,1,2.844,0Z",transform:"translate(-179.405 -330.031)"}},{tag:"path",attrsMap:{class:"h",style:"fill:#fff;",d:"M389.277,459.237l1.17,2.369a.953.953,0,0,0,.723.523l2.611.38a.955.955,0,0,1,.528,1.631l-1.893,1.845a.965.965,0,0,0-.276.847l.447,2.6a.957.957,0,0,1-1.389,1.008l-2.34-1.227a.95.95,0,0,0-.889,0l-2.335,1.227a.957.957,0,0,1-1.389-1.008l.447-2.6a.952.952,0,0,0-.276-.847l-1.893-1.845a.958.958,0,0,1,.533-1.631l2.611-.38a.972.972,0,0,0,.723-.523l1.17-2.369A.959.959,0,0,1,389.277,459.237Z",transform:"translate(-193.493 -342.41)"}}]}]})}},"9bb4":function(e,t,a){},"9bc1":function(e,t,a){"use strict";a("9bb4")},a3c5:function(e,t,a){var s=a("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"7.197",viewBox:"0 0 12 7.197"},children:[{tag:"defs"},{tag:"path",attrsMap:{class:"a",d:"M.354,5.149A1.2,1.2,0,0,0,1.2,7.2h9.6a1.2,1.2,0,0,0,.848-2.048l-4.8-4.8a1.2,1.2,0,0,0-1.7,0l-4.8,4.8Z",transform:"translate(0)"}}]})}},a6bd:function(e,t,a){e.exports=a.p+"img/default_avatar.47541fcf.png"},a8b4:function(e,t,a){e.exports=a.p+"img/button_line_2.04084462.png"},a903:function(e,t,a){var s=a("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40"},children:[{tag:"g",attrsMap:{id:"组_3098","data-name":"组 3098",transform:"translate(-1148 -81)"},children:[{tag:"g",attrsMap:{id:"组_2452","data-name":"组 2452",transform:"translate(1046.967 -34.555)"},children:[{tag:"path",attrsMap:{id:"路径_1323","data-name":"路径 1323",d:"M257.987,432.507h0a2.427,2.427,0,1,0,4.855,0h0a2.427,2.427,0,1,0-4.855,0Z",transform:"translate(-148.775 -298.588)",fill:"#15c39a"}},{tag:"path",attrsMap:{id:"路径_1324","data-name":"路径 1324",d:"M459.935,432.507h0a2.427,2.427,0,1,0,4.855,0h0a2.427,2.427,0,1,0-4.855,0Z",transform:"translate(-341.129 -298.588)",fill:"#15c39a"}},{tag:"path",attrsMap:{id:"路径_1325","data-name":"路径 1325",d:"M661.883,432.507a2.427,2.427,0,1,0,2.427-2.427A2.427,2.427,0,0,0,661.883,432.507Z",transform:"translate(-533.483 -298.588)",fill:"#15c39a"}},{tag:"path",attrsMap:{id:"路径_1326","data-name":"路径 1326",d:"M139.309,127.116a17.325,17.325,0,0,0-4.226-5.506,21.375,21.375,0,0,0-27.5,0,17.263,17.263,0,0,0-4.226,5.506,15.57,15.57,0,0,0-1.562,6.8,15.845,15.845,0,0,0,2.179,7.962,18.117,18.117,0,0,0,5.126,5.552v5.737a1.388,1.388,0,0,0,.692,1.2,1.389,1.389,0,0,0,1.384,0l6.071-3.506a22.012,22.012,0,0,0,4.088.381,20.768,20.768,0,0,0,13.751-5.01,17.262,17.262,0,0,0,4.226-5.506,15.605,15.605,0,0,0,0-13.613Zm-17.977,21.362a19.272,19.272,0,0,1-4.036-.427,1.383,1.383,0,0,0-.98.156l-4.451,2.571v-4.071a1.4,1.4,0,0,0-.623-1.159,13.915,13.915,0,0,1-6.688-11.629c0-8.026,7.524-14.552,16.778-14.552s16.778,6.527,16.778,14.552-7.53,14.558-16.778,14.558Z",transform:"translate(0 0)",fill:"#15c39a"}}]},{tag:"rect",attrsMap:{id:"矩形_1460","data-name":"矩形 1460",width:"40",height:"40",transform:"translate(1148 81)",fill:"none"}}]}]})}},ab9f:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return d}));var s=a("b775"),i={SchoolClassAddClassMember:"/classcipe/api/school/class/addClassMember",SchoolClassAddOrUpdate:"/classcipe/api/school/class/addOrUpdate",PersonalAddOrUpdateClass:"/classcipe/api/school/class/addOrUpdatePersonalClass",FindClassBySessonId:"/classcipe/api/school/class/findClassBySessonId",SchoolClassGetById:"/classcipe/api/school/class/getById",SchoolClassGetMyClasses:"/classcipe/api/school/class/getMyClasses",SchoolClassClassList:"/classcipe/api/school/class/list",SchoolClassListClassMembers:"/classcipe/api/school/class/listClassMembers",SchoolClassDelete:"/classcipe/api/school/class/delete",SchoolClassRemoveClassMember:"/classcipe/api/school/class/removeClassMember",SchoolClassImport:"/classcipe/api/school/class/importClassExcel",SchoolClassListClassAttendance:"/classcipe/api/school/class/listClassAttendance",PersonaClasslist:"/classcipe/api/school/class/personaClasslist"};function n(e){return Object(s["d"])({url:i.SchoolClassAddClassMember,method:"post",params:e})}function o(){return Object(s["d"])({url:i.SchoolClassGetMyClasses,method:"get"})}function r(e){return Object(s["d"])({url:i.SchoolClassRemoveClassMember,method:"post",params:e})}function l(e){return Object(s["d"])({url:i.SchoolClassDelete+"?id="+e.id,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(s["d"])({url:i.SchoolClassListClassAttendance,method:"get",params:e})}},af28:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a("d3b7"),a("159b"),a("6062"),a("3ca3"),a("ddb0"),a("b64b"),a("caad"),a("2532");var s=a("9f06"),i=a("9afb"),n=a("3f76"),o=a("90e8"),r=a("ab9f"),l=a("2b0e"),d=new l["default"],c=a("b21a"),u=a("c948"),m={components:{},data:function(){return{typeMap:n["e"],evaluationId:null,taskEvaluationForms:[],forms:[],groups:[],evaluationForm:{classId:"",className:null,email:null,evaluationMode:o["a"].TeacherEvaluate,forms:[],groups:[],id:null,name:null,studentEvaluateData:null,type:n["e"].classSessionEvaluation},attendanceEmailList:[],attendanceList:[],initCompleted:!1,showWaitingMask:!1,studentEvaluateData:{},hasNewEvaluationDataReceived:!1}},created:function(){this.mode===o["a"].TeacherEvaluate?(d.$on(c["b"],this.handleEvaluationAttendance),d.$on(c["e"],this.handleEvaluationStudentSubmit),d.$on(c["c"],this.handleEvaluationPeerSubmit)):(this.mode===o["a"].PeerEvaluate||this.mode===o["a"].StudentEvaluate)&&(d.$on(c["b"],this.handleEvaluationAttendance),d.$on(c["f"],this.handleEvaluationTeacherSubmit),d.$on(c["d"],this.handleEvaluationSetChange))},destroyed:function(){this.mode===o["a"].TeacherEvaluate?(d.$off(c["b"],this.handleEvaluationAttendance),d.$off(c["e"],this.handleEvaluationStudentSubmit),d.$off(c["c"],this.handleEvaluationPeerSubmit)):(this.mode===o["a"].PeerEvaluate||this.mode===o["a"].StudentEvaluate)&&(d.$off(c["b"],this.handleEvaluationAttendance),d.$off(c["f"],this.handleEvaluationTeacherSubmit),d.$off(c["d"],this.handleEvaluationSetChange))},computed:{},methods:{CheckAndCreateTaskSessionEvaluationData:function(e,t,a){var i=this;this.$logger.info("CheckTaskSessionExistEvaluationData ".concat(e," sessionId")+e),Object(s["GetSessionEvaluationByClassId"])({classId:e}).then((function(s){i.$logger.info("CheckTaskSessionExistEvaluationData ".concat(e," response"),s);var n=s.result;n.evaluation?(i.$logger.info("CheckTaskSessionExistEvaluationData has evaluation data, skip it "+e),a&&(i.$logger.info("skip and callback"),a())):(i.$logger.info("CheckTaskSessionExistEvaluationData no evaluation data, start init "+e),i.initTaskSessionEvaluationData(e,t,a))})).catch((function(e){i.$logger.error("CheckTaskSessionExistEvaluationData error",e),i.$message.error("CheckTaskSessionExistEvaluationData error "+e)}))},initTaskSessionEvaluationData:function(e,t,a){var o=this;this.$logger.info("initTaskSessionEvaluationData "+t);var r=[];Object(i["GetAssociate"])({id:t,type:this.typeMap.task}).then((function(e){o.$logger.info("GetAssociateEvaluationTable ",e),e.result.owner.forEach((function(e){e.contents.forEach((function(e){e.type===n["e"].evaluation&&r.push(e.id)}))})),e.result.others.forEach((function(e){e.contents.forEach((function(e){e.type===n["e"].evaluation&&r.push(e.id)}))}))})).finally((function(){if(o.$logger.info("associateEvaluationIdList ",r),r.length){var i=[];Object(s["EvaluationQueryByIds"])({ids:r}).then((function(e){o.$logger.info("associateEvaluationIdList EvaluationQueryByIds ",e);var t=[];e.result.forEach((function(e){e.forms.forEach((function(e){-1===t.indexOf(e.formId)?(t.push(e.formId),i.push({title:e.title,titleEditing:!1,comment:null,formType:e.formType,se:e.se,pe:e.pe,menuVisible:!1,mode:e.mode,id:null,formId:e.formId,initRawHeaders:JSON.parse(e.initRawHeaders),initRawData:JSON.parse(e.initRawData)})):o.$logger.info("form existed ",e)}))}))})).then((function(){o.taskEvaluationForms=i,o.$logger.info("taskEvaluationForms",o.taskEvaluationForms),o.saveInitSessionEvaluationData(e,t,a)}))}else o.$logger.warn("no associate evaluation data for task "+t),a&&(o.$logger.info("no associate and callback"),a())}))},saveInitSessionEvaluationData:function(e,t,a){var i=this;this.$logger.info("saveInitSessionEvaluationData "+e);var n=JSON.parse(JSON.stringify(this.evaluationForm)),o=JSON.parse(JSON.stringify(this.taskEvaluationForms));this.$logger.info("formDataList",o,"formData",n),n.classId=e,o.forEach((function(e){e.initRawHeaders=JSON.stringify(e.initRawHeaders),e.initRawData=JSON.stringify(e.initRawData)})),n.forms=o,n.studentEvaluateData="{}",this.evaluationId&&(this.evaluationForm.id=this.evaluationId,n.id=this.evaluationId),Object(s["SaveSessionEvaluation"])(n).then((function(e){i.$logger.info("SaveSessionEvaluation response",e),e.result&&e.result.id&&(i.evaluationId=e.result.id),e.success?(i.taskEvaluationForms=[],i.evaluationForm.forms=[],a&&(i.$logger.info("saveInitSessionEvaluationData callback"),a())):i.$message.error(e.message)}))},handleEvaluationAttendance:function(e){var t=this,a=this.$createElement;this.$logger.info("handleEvaluationAttendance",e);var s=e.content;s.sessionId===this.sessionId&&Object(r["d"])({sessionId:this.sessionId}).then((function(e){t.$logger.info("refreshAttendance response",e);var s=[],i=[];if(e.success){if(e.result.length>0){var n=new Set,o=[],r=t.studentEvaluateData?Object.keys(t.studentEvaluateData):[];e.result.forEach((function(e){n.has(e.email)||(s.push(e),i.push(e.email),n.add(e.email),-1!==r.indexOf(e.email)&&o.push(e))})),t.attendanceList=s,t.attendanceEmailList=i,t.$logger.info("attendanceList",t.attendanceList),t.$logger.info("newStudentList",o),o.length&&(o.forEach((function(e){var a={};t.forms.forEach((function(e){a[e.formId]={comment:null},e.initRawData.forEach((function(t){a[e.formId][t.rowId]={teacherEvaluation:null,teacherName:null,teacherEmail:null,peerEvaluation:null,peerName:null,peerEmail:null,studentEvaluation:null,studentName:null,studentEmail:null,data:null,evidenceIdList:[],evidenceIdStudentList:[]}}))})),t.$set(t.studentEvaluateData,e.email,a),t.$logger.info("add student "+e.email,t.studentEvaluateData)})),t.$notification.open({message:"Notification",description:"The student attendance list has been updated, please refresh to view.",icon:a("a-icon",{attrs:{type:"usergroup-add"},style:"color: #108ee9"})})),t.attendanceList&&t.groups.forEach((function(e){var a=[];e.members.forEach((function(e){t.attendanceEmailList.includes(e.userId)&&a.push(e.userId)})),e.attendanceList=a}))}}else t.$message.error(e.message)})).catch((function(e){t.$logger.error("refreshAttendance",e),t.$message.error("refreshAttendance "+e)}))},handleEvaluationTeacherSubmit:function(e){var t=this.$createElement;this.$logger.info("handleEvaluationTeacherSubmit",e);var a=e.content;a.sessionId===this.sessionId&&(this.hasNewEvaluationDataReceived=!0,this.$notification.open({message:"Notification",description:"New teacher review(s) just received. Refresh to see",icon:t("a-icon",{attrs:{type:"mail"},style:"color: #108ee9"})}))},handleEvaluationStudentSubmit:function(e){var t=this.$createElement;this.$logger.info("handleEvaluationStudentSubmit",e);var a=e.content;a.sessionId===this.sessionId&&(this.hasNewEvaluationDataReceived=!0,this.$notification.open({message:"Notification",description:"New self review(s) just received. Refresh to see",icon:t("a-icon",{attrs:{type:"mail"},style:"color: #108ee9"})}))},handleEvaluationPeerSubmit:function(e){var t=this.$createElement;this.$logger.info("handleEvaluationPeerSubmit",e);var a=e.content;a.sessionId===this.sessionId&&(this.hasNewEvaluationDataReceived=!0,this.$notification.open({message:"Notification",description:"New peer review(s) just received. Refresh to see",icon:t("a-icon",{attrs:{type:"mail"},style:"color: #108ee9"})}))},handleEvaluationSetChange:function(e){this.$logger.info("handleEvaluationSetChange",e,"this.sessionId",this.sessionId);var t=e.content;if(t&&t.sessionId===this.sessionId){var a=this.showWaitingMask;this.showWaitingMask=t.mode===u["a"].Editing,a&&!this.showWaitingMask&&(this.initCompleted=!1,window.location.reload())}},handleRefreshEvaluationData:function(){this.$logger.info("handleRefreshEvaluationData"),window.location.reload()}}}},b199:function(e,t,a){"use strict";a.r(t),a.d(t,"taskAPIUrl",(function(){return i})),a.d(t,"TaskCreateTaskPPT",(function(){return n})),a.d(t,"TaskCreateNewTaskPPT",(function(){return o})),a.d(t,"TaskAddOrUpdate",(function(){return r})),a.d(t,"SplitTask",(function(){return l})),a.d(t,"TaskQueryById",(function(){return d})),a.d(t,"TaskDelete",(function(){return c})),a.d(t,"getTaskBySessionId",(function(){return u})),a.d(t,"UpdateSlideEditing",(function(){return m})),a.d(t,"QuerySubTask",(function(){return f}));var s=a("b775"),i={createTaskPPT:"/classcipe/api/task/createTaskPPT",createNewTaskPPT:"/classcipe/api/task/createNewTaskPPT",addOrUpdate:"/classcipe/api/task/addOrUpdate",delete:"/classcipe/api/task/delete",deleteBatch:"/classcipe/api/task/deleteBatch",list:"/classcipe/api/task/list",queryById:"/classcipe/api/task/queryById",splitTask:"/classcipe/api/task/spliteTask",getTaskBySessonId:"/classcipe/api/task/getTaskBySessonId",updateSlideEditing:"/classcipe/api/task/updateSlideEditing",querySubTask:"/classcipe/api/task/querySubTask"};function n(e){return Object(s["d"])({url:i.createTaskPPT,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(s["d"])({url:i.createNewTaskPPT,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(s["d"])({url:i.addOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(s["d"])({url:i.splitTask,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(s["d"])({url:i.queryById,method:"get",params:e})}function c(e){return Object(s["d"])({url:i.delete+"?id="+e.id,method:"post",data:e})}function u(e){return Object(s["d"])({url:i.getTaskBySessonId,method:"get",params:e})}function m(e){return Object(s["d"])({url:i.updateSlideEditing,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(s["d"])({url:i.querySubTask,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},bd65:function(e,t,a){e.exports=a.p+"img/rubric2.54e00820.png"},bec2:function(e,t,a){e.exports=a.p+"img/3.19a62d0d.png"},c05b6:function(e,t,a){},c621:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"f",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return c}));var s=a("b775"),i={getTemplates:"/classcipe/api/templates/getTemplates",filterTemplates:"/classcipe/api/templates/filterTemplates",recommendTemplates:"/classcipe/api/templates/recommendTemplates",getPresentation:"/classcipe/api/templates/getPresentation",getPublishedPresentation:"/classcipe/api/templates/getPublishedPresentation",getPageThumbnail:"/classcipe/api/templates/getPageThumbnail",queryById:"/classcipe/api/templates/queryById"};function n(e){return Object(s["d"])({url:i.getTemplates,method:"get",params:e})}function o(e){return Object(s["d"])({url:i.filterTemplates,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(s["d"])({url:i.recommendTemplates,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(s["d"])({url:i.getPresentation,method:"get",params:e})}function d(e){return Object(s["d"])({url:i.getPageThumbnail,method:"get",params:e})}function c(e){return Object(s["d"])({url:i.getPublishedPresentation,method:"get",params:e})}},c948:function(e,t,a){"use strict";var s={Editing:0,Evaluating:1};t["a"]=s},cbe2:function(e,t,a){e.exports=a.p+"img/7.d0600535.png"},ce1b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAAXNSR0IArs4c6QAABDZJREFUWEfNWF1oHFUU/s7MpBYVk5pdbYLU2Db1ry/qi3XT2H3WgmCESl9ES7YaUEEKBQtViCBUEMWiu61ioWCh8an1eWo2q0+tL6GNTUvXPiSr2TaNtJR0Z+bIubuzs7M/2dnZRPY+DTPn55tzz/3OuYcQYnVnklu6HLxGTC8yIULMAwBtBNgCkGeiLDHyIEzd0/jsUixxtVU3FFQhah59EIbxATO9RYStQfVEjhlXiPhHWNZXC/Gx20F0mwMzDxu9Rn9CYxwCSVSUI0BpyoM8knpyjXHpvXrDAJU/cM4hjN+w5pKIfyrRbbhWBNaTOf54l2OfBWi7B8MDEOTPXT2/I54uaPqrt2L7/mpkoyGwDZPHYwbsCYlSMQISl/ZWMb5ctMScs6CPLA7vy9SzWtfXw5nU65rNp4jIYGZQeS/aA+ZquzaZ2XJ02nMzNvpzteUaYBIpHfa5tQJVD5wNfVd15HzAesxvB7p07Xe1fWsQqeqolH0w5wq2s+NW/N2sK+MBMw8bUaP/D0n0/wNUdeQAnl6w5p5zT2sZWG/62JgG/kYSvf00by0XXZ9MvD8/lEgWKQiAIk/dmC2ewNbpQCfCO33PwiDCiflLuOOsSFE1qD1a5Bxsa1BIuAgsnfwYoPEwoET/7b5n8PmWmHJ48GoGP8xfbC1kPmk+tLAz8ZkCFplMzUqZCQvswKbncWDTC8r8kevnceT6hZaBub4ZmMnvHH2aHjKPbr3P6JqVMhOWrlYDmKLeEoZlqzBIkfSxjwj8RdhoicFVA+bl94cUTadOAxhp5zSuAbAJiqRTaQKGOgNYkaoYOEfRqdQ1MAaaZesDmoG9G59Ct7GuRvSl7j7EuvvV+8zSHH5bmq+RWbLu4UTuEpYdu5kr4assRSdTd0FY3yzHRvu3Y3zzjuZGV5AITCXMtyXH7gLNge199El8OTjcFrD3/jQxsXAlgA0BFnArhd139z6Bwft7Qm3lzJ1FnLlxLQAodTSzkvwmAbs6L/nLdNF6jXR/f9Xowmu1hC46lGA7tiR1bBGvbHuCHZlaqT2PbMPX215WH96//CtO/XM5rCkp5V7b42sUQ/T6QiUCziANJ/+ega1uxMFXZe/vaxTFhNdahz+dwaH4JRu21krMdxkJ35u1Cs7rAxtcRsRgZ17fSr+6wUwO6QZMAhm+SUmroWgmX+oaGGzZFuKL8cRUpUr9EcHkdyMa0U8Crp2WuxE216aAcpjfvDm8f6JatvFQxUwOGTpOF2/lUljbv2/66rEMVWy8UR0pF+DKYygZGRjaGXcMJUrN+rZ6UarV4emC5eyuHAkEjlhZUA3uHkto7JQHdwJP4ifXmkaTIOEmuXb5RnrMOdbwSb4w931bg7vKv2hr1AnMEPjk6o466+xNqfC/AnWJQYQIA2COKFGiPDOyBOQBTC1bhV/+jY8FaVt9nv4DguA3GCvpDXoAAAAASUVORK5CYII="},cf3a:function(e,t,a){e.exports=a.p+"img/9.1120bb95.png"},d4fb:function(e,t,a){},d815:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABVNJREFUeF7tm0+IG3UUx9+brOypB2kmCoL00HopnlZcaJvU9mILCrXignUR7XYTW1GpB+mldBeEIoVFFP9ksodClaLFFS9aT+1m4l7qsQiixR5EShKKKIsUmnky2cw4SebP78/7jZRtjsnv937v+5n3+/fmBWGTf3CT64chAEW3MQWe9ywnlAnPO39r3/GbqjZtt/4CebBTtf9oP8vCG+1y9ULwfQjAbjkHgeBbroECO+TRYndvbUHFrr22vB163i8qfVP7ELzaqVTP+21CAMXV+gJaeIZ7MILevm75+FVVu3bL+QIIZlT7x/WLPhSjAAjwSLc8f1HX+WKzfgERZ3XtxEWlOQCRMONw3HadZQCY47BlPAII6bXunlqdw9moDdt1PgKAE7p2DQOgtzrl2ge6Tib1L7WcJSI4qWPfGAAkfKddmT+n45xIX9utnwXAUyJt81wET3fK1XdVnZLtp7NrGYkAnf0+T/H+WEYAjBqWFSXaXufJ57INmowEDvFGIyCOsOiTzWrHJT4XANzTgVN8bgC4IBTdxhkEUrpMJUWVsUUwds8FXOiW5xezQjzud3XxNAOAXzID8I36n2TDiQMqQNAR3ynXLpWan84SWuG9P+qbQgTQjG/UN+InKJQgSOQFdMUHYu3VxhxY5F+ihj6SAP4THxo2CIFLfOBryXVOEIB/iQo/EgDGxZuEwC0+8LXYrJ9ExKW4bTolH5AsXhtCTJao6DqPIcDP8otltp8bU7dxCoDOJm6DdqsxBxTMFzGj6mtCvH275fwGBNvEIYj76dsMzhNIcKBdqX7fX9Kjg9k/OG8AWt91dh37VdwJ2YURVzrl+efj7Jdc5zkiuAgIk9njy4lPssf2XkBsd6DLk4X1w7/vevufJIdKa87T1AM/j/hgMgQe8WMRkE09vUUGhNU769bhvw4cu501TrHp7EWEzwHgkfG2fOLZASSuCQjXCAqHunvm/sgSH/y+tbn8pIXeZwCwI7KBhecRUTtZ7dimwNBaMnROoOtowaH27tqNLGdGf39orf6410M/v7gFgN4LDmOydtLaGwHQX3HdxpQFNG3RxKVblaMdTqc5bRkDwOmkSVv3AZikey/Yvh8Bpp7SVrc+bQE8yrFyP3zlk206NQa57wLDOTxcmSz8PZt2+ks8FfpHY4Ql/35gKtvMPgXiE5h0+c564SWRU2AAo38kvgvfRO8FJiCwAsjI3q4SFo6InAYHR+Gv4+4D3BDYAAilrhGuIdKLaafCwRF4Jf4esBEfnBBCAP5Cc9eyXgHLuypb0iIkPpzodL1AD+yPOx0Ojr5fDZ//41cIVQh+3VH0uh+bEZIpbZETvyEGAV5vl6sfj0qzXecKADwlujPJQgjrjYSKpARKXFRzeD2a2Hm7cvQnXQD96SCYco/WGQknRdNKXVTFAxhItGZAGK0vEgYwWHLGSl5MiA+iQSyzND5JkiIhrq5IEgBAtPTFpHhuCEn1RNIABo6dJsCC2otK+TSWbiSk1RGpAhBdnEfayYvXjgSPFtOqXnMEoC5eF0La08oJgL54UxByAMAn3gQEwwD4xXNDMAjAnHhOCIYAmBfPBeGeB+CDUD0njF6nmf8vkE8UpNX/iBxWDEVAMLRZCEl1PyLCQw8j9UrMEWAWQly9j4zwHAH0Zxrrm9zROh8V4TkD4IMQre/REf4/AACAgrVDtuQmKlIl5ZYFKX4RdBtTCPRjVmfp3y14s7O7+qF0v0EH23VItW9SPwR4Ofj36HCRVMs5SD2aZhsQ4c9upfa+jr2i6zwDHj2hYyPaFxFvBv8a9b9ney/A5WDedjY9gH8Beinjbph4NMoAAAAASUVORK5CYII="},d882:function(e,t,a){e.exports=a.p+"img/rubric1.f6975701.png"},d8fe:function(e,t,a){var s=a("b2b7");e.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"7.197",viewBox:"0 0 12 7.197"},children:[{tag:"defs"},{tag:"path",attrsMap:{class:"a",d:"M.354,2.048A1.2,1.2,0,0,1,1.2,0h9.6a1.2,1.2,0,0,1,.848,2.048l-4.8,4.8a1.2,1.2,0,0,1-1.7,0l-4.8-4.8Z",transform:"translate(0)"}}]})}},de36:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-input-with-button"},[e.replyMode?[a("a-input",{staticClass:"my-padding-input reply-mode",attrs:{size:"large"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("div",{staticClass:"reply-info",attrs:{slot:"addonBefore"},slot:"addonBefore"},[a("span",{staticClass:"reply-tips"},[e._v("Reply")]),a("span",{staticClass:"reply-user"},[e._v(" @"+e._s(e.replyUsername)+" ")])])])]:e._e(),e.replyMode?e._e():[a("a-input",{staticClass:"my-padding-input",attrs:{size:"large"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],a("a-button",{staticClass:"my-send-btn",attrs:{loading:e.sendLoading,size:"small",type:"primary"},on:{click:e.handleSendEvent,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSendEvent.apply(null,arguments)}}},[e._v("Send ")])],2)},i=[],n={name:"EvidenceCommentInput",props:{replyMode:{type:Boolean,default:!1},replyUsername:{type:String,default:null},extra:{type:Object,default:null}},data:function(){return{value:null,sendLoading:!1}},methods:{handleSendEvent:function(){var e=this;this.$logger.info("trigger send "+this.value),this.value&&(this.sendLoading=!0,this.$emit("send",{inputValue:this.value,extra:this.extra}),setTimeout((function(){e.sendLoading=!1,e.value=""}),1e3))}}},o=n,r=(a("f61a"),a("0c7c")),l=Object(r["a"])(o,s,i,!1,null,"64ce848f",null);t["a"]=l.exports},e062:function(e,t,a){e.exports=a.p+"img/4.1ebec331.png"},eb6f:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"my-full-form-wrapper",on:{click:e.handleUpdateHeader}},[s("div",{staticClass:"form-header"},[s("common-form-header",{ref:"commonFormHeader",attrs:{form:e.form,"show-back":!1,"show-collaborate":!1,"last-change-saved-time":e.lastChangeSavedTime},on:{"update-form":e.handleUpdateForm,back:e.goBack,save:e.handleSaveAndBackEvaluation,publish:e.handlePublishEvaluation}})],1),s("a-card",{attrs:{bordered:!1,bodyStyle:{padding:"16px 24px",height:"100%",minHeight:"500px"},loading:e.loading}},[s("div",{staticClass:"class-session-evaluation"},[s("div",{staticClass:"header"},[s("div",{staticClass:"left-action"},[s("div",{staticClass:"add-btn"},[s("a-button",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.EvaluationTableMode.Edit,expression:"mode === EvaluationTableMode.Edit"}],attrs:{type:"primary"},on:{click:e.handleAddFormTable}},[s("div",{staticClass:"btn-content"},[s("a-icon",{attrs:{type:"plus-circle"}}),s("span",{staticClass:"btn-text"},[e._v(" Add rubric format ")])],1)])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.forms.length>0,expression:"forms.length > 0"}],staticClass:"form-table-tabs"},e._l(e.forms,(function(t,a){return s("div",{key:a,class:{"form-table-item":!0,"active-table":e.currentActiveFormId===t.formId},attrs:{"data-form-id":t.formId,"data-form-type":t.formType},on:{click:function(s){return e.handleActiveForm(a,t)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.titleEditing,expression:"formItem.titleEditing === false"}],staticClass:"action-icon"},[s("div",{staticClass:"form-title-item"},[s("div",{staticClass:"form-title",on:{dblclick:function(a){return e.handleEditFormTitle(t)}}},[e._v(e._s(t.title))]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.EvaluationTableMode.Edit,expression:"mode === EvaluationTableMode.Edit"}],staticClass:"form-delete-icon"},[s("a-popconfirm",{attrs:{title:"Delete this form ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleDeleteForm(t)}}},[s("a-icon",{attrs:{type:"delete"}})],1)],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.titleEditing,expression:"formItem.titleEditing === true"}],staticClass:"editing-title"},[s("a-input",{staticClass:"my-title-input",on:{blur:e.handleEnsureUpdateFormTitle,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnsureUpdateFormTitle.apply(null,arguments)}},model:{value:e.currentEditingTitle,callback:function(t){e.currentEditingTitle=t},expression:"currentEditingTitle"}})],1)])})),0),s("div",{staticClass:"body"},[s("div",{staticClass:"class-group"},[s("div",{staticClass:"class-student-wrapper"},[s("div",{staticClass:"group-list-wrapper"},[s("div",{staticClass:"no-group-student-list"},[s("div",{staticClass:"student-list"},e._l(e.allNoGroupStudentUserList,(function(t,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:-1!==e.attendanceEmailList.indexOf(t.email),expression:"attendanceEmailList.indexOf(member.email) !== -1"}],key:i,class:{"list-item":!0,"selected-student":e.currentActiveStudentId===t.userId,heartbeat:(e.studentEvaluateIdList.length||e.peerEvaluateIdList.length)&&-1===e.studentEvaluateIdList.indexOf(t.userId)&&-1===e.peerEvaluateIdList.indexOf(t.userId)},attrs:{"data-member-id":t.userId},on:{click:function(a){return e.handleClickMember(null,t)}}},[s("div",{staticClass:"student-avatar"},[t.studentAvatar?s("img",{attrs:{src:t.studentAvatar,alt:""}}):e._e(),t.studentAvatar?e._e():s("img",{attrs:{slot:"prefix",src:a("a6bd"),alt:""},slot:"prefix"})]),s("div",{staticClass:"student-name",attrs:{"data-email":t.userId}},[s("a-tooltip",{attrs:{placement:"top",mouseEnterDelay:1}},[s("template",{slot:"title"},[e._v(" "+e._s(t.email)+" ")]),e._v(" "+e._s(t.realName)+" ")],2)],1),-1!==e.selectedMemberIdList.indexOf(t.userId)?s("div",{staticClass:"select-status-icon"},[s("a-icon",{staticClass:"my-selected-icon",staticStyle:{"{color":"#07AB84}"},attrs:{type:"check-circle",theme:"filled"}})],1):e._e()])})),0)]),e._l(e.groups,(function(t,i){return s("div",{key:i,class:{"group-item":!0,"selected-group":-1!==e.selectedGroupIdList.indexOf(t.id)},attrs:{"data-group-id":t.id}},[s("div",{staticClass:"group-item-info",on:{click:function(a){return e.handleSelectGroup(t)}}},[s("div",{staticClass:"group-left"},[s("div",{staticClass:"group-icon"},[s("group-icon")],1),s("div",{staticClass:"group-name"},[e._v(" "+e._s(t.name)+" ("+e._s(t.attendanceList.length)+") ")]),s("div",{staticClass:"group-select-status"},[-1!==e.selectedGroupIdList.indexOf(t.id)?[s("a-icon",{staticClass:"my-selected-icon",staticStyle:{"{color":"#07AB84}"},attrs:{type:"check-circle",theme:"filled"}})]:e._e()],2)]),s("div",{staticClass:"group-right",on:{click:function(a){return e.handleToggleGroupExpand(t,a)}}},[s("div",{staticClass:"group-expand-status"},[t.expand?[s("arrow-down")]:e._e(),t.expand?e._e():[s("arrow-top")]],2)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"group.expand"}],staticClass:"group-student-list"},[s("div",{staticClass:"student-list"},e._l(t.members,(function(i,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:-1!==e.attendanceEmailList.indexOf(i.email),expression:"attendanceEmailList.indexOf(member.email) !== -1"}],key:n,class:{"list-item":!0,"selected-student":e.currentActiveStudentId===i.userId,heartbeat:(e.studentEvaluateIdList.length||e.peerEvaluateIdList.length)&&-1===e.studentEvaluateIdList.indexOf(i.userId)&&-1===e.peerEvaluateIdList.indexOf(i.userId)},attrs:{"data-member-id":i.userId},on:{click:function(a){return e.handleClickMember(t,i)}}},[s("div",{staticClass:"student-avatar"},[i.studentAvatar?s("img",{attrs:{src:i.studentAvatar,alt:""}}):e._e(),i.studentAvatar?e._e():s("img",{attrs:{slot:"prefix",src:a("a6bd"),alt:""},slot:"prefix"})]),s("div",{staticClass:"student-name",attrs:{"data-email":i.email}},[s("a-tooltip",{attrs:{placement:"top",mouseEnterDelay:1}},[s("template",{slot:"title"},[e._v(" "+e._s(i.email)+" ")]),e._v(" "+e._s(i.realName)+" ")],2)],1),-1!==e.selectedMemberIdList.indexOf(i.userId)?s("div",{staticClass:"select-status-icon"},[s("a-icon",{staticClass:"my-selected-icon",staticStyle:{"{color":"#07AB84}"},attrs:{type:"check-circle",theme:"filled"}})],1):e._e()])})),0)])])})),s("div",{staticClass:"no-group-tips"},[0!==e.allStudentUserList.length||e.loading?e._e():s("a-empty",{attrs:{description:"No student exist"}}),0===e.allStudentUserList.length||0!==e.attendanceEmailList.length||e.loading?e._e():s("a-empty",{attrs:{description:"No attendance student exist"}})],1)],2)])]),s("div",{staticClass:"form-table-content",attrs:{"data-mode":e.mode}},[e.loading?e._e():[s("div",{directives:[{name:"show",rawName:"v-show",value:e.currentActiveStudentId||e.mode===e.EvaluationTableMode.Edit,expression:"(currentActiveStudentId || mode === EvaluationTableMode.Edit)"}],staticClass:"table-content"},e._l(e.forms,(function(t,i){return s("div",{key:i,staticClass:"form-table-item"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.formId===e.currentActiveFormId,expression:"formItem.formId === currentActiveFormId"}],staticClass:"form-table-item-content"},[s("div",{staticClass:"form-header-line"},[s("div",{staticClass:"form-setting"},[e.isTeacher?s("a-space",[s("div",{staticClass:"switch-item"},[s("div",{staticClass:"switch-name"},[e._v(" Student Eval ")]),s("a-switch",{attrs:{size:"small"},on:{click:function(a){return e.handleToggleStudentEvaluation(t)}},model:{value:t.se,callback:function(a){e.$set(t,"se",a)},expression:"formItem.se"}})],1),s("div",{staticClass:"switch-item"},[s("div",{staticClass:"switch-name"},[e._v(" Peer Eval ")]),s("a-switch",{attrs:{size:"small"},on:{click:function(a){return e.handleTogglePeerEvaluation(t)}},model:{value:t.pe,callback:function(a){e.$set(t,"pe",a)},expression:"formItem.pe"}})],1)]):e._e()],1),s("div",{staticClass:"right-icon"},[s("div",{staticClass:"icon-type-item"},[s("div",{staticClass:"icon-item"},[s("teacher-icon")],1),s("div",{staticClass:"label"},[e._v("Teacher")])]),s("div",{staticClass:"icon-type-item"},[s("div",{staticClass:"icon-item"},[s("student-icon")],1),s("div",{staticClass:"label"},[e._v("My Self")])]),s("div",{staticClass:"icon-type-item"},[s("div",{staticClass:"icon-item"},[s("peer-icon")],1),s("div",{staticClass:"label"},[e._v("Peer")])])]),s("div",{staticClass:"form-action"},[e.isTeacher&&e.mode===e.EvaluationTableMode.TeacherEvaluate&&e.hasNewEvaluationDataReceived?s("a-button",{staticClass:"my-form-header-btn",staticStyle:{"{\n                          width":"120px",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center",background:"rgba(21, 195, 154, 0.08)",border:"1px solid #15C39A","border-radius":"20px",padding:"15px 20px"},attrs:{icon:"reload"},on:{click:e.handleRefreshEvaluationData}},[e._v(" Refresh to see ")]):e._e(),!e.isTeacher||e.mode!==e.EvaluationTableMode.Edit&&e.mode!==e.EvaluationTableMode.TeacherEvaluate?e._e():s("a-button",{staticClass:"my-form-header-btn",staticStyle:{"{\n                            width":"120px",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center",background:"rgba(21, 195, 154, 0.08)",border:"1px solid #15C39A","border-radius":"20px",padding:"15px 20px"},on:{click:e.handleToggleMode}},[s("div",{staticClass:"btn-icon"},[s("img",{attrs:{src:a("4551")}})]),s("div",{staticClass:"btn-text"},[e.mode===e.EvaluationTableMode.Edit?[e._v(" Evaluating ")]:e._e(),e.mode!==e.EvaluationTableMode.Edit?[e._v(" Editing ")]:e._e()],2)]),e.mode===e.EvaluationTableMode.TeacherEvaluate?s("a-button",{staticClass:"my-form-header-btn",staticStyle:{"{\n                          width":"120px",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center",background:"rgba(21, 195, 154, 0.08)",border:"1px solid #15C39A","border-radius":"20px",padding:"15px 20px"},on:{click:e.handleSaveEvaluation}},[s("div",{staticClass:"btn-icon"},[s("img",{attrs:{src:a("f7b2")}})]),s("div",{staticClass:"btn-text"},[e._v(" Submit ")])]):e._e()],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.EvaluationTableMode.TeacherEvaluate,expression:"mode === EvaluationTableMode.TeacherEvaluate"}],staticClass:"comment"},[e.currentActiveFormId&&e.currentActiveStudentId?s("div",{staticClass:"summary-input"},[s("a-textarea",{staticClass:"my-textarea",attrs:{"auto-size":{minRows:2,maxRows:6},placeholder:"Write a comment","aria-placeholder":"Write a comment"},on:{keyup:function(t){return e.handleUpdateComment(e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].comment)}},model:{value:e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].comment,callback:function(t){e.$set(e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId],"comment",t)},expression:"studentEvaluateData[currentActiveStudentId][currentActiveFormId].comment"}})],1):e._e()]),e.mode===e.EvaluationTableMode.TeacherEvaluate?s("div",{staticClass:"student-question"},[e.currentActiveFormId&&e.currentActiveStudentId&&e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].hasOwnProperty("question1")?s("div",{staticClass:"summary-input student-question-item"},[s("div",{staticClass:"question-text"},[e._v("What's the most important thing you learned today? Why do you think so?")]),s("div",{staticClass:"question-answer"},[e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].question1?[e._v(" "+e._s(e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].question1)+" ")]:[s("span",{staticClass:"no-answer"},[e._v("The student has not answered the question")])]],2)]):e._e(),e.currentActiveFormId&&e.currentActiveStudentId&&e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].hasOwnProperty("question2")?s("div",{staticClass:"summary-input student-question-item"},[s("div",{staticClass:"question-text"},[e._v("What do you want to learn more about, and why?")]),s("div",{staticClass:"question-answer"},[e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].question2?[e._v(" "+e._s(e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].question2)+" ")]:[s("span",{staticClass:"no-answer"},[e._v("The student has not answered the question")])]],2)]):e._e(),e.currentActiveFormId&&e.currentActiveStudentId&&e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].hasOwnProperty("question3")?s("div",{staticClass:"summary-input student-question-item"},[s("div",{staticClass:"question-text"},[e._v("What made you curious today? How does learning feel different when you’re curious?")]),s("div",{staticClass:"question-answer"},[e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].question3?[e._v(" "+e._s(e.studentEvaluateData[e.currentActiveStudentId][e.currentActiveFormId].question3)+" ")]:[s("span",{staticClass:"no-answer"},[e._v("The student has not answered the question")])]],2)]):e._e()]):e._e(),s("div",{staticClass:"form-table-detail"},[s("evaluation-table",{ref:"evaluationTable",refInFor:!0,attrs:{"form-id":t.formId,"init-raw-headers":t.initRawHeaders,"init-raw-data":t.initRawData,"form-type":t.formType,mode:e.mode,"form-body-data":e.formBodyData,"task-learn-outs":t.taskLearnOuts,"task-self-outs":t.taskSelfOuts},on:{"update-evaluation":e.handleUpdateEvaluate,"add-evidence":e.handleAddEvidence,"error-mode":e.handleErrorMode,"use-clicked-text":e.handleUseClickedTextToComment}})],1)])])})),0),0===e.forms.length?[s("div",{staticClass:"no-form-tips"},[s("no-more-resources",{attrs:{tips:"The evaluation form has not been created!"}})],1)]:e.mode===e.EvaluationTableMode.Edit||e.currentActiveStudentId?e._e():[s("div",{staticClass:"no-form-tips"},[s("no-more-resources",{attrs:{tips:"Please select a student first!"}})],1)]]],2)])])]),s("a-modal",{attrs:{footer:null,maskClosable:!1,closable:!1,width:"900px",destroyOnClose:""},model:{value:e.selectRubricVisible,callback:function(t){e.selectRubricVisible=t},expression:"selectRubricVisible"}},[s("modal-header",{on:{close:function(t){e.selectRubricVisible=!1}}}),s("div",{staticClass:"rubric"},[s("div",{staticClass:"rubric-header"},[s("div",{staticClass:"my-modal-header"},[e._v(" Add form ")])]),s("div",{staticClass:"select-type"},[s("a-radio-group",{attrs:{name:"radioGroup","default-value":"create"},model:{value:e.rubricType,callback:function(t){e.rubricType=t},expression:"rubricType"}},[s("a-radio",{attrs:{value:"create"}},[e._v(" Add new rubric ")]),s("a-radio",{attrs:{value:"select"}},[e._v(" Choose from Content by me ")])],1)],1),"create"===e.rubricType?[s("div",{staticClass:"select-rubric-wrapper"},[s("div",{staticClass:"table-name"},[s("div",{staticClass:"form-name"},[e._v("Rubric title")]),s("div",{staticClass:"form-input"},[s("a-input",{attrs:{placeholder:e.newTableName},model:{value:e.newTableName,callback:function(t){e.newTableName=t},expression:"newTableName"}})],1)]),s("div",{staticClass:"rubric-type-name"},[s("div",{staticClass:"toggle-mode-type-wrapper"},[s("div",{staticClass:"toggle-mode-type"},[s("div",{staticClass:"toggle-mode"},[s("div",{class:{"mode-item":!0,"skill-active-mode":e.newFormType===e.EvaluationTableType.Rubric||e.newFormType===e.EvaluationTableType.Rubric_2},on:{click:function(t){return e.handleToggleFormType(e.EvaluationTableType.Rubric)}}},[e._v(" Standard rubrics ")]),s("div",{class:{"mode-item":!0,"knowledge-active-mode":e.newFormType===e.EvaluationTableType.CenturySkills},on:{click:function(t){return e.handleToggleFormType(e.EvaluationTableType.CenturySkills)}}},[e._v(" 21st Century Skills rubric ")])])])])]),s("div",{staticClass:"rubric-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.newFormType===e.EvaluationTableType.Rubric||e.newFormType===e.EvaluationTableType.Rubric_2,expression:"newFormType === EvaluationTableType.Rubric || newFormType === EvaluationTableType.Rubric_2"}],class:{"rubric-item":!0,"active-rubric":e.newFormType===e.EvaluationTableType.Rubric_2},on:{click:function(t){return e.handleSelectRubric(e.EvaluationTableType.Rubric_2)}}},[s("div",{staticClass:"rubric-preview"},[s("img",{attrs:{src:a("bd65"),alt:"rubric"}})]),s("div",{staticClass:"rubric-label"},[e._v(" Used for IB PYP, New Zealand, Australia curriculum ")]),s("div",{staticClass:"rubric-active-icon"},[s("a-icon",{attrs:{type:"check-circle",theme:"filled"}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.newFormType===e.EvaluationTableType.Rubric||e.newFormType===e.EvaluationTableType.Rubric_2,expression:"newFormType === EvaluationTableType.Rubric || newFormType === EvaluationTableType.Rubric_2"}],class:{"rubric-item":!0,"active-rubric":e.newFormType===e.EvaluationTableType.Rubric},on:{click:function(t){return e.handleSelectRubric(e.EvaluationTableType.Rubric)}}},[s("div",{staticClass:"rubric-preview"},[s("img",{attrs:{src:a("d882"),alt:"rubric"}})]),s("div",{staticClass:"rubric-label"},[e._v(" Used for IB MYP ")]),s("div",{staticClass:"rubric-active-icon"},[s("a-icon",{attrs:{type:"check-circle",theme:"filled"}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.newFormType===e.EvaluationTableType.CenturySkills,expression:"newFormType === EvaluationTableType.CenturySkills"}],class:{"rubric-item":!0,"active-rubric":e.newFormType===e.EvaluationTableType.CenturySkills},on:{click:function(t){return e.handleSelectRubric(e.EvaluationTableType.CenturySkills)}}},[s("div",{staticClass:"rubric-preview"},[s("img",{attrs:{src:a("bd65"),alt:"rubric"}})]),s("div",{staticClass:"rubric-active-icon"},[s("a-icon",{attrs:{type:"check-circle",theme:"filled"}})],1)])]),s("div",{staticClass:"select-rubric-action"},[s("a-button",{staticClass:"my-rubric-btn",staticStyle:{width:"80px","background-color":"#F5F5F5","border-color":"#F5F5F5","box-shadow":"none",color:"#000000"},attrs:{shape:"round",type:"primary"},on:{click:e.handleCancelSelectRubric}},[e._v("Cancel ")]),s("a-button",{staticClass:"my-rubric-btn",staticStyle:{width:"80px"},attrs:{shape:"round",type:"primary"},on:{click:e.handleEnsureSelectRubric}},[e._v("Confirm ")])],1)])]:e._e(),"select"===e.rubricType?[s("div",{staticClass:"select-rubric-wrapper"},[s("div",{staticClass:"evaluation-list"},[s("select-evaluation-list",{attrs:{"task-id":e.taskId,"class-id":e.classId},on:{cancel:function(t){e.selectRubricVisible=!1},selected:e.handleEnsureSelectEvaluation}})],1)])]:e._e()],2)],1),s("a-modal",{attrs:{visible:e.showMultiSelectedConfirm,footer:null,maskClosable:!1,closable:!1,destroyOnClose:""}},[s("modal-header",{on:{close:e.handleCloseMultiConfirm}}),s("div",{staticClass:"multi-selected-tips"},[s("div",{staticClass:"selected-tips"},[e._v(" You have selected "),s("div",{staticClass:"selected-user-list"},e._l(e.selectedMemberNameList,(function(t,a){return s("div",{key:a,staticClass:"selected-student-name"},[e._v(" "+e._s(t)+" ")])})),0),e._v(" The change(s) you make will apply to all of their assessment tool results. Please select only one student if you want to evaluate student individually. ")]),s("div",{staticClass:"modal-ensure-action-line-right",staticStyle:{"justify-content":"center"}},[s("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:e.handleCloseMultiConfirm}},[e._v("Ok ")])],1)])],1),s("a-modal",{attrs:{visible:e.showEvaluationNoticeVisible,footer:null,maskClosable:!1,closable:!1,destroyOnClose:""}},[s("div",{staticClass:"edit-notice"},[s("div",{staticClass:"notice-title"},[s("h2",[e._v("Notice")])]),s("div",{staticClass:"edit-tips"},[s("div",{staticClass:"self-evaluation-notice"},[e._v(" There are "+e._s(e.allStudentUserIdList.length-e.studentEvaluateIdList.length)+" students who haven't completed the self-assessment tool. ")]),s("div",{staticClass:"peer-evaluation-notice"},[e._v(" There are "+e._s(e.allStudentUserIdList.length-e.peerEvaluateIdList.length)+" students who haven't completed peer-assessment tool. ")])]),s("div",{staticClass:"modal-ensure-action-line-right"},[s("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:e.handleContinueToEdit}},[e._v("Continue to edit ")]),s("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:e.handleSaveCurrentEvaluation}},[e._v(" Save ")])],1)])]),s("a-drawer",{attrs:{destroyOnClose:"",placement:"right",width:"1020px",closable:!1,visible:e.evidenceSelectVisible},on:{close:function(t){e.evidenceSelectVisible=!1}}},[s("div",{staticClass:"add-evaluation-evidence-wrapper"},[e.currentEvidenceItem?s("div",{staticClass:"slide-preview"},[s("ppt-slide-view",{attrs:{"selected-id-list":e.currentEvidenceItem.evidenceIdList,"selected-id-student-list":e.currentEvidenceItem.evidenceIdStudentList,"row-id":e.currentEvidenceItem.rowId,"form-id":e.currentActiveFormId,"class-id":e.classId,"session-id":e.sessionId,"slide-id":e.classInfo.slideId,"student-name":e.selectedMemberIdList.length?e.selectedMemberIdList[0]:null,mode:e.mode},on:{"ensure-evidence-finish":e.handleEnsureEvidenceFinish,"cancel-evidence-finish":e.handleCancelEvidenceFinish}}),e.classInfo&&e.classInfo.slideId?e._e():[s("no-more-resources",{attrs:{tips:"no slide"}})]],2):e._e()])])],1)},i=[],n=(a("7db0"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("159b"),a("caad"),a("2532"),a("b0c0"),a("b64b"),a("ac1f"),a("1276"),a("fb6a"),a("c740"),a("4de4"),a("2ca0"),a("5319"),a("ca00")),o=a("1138"),r=a("81c4"),l=a("98a4"),d=a.n(l),c=a("5d88"),u=a.n(c),m=a("519d"),f=a.n(m),h=a("a615f"),v=a.n(h),p=a("4e45"),g=a.n(p),b=a("d8fe"),I=a.n(b),E=a("a3c5"),w=a.n(E),A=a("60427"),C=a("9f06"),y=a("5f34"),S=a("7849"),T=a("90e8"),L=a("c948"),k=a("69b3"),x=a("7735"),O=a("3f76"),D=a("ab9f"),M=a("af28"),F=a("b199"),N=a("823b"),U={name:"ClassSessionEvaluation",components:{PptSlideView:x["a"],NoMoreResources:k["a"],SelectEvaluationList:y["a"],EvaluationTable:o["a"],CommonFormHeader:r["a"],GrayIcon:d.a,PeerIcon:u.a,StudentIcon:f.a,TeacherIcon:v.a,GroupIcon:g.a,ArrowDown:I.a,ArrowTop:w.a,ModalHeader:A["a"]},props:{taskId:{type:String,required:!0},classId:{type:String,required:!0},sessionId:{type:String,required:!0},mode:{type:String,default:T["a"].TeacherEvaluate}},computed:{lastChangeSavedTime:function(){var e=this.form&&this.form.evaluation&&(this.form.evaluation.updateTime||this.form.evaluation.createTime);return e?Object(n["formatLocalUTC"])(this.form.evaluation.updateTime||this.form.evaluation.createTime):""},formBodyData:function(){return this.currentActiveStudentId&&this.currentActiveFormId&&this.studentEvaluateData?this.studentEvaluateData[this.currentActiveStudentId][this.currentActiveFormId]:(this.$logger.info("no formBodyData currentActiveFormId "+this.currentActiveFormId+" currentActiveStudentId "+this.currentActiveStudentId," studentEvaluateData ",this.studentEvaluateData),null)},isTeacher:function(){return this.$store.getters&&"teacher"===this.$store.getters.currentRole},currentActiveStudentName:function(){var e=this;if(this.currentActiveStudentId&&this.allStudentUserList){var t=this.allStudentUserList.find((function(t){return t.email===e.currentActiveStudentId}));return t?t.realName:""}return""}},data:function(){return{loading:!0,isExistFormTable:!1,currentActiveFormId:null,form:{evaluationMode:"",id:null,classId:"",email:this.$store.getters.email,name:"",className:"",forms:[],groups:[],updateTime:null,createTime:null,createBy:null,type:O["e"].classSessionEvaluation},classInfo:{classId:null,author:null,date:null,status:null,className:null,type:null,fileName:null,slideId:null,lockPage:null,responseLimitMode:null,responseLimitTime:null,copyFrom:null},id:null,oldFormsJson:null,oldStudentEvaluationJson:null,groups:[],selectedGroupIdList:[],studentList:[],selectedMemberIdList:[],selectedMemberNameList:[],selectedStudentNameList:[],EvaluationTableType:S["a"],EvaluationTableMode:T["a"],TeacherEvaluationStatus:L["a"],groupNum:0,memberNum:0,selectRubricVisible:!1,newFormType:S["a"].CenturySkills,rubricType:"create",newTableName:"21st Century Skills",currentEditingTitle:null,currentFormItem:null,currentActiveStudentId:null,allStudentUserIdList:[],evidenceSelectVisible:!1,currentEvidenceItem:null,currentActiveGroupId:null,showMultiSelectedConfirm:!1,formSaving:!1,showEvaluationNoticeVisible:!1,studentEvaluateIdList:[],peerEvaluateIdList:[],currentUserGroupId:null,currentUserGroupUserIdList:[],typeMap:O["e"],isEmptyStudentEvaluateData:!1,allStudentUserList:[],allNoGroupStudentUserIdList:[],allNoGroupStudentUserList:[],taskLearnOuts:[],taskSelfOuts:[]}},mixins:[M["a"]],beforeRouteLeave:function(e,t,a){var s=this;this.$logger.info("beforeRouteLeave",e,t,a),this.$logger.info("forms",this.forms,"oldFormsJson",this.oldFormsJson),this.$logger.info("studentEvaluateData",this.studentEvaluateData,"oldStudentEvaluationJson",this.oldStudentEvaluationJson),!this.initCompleted||JSON.stringify(this.forms)===this.oldFormsJson&&JSON.stringify(this.studentEvaluateData)===this.oldStudentEvaluationJson?a():this.$confirm({title:"Alert",okText:"Save",cancelText:"No",content:"Do you want to save the changes?",onOk:function(){s.handleSaveEvaluation(),setTimeout((function(){a()}),1500)},onCancel:function(){a()}})},created:function(){this.$logger.info("["+this.mode+"] created ClassSessionEvaluation taskId "+this.taskId+" classId "+this.classId+" sessionId "+this.sessionId),this.initClassSessionEvaluation(),this.updateMode(),this.loadLinkedTaskData(),window.sessionStorage.removeItem("multiConfirmVisible")},mounted:function(){window.parent&&window.parent.postMessage(JSON.stringify({to:"classroom",event:"evaluation-mounted",data:{taskId:this.taskId,classId:this.classId,sessionId:this.sessionId}}),"*")},methods:{initClassSessionEvaluation:function(){var e=this;this.$logger.info("initClassSessionEvaluation classId "+this.classId+" sessonId "+this.sessionId),Object(D["d"])({sessionId:this.sessionId}).then((function(t){if(e.$logger.info("SchoolClassListClassAttendance",t),t.success&&t.result.length>0){e.attendanceList=[],e.attendanceEmailList=[];var a=new Set;t.result.forEach((function(t){a.has(t.email)||(e.attendanceList.push(t),e.attendanceEmailList.push(t.email),a.add(t.email))})),e.$logger.info("attendanceList",e.attendanceList)}})).catch((function(t){e.loading=!1,e.$logger.error("SchoolClassListClassAttendance",t),e.$message.error("SchoolClassListClassAttendance "+t)})).finally((function(){e.loadClassSessionEvaluationData()}))},updateMode:function(){var e=this;Object(C["SaveEvaluationMode"])({sessionId:this.sessionId,mode:this.mode===T["a"].Edit?L["a"].Editing:L["a"].Evaluating}).then((function(t){e.$logger.info("updateMode success",t)}))},loadClassSessionEvaluationData:function(){var e=this;Object(C["GetSessionEvaluationByClassId"])({classId:this.sessionId}).then((function(t){e.$logger.info("GetSessionEvaluationByClassId response",t);var a=[],s=t.result;e.classInfo=s.classInfo,s.groups.forEach((function(t){t.expand=!0,t.attendanceList=[],t.members.forEach((function(s){a.push(s.userId),e.attendanceEmailList.includes(s.userId)&&t.attendanceList.push(s.userId)}))})),e.allNoGroupStudentUserIdList=[],e.allNoGroupStudentUserList=[],s.classMembersVos&&s.classMembersVos.length&&(s.classMembersVos.forEach((function(e){e.userId=e.email})),e.$logger.info("formatted classMembersVos",s.classMembersVos),s.classMembersVos.forEach((function(t){-1===a.indexOf(t.userId)&&(e.allNoGroupStudentUserIdList.push(t.userId),e.allNoGroupStudentUserList.push(t))})),e.allStudentUserList=s.classMembersVos,e.allStudentUserList.forEach((function(t){e.allStudentUserIdList.push(t.userId)}))),e.$logger.info("allNoGroupStudentUserIdList",e.allNoGroupStudentUserIdList),s.classInfo&&!s.evaluation&&(e.form.name=s.classInfo.fileName,e.form.className=s.classInfo.className,e.form.createBy=s.classInfo.author,e.form.createTime=new Date(1e3*s.classInfo.date),e.form.type=O["e"].classSessionEvaluation,e.$logger.info("init form data",e.form));var i=e.allStudentUserIdList;e.groups=s.groups,s.evaluation&&(e.evaluationId=s.evaluation.id,e.form=Object.assign(e.form,s.evaluation),s.evaluation.forms.forEach((function(t){e.forms.push({title:t.title,titleEditing:!1,formType:t.formType,se:t.se,pe:t.pe,menuVisible:!1,mode:t.mode,id:t.id,formId:t.formId,initRawHeaders:JSON.parse(t.initRawHeaders),initRawData:JSON.parse(t.initRawData)})})),e.$logger.info("forms",e.forms),e.oldFormsJson=JSON.stringify(e.forms),e.forms.length||(s.evaluation.studentEvaluateData=null)),e.forms.length&&(e.currentActiveFormId=e.forms[0].formId),e.$logger.info("allStudentUserIdList",e.allStudentUserIdList);var n=!1;if(s.evaluation&&s.evaluation.studentEvaluateData){var o=JSON.parse(s.evaluation.studentEvaluateData),r=Object.keys(o);0===r.length?n=!0:r.forEach((function(e){o.hasOwnProperty(e)&&0===Object.keys(o[e]).length&&(n=!0)}))}else n=!0;if(e.isEmptyStudentEvaluateData=n,e.$logger.info("isEmptyStudentEvaluateData "+n,s.evaluation),n){if(i.length&&e.forms.length){var l={};i.forEach((function(t){l[t]={},e.forms.forEach((function(e){l[t][e.formId]={comment:null,question1:null,question2:null,question3:null},e.initRawData.forEach((function(a){l[t][e.formId][a.rowId]={teacherEvaluation:null,teacherName:null,teacherEmail:null,peerEvaluation:null,peerName:null,peerEmail:null,studentEvaluation:null,studentName:null,studentEmail:null,data:null,evidenceIdList:[],evidenceIdStudentList:[]}}))}))})),e.$logger.info("studentEvaluateData init finished ",l),e.studentEvaluateData=l,e.oldStudentEvaluationJson=JSON.stringify(l),e.mode===T["a"].TeacherEvaluate&&(e.currentActiveStudentId=i[0],e.selectedMemberIdList.push(e.currentActiveStudentId))}}else e.studentEvaluateData=JSON.parse(s.evaluation.studentEvaluateData),e.oldStudentEvaluationJson=s.evaluation.studentEvaluateData,i.length&&e.mode!==T["a"].Edit&&e.mode!==T["a"].Preview&&(e.currentActiveStudentId=i[0],e.selectedMemberIdList.push(e.currentActiveStudentId)),e.$logger.info("restore studentEvaluateData",e.studentEvaluateData);e.form.className=e.classInfo.className,e.form.type=O["e"].classSessionEvaluation,e.form.evaluationMode=e.mode,e.form.email=e.$store.getters.email})).finally((function(){e.forms&&0!==e.forms.length||e.mode===T["a"].Edit||(window.location.pathname="/classroom-iframe/class-evaluation/"+e.taskId+"/"+e.classId+"/"+e.sessionId+"/edit"),e.loading=!1,window.parent&&window.parent.postMessage(JSON.stringify({to:"classroom",event:"evaluation-loaded",data:{taskId:e.taskId,classId:e.classId,sessionId:e.sessionId}}),"*")}))},loadLinkedTaskData:function(){var e=this;this.$logger.info("loadLinkedTaskData "+this.taskId),Object(F["TaskQueryById"])({id:this.taskId}).then((function(t){if(N["info"]("TaskQueryById "+e.taskId,t.result),t.success){var a=t.result;a.learnOuts.forEach((function(e){if(e.path&&e.path.length>0){var t=e.path.split(">");e.parentNameList=t.slice(-2)}else e.parentNameList=[]})),a.selfOuts.forEach((function(e){e.parentNameList=[]})),e.taskLearnOuts=a.learnOuts,e.taskSelfOuts=a.selfOuts}}))},handleActiveForm:function(e,t){this.$logger.info("handleActiveForm "+e,t),this.currentActiveFormId!==t.formId&&(this.currentActiveFormId=t.formId)},handleClickMember:function(e,t){var a=this;if(this.$logger.info("handleClickMember","group",e,"member",t,"selectedMemberIdList",this.selectedMemberIdList),this.mode===T["a"].TeacherEvaluate){var s=this.selectedMemberIdList.indexOf(t.userId);if(this.$logger.info("handleClickMember index "+s),-1===s){if(e){var i=[t.userId];e.members.forEach((function(e){-1!==a.selectedMemberIdList.indexOf(e.userId)&&-1===i.indexOf(e.userId)&&i.push(e.userId)})),this.selectedMemberIdList=i,this.currentActiveStudentId=t.userId,-1===this.selectedGroupIdList.indexOf(e.id)&&(this.selectedGroupIdList=[]),this.currentActiveGroupId=e.id}else this.selectedMemberIdList=[t.userId],this.currentActiveStudentId=t.userId,this.selectedGroupIdList=[];if(2===this.selectedMemberIdList.length){var n=[];e.members.forEach((function(e){-1!==a.selectedMemberIdList.indexOf(e.userId)&&n.push(e.realName)})),this.selectedMemberNameList=n;var o=window.sessionStorage.getItem("multiConfirmVisible");this.$logger.info("confirmVisible "+o),o||(this.showMultiSelectedConfirm=!0)}}else{var r=[];this.selectedMemberIdList.forEach((function(e){e!==t.userId&&r.push(e)})),this.selectedMemberIdList=r,this.selectedMemberIdList.length?this.currentActiveStudentId=this.selectedMemberIdList[0]:this.currentActiveStudentId=null}this.$logger.info("currentActiveGroupId "+this.currentActiveFormId+" selectedMemberIdList ",this.selectedMemberIdList)}},handleSelectGroup:function(e){if(this.$logger.info("handleSelectGroup",e),this.mode===T["a"].TeacherEvaluate){var t=this.selectedGroupIdList.indexOf(e.id);if(-1===t){this.selectedGroupIdList=[e.id];var a=[],s=[];if(e.members.forEach((function(e){a.push(e.userId),s.push(e.realName)})),this.selectedMemberNameList=s,this.selectedMemberIdList=a,this.selectedMemberNameList.length>1){var i=window.sessionStorage.getItem("multiConfirmVisible");this.$logger.info("confirmVisible "+i),i||(this.showMultiSelectedConfirm=!0)}this.currentActiveStudentId=this.selectedMemberIdList[0],this.currentActiveGroupId=e.id}else this.selectedMemberIdList=[],this.selectedGroupIdList=[],this.currentActiveStudentId=null,this.currentActiveGroupId=null;this.$logger.info("handleSelectGroup selectedMemberIdList",this.selectedMemberIdList,this.currentActiveStudentId)}else this.$logger.info("current mode "+this.mode+" ignore it!")},handleToggleGroupExpand:function(e,t){t.stopPropagation(),t.preventDefault(),this.$logger.info("handleToggleGroupExpand",e),e.expand=!e.expand},handleAddFormTable:function(){this.$logger.info("handleAddFormTable");var e=this.forms.length+1;this.newTableName="Rubric "+e,this.newFormType=S["a"].Rubric_2,this.selectRubricVisible=!0},handleCancelSelectRubric:function(){this.$logger.info("handleCancelSelectRubric "+this.newFormType),this.selectRubricVisible=!1},handleEnsureSelectRubric:function(){if(this.$logger.info("handleEnsureSelectRubric "+this.newFormType),this.newFormType){this.selectRubricVisible=!1;var e=[],t=[];this.forms.forEach((function(a){e.push(a.title),t.push(a.formId)}));var a=this.forms.length+1,s=this.newTableName?this.newTableName:"Rubric "+a,i="ext_"+Math.random(1e9,9999999999);while(-1!==e.indexOf(s))a++,s="Rubric "+a;while(-1!==t.indexOf(i))a++,i="ext_"+Math.random(1e9,9999999999);var n={title:s,titleEditing:!1,formType:this.newFormType,se:!1,pe:!1,menuVisible:!1,comment:null,mode:L["a"].Editing,id:null,formId:i,tableData:{initRawHeaders:[],initRawData:[]},taskSelfOuts:this.taskSelfOuts,taskLearnOuts:this.taskLearnOuts};this.$logger.info("newFormTable",n),this.forms.push(n),this.currentActiveFormId=n.formId,this.isEmptyStudentEvaluateData=!1}else this.$message.warn("Choose rubric format!")},handleEditFormTitle:function(e){this.$logger.info("handleEditFormTitle",e),this.mode===T["a"].Edit&&(this.currentFormItem&&(this.currentFormItem.titleEditing=!1,this.currentFormItem=null),this.currentEditingTitle=e.title,e.titleEditing=!0,this.currentFormItem=e)},handleEnsureUpdateFormTitle:function(){this.$logger.info("handleEnsureUpdateFormTitle",this.currentEditingTitle),this.currentFormItem.title=this.currentEditingTitle,this.currentFormItem.titleEditing=!1},handleEnsureSelectEvaluation:function(e){var t=this;this.$logger.info("handleEnsureSelectEvaluation",e);var a=e.evaluationIdList,s=e.selectedFormList;if(a&&a.length)Object(C["EvaluationQueryByIds"])({ids:a}).then((function(e){t.$logger.info("EvaluationQueryByIds",e);var a=e.result;a.forEach((function(e){e.forms.forEach((function(e){var t=s.findIndex((function(t){return t.formId===e.formId}));-1===t&&(e.initRawHeaders=JSON.parse(e.initRawHeaders),e.initRawData=JSON.parse(e.initRawData),s.push(e))}))}));var i=[];t.forms.forEach((function(e){i.push(e.formId)}));var n=t.forms.length+1,o="ext_"+Math.random(1e9,9999999999);s.forEach((function(e){while(-1!==i.indexOf(o))n++,o="ext_"+Math.random(1e9,9999999999);i.push(o),e.id=null,e.formId=o,e.title="evaluation of task/session "+n})),t.allStudentUserIdList.forEach((function(e){s.forEach((function(a){var s={};s={comment:null,question1:null,question2:null,question3:null},a.initRawData.forEach((function(e){s[e.rowId]={teacherEvaluation:null,teacherName:null,teacherEmail:null,peerEvaluation:null,peerName:null,peerEmail:null,studentEvaluation:null,studentName:null,studentEmail:null,data:null,evidenceIdList:[],evidenceIdStudentList:[]}})),t.$set(t.studentEvaluateData[e],a.formId,s),t.$logger.info("formId "+a.formId,t.studentEvaluateData[e])}))})),s.forEach((function(e){t.forms.push(e),t.$logger.info("forms add "+e.formId,e)})),t.$logger.info("forms",t.forms)}));else if(s.length){var i=[];this.forms.forEach((function(e){i.push(e.formId)}));var n=this.forms.length+1,o="ext_"+Math.random(1e9,9999999999);s.forEach((function(e){while(-1!==i.indexOf(o))n++,o="ext_"+Math.random(1e9,9999999999);i.push(o),e.id=null,e.formId=o,e.title="evaluation of task/session "+n})),this.allStudentUserIdList.forEach((function(e){s.forEach((function(a){var s={};s={comment:null,question1:null,question2:null,question3:null},a.initRawData.forEach((function(e){s[e.rowId]={teacherEvaluation:null,teacherName:null,teacherEmail:null,peerEvaluation:null,peerName:null,peerEmail:null,studentEvaluation:null,studentName:null,studentEmail:null,data:null,evidenceIdList:[],evidenceIdStudentList:[]}})),t.$set(t.studentEvaluateData[e],a.formId,s),t.$logger.info("formId "+a.formId,t.studentEvaluateData[e])}))})),s.forEach((function(e){t.forms.push(e),t.$logger.info("forms add "+e.formId,e)})),this.$logger.info("forms",this.forms)}this.selectRubricVisible=!1},goBack:function(){var e=this;if(window.history.length<=1)return this.$router.push({path:"/teacher/main/created-by-me"}),!1;this.$router.go(-1),setTimeout((function(){e.$router.push({path:"/teacher/main/created-by-me"})}),500)},handleSaveEvaluation:function(e){var t=this;if(this.$logger.info("handleSaveEvaluation",this.forms,e,"this.isEmptyStudentEvaluateData",this.isEmptyStudentEvaluateData,"mode",this.mode),this.isEmptyStudentEvaluateData||this.mode!==T["a"].Edit){this.formSaving=!0,this.showEvaluationNoticeVisible=!1;var a=[];if(this.$refs.evaluationTable.forEach((function(e){var s=e.getTableStructData();t.$logger.info("getTableStructData ",s,"header",s.headers,"row list",s.list),t.forms.forEach((function(e){if(e.formId===s.formId){var t={id:e.id,formId:e.formId,formType:e.formType,title:e.title,initRawHeaders:JSON.stringify(s.headers),initRawData:JSON.stringify(s.list),pe:e.pe,se:e.se};a.push(t)}}))})),this.$logger.info("formDataList",a,"this.form",this.form,"this.sessionId",this.sessionId),this.form.classId=this.sessionId,this.form.forms=a,this.$logger.info("!!!!!!!!!!!!!!!!!! studentEvaluateData !!!!!!!!!!!",this.studentEvaluateData),this.form.studentEvaluateData=JSON.stringify(this.studentEvaluateData),0===a.length)return this.$message.error("Please add at least one form!"),this.formSaving=!1,e&&this.goEvaluatePage(),!1;this.evaluationId&&(this.form.id=this.evaluationId),Object(C["SaveSessionEvaluation"])(this.form).then((function(e){t.$logger.info("SaveSessionEvaluation",e),e.result&&e.result.id&&(t.evaluationId=e.result.id),t.$message.success("Save successfully!"),t.formSaving=!1})).then((function(){var e=t.forms.filter((function(e){return e.formId===t.currentActiveFormId}));t.$logger.info("currentForm",e),e=e.length?e[0]:null,t.mode===T["a"].TeacherEvaluate&&e&&(e.pe||e.se)&&Object(C["GetSessionEvaluationByClassId"])({classId:t.sessionId}).then((function(e){t.$logger.info("after SaveSessionEvaluation GetSessionEvaluationByClassId",e),e.result&&e.result.evaluation&&e.result.evaluation.id&&(t.evaluationId=e.result.evaluation.id);var a=e.result;if(a.evaluation&&a.evaluation.studentEvaluateData){var s=JSON.parse(a.evaluation.studentEvaluateData),i=Object.keys(s);t.studentEvaluateIdList=[],t.peerEvaluateIdList=[];var n=[],o=[];i.forEach((function(e){t.$logger.info("userId "+e,s[e]);var a=s[e],i=a[t.currentActiveFormId];t.$logger.info("user form data",i);var r=Object.keys(i);r.forEach((function(t){t.startsWith("row_")&&(-1===n.indexOf(e)&&i[t].studentEvaluation&&n.push(e),-1===o.indexOf(e)&&i[t].peerEvaluation&&o.push(i[t].peerEmail))}))})),t.$logger.info("studentEvaluateIdList",n,"peerEvaluateIdList",o),t.studentEvaluateIdList=n,t.peerEvaluateIdList=o,t.showEvaluationNoticeVisible=!0}}))})).finally((function(){e&&t.goEvaluatePage()}))}else this.$info({title:"Notice",content:"After modifying the form, all student evaluation data will be cleared",onOk:function(){t.formSaving=!0,t.showEvaluationNoticeVisible=!1;var a=[];if(t.$refs.evaluationTable.forEach((function(e){var s=e.getTableStructData();t.$logger.info("getTableStructData ",s,"header",s.headers,"row list",s.list),t.forms.forEach((function(e){if(e.formId===s.formId){var t={id:e.id,formId:e.formId,formType:e.formType,title:e.title,initRawHeaders:JSON.stringify(s.headers),initRawData:JSON.stringify(s.list),pe:e.pe,se:e.se};a.push(t)}}))})),t.$logger.info("formDataList",a,"this.form",t.form,"this.sessionId",t.sessionId),t.form.classId=t.sessionId,t.form.forms=a,t.$logger.info("!!!!!!!!!!!!!!!!!! studentEvaluateData !!!!!!!!!!!",t.studentEvaluateData),t.form.studentEvaluateData="{}",0===a.length)return t.$message.error("Please add at least one form!"),t.formSaving=!1,!1;t.evaluationId&&(t.form.id=t.evaluationId),Object(C["SaveSessionEvaluation"])(t.form).then((function(e){t.$logger.info("SaveSessionEvaluation",e),e.result&&e.result.id&&(t.evaluationId=e.result.id),t.$message.success("Save successfully!"),t.formSaving=!1})).then((function(){var e=t.forms.filter((function(e){return e.formId===t.currentActiveFormId}));t.$logger.info("currentForm",e),e=e.length?e[0]:null,t.mode===T["a"].TeacherEvaluate&&e&&(e.pe||e.se)&&Object(C["GetSessionEvaluationByClassId"])({classId:t.sessionId}).then((function(e){t.$logger.info("after SaveSessionEvaluation GetSessionEvaluationByClassId",e),e.result&&e.result.evaluation&&e.result.evaluation.id&&(t.evaluationId=e.result.evaluation.id);var a=e.result;if(a.evaluation&&a.evaluation.studentEvaluateData){var s=JSON.parse(a.evaluation.studentEvaluateData),i=Object.keys(s);t.studentEvaluateIdList=[],t.peerEvaluateIdList=[];var n=[],o=[];i.forEach((function(e){t.$logger.info("userId "+e,s[e]);var a=s[e],i=a[t.currentActiveFormId];t.$logger.info("user form data",i);var r=Object.keys(i);r.forEach((function(t){t.startsWith("row_")&&(-1===n.indexOf(e)&&i[t].studentEvaluation&&n.push(e),-1===o.indexOf(e)&&i[t].peerEvaluation&&o.push(i[t].peerEmail))}))})),t.$logger.info("studentEvaluateIdList",n,"peerEvaluateIdList",o),t.studentEvaluateIdList=n,t.peerEvaluateIdList=o,t.showEvaluationNoticeVisible=!0}}))})).finally((function(){e&&t.goEvaluatePage()}))}})},goEvaluatePage:function(){window.location.pathname="/classroom-iframe/class-evaluation/"+this.taskId+"/"+this.classId+"/"+this.sessionId},handleSaveAndBackEvaluation:function(){var e=this;if(this.$logger.info("handleSaveAndBackEvaluation",this.forms),this.isEmptyStudentEvaluateData||this.mode!==T["a"].Edit){this.formSaving=!0,this.showEvaluationNoticeVisible=!1;var t=[];if(this.$refs.evaluationTable.forEach((function(a){var s=a.getTableStructData();e.$logger.info("getTableStructData ",s,"header",s.headers,"row list",s.list),e.forms.forEach((function(e){if(e.formId===s.formId){var a={id:e.id,formId:e.formId,formType:e.formType,title:e.title,initRawHeaders:JSON.stringify(s.headers),initRawData:JSON.stringify(s.list),pe:e.pe,se:e.se};t.push(a)}}))})),this.$logger.info("formDataList",t,"this.form",this.form,"this.sessionId",this.sessionId),this.form.classId=this.sessionId,this.form.forms=t,this.$logger.info("!!!!!!!!!!!!!!!!!! studentEvaluateData !!!!!!!!!!!",this.studentEvaluateData),this.form.studentEvaluateData=JSON.stringify(this.studentEvaluateData),0===t.length)return this.$message.error("Please add at least one form!"),this.formSaving=!1,!1;this.evaluationId&&(this.form.id=this.evaluationId),Object(C["SaveSessionEvaluation"])(this.form).then((function(t){e.$logger.info("SaveSessionEvaluation",t),t.result&&t.result.id&&(e.evaluationId=t.result.id),t.success?(e.$message.success("Save successfully!"),e.formSaving=!1,e.$router.push({path:"/teacher/main/created-by-me"})):e.$message.error(t.message)}))}else this.$info({title:"Notice",content:"After modifying the form, all student evaluation data will be cleared",onOk:function(){e.$logger.info("handleSaveAndBackEvaluation onOk"),e.formSaving=!0,e.showEvaluationNoticeVisible=!1;var t=[];if(e.$refs.evaluationTable.forEach((function(a){var s=a.getTableStructData();e.$logger.info("getTableStructData ",s,"header",s.headers,"row list",s.list),e.forms.forEach((function(e){if(e.formId===s.formId){var a={id:e.id,formId:e.formId,formType:e.formType,title:e.title,initRawHeaders:JSON.stringify(s.headers),initRawData:JSON.stringify(s.list),pe:e.pe,se:e.se};t.push(a)}}))})),e.$logger.info("formDataList",t,"this.form",e.form,"this.sessionId",e.sessionId),e.form.classId=e.sessionId,e.form.forms=t,e.$logger.info("!!!!!!!!!!!!!!!!!! studentEvaluateData !!!!!!!!!!!",e.studentEvaluateData),e.form.studentEvaluateData="{}",0===t.length)return e.$message.error("Please add at least one form!"),e.formSaving=!1,!1;e.evaluationId&&(e.form.id=e.evaluationId),Object(C["SaveSessionEvaluation"])(e.form).then((function(t){e.$logger.info("SaveSessionEvaluation",t),t.result&&t.result.id&&(e.evaluationId=t.result.id),t.success?(e.$message.success("Save successfully!"),e.formSaving=!1,e.$router.push({path:"/teacher/main/created-by-me"})):e.$message.error(t.message)}))}})},handleSaveCurrentEvaluation:function(){var e=this;this.$logger.info("handleSaveCurrentEvaluation"),this.showEvaluationNoticeVisible=!1,setTimeout((function(){e.studentEvaluateIdList=[],e.peerEvaluateIdList=[],e.$logger.info("studentEvaluateIdList",e.studentEvaluateIdList,"peerEvaluateIdList",e.peerEvaluateIdList)}),5e3)},handleContinueToEdit:function(){var e=this;this.$logger.info("handleContinueToEdit"),this.showEvaluationNoticeVisible=!1,this.handleToggleMode(),setTimeout((function(){e.studentEvaluateIdList=[],e.peerEvaluateIdList=[],e.$logger.info("studentEvaluateIdList",e.studentEvaluateIdList,"peerEvaluateIdList",e.peerEvaluateIdList)}),5e3)},handlePublishEvaluation:function(){},handleUpdateForm:function(e){this.$logger.info("handleUpdateForm",e),this.form.name=e.name},handleSelectRubric:function(e){this.$logger.info("handleSelectRubric newFormType "+e),this.newFormType=e,e===S["a"].Rubric||e===S["a"].Rubric_2?this.newTableName="Rubric "+(this.forms.length+1):e===S["a"].CenturySkills&&(this.newTableName="21st Century Skills "+(this.forms.length+1)),this.$logger.info("newTableName",this.newTableName)},handleDeleteForm:function(e){var t=this;this.$logger.info("handleDeleteForm",e);var a=[];this.forms.forEach((function(t){t.formId!==e.formId&&a.push(t)})),this.forms=a,this.forms.length&&(this.currentActiveFormId=this.forms[this.forms.length-1].formId),this.allStudentUserIdList.forEach((function(a){t.$delete(t.studentEvaluateData[a],e.formId)})),this.$logger.info("after delete "+e.formId,this.studentEvaluateData),this.$logger.info("after delete forms"+e.formId,this.forms)},handleToggleStudentEvaluation:function(e){this.$logger.info("handleToggleStudentEvaluation",e),Object(C["SaveEvaluationFormSet"])({evaluationId:this.evaluationId,formId:e.formId,mode:e.mode,pe:e.pe,se:e.se})},handleTogglePeerEvaluation:function(e){this.$logger.info("handleTogglePeerEvaluation",e),Object(C["SaveEvaluationFormSet"])({evaluationId:this.evaluationId,formId:e.formId,mode:e.mode,pe:e.pe,se:e.se})},handleUpdateEvaluate:function(e){var t=this;if(this.$logger.info("handleUpdateEvaluate",e),this.$logger.info("before update studentEvaluateData",this.studentEvaluateData),this.mode===T["a"].TeacherEvaluate){var a=[];this.selectedMemberIdList.forEach((function(e){-1===a.indexOf(e)&&a.push(e)})),this.groups.forEach((function(e){-1!==t.selectedGroupIdList.indexOf(e.id)&&e.members.forEach((function(e){-1===a.indexOf(e.userId)&&a.push(e.userId)}))})),this.$logger.info("all selected member userId ",a),a.forEach((function(a){t.$logger.info(e.evaluationMode+" studentEvaluateData userId "+a,t.studentEvaluateData[a]),t.$logger.info(e.evaluationMode+" studentEvaluateData formId "+e.formId,t.studentEvaluateData[a][e.formId]),t.$logger.info(e.evaluationMode+" studentEvaluateData rowId "+e.rowId,t.studentEvaluateData[a][e.formId][e.rowId]),e.evaluationMode===T["a"].TeacherEvaluate&&(t.studentEvaluateData[a][e.formId][e.rowId].teacherEmail=e.evaluateUserEmail,t.studentEvaluateData[a][e.formId][e.rowId].teacherName=e.evaluateUserName,t.studentEvaluateData[a][e.formId][e.rowId].data=e.data,t.studentEvaluateData[a][e.formId][e.rowId].teacherEvaluation===e.value?t.studentEvaluateData[a][e.formId][e.rowId].teacherEvaluation="":t.studentEvaluateData[a][e.formId][e.rowId].teacherEvaluation=e.value),t.$logger.info("set "+a+" formId "+e.formId+" row "+e.rowId,t.studentEvaluateData[a][e.formId][e.rowId],"data",e)}))}this.$logger.info("after update studentEvaluateData",this.studentEvaluateData)},handleAddEvidence:function(e){this.$logger.info("handleAddEvidence",e,this.selectedMemberIdList),1===this.selectedMemberIdList.length?(this.evidenceSelectVisible=!0,this.currentEvidenceItem=e.data,this.currentEvidenceItem.rowId=e.rowId):this.$message.warn("You can only add evidence for one student at a time, and now you've selected "+this.selectedMemberIdList.length+" students")},handleErrorMode:function(){this.initCompleted=!1,window.location.pathname="/"},handleUseClickedTextToComment:function(e){this.$logger.info("handleUseClickedTextToComment",e,"currentActiveStudentName",this.currentActiveStudentName);var t=e?e.replace(/The student/g,this.currentActiveStudentName):"";this.studentEvaluateData[this.currentActiveStudentId][this.currentActiveFormId].comment?this.studentEvaluateData[this.currentActiveStudentId][this.currentActiveFormId].comment+="\r\n"+t:this.studentEvaluateData[this.currentActiveStudentId][this.currentActiveFormId].comment=t},handleEnsureEvidenceFinish:function(e){var t=this;this.$logger.info("handleEnsureEvidenceFinish",e);var a=this.currentEvidenceItem.rowId,s=[];this.selectedMemberIdList.forEach((function(e){-1===s.indexOf(e)&&s.push(e)})),this.groups.forEach((function(e){-1!==t.selectedGroupIdList.indexOf(e.id)&&e.members.forEach((function(e){-1===s.indexOf(e.userId)&&s.push(e.userId)}))})),this.$logger.info("all selected member userId ",s),s.forEach((function(s){t.$logger.info("evidence row",t.studentEvaluateData[s][t.currentActiveFormId][a]),t.mode===T["a"].StudentEvaluate?t.studentEvaluateData[s][t.currentActiveFormId][a].evidenceIdStudentList=e.data:t.mode===T["a"].TeacherEvaluate&&(t.studentEvaluateData[s][t.currentActiveFormId][a].evidenceIdList=e.data),t.$logger.info("evidence update user id "+s+" row "+a+" data",t.studentEvaluateData[s][t.currentActiveFormId][a])})),this.evidenceSelectVisible=!1},handleCancelEvidenceFinish:function(){this.evidenceSelectVisible=!1},handleCloseMultiConfirm:function(){this.$logger.info("handleCloseMultiConfirm"),this.showMultiSelectedConfirm=!1,window.sessionStorage.setItem("multiConfirmVisible","hidden")},handleToggleMode:function(){var e=this;this.$logger.info("handleToggleMode"),this.isTeacher?this.mode!==T["a"].Edit?this.$confirm({content:"Are you sure to switch to edit mode ?",onOk:function(){window.location.pathname="/classroom-iframe/class-evaluation/"+e.taskId+"/"+e.classId+"/"+e.sessionId+"/edit"}}):this.$confirm({content:"Are you sure to switch to evaluate mode ?",onOk:function(){e.handleSaveEvaluation(!0)}}):this.$logger.info("role no permission",this.$store.getters.roles)},handleUpdateComment:function(e){var t=this;if(this.$logger.info("handleUpdateComment"),this.mode===T["a"].TeacherEvaluate){var a=[];this.selectedMemberIdList.forEach((function(e){-1===a.indexOf(e)&&a.push(e)})),this.groups.forEach((function(e){-1!==t.selectedGroupIdList.indexOf(e.id)&&e.members.forEach((function(e){-1===a.indexOf(e.userId)&&a.push(e.userId)}))})),this.$logger.info("all selected member userId ",a),a.forEach((function(a){a!==t.currentActiveStudentId&&(t.studentEvaluateData[a][t.currentActiveFormId].comment=e,t.$logger.info("update "+a+" form "+t.currentActiveFormId+" comment"+e,t.studentEvaluateData[a][t.currentActiveFormId]))}))}},handleToggleFormType:function(e){this.newFormType=e,e===S["a"].Rubric||e===S["a"].Rubric_2?this.newTableName="Rubric "+(this.forms.length+1):e===S["a"].CenturySkills&&(this.newTableName="21st Century Skills "+(this.forms.length+1)),this.$logger.info("newTableName",this.newTableName)},handleUpdateHeader:function(){this.$logger.info("ClassSessionEvaluation handleUpdateHeader"),this.$refs.evaluationTable&&this.$refs.evaluationTable.length>0&&this.$refs.evaluationTable.forEach((function(e){e.handleUpdateHeader()})),this.$refs.commonFormHeader&&this.$refs.commonFormHeader.handleEnsureNewFormName()}}},B=U,P=(a("7e18"),a("0c7c")),j=Object(P["a"])(B,s,i,!1,null,"359306fc",null);t["default"]=j.exports},edce:function(e,t,a){e.exports=a.p+"img/8.2fb6907e.png"},ef87:function(e,t,a){"use strict";a("d3b7");var s=a("bc3a"),i=a.n(s),n=a("8ded"),o=a.n(n),r=a("56cd"),l=(a("a27e"),a("9fb0")),d=a("823b"),c=i.a.create({baseURL:"https://api.app.classcipe.com",timeout:6e3}),u=function(e){if(e.response){var t=e.response.data;403===e.response.status&&r["a"].error({message:"Forbidden",description:t.message})}return Promise.reject(e)};c.interceptors.request.use((function(e){var t=o.a.get(l["a"]);return t?e.data?e.data["token"]||(e.data["token"]=t):e.data={token:t}:d["info"](l["a"]+" no set"),e}),u),c.interceptors.response.use((function(e){return e&&e.data&&e.data.code&&"ok"!==e.data.code&&200!==e.data.code&&d["error"](e.data),e.data}),u);t["a"]=c},efca:function(e,t,a){"use strict";a("7bd1")},f4e6:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"slide-preview"},[a("div",{staticClass:"slide-cover"},[a("img",{staticClass:"cover",attrs:{src:e.slideItem.contentUrl}}),e._l(e.slideItem.commentList,(function(t,s){return[t.user_id===e.userId?a("div",{key:s,class:{"dot-item":!0,heartbeat:e.currentActiveId===t.link+"_"+t.time},style:{position:"absolute",border:"3px solid #aaa",backgroundColor:t.background,left:t.left/t.content_width*700+"px",top:t.top/t.content_height*400+"px"},on:{click:function(a){return e.handleActiveItem(t)},mouseover:function(a){return e.handleActiveItem(t)}}}):e._e()]}))],2),a("div",{staticClass:"slide-dot-list"},[e._l(e.slideItem.commentList,(function(t,s){return[t.user_id===e.userId?a("div",{key:s,class:{"dot-item":!0,"active-dot-item":e.currentActiveId===t.link+"_"+t.time,"in-active-dot-item":e.currentActiveId!==t.link+"_"+t.time},attrs:{id:"dot-item-"+t.link+"_"+t.time},on:{mouseover:function(a){return e.handleActiveItem(t)},click:function(a){return e.handleActiveItem(t)}}},[a("div",{staticClass:"author-profile"},[a("div",{staticClass:"avatar"},[a("span",{staticClass:"avatar-user"},[e._v(e._s(t.user_id?t.user_id.slice(0,1).toUpperCase():"C"))])]),a("div",{staticClass:"profile"},[a("div",{staticClass:"author-name"},[e._v(e._s(t.user_id))]),a("div",{staticClass:"author-time"},[e._v(e._s(e._f("formatDate")(1e3*t.time)))])])]),a("div",{staticClass:"dot-detail",attrs:{"data-item":JSON.stringify(t)}},["audio"===t.type?a("div",{class:{"audio-item":!0}},[a("audio",{attrs:{controls:"",src:t.link}})]):e._e(),"video"===t.type?a("div",{class:{"video-item":!0}},[a("video",{attrs:{controls:"",src:t.link}})]):e._e(),"text"===t.type?a("div",{class:{"text-item":!0}},[e._v(" "+e._s(t.link)+" ")]):e._e()])]):e._e()]}))],2)])},i=[],n=(a("9911"),{name:"SlidePreview",props:{slideItem:{type:Object,required:!0},userId:{type:String,default:null}},data:function(){return{currentActiveId:null}},created:function(){},methods:{handleActiveItem:function(e){this.$logger.info("SlidePreview handleActiveItem",e),this.currentActiveId=e.link+"_"+e.time;var t="dot-item-"+e.link+"_"+e.time,a=document.getElementById(t);a&&a.scrollIntoView({behavior:"smooth"})}}}),o=n,r=(a("efca"),a("0c7c")),l=Object(r["a"])(o,s,i,!1,null,"b58106c2",null);t["a"]=l.exports},f61a:function(e,t,a){"use strict";a("5952")},f7b2:function(e,t){e.exports="data:image/png;base64,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"}}]);