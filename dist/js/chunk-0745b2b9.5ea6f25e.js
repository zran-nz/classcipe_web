(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0745b2b9"],{"07ed":function(t,e,a){"use strict";a("3e2b")},"2fbc":function(t,e,a){},"357e":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return c}));var n=a("b775"),r="orderRecord",s={list:"/classcipe/api/".concat(r,"/list"),payment:"/classcipe/api/".concat(r,"/list/payment")};function i(t){return Object(n["d"])({url:s.list,method:"get",params:t})}function c(t){return Object(n["d"])({url:s.payment,method:"get",params:t})}},"3e2b":function(t,e,a){},"4a76":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("159b"),a("d81d"),a("c7cd");var n={data:function(){return{tableRefs:[],leftWidth:0,firstColumnWid:0}},mounted:function(){this.firstColumnWid=this.columns[0]?this.columns[0].width:0,this.resetTableWidth(200),window.addEventListener("resize",this.resetTableWidth,!0)},destroyed:function(){window.removeEventListener("resize",this.resetTableWidth)},methods:{resetTableWidth:function(t){var e=this;this.tableRefs&&this.tableRefs.length>0&&(this.tableRefs.forEach((function(a){if(e.$refs[a]&&e.columns&&e.columns.length>0){var n=e.columns.map((function(t){return t.width&&"auto"!==t.width?parseInt(t.width):parseInt(e.firstColumnWid)})).reduce((function(t,e){return t+e}),0),r=(e.$refs[a].$el||e.$refs[a]).getBoundingClientRect().width;r>n+e.leftWidth+t?(e.columns[0].width="auto",e.scroll={x:r}):(e.columns[0].width=e.firstColumnWid,e.scroll={x:n},e.columns[e.columns.length-1].fixed="right")}})),this.$forceUpdate())}}}},"52b8":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"tableCon",staticClass:"my-content"},[a("div",{staticClass:"filter-line"},[a("div",{staticClass:"status-tab"},[a("div",{staticClass:"toggle-mode-type-wrapper"},[a("div",{staticClass:"toggle-mode-type"},[a("div",{staticClass:"toggle-mode"},t._l(t.orderTypes,(function(e,n){return a("div",{key:"orderTypes"+n,class:{"mode-item":!0,"active-mode":t.queryParam.orderType===e.value},on:{click:function(a){return t.toggleType(e.value)}}},[t._v(" "+t._s(e.title)+" ")])})),0)])])]),a("div",{staticClass:"type-owner"},[a("div",{staticClass:"my-search"},[a("a-input-search",{attrs:{placeholder:"Search",allowClear:!0,size:"large"},on:{search:t.triggerSearch,pressEnter:t.triggerSearch},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)])]),a("div",{},[a("s-table",{ref:"table",staticClass:"content-list",attrs:{size:"default",rowKey:function(t){return t.id},columns:t.columns,data:t.loadData,scroll:t.scroll},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[[a("a",{on:{click:function(e){return t.handlePaymentItem(n)}}},[t._v("Refund")])]],2)}}])})],1),a("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px",zIndex:6e3,title:"Payment details"},on:{ok:function(e){t.paymentVisible=!1},cancel:function(e){t.paymentVisible=!1}},model:{value:t.paymentVisible,callback:function(e){t.paymentVisible=e},expression:"paymentVisible"}},[a("payment-detail",{attrs:{taskId:t.currentTaskId,taskName:t.currentTaskName}})],1)],1)},r=[],s=(a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("823b")),i=a("f93e"),c=a("2af9"),o=a("bffd"),u=a("2934"),l=a("357e"),d=a("6e84"),m=a("4a76"),h={name:"MyOrders",mixins:[d["a"],m["a"]],components:{STable:c["d"],PaymentDetail:o["a"]},data:function(){var t=this;return{loading:!1,orderTypes:[],orderStatus:[],queryParam:{status:null,orderType:"1",searchText:""},loadData:function(e){return s["info"]("loadData.parameter",e),Object(l["a"])(Object.assign(e,t.queryParam)).then((function(t){return t.result}))},scroll:{},currentTaskId:null,currentTaskName:null,paymentVisible:!1,tableRefs:["tableCon"],leftWidth:230}},computed:{columns:function(){var t=this,e=[{title:"Task name",dataIndex:"taskName",width:"200px"},{title:"Teacher",dataIndex:"teacherName",width:"150px"}];return this.queryParam.orderType===i["t"].AskTeacher?e=e.concat([{title:"Times",dataIndex:"times",width:"100px"}]):this.queryParam.orderType===i["t"].Other&&(e=[{title:"Product name",dataIndex:"productName",width:"200px"}].concat(e)),e=e.concat([{title:"Price($)",dataIndex:"price",width:"150px",customRender:function(e){return t.$options.filters["percentFormat"](e)}},{title:"Payment",dataIndex:"payment",width:"150px",customRender:function(e){return t.$options.filters["percentFormat"](e)}},{title:"Payment Account",dataIndex:"paymentAccount",width:"150px"},{title:"Date",dataIndex:"createTime",width:"150px"},{title:"Actions",dataIndex:"action",width:"100px",scopedSlots:{customRender:"action"}}]),e}},created:function(){this.initDict()},methods:{initDict:function(){var t=this;Promise.all([Object(u["a"])(i["n"]),Object(u["a"])(i["o"])]).then((function(e){e[0].success&&(t.orderStatus=e[0].result),e[1].success&&(t.orderTypes=e[1].result)}))},toggleType:function(t){this.queryParam.orderType=t,this.$refs.table.refresh(!0),this.resetTableWidth()},triggerSearch:function(){this.$refs.table.refresh(!0)},handlePaymentItem:function(t){t.taskId&&(this.currentTaskId=t.taskId,this.currentTaskName=t.taskName,this.paymentVisible=!0)}}},f=h,p=(a("07ed"),a("0c7c")),b=Object(p["a"])(f,n,r,!1,null,"2780325a",null);e["default"]=b.exports},"65cb":function(t,e,a){"use strict";a("2fbc")},"6e84":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("b0c0");var n={data:function(){return{unwatch:null,routeName:this.$route.name}},computed:{redirectUrl:function(){return"student"===this.$store.state.user.currentRole?"/student/main/my-task":"/account/info"}},created:function(){var t=this;this.unwatch=this.$store.watch((function(t){return t.app.userMode}),(function(e){e&&t.$route.name===t.routeName&&(t.handleModeChange(e),t.routeInMode())})),this.routeInMode()},beforeDestroy:function(){this.unwatch&&this.unwatch()},methods:{routeInMode:function(){this.$route.meta.mode&&this.$route.meta.mode!==this.$store.state.app.userMode&&this.$router.push({path:this.redirectUrl})},handleModeChange:function(t){}}}},bffd:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-content"},[a("div",{staticClass:"modal-title"},[t._v("Task: "+t._s(t.taskName))]),a("s-table",{ref:"table",staticClass:"content-list",attrs:{size:"default",rowKey:function(t){return t.id},columns:t.columns,data:t.loadData,scroll:t.scroll}})],1)},r=[],s=(a("a9e3"),a("823b")),i=a("2af9"),c=a("357e"),o={name:"PaymentDetail",props:{taskId:{type:[String,Number],required:!0},taskName:{type:String,required:!0}},components:{STable:i["d"]},data:function(){var t=this;return{loading:!1,queryParam:{status:null,searchText:"",taskId:this.taskId},loadData:function(e){return s["info"]("loadData.parameter",e),Object(c["b"])(Object.assign(e,t.queryParam)).then((function(t){return t.result}))},scroll:{}}},computed:{columns:function(){var t=this,e=[{title:"Date",dataIndex:"paymentTime"},{title:"Type",dataIndex:"productName",width:"200px"},{title:"Price($)",dataIndex:"price",width:"150px",customRender:function(e){return t.$options.filters["percentFormat"](e)}}];return e}},created:function(){},methods:{triggerSearch:function(){this.$refs.table.refresh(!0)},handleDetail:function(t){}}},u=o,l=(a("65cb"),a("0c7c")),d=Object(l["a"])(u,n,r,!1,null,"2a13b1f0",null);e["a"]=d.exports}}]);