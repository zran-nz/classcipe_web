(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dfc530a"],{"02b5":function(t,e,i){"use strict";i("d8a4")},"0f1c":function(t,e){t.exports="data:image/png;base64,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"},"21fb":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("b0c0");var s={data:function(){return{unwatch:null,routeName:this.$route.name}},created:function(){var t=this;this.unwatch=this.$store.watch((function(t){return t.user.currentSchool}),(function(e){return e&&t.$route.name===t.routeName&&t.handleSchoolChange(e)}))},computed:{},beforeDestroy:function(){this.unwatch&&this.unwatch()},methods:{handleSchoolChange:function(t){}}}},"2bb7":function(t,e,i){},"40ee":function(t,e,i){},"4caa":function(t,e,i){"use strict";i("a82a")},"5e75":function(t,e,i){"use strict";i("ca89")},60427:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-modal-header"},[t.title?s("div",{staticClass:"title",style:{fontSize:t.size+"px"}},[t._v(t._s(t.title))]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.allowClose,expression:"allowClose"}],staticClass:"close-icon",on:{click:t.handleClickClose}},[t.white?t._e():s("img",{attrs:{src:i("0f1c")}}),t.white?s("img",{attrs:{src:i("f8af5")}}):t._e()])])},n=[],a=(i("a9e3"),{name:"ModalHeader",props:{white:{type:Boolean,default:!1},title:{type:String,default:""},allowClose:{type:Boolean,default:!0},size:{type:Number,default:16}},methods:{handleClickClose:function(){this.$logger.info("handleClickClose"),this.$emit("close")}}}),o=a,l=(i("7fab"),i("0c7c")),r=Object(l["a"])(o,s,n,!1,null,"9007633e",null);e["a"]=r.exports},"6e82":function(t,e,i){"use strict";i("2bb7")},"6e84":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("b0c0");var s={data:function(){return{unwatch:null,routeName:this.$route.name}},computed:{redirectUrl:function(){return"student"===this.$store.state.user.currentRole?"/student/main/my-task":"/account/info"}},created:function(){var t=this;this.unwatch=this.$store.watch((function(t){return t.app.userMode}),(function(e){e&&t.$route.name===t.routeName&&(t.handleModeChange(e),t.routeInMode())})),this.routeInMode()},beforeDestroy:function(){this.unwatch&&this.unwatch()},methods:{routeInMode:function(){this.$route.meta.mode&&this.$route.meta.mode!==this.$store.state.app.userMode&&this.$router.push({path:this.redirectUrl})},handleModeChange:function(t){}}}},"7aa6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAABWlJREFUWEfVmX9MHFUQx7/THvGuLaAUKNge7Qnyo9IgAYUWjNo0NipEaqgl0QQbDOgfNcFEA4l/mNSERhJJ1Kgl4o9EE6pVUUi1ptLGKumlJaQttaAVECilSLFAhSP8eGaWXXK3t3e7e3do+/7Zy723bz47b2bevHmEIJoQIg9AAYAkAHEANshPnnUYwKD87ALwPRH9Eqg4MvuiEOJBAM/KgNEm3x8F0ALgA7PQhkGFECkADgAoUuB6pyfw3bU+tE+OYGR2CkMzU9KTW2zYKtita7DWYsX9EXF4JCoBDluE+3c1Aagiom4jH6sLKoSwAqgD8BwAyz/zs6gf6kTj1d/Q65owImNpjMMagZJ1ySi/Mx2rV4bx/3OsXQCVROTyN5lfUCEE293XAHLnxAI+Gb6Iuv4OjMxOmwJUD44Ns6EyIROlcWmw0AruPgVgFxGxXWs2n6BCiAzZnjb0uybxzK9H0TX1d1CA6pdTV92BTzfvRII1nLvY8QqI6KyWEE1QGfJnAGuc48Mo6zoWtBZ9fSFrtyF1B3IiefFwA0C+FqwXqLzcpznUNI/2oLy7FfNChFST6slWEqE+ZTsKo+/irj4AW9Vm4AEqO85xtknWZFFny7JDKtAM25ReoGiWV/NhImJnk5oa9D0Az7NNPnb2m2Vbbn9mcCTjCcVm3yeiF7xAhRCpAM7PiQXL9o6vQu44Rm2HHaw180mOBqzNNCK65KFRIQSHoaKGKxdQ/Ueb0XkDHsdLzaFpZmHea47axHyUxqfx/01EtGsJVN4WT3AwzzlzaNmXvCohGy/aMyTQhqELqO7xVAxHAmf2HmVTyCUip2SjQoiPeP+uG+hAzZ9nAtaSkRf3O3JRsX6Lx9Dyrh/RNNrj8V/1xmxU2jP5v4+JaC8JISwArgCIZm2a3RaNwCljtCC5782BDhxQKSjJdjvasnZz9ygRxTBoPoCTnGDktB8yI9fUWF+QPElx5xH8dP2y13zOrD1KIvMAg9ZwFvPu4Dm81uc0JdzoYH+Q/uTud2xFxfp0FvM6g37BH1V28Riar/UalW14nD/I+svn8Wov5yParXCtAw1pO7jzMIOe5P218Ny3cE5c1XyjOCZJSs04lLDDtV7n/EG/BQPJs2+LjEfTFj5A4ASDsho3ZZ1uxMDMpJd0t8FSH6d75V2taNHRfrCQLMt+Wzja7yvhn30Mysml1d72oWbwrdqYjZcWw8RS04MNBSQLW73Cgt5te/nnDV3QkthkvJXMxyTP5gs2VJBaoH6Xnre6L9Mfl+xFDzaUkFpLr+tMvASN9zyqpGCaZpATsc5rx1EG6nm3L7dUO5Oh8OQP1p//BwrJc6rDk+GAbxY2GEgGVQd8eQsdR07757rB0ShssJAM4sx6Cg5bJP+UtlDTSYkebCggvZISxlXSPK0sxpeKfcGGApJlusXvxTRPBn0IwHGziTPD1iTmSdUP3l7f6G/H24Oax3Jdk3IfoEqc+UR6aulwt3QU0ci49aQwsEvMh+zEWpuYh9L4zSzW8ygia/XWONzJsDfTcfkdItqnrOatWYCQtcpFoJu7pKOoWQhxL5+j/qciGXt5p9qB/ZUdGbaZi2X/UdmRi2OFWpAMbaqQ+9lwtxQr/wqykBsTZsMrCVl4Oi5FKeRyUWx3QIVcNzPwKo0fHOrE4ZHfcWl6XC/EevQn2SJRHHs3KrxL4/vcK3dak+rW8N2A+Yqm1vOyYRw/jPVLh8KxORcGXJMYm10sxUeFWWG3hiPKYgXnqouXDVKCoTS+bHhZKYLpfbFhUDdgzrbKgry+Ocjboh6ce79pUPeX5SrLTgC8q/Gd0yb5ycP4TokdhJ98IXaUiNgWA2r/AqKY1RuF7jn8AAAAAElFTkSuQmCC"},"7fab":function(t,e,i){"use strict";i("40ee")},"8df5":function(t,e){t.exports="data:image/png;base64,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"},9257:function(t,e){t.exports="data:image/png;base64,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"},"9bdd4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-card",{staticClass:"planning-format",attrs:{"body-style":{padding:20}}},[t.loading?t._e():i("a-tabs",{attrs:{type:"card"},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},[i("a-tab-pane",{key:"plan",staticClass:"planning-content",attrs:{tab:"Unit Format",forceRender:!0}},[i("h2",{staticClass:"template-title"},[t._v(t._s(t.getCurrentTemplateName()))]),t.planConfig?i("format-form-with-step",{ref:"plan",attrs:{saving:t.saving||t.loading,"common-list":t.planConfig.commonList,"custom-list":t.planConfig.customList,"step-list":t.planConfig.steps,"step-type":t.typeMap["unit-plan"],"show-tag-step-index-list":[0,1],"required-field-list":t.planRequiredFields},on:{save:function(e){return t.handleSavePlanningForm(!1)}}}):t._e()],1),i("a-tab-pane",{key:"task",staticClass:"planning-content",attrs:{tab:"Task Format",forceRender:!0}},[i("h2",{staticClass:"template-title"},[t._v(t._s(t.getCurrentTemplateName()))]),t.taskConfig?i("format-form-with-step",{ref:"task",attrs:{saving:t.saving||t.loading,"common-list":t.taskConfig.commonList,"custom-list":t.taskConfig.customList,"step-list":t.taskConfig.steps,"step-type":t.typeMap.task,"show-tag-step-index-list":[1],"required-field-list":t.taskRequiredFields},on:{save:function(e){return t.handleSavePlanningForm(!1)}}}):t._e()],1),i("div",{staticClass:"form-config-action",attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[i("a-space",[i("a-button",{attrs:{type:"primary"},on:{click:t.handleShowSelectTemplate}},[i("a-icon",{attrs:{type:"plus"}}),t._v(" Select Template")],1),i("a-divider",{attrs:{type:"vertical"}}),i("a-button",{on:{click:t.handlePreviewPlanningForm}},[t._v("Preview")]),i("a-button",{attrs:{type:"primary",loading:t.saving},on:{click:t.handleSavePlanningForm}},[t._v("Save changes")])],1)],1)],1),i("a-modal",{attrs:{"dialog-style":{top:"50px"},footer:null,destroyOnClose:"",width:"900px"},model:{value:t.selectTemplateVisible,callback:function(e){t.selectTemplateVisible=e},expression:"selectTemplateVisible"}},[i("div",{staticClass:"my-modal-title",attrs:{slot:"title"},slot:"title"},[t._v(" Format templates ")]),i("div",{staticClass:"content-wrapper"},[i("select-template",{attrs:{"template-list":t.templateList,"active-key":t.activeKey,"current-id":t.getCurrentId},on:{cancel:function(e){t.selectTemplateVisible=!1},ensure:t.handleSelectTemplate}})],1)])],1)},n=[],a=i("5530"),o=(i("4de4"),i("b0c0"),i("d3b7"),i("3f76")),l=i("b44c"),r=i("9fb0"),c=i("f93e"),d=i("6e84"),g=i("21fb"),m=i("2f62"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"format-form"},[t._l(t.steps,(function(e,n){return s("div",{key:e.key,staticClass:"step-item"},[s("div",{staticClass:"format-form-header"},[s("div",{staticClass:"format-form-title"},[s("span",{staticClass:"title-num"},[t._v(t._s(n+1))]),s("span",{staticClass:"title"},[e.nameEditing?t._e():[t._v(" "+t._s(e.name)+" "),s("span",{staticClass:"edit-icon",on:{click:function(t){e.nameEditing=!0}}},[s("a-icon",{attrs:{type:"edit"}})],1)],e.nameEditing?[s("a-input",{nativeOn:{keyup:function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;e.nameEditing=!1}},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"step.name"}}),s("span",{staticClass:"edit-icon",on:{click:function(t){e.nameEditing=!1}}},[s("a-icon",{attrs:{type:"check"}})],1)]:t._e()],2)]),s("div",{staticClass:"step-tag-config"},[e.tags&&e.tags.length?s("div",{directives:[{name:"show",rawName:"v-show",value:-1!==t.showTagStepIndexList.indexOf(n),expression:"showTagStepIndexList.indexOf(sIdx) !== -1"}],staticClass:"tag-selected",on:{click:function(i){return t.handleSetTag(e)}}},[s("div",{staticClass:"tag-selected-list"},t._l(e.tags,(function(e,i){return s("div",{key:"tid2-"+i,staticClass:"tag-selected-item"},[s("a-tag",{key:e,staticClass:"my-tag-selected",attrs:{closable:""},on:{close:function(i){return t.handleCloseTag(n,e)}}},[s("span",{staticClass:"my-tag-selected-name"},[t._v(t._s(e))])])],1)})),0)]):t._e()]),s("div",{staticClass:"format-tag-settings"},[s("div",{directives:[{name:"show",rawName:"v-show",value:-1!==t.showTagStepIndexList.indexOf(n),expression:"showTagStepIndexList.indexOf(sIdx) !== -1"}],staticClass:"tag-setting",on:{click:function(i){return t.handleStepSetTag(e)}}},[s("div",{staticClass:"set-tag-label"},[s("a-tooltip",{attrs:{title:"You can prioritize tag categories to show on the tag box for this step."}},[t._v(" Set tag ")])],1),s("a-icon",{staticClass:"gray",style:{color:"#999999",fontSize:"12px"},attrs:{type:"setting"}}),s("a-icon",{staticClass:"green",style:{color:"#15C39A",fontSize:"12px"},attrs:{type:"setting"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.stepEnableConfig(e),expression:"stepEnableConfig(step)"}],staticClass:"step-visible-toggle"},[s("div",{staticClass:"field-visible"},[t._v("Enable")]),s("a-switch",{attrs:{size:"small"},on:{change:t.showStepChangeTips},model:{value:e.visible,callback:function(i){t.$set(e,"visible",i)},expression:"step.visible"}})],1)])]),s("div",{staticClass:"common-field-list"},[s("draggable",t._b({staticClass:"list-group",attrs:{tag:"ul",group:e.id,disabled:n>1||!t.allowDrag},on:{start:function(e){t.commonDrag=!0},end:t.disableCommonDrag},model:{value:e.commonFieldItems,callback:function(i){t.$set(e,"commonFieldItems",i)},expression:"step.commonFieldItems"}},"draggable",t.commonDragOptions,!1),t._l(e.commonFieldItems,(function(e){return s("li",{key:"fieldId"+e.id,staticClass:"list-group-item",style:{filter:e.visible||e.tags.some((function(t){return!t.isOptional}))?"none":"grayscale(100%)"},attrs:{"data-field-name":e.fieldName,"data-id":e.id}},[s("div",{staticClass:"sort-icon vertical-center",on:{mousedown:function(e){t.allowDrag=!0}}},[s("img",{staticClass:"green",attrs:{src:i("9257"),alt:""}}),s("img",{staticClass:"gray",attrs:{src:i("8df5"),alt:""}})]),s("div",{staticClass:"field-item-config"},[s("div",{staticClass:"field-label"},[t._v(" "+t._s(e.fieldLabel)+" "),-1!==t.requiredFieldList.indexOf(e.fieldName)?s("a-tooltip",{attrs:{placement:"top",title:"Required"}},[s("span",{staticClass:"required vertical-center"},[t._v("*")])]):t._e()],1),s("div",{staticClass:"field-config"},[s("div",{staticClass:"field-config-left"},[s("div",{staticClass:"field-display-name field-line-item"},[s("a-input",{staticClass:"show-name-input",attrs:{placeholder:"Please enter the display name"},on:{change:t.showSectionChangeTips},model:{value:e.showName,callback:function(i){t.$set(e,"showName",i)},expression:"fieldItem.showName"}})],1),s("div",{staticClass:"field-display-hint-label"},[t._v(" hint ")]),s("div",{staticClass:"field-display-hint field-line-item"},[s("a-input",{staticClass:"hint-input",attrs:{placeholder:"Please enter the hint"},model:{value:e.hint,callback:function(i){t.$set(e,"hint",i)},expression:"fieldItem.hint"}})],1)])]),-1===t.requiredFieldList.indexOf(e.fieldName)?s("div",{staticClass:"visible-toggle"},[s("div",{staticClass:"field-visible"},[t._v("Enable")]),s("a-switch",{attrs:{size:"small"},on:{change:function(i){return t.handleChangeCommonField(n,e)}},model:{value:e.visible,callback:function(i){t.$set(e,"visible",i)},expression:"fieldItem.visible"}})],1):t._e()])])})),0)],1),n<=1?[s("div",{staticClass:"format-form-header"},[t._m(0,!0),s("div",{staticClass:"format-tag-settings"},[s("a-button",{attrs:{type:"primary"},nativeOn:{click:function(i){return t.handleAddCustomField(e)}}},[s("a-icon",{attrs:{type:"plus"}}),t._v(" Add section ")],1)],1)]),s("div",{staticClass:"custom-field-list"},[s("draggable",t._b({staticClass:"list-group",attrs:{tag:"ul",disabled:!t.allowDrag,group:"cust-"+e.id},on:{change:t.handleCustomChange,start:function(e){t.customDrag=!0},end:t.disableCustomDrag},model:{value:e.customFieldItems,callback:function(i){t.$set(e,"customFieldItems",i)},expression:"step.customFieldItems"}},"draggable",t.customDragOptions,!1),t._l(e.customFieldItems,(function(e){return s("li",{key:"sort-"+e.id,staticClass:"list-group-item",style:{filter:e.visible||e.tags.some((function(t){return!t.isOptional}))?"none":"grayscale(100%)"},attrs:{"data-id":e.id}},[s("div",{staticClass:"sort-icon vertical-center",on:{mousedown:function(e){t.allowDrag=!0}}},[s("img",{staticClass:"green",attrs:{src:i("9257"),alt:""}}),s("img",{staticClass:"gray",attrs:{src:i("8df5"),alt:""}})]),s("div",{staticClass:"field-item-config"},[s("div",{staticClass:"field-label"},[t._v(" Section name ")]),s("div",{staticClass:"field-config"},[s("div",{staticClass:"field-config-left"},[s("div",{staticClass:"field-display-name field-line-item"},[s("a-input",{staticClass:"show-name-input",attrs:{placeholder:"Please enter the display name"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"fieldItem.name"}})],1),s("div",{staticClass:"field-display-hint-label"},[t._v(" hint ")]),s("div",{staticClass:"field-display-hint field-line-item"},[s("a-input",{staticClass:"hint-input",attrs:{placeholder:"Please enter the hint"},model:{value:e.hint,callback:function(i){t.$set(e,"hint",i)},expression:"fieldItem.hint"}})],1)])]),s("div",{staticClass:"visible-toggle"},[s("div",{staticClass:"field-visible"},[t._v("Enable")]),s("a-switch",{attrs:{size:"small"},on:{change:function(i){return t.handleChangeCustomField(n,e)}},model:{value:e.visible,callback:function(i){t.$set(e,"visible",i)},expression:"fieldItem.visible"}})],1)]),s("div",{staticClass:"delete-row"},[s("a-popconfirm",{attrs:{title:"Delete it?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(i){return t.handleDeleteCustomField(n,e)}}},[s("a-icon",{attrs:{type:"delete"}})],1)],1)])})),0)],1)]:t._e()],2)})),s("a-modal",{attrs:{closable:!1,footer:null,width:"700px",destroyOnClose:"",title:null},model:{value:t.setTagVisible,callback:function(e){t.setTagVisible=e},expression:"setTagVisible"}},[s("modal-header",{attrs:{title:"Set tags for "+(t.currentFieldName?t.currentFieldName:"field")+(t.currentSubFieldName?" ("+t.currentSubFieldName+")":"")},on:{close:t.handleCloseSetTags}}),s("div",{staticClass:"my-set-tag"},[s("set-tag",{attrs:{"selected-tags":t.currentFieldTags},on:{update:t.handleUpdateStepTags,"go-to-tag-page":t.handleGotoTagPage}})],1)],1)],2)},h=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"format-form-title"},[i("span",{staticClass:"title custom-title"},[t._v(" Customized sections ")])])}],f=(i("a9e3"),i("159b"),i("498a"),i("7db0"),i("fb6a"),i("c740"),i("99af"),i("a434"),i("d81d"),i("a630"),i("3ca3"),i("6062"),i("ddb0"),i("b76a")),p=i.n(f),C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-card",{attrs:{loading:t.loading,"body-style":{padding:"10px 0",border:"none"},bordered:!1}},[i("div",{staticClass:"set-tag"},[i("div",{staticClass:"tag-list-table"},[i("div",{staticClass:"tag-header"},[i("a-row",[i("a-col",{attrs:{span:"23",offset:"1"}},[i("div",{staticClass:"tag-header-item"},[t._v("Tag Category")])])],1)],1),i("div",{staticClass:"tag-body"},t._l(t.allTagList,(function(e){return i("a-row",{key:e.set,staticClass:"tag-category-item"},[i("a-col",{attrs:{span:"1"}},[i("a-checkbox",{attrs:{checked:-1!==t.selectedSet.indexOf(e.set)},on:{change:function(i){return t.handleCheckedChange(e)}}})],1),i("a-col",{attrs:{span:"23"},on:{click:function(i){return t.handleCheckedChange(e)}}},[i("div",{staticClass:"tag-body-item tag-name"},[i("div",{staticClass:"tag-name-item"},[i("div",{staticClass:"tag-name-text"},[t._v(" "+t._s(e.set)+" ")])]),i("div",{staticClass:"tag-detail"})])])],1)})),1),i("div",{staticClass:"tag-action"},[i("a-space",[i("a-button",{attrs:{type:"primary"},on:{click:t.handleEnsureSelected}},[t._v("Confirm")])],1)],1)])])])},A=[],v=i("2909"),F=i("8ded"),b=i.n(F),y=["#FFEDAF","#C8F4FF","#E6E4FF","#ffccb0","#ffa9a2","#a3ecb9","#f7c5f8","#ffbfe2","#d5b9ff","#c4f6b1"],S={name:"SetTag",props:{selectedTags:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,tagList:[],selectedSet:[]}},watch:{selectedTags:{immediate:!0,deep:!0,handler:function(t){this.selectedSet=this.selectedTags}}},computed:{allTagList:function(){var t=this.$store.getters.pubTagList,e=this.$store.getters.priTagList,i=[].concat(Object(v["a"])(t),Object(v["a"])(e));return i.map((function(t,e){return Object(a["a"])(Object(a["a"])({},t),{},{isSelected:!1,expand:!1,tagColor:y[e%y.length]})}))}},created:function(){this.$logger.info("SetTag created",this.selectedTags),this.loadCustomTags()},methods:{loadCustomTags:function(){var t=this;this.loading=!0,this.$store.dispatch("initTagData",b.a.get(r["a"])).then((function(){})).catch((function(e){t.$message.error("init tag data error. "+e.message)})).finally((function(){t.loading=!1}))},handleCheckedChange:function(t){this.$logger.info("handleCheckedChange tag",t);var e=this.selectedSet.indexOf(t.set);-1===e?this.selectedSet.push(t.set):this.selectedSet.splice(e,1)},handleCancel:function(){this.$emit("close")},handleEnsureSelected:function(){this.$logger.info("handleEnsureSelected tagList",this.selectedSet),this.$emit("update",this.selectedSet)},handleGoToTagPage:function(){this.$emit("go-to-tag-page")}}},I=S,w=(i("02b5"),i("0c7c")),E=Object(w["a"])(I,C,A,!1,null,"f3538330",null),k=E.exports,Q=i("60427"),L=i("4fcf"),T=L.debounce,B={name:"FormatFormWithStep",components:{ModalHeader:Q["a"],SetTag:k,draggable:p.a},props:{commonList:{type:Array,required:!0},customList:{type:Array,required:!0},stepList:{type:Array,required:!0},requiredFieldList:{type:Array,required:!0},stepType:{type:Number,required:!0},saving:{type:Boolean,default:!1},showTagStepIndexList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,commonDrag:!1,customDrag:!1,myCommonList:[],myCustomList:[],setTagVisible:!1,currentFieldTags:[],currentFieldId:null,currentFieldName:null,currentSubFieldName:null,steps:[],showSectionWarning:!0,showStepWarning:!0,allowDrag:!1,autoSaveFn:null}},computed:{commonDragOptions:function(){return{animation:200,group:"common",disabled:!1,ghostClass:"ghost",scroll:!0}},customDragOptions:function(){return{animation:200,group:"custom",disabled:!1,ghostClass:"ghost",scroll:!0}},allowAutoSave:function(){return!this.saving&&!this.loading}},watch:{steps:{handler:function(){this.autoSaveFn&&this.autoSaveFn()},deep:!0,immediate:!1}},created:function(){var t=this;this.loading=!0,this.$logger.info("FormatForm start",this.commonList,this.customList,this.stepList);var e=JSON.parse(JSON.stringify(this.commonList)),i=JSON.parse(JSON.stringify(this.customList)),s=JSON.parse(JSON.stringify(this.stepList));e.forEach((function(t){t.isCustomField=!1})),i.forEach((function(t){t.isCustomField=!0}));var n=0;s.forEach((function(s){s.nameEditing=!1,s.key=s.id,s.commonFieldItems=[],s.commonFields.forEach((function(i){if(i&&i.trim()){var n=e.find((function(t){return t.fieldName===i.trim()}));n?s.commonFieldItems.push(JSON.parse(JSON.stringify(n))):t.$logger.warn("no exist common field "+i)}})),s.customFieldItems=[],s.customFields.forEach((function(e){if(n+=1,e&&e.trim()){var a=i.find((function(t){return t.name===e}));if(a)s.customFieldItems.push(JSON.parse(JSON.stringify(a)));else{if(i.length>=n){var o=i[n];o.name=e,s.customFieldItems.push(JSON.parse(JSON.stringify(o)))}t.$logger.warn("no exist custom field "+e)}}}))})),this.myCommonList=e,this.myCustomList=i,this.steps=s,this.$logger.info("FormatForm created",this.myCommonList,this.myCustomList,this.steps),this.checkIsShowFormatSectionWarning(),this.checkIsShowFormatStepWarning()},mounted:function(){this.autoSaveFn=T(this.emitSave,1e3),this.$logger.info("init autoSaveFn",this.autoSaveFn),this.loading=!1},methods:{emitSave:function(){this.$logger.info("emitSave allowAutoSave",this.allowAutoSave),this.allowAutoSave&&this.$emit("save")},disableCommonDrag:function(){this.$logger.info("disableDrag"),this.allowDrag=!1,this.commonDrag=!1},disableCustomDrag:function(){this.$logger.info("disableDrag"),this.allowDrag=!1,this.customDrag=!1},hiddenFormSectionWarning:function(){b.a.set("hidden-format-section-warning-".concat(this.$store.getters.userInfo.id),"true"),this.showSectionWarning=!1},checkIsShowFormatSectionWarning:function(){var t="hidden-format-section-warning-".concat(this.$store.getters.userInfo.id);"true"===b.a.get(t)?this.showSectionWarning=!1:this.showSectionWarning=!0,this.$logger.info("checkIsShowFormatSectionWarning ".concat(this.showSectionWarning))},hiddenFormStepWarning:function(){b.a.set("hidden-format-step-warning-".concat(this.$store.getters.userInfo.id),"true"),this.showStepWarning=!1},checkIsShowFormatStepWarning:function(){var t="hidden-format-step-warning-".concat(this.$store.getters.userInfo.id);"true"===b.a.get(t)?this.showStepWarning=!1:this.showStepWarning=!0,this.$logger.info("checkIsShowFormatStepWarning ".concat(this.showStepWarning))},handleAddStep:function(){this.$logger.info("handleAddStep");var t={id:null,key:Math.random(),name:"Customized step",commonFieldItems:[],customFieldItems:[],commonFields:[],customFields:[],schoolId:this.$store.getters.school,visible:!0};this.steps.push(t)},handleAddCustomField:function(t){this.$logger.info("handleAddCustomField",t.customFieldItems);var e=1,i="CustomField".concat(e);while(this.myCustomList.some((function(t){return t.name===i})))e++,i="CustomField".concat(e);var s={id:"ext_"+Math.random(),isCustomField:!0,name:i,hint:"",visible:!0,tags:[],sortNo:t.customFieldItems.length+1};this.myCustomList.push(JSON.parse(JSON.stringify(s))),t.customFieldItems.push(JSON.parse(JSON.stringify(s))),this.$logger.info("handleAddCustomField finish",t.customFieldItems)},handleCustomChange:function(t){this.$logger.info("handleCustomChange",this.myCustomList),this.myCustomList.forEach((function(t,e){t.sortNo=e}))},handleStepSetTag:function(t){this.$logger.info("handleSetTag",t),this.currentFieldId=t.id,this.currentFieldName=t.name,this.currentFieldTags=t.tags.slice(),this.setTagVisible=!0},handleSetTag:function(t,e){this.$logger.info("handleSetTag",t),this.currentFieldId=t.id,this.currentFieldName=t.name,this.currentSubFieldName=e,this.currentFieldTags=e?t.tags.filter((function(t){return t.subFieldName===e})):t.tags.slice(),this.setTagVisible=!0},showSectionChangeTips:function(){var t=this;this.$logger.info("showSectionChangeTips"),this.showSectionWarning&&this.$confirm({title:"Warning",content:' This section is set by system and the data logic is applied to all curriculum and schools.\n          Please do not change the data logic while you adjust the name and hint.\n          Example: The "Unit name" can be adjusted to "Unit title" or\n          "Name your Unit", but not "Unit purpose or Unit goal',centered:!0,okText:"Ok",cancelText:"cancel",onOk:function(){t.hiddenFormSectionWarning()}})},showStepChangeTips:function(){var t=this;this.$logger.info("showStepChangeTips"),this.showStepWarning&&this.$confirm({title:"Warning",content:" You can not disable this Step because the section(s) under are required by the system and can not be disabled. You might need to move those compulsory sections to another enabled step if you want to hide this one.",centered:!0,okText:"Ok",cancelText:"cancel",onOk:function(){t.hiddenFormStepWarning()}})},handleCloseSetTags:function(){this.setTagVisible=!1,this.currentFieldTags=[],this.currentFieldId=null,this.currentFieldName=null,this.currentSubFieldName=null},handleUpdateStepTags:function(t){var e=this;this.$logger.info("handleUpdateStepTags",t);var i=this.steps.findIndex((function(t){return t.id===e.currentFieldId}));if(i>-1){var s=this.steps[i];s.tags=t,this.$set(this.steps,i,s),this.$logger.info("update step tags",s)}this.setTagVisible=!1},handleUpdateTags:function(t){var e=this;this.$logger.info("handleUpdateTags",t);var i=this.myCommonList.find((function(t){return t.id===e.currentFieldId&&t.name===e.currentFieldName}));if(i||(i=this.myCustomList.find((function(t){return t.id===e.currentFieldId&&t.name===e.currentFieldName}))),i){if(this.currentSubFieldName){var s=i.tags.filter((function(t){return t.subFieldName!==e.currentSubFieldName}));t.forEach((function(t){t.subFieldName=e.currentSubFieldName})),i.tags=s.concat(t)}else i.tags=t;this.$logger.info("update field tags",i)}else this.$logger.info("no field found");this.setTagVisible=!1},handleGotoTagPage:function(){this.setTagVisible=!1,this.$router.push({path:"/teacher/managing/tag-settings"})},handleDeleteCustomField:function(t,e){this.$logger.info("handleDeleteCustomField",e);var i=this.steps[t].customFieldItems.findIndex((function(t){return t.id===e.id}));this.steps[t].customFieldItems.splice(i,1),this.myCustomList=this.myCustomList.filter((function(t){return t.id!==e.id}))},handleChangeCustomField:function(t,e){this.$logger.info("handleChangeCustomField",e);var i=this.myCustomList.findIndex((function(t){return t.id===e.id}));this.myCustomList[i]=e},handleChangeCommonField:function(t,e){this.$logger.info("handleChangeCommonField",e);var i=this.myCommonList.findIndex((function(t){return t.id===e.id}));this.myCommonList[i]=e},getFormatConfig:function(){var t=this;this.myCustomList=this.myCustomList.filter((function(t){return t.name&&t.name.trim()}));var e=this.myCustomList.map((function(t){return t.name})),i=Array.from(new Set(e));if(i.length!==e.length)return this.$message.warn("["+this.title+"] Custom field name cannot be repeated"),this.$logger.info("repeated",e,i),!1;var s=JSON.parse(JSON.stringify(this.myCommonList)),n=JSON.parse(JSON.stringify(this.myCustomList));s.forEach((function(t){delete t.isCustomField})),n.forEach((function(t){delete t.isCustomField,-1!==t.id.indexOf("ext_")&&(t.id=null)})),this.$logger.info("myCommonList",s,"myCustomList",n);var a=JSON.parse(JSON.stringify(this.steps)),o=0;return a.forEach((function(e,i){delete e.nameEditing,delete e.key,e.commonFields=e.commonFieldItems.map((function(t){return t.fieldName})),e.customFields=e.customFieldItems.map((function(t){return t.name})),e.commonFields.forEach((function(t,i){var n=e.commonFieldItems.find((function(e){return e.fieldName===t})),a=s.find((function(e){return e.fieldName===t}));a&&n&&(a.name=n.name,a.showName=n.showName,a.hint=n.hint,a.sortNo=i)})),e.customFields.forEach((function(t,i){var s=e.customFieldItems.find((function(e){return e.name===t})),a=n.find((function(e){return e.name===t}));a||(n[o]=s),o++,a&&s&&(a.name=s.name,a.hint=s.hint,a.sort=i,a.sortNo=i)})),e.stepNo=i,e.type=t.stepType,delete e.commonFieldItems,delete e.customFieldItems})),this.$logger.info("getFormatConfig ",s,n,a),{commonList:s,customList:n,steps:a}},stepEnableConfig:function(t){var e=this,i=!0;return t.commonFieldItems.forEach((function(t){null!==t&&void 0!==t&&t.fieldName&&-1!==e.requiredFieldList.indexOf(t.fieldName)&&(i=!1)})),i},handleCloseTag:function(t,e){this.steps[t].tags.splice(e,1)}}},x=B,N=(i("5e75"),Object(w["a"])(x,u,h,!1,null,"0cb4282c",null)),O=N.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-content"},[s("div",{staticClass:"content-wrapper"},[s("a-skeleton",{attrs:{loading:t.skeletonLoading,active:""}},[s("div",{staticClass:"content-list"},[s("a-list",{attrs:{size:"large","data-source":t.filterTemplateList,loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e){return s("div",{key:"item.key",staticClass:"my-card-list-item",on:{click:function(i){return t.handleChoice(e)}}},[s("div",{staticClass:"item-intro"},[s("div",{staticClass:"main-title"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"sub-title"},[t._v(" "+t._s(e.description)+" ")])]),s("div",{staticClass:"item-action-wrapper"},[s("div",{staticClass:"action-wrapper"},[s("div",{staticClass:"action-item"},[s("a-button",{attrs:{type:"primary",shape:"round"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.handlePreview(e)}}},[t._v("Preview")])],1)])]),s("div",{staticClass:"card-action-icon"},[t.id===e.id?s("img",{attrs:{src:i("7aa6")}}):t._e()])])}}])}),s("div",{staticClass:"modal-ensure-action-line"},[s("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:t.handleCancel}},[t._v("Cancel")]),s("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round",loading:t.ensureLoading},on:{click:t.handleEnsure}},[t._v("Ok")])],1)],1)])],1)])},K=[],D={name:"SelectTemplate",components:{},props:{templateList:{type:Array,default:function(){return[]}},activeKey:{type:String,default:""},currentId:{type:String,default:""}},computed:{filterTemplateList:function(){var t="plan"===this.activeKey?o["e"]["unit-plan"]:o["e"].task;return this.templateList.filter((function(e){return e.type===t}))}},data:function(){return{skeletonLoading:!1,loading:!1,id:"",ensureLoading:!1}},created:function(){this.id=this.currentId},methods:{handleCancel:function(){this.$emit("cancel")},handleEnsure:function(){this.id?this.$emit("ensure",this.id):this.$message.warning("Please choice a format template.")},handleChoice:function(t){this.id=t.id},handlePreview:function(t){this.$logger.info("handlePreviewPlanningForm",t),"plan"===this.activeKey?(this.$store.commit(r["h"],{commonList:t.config.commonList,customList:t.config.customList,steps:t.config.steps,type:o["e"]["unit-plan"]}),window.open("/teacher/managing/planning-format/unit-plan-preview","_blank")):"task"===this.activeKey&&(this.$store.commit(r["h"],{commonList:t.config.commonList,customList:t.config.customList,steps:t.config.steps,type:o["e"].task}),window.open("/teacher/managing/planning-format/task-preview","_blank"))}}},J=D,q=(i("4caa"),Object(w["a"])(J,U,K,!1,null,"6cadb33c",null)),R=q.exports,V={name:"PlanningFormat",mixins:[d["a"],g["a"]],components:{FormatFormWithStep:O,SelectTemplate:R},data:function(){return{loading:!1,planConfig:null,taskConfig:null,activeKey:"plan",typeMap:o["e"],saving:!1,templateList:[],selectTemplateVisible:!1,planRequiredFields:this.$classcipe.planRequiredFields,taskRequiredFields:this.$classcipe.taskRequiredFields}},created:function(){this.loadFormConfigData(),this.GetTemplates()},computed:Object(a["a"])(Object(a["a"])({},Object(m["e"])({userMode:function(t){return t.app.userMode},currentSchool:function(t){return t.user.currentSchool}})),{},{getCurrentId:function(){var t,e,i,s,n,a;return null!==(t=this.planConfig)&&void 0!==t&&t.steps||null!==(e=this.taskConfig)&&void 0!==e&&e.steps?"plan"===this.activeKey?null!==(i=this.planConfig)&&void 0!==i&&i.steps?null===(s=this.planConfig)||void 0===s?void 0:s.steps[0].templateId:"":null!==(n=this.taskConfig)&&void 0!==n&&n.steps?null===(a=this.taskConfig)||void 0===a?void 0:a.steps[0].templateId:"":""}}),methods:{getCurrentTemplateName:function(){var t="";t="plan"===this.activeKey?this.planConfig.steps?this.planConfig.steps[0].templateId:"":this.taskConfig.steps?this.taskConfig.steps[0].templateId:"";var e=this.templateList.filter((function(e){return e.id===t}));return e.length>0?e[0].name:""},handleSchoolChange:function(t){this.userMode===c["W"].SCHOOL&&this.loadFormConfigData()},handleModeChange:function(t){this.loadFormConfigData()},loadFormConfigData:function(){var t=this;this.$logger.info("loadFormConfigData"),this.loading=!0,Object(l["b"])({schoolId:this.currentSchool.id}).then((function(e){t.$logger.info("loadFormConfigData response",e),t.planConfig=e.result.plan,t.taskConfig=e.result.task})).finally((function(){t.loading=!1}))},handleAddStep:function(){"plan"===this.activeKey?this.$refs.plan.handleAddStep():this.$refs.task.handleAddStep()},getPlanningConfig:function(){this.$logger.info("getPlanningConfig task",this.$refs);var t=this.$refs.task.getFormatConfig(),e=this.$refs.plan.getFormatConfig();return this.$logger.info("getPlanningConfig",t,e),!(!t||!e)&&{taskConfig:t,planConfig:e}},handlePreviewPlanningForm:function(){if(this.$logger.info("handlePreviewPlanningForm"),"plan"===this.activeKey){var t=this.$refs.plan.getFormatConfig();t&&(this.$store.commit(r["h"],{commonList:t.commonList,customList:t.customList,steps:t.steps,type:o["e"]["unit-plan"]}),window.open("/teacher/managing/planning-format/unit-plan-preview","_blank"))}else if("task"===this.activeKey){var e=this.$refs.task.getFormatConfig();e&&(this.$store.commit(r["h"],{commonList:e.commonList,customList:e.customList,steps:e.steps,type:o["e"].task}),window.open("/teacher/managing/planning-format/task-preview","_blank"))}},handleSavePlanningForm:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$logger.info("handleSavePlanningForm",e);var i=this.getPlanningConfig();i&&("plan"===this.activeKey?(this.saving=!0,Object(l["a"])({commonList:i.planConfig.commonList,customList:i.planConfig.customList,steps:i.planConfig.steps,schoolId:this.currentSchool.id,type:o["e"]["unit-plan"]}).then((function(i){i.success?e&&(t.$message.success("Save unit format successfully"),t.planConfig=null,t.loadFormConfigData()):t.$message.error(i.message)})).finally((function(){t.saving=!1}))):(this.saving=!0,Object(l["a"])({commonList:i.taskConfig.commonList,customList:i.taskConfig.customList,steps:i.taskConfig.steps,schoolId:this.currentSchool.id,type:o["e"].task}).then((function(i){i.success?e&&(t.$message.success("Save task format successfully"),t.taskConfig=null,t.loadFormConfigData()):t.$message.error(i.message)})).finally((function(){t.saving=!1}))))},handleShowSelectTemplate:function(){this.selectTemplateVisible=!0},GetTemplates:function(){var t=this;this.$logger.info("GetTemplates"),Object(l["d"])().then((function(e){t.$logger.info("GetTemplates response",e),t.templateList=e.result})).finally((function(){}))},handleSelectTemplate:function(t){var e=this;this.selectTemplateVisible=!1,this.saving=!0,Object(l["e"])({templateId:t}).then((function(t){t.success?(e.$message.success("Import format template successfully"),e.taskConfig=null,e.loadFormConfigData()):e.$message.error(t.message)})).finally((function(){e.saving=!1}))}}},W=V,z=(i("6e82"),Object(w["a"])(W,s,n,!1,null,"12bd6f2e",null));e["default"]=z.exports},a82a:function(t,e,i){},ca89:function(t,e,i){},d8a4:function(t,e,i){},f8af5:function(t,e){t.exports="data:image/png;base64,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"}}]);