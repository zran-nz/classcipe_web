(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["authResult"],{"754d":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-content"},[e.authFailed?e._e():n("a-spin",{attrs:{size:"large"}}),e.authFailed?n("div",{staticClass:"auth-failed"},[n("div",{staticClass:"auth-failed-detail"},[n("no-more-resources",{attrs:{tips:""}})],1),n("div",{staticClass:"auth-failed-tips"},[e._v(" Classcipe needs access to your google account to work properly, please grant permission again. ")]),n("div",{staticClass:"auth-failed-action"},[n("a-button",{attrs:{icon:"redo",shape:"round",type:"primary"},on:{click:e.handleRetryAuth}},[e._v("Retry")])],1)]):e._e()],1)},r=[],a=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("ac1f"),n("841c"),n("d73b")),i=n("dbdc"),c=n("69b3"),s=n("f93e"),u=n("9fb0"),d=n("ca00"),l={name:"AuthResult",components:{NoMoreResources:c["a"]},data:function(){return{authFailed:!1,failedMessage:""}},created:function(){var e=this,t=new URLSearchParams(window.location.search),n=t.get("accessToken");this.$store.dispatch("LoginWithToken",n).then((function(){e.$store.dispatch("GetInfo").then((function(t){e.$logger.info("auth-result-redirect",e.$route);var o=window.sessionStorage.getItem(s["C"]);e.handleOpener(),o?(window.sessionStorage.removeItem(s["C"]),window.location.href=o+(o.indexOf("?")>-1?"&":"?")+"token="+n):e.$store.getters.currentRole?e.$router.push(e.$store.getters.defaultRouter):e.$router.push({path:a["f"]})})).catch((function(t){e.authFailed=!0,e.failedMessage=t}))})).catch((function(){e.handleOpener(),e.$router.push({path:"/user/login"})}))},methods:{handleRetryAuth:function(){var e=Object(i["b"])("google");e+="?role=teacher",e+="&channelId=".concat(Object(d["getCookie"])(u["v"])),e+="&callbackUrl=",e+=i["c"],window.location.href=e},handleOpener:function(){var e=window.sessionStorage.getItem("SESSION_AUTH_TYPE");window.opener&&(window.opener.postMessage&&e&&window.opener.postMessage({authType:e,event:"authUpdate",data:null},"*"),window.close())}}},h=l,f=(n("7e6b"),n("0c7c")),g=Object(f["a"])(h,o,r,!1,null,"62c03cd6",null);t["default"]=g.exports},"7e6b":function(e,t,n){"use strict";n("86d7")},"86d7":function(e,t,n){},dbdc:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s}));n("498a"),n("d3b7"),n("25f0"),n("99af");var o=n("a18c"),r=n("b775"),a=window.location.origin+("hash"===o["a"].mode?"#":"")+"/user/auth-result",i=function(e){if(!e)throw new Error("getThirdAuthURL got a illegal source: "+e);switch(e.toString().trim()){case"google":return"/classcipe/thirdLogin/render/google";case"zoom":return"/classcipe/thirdLogin/render/zoom";case"microsoft":return"/classcipe/thirdLogin/render/microsoft";default:throw new Error("not config auth url for source["+e+"]")}};function c(e,t){return Object(r["d"])({url:"/classcipe/thirdLogin/".concat(e,"/refreshToken?email=").concat(t),method:"get"})}function s(e){return Object(r["d"])({url:"/classcipe/thirdLogin/".concat(e,"/unbind"),method:"get"})}}}]);