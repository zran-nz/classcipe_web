(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addPreference"],{1034:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_AddPreference_vue_vue_type_style_index_0_id_6c67ac88_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("f1b5");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_AddPreference_vue_vue_type_style_index_0_id_6c67ac88_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_AddPreference_vue_vue_type_style_index_0_id_6c67ac88_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n//# sourceURL=webpack:///./src/views/user/AddPreference.vue?')},"49ce":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5a26c495-vue-loader-template"}!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/user/AddPreference.vue?vue&type=template&id=6c67ac88&scoped=true&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',{staticClass:"main-content"},[_c(\'div\',{staticClass:"card-wrapper"},[_c(\'div\',{staticClass:"card-steps"},[_c(\'a-steps\',{attrs:{"current":_vm.currentStep,"direction":"horizontal"}},[_c(\'a-step\',{attrs:{"title":_vm.$t(\'role.step.what-can-you-do\')}},[_c(\'span\',{staticStyle:{"font-size":"14px"},attrs:{"slot":"title"},slot:"title"},[_vm._v(_vm._s(_vm.$t(\'result.success.step1-title\')))])]),(_vm.$store.getters.currentRole === \'expert\')?_c(\'a-step\',{attrs:{"title":_vm.$t(\'role.step.personal-information\')}},[_c(\'span\',{staticStyle:{"font-size":"14px"},attrs:{"slot":"title"},slot:"title"},[_vm._v(_vm._s(_vm.$t(\'expert-select-area\')))])]):_vm._e(),(_vm.$store.getters.currentRole === \'teacher\')?_c(\'a-step\',{attrs:{"title":_vm.$t(\'role.step.personal-information\')}},[_c(\'span\',{staticStyle:{"font-size":"14px"},attrs:{"slot":"title"},slot:"title"},[_vm._v(_vm._s(_vm.$t(\'teacher-tell-class\')))])]):_vm._e()],1)],1),_c(\'div\',{staticClass:"form-items"},[(_vm.$store.getters.currentRole === \'expert\')?_c(\'a-form-model\',{ref:"expertForm",attrs:{"model":_vm.expertForm,"rules":_vm.expertRules,"label-col":_vm.labelCol,"wrapper-col":_vm.wrapperCol}},[_c(\'a-form-model-item\',{attrs:{"label":"Area(s)","prop":"areaIds"}},[_c(\'a-select\',{attrs:{"placeholder":"Please select"},model:{value:(_vm.expertForm.areaIds),callback:function ($$v) {_vm.$set(_vm.expertForm, "areaIds", $$v)},expression:"expertForm.areaIds"}},_vm._l((_vm.areaOptions),function(areaOption){return _c(\'a-select-option\',{key:areaOption.id,attrs:{"value":areaOption.id},nativeOn:{"click":function($event){return _vm.handleSelectAreaOption(areaOption)}}},[_vm._v(_vm._s(areaOption.name))])}),1)],1),_c(\'a-form-model-item\',{directives:[{name:"show",rawName:"v-show",value:(_vm.currentArea && _vm.currentArea.name === \'Others\'),expression:"currentArea && currentArea.name === \'Others\'"}],ref:"others",attrs:{"label":"Others","prop":"others"}},[_c(\'a-input\',{attrs:{"placeholder":"Please input"},on:{"blur":function () {_vm.$refs.others.onFieldBlur();}},model:{value:(_vm.expertForm.others),callback:function ($$v) {_vm.$set(_vm.expertForm, "others", $$v)},expression:"expertForm.others"}})],1)],1):_vm._e(),(_vm.$store.getters.currentRole === \'teacher\')?_c(\'a-form-model\',{ref:"teacherForm",attrs:{"model":_vm.teacherForm,"rules":_vm.teacherRules,"label-col":_vm.labelCol,"wrapper-col":_vm.wrapperCol}},[_c(\'a-form-model-item\',{attrs:{"label":"Curriculum","prop":"curriculumId"}},[_c(\'a-select\',{attrs:{"placeholder":"Please select curriculum"},model:{value:(_vm.teacherForm.curriculumId),callback:function ($$v) {_vm.$set(_vm.teacherForm, "curriculumId", $$v)},expression:"teacherForm.curriculumId"}},_vm._l((_vm.curriculumOptions),function(curriculumOption){return _c(\'a-select-option\',{key:curriculumOption.id,attrs:{"value":curriculumOption.id},nativeOn:{"click":function($event){return _vm.handleSelectCurriculumOption(curriculumOption)}}},[_vm._v(_vm._s(curriculumOption.name))])}),1)],1),_c(\'a-form-model-item\',{attrs:{"label":"Subject","prop":"subjectIds"}},[_c(\'a-select\',{attrs:{"mode":"multiple"},model:{value:(_vm.teacherForm.subjectIds),callback:function ($$v) {_vm.$set(_vm.teacherForm, "subjectIds", $$v)},expression:"teacherForm.subjectIds"}},_vm._l((_vm.subjectOptions),function(subject){return (subject.subjectType === _vm.subjectType.Skill || subject.subjectType === _vm.subjectType.LearnAndSkill)?_c(\'a-select-option\',{key:subject.id,attrs:{"value":subject.id}},[_vm._v(_vm._s(subject.name))]):_vm._e()}),1)],1),_c(\'a-form-model-item\',{attrs:{"label":"Grade","prop":"gradeIds"}},[_c(\'a-select\',{attrs:{"placeholder":"Please select grade","mode":"multiple"},model:{value:(_vm.teacherForm.gradeIds),callback:function ($$v) {_vm.$set(_vm.teacherForm, "gradeIds", $$v)},expression:"teacherForm.gradeIds"}},_vm._l((_vm.gradeOptions),function(gradeOption){return _c(\'a-select-option\',{key:gradeOption.id,attrs:{"value":gradeOption.id}},[_vm._v(_vm._s(gradeOption.name))])}),1)],1)],1):_vm._e()],1),_c(\'div\',{staticClass:"actions"},[_c(\'div\',{staticClass:"action-first"},[_c(\'a-button\',{attrs:{"type":"primary","block":""},on:{"click":_vm.goBack}},[_vm._v(" Last step ")])],1),_c(\'div\',{staticClass:"action-second"},[_c(\'a-button\',{attrs:{"type":"primary","block":""},on:{"click":_vm.saveDetail}},[_vm._v(" Save my detail ")])],1)])])])}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/views/user/AddPreference.vue?vue&type=template&id=6c67ac88&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js\nvar es_function_name = __webpack_require__("b0c0");\n\n// EXTERNAL MODULE: ./src/config/router.config.js + 1 modules\nvar router_config = __webpack_require__("d73b");\n\n// EXTERNAL MODULE: ./src/api/preference.js\nvar preference = __webpack_require__("d597");\n\n// EXTERNAL MODULE: ./src/utils/logger.js\nvar logger = __webpack_require__("823b");\n\n// EXTERNAL MODULE: ./src/const/common.js\nvar common = __webpack_require__("f93e");\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/user/AddPreference.vue?vue&type=script&lang=js&\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var AddPreferencevue_type_script_lang_js_ = ({\n  name: \'AddPreference\',\n  data: function data() {\n    var _this = this;\n\n    // others validate rule\n    var validateOthers = function validateOthers(rule, value, callback) {\n      logger["info"](\'validateOthers\', value);\n\n      if (!value && _this.currentArea && _this.currentArea.name === \'Others\') {\n        callback(new Error(\'Please input\'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      currentStep: 1,\n      labelCol: {\n        lg: {\n          span: 5\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        lg: {\n          span: 19\n        },\n        sm: {\n          span: 19\n        }\n      },\n      areaOptions: [],\n      expertForm: {\n        areaIds: null,\n        others: null\n      },\n      expertRules: {\n        areaIds: [{\n          required: true,\n          message: \'Please select\',\n          trigger: \'blur\'\n        }],\n        others: [{\n          validator: validateOthers,\n          trigger: \'blur\'\n        }, {\n          min: 2,\n          max: 50,\n          message: \'Length should be 2 to 50\',\n          trigger: \'blur\'\n        }]\n      },\n      currentArea: null,\n      teacherForm: {\n        curriculumId: null,\n        subjectIds: [],\n        gradeIds: []\n      },\n      teacherRules: {\n        curriculumId: [{\n          required: true,\n          message: \'Please select curriculum\',\n          trigger: \'blur\'\n        }],\n        subjectIds: [{\n          required: true,\n          message: \'Please select subject\',\n          trigger: \'blur\'\n        }],\n        gradeIds: [{\n          required: true,\n          message: \'Please select grade\',\n          trigger: \'blur\'\n        }]\n      },\n      currentCurriculum: null,\n      curriculumOptions: [],\n      subjectOptions: [],\n      gradeOptions: [],\n      subjectType: common["M" /* SubjectType */]\n    };\n  },\n  created: function created() {\n    this.initOptions();\n  },\n  watch: {\n    \'teacherForm.curriculumId\': function teacherFormCurriculumId(val) {\n      logger["info"](\'teacherForm.curriculumId change\', val);\n      this.loadSubjectByCurriculumId(val);\n    }\n  },\n  methods: {\n    initOptions: function initOptions() {\n      var _this2 = this;\n\n      if (this.$store.getters.currentRole === \'expert\') {\n        // 取IB学科下面的大学科\n        Object(preference["f" /* getAllSubjectsByCurriculumId */])({\n          curriculumId: common["h" /* CurriculumType */].Cambridge\n        }).then(function (response) {\n          _this2.areaOptions = response.result;\n        }); // getAllAreas().then((response) => {\n        //   logger.info(\'getAllAreas\', response)\n        //   this.areaOptions = response.result\n        //   logger.info(\'areaOptions\', this.areaOptions)\n        // })\n      } else if (this.$store.getters.currentRole === \'teacher\') {\n        Object(preference["e" /* getAllCurriculums */])().then(function (response) {\n          logger["info"](\'getAllCurriculums\', response);\n          _this2.curriculumOptions = response.result;\n          logger["info"](\'getAllCurriculums\', _this2.curriculumOptions);\n        });\n      }\n    },\n    goBack: function goBack() {\n      this.$router.push({\n        path: router_config["f" /* selectRoleRouter */]\n      });\n    },\n    handleSelectAreaOption: function handleSelectAreaOption(area) {\n      logger["info"](\'handleSelectAreaOption\', area);\n      this.currentArea = area;\n    },\n    handleSelectCurriculumOption: function handleSelectCurriculumOption(curriculum) {\n      logger["info"](\'handleSelectCurriculumOption\', curriculum);\n\n      if (this.currentCurriculum === null || this.currentCurriculum.id !== curriculum.id) {\n        this.teacherForm.subjectIds = [];\n      }\n\n      this.currentCurriculum = curriculum;\n    },\n    // 加载所有的subject 按照一级分类进行分组\n    loadSubjectByCurriculumId: function loadSubjectByCurriculumId(curriculumId) {\n      var _this3 = this;\n\n      this.teacherForm.subjectIds = [];\n      this.teacherForm.gradeIds = [];\n      Object(preference["f" /* getAllSubjectsByCurriculumId */])({\n        curriculumId: curriculumId\n      }).then(function (response) {\n        logger["info"](\'subjectOptions\', response.result);\n        _this3.subjectOptions = response.result;\n      });\n      Object(preference["a" /* GetGradesByCurriculumId */])({\n        curriculumId: curriculumId\n      }).then(function (response) {\n        logger["info"](\'GetGradesByCurriculumId\', response);\n        _this3.gradeOptions = response.result;\n        logger["info"](\'gradeOptions\', _this3.gradeOptions);\n      });\n    },\n    saveDetail: function saveDetail() {\n      var _this4 = this;\n\n      if (this.$store.getters.currentRole === \'expert\') {\n        this.$refs.expertForm.validate(function (valid) {\n          if (valid) {\n            logger["info"](\'save expert\', _this4.expertForm);\n            var submitData = {\n              areaIds: [_this4.expertForm.areaIds]\n            };\n\n            if (_this4.expertForm.others) {\n              submitData.others = _this4.expertForm.others;\n            }\n\n            Object(preference["c" /* addPreference */])(submitData).then(function (response) {\n              _this4.$store.dispatch(\'GetInfo\').then(function () {\n                // this.$router.push(this.$store.getters.currentRole === \'expert\' ? defaultExpertRouter : defaultTeacherRouter)\n                _this4.$router.push(router_config["e" /* defaultTeacherRouter */]);\n              });\n            });\n          } else {\n            return false;\n          }\n        });\n      } else if (this.$store.getters.currentRole === \'teacher\') {\n        this.$refs.teacherForm.validate(function (valid) {\n          if (valid) {\n            logger["info"](\'save teacher\', _this4.teacherForm);\n            Object(preference["c" /* addPreference */])(_this4.teacherForm).then(function (response) {\n              _this4.$store.dispatch(\'GetInfo\').then(function () {\n                _this4.$router.push(router_config["e" /* defaultTeacherRouter */]);\n              });\n            });\n          } else {\n            return false;\n          }\n        });\n      }\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/views/user/AddPreference.vue?vue&type=script&lang=js&\n /* harmony default export */ var user_AddPreferencevue_type_script_lang_js_ = (AddPreferencevue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/views/user/AddPreference.vue?vue&type=style&index=0&id=6c67ac88&lang=less&scoped=true&\nvar AddPreferencevue_type_style_index_0_id_6c67ac88_lang_less_scoped_true_ = __webpack_require__("1034");\n\n// EXTERNAL MODULE: ./node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__("0c7c");\n\n// CONCATENATED MODULE: ./src/views/user/AddPreference.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer["a" /* default */])(\n  user_AddPreferencevue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  "6c67ac88",\n  null\n  \n)\n\n/* harmony default export */ var AddPreference = __webpack_exports__["default"] = (component.exports);\n\n//# sourceURL=webpack:///./src/views/user/AddPreference.vue_+_4_modules?')},f1b5:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/views/user/AddPreference.vue?./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-2!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options")}}]);