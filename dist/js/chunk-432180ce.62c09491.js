(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-432180ce"],{"073c":function(e,t,a){},1188:function(e,t,a){},"1d6d":function(e,t,a){"use strict";a("1188")},"21fb":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("b0c0");var i={data:function(){return{unwatch:null,routeName:this.$route.name}},created:function(){var e=this;this.unwatch=this.$store.watch((function(e){return e.user.currentSchool}),(function(t){return t&&e.$route.name===e.routeName&&e.handleSchoolChange(t)}))},computed:{},beforeDestroy:function(){this.unwatch&&this.unwatch()},methods:{handleSchoolChange:function(e){}}}},"2c45":function(e,t,a){"use strict";a("4180")},3264:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"new-library",style:{height:"modal"===e.displayMode?"600px":"100vh"},attrs:{id:"new-library"}},[i("div",{staticClass:"navigation"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.expandedListFlag,expression:"!expandedListFlag"}],staticClass:"navigation-item",style:{left:"100px",width:"1000px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showCurriculum,expression:"showCurriculum"}],staticClass:"select-curriculum"},[i("div",{staticClass:"my-curriculum-select"},[e.curriculumOptions.length?i("a-select",{staticClass:"select-curriculum",attrs:{"default-value":e.$store.getters.bindCurriculum},on:{change:e.handleCurriculumChange},model:{value:e.currentCurriculumId,callback:function(t){e.currentCurriculumId=t},expression:"currentCurriculumId"}},[e._l(e.curriculumOptions,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),i("div",{staticClass:"arrow-self",attrs:{slot:"suffixIcon"},slot:"suffixIcon"},[i("img",{attrs:{src:a("9c74")}})])],2):e._e()],1)]),i("new-navigation",{ref:"nav",attrs:{"current-curriculum":e.currentCurriculumId},on:{"update-path":e.handleUpdateCurrentNavPath}})],1)]),i("div",{staticClass:"main"},[i("div",{staticClass:"selected-content",style:{width:e.componentWidth-380+"px"}},[i("div",{staticClass:"main-content-list"},[!e.hasSelectedContent&&e.selectMode!==e.selectModelType.evaluationMode&&e.isEmptyRecommend?i("div",{staticClass:"no-select-content"},[e._m(0),i("div",{staticClass:"no-select-text"},[e._v(" You haven't added learning objectives yet ")])]):e._e(),e.isEmptyRecommend?e._e():i("div",{staticClass:"recommend-description"},[e._m(1),i("div",{staticClass:"recommend-detail"},e._l(e.myRecommendData,(function(t,s){return i("div",{key:s,staticClass:"recommend-list",attrs:{"data-item":JSON.stringify(t)}},[i("div",{staticClass:"recommend-from",attrs:{"data-from-id":t.fromId}},[i("h4",[e._v("From "),i("span",{staticClass:"from-type-name"},[e._v(e._s(t.fromTypeName))]),e._v(" : "+e._s(t.fromName))])]),t.skillList.length?[e._m(2,!0),e._l(t.skillList,(function(t,s){return i("div",{key:"ria-"+s,class:{"recommend-item":!0,"my-selected-item":-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId),"disabled-select-item":-1!==e.mySelectedIdList.indexOf(t.knowledgeId)},attrs:{"data-tag-type":t.tagType,"data-knowledge-id":t.knowledgeId,"data-selected-id-list":e.mySelectedIdList},on:{click:function(a){return e.handleAddRecommend(t)}}},[i("a-tooltip",{staticClass:"my-tooltip",attrs:{placement:"topLeft"}},[i("template",{slot:"title"},[e._v(" "+e._s(t.path?t.path:t.name)+" ")]),i("div",{staticClass:"select-block"},[-1===e.selectedRecommendIdList.indexOf(t.knowledgeId)?i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):e._e(),-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId)?i("div",{staticClass:"selected-icon"},[i("img",{attrs:{src:a("7aa6")}})]):e._e()],1),i("div",{staticClass:"right-name"},[t.isSelfCustom?i("div",{staticClass:"custom-icon"},[i("a-icon",{attrs:{type:"user-add"}})],1):e._e(),e._v(" "+e._s(t.name)+" ")]),i("div",{staticClass:"recommend-selected-left-bar",attrs:{"tag-type":t.tagType}})],2)],1)}))]:e._e(),t.knowledgeList.length?[e._m(3,!0),e._l(t.knowledgeList,(function(t,s){return i("div",{key:"ril-"+s,class:{"recommend-item":!0,"my-selected-item":-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId),"disabled-select-item":-1!==e.mySelectedIdList.indexOf(t.knowledgeId)},attrs:{"data-tag-type":t.tagType,"data-knowledge-id":t.knowledgeId,"data-selected-id-list":e.mySelectedIdList},on:{click:function(a){return e.handleAddRecommend(t)}}},[i("a-tooltip",{staticClass:"my-tooltip",attrs:{placement:"topLeft"}},[i("template",{slot:"title"},[e._v(" "+e._s(t.path?t.path:t.name)+" ")]),i("div",{staticClass:"select-block"},[-1===e.selectedRecommendIdList.indexOf(t.knowledgeId)?i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):e._e(),-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId)?i("div",{staticClass:"selected-icon"},[i("img",{attrs:{src:a("7aa6")}})]):e._e()],1),i("div",{staticClass:"right-name"},[t.isSelfCustom?i("div",{staticClass:"custom-icon"},[i("a-icon",{attrs:{type:"user-add"}})],1):e._e(),e._v(" "+e._s(t.name)+" ")]),i("div",{staticClass:"recommend-selected-left-bar",attrs:{"tag-type":t.tagType}})],2)],1)}))]:e._e(),t.centuryList.length?[i("div",{staticClass:"recommend-type-title"},[i("div",{staticClass:"title-item title-21"},[e._v(e._s(e.$classcipe.get21stCenturyDisplayNameByCurriculum(e.$store.getters.bindCurriculum)))])]),e._l(t.centuryList,(function(t,s){return i("div",{key:"ri2-"+s,class:{"recommend-item":!0,"my-selected-item":-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId),"disabled-select-item":-1!==e.mySelectedIdList.indexOf(t.knowledgeId)},attrs:{"data-tag-type":t.tagType,"data-knowledge-id":t.knowledgeId,"data-selected-id-list":e.mySelectedIdList},on:{click:function(a){return e.handleAddRecommend(t)}}},[i("a-tooltip",{staticClass:"my-tooltip",attrs:{placement:"topLeft"}},[i("template",{slot:"title"},[e._v(" "+e._s(t.path?t.path:t.name)+" ")]),i("div",{staticClass:"select-block"},[-1===e.selectedRecommendIdList.indexOf(t.knowledgeId)?i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):e._e(),-1!==e.selectedRecommendIdList.indexOf(t.knowledgeId)?i("div",{staticClass:"selected-icon"},[i("img",{attrs:{src:a("7aa6")}})]):e._e()],1),i("div",{staticClass:"right-name"},[t.isSelfCustom?i("div",{staticClass:"custom-icon"},[i("a-icon",{attrs:{type:"user-add"}})],1):e._e(),e._v(" "+e._s(t.name)+" ")]),i("div",{staticClass:"recommend-selected-left-bar",attrs:{"tag-type":t.tagType}})],2)],1)}))]:e._e()],2)})),0)]),e.hasSelectedContent?i("div",{staticClass:"selected-list"},[e._m(4),i("div",{staticClass:"content-list"},[e.displayContentList(e.tagType.skill).length>0?i("div",{staticClass:"selected-category"},[i("div",{staticClass:"category-name title-item title-skill"},[e._v("Achievement objectives")]),i("div",{staticClass:"category-list"},e._l(e.displayContentList(e.tagType.skill),(function(t,s){return i("div",{key:"curr-"+s,class:{"content-item":!0,"selected-line":!0}},[i("div",{staticClass:"name"},[i("div",{staticClass:"selected-left-bar",attrs:{"tag-type":t.tagType}}),i("div",{staticClass:"name-text"},[e._v(" "+e._s(t.knowledgeData&&t.knowledgeData.name||t.bigIdea||t.item&&t.item.name||t.name)+" ")]),e._m(5,!0),i("div",{staticClass:"action-icon-right",on:{click:function(a){return e.handleRemoveSelected(t)}}},[i("img",{attrs:{src:a("4165")}})])])])})),0)]):e._e(),e.displayContentList(e.tagType.knowledge).length>0?i("div",{staticClass:"selected-category"},[i("div",{staticClass:"category-name title-item title-learnout"},[e._v("Learning outcomes")]),i("div",{staticClass:"category-list"},e._l(e.displayContentList(e.tagType.knowledge),(function(t,s){return i("div",{key:"curr-"+s,class:{"content-item":!0,"selected-line":!0}},[i("div",{staticClass:"name"},[i("div",{staticClass:"selected-left-bar",attrs:{"tag-type":t.tagType}}),i("div",{staticClass:"name-text"},[e._v(" "+e._s(t.knowledgeData&&t.knowledgeData.name||t.bigIdea||t.item&&t.item.name||t.name)+" ")]),e._m(6,!0),i("div",{staticClass:"action-icon-right",on:{click:function(a){return e.handleRemoveSelected(t)}}},[i("img",{attrs:{src:a("4165")}})])])])})),0)]):e._e(),e.displayContentList(e.tagType.century).length>0||e.selected21CenturyItem?i("div",{staticClass:"selected-category"},[i("div",{staticClass:"category-name title-item title-21"},[e._v(e._s(e.$classcipe.get21stCenturyDisplayNameByCurriculum(e.$store.getters.bindCurriculum)))]),i("div",{staticClass:"category-list"},[e._l(e.displayContentList(e.tagType.century),(function(t,s){return i("div",{key:"curr-"+s,class:{"content-item":!0,"selected-line":!0}},[i("div",{staticClass:"name"},[i("div",{staticClass:"selected-left-bar",attrs:{"tag-type":t.tagType}}),i("div",{staticClass:"name-text"},[e._v(" "+e._s(t.knowledgeData&&t.knowledgeData.name||t.bigIdea||t.item&&t.item.name||t.name)+" ")]),e._m(7,!0),i("div",{staticClass:"action-icon-right",on:{click:function(a){return e.handleRemoveSelected(t)}}},[i("img",{attrs:{src:a("4165")}})])])])})),e.selected21CenturyItem?[i("div",{class:{"content-item":!0,"selected-line":!0}},[i("div",{staticClass:"name"},[i("div",{staticClass:"selected-left-bar",attrs:{"tag-type":e.selected21CenturyItem.tagType}}),i("div",{staticClass:"name-text"},[e._v(" "+e._s(e.selected21CenturyItem.name)+" ")]),e._m(8),i("div",{staticClass:"action-icon-right",on:{click:e.handleRemoveMySelected21Century}},[i("img",{attrs:{src:a("4165")}})])])])]:e._e()],2)]):e._e(),i("div",{staticClass:"selected-action"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasSelectedContent,expression:"hasSelectedContent"}],staticClass:"modal-ensure-action-line-center"},[i("a-space",[i("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:e.handleCancelSelectData}},[e._v("Cancel")]),i("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:e.handleEnsureSelectData}},[e._v(" Ok ")])],1)],1)])])]):e._e()])]),i("div",{staticClass:"main-tree-content",style:{left:(e.expandedListFlag?e.componentWidth-400:100)+"px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.expandedListFlag,expression:"expandedListFlag"}],staticClass:"selected-toggle-mask",on:{click:function(t){e.expandedListFlag=!e.expandedListFlag}}}),i("div",{staticClass:"expand-icon",on:{click:function(t){e.expandedListFlag=!e.expandedListFlag}}},[i("div",{staticClass:"expand-icon-area"},[e.expandedListFlag?[i("a-icon",{staticStyle:{"font-size":"16px",color:"#07AB84"},attrs:{type:"left"}})]:e._e(),e.expandedListFlag?e._e():[i("a-icon",{staticStyle:{"font-size":"16px",color:"#07AB84"},attrs:{type:"right"}})]],2)]),i("div",{staticClass:"tree-navigation"},[i("new-tree-navigation",{attrs:{"select-mode":e.selectMode,"question-index":e.questionIndex,"show-menu":e.showMenu,"default-active-menu":e.defaultActiveMenu,"default-curriculum-id":e.defaultCurriculumId}})],1),i("div",{staticClass:"content-list"},[i("new-content-list",{ref:"contentList",attrs:{"selected-list":e.mySelectedList,"current-nav-path":e.currentNavPath},on:{"select-big-idea":e.handleSelectBigIdeaData,"select-sync":e.handleSelectListData,"select-curriculum":e.handleSelectCurriculumListData,"select-subject-specific-skill":e.handleSelectSubjectSpecificSkillListData,"select-century-skill":e.handleSelect21CenturySkillListData,"select-all-21-century":e.handleSelectAll21CenturyListData,"select-assessmentType":e.handleSelectAssessmentType,"select-idu":e.handleSelectIdu,"update-selected-list":e.handleUpdateSelectedList}})],1)])])])},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"no-select-img"},[i("img",{staticClass:"logo",attrs:{src:a("64f9")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recommend-title"},[a("h3",[e._v("Recommended learning objectives")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recommend-type-title"},[a("div",{staticClass:"title-item title-skill"},[e._v("Achievement objectives")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recommend-type-title"},[a("div",{staticClass:"title-item title-learnout"},[e._v("Learning outcomes")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recommend-title"},[a("h3",[e._v("Selected learning objectives")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"action-icon"},[i("img",{attrs:{src:a("7aa6")}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"action-icon"},[i("img",{attrs:{src:a("7aa6")}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"action-icon"},[i("img",{attrs:{src:a("7aa6")}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"action-icon"},[i("img",{attrs:{src:a("7aa6")}})])}],n=a("2909"),r=(a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("159b"),a("c740"),a("a434"),a("4de4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav-path-wrapper"},[a("div",{staticClass:"nav-path"},e._l(e.navPath,(function(t,i){return t?a("div",{key:i,staticClass:"nav-path-item",on:{click:function(a){return e.handleLibraryNavClick(t)}}},[t.name&&t.name.length>20?[a("a-tooltip",{attrs:{mouseEnterDelay:1}},[a("template",{slot:"title"},[e._v(" "+e._s(t.name)+" ")]),a("a-icon",{attrs:{type:"right"}}),e._v(" "+e._s(t.name)+" ")],2)]:[a("a-icon",{attrs:{type:"right"}}),e._v(" "+e._s(t.name)+" ")]],2):e._e()})),0)])}),d=[],l=(a("b0c0"),a("7db0"),a("a02e")),c=a("d597"),o={name:"NewNavigation",props:{currentCurriculum:{type:String,default:null}},data:function(){return{navPath:[],curriculumLabel:null}},created:function(){this.$logger.info("NewNavigation")},watch:{navPath:function(e){this.$logger.info("NewNavigation navPath changed",e);var t=this.curriculumLabel+">";e.forEach((function(e){e&&e.hasOwnProperty("name")&&(t+=e.name+">")})),t.lastIndexOf(">")===t.length-1&&(t=t.substring(0,t.length-1)),this.$emit("update-path",t)}},mounted:function(){l["LibraryEventBus"].$on(l["LibraryEvent"].ContentListUpdate,this.handleContentListUpdate),l["LibraryEventBus"].$on(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum),this.getCurriculums()},destroyed:function(){l["LibraryEventBus"].$off(l["LibraryEvent"].ContentListUpdate,this.handleContentListUpdate),l["LibraryEventBus"].$off(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum)},methods:{handleContentListUpdate:function(e){this.$logger.info("handleContentListUpdate",e);var t=Object.assign({},e),a=[t.parentTreeData,t.currentTreeData],i=t.parentTreeData;while(i&&i.parent)a.unshift(Object.assign({},i.parent)),i=i.parent;this.navPath=a},handleChangeCurriculum:function(){this.$logger.info("NewNavigation handleChangeCurriculum"),this.navPath=[]},handleLibraryNavClick:function(e){this.$logger.info("handleLibraryNavClick ",e),l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,parent:e.parent})},getCurriculums:function(){var e=this;Object(c["e"])().then((function(t){if(e.$logger.info("getAllCurriculums",t),t.success){var a=e.currentCurriculum?e.currentCurriculum:e.$store.getters.bindCurriculum,i=t.result.find((function(e){return parseInt(e.id)===parseInt(a)}));e.$logger.info("bindCurriculum",i),i&&(e.curriculumLabel=i.name)}}))}}},u=o,h=(a("97f2"),a("0c7c")),p=Object(h["a"])(u,r,d,!1,null,"2e45fe43",null),m=p.exports,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content-list-wrapper",style:{width:e.nameWidth+"px"}},[e._m(0),i("div",{staticClass:"content-list"},[e.contentDataList&&e.contentDataList.length?e._l(e.contentDataList,(function(t,s){return i("div",{key:s,class:{"content-item":!0,"odd-line":s%2===0,"even-line":s%2===1,"active-line":e.currentId===t.id,"selected-line":e.isSelectedItem(t)},attrs:{"data-item-id":t.id},on:{click:function(a){return e.handleContentListItemClick(t)}}},[i("div",{staticClass:"name"},[i("div",{staticClass:"icon item-type-icon"},[0!==t.children.length||t.gradeList&&0!==t.gradeList.length||t.hasOwnProperty("isGrade")&&t.isGrade||!t.hasOwnProperty("tagType")?[i("a-icon",{staticClass:"file-dir-icon",attrs:{type:"folder",theme:"filled"}})]:e.isSelectedItem(t)&&t.hasOwnProperty("tagType")?[i("img",{attrs:{src:a("7aa6")}})]:!e.isSelectedItem(t)&&t.hasOwnProperty("tagType")?[i("div",{staticClass:"empty-circle"})]:e._e()],2),i("a-tooltip",{attrs:{placement:"top"}},[t.gradeNames&&t.gradeNames.length>0?i("template",{slot:"title"},[e._v(e._s(e._f("gradeFormat")(t.gradeNames)))]):e._e(),i("div",{staticClass:"name-text"},[e._v(" "+e._s(t.name||t.description)+" ")])],2)],1)])})):[e.firstLoad?e._e():i("div",{staticClass:"content-empty"},[i("no-more-resources",{attrs:{tips:"No data under selected level, please check other levels."}})],1)]],2),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",closable:"",width:"800px",visible:e.previewVisible},on:{close:e.handlePreviewClose}},[i("div",{staticClass:"preview-wrapper"},[i("div",{staticClass:"preview-detail"},[e.previewType===e.typeMap["unit-plan"]?i("unit-plan-preview",{attrs:{"unit-plan-id":e.previewCurrentId,"show-associate":!0}}):e._e(),e.previewType===e.typeMap.material?i("material-preview",{attrs:{"material-id":e.previewCurrentId,"show-associate":!0}}):e._e()],1)])])],1)},g=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-header"},[a("div",{staticClass:"name"},[e._v(" Name ")])])}],f=(a("4ec9"),a("8f46")),I=a("ea23"),C=a("7d7a"),v=a("3f76"),b=a("ab44"),T=a("69b3"),L=a("4fcf"),w=L.debounce,S={name:"NewContentList",components:{NoMoreResources:T["a"],ContentTypeIcon:f["a"],UnitPlanPreview:I["default"],MaterialPreview:C["default"]},props:{selectedList:{type:Array,default:function(){return[]}},currentNavPath:{type:String,default:null}},data:function(){return{currentId:null,nameWidth:500,contentDataList:[],parent:null,previewVisible:!1,previewCurrentId:"",previewType:"",blockIndex:0,typeMap:v["e"],firstLoad:!0,NavigationType:b["a"],selectedCurriculumIdList:[],selectedCurriculumMap:new Map,selectedKnowledgeIdList:[],selectedKnowledgeIdNameMap:new Map,selected21CenturySkillIdList:[],selected21CenturySkillIdMap:new Map,selectedSubjectSpecificSkillIdList:[],selectedSubjectSpecificSkillIdMap:new Map,selectedAssessmentIdList:[],selectedAssessmentMap:new Map,selectedAll21CenturyIdList:[],selectedAll21CenturyMap:new Map,selectedIDUIdList:[],selectedIDUMap:new Map,selectedIdList:[],selectedMap:new Map,selectedBigIdeaList:[],currentDataType:"none",mySelectedList:[],backgroundColor:"#ffffff"}},watch:{selectedList:function(e){var t=this;this.$logger.info("NewContentList selectedList change",e),this.mySelectedList=e,this.selectedIdList=[],this.selectedMap.clear(),this.mySelectedList.forEach((function(e){t.selectedIdList.push(e.knowledgeId),t.selectedMap.set(e.knowledgeId,e)}))}},mounted:function(){var e=this;l["LibraryEventBus"].$on(l["LibraryEvent"].ContentListUpdate,this.handleContentListUpdate),l["LibraryEventBus"].$on(l["LibraryEvent"].ContentListSelectedListUpdate,this.handleContentSelectedListUpdate),l["LibraryEventBus"].$on(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum),l["LibraryEventBus"].$on(l["LibraryEvent"].ResetContentList,this.handleResetContentList),this.nameWidth=document.getElementById("new-library").getBoundingClientRect().width-505,this.$logger.info("nameWidth "+this.nameWidth),this.$logger.info("NewContentList selectedList",this.selectedList),this.mySelectedList=this.selectedList,this.assignSelectedList(),window.onresize=w((function(){e.nameWidth=document.getElementById("new-library").getBoundingClientRect().width-505}),300)},methods:{isSelectedItem:function(e){if(-1!==this.selectedIdList.indexOf(e.id))return!0;switch(this.currentDataType){case b["a"].sync:return-1!==this.selectedKnowledgeIdList.indexOf(e.knowledgeId);case b["a"].learningOutcomes:return-1!==this.selectedCurriculumIdList.indexOf(e.id);case b["a"].specificSkills:return-1!==this.selectedSubjectSpecificSkillIdList.indexOf(e.id);case b["a"].centurySkills:case b["a"].AUGeneralCapabilities:case b["a"].NZKeyCompetencies:return-1!==this.selected21CenturySkillIdList.indexOf(e.id);case b["a"].sdg:return-1!==this.selectedBigIdeaList.indexOf(e.id);case b["a"].assessmentType:return-1!==this.selectedAssessmentIdList.indexOf(e.id);case b["a"].all21Century:return-1!==this.selectedAll21CenturyIdList.indexOf(e.id);case b["a"].idu:return-1!==this.selectedIDUIdList.indexOf(e.id);default:return!1}},handleChangeCurriculum:function(){this.$logger.info("NewContentList handleChangeCurriculum"),this.contentDataList=[],this.parent=null,this.firstLoad=!0,this.currentDataType=null},handleResetContentList:function(){this.$logger.info("NewContentList handleResetContentList"),this.contentDataList=[],this.parent=null,this.firstLoad=!0,this.currentDataType=null},assignSelectedList:function(){var e=this;this.$logger.info("assignSelectedList",this.selectedList),this.selectedIdList=[],this.selectedMap.clear(),this.selectedList.forEach((function(t){e.selectedIdList.push(t.knowledgeId),e.selectedMap.set(t.knowledgeId,t)})),this.$logger.info("assignSelectedList selectedIdList",this.selectedIdList)},handleContentListUpdate:function(e){this.$logger.info("NewContentList handleContentListUpdate ",e),this.backgroundColor=e.backgroundColor,this.contentDataList=e.contentList,this.parent=e.currentTreeData,this.currentDataType=e.dataType,this.firstLoad=!1},handleContentSelectedListUpdate:function(e){this.$logger.info("handleContentSelectedListUpdate ",e),-1===this.selectedCurriculumIdList.indexOf(e.id)?(this.selectedCurriculumIdList.push(e.id),this.selectedCurriculumMap.set(e.id,e)):(this.selectedCurriculumIdList.splice(this.selectedCurriculumIdList.indexOf(e.id),1),this.selectedCurriculumMap.delete(e.id)),this.$logger.info("after handleContentSelectedListUpdate ",this.selectedCurriculumIdList,this.selectedCurriculumMap)},handleContentListItemClick:function(e){var t=this;this.$logger.info(this.currentDataType+": handleContentListItemClick current item: ",e," parent:",this.parent),e.originParent=this.parent;var a=this.selectedIdList.indexOf(e.id);if(-1!==a){this.selectedIdList.splice(a,1),this.selectedMap.delete(e.id),this.$logger.info("delete from selectedIdList",this.selectedIdList);var i=this.mySelectedList.findIndex((function(t){return t.knowledgeId===e.id}));return this.mySelectedList.splice(i,1),void this.$emit("update-selected-list",this.mySelectedList)}if(this.currentDataType===b["a"].learningOutcomes)if(e.children.length||e.gradeList&&e.gradeList.length||e.hasOwnProperty("gradeList"))l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync",e,this.currentDataType,this.parent);else if(e.hasOwnProperty("isGrade")){var s={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,s),this.$logger.info("current is grade, skip empty children item!",s)}else{var n=this.selectedCurriculumIdList.indexOf(e.id);-1!==n?(this.selectedCurriculumIdList.splice(n,1),this.selectedCurriculumMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedCurriculumIdList.push(e.id),this.selectedCurriculumMap.set(e.id,e));var r=[];this.selectedCurriculumIdList.forEach((function(e){r.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedCurriculumMap.get(e)})})),this.$emit("select-curriculum",r),this.$logger.info("selectedCurriculumMap",this.selectedCurriculumMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].specificSkills)if(e.children.length||e.gradeList&&e.gradeList.length)l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync specificSkills",e,this.currentDataType,this.parent);else if(e.hasOwnProperty("isGrade")){var d={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,d),this.$logger.info("current is grade, skip empty children item!",d)}else{var c=this.selectedSubjectSpecificSkillIdList.indexOf(e.id);-1!==c?(this.selectedSubjectSpecificSkillIdList.splice(c,1),this.selectedSubjectSpecificSkillIdMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedSubjectSpecificSkillIdList.push(e.id),this.selectedSubjectSpecificSkillIdMap.set(e.id,e));var o=[];this.selectedSubjectSpecificSkillIdList.forEach((function(e){o.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedSubjectSpecificSkillIdMap.get(e)})})),this.$emit("select-subject-specific-skill",o),this.$logger.info("selectedSubjectSpecificSkillIdMap",this.selectedSubjectSpecificSkillIdMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].centurySkills||this.currentDataType===b["a"].AUGeneralCapabilities||this.currentDataType===b["a"].NZKeyCompetencies)if(e.children.length||e.gradeList&&e.gradeList.length)l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync");else if(e.hasOwnProperty("isGrade")){var u={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,u),this.$logger.info("current is grade, skip empty children item!",u)}else{var h=this.selected21CenturySkillIdList.indexOf(e.id);-1!==h?(this.selected21CenturySkillIdList.splice(h,1),this.selected21CenturySkillIdMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selected21CenturySkillIdList.push(e.id),this.selected21CenturySkillIdMap.set(e.id,e));var p=[];this.selected21CenturySkillIdList.forEach((function(e){p.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selected21CenturySkillIdMap.get(e)})})),this.$emit("select-century-skill",p),this.$logger.info("selected21CenturySkillIdMap",this.selected21CenturySkillIdMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].sdg)if(e.hasOwnProperty("isBigIdea")){var m=this.selectedBigIdeaList.indexOf(e.id);-1!==m?this.selectedBigIdeaList.splice(m,1):this.selectedBigIdeaList.push(e.id);var y=[];this.selectedBigIdeaList.forEach((function(e){y.push({dataType:t.currentDataType,bigIdea:e})})),this.$emit("select-big-idea",y),this.$logger.info("select-big-idea",this.selectedBigIdeaList),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else{var g={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,g),this.$logger.info("BigIdea $emit sync eventData",g)}else if(this.currentDataType===b["a"].assessmentType)if(!e.hasOwnProperty("isKnowledge")||e.gradeList&&e.gradeList.length)l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync");else if(e.hasOwnProperty("isGrade")){var f={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,f),this.$logger.info("current is grade, skip empty children item!",f)}else{var I=this.selectedAssessmentIdList.indexOf(e.id);-1!==I?(this.selectedAssessmentIdList.splice(I,1),this.selectedAssessmentMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedAssessmentIdList.push(e.id),this.selectedAssessmentMap.set(e.id,e));var C=[];this.selectedAssessmentIdList.forEach((function(e){C.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedAssessmentMap.get(e)})})),this.$emit("select-assessmentType",C),this.$logger.info("selectedAssessmentMap",this.selectedAssessmentMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].all21Century)if(e.children.length)l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,{item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"}),this.$logger.info("$emit sync");else{var v=this.selectedAll21CenturyIdList.indexOf(e.id);-1!==v?(this.selectedAll21CenturyIdList.splice(v,1),this.selectedAll21CenturyMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedAll21CenturyIdList.push(e.id),this.selectedAll21CenturyMap.set(e.id,e));var T=[];this.selectedAll21CenturyIdList.forEach((function(e){T.push({dataType:t.currentDataType,all21Century:e,item:t.selectedAll21CenturyMap.get(e)})})),this.$emit("select-all-21-century",T),this.$logger.info("select-all-21-century",T),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}else if(this.currentDataType===b["a"].idu)if(e.hasOwnProperty("isGrade")){var L={item:e,dataType:this.currentDataType,parent:this.parent,eventType:"syncDir"};l["LibraryEventBus"].$emit(l["LibraryEvent"].ContentListItemClick,L),this.$logger.info("current is grade, skip empty children item!",L)}else{var w=this.selectedIDUIdList.indexOf(e.id);-1!==w?(this.selectedIDUIdList.splice(w,1),this.selectedIDUMap.delete(e.id)):(e.hasOwnProperty("path")&&(e.path=this.currentNavPath),this.selectedIDUIdList.push(e.id),this.selectedIDUMap.set(e.id,e));var S=[];this.selectedIDUIdList.forEach((function(e){S.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedIDUMap.get(e)})})),this.$emit("select-idu",S),this.$logger.info("selectedIDUMap",this.selectedIDUMap),e.hasOwnProperty("selectedGradeId")&&(this.$logger.info("selectedGradeId",e.selectedGradeId),l["LibraryEventBus"].$emit(l["LibraryEvent"].GradeUpdate,e.selectedGradeId))}},handlePreviewClose:function(){this.$logger.info("handlePreviewClose"),this.previewCurrentId="",this.previewType="",this.previewVisible=!1},handlePreviewDetail:function(e){this.$logger.info("handlePreviewDetail",e),this.previewCurrentId=e.id,this.previewType=e.type,this.previewVisible=!0},handleRemoveSelected:function(e){var t=this;if(this.$logger.info("Content List handleRemoveSelected "+e.dataType,e),e.dataType===b["a"].sync){var a=this.selectedKnowledgeIdList.indexOf(e.knowledgeId);-1!==a&&(this.selectedKnowledgeIdList.splice(a,1),this.selectedKnowledgeIdNameMap.delete(e.knowledgeId));var i=[];this.selectedKnowledgeIdList.forEach((function(a){i.push({dataType:e.dataType,knowledgeId:a,name:t.selectedKnowledgeIdNameMap.get(a),tagType:e.tagType,tags:e.tags})})),this.$emit("select-sync",i)}else if(e.dataType===b["a"].learningOutcomes){var s=this.selectedCurriculumIdList.indexOf(e.knowledgeData.id);-1!==s&&(this.selectedCurriculumIdList.splice(s,1),this.selectedCurriculumMap.delete(e.knowledgeData.id));var n=[];this.selectedCurriculumIdList.forEach((function(a){n.push({dataType:e.dataType,knowledgeId:a,knowledgeData:t.selectedCurriculumMap.get(a)})})),this.$emit("select-curriculum",n)}else if(e.dataType===b["a"].specificSkills){var r=this.selectedSubjectSpecificSkillIdList.indexOf(e.knowledgeData.id);-1!==r&&(this.selectedSubjectSpecificSkillIdList.splice(r,1),this.selectedSubjectSpecificSkillIdMap.delete(e.knowledgeData.id));var d=[];this.selectedSubjectSpecificSkillIdList.forEach((function(a){d.push({dataType:e.dataType,knowledgeId:a,knowledgeData:t.selectedSubjectSpecificSkillIdMap.get(a)})})),this.$emit("select-subject-specific-skill",d)}else if(e.dataType===b["a"].centurySkills||e.dataType===b["a"].AUGeneralCapabilities||e.dataType===b["a"].NZKeyCompetencies){var l=this.selected21CenturySkillIdList.indexOf(e.knowledgeData.id);-1!==l&&(this.selected21CenturySkillIdList.splice(l,1),this.selected21CenturySkillIdMap.delete(e.knowledgeData.id));var c=[];this.selected21CenturySkillIdList.forEach((function(a){c.push({dataType:e.dataType,knowledgeId:a,knowledgeData:t.selected21CenturySkillIdMap.get(a)})})),this.$emit("select-century-skill",c)}else if(e.dataType===b["a"].sdg){var o=this.selectedBigIdeaList.indexOf(e.bigIdea);-1!==o&&this.selectedBigIdeaList.splice(o,1);var u=[];this.selectedBigIdeaList.forEach((function(t){u.push({dataType:e.dataType,bigIdea:t})})),this.$emit("select-big-idea",u)}else if(e.dataType===b["a"].assessmentType){var h=this.selectedAssessmentIdList.indexOf(e.knowledgeData.id);-1!==h&&(this.selectedAssessmentIdList.splice(h,1),this.selectedAssessmentMap.delete(e.knowledgeData.id));var p=[];this.selectedAssessmentIdList.forEach((function(e){p.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedAssessmentMap.get(e)})})),this.$emit("select-assessmentType",p)}else if(e.dataType===b["a"].all21Century){var m=this.selectedAll21CenturyIdList.indexOf(e.item.id);-1!==m&&(this.selectedAll21CenturyIdList.splice(m,1),this.selectedAll21CenturyMap.delete(e.item.id));var y=[];this.selectedAll21CenturyIdList.forEach((function(a){y.push({dataType:e.dataType,all21Century:a,item:t.selectedAll21CenturyMap.get(a)})})),this.$emit("select-all-21-century",y)}else if(e.dataType===b["a"].idu){var g=this.selectedIDUIdList.indexOf(e.id);-1!==g?(this.selectedIDUIdList.splice(g,1),this.selectedIDUMap.delete(e.id)):(this.selectedIDUIdList.push(e.id),this.selectedIDUMap.set(e.id,e));var f=[];this.selectedIDUIdList.forEach((function(e){f.push({dataType:t.currentDataType,knowledgeId:e,knowledgeData:t.selectedIDUMap.get(e)})})),this.$emit("select-idu",f),this.$logger.info("selectedIDUMap",this.selectedIDUMap)}}},destroyed:function(){l["LibraryEventBus"].$off(l["LibraryEvent"].ContentListUpdate,this.handleContentListUpdate),this.$logger.info("off NewContentList ContentListUpdate handler"),l["LibraryEventBus"].$off(l["LibraryEvent"].ContentListSelectedListUpdate,this.handleContentSelectedListUpdate),l["LibraryEventBus"].$off(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum),l["LibraryEventBus"].$off(l["LibraryEvent"].ResetContentList,this.handleResetContentList),this.$logger.info("off NewContentList ContentListSelectedListUpdate handler")}},k=S,D=(a("9f4c"),Object(h["a"])(k,y,g,!1,null,"67a7e17c",null)),$=D.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-tree-navigation",attrs:{"data-display-menu":JSON.stringify(e.displayCategoryList)}},[e._l(e.treeDataList,(function(t,i){return e.loaded&&e.displayCategoryList&&-1!==e.showMenu.indexOf(t.type)?a("new-tree-item",{key:i,staticClass:"tree-item-type",attrs:{"grade-list":e.gradeList,"tree-item-data":t,"tree-current-parent":null,"default-background-color":t.backgroundColor,"default-deep":0,"current-item-type":t.type===e.NavigationType.learningOutcomes?"subject":t.type===e.NavigationType.sync?"sync":t.type===e.NavigationType.specificSkills||t.type===e.NavigationType.assessmentType?"subject":t.type===e.NavigationType.centurySkills||e.NavigationType.AUGeneralCapabilities||e.NavigationType.NZKeyCompetencies?"grade":t.type===e.NavigationType.sdg?"sdg":t.type===e.NavigationType.all21Century?"all21Century":t.type===e.NavigationType.idu?"grade":"none","select-mode":e.selectMode,"question-index":e.questionIndex,"default-expand-status":t.expandStatus,"tree-item-type":t.type,"root-type":t.type,"data-item-type":t.type,odd:i%2===1,"default-grade-id":e.defaultGradeId,"default-curriculum-id":e.defaultCurriculumId}}):e._e()})),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loaded&&0===e.displayCategoryList.length,expression:"loaded && displayCategoryList.length === 0"}],staticClass:"no-display-category"},[a("no-more-resources",{attrs:{tips:"The data is not available, please contact your school admin to upload first."}})],1),a("div",{staticClass:"loading-spin"},[a("a-spin",{directives:[{name:"show",rawName:"v-show",value:!e.loaded,expression:"!loaded"}]})],1)],2)},E=[],B=a("5530"),_=(a("99af"),a("d81d"),a("caad"),a("2532"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.treeItemData?i("div",{staticClass:"tree-item",attrs:{"data-deep":e.defaultDeep,"data-tree-type":e.treeItemType,"data-current-type":e.currentItemType,"data-selected-grade-id":e.treeItemData.selectedGradeId+"","data-selected-grade-name":e.treeItemData.selectedGradeName+"","data-root-type":e.rootType}},[i("div",{staticClass:"border-left-tag",style:{background:e.treeItemData.backgroundColor}}),i("div",{class:{"item-wrapper":!0,"odd-line":e.odd,"even-line":!e.odd},style:{paddingLeft:(e.defaultDeep*e.defaultPaddingLeft===0?e.defaultPaddingLeft/3:e.defaultDeep*e.defaultPaddingLeft)+"px"}},[i("div",{staticClass:"subtree-icon-wrapper"},[e.hasSubTree?i("div",{staticClass:"subtree-icon-item"},[e.subTreeExpandStatus?e._e():[e.subTreeLoading?e._e():i("a-icon",{staticClass:"subtree-icon",attrs:{type:"right"},on:{click:function(t){return e.handleExpandTreeItem(e.treeItemData)}}}),e.subTreeLoading?i("a-spin",{attrs:{size:"small"}}):e._e()],e.subTreeExpandStatus?[e.subTreeLoading?e._e():i("a-icon",{staticClass:"subtree-icon opened-subtree-icon",attrs:{type:"down"},on:{click:function(t){return e.handleCollapseTreeItem(e.treeItemData)}}}),e.subTreeLoading?i("a-spin",{attrs:{size:"small"}}):e._e()]:e._e()],2):e._e()]),i("div",{staticClass:"type-icon-wrapper",on:{click:function(t){return e.handleClickTreeItem(e.subTreeExpandStatus,e.treeItemData)}}},[e.subTreeExpandStatus?i("a-icon",{staticClass:"opened-file-dir-icon",attrs:{type:"folder-open",theme:"filled"}}):e._e(),e.subTreeExpandStatus?e._e():i("a-icon",{staticClass:"file-dir-icon",attrs:{type:"folder",theme:"filled"}})],1),i("div",{staticClass:"display-label-wrapper",on:{click:function(t){return e.handleClickTreeItem(e.subTreeExpandStatus,e.treeItemData)}}},[i("span",{class:{"display-label":!0,"opened-display-label":e.subTreeExpandStatus,"selected-display-label":e.selected21CenturyItem===e.treeItemData}},[e._v(e._s(e.treeItemData.name))]),e.selected21CenturyItem===e.treeItemData?i("img",{attrs:{src:a("7aa6")}}):e._e()])]),e.subItemType?[i("div",{directives:[{name:"show",rawName:"v-show",value:e.subTreeExpandStatus&&e.hasSubTree,expression:"subTreeExpandStatus && hasSubTree"}],staticClass:"sub-tree",attrs:{"data-sub-type":e.subItemType,"data-hasSubTree":e.hasSubTree}},["subject"===e.subItemType?e._l(e.treeItemData.children,(function(t,a){return i("new-tree-item",{key:a,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"default-background-color":e.defaultBackgroundColor,"current-item-type":e.subItemType,"data-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?a%2===1:a%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"grade"===e.subItemType?e._l(e.treeItemData.gradeList,(function(t,a){return i("new-tree-item",{key:a,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-expand-status":t.expandStatus,"default-background-color":e.defaultBackgroundColor,"default-grade-id":e.myDefaultGradeId,odd:e.odd?a%2===1:a%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"assessmentType"===e.subItemType?e._l(e.treeItemData.children,(function(t,a){return i("new-tree-item",{key:a,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?a%2===1:a%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"knowledge"===e.subItemType&&0!==e.treeItemData.children.length&&e.treeItemData.children[0]&&e.treeItemData.children[0].children&&e.treeItemData.children[0].children.length?e._l(e.treeItemData.children,(function(t,a){return i("new-tree-item",{key:a,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?a%2===1:a%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"sdgList"===e.subItemType?e._l(e.treeItemData.children,(function(t,a){return i("new-tree-item",{key:a,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?a%2===1:a%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"sdgKeyword"===e.subItemType?e._l(e.treeItemData.children,(function(t,a){return i("new-tree-item",{key:a,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?a%2===1:a%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e(),"all21Century"===e.subItemType?e._l(e.treeItemData.children,(function(t,a){return i("new-tree-item",{key:a,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"current-item-type":e.subItemType,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"root-type":e.rootType,"default-deep":e.defaultDeep+1,"default-background-color":e.defaultBackgroundColor,"default-expand-status":t.expandStatus,"default-grade-id":e.myDefaultGradeId,odd:e.odd?a%2===1:a%2===0,"default-curriculum-id":e.currentCurriculumId},on:{"update:treeItemData":function(e){t=e},"update:tree-item-data":function(e){t=e}}})})):e._e()],2)]:e._e()],2):e._e()}),G=[],O=(a("a9e3"),a("b3db")),A=a("db6a"),j=a("489c"),P=a("a02e"),M=P.LibraryEvent,U=a("db6a"),N=U.KnowledgeGetTree,q=U.Get21Century,K={collapse:!1,open:!0},R={name:"NewTreeItem",props:{defaultDeep:{type:Number,default:0},defaultExpandStatus:{type:Boolean},gradeList:{type:Array},treeItemData:{type:Object,default:null},treeItemType:{type:String,default:null},rootType:{type:String,default:null},treeCurrentParent:{type:Object,default:null},odd:{type:Boolean,default:!1},defaultPaddingLeft:{type:Number,default:25},selectMode:{type:String,default:null},questionIndex:{type:String,default:null},currentItemType:{type:String,required:!0},defaultBackgroundColor:{type:String,default:null},defaultCurriculumId:{type:String,default:null},defaultGradeId:{type:String,default:null}},data:function(){return{subTreeExpandStatus:K.collapse,hasSubTree:!1,subTreeParent:null,subTreeLoading:!1,subItemType:null,NavigationType:b["a"],currentCurriculumId:null,SelectModel:j["a"],selected21CenturyItem:null,myDefaultGradeId:null}},watch:{hasSubTreeWatch:function(){this.treeItemData&&("subject"===this.currentItemType&&this.treeItemData.children||"knowledge"===this.currentItemType&&this.treeItemData.children||"grade"===this.currentItemType||"sdg"===this.currentItemType||"sdgKnowledge"===this.currentItemType||"all21Century"===this.currentItemType&&this.treeItemData.children.length&&this.treeItemData.children[0].children.length)?this.hasSubTree=!0:this.hasSubTree=!1},defaultCurriculumId:function(e){this.$logger.info("NewTreeItem defaultCurriculumId change currentCurriculumId "+e),this.currentCurriculumId=e},defaultGradeId:function(e){this.myDefaultGradeId=e}},created:function(){this.myDefaultGradeId=this.defaultGradeId,this.subTreeExpandStatus=!!this.treeItemData.expandStatus,this.currentCurriculumId=this.defaultCurriculumId?this.defaultCurriculumId:this.$store.getters.bindCurriculum,this.treeItemData&&this.treeItemData.children&&(this.hasSubTree=!0),"grade"===this.currentItemType&&(this.hasSubTree=!0);var e=Object.assign({},this.treeItemData);e.parent=this.treeCurrentParent,this.subTreeParent=e},mounted:function(){this.treeItemType===b["a"].learningOutcomes?"subject"===this.currentItemType?this.treeItemData.children.length&&!this.treeItemData.children[0].hasOwnProperty("isGrade")?this.subItemType="subject":this.subItemType="grade":("grade"===this.currentItemType||"knowledge"===this.currentItemType&&this.treeItemData.children.length)&&(this.subItemType="knowledge"):this.treeItemType===b["a"].specificSkills?"subject"===this.currentItemType?this.subItemType="grade":("grade"===this.currentItemType||"knowledge"===this.currentItemType&&this.treeItemData.children.length)&&(this.subItemType="knowledge"):this.treeItemType===b["a"].centurySkills||this.treeItemType===b["a"].NZKeyCompetencies||this.treeItemType===b["a"].AUGeneralCapabilities?("grade"===this.currentItemType||"knowledge"===this.currentItemType&&this.treeItemData.children.length)&&(this.subItemType="knowledge"):this.treeItemType===b["a"].sdg?"sdg"===this.currentItemType?this.subItemType="sdgList":"sdgList"===this.currentItemType?this.subItemType="sdgKeyword":"sdgKeyword"===this.currentItemType?this.subItemType="sdgIdea":"sdgIdea"===this.currentItemType&&(this.subItemType="sdgIdeaItem"):this.treeItemType===b["a"].assessmentType?"subject"===this.currentItemType?this.subItemType="grade":"grade"===this.currentItemType?this.subItemType="assessmentType":"assessmentType"===this.currentItemType&&this.treeItemData.children.length&&(this.subItemType="knowledge"):this.treeItemType===b["a"].assessmentType?this.treeItemData.children.length?this.subItemType="all21Century":this.subItemType="all21CenturyDescription":this.treeItemType===b["a"].idu&&"grade"===this.currentItemType&&(this.subItemType="knowledge"),"grade"===this.currentItemType&&this.myDefaultGradeId===this.treeItemData.id&&(this.$logger.info("find defaultGradeId",this.myDefaultGradeId,"current grade id",this.treeItemData.id),this.handleExpandTreeItem(this.treeItemData)),l["LibraryEventBus"].$on(M.ContentListItemClick,this.handleContentListItemClick),l["LibraryEventBus"].$on(M.CenturySkillsSelect,this.handleCenturySkillsSelect),l["LibraryEventBus"].$on(M.CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect)},destroyed:function(){l["LibraryEventBus"].$off(M.ContentListItemClick,this.handleContentListItemClick),l["LibraryEventBus"].$off(M.CenturySkillsSelect,this.handleCenturySkillsSelect),l["LibraryEventBus"].$off(M.CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect)},methods:{handleExpandTreeItem:function(e){this.$logger.info("handleExpandTreeItem "+!this.subTreeExpandStatus),this.$logger.info("handleExpandTreeItem deep: "+this.defaultDeep+" treeItemType: "+this.treeItemType+" currentItemType "+this.currentItemType+" treeItemData",e," parent ",this.treeCurrentParent),this.treeItemType===b["a"].learningOutcomes?this.handleExpandCurriculumTreeItem(e):this.treeItemType===b["a"].sync?this.handleExpandSyncDataList(e):this.treeItemType===b["a"].specificSkills?this.handleExpandSpecificSkillTreeItem(e):this.treeItemType===b["a"].centurySkills||this.treeItemType===b["a"].NZKeyCompetencies||this.treeItemType===b["a"].AUGeneralCapabilities?this.handleExpandCenturySkillTreeItem(e):this.treeItemType===b["a"].sdg?this.handleExpandSdgTreeItem(e):this.treeItemType===b["a"].assessmentType?this.handleExpandAssessmentTypeTreeItem(e):this.treeItemType===b["a"].all21Century?this.handleExpandAll21CenturyTypeTreeItem(e):this.treeItemType===b["a"].idu&&this.handleExpandIduTypeTreeItem(e),"knowledge"!==this.currentItemType||this.selectMode!==j["a"].evaluationMode||this.rootType!==b["a"].centurySkills&&this.rootType!==b["a"].NZKeyCompetencies&&this.rootType!==b["a"].AUGeneralCapabilities?this.handleCancel21CenturyClick():this.handle21CenturyClick(e)},handleExpandSyncDataList:function(e){this.$logger.info("handleExpandSyncDataList",e),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:0,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1},handleCollapseTreeItem:function(e){this.$logger.info("handleExpandTreeItem "+!this.subTreeExpandStatus),this.subTreeExpandStatus=!1},handleExpandCurriculumTreeItem:function(e){var t=this;if(this.$logger.info("handleExpandCurriculumTreeItem["+this.currentItemType+"] data ",e," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex});else{if("subject"===this.currentItemType&&(void 0!==e.children&&e.children.length?l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}):(this.subTreeLoading=!0,e.gradeList.length?this.$logger.info("use old gradeList ",e):(e.gradeList=[],this.gradeList.forEach((function(t){t.children=[],t.isGrade=!0,e.gradeList.push(Object.assign({},t)),e.children.push(Object.assign({},t))})),this.$logger.info("add gradeList ",e)),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.gradeList,gradeList:e.gradeList,questionIndex:this.questionIndex})),e.gradeList&&e.gradeList.length?this.subItemType="grade":this.subItemType="subject",this.subTreeLoading=!1,this.subTreeExpandStatus=!0,this.$logger.info("gradeList already add",e)),"grade"===this.currentItemType)if(e.children.length)l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0;else{this.subTreeLoading=!0;var a=e.id,i=this.treeCurrentParent.id;this.$logger.info("knowledgeTree gradeId "+a+" subjectId "+i),N({gradeId:a,subjectId:i}).then((function(a){t.$logger.info("KnowledgeGetTree response",a),a.result.forEach((function(a){a.gradeId=t.treeItemData.name,a.selectedGradeId=e.id,a.selectedGradeName=e.name})),e.children=a.result,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("mainKnowledgeList",e.children)})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})),this.subItemType="knowledge"}"knowledge"===this.currentItemType&&(this.$logger.info("selectMode",this.selectMode),e.children.length&&e.children[0].children.length?(this.$logger.info("select reach knowledge bottom"),this.subTreeLoading=!0,Object(A["KnowledgeQueryContentByDescriptionId"])({descriptionId:this.treeItemData.id}).then((function(a){t.$logger.info("KnowledgeQueryContentByDescriptionId response",a.result),a.result.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,currentTreeData:t.treeItemData,dataType:t.treeItemType,parentTreeData:t.treeCurrentParent,contentList:a.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0}))):(e.gradeId&&e.children.forEach((function(t){t.gradeId=e.gradeId,t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),e.children.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeExpandStatus=!0,this.subItemType="knowledge"))}this.$logger.info("handleExpandCurriculumTreeItem handle finish!")},handleExpandSpecificSkillTreeItem:function(e){var t=this;if(this.$logger.info("handleExpandSpecificSkillTreeItem data ",e," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="subject",this.subTreeLoading=!1,this.hasSubTree=!0;else{if("subject"===this.currentItemType&&(this.subTreeLoading=!0,this.subTreeExpandStatus=!0,e.gradeList.length?this.$logger.info("use old gradeList ",e):(e.gradeList=[],this.gradeList.forEach((function(t){t.children=[],t.isGrade=!0,e.children.push(Object.assign({},t)),e.gradeList.push(Object.assign({},t))})),this.$logger.info("add gradeList ",e)),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,gradeList:e.contentList,contentList:e.gradeList,questionIndex:this.questionIndex}),this.subItemType="grade",this.hasSubTree=!0),"grade"===this.currentItemType)if(e.children.length)this.subTreeLoading=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0;else{this.subTreeLoading=!0;var a=e.id,i=this.treeCurrentParent.id;this.$logger.info("knowledgeTree gradeId "+a+" subjectId "+i),N({gradeId:a,subjectId:i}).then((function(a){t.$logger.info("KnowledgeGetTree response",a),e.children=a.result,a.result.forEach((function(t){t.selectedGradeId=e.id,t.selectedGradeName=e.name})),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("mainKnowledgeList",e.children)})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})),this.subItemType="knowledge"}"knowledge"===this.currentItemType&&(this.$logger.info("selectMode",this.selectMode),void 0!==e.children&&e.children.length?(this.subTreeExpandStatus=!0,e.children.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="knowledge"):(this.$logger.info("select reach knowledge bottom"),this.subTreeLoading=!0,Object(A["KnowledgeQueryContentByDescriptionId"])({descriptionId:this.treeItemData.id}).then((function(a){t.$logger.info("KnowledgeQueryContentByDescriptionId response",a.result),a.result.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:a.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})))),this.subTreeLoading=!1}this.$logger.info("handleExpandCurriculumTreeItem handle finish!")},handleExpandAssessmentTypeTreeItem:function(e){var t=this;if(this.$logger.info("handleExpandAssessmentTypeTreeItem data ",e," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="subject",this.subTreeLoading=!1,this.hasSubTree=!0;else{if("subject"===this.currentItemType&&(this.subTreeLoading=!0,this.subTreeExpandStatus=!0,e.gradeList.length?this.$logger.info("use old gradeList ",e):(e.gradeList=[],this.gradeList.forEach((function(t){t.children=[],t.isGrade=!0,e.children.push(Object.assign({},t)),e.gradeList.push(Object.assign({},t))})),this.$logger.info("add gradeList ",e)),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,gradeList:e.contentList,contentList:e.gradeList,questionIndex:this.questionIndex}),this.subItemType="grade",this.hasSubTree=!0),"grade"===this.currentItemType){if(this.$logger.info("assessmentType grade"),e.children.length)l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0;else{this.subTreeLoading=!0;var a=e.id,i=this.treeCurrentParent.id;this.$logger.info("assessmentType gradeId "+a+" subjectId "+i),Object(A["GetAssessmentTypeList"])({gradeId:a,subjectId:i}).then((function(a){t.$logger.info("assessmentType response",a),a.result.forEach((function(t){t.children=[],t.isAssessmentType=!0,t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),t.$logger.info("assessmentType response.result",a.result),e.children=a.result,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("assessmentType children",e.children)})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0}))}this.subItemType="assessmentType"}if("assessmentType"===this.currentItemType){if(this.$logger.info("assessmentType QueryKnowledgesByAssessmentTypeId",this.selectMode),void 0!==e.children&&e.children.length)this.subTreeExpandStatus=!0,e.children.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex});else{this.$logger.info("assessmentType knowledge bottom"),this.subTreeLoading=!0;var s=this.treeCurrentParent.id;Object(A["QueryKnowledgesByAssessmentTypeId"])({assessmentTypeId:this.treeItemData.id,gradeId:s}).then((function(a){t.$logger.info("QueryKnowledgesByAssessmentTypeId response",a.result),a.result.forEach((function(t){t.children=[],t.isKnowledge=!0,t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:a.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0}))}this.subItemType="knowledge"}"knowledge"===this.currentItemType&&this.$logger.info("assessmentType currentItemType knowledge",e),this.subTreeLoading=!1}this.$logger.info("handleExpandCurriculumTreeItem handle finish!")},handleExpandAll21CenturyTypeTreeItem:function(e){0===this.defaultDeep?(this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="all21Century",this.subTreeLoading=!1,this.hasSubTree=!0):(this.subTreeLoading=!0,this.subTreeExpandStatus=!0,this.treeItemData.children.length&&this.treeItemData.children[0].children.length?(this.subItemType="all21Century",this.hasSubTree=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex})):(this.subItemType="all21CenturyDescription",this.hasSubTree=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.$logger.info("reach description",e)),this.subTreeLoading=!1)},handleExpandIduTypeTreeItem:function(e){var t=this;if(this.$logger.info("handleExpandIduTypeTreeItem defaultDeep = "+this.defaultDeep,e),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="grade",this.subTreeLoading=!1,this.hasSubTree=!0;else{if(this.subTreeLoading=!0,this.subTreeExpandStatus=!0,1===this.defaultDeep&&e.isGrade&&(this.$logger.info("handleExpandIduTypeTreeItem defaultDeep = 1",e),e.children.forEach((function(t){t.selectedGradeName=e.name,t.selectedGradeId=e.id}))),this.treeItemData.children.length)this.subItemType="iduList",this.hasSubTree=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex});else if(e.children.length)this.subItemType="iduList",this.hasSubTree=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex});else{var a=e.id;Object(A["GetIBIduList"])({gradeId:a}).then((function(a){t.$logger.info("GetIBIduList response",a),a.result?(a.result.forEach((function(t){t.selectedGradeName=e.name,t.selectedGradeId=e.id})),e.children=a.result,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("GetIBIduList",e.children),t.subTreeExpandStatus=!0):t.subTreeExpandStatus=!1})).finally((function(){t.subTreeLoading=!1,t.subItemType="iduList"}))}this.subTreeLoading=!1}},handleExpandCenturySkillTreeItem:function(e){var t=this;if(this.subItemType="knowledge",this.$logger.info("handleExpandCenturySkillTreeItem data ",e," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep)this.subTreeExpandStatus=!0,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,gradeList:e.gradeList,contentList:e.gradeList,questionIndex:this.questionIndex}),this.subItemType="grade",this.subTreeLoading=!1,this.hasSubTree=!0;else{if("grade"===this.currentItemType)if(e.children.length)l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0;else{this.subTreeLoading=!0;var a=e.id,i=this.treeCurrentParent.id;this.$logger.info("knowledgeTree gradeId "+a+" subjectId "+i),q({gradeId:a,curriculumId:this.currentCurriculumId}).then((function(a){t.$logger.info("Get21Century response",a),a.result?(a.result.forEach((function(t){t.selectedGradeId=e.id,t.selectedGradeName=e.name})),e.children=a.result,l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.$logger.info("mainKnowledgeList",e.children),t.subTreeExpandStatus=!0):t.subTreeExpandStatus=!1})).finally((function(){t.subTreeLoading=!1})),this.subItemType="knowledge"}"knowledge"===this.currentItemType&&(this.$logger.info("selectMode",this.selectMode),void 0!==e.children&&e.children.length?(this.subTreeExpandStatus=!0,e.children.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,dataType:this.treeItemType,deep:this.defaultDeep,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subItemType="knowledge"):(this.$logger.info("select reach knowledge bottom"),this.subTreeLoading=!0,Object(A["KnowledgeQueryContentByDescriptionId"])({descriptionId:this.treeItemData.id}).then((function(a){t.$logger.info("KnowledgeQueryContentByDescriptionId response",a.result),a.result.forEach((function(t){t.selectedGradeId=e.selectedGradeId,t.selectedGradeName=e.selectedGradeName})),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:a.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})))),this.subTreeLoading=!1}this.$logger.info("handleExpandCurriculumTreeItem handle finish!")},handleExpandSdgTreeItem:function(e){var t=this;this.$logger.info("handleExpandSdgTreeItem data ",e," currentItemType ",this.currentItemType," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep&&(l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeExpandStatus=!0),"sdgList"===this.currentItemType&&(this.$logger.info("init sdg keywords big idea list",e),e.children.length?(l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0):(this.subTreeLoading=!0,Object(O["ScenarioGetKeywordScenarios"])({sdgId:e.id}).then((function(a){if(t.$logger.info("init sdg keywords ScenarioGetKeywordScenarios response",a.result),a.result){var i=[];a.result.sdgKeyWords.forEach((function(e){i.push({id:e.id,name:e.name,children:[]})})),e.children=i,t.$logger.info("init sdg keywords list",e.children),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex}),t.subTreeExpandStatus=!0}else t.subTreeExpandStatus=!1})).finally((function(){t.subTreeLoading=!1})))),"sdgKeyword"===this.currentItemType?(this.$logger.info("init sdg big idea treeItemData",e),e.children.length?(this.$logger.info("sdg children has data",e),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeLoading=!1,this.subTreeExpandStatus=!0):(this.$logger.info("init sdg big idea list",e),this.subTreeLoading=!0,Object(O["QueryBigIdea"])({keywords:e.name}).then((function(a){t.$logger.info("QueryBigIdea response",a.result);var i=[];a.result.forEach((function(e){i.push({id:e,name:e,isBigIdea:!0,children:[]})})),e.children=i,t.$logger.info("sdg bigIdea list",e.children),l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:t.defaultBackgroundColor,deep:t.defaultDeep,dataType:t.treeItemType,currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.children,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0})))):(l["LibraryEventBus"].$emit(M.ContentListUpdate,{backgroundColor:this.defaultBackgroundColor,deep:this.defaultDeep,dataType:this.treeItemType,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex}),this.subTreeExpandStatus=!0)},handleContentListItemClick:function(e){e.dataType===this.treeItemType&&"syncDir"===e.eventType&&e.item.id===this.treeItemData.id&&e.item.name===this.treeItemData.name&&(!e.parent||this.treeCurrentParent&&this.treeCurrentParent.name===e.parent.name)&&(this.$logger.info("handleContentListItemClick start ",e,this.treeItemData,this.treeCurrentParent),this.handleExpandTreeItem(this.treeItemData))},handleCenturySkillsSelect:function(e){this.selected21CenturyItem=e.item},handleCancelCenturySkillsSelect:function(){this.selected21CenturyItem=null},handle21CenturyClick:function(e){this.$logger.info("handle21CenturyClick start ",e),this.selected21CenturyItem===e?l["LibraryEventBus"].$emit(M.CancelCenturySkillsSelect):(this.$logger.info("emit "+M.CenturySkillsSelect,{item:e,parent:this.treeCurrentParent}),l["LibraryEventBus"].$emit(M.CenturySkillsSelect,{item:e,parent:this.treeCurrentParent}))},handleCancel21CenturyClick:function(){this.$logger.info("handleCancel21CenturyClick"),l["LibraryEventBus"].$emit(M.CancelCenturySkillsSelect)},handleClickTreeItem:function(e,t){this.$logger.info("handleClickTreeItem start ",e,t),!1===e?this.handleExpandTreeItem(t):(this.handleCollapseTreeItem(t),l["LibraryEventBus"].$emit(M.ResetContentList))}}},F=R,Q=(a("e03f"),Object(h["a"])(F,_,G,!1,null,"64bb509b",null)),J=Q.exports,V=a("f93e"),Z=a("8ded"),W=a.n(Z),Y=a("9fb0"),z=a("2f62"),H=a("6e84"),X=a("21fb"),ee=a("b3db"),te=ee.GetAllSdgs,ae=a("c418"),ie=ae.SubjectTree,se=a("4fcf"),ne=se.debounce,re={name:"NewTreeNavigation",mixins:[H["a"],X["a"]],components:{NoMoreResources:T["a"],NewTreeItem:J},props:{selectMode:{type:String,default:null},questionIndex:{type:String,default:null},showMenu:{type:Array,default:function(){return[]}},defaultActiveMenu:{type:String,default:null},defaultCurriculumId:{type:String,default:null},onlySubjects:{type:Array,default:function(){return[]}}},data:function(){return{loaded:!1,treeDataList:[],NavigationType:b["a"],sdgList:[],subjectTree:[],gradeList:[],defaultGradeId:null}},watch:{defaultCurriculumId:function(e){this.$logger.info("defaultCurriculumId change "+e),this.loaded=!1,this.treeDataList=[],this.sdgList=[],this.subjectTree=[],this.gradeList=[],this.initData()},onlySubjects:{handler:function(e){this.debounceResetData()}}},computed:Object(B["a"])(Object(B["a"])({},Object(z["e"])({currentSchool:function(e){return e.user.currentSchool},userMode:function(e){return e.app.userMode}})),{},{displayCategoryList:function(){var e=this,t=[];return this.treeDataList.forEach((function(a){-1!==e.showMenu.indexOf(a.type)&&t.push(a.type)})),t}}),created:function(){this.$logger.info("NewTreeNavigation selectMode",this.selectMode),this.initData(),this.debounceResetData=ne(this.resetData,1e3),l["LibraryEventBus"].$on(l["LibraryEvent"].GradeUpdate,this.handleGradeUpdate),l["LibraryEventBus"].$on(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum)},methods:{resetData:function(){this.treeDataList=[],this.sdgList=[],this.subjectTree=[],this.gradeList=[],this.initData()},handleSchoolChange:function(e){this.debounceResetData()},handleModeChange:function(e){this.debounceResetData()},initData:function(){var e=this,t=this.$store.getters.skillCategory;this.$logger.info("NewTreeNavigation skillCategory ",t),this.$logger.info("NewTreeNavigation defaultActiveMenu "+this.defaultActiveMenu);var a={id:"1",expandStatus:!1,type:b["a"].learningOutcomes,name:3===t.length?t[0]:"Curriculum",children:[],parent:null,sort:2,backgroundColor:"#B1D1CC"},i={expandStatus:!1,type:b["a"].sdg,name:"Big ideas",children:[],parent:null,sort:2,backgroundColor:"fade(@primary-color, 10%)"},s={id:"1",expandStatus:!1,type:b["a"].all21Century,name:b["a"].all21Century,children:[],parent:null,sort:2,backgroundColor:"#D7E0E9"},n=[];Promise.all([ie({curriculumId:this.defaultCurriculumId?this.defaultCurriculumId:this.$store.getters.bindCurriculum}),Object(c["a"])({curriculumId:this.defaultCurriculumId?this.defaultCurriculumId:this.$store.getters.bindCurriculum}),te(),Object(A["getAll21Century"])()].concat(n)).then((function(t){if(e.$logger.info("initData done",t),e.$logger.info("GetMyGrades Response ",t[1]),!t[1].code){if(e.gradeList=t[1].result,t[5]&&t[5].success){var n=t[5].result.gradeInfo;e.gradeList=e.gradeList.map((function(e){var t=n.find((function(t){return t.gradeId===e.id}));return t&&t.officialGradeName&&(e.name=t.officialGradeName),e}))}var r={};e.gradeList.forEach((function(e){r[e.centuryName]||(r[e.centuryName]=[]),r[e.centuryName].push(e.name)})),W.a.set(Y["i"],r)}if(e.$logger.info("SubjectTree Response ",t[0]),!t[0].code){e.subjectTree=t[0].result;var d=[];e.onlySubjects&&e.onlySubjects.length>0?d=e.onlySubjects.concat():e.userMode===V["W"].SCHOOL&&e.currentSchool.curriculumId===e.defaultCurriculumId&&t[4]&&t[4].success&&(d=t[4].result.subjectInfo.map((function(e){return e.subjectId}))),d.length>0&&(e.subjectTree=e.subjectTree.map((function(e){return e.children&&e.children.length>0&&(e.children=e.children.filter((function(e){return d.includes(e.id)}))),e})).filter((function(e){return e.children.length>0}))),e.addGradeListProperty(e.subjectTree);var l=JSON.parse(JSON.stringify(e.subjectTree));a.children=l.filter((function(e){return e.subjectType===V["O"].Learn||e.subjectType===V["O"].LearnAndSkill}))}if(e.$logger.info("GetAllSdgs Response ",t[2]),t[2].code||(e.sdgList=t[2].result,e.sdgList.forEach((function(e){e.children=[]})),i.children=e.sdgList),e.$logger.info("getAll21Century Response ",t[3]),!t[3].code){var c=t[3].result;e.addParentObjListProperty(c,null),s.children=c,e.$logger.info("all21CenturyData addParentObjListProperty",s)}})).finally((function(){if(e.treeDataList=[],e.treeDataList.push(a),e.treeDataList.push(i),3===t.length){var n={id:"3",expandStatus:!1,type:b["a"].specificSkills,name:t[1],children:[],parent:null,sort:0,backgroundColor:"#FF978E"},r=JSON.parse(JSON.stringify(e.subjectTree));if(r.forEach((function(t){var a=JSON.parse(JSON.stringify(t));a.subjectType!==V["O"].Skill&&a.subjectType!==V["O"].LearnAndSkill||(a.children=[],a.gradeList=[],e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],a.gradeList.push(JSON.parse(JSON.stringify(e)))})),n.children.push(a))})),e.$store.getters.hiddenIbCurriculumId||e.treeDataList.unshift(n),4===parseInt(e.defaultCurriculumId)||5===parseInt(e.defaultCurriculumId)){var d={id:"6",expandStatus:!1,type:b["a"].idu,name:"Integrated Subject Skill",children:[],gradeList:[],parent:null,sort:1,backgroundColor:"#67C23A"};e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],d.gradeList.push(JSON.parse(JSON.stringify(e))),d.children.push(JSON.parse(JSON.stringify(e)))})),e.$store.getters.hiddenIbCurriculumId||e.treeDataList.push(d)}var l={id:"5",expandStatus:!1,type:b["a"].centurySkills,name:e.$classcipe.get21stCenturyDisplayNameByCurriculum(e.defaultCurriculumId),children:[],gradeList:[],parent:null,sort:2,backgroundColor:"#D7E0E9"};if(e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],l.gradeList.push(Object.assign({},e)),l.children.push(Object.assign({},e))})),e.treeDataList.push(l),2===parseInt(e.defaultCurriculumId)){var c={id:"51",expandStatus:!1,type:b["a"].NZKeyCompetencies,name:"NZ-Key competencies",children:[],gradeList:[],parent:null,backgroundColor:"rgba(83, 196, 28, 0.2)"};e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],c.gradeList.push(JSON.parse(JSON.stringify(e))),c.children.push(JSON.parse(JSON.stringify(e)))})),e.treeDataList.push(c)}if(1===parseInt(e.defaultCurriculumId)){var o={id:"52",expandStatus:!1,type:b["a"].AUGeneralCapabilities,name:"AU-General capabilities",children:[],gradeList:[],parent:null,sort:2,backgroundColor:"rgba(83, 196, 28, 0.2)"};e.gradeList.forEach((function(e){e.isGrade=!0,e.children=[],o.gradeList.push(JSON.parse(JSON.stringify(e))),o.children.push(JSON.parse(JSON.stringify(e)))})),e.treeDataList.push(o)}e.treeDataList.push(s),e.$logger.info("after handle treeDataList",e.treeDataList)}e.treeDataList=e.treeDataList.sort((function(e,t){return e.sort-t.sort})),e.$logger.info("sort treeDataList",e.treeDataList),e.loaded=!0,e.$emit("finishInit")}))},addGradeListProperty:function(e){var t=this;e.forEach((function(e){e.hasOwnProperty("gradeList")||(e.gradeList=[],e.gradeList.forEach((function(t){t.children=[],t.isGrade=!0,e.gradeList.push(JSON.parse(JSON.stringify(t)))}))),t.addGradeListProperty(e.children)}))},addParentObjListProperty:function(e,t){var a=this;e.forEach((function(e){e.hasOwnProperty("parentObj")||(e.parentObj=t,e.children.forEach((function(t){t.parentObj=e}))),a.addParentObjListProperty(e.children,e)}))},handleGradeUpdate:function(e){this.$logger.info("handleGradeUpdate start ",e),this.defaultGradeId=e},handleChangeCurriculum:function(){this.$logger.info("handleChangeCurriculum"),this.defaultGradeId=null}},destroyed:function(){l["LibraryEventBus"].$off(l["LibraryEvent"].GradeUpdate,this.handleGradeUpdate),l["LibraryEventBus"].$off(l["LibraryEvent"].ChangeCurriculum,this.handleChangeCurriculum)}},de=re,le=(a("ce70"),Object(h["a"])(de,x,E,!1,null,"23bfff8e",null)),ce=le.exports,oe=a("d33b4"),ue=a("4fcf"),he=ue.debounce,pe={name:"NewBrowser",components:{NewNavigation:m,NewContentList:$,NewTreeNavigation:ce,ContentTypeIcon:f["a"]},props:{selectMode:{type:String,default:null},displayMode:{type:String,default:"modal"},questionIndex:{type:String,default:null},showMenu:{type:Array,default:function(){return[]}},defaultActiveMenu:{type:String,default:null},recommendData:{type:Array,default:function(){return[]}},selectedIdList:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}},showCurriculum:{type:Boolean,default:!1}},mixins:[oe["a"]],data:function(){return{expandedListFlag:!0,mainTreeContentLeft:200,selectedCurriculumList:[],selectedKnowledgeList:[],selected21CenturySkillList:[],selectedSubjectSpecificSkillList:[],selectedAssessmentList:[],selectedIduList:[],selectedAll21CenturyList:[],selectedBigIdeaList:[],selectedRecommendList:[],selectedRecommendIdList:[],currentCurriculumId:this.$store.getters.bindCurriculum?this.$store.getters.bindCurriculum:"1",defaultCurriculumId:this.$store.getters.bindCurriculum?this.$store.getters.bindCurriculum:"1",curriculumOptions:[],mySelectedIdList:[],mySelectedList:[],isEmptyRecommend:!0,selected21CenturyItem:null,selectedGradeIdSet:new Set,selectModelType:j["a"],tagType:V["S"],myRecommendData:[],currentNavPath:null,componentWidth:0}},computed:{hasSelectedContent:function(){return this.mySelectedList.length||this.selectedCurriculumList.length||this.selectedKnowledgeList.length||this.selected21CenturySkillList.length||this.selectedSubjectSpecificSkillList.length||this.selectedAssessmentList.length||this.selectedIduList.length||this.selectedAll21CenturyList.length||this.selectedBigIdeaList.length||this.selectedRecommendList.length||this.selected21CenturyItem}},watch:{currentCurriculumId:function(e){this.$logger.info("NewBrowser change currentCurriculumId to "+e),this.defaultCurriculumId=e}},created:function(){var e=this;this.$logger.info("NewBrowser selectMode",this.selectMode),this.$logger.info("NewBrowser showMenu",this.showMenu),this.$logger.info("recommendData",this.recommendData),this.$logger.info("selectedIdList",this.selectedIdList),this.$logger.info("selectedList",this.selectedList),this.mySelectedIdList=this.selectedIdList,this.myRecommendData=JSON.parse(JSON.stringify(this.recommendData)),Object(c["e"])().then((function(t){e.$logger.info("getAllCurriculums",t),e.curriculumOptions=t.result,e.$logger.info("getAllCurriculums",e.curriculumOptions)}));var t=[];this.myRecommendData.forEach((function(a){(!a.skillList||a.skillList&&!a.skillList.length)&&(a.skillList=[]),(!a.centuryList||a.centuryList&&!a.centuryList.length)&&(a.centuryList=[]),(!a.knowledgeList||a.knowledgeList&&!a.knowledgeList.length)&&(a.knowledgeList=[]),a.list.forEach((function(e){t.push(e.knowledgeId),e.tagType===V["S"].skill||e.tagType===V["S"].ibSkill||e.tagType===V["S"].idu?a.skillList.push(e):e.tagType===V["S"].century?a.centuryList.push(e):a.knowledgeList.push(e)})),a.list.length>0&&(e.isEmptyRecommend=!1)})),this.mySelectedList=[],this.selectedList.forEach((function(a){-1===t.indexOf(a.knowledgeId)?e.mySelectedList.push(a):(e.selectedRecommendIdList.push(a.knowledgeId),e.selectedRecommendList.push(a))})),this.updateSelectedGradeSet(),this.$logger.info("mySelectedList",this.mySelectedList),this.$logger.info("selectedRecommendList",this.selectedRecommendList),this.$logger.info("selectedRecommendIdList",this.selectedRecommendIdList),l["LibraryEventBus"].$on(l["LibraryEvent"].CenturySkillsSelect,this.handleCenturySkillsSelect),l["LibraryEventBus"].$on(l["LibraryEvent"].CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect)},destroyed:function(){l["LibraryEventBus"].$off(l["LibraryEvent"].CenturySkillsSelect,this.handleCenturySkillsSelect),l["LibraryEventBus"].$off(l["LibraryEvent"].CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect)},mounted:function(){var e=this,t=document.getElementById("new-library");t&&(this.componentWidth=t.getBoundingClientRect().width),window.onresize=he((function(){t&&(e.componentWidth=t.getBoundingClientRect().width)}),300)},methods:{handleCurriculumChange:function(e){this.$logger.info("handleCurriculumChange "+e),this.currentCurriculumId=e,l["LibraryEventBus"].$emit(l["LibraryEvent"].ChangeCurriculum,e)},handleSelectListData:function(e){this.$logger.info("NewBrowser handleSelectListData",e),this.selectedKnowledgeList=e,this.$emit("select-sync",e)},handleSelectCurriculumListData:function(e){this.$logger.info("NewBrowser handleSelectCurriculumListData",e),this.selectedCurriculumList=e,this.$emit("select-curriculum",e),this.updateSelectedGradeSet()},handleSelectSubjectSpecificSkillListData:function(e){this.$logger.info("NewBrowser handleSelectSubjectSpecificSkillListData",e),this.selectedSubjectSpecificSkillList=e,this.$emit("select-subject-specific-skill",e),this.updateSelectedGradeSet()},handleSelect21CenturySkillListData:function(e){this.$logger.info("NewBrowser handleSelect21CenturySkillListData",e),this.selected21CenturySkillList=e,this.$emit("select-century-skill",e),this.updateSelectedGradeSet()},handleSelectAll21CenturyListData:function(e){this.$logger.info("NewBrowser handleSelectAll21CenturyListData",e),this.selectedAll21CenturyList=e,this.$emit("select-all-21-century",e),this.updateSelectedGradeSet()},handleSelectAssessmentType:function(e){this.$logger.info("NewBrowser handleSelectAssessmentType",e),this.selectedAssessmentList=e,this.$emit("select-assessmentType",e),this.updateSelectedGradeSet()},handleSelectIdu:function(e){this.$logger.info("NewBrowser handleSelectIdu",e),this.selectedIduList=e,this.$emit("select-idu",e),this.updateSelectedGradeSet()},handleSelectBigIdeaData:function(e){this.$logger.info("NewBrowser handleSelectBigIdeaData",e),this.selectedBigIdeaList=e,this.$emit("select-big-idea",e),this.updateSelectedGradeSet()},handleRemoveSelected:function(e){this.$logger.info("NewBrowser handleRemoveSelected",e),e.dataType?(this.$refs["contentList"].handleRemoveSelected(e),this.updateSelectedGradeSet()):this.handleRemoveMySelected(e)},handleUpdateSelectedList:function(e){this.$logger.info("NewBrowser handleUpdateSelectedList",e),this.mySelectedList=e,this.updateSelectedGradeSet()},handleAddRecommend:function(e){if(this.$logger.info("NewBrowser handleAddRecommend",e,"this.mySelectedIdList.indexOf(recommendItem.knowledgeId)",this.mySelectedIdList.indexOf(e.knowledgeId)),-1===this.mySelectedIdList.indexOf(e.knowledgeId)){var t=this.selectedRecommendList.findIndex((function(t){return t.knowledgeId===e.knowledgeId})),a=this.selectedRecommendIdList.findIndex((function(t){return t===e.knowledgeId}));-1!==t?(this.selectedRecommendList.splice(t,1),this.selectedRecommendIdList.splice(a,1)):(this.selectedRecommendList.push(e),this.selectedRecommendIdList.push(e.knowledgeId)),this.$emit("select-recommend",this.selectedRecommendList),this.$logger.info("after NewBrowser handleAddRecommend",this.selectedRecommendList,this.selectedRecommendIdList)}this.updateSelectedGradeSet()},handleRemoveMySelected:function(e){this.$logger.info("NewBrowser handleRemoveMySelected",e);var t=this.mySelectedList.findIndex((function(t){return e.knowledgeId===t.knowledgeId}));t>-1&&this.mySelectedList.splice(t,1),this.updateSelectedGradeSet()},handleCancelSelectData:function(){this.$logger.info("NewBrowser handleCancelSelectData"),this.$emit("cancel-select")},handleEnsureSelectData:function(){var e=this;this.$logger.info("NewBrowser handleEnsureSelectData"),this.selectedGradeIdSet.size>1?this.$confirm({title:"Alert",okText:"Yes",cancelText:"Let me double check",content:"You have selected learning objectives from different grades/levels/stages, do you confirm to add them?",onOk:function(){e.$emit("ensure-select")}}):this.$emit("ensure-select")},handleCenturySkillsSelect:function(e){this.$logger.info("NewBrowser handleCenturySkillsSelect",e),this.selected21CenturyItem=e.item},handleCancelCenturySkillsSelect:function(){this.selected21CenturyItem=null},handleRemoveMySelected21Century:function(){l["LibraryEventBus"].$emit(l["LibraryEvent"].CancelCenturySkillsSelect)},updateSelectedGradeSet:function(){var e=this;this.$logger.info("NewBrowser updateSelectedGradeSet",this.mySelectedList,this.selectedCurriculumList,this.selectedKnowledgeList,this.selected21CenturySkillList,this.selectedSubjectSpecificSkillList,this.selectedAssessmentList,this.selectedIduList,this.selectedAll21CenturyList,this.selectedRecommendList,this.selected21CenturyItem),this.selectedGradeIdSet.clear(),this.mySelectedList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedCurriculumList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedKnowledgeList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selected21CenturySkillList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedSubjectSpecificSkillList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedAssessmentList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedIduList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedAll21CenturyList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selectedRecommendList.forEach((function(t){t.gradeId&&e.selectedGradeIdSet.add(t.gradeId),t.knowledgeData&&t.knowledgeData.selectedGradeId&&e.selectedGradeIdSet.add(t.knowledgeData.selectedGradeId)})),this.selected21CenturyItem&&this.selected21CenturyItem.gradeId&&this.selectedGradeIdSet.add(this.selected21CenturyItem.gradeId),this.$logger.info("------- this.selectedGradeIdSet",this.selectedGradeIdSet)},handleUpdateCurrentNavPath:function(e){this.$logger.info("NewBrowser handleUpdateCurrentNavPath",e),this.currentNavPath=e},displayContentList:function(e){var t=Object(n["a"])(this.mySelectedList);return this.selectedCurriculumList.length&&t.push.apply(t,Object(n["a"])(this.selectedCurriculumList)),this.selectedSubjectSpecificSkillList.length&&t.push.apply(t,Object(n["a"])(this.selectedSubjectSpecificSkillList)),this.selectedAssessmentList.length&&t.push.apply(t,Object(n["a"])(this.selectedAssessmentList)),this.selected21CenturySkillList.length&&t.push.apply(t,Object(n["a"])(this.selected21CenturySkillList)),this.selectedBigIdeaList.length&&t.push.apply(t,Object(n["a"])(this.selectedBigIdeaList)),this.selectedAll21CenturyList.length&&t.push.apply(t,Object(n["a"])(this.selectedAll21CenturyList)),this.selectedKnowledgeList.length&&t.push.apply(t,Object(n["a"])(this.selectedKnowledgeList)),this.selectedIduList.length&&t.push.apply(t,Object(n["a"])(this.selectedIduList)),t.forEach((function(e){e.tagType=e.tagType=e.tagType||e.item&&e.item.tagType||e.knowledgeData&&e.knowledgeData.tagType})),e===V["S"].skill?t.filter((function(e){return e.tagType===V["S"].skill||e.tagType===V["S"].ibSkill||e.tagType===V["S"].idu})):e===V["S"].century?t.filter((function(e){return e.tagType===V["S"].century||e.tagType===V["S"].common})):t.filter((function(t){return t.tagType===e}))}}},me=pe,ye=(a("5d2d"),Object(h["a"])(me,i,s,!1,null,"4954b1da",null));t["a"]=ye.exports},4165:function(e,t,a){e.exports=a.p+"img/delete.27f7fefc.png"},4180:function(e,t,a){},"489c":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var i={knowledgeDescription:"knowledgeDescription",syncData:"syncData",evaluationMode:"evaluationMode"}},"49de":function(e,t,a){"use strict";a.r(t),a.d(t,"materialAPIUrl",(function(){return s})),a.d(t,"MaterialAddOrUpdate",(function(){return n})),a.d(t,"MaterialQueryById",(function(){return r})),a.d(t,"MaterialDelete",(function(){return d})),a.d(t,"MaterialDeleteBatch",(function(){return l})),a.d(t,"MaterialList",(function(){return c})),a.d(t,"YoutubeQueryByKeywords",(function(){return o})),a.d(t,"FileRecord",(function(){return u})),a.d(t,"addFileUploadRecord",(function(){return h}));var i=a("b775"),s={MaterialAddOrUpdate:"/classcipe/api/material/addOrUpdate",MaterialQueryById:"/classcipe/api/material/queryById",MaterialDelete:"/classcipe/api/material/delete",MaterialDeleteBatch:"/classcipe/api/material/deleteBatch",MaterialList:"/classcipe/api/material/list",YoutubeQueryByKeywords:"/classcipe/api/youtube/queryByKeywords",FileRecord:"/classcipe/api/fileUploadRecord/list",addFileUploadRecord:"/classcipe/api/fileUploadRecord/add"};function n(e){return Object(i["d"])({url:s.MaterialAddOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(i["d"])({url:s.MaterialQueryById,method:"get",params:e})}function d(e){return Object(i["d"])({url:s.MaterialDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["d"])({url:s.MaterialDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["d"])({url:s.MaterialList,method:"get",params:e})}function o(e){return Object(i["d"])({url:s.YoutubeQueryByKeywords,method:"get",params:e})}function u(e){return Object(i["d"])({url:s.FileRecord,method:"get",params:e})}function h(e){return Object(i["d"])({url:s.addFileUploadRecord,method:"post",data:e})}},"4c90":function(e,t,a){},"5d2d":function(e,t,a){"use strict";a("a27ed")},"64f9":function(e,t,a){e.exports=a.p+"img/empty.9505e7ad.png"},"6e84":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("b0c0");var i={data:function(){return{unwatch:null,routeName:this.$route.name}},computed:{redirectUrl:function(){return"student"===this.$store.state.user.currentRole?"/student/main/my-task":"/account/info"}},created:function(){var e=this;this.unwatch=this.$store.watch((function(e){return e.app.userMode}),(function(t){t&&e.$route.name===e.routeName&&(e.handleModeChange(t),e.routeInMode())})),this.routeInMode()},beforeDestroy:function(){this.unwatch&&this.unwatch()},methods:{routeInMode:function(){this.$route.meta.mode&&this.$route.meta.mode!==this.$store.state.app.userMode&&this.$router.push({path:this.redirectUrl})},handleModeChange:function(e){}}}},"770f":function(e,t,a){},"7d7a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"material-preview"},[e.loading?[a("a-skeleton",{attrs:{active:""}})]:[a("a-row",{staticClass:"top-header",attrs:{gutter:[16,24]}},[a("a-col",{attrs:{span:"24"}},[a("span",{staticClass:"title"},[e._v(" "+e._s(e.materialData.name)+" ")]),e.lastChangeSavedTime?[a("a-divider",{attrs:{type:"vertical"}}),a("span",{staticClass:"last-change-time"},[e._v(" "+e._s(e.$t("teacher.material.last-change-saved-at-time",{time:e.lastChangeSavedTime}))+" ")])]:e._e()],2)],1),a("a-row",{staticClass:"top-info",attrs:{gutter:[16,24]}},[a("a-col",{staticClass:"left-preview",attrs:{span:"9"}},[a("a-carousel",{attrs:{arrows:""}},[a("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"10px","z-index":"1"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[a("a-icon",{attrs:{type:"left-circle"}})],1),a("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"10px"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[a("a-icon",{attrs:{type:"right-circle"}})],1),e.loading||e.imgList.length?e._e():a("div",{staticClass:"no-preview-img"},[a("a-empty")],1),e._l(e.imgList,(function(e,t){return a("div",{key:t,staticClass:"preview-img-item"},[a("div",{staticClass:"preview-block",style:{backgroundImage:"url("+e+")"},attrs:{"data-img":e}})])}))],2),a("div",{staticClass:"edit-action"},[a("a-button",{attrs:{type:"primary"}},[a("router-link",{attrs:{to:"/teacher/add-material/"+e.materialId}},[e._v(e._s(e.$t("teacher.material-preview.edit")))])],1)],1)],1),a("a-col",{staticClass:"right-detail",attrs:{span:"15"}},[a("div",{staticClass:"detail-wrapper"},[a("div",{staticClass:"detail-block"},[a("div",{staticClass:"block-title"},[e._v(" "+e._s(e.materialData.overview&&e.materialData.overview)+" "),a("span",{staticClass:"title-icon"},[a("a-tooltip",[a("template",{slot:"title"},[e._v(" "+e._s(e.$t("teacher.material.overview"))+" ")]),a("a-icon",{attrs:{type:"info-circle"}})],2)],1)])]),a("div",{staticClass:"detail-block material-detail"},[e.materialData&&e.materialData.files?a("div",{staticClass:"block-content"},e._l(e.materialData.files,(function(t,i){return a("div",{key:i,staticClass:"material-item"},[a("div",{staticClass:"material-item-content-wrapper"},[a("div",{staticClass:"material-item-content"},[t.fileType===e.fileTypeMap.txt?[a("div",{staticClass:"material-text-content",domProps:{innerHTML:e._s(t.description)}})]:e._e(),t.fileType===e.fileTypeMap.img?[a("div",{staticClass:"material-image-content"},[t&&t.fileUrl?a("img",{attrs:{src:t.fileUrl,alt:""}}):e._e()])]:e._e(),t.fileType===e.fileTypeMap.audio?[a("div",{staticClass:"material-audio-content",attrs:{"data-url":t.fileUrl}},[a("audio",{directives:[{name:"show",rawName:"v-show",value:t&&t.fileUrl,expression:"materialItem && materialItem.fileUrl"}],attrs:{src:t.fileUrl,controls:""}})])]:e._e(),t.fileType===e.fileTypeMap.video?[a("div",{staticClass:"material-video-content",attrs:{"data-url":t.fileUrl}},[a("video",{directives:[{name:"show",rawName:"v-show",value:t&&t.fileUrl,expression:"materialItem && materialItem.fileUrl"}],attrs:{src:t.fileUrl,controls:""}})])]:e._e(),t.fileType===e.fileTypeMap.link?[a("div",{staticClass:"material-embed-content",attrs:{"data-url":t.fileUrl}},[a("span",{staticClass:"iframe-url"},[e._v(" "+e._s(t.fileUrl)+" ")])])]:e._e()],2)])])})),0):e._e()])])])],1),e.showAssociate?a("a-divider"):e._e(),e.showAssociate?a("material-associate-preview",{attrs:{"material-id":e.materialId}}):e._e()]],2)},s=[],n=(a("d3b7"),a("159b"),a("823b")),r=a("3f76"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unit-plan-sub-preview"},[e.loading?[a("a-skeleton",{attrs:{active:""}})]:[a("a-row",{staticClass:"bottom-relative",attrs:{gutter:[16,32]}},[a("a-col",{attrs:{span:"16"}},[a("a-space",[a("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.material?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.material)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.material"))+" ")]),a("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.task?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.task)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.task"))+" ")]),a("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.lesson?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.lesson)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.lesson"))+" ")]),a("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.evaluation?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.evaluation)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.evaluation"))+" ")])],1)],1),a("a-col",{attrs:{span:"8"}},[a("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.handleUserTypeChange},model:{value:e.activeUserType,callback:function(t){e.activeUserType=t},expression:"activeUserType"}},[a("a-radio-button",{staticClass:"left-button",attrs:{value:"owner"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-owner"))+" ")]),a("a-radio-button",{staticClass:"right-button",attrs:{value:"others"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-others"))+" ")])],1)],1)],1),a("a-row",[a("a-col",[a("div",{staticClass:"associate-info"},e._l(e.currentAssociateList,(function(t,i){return a("div",{key:i,staticClass:"associate-block-list"},[t.type===e.activeContentType&&t.datas?e._l(t.datas,(function(i,s){return a("div",{key:s,staticClass:"associate-block-item"},[i.question?a("div",{staticClass:"block-title",on:{click:function(a){return e.handleClickTitle(t)}}},[e._v(" "+e._s(i.question.name)+" ")]):e._e(),i.lists?a("div",{staticClass:"block-content-list"},e._l(i.lists,(function(i,s){return a("div",{key:s,staticClass:"block-content-item"},[a("a-row",[a("a-col",{staticClass:"block-content",attrs:{span:"14"},on:{click:function(t){return e.handleSubPreview(i)}}},[a("content-type-icon",{attrs:{type:t.type}}),a("span",{staticClass:"content-txt"},[e._v(" "+e._s(i.name)+" ")])],1),a("a-col",{staticClass:"block-last-change-time",attrs:{span:"6"}},[e._v(" "+e._s(e._f("moment")(i.updateTime))+" ")]),a("a-col",{staticClass:"favorite",attrs:{span:"2"},on:{click:function(t){return e.handleFavorite(i)}}},[a("span",{class:{"favorite-active":i.isFavorite}},[a("a-icon",{attrs:{type:"star",theme:i.isFavorite?"filled":"outlined"}}),i.isFavorite?[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.favorite"))+" ")]:e._e()],2)]),a("a-col",{staticClass:"action-item",attrs:{span:"2"}},[a("a",{on:{click:function(a){return e.handleEditItem(t.type,i)}}},[e._v(e._s(e.$t("teacher.unit-plan-preview.edit")))])])],1)],1)})),0):e._e()])})):e._e()],2)})),0)])],1),a("a-row"),a("a-drawer",{attrs:{destroyOnClose:"",placement:"right",closable:"",width:"800px",visible:e.subPreviewVisible},on:{close:e.handleSubPreviewClose}},[a("div",{staticClass:"preview-wrapper"},[a("div",{staticClass:"preview-detail"},[e.previewType===e.typeMap["unit-plan"]?a("unit-plan-preview",{attrs:{"unit-plan-id":e.materialId,"show-associate":!1}}):e._e()],1)])])]],2)},l=[],c=(a("3ca3"),a("ddb0"),a("8f46")),o=a("95c6"),u=o.FavoritesAdd,h=a("9afb"),p=h.GetAssociate,m={name:"MaterialAssociatePreview",props:{materialId:{type:String,default:null}},components:{ContentTypeIcon:c["a"],MaterialPreview:function(){return Promise.resolve().then(a.bind(null,"7d7a"))}},data:function(){return{loading:!0,associateData:null,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:r["e"].material,activeUserType:"owner",currentAssociateList:[],typeMap:r["e"],previewType:"",subPreviewVisible:!1}},created:function(){n["info"]("Material Associate Preview materialId "+this.materialId),this.loadMaterialAssociateData()},methods:{loadMaterialAssociateData:function(){var e=this;n["info"]("loadMaterialAssociateData "+this.materialId),this.loading=!0,p({id:this.materialId,type:r["e"].material}).then((function(t){n["info"]("GetAssociate ",t),e.associateData=t.result,e.currentAssociateList=e.associateData[e.activeUserType]})).then((function(){n["info"]("get favorite "+e.materialId)})).finally((function(){e.loading=!1}))},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1,this.previewType=null},handleUserTypeChange:function(e){n["info"]("handleUserTypeChange "+this.activeUserType),this.currentAssociateList=this.associateData[this.activeUserType],n["info"]("currentAssociateList",this.currentAssociateList)},handleClickTitle:function(e){n["info"]("handleClickTitle",e),this.previewType=r["e"].material,this.subPreviewVisible=!0},handleSubPreview:function(e,t){n["info"]("handleSubPreview",e,t),this.previewType=r["e"].material,this.subPreviewVisible=!0},handleFavorite:function(e){n["info"]("handleFavorite",e),u({sourceId:e.id,sourceType:e.type}).then((function(t){n["info"]("FavoritesAdd ",t),e.isFavorite=!e.isFavorite}))},handleEditItem:function(e,t){n["info"]("handleEditItem",e,t),this.$message.success("Edit Item")}}},y=m,g=(a("d066d"),a("0c7c")),f=Object(g["a"])(y,d,l,!1,null,"be5361ee",null),I=f.exports,C=a("7aef"),v=a("ca00"),b=v.formatLocalUTC,T=a("49de"),L=T.MaterialQueryById,w={name:"MaterialPreview",props:{materialId:{type:String,default:null},showAssociate:{type:Boolean,default:!1}},components:{MaterialAssociatePreview:I},computed:{lastChangeSavedTime:function(){if(this.materialData){n["info"]("lastChangeSavedTime materialData",this.materialData);var e=this.materialData.createTime||this.materialData.updateTime;if(e)return b(e)}return""}},mounted:function(){},data:function(){return{loading:!0,materialData:null,associateData:null,imgList:[],tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:-1,typeMap:r["e"],fileTypeMap:C["a"],subPreviewVisible:!1}},created:function(){n["info"]("MaterialPreview materialId "+this.materialId),this.loadMaterialData()},methods:{loadMaterialData:function(){var e=this;n["info"]("loadMaterialData "+this.materialId),this.loading=!0,L({id:this.materialId}).then((function(t){n["info"]("MaterialQueryById "+e.materialId,t.result),e.materialData=t.result,e.materialData&&e.materialData.files&&e.materialData.files.forEach((function(t){t.fileType===C["a"].img&&e.imgList.push(t.fileUrl)}))})).finally((function(){e.loading=!1}))},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1}}},S=w,k=(a("1d6d"),Object(g["a"])(S,i,s,!1,null,"0c94def8",null));t["default"]=k.exports},"8d23":function(e,t,a){},"8e47":function(e,t,a){"use strict";a("8d23")},"977d":function(e,t,a){},"97f2":function(e,t,a){"use strict";a("073c")},"9c74":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAASCAYAAAA6yNxSAAAABHNCSVQICAgIfAhkiAAAAdBJREFUSEtjZMABRJQC1ZiZGRoYGRhcGRgYRXCpwy/+/81/Bobd////r311Z8NdbGqB5mMCEeUAY2ZGxn2MjIx85FmMquv/f4aP/xgYHV/fWXse3TysDpBQCTrNwMhgQg3L4Wb8Zzjz4s46U8IOkAnllOD8+42qlgMNA0bDf+Zvf3iePduMYjZGCEhJ+XL95WL5Agx+rKFDicNefGfmYniy+juyGYMwCoDOE1UKtGFmZjxMiW/R9f77x2Dz6u66o4TTAFSFuEpQATAS+qnhCGAuKHx5Z90EorMhTKG4SmAHMCmUU+IIYNrrfHlnfQUuMwgmNAnVwAXAgiiePEf8X/ji9voEfHoJOoCBwZhVXFV+G1ChCymOAJaAe17efujFwHD2N4UOYGAQUvHkY2XgOAKMDl1iHAEM9su/GX7YvLuz/RMh9USEAMQIYTUfaZb/bCeBGqTxGQr0+dM/jL/M397a8pSQ5SB5oh0AUiyu5K/LwMQECgkcdQSw8vn7z+nlvY2XibGcZAeANEgoBzkyMP7fwsDIyIViyf//3/79Z3TDltcpTgPoBkio+GsxMDLNBAagDUgOmM+P/vnDmPL2wdobxPocpo6kKCDVcGLUD7gDANqtjBOzoMc+AAAAAElFTkSuQmCC"},"9f4c":function(e,t,a){"use strict";a("4c90")},a02e:function(e,t,a){"use strict";a.r(t),a.d(t,"LibraryEventBus",(function(){return s})),a.d(t,"LibraryEvent",(function(){return n}));var i=a("2b0e"),s=new i["default"],n={ChangeCurriculum:"ChangeCurriculum",ResetContentList:"ResetContentList",ContentListUpdate:"ContentListUpdate",ContentListItemClick:"ContentListItemClick",ContentListSelectClick:"ContentListSelectClick",ContentListSelectedListUpdate:"ContentListSelectedListUpdate",GradeUpdate:"GradeUpdate",CenturySkillsSelect:"CenturySkillsSelect",CancelCenturySkillsSelect:"CancelCenturySkillsSelect"}},a27ed:function(e,t,a){},ab44:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var i={learningOutcomes:"learningOutcomes",specificSkills:"specificSkills",centurySkills:"centurySkills",NZKeyCompetencies:"NZ-Key competencies",AUGeneralCapabilities:"AU-General capabilities",sdg:"sdg",assessmentType:"assessmentType",sync:"sync",all21Century:"21st century skills",idu:"idu"}},b3db:function(e,t,a){"use strict";a.r(t),a.d(t,"scenarioAPIUrl",(function(){return s})),a.d(t,"GetAllSdgs",(function(){return n})),a.d(t,"ScenarioSearch",(function(){return r})),a.d(t,"ScenarioAddOrUpdate",(function(){return d})),a.d(t,"ScenarioQueryById",(function(){return l})),a.d(t,"ScenarioDelete",(function(){return c})),a.d(t,"ScenarioDeleteBatch",(function(){return o})),a.d(t,"ScenarioList",(function(){return u})),a.d(t,"ScenarioGetKeywordScenarios",(function(){return h})),a.d(t,"ScenarioQueryContentByScenarioId",(function(){return p})),a.d(t,"QueryBigIdea",(function(){return m})),a.d(t,"QueryContentByBigIdea",(function(){return y})),a.d(t,"QueryTagsBySubjectIds",(function(){return g}));var i=a("b775"),s={GetAllSdgs:"/classcipe/api/scenario/getAllSdgs",ScenarioSearch:"/classcipe/api/scenario/search",ScenarioSearchKey:"/classcipe/api/scenario/searchKey",ScenarioAddOrUpdate:"/classcipe/api/scenario/addOrUpdate",ScenarioQueryById:"/classcipe/api/scenario/queryById",ScenarioDelete:"/classcipe/api/scenario/delete",ScenarioDeleteBatch:"/classcipe/api/scenario/deleteBatch",ScenarioList:"/classcipe/api/scenario/list",ScenarioGetKeywordScenarios:"/classcipe/api/scenario/getKeywordScenarios",ScenarioQueryContentByScenarioId:"/classcipe/api/scenario/queryContentByScenarioId",QueryBigIdea:"/classcipe/api/scenario/queryBigIdea",QueryContentByBigIdea:"/classcipe/api/scenario/queryContentByBigIdea",QueryTagsBySubjectIds:"/classcipe/api/scenario/queryTagsBySubjectIds"};function n(){return Object(i["d"])({url:s.GetAllSdgs,method:"get"})}function r(e){return Object(i["d"])({url:s.ScenarioSearch,method:"get",params:e})}function d(e){return Object(i["d"])({url:s.ScenarioAddOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["d"])({url:s.ScenarioQueryById,method:"get",params:e})}function c(e){return Object(i["d"])({url:s.ScenarioDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(i["d"])({url:s.ScenarioDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(i["d"])({url:s.ScenarioList,method:"get",params:e})}function h(e){return Object(i["d"])({url:s.ScenarioGetKeywordScenarios,method:"get",params:e})}function p(e){return Object(i["d"])({url:s.ScenarioQueryContentByScenarioId,method:"get",params:e})}function m(e){return Object(i["d"])({url:s.QueryBigIdea,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(e){return Object(i["d"])({url:s.QueryContentByBigIdea,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(i["d"])({url:s.QueryTagsBySubjectIds,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},c418:function(e,t,a){"use strict";a.r(t),a.d(t,"subjectAPIUrl",(function(){return s})),a.d(t,"SubjectTree",(function(){return n})),a.d(t,"SubjectAddOrUpdate",(function(){return r})),a.d(t,"SubjectQueryById",(function(){return d})),a.d(t,"SubjectDelete",(function(){return l})),a.d(t,"SubjectDeleteBatch",(function(){return c})),a.d(t,"SubjectList",(function(){return o})),a.d(t,"SubjectStudentList",(function(){return u}));var i=a("b775"),s={SubjectTree:"/classcipe/api/subject/tree",SubjectAddOrUpdate:"/classcipe/api/subject/addOrUpdate",SubjectQueryById:"/classcipe/api/subject/queryById",SubjectDelete:"/classcipe/api/subject/delete",SubjectDeleteBatch:"/classcipe/api/subject/deleteBatch",SubjectList:"/classcipe/api/subject/list",SubjectStudentList:"/classcipe/api/subject/getStudentSubjects"};function n(e){return Object(i["d"])({url:s.SubjectTree,method:"get",params:e})}function r(e){return Object(i["d"])({url:s.SubjectAddOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(i["d"])({url:s.SubjectQueryById,method:"get",params:e})}function l(e){return Object(i["d"])({url:s.SubjectDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["d"])({url:s.SubjectDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(i["d"])({url:s.SubjectList,method:"get",params:e})}function u(e){return Object(i["d"])({url:s.SubjectStudentList,method:"get",params:e})}},ce70:function(e,t,a){"use strict";a("770f")},d066d:function(e,t,a){"use strict";a("fcd7")},d33b4:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a("4de4"),a("b0c0");var i=a("823b"),s=a("3f76"),n=a("c1df"),r=a.n(n),d={data:function(){return{type2Name:{1:"Topic",2:"Unit Plan",3:"Material",4:"Task",5:"Lesson",6:"Evaluation"},browserDataType:{bigIdea:"bigIdea",sync:"sync",curriculum:"curriculum",subjectSpecificSkill:"subjectSpecificSkill",centurySkill:"centurySkill",all21Century:"all21Century",assessmentType:"assessmentType",idu:"idu"}}},created:function(){},computed:{getWeek:function(){if(2===this.rangeDate.length){var e="",t=Math.abs(parseInt(this.rangeDate[0].diff(this.rangeDate[1],"days")/7)),a=Math.abs(this.rangeDate[0].diff(this.rangeDate[1],"days"))%7;return t>0&&(e+=t>1?t+" weeks ":t+" week "),a>0&&(e+=a>1?a+" days ":a+" day "),e}return""}},methods:{tagIsExist:function(e,t){return t.filter((function(t){return t.toLowerCase()===e.toLowerCase()})).length>0},tagNameIsExist:function(e,t){return t.filter((function(t){return t.name.toLowerCase()===e.toLowerCase()})).length>0},handleOpenItem:function(e){e.type=this.type,i["info"]("handleEditItem",e),e.type===s["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+e.id,"_blank"):e.type===s["e"].task?window.open("/teacher/task-redirect/"+e.id,"_blank"):e.type===s["e"].pd?window.open("/teacher/pd-content-redirect/"+e.id,"_blank"):e.type===s["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+e.id,"_blank")},handleLocationItem:function(e){i["info"]("handleEditItem",e),e.type===s["e"]["unit-plan"]?window.location.href="/teacher/unit-plan-redirect/"+e.id:e.type===s["e"].task?window.location.href="/teacher/task-redirect/"+e.id:e.type===s["e"].pd?window.location.href="/teacher/pd-content-redirect/"+e.id:e.type===s["e"].evaluation&&(window.location.href="/teacher/evaluation-redirect/"+e.id)},getWeekByDate:function(e,t){if(this.$logger.info("getWeekByDate",e,t),e&&t){var a="",i=r()(t).diff(r()(e),"days");this.$logger.info("diffDays",i);var s=Math.floor(Math.abs(i/7)),n=Math.ceil(Math.abs(i%7));return s>0&&(a+=s>1?s+" weeks ":s+" week "),n>0&&(a+=n>1?n+" days ":n+" day "),this.$logger.info("getWeekByDate str",a),a}return""}}}},db6a:function(e,t,a){"use strict";a.r(t),a.d(t,"knowledgeAPIUrl",(function(){return s})),a.d(t,"KnowledgeGetTree",(function(){return n})),a.d(t,"KnowledgeAddOrUpdateTag",(function(){return r})),a.d(t,"KnowledgeAddOrUpdate",(function(){return d})),a.d(t,"KnowledgeQueryById",(function(){return l})),a.d(t,"KnowledgeQueryTagsByKnowledgeId",(function(){return c})),a.d(t,"KnowledgeDelete",(function(){return o})),a.d(t,"KnowledgeDeleteBatch",(function(){return u})),a.d(t,"KnowledgeList",(function(){return h})),a.d(t,"KnowledgeSearch",(function(){return p})),a.d(t,"KnowledgeQueryContentByDescriptionId",(function(){return m})),a.d(t,"GetAssessmentTypeList",(function(){return y})),a.d(t,"QueryContentByAssessmentTypeId",(function(){return g})),a.d(t,"QueryKnowledgesByAssessmentTypeId",(function(){return f})),a.d(t,"Get21Century",(function(){return I})),a.d(t,"getAll21Century",(function(){return C})),a.d(t,"GetIBIduList",(function(){return v})),a.d(t,"SearchKnowledge",(function(){return b})),a.d(t,"FindRecommendByKnowledgeId",(function(){return T}));var i=a("b775"),s={KnowledgeGetTree:"/classcipe/api/knowledge/getTree",KnowledgeAddOrUpdate:"/classcipe/api/knowledge/addOrUpdate",KnowledgeAddOrUpdateTag:"/classcipe/api/knowledge/addOrUpdateTag",KnowledgeQueryById:"/classcipe/api/knowledge/queryById",KnowledgeQueryTagsByKnowledgeId:"/classcipe/api/knowledge/queryTagsByKnowledgeId",FindRecommendByKnowledgeId:"/classcipe/api/knowledge/findRecommendByKnowledgeId",KnowledgeDelete:"/classcipe/api/knowledge/delete",KnowledgeDeleteBatch:"/classcipe/api/knowledge/deleteBatch",KnowledgeList:"/classcipe/api/knowledge/list",KnowledgeSearch:"/classcipe/api/knowledge/search",KnowledgeQueryContentByDescriptionId:"/classcipe/api/knowledge/queryContentByDescriptionId",GetAssessmentTypeList:"/classcipe/api/knowledgeAssessmentType/getAssessmentTypeList",QueryContentByAssessmentTypeId:"/classcipe/api/knowledgeAssessmentType/queryContentByAssessmentTypeId",QueryKnowledgesByAssessmentTypeId:"/classcipe/api/knowledgeAssessmentType/queryKnowledgesByAssessmentTypeId",Get21Century:"/classcipe/api/knowledge/get21Century",getAll21Century:"/classcipe/api/knowledge/getAll21Century",GetIBIduList:"/classcipe/api/knowledge/getIBIduList",SearchKnowledge:"/classcipe/api/knowledge/searchKnowledge"};function n(e){return Object(i["d"])({url:s.KnowledgeGetTree,method:"get",params:e})}function r(e){return Object(i["d"])({url:s.KnowledgeAddOrUpdateTag,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(i["d"])({url:s.KnowledgeAddOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["d"])({url:s.KnowledgeQueryById,method:"get",params:e})}function c(e){return Object(i["d"])({url:s.KnowledgeQueryTagsByKnowledgeId,method:"get",params:e})}function o(e){return Object(i["d"])({url:s.KnowledgeDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(i["d"])({url:s.KnowledgeDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(e){return Object(i["d"])({url:s.KnowledgeList,method:"get",params:e})}function p(e){return Object(i["d"])({url:s.KnowledgeSearch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(i["d"])({url:s.KnowledgeQueryContentByDescriptionId,method:"get",params:e})}function y(e){return Object(i["d"])({url:s.GetAssessmentTypeList,method:"get",params:e})}function g(e){return Object(i["d"])({url:s.QueryContentByAssessmentTypeId,method:"get",params:e})}function f(e){return Object(i["d"])({url:s.QueryKnowledgesByAssessmentTypeId,method:"get",params:e})}function I(e){return Object(i["d"])({url:s.Get21Century,method:"get",params:e})}function C(e){return Object(i["d"])({url:s.getAll21Century,method:"get",params:e})}function v(e){return Object(i["d"])({url:s.GetIBIduList,method:"get",params:e})}function b(e){return Object(i["d"])({url:s.SearchKnowledge,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function T(e){return Object(i["d"])({url:s.FindRecommendByKnowledgeId,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},e03f:function(e,t,a){"use strict";a("977d")},ea23:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unit-plan-preview"},[e.loading?[a("a-skeleton",{attrs:{active:""}})]:[a("a-row",{staticClass:"top-header",attrs:{gutter:[16,24]}},[a("a-col",{attrs:{span:"24"}},[a("span",{staticClass:"title"},[e._v(" "+e._s(e.unitPlanData.name)+" ")]),e.lastChangeSavedTime?[a("a-divider",{attrs:{type:"vertical"}}),a("span",{staticClass:"last-change-time"},[e._v(" "+e._s(e.$t("teacher.add-unit-plan.last-change-saved-at-time",{time:e.lastChangeSavedTime}))+" ")])]:e._e()],2)],1),a("a-row",{staticClass:"action-header"},[a("a-col",{staticClass:"action-header-toggle",attrs:{span:"24"}},[a("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.handleViewModeChange},model:{value:e.viewMode,callback:function(t){e.viewMode=t},expression:"viewMode"}},[a("a-radio-button",{staticClass:"left-button",attrs:{value:"Detail"}},[e._v(" Detail ")]),a("a-radio-button",{staticClass:"right-button",attrs:{value:"Preview"}},[e._v(" Preview ")])],1),a("div",{staticClass:"edit-item"},[a("a-button",{attrs:{type:"primary"}},[a("router-link",{attrs:{to:"/teacher/unit-plan-redirect/"+e.unitPlanId}},[e._v(e._s(e.$t("teacher.unit-plan-preview.edit")))])],1)],1)],1)],1),a("a-row",{directives:[{name:"show",rawName:"v-show",value:"Preview"===e.viewMode,expression:"viewMode === 'Preview'"}],staticClass:"top-info",attrs:{gutter:[16,24]}},[a("a-col",{staticClass:"left-preview",attrs:{span:"24"}},[a("a-carousel",{attrs:{arrows:""}},[a("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"10px","z-index":"1"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[a("a-icon",{attrs:{type:"left-circle"}})],1),a("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"10px"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[a("a-icon",{attrs:{type:"right-circle"}})],1),e.loading||e.imgList.length?e._e():a("div",{staticClass:"no-preview-img"},[a("a-empty")],1),e._l(e.imgList,(function(e,t){return a("div",{key:t,staticClass:"preview-img-item"},[a("div",{staticClass:"preview-block",style:{backgroundImage:"url('"+e+"')"},attrs:{"data-img":e}})])}))],2)],1)],1),a("a-row",{directives:[{name:"show",rawName:"v-show",value:"Detail"===e.viewMode,expression:"viewMode === 'Detail'"}],staticClass:"top-info",attrs:{gutter:[16,24]}},[a("a-col",{staticClass:"right-detail",attrs:{span:"24"}},[a("div",{staticClass:"detail-wrapper"},[a("div",{staticClass:"detail-block"},[a("div",{staticClass:"block-title"},[e._v(" "+e._s(e.unitPlanData.scenario&&e.unitPlanData.scenario.description)+" "),a("span",{staticClass:"title-icon"},[a("a-tooltip",[a("template",{slot:"title"},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.scenario-description"))+" ")]),a("a-icon",{attrs:{type:"info-circle"}})],2)],1)]),a("div",{staticClass:"block-content"},[e.unitPlanData.scenario&&e.unitPlanData.scenario.sdgKeyWords?a("div",{staticClass:"content-list"},e._l(e.unitPlanData.scenario.sdgKeyWords,(function(t,i){return a("div",{key:i,staticClass:"content-item"},[a("div",{staticClass:"question"},[e._v(" "+e._s(i+1)+"、"+e._s(t.sdgName)+" ")]),a("div",{staticClass:"tags"},e._l(t.keywords,(function(t,i){return a("div",{key:i,staticClass:"tag-item"},[a("a-tag",{attrs:{color:e.tagColorList[i%e.tagColorList.length]}},[e._v(" "+e._s(t.name)+" ")])],1)})),0)])})),0):a("div",{staticClass:"content-list"},[a("a-empty")],1)])]),a("div",{staticClass:"detail-block"},[a("div",{staticClass:"block-title"},[e._v(" "+e._s(e.unitPlanData.inquiry)+" "),a("span",{staticClass:"title-icon"},[a("a-tooltip",[a("template",{slot:"title"},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.direction-of-inquiry"))+" ")]),a("a-icon",{attrs:{type:"info-circle"}})],2)],1)]),a("div",{staticClass:"block-content"},[e.unitPlanData.questions&&e.unitPlanData.questions.length?a("div",{staticClass:"content-list"},e._l(e.unitPlanData.questions,(function(t,i){return a("div",{key:i,staticClass:"content-item"},[a("div",{staticClass:"question"},[e._v(" "+e._s(t.name)+" ")]),a("div",{staticClass:"content-sub-list"},e._l(t.knowledgeTags,(function(t,s){return a("div",{key:s,staticClass:"content-sub-item"},[a("div",{staticClass:"sub-title"},[e._v(" "+e._s(i+1)+"."+e._s(s+1)+"、"+e._s(t.description)+" "),t.subSubjectName?a("span",{staticClass:"subject-name"},[e._v(e._s(t.subSubjectName))]):e._e(),a("a-tag",{attrs:{color:e.tagColorList[s%e.tagColorList.length]}},[e._v(" "+e._s(t.name)+" ")])],1)])})),0),a("div",{staticClass:"content-sub-list"},e._l(t.skillTags,(function(t,s){return a("div",{key:s,staticClass:"content-sub-item"},[a("div",{staticClass:"sub-title"},[e._v(" "+e._s(i+1)+"."+e._s(s+1)+"、"+e._s(t.description)+" "),a("a-tag",{attrs:{color:e.tagColorList[s%e.tagColorList.length]}},[e._v(" "+e._s(t.name)+" ")])],1)])})),0)])})),0):a("div",{staticClass:"content-list"},[a("a-empty")],1)])])])])],1),e.showAssociate?a("a-divider"):e._e(),e.showAssociate?a("unit-plan-associate-preview",{attrs:{"unit-plan-id":e.unitPlanId}}):e._e()]],2)},s=[],n=(a("d3b7"),a("823b")),r=a("3f76"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unit-plan-sub-preview"},[e.loading?[a("a-skeleton",{attrs:{active:""}})]:[a("a-row",{staticClass:"bottom-relative",attrs:{gutter:[16,32]}},[a("a-col",{attrs:{span:"16"}},[a("a-space",[a("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.material?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.material)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.material"))+" ")]),a("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.task?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.task)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.task"))+" ")]),a("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.lesson?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.lesson)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.lesson"))+" ")]),a("a-button",{staticClass:"type-button",attrs:{type:e.activeContentType===e.typeMap.evaluation?"primary":"default",shape:"round"},on:{click:function(t){return e.handleSelectContentType(e.typeMap.evaluation)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.evaluation"))+" ")])],1)],1),a("a-col",{attrs:{span:"8"}},[a("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.handleUserTypeChange},model:{value:e.activeUserType,callback:function(t){e.activeUserType=t},expression:"activeUserType"}},[a("a-radio-button",{staticClass:"left-button",attrs:{value:"owner"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-owner"))+" ")]),a("a-radio-button",{staticClass:"right-button",attrs:{value:"others"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-others"))+" ")])],1)],1)],1),a("a-row",[a("a-col",[a("div",{staticClass:"associate-info"},e._l(e.currentAssociateList,(function(t,i){return a("div",{key:i,staticClass:"associate-block-list"},[t.type===e.activeContentType&&t.datas?e._l(t.datas,(function(i,s){return a("div",{key:s,staticClass:"associate-block-item"},[i.question?a("div",{staticClass:"block-title",on:{click:function(a){return e.handleClickTitle(t)}}},[e._v(" "+e._s(i.question.name)+" ")]):e._e(),i.lists?a("div",{staticClass:"block-content-list"},e._l(i.lists,(function(i,s){return a("div",{key:s,staticClass:"block-content-item"},[a("a-row",[a("a-col",{staticClass:"block-content",attrs:{span:"14"},on:{click:function(t){return e.handleSubPreview(i)}}},[a("content-type-icon",{attrs:{type:t.type}}),a("span",{staticClass:"content-txt"},[e._v(" "+e._s(i.name)+" ")])],1),a("a-col",{staticClass:"block-last-change-time",attrs:{span:"6"}},[e._v(" "+e._s(e._f("moment")(i.updateTime))+" ")]),a("a-col",{staticClass:"favorite",attrs:{span:"2"},on:{click:function(t){return e.handleFavorite(i)}}},[a("span",{class:{"favorite-active":i.isFavorite}},[a("a-icon",{attrs:{type:"star",theme:i.isFavorite?"filled":"outlined"}}),i.isFavorite?[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.favorite"))+" ")]:e._e()],2)]),a("a-col",{staticClass:"action-item",attrs:{span:"2"}},[a("a",{on:{click:function(a){return e.handleEditItem(t.type,i)}}},[e._v(e._s(e.$t("teacher.unit-plan-preview.edit")))])])],1)],1)})),0):e._e()])})):e._e()],2)})),0)])],1),a("a-row"),a("a-drawer",{attrs:{destroyOnClose:"",placement:"right",closable:"",width:"800px",visible:e.subPreviewVisible},on:{close:e.handleSubPreviewClose}},[a("div",{staticClass:"preview-wrapper"},[a("div",{staticClass:"preview-detail"},[e.previewType===e.typeMap["unit-plan"]?a("unit-plan-preview",{attrs:{"unit-plan-id":e.unitPlanId,"show-associate":!1}}):e._e()],1)])])]],2)},l=[],c=(a("3ca3"),a("ddb0"),a("8f46")),o=a("95c6"),u=o.FavoritesAdd,h=a("9afb"),p=h.GetAssociate,m={name:"UnitPlanAssociatePreview",props:{unitPlanId:{type:String,default:null}},components:{ContentTypeIcon:c["a"],UnitPlanPreview:function(){return Promise.resolve().then(a.bind(null,"ea23"))}},data:function(){return{loading:!0,associateData:null,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:r["e"].material,activeUserType:"owner",currentAssociateList:[],typeMap:r["e"],previewType:"",subPreviewVisible:!1}},created:function(){n["info"]("UnitPlan Associate Preview unitPlanId "+this.unitPlanId),this.loadUnitPlanAssociateData()},methods:{loadUnitPlanAssociateData:function(){var e=this;n["info"]("loadUnitPlanAssociateData "+this.unitPlanId),this.loading=!0,p({id:this.unitPlanId,type:r["e"]["unit-plan"]}).then((function(t){n["info"]("GetAssociate ",t),e.associateData=t.result,e.currentAssociateList=e.associateData[e.activeUserType]})).then((function(){n["info"]("get favorite "+e.unitPlanId)})).finally((function(){e.loading=!1}))},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1,this.previewType=null},handleUserTypeChange:function(e){n["info"]("handleUserTypeChange "+this.activeUserType),this.currentAssociateList=this.associateData[this.activeUserType],n["info"]("currentAssociateList",this.currentAssociateList)},handleClickTitle:function(e){n["info"]("handleClickTitle",e),this.previewType=r["e"]["unit-plan"],this.subPreviewVisible=!0},handleSubPreview:function(e,t){n["info"]("handleSubPreview",e,t),this.previewType=r["e"]["unit-plan"],this.subPreviewVisible=!0},handleFavorite:function(e){n["info"]("handleFavorite",e),u({sourceId:e.id,sourceType:e.type}).then((function(t){n["info"]("FavoritesAdd ",t),e.isFavorite=!e.isFavorite}))},handleEditItem:function(e,t){n["info"]("handleEditItem",e,t),this.$message.success("Edit Item")}}},y=m,g=(a("2c45"),a("0c7c")),f=Object(g["a"])(y,d,l,!1,null,"dcb9f240",null),I=f.exports,C=a("ca00"),v=C.formatLocalUTC,b=a("de0d"),T=b.UnitPlanQueryById,L={name:"UnitPlanPreview",props:{unitPlanId:{type:String,default:null},showAssociate:{type:Boolean,default:!1}},components:{UnitPlanAssociatePreview:I},computed:{lastChangeSavedTime:function(){if(this.unitPlanData){n["info"]("lastChangeSavedTime unitPlanData",this.unitPlanData);var e=this.unitPlanData.createTime||this.unitPlanData.updateTime;if(e)return v(e)}return""}},mounted:function(){},data:function(){return{loading:!0,unitPlanData:null,imgList:[],viewMode:"Detail",tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:-1,typeMap:r["e"],subPreviewVisible:!1}},created:function(){n["info"]("UnitPlanPreview unitPlanId "+this.unitPlanId),this.loadUnitPlanData()},methods:{loadUnitPlanData:function(){var e=this;n["info"]("loadUnitPlanData "+this.unitPlanId),this.loading=!0,T({id:this.unitPlanId}).then((function(t){n["info"]("UnitPlanQueryById "+e.unitPlanId,t.result),e.unitPlanData=t.result,e.unitPlanData&&e.unitPlanData.image&&(e.imgList=[e.unitPlanData.image])})).finally((function(){e.loading=!1}))},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1},handleViewModeChange:function(){this.$logger.info("handleViewModeChange "+this.viewMode)}}},w=L,S=(a("8e47"),Object(g["a"])(w,i,s,!1,null,"6fb1cca6",null));t["default"]=S.exports},fcd7:function(e,t,a){}}]);