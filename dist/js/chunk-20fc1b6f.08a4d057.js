(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20fc1b6f"],{"00d8":function(e,t){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&a.rotl(e,8)|4278255360&a.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=a.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],a=0,i=0;a<e.length;a++,i+=8)t[i>>>5]|=e[a]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],a=0;a<32*e.length;a+=8)t.push(e[a>>>5]>>>24-a%32&255);return t},bytesToHex:function(e){for(var t=[],a=0;a<e.length;a++)t.push((e[a]>>>4).toString(16)),t.push((15&e[a]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t},bytesToBase64:function(e){for(var a=[],i=0;i<e.length;i+=3)for(var s=e[i]<<16|e[i+1]<<8|e[i+2],n=0;n<4;n++)8*i+6*n<=8*e.length?a.push(t.charAt(s>>>6*(3-n)&63)):a.push("=");return a.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var a=[],i=0,s=0;i<e.length;s=++i%4)0!=s&&a.push((t.indexOf(e.charAt(i-1))&Math.pow(2,-2*s+8)-1)<<2*s|t.indexOf(e.charAt(i))>>>6-2*s);return a}};e.exports=a})()},"0136":function(e,t,a){},"0143":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"knowledge-skill-tag-selector"},[a("div",{staticClass:"skt-search-wrapper"},[a("a-form-model-item",{staticClass:"input-search-item",attrs:{label:e.$t("teacher.add-unit-plan.skill-tags")}},[a("div",{staticClass:"knowledge-tag-search-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputTag,expression:"inputTag"}],attrs:{placeholder:e.$t("teacher.add-unit-plan.please-enter-skill-tag")},domProps:{value:e.inputTag},on:{keyup:e.handleKeyup,input:function(t){t.target.composing||(e.inputTag=t.target.value)}}})])])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tagList.length||e.createTagName,expression:"tagList.length || createTagName"}],staticClass:"skt-tag-wrapper"},[a("a-row",[a("a-col",{attrs:{offset:"4",span:"18"}},[a("div",{staticClass:"skt-tag-list"},[e._l(e.tagList,(function(t,i){return a("div",{key:i,staticClass:"skt-tag-item",attrs:{"data-tag-type":t.type},on:{dblclick:function(a){return e.handleDbClickTagListTag(t)}}},[t.type===e.tagOriginType.Origin?a("a-tag",{staticClass:"tag-item",attrs:{draggable:"true",color:"green"},on:{dragstart:function(a){return e.handleTagItemDragStart(t,a)}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),t.type===e.tagOriginType.Search?a("a-tag",{staticClass:"tag-item",attrs:{draggable:"true",color:"#108ee9"},on:{dragstart:function(a){return e.handleTagItemDragStart(t,a)}}},[a("a-icon",{attrs:{type:"search"}}),e._v(" "+e._s(t.name)+" ")],1):e._e(),t.type===e.tagOriginType.Description?a("a-tag",{staticClass:"tag-item",attrs:{draggable:"true",color:"#87d068"},on:{dragstart:function(a){return e.handleTagItemDragStart(t,a)}}},[a("a-icon",{attrs:{type:"tag"}}),e._v(" "+e._s(t.name)+" ")],1):e._e(),t.type===e.tagOriginType.Create?a("a-tag",{staticClass:"tag-item",attrs:{draggable:"true",color:"#2db7f5",closable:""},on:{dragstart:function(a){return e.handleTagItemDragStart(t,a)},close:function(a){return e.handleDeleteCreatedTag(t)}}},[a("a-icon",{attrs:{type:"highlight"}}),e._v(" "+e._s(t.name)+" ")],1):e._e(),t.type===e.tagOriginType.Extension?a("a-tag",{staticClass:"tag-item",attrs:{draggable:"true",closable:""},on:{dragstart:function(a){return e.handleTagItemDragStart(t,a)},close:function(a){return e.handleDeleteCreatedTag(t)}}},[a("a-icon",{attrs:{type:"diff"}}),e._v(" "+e._s(t.name)+" ")],1):e._e()],1)})),a("div",{directives:[{name:"show",rawName:"v-show",value:e.createTagName&&e.createTagName.length>=1,expression:"createTagName && createTagName.length >= 1"}],staticClass:"skt-tag-create-line"},[a("div",{staticClass:"create-tag-label"},[e._v(" Create ")]),a("div",{staticClass:"create-tag"},[a("a-tag",{staticClass:"tag-item"},[e._v(" "+e._s(e.createTagName)+" ")]),a("a-icon",{attrs:{type:"plus-circle"},on:{click:e.handleCreateTagByInput}})],1)])],2)])],1)],1),a("div",{staticClass:"open-curriculum-wrapper"},[a("a-row",[a("a-col",{attrs:{offset:"4",span:"18"}},[a("div",{staticClass:"open-curriculum",on:{click:e.handleCreateDescription}},[a("a-icon",{attrs:{type:"hdd"}}),a("a",{staticClass:"open-curriculum-text"},[e._v("Select Skill")])],1)])],1)],1),e.skillDescriptionTagList.length?a("div",{staticClass:"skt-description-list-wrapper"},[a("a-row",[a("a-col",{attrs:{span:"24"}},[a("div",{staticClass:"skt-description-list"},[e.skillDescriptionTagList.length?a("div",{key:e.skillDescriptionTagList[0].descriptionId,class:{"skt-description-tag-item":!0,"skt-description-tag-item-top-fixed":!0,"active-description-line":e.skillDescriptionTagList[0].descriptionId===e.activeDescriptionId},attrs:{"data-id":e.skillDescriptionTagList[0].descriptionId},on:{dblclick:function(t){return e.handleActiveDescription(e.skillDescriptionTagList[0].descriptionId)}}},[a("div",{staticClass:"skt-description"},[a("a-tooltip",{staticClass:"description-txt",attrs:{mouseEnterDelay:1}},[a("template",{slot:"title"},[e._v(" "+e._s(e.descriptionId2InfoMap.get(e.skillDescriptionTagList[0].descriptionId).description)+" ")]),e._v(" "+e._s(e.descriptionId2InfoMap.get(e.skillDescriptionTagList[0].descriptionId).description)+" ")],2)],1),a("div",{staticClass:"skt-description-tag-list",attrs:{droppable:e.activeDescriptionId===e.skillDescriptionTagList[0].descriptionId?"true":"false"},on:{dragover:function(e){e.preventDefault()},drop:function(t){return e.handleTagItemDrop(e.skillDescriptionTagList[0],t)}}},e._l(e.skillDescriptionTagList[0].tagList,(function(t,i){return a("div",{key:i+t.name+t.type,staticClass:"tag-list-item"},[t.type===e.tagOriginType.Origin?a("a-tag",{staticClass:"tag-item",attrs:{closable:t.descriptionId===e.activeDescriptionId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),t.type===e.tagOriginType.Search?a("a-tag",{staticClass:"tag-item",attrs:{closable:t.descriptionId===e.activeDescriptionId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),t.type===e.tagOriginType.Description?a("a-tag",{staticClass:"tag-item",attrs:{closable:t.descriptionId===e.activeDescriptionId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e()],1)})),0),a("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(t){return e.handleDeleteKnowledgeItem(e.skillDescriptionTagList[0].descriptionId)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.skillDescriptionTagList[0].descriptionId===e.activeDescriptionId,expression:"skillDescriptionTagList[0].descriptionId === activeDescriptionId"}],staticClass:"delete-action"},[a("a-icon",{attrs:{type:"delete"}})],1)])],1):e._e(),a("div",{staticClass:"skt-description-sub-list"},e._l(e.skillDescriptionTagList,(function(t,i){return e.skillDescriptionTagList.length&&i>0?a("div",{key:t.descriptionId,class:{"skt-description-tag-item":!0,"active-description-line":t.descriptionId===e.activeDescriptionId},attrs:{"data-id":t.descriptionId},on:{dblclick:function(a){return e.handleActiveDescription(t.descriptionId)}}},[a("div",{staticClass:"skt-description"},[a("a-tooltip",{staticClass:"description-txt",attrs:{mouseEnterDelay:1}},[a("template",{slot:"title"},[e._v(" "+e._s(e.descriptionId2InfoMap.get(t.descriptionId).description)+" ")]),e._v(" "+e._s(e.descriptionId2InfoMap.get(t.descriptionId).description)+" ")],2)],1),a("div",{staticClass:"skt-description-tag-list",attrs:{droppable:e.activeDescriptionId===t.descriptionId?"true":"false"},on:{dragover:function(e){e.preventDefault()},drop:function(a){return e.handleTagItemDrop(t,a)}}},e._l(t.tagList,(function(t,i){return a("div",{key:i+t.name+t.type,staticClass:"tag-list-item"},[t.type===e.tagOriginType.Origin?a("a-tag",{staticClass:"tag-item",attrs:{closable:t.descriptionId===e.activeDescriptionId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),t.type===e.tagOriginType.Search?a("a-tag",{staticClass:"tag-item",attrs:{closable:t.descriptionId===e.activeDescriptionId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),t.type===e.tagOriginType.Description?a("a-tag",{staticClass:"tag-item",attrs:{closable:t.descriptionId===e.activeDescriptionId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e()],1)})),0),a("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleDeleteKnowledgeItem(t.descriptionId)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.descriptionId===e.activeDescriptionId,expression:"item.descriptionId === activeDescriptionId"}],staticClass:"delete-action"},[a("a-icon",{attrs:{type:"delete"}})],1)])],1):e._e()})),0)])])],1)],1):e._e(),a("a-modal",{attrs:{destroyOnClose:"",width:"800px"},on:{ok:e.handleEnsureTagSearchList},model:{value:e.skillTagNameSearchListDialogueVisible,callback:function(t){e.skillTagNameSearchListDialogueVisible=t},expression:"skillTagNameSearchListDialogueVisible"}},[a("div",{staticClass:"search-tag-list"},[e.skillTagNameSearchList.length?a("a-checkbox-group",{attrs:{value:e.skillTagNameSearchListSelected},on:{change:e.skillTagNameSearchListChange}},e._l(e.skillTagNameSearchList,(function(t,i){return a("a-row",{key:i,attrs:{gutter:[16,16]}},[a("a-col",{attrs:{span:24}},[a("a-checkbox",{attrs:{value:t.descriptionId}},[e._v(" "+e._s(t.description)+" ")])],1)],1)})),1):e._e(),e.skillTagNameSearchList.length?e._e():a("div",{staticClass:"empty-search-list"},[a("a-empty"),a("div",{staticClass:"open-curriculum"},[e._v(" click 【 "),a("a",{staticClass:"open-curriculum-text"},[e._v("Select Skill")]),e._v("】 to select description ")])],1)],1)]),a("a-modal",{attrs:{destroyOnClose:"",width:"80%","dialog-style":{top:"20px"}},on:{ok:e.handleEnsureAssociate},model:{value:e.skillAssociateLibraryVisible,callback:function(t){e.skillAssociateLibraryVisible=t},expression:"skillAssociateLibraryVisible"}},[a("div",{staticClass:"associate-library"},[a("skill-browser",{attrs:{"select-mode":e.skillSelectModel.skillDescription,"question-index":e.questionIndex}})],1)])],1)},s=[],n=a("2909"),o=a("3835"),r=a("b85c"),l=a("5530"),c=(a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("6062"),a("159b"),a("b0c0"),a("4de4"),a("c740"),a("498a"),a("a434"),a("7db0"),a("823b")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-library",attrs:{id:"new-library"}},[a("div",{staticClass:"navigation"},[a("skill-navigation")],1),a("div",{staticClass:"main"},[a("div",{staticClass:"tree-navigation"},[a("skill-tree-navigation",{attrs:{"select-mode":e.selectMode,"question-index":e.questionIndex}})],1),a("div",{staticClass:"content-list"},[a("skill-content-list")],1)])])},u=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav-path-wrapper"},[a("div",{staticClass:"nav-path"},e._l(e.navPath,(function(t,i){return a("div",{key:i,staticClass:"nav-path-item",on:{click:function(a){return e.handleSkillLibraryNavClick(t)}}},[t?[t.name&&t.name.length>20?[a("a-tooltip",{attrs:{mouseEnterDelay:1}},[a("template",{slot:"title"},[e._v(" "+e._s(t.name)+" ")]),a("a-icon",{attrs:{type:"right"}}),e._v(" "+e._s(t.name)+" ")],2)]:[a("a-icon",{attrs:{type:"right"}}),e._v(" "+e._s(t.name)+" ")]]:e._e()],2)})),0)])},p=[],m=a("8a41"),g={name:"SkillNavigation",components:{},data:function(){return{navPath:[]}},computed:{},created:function(){this.$logger.info("NewNavigation")},mounted:function(){m["SkillLibraryEventBus"].$on(m["SkillLibraryEvent"].SkillContentListUpdate,this.handleSkillContentListUpdate)},methods:{handleSkillContentListUpdate:function(e){this.$logger.info("handleSkillContentListUpdate",e);var t=Object.assign({},e);this.$logger.info("NewNavigation handleSkillContentListUpdate ",t);var a=[t.parentTreeData,t.currentTreeData],i=t.parentTreeData;while(i&&i.parent)a.unshift(Object.assign({},i.parent)),i=i.parent;this.$logger.info("nav path list",a),this.navPath=a},handleSkillLibraryNavClick:function(e){this.$logger.info("handleSkillLibraryNavClick ",e),m["SkillLibraryEventBus"].$emit(m["SkillLibraryEvent"].SkillContentListItemClick,{item:e,parent:e.parent})}},destroyed:function(){m["SkillLibraryEventBus"].$off(m["SkillLibraryEvent"].SkillContentListUpdate,this.handleSkillContentListUpdate),this.$logger.info("off NewNavigation handleSkillContentListUpdate handler")}},f=g,v=(a("d9d3"),a("0c7c")),y=Object(v["a"])(f,h,p,!1,null,"22e59d9a",null),b=y.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-list-wrapper"},[a("div",{staticClass:"content-header"},[a("div",{staticClass:"name",style:{width:e.nameWidth+"px"}},[e._v(" Name ")])]),a("div",{staticClass:"content-list"},[e.contentDataList.length?e._l(e.contentDataList,(function(t,i){return a("div",{key:i,class:{"content-item":!0,"odd-line":i%2===0,"even-line":i%2===1,"active-line":e.currentId===t.id,"selected-line":-1!==e.selectedIdList.indexOf(t.id)}},[a("div",{staticClass:"name",style:{width:e.nameWidth+"px"},on:{click:function(a){return e.handleSkillContentListItemClick(t)}}},[a("div",{staticClass:"icon"},[t.type?[a("content-type-icon",{attrs:{type:t.type}})]:[a("a-icon",{staticClass:"file-dir-icon",attrs:{type:"folder",theme:"filled"}})]],2),a("div",{staticClass:"name-text"},[e._v(" "+e._s(t.name||t.description)+" ")])])])})):[e.firstLoad?e._e():a("div",{staticClass:"content-empty"},[a("a-empty")],1)]],2)])},w=[],k=a("8f46"),T=a("3f76"),L={name:"SkillContentList",components:{ContentTypeIcon:k["a"]},data:function(){return{currentId:null,nameWidth:500,contentDataList:[],parent:null,blockIndex:0,typeMap:T["e"],firstLoad:!0,selectedIdList:[]}},computed:{},created:function(){},mounted:function(){m["SkillLibraryEventBus"].$on(m["SkillLibraryEvent"].SkillContentListUpdate,this.handleSkillContentListUpdate),m["SkillLibraryEventBus"].$on(m["SkillLibraryEvent"].SkillContentListSelectedListUpdate,this.handleSkillContentSelectedListUpdate),this.nameWidth=document.getElementById("new-library").getBoundingClientRect().width-400,this.$logger.info("nameWidth "+this.nameWidth)},methods:{handleSkillContentListUpdate:function(e){this.$logger.info("handleSkillContentListUpdate ",e),this.contentDataList=e.contentList,this.parent=e.currentTreeData,this.firstLoad=!1},handleSkillContentSelectedListUpdate:function(e){this.$logger.info("handleSkillContentSelectedListUpdate ",e),-1===this.selectedIdList.indexOf(e.id)?this.selectedIdList.push(e.id):this.selectedIdList.splice(this.selectedIdList.indexOf(e.id),1),this.$logger.info("after handleSkillContentSelectedListUpdate ",this.selectedIdList)},handleSkillContentListItemClick:function(e){this.$logger.info("handleSkillContentListItemClick ",e),m["SkillLibraryEventBus"].$emit(m["SkillLibraryEvent"].SkillContentListItemClick,{item:e,parent:this.parent})}},destroyed:function(){m["SkillLibraryEventBus"].$off(m["SkillLibraryEvent"].SkillContentListUpdate,this.handleSkillContentListUpdate),this.$logger.info("off NewContentList ContentListUpdate handler"),m["SkillLibraryEventBus"].$off(m["SkillLibraryEvent"].SkillContentListSelectedListUpdate,this.handleSkillContentSelectedListUpdate),this.$logger.info("off NewContentList ContentListSelectedListUpdate handler")}},I=L,S=(a("cedf"),Object(v["a"])(I,C,w,!1,null,"bfb518ae",null)),A=S.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-tree-navigation"},e._l(e.treeDataList,(function(t,i){return a("skill-tree-item",{key:i,attrs:{"grade-list":e.gradeList,"tree-item-data":t,"tree-current-parent":null,"default-deep":0,"select-mode":e.selectMode,"question-index":e.questionIndex,"default-expand-status":t.expandStatus,"tree-item-type":t.type,odd:i%2===1}})})),1)},_=[],D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.treeItemData?a("div",{staticClass:"tree-item",attrs:{"data-deep":e.defaultDeep}},[a("div",{class:{"item-wrapper":!0,"odd-line":e.odd,"even-line":!e.odd},style:{paddingLeft:(e.defaultDeep*e.defaultPaddingLeft===0?e.defaultPaddingLeft/3:e.defaultDeep*e.defaultPaddingLeft)+"px"}},[a("div",{staticClass:"subtree-icon-wrapper"},[e.hasSubTree?a("div",{staticClass:"subtree-icon-item"},[e.subTreeExpandStatus?e._e():[e.subTreeLoading?e._e():a("a-icon",{staticClass:"subtree-icon",attrs:{type:"right"},on:{click:function(t){return e.handleExpandTreeItem(e.treeItemData)}}}),e.subTreeLoading?a("a-spin",{attrs:{size:"small"}}):e._e()],e.subTreeExpandStatus?[e.subTreeLoading?e._e():a("a-icon",{staticClass:"subtree-icon",attrs:{type:"down"},on:{click:function(t){return e.handleCollapseTreeItem(e.treeItemData)}}}),e.subTreeLoading?a("a-spin",{attrs:{size:"small"}}):e._e()]:e._e()],2):e._e()]),a("div",{staticClass:"type-icon-wrapper",on:{click:function(t){return e.handleExpandTreeItem(e.treeItemData)}}},[e.subTreeExpandStatus?a("a-icon",{staticClass:"file-dir-icon",attrs:{type:"folder-open",theme:"filled"}}):e._e(),e.subTreeExpandStatus?e._e():a("a-icon",{staticClass:"file-dir-icon",attrs:{type:"folder",theme:"filled"}})],1),a("div",{staticClass:"display-label-wrapper",on:{click:function(t){return e.handleExpandTreeItem(e.treeItemData)}}},[a("span",{staticClass:"display-label"},[e._v(e._s(e.treeItemData.name))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.subTreeExpandStatus&&e.hasSubTree,expression:"subTreeExpandStatus && hasSubTree"}],staticClass:"sub-tree"},e._l(e.treeItemData.children,(function(t,i){return a("skill-tree-item",{key:i,attrs:{"grade-list":e.gradeList,"tree-current-parent":e.subTreeParent,"tree-item-data":t,"select-mode":e.selectMode,"question-index":e.questionIndex,"tree-item-type":e.treeItemType,"default-deep":e.defaultDeep+1,"default-expand-status":t.expandStatus,odd:e.odd?i%2===1:i%2===0}})})),1)]):e._e()},O=[],E=(a("a9e3"),a("0da2")),N=E.SkillGetTreeByGradeId,M=a("d28e"),j=M.SkillSelectModel,R=a("0da2"),B=R.SkillQueryTagsBySkillId,P={collapse:!1,open:!0},U={name:"SkillTreeItem",props:{defaultDeep:{type:Number,default:0},defaultExpandStatus:{type:Boolean},gradeList:{type:Array},treeItemData:{type:Object,default:null},treeItemType:{type:String,default:null},treeCurrentParent:{type:Object,default:null},odd:{type:Boolean,default:!1},defaultPaddingLeft:{type:Number,default:25},selectMode:{type:String,default:null},questionIndex:{type:String,default:null}},components:{},data:function(){return{subTreeExpandStatus:P.collapse,hasSubTree:!1,subTreeParent:null,subTreeLoading:!1}},watch:{hasSubTreeWatch:function(){this.treeItemData&&this.treeItemData.children&&(this.hasSubTree=!0),this.hasSubTree=!1}},created:function(){this.expand=this.expandStatus,this.treeItemData&&this.treeItemData.children&&(this.hasSubTree=!0);var e=Object.assign({},this.treeItemData);e.parent=this.treeCurrentParent,this.subTreeParent=e},mounted:function(){m["SkillLibraryEventBus"].$on(m["SkillLibraryEvent"].SkillContentListItemClick,this.handleSkillContentListItemClick)},destroyed:function(){m["SkillLibraryEventBus"].$off(m["SkillLibraryEvent"].SkillContentListItemClick,this.handleSkillContentListItemClick)},methods:{handleExpandTreeItem:function(e){this.$logger.info("handleExpandTreeItem "+!this.subTreeExpandStatus),this.$logger.info("handleExpandTreeItem deep: "+this.defaultDeep+" type: "+this.treeItemType+" treeItemData",e," parent ",this.treeCurrentParent),this.handleExpandSkillTreeItem(e)},handleCollapseTreeItem:function(e){this.$logger.info("handleExpandTreeItem "+!this.subTreeExpandStatus),this.subTreeExpandStatus=!1},handleExpandSkillTreeItem:function(e){var t=this;if(this.$logger.info("handleExpandSkillTreeItem data ",e," children ",e.children," deep "+this.defaultDeep),0===this.defaultDeep||2===this.defaultDeep||3===this.defaultDeep)this.subTreeExpandStatus=!0,m["SkillLibraryEventBus"].$emit(m["SkillLibraryEvent"].SkillContentListUpdate,{deep:this.defaultDeep,currentTreeData:this.treeItemData,parentTreeData:this.treeCurrentParent,contentList:e.children,questionIndex:this.questionIndex});else if(1===this.defaultDeep&&(this.$logger.info("try SkillGetTreeByGradeId "+e.id+" "+e.name,e),this.subTreeLoading=!0,N({gradeId:e.id}).then((function(a){t.$logger.info("SkillQueryTagsBySkillId response",a.result),e.children=Object(n["a"])(a.result),m["SkillLibraryEventBus"].$emit(m["SkillLibraryEvent"].SkillContentListUpdate,{currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:a.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0}))),4===this.defaultDeep)if(this.$logger.info("selectMode",this.selectMode),this.selectMode!==j.skillDescription)this.subTreeLoading=!0,B({skillId:this.treeItemData.id}).then((function(e){t.$logger.info("SkillQueryTagsBySkillId response",e.result),m["SkillLibraryEventBus"].$emit(m["SkillLibraryEvent"].SkillContentListUpdate,{currentTreeData:t.treeItemData,parentTreeData:t.treeCurrentParent,contentList:e.result,questionIndex:t.questionIndex})})).finally((function(){t.subTreeLoading=!1,t.subTreeExpandStatus=!0}));else{this.$logger.info("select knowledge description treeItemData",this.treeItemData,this.treeCurrentParent);var a=this.treeCurrentParent.parent.parent,i=this.treeCurrentParent.parent,s=this.treeCurrentParent,o=this.treeItemData;this.$logger.info("mainSkillObj",i,"subSkillObj",s,"descriptionObj",o),m["SkillLibraryEventBus"].$emit(m["SkillLibraryEvent"].SkillContentListSelectClick,{curriculumId:this.$store.getters.bindCurriculum,description:o.name,descriptionId:o.id,gradeId:a.id,mainSkillId:i.id,mainSkillName:i.name,subSkillId:s.id,subSkillName:s.name,questionIndex:this.questionIndex})}},handleSkillContentListItemClick:function(e){e.item.id===this.treeItemData.id&&e.item.name===this.treeItemData.name&&e.item.name&&(this.$logger.info("handleSkillContentListItemClick start ",e,this.treeItemData,this.treeCurrentParent),this.handleExpandTreeItem(this.treeItemData))}}},F=U,V=(a("0d05"),Object(v["a"])(F,D,O,!1,null,"2d27df88",null)),$=V.exports,q=a("9afb"),K=q.GetMyGrades,Q={name:"NewTreeNavigation",components:{SkillTreeItem:$},props:{selectMode:{type:String,default:null},questionIndex:{type:String,default:null}},data:function(){return{loaded:!1,treeDataList:[],gradeList:[]}},created:function(){var e=this;this.$logger.info("NewTreeNavigation selectMode",this.selectMode);var t={id:"1",expandStatus:!0,name:"Grade",children:[],parent:null};K().then((function(a){var i=a.result;i.forEach((function(e){e.children=[]})),e.gradeList=i,t.children=i})).finally((function(){e.treeDataList.push(t),e.loaded=!0}))},methods:{}},G=Q,H=(a("ea0c"),Object(v["a"])(G,x,_,!1,null,"3a0b5076",null)),z=H.exports,W={name:"SkillBrowser",components:{SkillNavigation:b,SkillContentList:A,SkillTreeNavigation:z},props:{selectMode:{type:String,default:null},questionIndex:{type:String,default:null}},data:function(){return{}},computed:{},created:function(){this.$logger.info("SkillBrowser selectMode",this.selectMode)},mounted:function(){},methods:{}},Y=W,J=(a("fa3a"),Object(v["a"])(Y,d,u,!1,null,"22c0361d",null)),Z=J.exports,X=a("d28e"),ee=a("8a41"),te=ee.SkillLibraryEventBus,ae=ee.SkillLibraryEvent,ie=a("0da2"),se=ie.SkillSearch,ne=ie.SkillQueryTagsBySkillId,oe=ie.SkillAddOrUpdateTag,re=a("4fcf"),le=re.debounce,ce=re.sortBy,de={Origin:"Origin",Search:"Search",Description:"Description",Create:"Create",Extension:"Extension"},ue={name:"NewClickableSkillTag",components:{SkillBrowser:Z},props:{questionIndex:{type:String,default:""},selectedSkillTags:{type:Array,default:function(){return[]}},extTagList:{type:Array,default:function(){return[]}}},mounted:function(){c["info"]("skill NewClickableSkillTag "+this.questionIndex+" selectedSkillTags",this.selectedSkillTags),te.$on(ae.SkillContentListSelectClick,this.handleSkillContentListSelectClick)},destroyed:function(){te.$off(ae.SkillContentListSelectClick,this.handleSkillContentListSelectClick),this.$logger.info("skill off handleSkillContentListSelectClick ContentListSelectClick handler")},data:function(){return{inputTag:"",searchList:[],tagList:[],tagOriginType:de,skillSelectModel:X["SkillSelectModel"],skillDescriptionTagList:[],descriptionId2InfoMap:new Map,activeDescriptionId:null,skillTagNameSearchListDialogueVisible:!1,skillTagNameSearchList:[],skillTagNameSearchListSelected:[],skillAssociateLibraryVisible:!1,createTagName:""}},created:function(){var e=this;this.debouncedSearchKnowledge=le(this.searchKnowledge,500);var t=new Map,a=new Set;this.selectedSkillTags.forEach((function(i){if(a.has(i.name)?e.$logger.info("skill tag name "+i.name+" exist",i,a):e.tagList.push(Object(l["a"])(Object(l["a"])({},i),{},{type:de.Origin})),i.descriptionId&&i.curriculumId===e.$store.getters.bindCurriculum&&!t.has(i.descriptionId)?(t.set(i.descriptionId,[]),e.descriptionId2InfoMap.set(i.descriptionId,Object(l["a"])({},i)),e.$logger.info("skill tag description match",i)):e.$logger.info("skill tag skip! current bindCurriculum not match curriculumId "+i.curriculumId+" "+e.$store.getters.bindCurriculum),i.curriculumId===e.$store.getters.bindCurriculum){e.$logger.info("skill current bindCurriculum  match curriculumId, add "+i.descriptionId+" to descriptionTagMap",i,t[i.descriptionId]);var s=t.get(i.descriptionId);s.push(Object(l["a"])(Object(l["a"])({},i),{},{type:de.Origin})),t.set(i.descriptionId,s),e.$logger.info("skill tag description match add tag",i)}else e.$logger.info("skill skip! current bindCurriculum not match curriculumId"+i.curriculumId,i,e.$store.getters.bindCurriculum)})),this.$logger.info("skill descriptionTagMap",t);var i,s=Object(r["a"])(t);try{for(s.s();!(i=s.n()).done;){var n=Object(o["a"])(i.value,2),c=n[0],d=n[1];this.skillDescriptionTagList.push(Object.assign({},{descriptionId:c,tagList:d,_updateTimestamp:(new Date).getTime()})),this.$logger.info("skill add "+c+" tagList ",d)}}catch(u){s.e(u)}finally{s.f()}this.skillDescriptionTagList=ce(this.skillDescriptionTagList,"_updateTimestamp","asc").reverse(),this.$logger.info("skill after add tagList",this.tagList),this.$logger.info("skill after add skillDescriptionTagList",this.skillDescriptionTagList),this.$logger.info("skill after add descriptionId2InfoMap",this.descriptionId2InfoMap)},watch:{searchList:function(){var e=this;this.$logger.info("skill update search tag list with list size "+this.searchList.length,this.searchList);var t=[];t=t.filter((function(t){return t.type!==e.tagOriginType.Search}));var a=[];this.searchList.forEach((function(e){-1===a.indexOf(e.name)&&(t.push(Object(l["a"])(Object(l["a"])({},e),{},{type:de.Search})),a.push(e.name))})),this.tagList=t,this.$logger.info("skill after update search tag list",this.tagList)}},methods:{handleSkillContentListSelectClick:function(e){if(e.questionIndex===this.questionIndex){this.$logger.info("skill handleSkillContentListSelectClick hit "+this.questionIndex,e);var t=this.skillDescriptionTagList.findIndex((function(t){return t.descriptionId===e.descriptionId}));-1===t&&(this.descriptionId2InfoMap.set(e.descriptionId,Object(l["a"])({},e)),this.skillDescriptionTagList.push({descriptionId:e.descriptionId,tagList:[],_updateTimestamp:0})),te.$emit(ae.SkillContentListSelectedListUpdate,{id:e.descriptionId}),this.$logger.info("skill descriptionId2InfoMap["+e.descriptionId+"]",this.descriptionId2InfoMap.get(e.descriptionId))}},handleKeyup:function(){this.$logger.info("skill handleKeyup ",this.inputTag),this.debouncedSearchKnowledge(this.inputTag),this.createTagName=this.inputTag},searchKnowledge:function(e){var t=this;c["info"]("skill searchKnowledge",e),this.searchList=[],"string"===typeof e&&e.trim().length>=1&&se({key:e}).then((function(e){c["info"]("skill searchKnowledge response",e),t.searchList=e.result}))},handleDescriptionTagClose:function(e){this.$logger.info("skill handleDescriptionTagClose ",e);var t=this.skillDescriptionTagList.findIndex((function(t){return t.descriptionId===e.descriptionId})),a=this.skillDescriptionTagList[t];this.$logger.info("skill raw handleDescriptionTagClose ",a),a.tagList=a.tagList.filter((function(t){return t.name!==e.name})),this.skillDescriptionTagList.splice(t,1,a),this.$emit("remove-skill-tag",Object(l["a"])({questionIndex:this.questionIndex},e)),this.$logger.info("skill after handleDescriptionTagClose ",this.skillDescriptionTagList[t])},handleActiveDescription:function(e){var t=this;this.$logger.info("skill handleActiveDescription TagList"+e," old tag list",this.tagList,this.skillDescriptionTagList),this.activeDescriptionId=e,this.$logger.info("skill activeDescriptionId "+this.activeDescriptionId);var a=this.skillDescriptionTagList.findIndex((function(e){return e.descriptionId===t.activeDescriptionId})),i=this.skillDescriptionTagList[a];i._updateTimestamp=(new Date).getTime(),this.skillDescriptionTagList.splice(a,1,i),this.skillDescriptionTagList=ce(this.skillDescriptionTagList,"_updateTimestamp","asc").reverse(),this.$logger.info("skill update sort ",this.skillDescriptionTagList),c["info"]("skill dblclick desc searchKnowledge"),ne({skillId:this.activeDescriptionId}).then((function(e){t.$logger.info("skill SkillQueryTagsBySkillId response",e.result);var a=e.result,i=Object(n["a"])(t.tagList);t.$logger.info("skill tag list filter before tag list"+t.tagOriginType.Description,i),i=i.filter((function(e){return e.type!==t.tagOriginType.Description})),t.$logger.info("skill tag list filter after tag list"+t.tagOriginType.Description,i);var s=[];a.forEach((function(e){-1===s.indexOf(e.name)&&(i.push(Object(l["a"])(Object(l["a"])({},e),{},{type:de.Description})),s.push(e.name))})),t.tagList=i,t.$logger.info("skill handleActiveDescription after update search tag list",t.tagList)}))},handleCreateTagByInput:function(){var e=this;this.$logger.info("skill handleCreateTagByInput "+this.createTagName);var t=this.tagList.find((function(t){return t.name===e.createTagName}));t?this.$message.warn("already exist same name tag"):(this.tagList.push({name:this.createTagName,type:this.tagOriginType.Create}),this.createTagName="")},handleDeleteCreatedTag:function(e){var t=this;this.$logger.info("skill handleDeleteCreatedTag ",e);var a=[];this.tagList.forEach((function(i){i.type===t.tagOriginType.Create&&i.name===e.name||a.push(i)})),this.tagList=a,this.$logger.info("skill after handleDeleteCreatedTag tag list",this.tagList)},handleDeleteKnowledgeItem:function(e){var t=this;this.$logger.info("skill handleDeleteKnowledgeItem "+e,this.skillDescriptionTagList);var a=this.skillDescriptionTagList.findIndex((function(t){return t.descriptionId===e})),i=this.skillDescriptionTagList[a];-1!==a?(i.tagList.forEach((function(e){t.$emit("remove-skill-tag",Object(l["a"])({questionIndex:t.questionIndex},e))})),this.skillDescriptionTagList.splice(a,1),this.$logger.info("skill after delete "+e,this.skillDescriptionTagList)):this.$logger.info("skill descriptionTagMap dont exist "+e)},handleDbClickTagListTag:function(e){var t=this;this.$logger.info("skill handleDbClickTagListTag",e),se({key:e.name}).then((function(e){c["info"]("skill handleDbClickTagListTag searchKnowledge response",e),t.skillTagNameSearchList=e.result.filter((function(e){return e.curriculumId===t.$store.getters.bindCurriculum})),t.$logger.info("skill after filter curriculumId skillTagNameSearchList",t.skillTagNameSearchList),t.skillTagNameSearchListSelected=[],t.skillTagNameSearchListDialogueVisible=!0}))},handleEnsureTagSearchList:function(){var e=this;this.$logger.info("skill handleEnsureTagSearchList",this.skillTagNameSearchListSelected);var t=[];this.skillTagNameSearchList.forEach((function(a){-1!==e.skillTagNameSearchListSelected.indexOf(a.descriptionId)?t.push(a):e.$logger.info(a.descriptionId+" dont exist in ",e.skillTagNameSearchListSelected)})),this.$logger.info("skill ensureKnowledgeTagList",t),t.forEach((function(t){var a=e.skillDescriptionTagList.findIndex((function(e){return e.descriptionId===t.descriptionId}));-1===a&&(e.skillDescriptionTagList.push({descriptionId:t.descriptionId,tagList:[],_updateTimestamp:(new Date).getTime()}),e.descriptionId2InfoMap.set(t.descriptionId,Object(l["a"])({},t))),a=e.skillDescriptionTagList.findIndex((function(e){return e.descriptionId===t.descriptionId}));var i=e.skillDescriptionTagList[a];i.tagList.find((function(e){return e.name===t.name}))?e.$logger.info("skill skip! exist "+t.name+" "+t.id):(i.tagList.push(Object(l["a"])(Object(l["a"])({},t),{},{type:de.Origin})),e.$emit("add-skill-tag",Object(l["a"])({questionIndex:e.questionIndex},t)),e.skillDescriptionTagList.splice(a,1,i))})),this.skillTagNameSearchListSelected=[],this.skillTagNameSearchList=[],this.skillTagNameSearchListDialogueVisible=!1},skillTagNameSearchListChange:function(e){this.$logger.info("skill skillTagNameSearchListChange",e),this.skillTagNameSearchListSelected=e},handleCreateDescription:function(){this.$logger.info("skill handleCreateDescription"),this.skillAssociateLibraryVisible=!0},handleEnsureAssociate:function(){this.$logger.info("skill handleEnsureAssociate"),this.skillAssociateLibraryVisible=!1},handleTagItemDragStart:function(e,t){this.$logger.info("skill handleTagItemDragStart",e,t),t.dataTransfer.setData("tag",JSON.stringify(e))},handleTagItemDrop:function(e,t){var a=this,i=e.descriptionId;if(this.activeDescriptionId===i){this.$logger.info("skill handleTagItemDrop "+i,e,t);var s=this.descriptionId2InfoMap.get(i);this.$logger.info("skill knowledgeInfo ",s);var n=t.dataTransfer.getData("tag");this.$logger.info("skill drag tag ",n),n=JSON.parse(n);var o=Object.assign({},s);delete o.id,o.name=n.name,this.$logger.info("skill ready add tag ",o);var r=this.skillDescriptionTagList.findIndex((function(e){return e.descriptionId===i})),c=this.skillDescriptionTagList[r];if(c.tagList.find((function(e){return e.name===o.name})))this.$logger.info("skill skip! exist "+o.name+" "+o.id),this.$message.warn("already exist same name tag");else{this.$logger.info("skill add tag",o),c.tagList.push(Object(l["a"])(Object(l["a"])({},o),{},{type:de.Origin})),this.skillDescriptionTagList.splice(r,1,c);var d=!1,u=null;ne({skillId:i}).then((function(e){a.$logger.info("skill SkillQueryTagsBySkillId response check",e.result);var t=e.result;t.forEach((function(e){e.name===o.name&&(d=!0,u=e)}))})).finally((function(){if(d)a.replaceTempTag(u);else{var e=a.descriptionId2InfoMap.get(o.descriptionId),t=Object.assign(e,{name:o.name});a.$logger.info("new tag data",t),oe(t).then((function(e){a.$logger.info("skill SkillAddOrUpdateTag response",e),e.success?ne({skillId:o.descriptionId}).then((function(e){a.$logger.info("skill SkillQueryTagsBySkillId sub response check",e.result);var t=e.result;t.forEach((function(e){e.name===o.name&&(d=!0,u=e,a.replaceTempTag(u))}))})):a.$logger.error("SkillAddOrUpdateTag",e)}))}}))}}else this.$logger.info("skill not in edit mode",i,this.activeDescriptionId)},replaceTempTag:function(e){this.$logger.info("skill replace tag",e);var t=this.skillDescriptionTagList.findIndex((function(t){return t.descriptionId===(e.descriptionId||e.id)})),a=this.skillDescriptionTagList[t];this.$logger.info("skill replace tag target list",a.tagList),a.tagList=a.tagList.filter((function(t){return t.name!==e.name})),a.tagList.push(Object(l["a"])(Object(l["a"])({},e),{},{type:de.Origin})),this.$emit("add-skill-tag",Object(l["a"])({questionIndex:this.questionIndex},e)),this.skillDescriptionTagList.splice(t,1,a)}}},he=ue,pe=(a("0910"),Object(v["a"])(he,i,s,!1,null,"236a8aee",null));t["a"]=pe.exports},"0187":function(e,t,a){},"018d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{destroyOnClose:"",title:null,getPopupContainer:function(e){return e.parentElement},width:"300px",footer:null},on:{cancel:e.handleCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",[a("div",{staticClass:"quick-title"},[a("a-input",{attrs:{size:"small",placeholder:"Input keyword"},on:{change:e.handleChange},model:{value:e.word,callback:function(t){e.word=t},expression:"word"}})],1),a("div",{staticClass:"quick-word"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.result&&e.result.length>0,expression:"result && result.length > 0"}],staticClass:"quick-word-title"},[e._v(" Select an option ")]),a("a-spin",{attrs:{spinning:e.loading}},[e.result&&e.result.length>0?a("div",{staticClass:"quick-word-content"},e._l(e.result,(function(t,i){return a("div",{key:"quickWord_"+t+i,staticClass:"quick-word-item"},[a("a",{on:{click:function(a){return e.choose(t)}}},[e._v(e._s(t))])])})),0):a("div",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v("No relevant tag found")])]),e._t("create",(function(){return[a("div",{staticClass:"quick-word-sub"},[a("label",[e._v("Create: ")]),a("a-input",{attrs:{size:e.size},model:{value:e.selfWord,callback:function(t){e.selfWord=t},expression:"selfWord"}}),a("a-icon",{attrs:{type:"check"},on:{click:function(t){return e.doCreate()}}})],1)]}))],2)])]),a("a-button",{attrs:{type:e.type,size:e.size},on:{click:e.showModal}},[e._v(" "+e._s(e.text)+" ")])],1)},s=[],n=a("1da1"),o=a("2909"),r=(a("96cf"),a("d3b7"),a("99af"),a("4de4"),a("a630"),a("3ca3"),a("6062"),a("ddb0"),a("a9e3"),"@@InfiniteScroll"),l=function(e,t){var a,i,s,n,o,r=function(){e.apply(n,o),i=a};return function(){if(n=this,o=arguments,a=Date.now(),s&&(clearTimeout(s),s=null),i){var e=t-(a-i);e<0?r():s=setTimeout((function(){r()}),e)}else r()}},c=function(e){return e===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):e.scrollTop},d=document.defaultView.getComputedStyle,u=function(e){var t=e;while(t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType){var a=d(t).overflowY,i=t.style.overflowY;if("scroll"===a||"auto"===a||"auto"===i)return t;t=t.parentNode}return t},h=function(e){return e===window?document.documentElement.clientHeight:e.clientHeight},p=function(e){return e===window?c(window):e.getBoundingClientRect().top+c(window)},m=function(e){var t=e.parentNode;while(t){if("HTML"===t.tagName)return!0;if(11===t.nodeType)return!1;t=t.parentNode}return!1},g=function(){if(!this.binded){this.binded=!0;var e=this,t=e.el,a=t.getAttribute("infinite-scroll-throttle-delay"),i=200;a&&(i=Number(e.vm[a]||a),(isNaN(i)||i<0)&&(i=200)),e.throttleDelay=i,e.scrollEventTarget=u(t),e.scrollListener=l(f.bind(e),e.throttleDelay),e.scrollEventTarget.addEventListener("scroll",e.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){e.scrollEventTarget.removeEventListener("scroll",e.scrollListener)}));var s=t.getAttribute("infinite-scroll-disabled"),n=!1;s&&(this.vm.$watch(s,(function(t){e.disabled=t,!t&&e.immediateCheck&&f.call(e)})),n=Boolean(e.vm[s])),e.disabled=n;var o=t.getAttribute("infinite-scroll-distance"),r=0;o&&(r=Number(e.vm[o]||o),isNaN(r)&&(r=0)),e.distance=r;var c=t.getAttribute("infinite-scroll-immediate-check"),d=!0;c&&(d=Boolean(e.vm[c])),e.immediateCheck=d,d&&f.call(e);var h=t.getAttribute("infinite-scroll-listen-for-event");h&&e.vm.$on(h,(function(){f.call(e)}))}},f=function(e){var t=this.scrollEventTarget,a=this.el,i=this.distance;if(!0===e||!this.disabled){var s=c(t),n=s+h(t),o=!1;if(t===a)o=t.scrollHeight-n<=i;else{var r=p(a)-p(t)+a.offsetHeight+s;o=n+i>=r}o&&this.expression&&this.expression()}},v={inserted:function(e,t,a){e[r]={el:e,vm:a.context,expression:t.value};var i=arguments;g.call(e[r]),e[r].vm.$nextTick().then((function(){m(e)&&g.call(e[r],i),e[r].bindTryCount=0;var t=function t(){e[r].bindTryCount>10||(e[r].bindTryCount++,m(e)?g.call(e[r],i):setTimeout(t,50))};t()}))},unbind:function(e){e&&e[r]&&e[r].scrollEventTarget&&e[r].scrollEventTarget.removeEventListener("scroll",e[r].scrollListener)}},y=a("4fcf"),b=y.debounce,C={name:"QuickWordButton",directives:{infiniteScroll:v},props:{type:{type:String,default:"danger"},text:{type:String,default:"Command term"},size:{type:String,default:"small"},quickWord:{type:String,default:""},datas:{type:Array,default:function(){return[]}},recommends:{type:Array,default:function(){return[]}},loadApi:{type:Function,default:function(){return Promise.resolve()}},cacheApi:{type:Function,default:function(){return Promise.resolve()}},cacheKey:{type:String,default:""},dataCondition:{type:Object,default:null}},watch:{quickWord:{handler:function(e){this.word=e,this.selfWord=e},immediate:!0},datas:{handler:function(e){this.result=Object(o["a"])(e)},immediate:!0},recommends:{handler:function(e){this.recommendsRes=Object(o["a"])(e),this.loadData()},immediate:!0}},created:function(){this.debounceLoad=b(this.loadData,300),this.loadData()},data:function(){return{word:this.quickWord,result:[],recommendsRes:[],loading:!1,visible:!1,selfWord:this.quickWord,busy:!1}},methods:{loadData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,a=e.$store.getters.userInfo.id,!e.cacheKey||!e.cacheApi){t.next=13;break}if(i=sessionStorage.getItem(a+e.cacheKey),!i){t.next=8;break}e.result=JSON.parse(i),t.next=13;break;case 8:return t.next=10,e.cacheApi({});case 10:s=t.sent,sessionStorage.setItem(a+e.cacheKey,JSON.stringify(s)),e.result=s;case 13:if(e.word||(e.result=e.recommendsRes.concat()),!e.word&&0!==e.recommendsRes.length){t.next=23;break}if(e.result=e.result.filter((function(t){return t.toLocaleLowerCase().indexOf(e.word.toLocaleLowerCase())>-1})),!(e.result.length<4)){t.next=21;break}return t.next=19,e.loadApi({key:e.word});case 19:n=t.sent,e.result=Array.from(new Set(e.result.concat(n)));case 21:t.next=24;break;case 23:e.result=e.recommendsRes.concat();case 24:return e.loading=!1,e.$emit("getResult",e.result),t.abrupt("return",e.result);case 27:case"end":return t.stop()}}),t)})))()},handleInfiniteOnLoad:function(){},visibleChange:function(e){e&&0===this.datas.length&&(this.visible=!1,this.debounceLoad(),this.visible=!0)},handleChange:function(){this.selfWord=this.word,this.$emit("changeWord",this.word),this.debounceLoad()},choose:function(e){this.visible=!1,this.$emit("sub",{word:e,id:e}),this.word="",this.selfWord=""},doCreate:function(){this.visible=!1,this.$emit("sub",{word:this.quickWord,parentId:"1440218576252366850",tag:"Apply",id:-1}),this.word="",this.selfWord=""},showModal:function(){this.visible=!0,this.debounceLoad(),this.$emit("close")},handleCancel:function(){this.word="",this.selfWord="",this.$emit("changeWord",this.word)}}},w=C,k=(a("f5f6"),a("0c7c")),T=Object(k["a"])(w,i,s,!1,null,"8da80b72",null);t["a"]=T.exports},"023b":function(e,t,a){},"0368":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("f93e"),s={data:function(){return{PlanField:i["w"],taskField:i["U"],formConfigPreviewData:null}},filters:{unitLabelName:function(e,t,a){return a&&a.planFieldMap&&a.planFieldMap[t]?a.planFieldMap[t]:e},unitFieldLabel:function(e,t,a){return a&&a.planFieldLabelMap&&a.planFieldLabelMap[t]?a.planFieldLabelMap[t]:e},unitLabelHint:function(e,t,a){return a&&a.planHintMap&&a.planHintMap[t]?a.planHintMap[t]:e},taskLabelName:function(e,t,a){return a&&a.taskFieldMap&&a.taskFieldMap[t]?a.taskFieldMap[t]:e},taskFieldLabel:function(e,t,a){return a&&a.taskFieldLabelMap&&a.taskFieldLabelMap[t]?a.taskFieldLabelMap[t]:e},taskLabelHint:function(e,t,a){return a&&a.taskHintMap&&a.taskHintMap[t]?a.taskHintMap[t]:e}},methods:{unitLabelName:function(e,t){return t&&t.planFieldMap&&t.planFieldMap[e]?t.planFieldMap[e]:null},unitLabelHint:function(e,t){return t&&t.planHintMap&&t.planHintMap[e]?t.planHintMap[e]:null},unitFieldLabel:function(e,t){return t&&t.planFieldLabelMap&&t.planFieldLabelMap[e]?t.planFieldLabelMap[e]:null},taskLabelName:function(e,t){return t&&t.taskFieldMap&&t.taskFieldMap[e]?t.taskFieldMap[e]:null},taskLabelHint:function(e,t){return t&&t.taskHintMap&&t.taskHintMap[e]?t.taskHintMap[e]:null},taskFieldLabel:function(e,t){return t&&t.taskFieldLabelMap&&t.taskFieldLabelMap[e]?t.taskFieldLabelMap[e]:null}}}},"044b":function(e,t){function a(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&a(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(a(e)||i(e)||!!e._isBuffer)}},"05be":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"27.223",height:"28",viewBox:"0 0 27.223 28"},children:[{tag:"path",attrsMap:{id:"pubu_","data-name":"pubu ",class:"cls-1",d:"M17422.268,9413v-7.046h6.957V9413Zm-9.953,0v-7.046h7.268V9413Zm-10.312,0v-7.046h6.953V9413Zm20.266-10.41v-7.231h6.957v7.231Zm-9.953,0v-7.231h7.268v7.231Zm-10.312,0v-7.231h6.953v7.231Zm20.266-10.638V9385h6.957v6.952Zm-9.953,0V9385h7.268v6.952Zm-10.312,0V9385h6.953v6.952Z",transform:"translate(-17402.002 -9385.001)"}}]})}},"05c1":function(e,t,a){},"0910":function(e,t,a){"use strict";a("5ed8")},"09cf":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"44",height:"44",viewBox:"0 0 44 44",style:"color: #15c39a;"},children:[{tag:"defs"},{tag:"g",attrsMap:{transform:"translate(-144 -421)"},children:[{tag:"circle",attrsMap:{class:"a",cx:"22",cy:"22",r:"22",transform:"translate(144 421)"}},{tag:"g",attrsMap:{transform:"translate(155 431)",style:"color: #fff;"},children:[{tag:"path",attrsMap:{class:"b",d:"M7.518,11.828a6.693,6.693,0,1,1,4.293,1.558,9.45,9.45,0,0,0-9.417,8.662H2.362a1.181,1.181,0,1,1-2.308-.356,11.821,11.821,0,0,1,7.464-9.863Zm4.293-.8A4.331,4.331,0,1,0,7.48,6.693a4.331,4.331,0,0,0,4.331,4.331Z"}},{tag:"path",attrsMap:{class:"b",d:"M645.312,645.31v-1.969a1.181,1.181,0,0,1,2.362,0v1.969h1.969a1.181,1.181,0,0,1,0,2.362h-1.969v1.969a1.181,1.181,0,1,1-2.362,0v-1.969h-1.969a1.181,1.181,0,0,1,0-2.362Z",transform:"translate(-628.321 -628.319)"}}]}]}]})}},"0cc0":function(e,t){e.exports="data:image/png;base64,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"},"0cdf":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"collaborate",on:{click:function(t){e.showUser=!1}}},[e._m(0),i("div",{staticClass:"user-select-wrapper"},[i("div",{staticClass:"user-search-wrapper"},[i("a-skeleton",{attrs:{loading:e.loading,active:""}},[i("div",{staticClass:"search-content"},[i("div",{staticClass:"search-left",style:{width:0===e.selectedUserEmailList.length?"600px":"500px"}},[i("div",{class:{"tag-input-wrapper":!0,active:e.active,"tag-dom":!0},on:{click:function(t){return t.stopPropagation(),e.handleFocusInput.apply(null,arguments)}}},[i("div",{staticClass:"tag-input-list tag-dom"},[i("div",{staticClass:"tag-list tag-dom"},[e._l(e.selectedUserList,(function(t){return i("div",{key:t.email,staticClass:"tag-item tag-dom"},[i("a-tag",{staticClass:"tag-dom input-tag-item",attrs:{closable:""},on:{close:function(a){return e.handleCloseTag(t.email)}}},[i("a-avatar",{attrs:{size:"small",src:t.avatar}}),e._v(" "+e._s(t.email)+" ")],1)],1)})),i("div",{staticClass:"tag-input tag-dom"},[i("span",{staticClass:"input-expander"},[e._v(e._s(e.userNameOrEmail))]),e.debounceSearchUser?i("input",{directives:[{name:"model",rawName:"v-model",value:e.userNameOrEmail,expression:"userNameOrEmail"}],ref:"input",staticClass:"search-input",attrs:{type:"text",placeholder:0===e.selectedUserEmailList.length?"Invite teacher by email":""},domProps:{value:e.userNameOrEmail},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.debounceSearchUser.apply(null,arguments)},e.debounceSearchUser],focus:e.debounceSearchUser,search:e.debounceSearchUser,input:function(t){t.target.composing||(e.userNameOrEmail=t.target.value)}}}):e._e()])],2)])]),e.showUser?i("div",{staticClass:"search-user-list",on:{click:function(e){e.stopPropagation()}}},[e.displaySelectUserList.length&&e.active?i("div",{staticClass:"user-list",style:{width:0===e.selectedUserEmailList.length?"590px":"500px"}},[i("a-skeleton",{attrs:{loading:e.loading,active:""}},e._l(e.displaySelectUserList,(function(t){return i("div",{key:t.email,staticClass:"user-item",on:{click:function(a){return e.handleAddToSelect(t)}}},[i("div",{staticClass:"user-avatar-email"},[i("div",{staticClass:"avatar"},[-1!==e.collaborateHistoryUserEmails.indexOf(t.email)?i("img",{attrs:{src:t.avatar,alt:""}}):i("img",{attrs:{src:a("0cc0"),alt:""}})]),i("div",{staticClass:"email-name"},[i("div",{staticClass:"user-name"},[e._v(" "+e._s(t.email)+" ")]),i("div",{staticClass:"email"},[e._v(" "+e._s(t.nickname)+" ")])])]),i("div",{staticClass:"action"},[i("div",{attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"})])])])})),0)],1):e._e()]):e._e()]),e.selectedUserEmailList.length?i("a-dropdown",[i("div",{staticClass:"my-collaborate-select"},[i("span",{staticClass:"permission-set"},[e._v(e._s(e.permission))]),i("a-icon",{attrs:{type:"caret-down"}})],1),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("a",{on:{click:function(t){e.permission="Edit"}}},[e._v(" Edit ")])]),i("a-menu-item",[i("a",{on:{click:function(t){e.permission="Viewer"}}},[e._v(" Viewer ")])])],1)],1):e._e()],1),e.selectedUserEmailList.length?i("div",{staticClass:"send-message"},[i("a-checkbox",{staticClass:"message-check-wrapper",attrs:{"default-checked":""},on:{change:e.onChangeSendMessage}},[e._v(" Send a message ")]),e.sendMessage?i("div",{staticClass:"message-wrapper"},[i("a-textarea",{staticClass:"my-collaborate-textarea",attrs:{"auto-size":{minRows:4,maxRows:6},"allow-clear":"",placeholder:"Entre message","aria-placeholder":"Entre message"},model:{value:e.inviteMessage,callback:function(t){e.inviteMessage=t},expression:"inviteMessage"}})],1):e._e()],1):e._e(),0===e.selectedUserEmailList.length?[e.collaborateUserList.length?i("div",{staticClass:"collaborate-user"},[i("div",{staticClass:"collaborate-user-list"},e._l(e.collaborateUserList,(function(t,a){return i("div",{key:a,staticClass:"user-item"},[i("div",{staticClass:"user-avatar-email"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:t.userAvatar}})]),i("div",{staticClass:"email-name"},[i("div",{staticClass:"user-name"},[e._v(" "+e._s(t.nickName)+" ")]),i("div",{staticClass:"email"},[e._v(" "+e._s(t.userName)+" ")])])]),i("div",{staticClass:"user-status"},[0===t.receiveStatus?i("span",[e._v(" Waiting agree... ")]):e._e(),1===t.receiveStatus&&t.agreeFlag===e.collaborateStatus.disAgree?i("span",[e._v(" Not Accept ")]):e._e(),1===t.receiveStatus&&t.agreeFlag===e.collaborateStatus.refuse?i("span",[e._v(" Application was rejected ")]):e._e()]),i("div",{staticClass:"action"},[i("div",{attrs:{slot:"actions"},slot:"actions"},[t.agreeFlag===e.collaborateStatus.apply?i("div",[i("div",{staticClass:"action-wrapper"},[i("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:function(a){return e.handleAccept(t,e.collaborateStatus.refuse)}}},[e._v("Reject")]),i("a-button",{staticClass:"action-ensure action-item",attrs:{loading:e.agreeLoading,type:"primary",shape:"round"},on:{click:function(a){return e.handleAccept(t,e.collaborateStatus.agree)}}},[e._v("Approve")])],1)]):i("div",{staticClass:"action-wrapper"},[i("div",{staticStyle:{width:"80px"}},[i("a-dropdown",[i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{on:{click:function(i){return e.handleChange(t,"Edit",a)}}},[i("span",[e._v("Edit")])]),i("a-menu-item",{on:{click:function(i){return e.handleChange(t,"Viewer",a)}}},[i("span",[e._v("Viewer")])]),i("a-divider",{staticStyle:{margin:"10px 0"}}),i("a-menu-item",{on:{click:function(i){return e.handleRemove(t,a)}}},[i("span",[e._v("Remove")])])],1),i("div",{staticClass:"my-collaborate-list-item-select"},[i("span",{staticClass:"permission-set"},[e._v(e._s(t.permissions))]),i("a-icon",{attrs:{type:"caret-down"}})],1)],1)],1)])])])])})),0)]):e._e(),0===e.collaborateUserList.length?i("div",{staticClass:"no-collaborate-users"},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:a("5455")}})]),i("div",{staticClass:"tips"},[i("a",[e._v(" No collaborated users find ")])])]):e._e(),i("div",{staticClass:"link-wrapper"},[i("div",{staticClass:"link-setting"},[i("a-tooltip",{attrs:{placement:"top",title:"Click to Reset link"}},[i("img",{staticClass:"refresh-icon",attrs:{src:a("112c"),alt:""},on:{click:e.resetLink}})]),i("div",{staticClass:"link-text"},[e._v(" "+e._s(e.linkUrl)+" ")]),i("div",{staticClass:"action-copy",staticStyle:{width:"40px","font-size":"20px",cursor:"pointer"},on:{click:function(t){return e.handleCopy()}}},[i("a-tooltip",{attrs:{placement:"top",title:"Copy link"}},[i("a-icon",{attrs:{type:"link"}})],1)],1),i("div",{staticClass:"action-copy",staticStyle:{width:"40px","font-size":"20px",cursor:"pointer"},on:{click:function(t){return e.handleEmail()}}},[i("a-tooltip",{attrs:{placement:"top",title:"Send email"}},[i("a-icon",{attrs:{type:"mail"}})],1)],1)],1),i("div",{staticClass:"link-approve"},[i("a-radio",{attrs:{checked:e.approveFlag},on:{click:e.changeApprove}},[e._v("Approval is required for collaborating via this link")])],1)])]:e._e(),e.selectedUserEmailList.length?i("div",{staticClass:"action-line"},[i("a-button",{staticClass:"button-item",attrs:{disabled:0===e.selectedUserList.length,loading:e.conformLoading,type:"primary",shape:"round"},on:{click:e.handleEnsureSelect}},[e._v(" Confirm ")])],1):e._e()],2)],1)]),i("a-modal",{attrs:{width:"600px",title:"Invite by email",footer:null,visible:e.sendEmailVisibility},on:{cancel:function(t){e.sendEmailVisibility=!1}}},[i("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[i("a-form-model-item",{attrs:{prop:"email",label:"email",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a-input",{attrs:{placeholder:"Please input invite email"},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1),i("a-button",{staticStyle:{"margin-left":"40%","margin-bottom":"20px"},attrs:{type:"primary",loading:e.sendLoading},on:{click:e.handleSendEmail}},[e._v(" Send an email ")])],1)],1)],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"toggle-header"},[i("div",{staticClass:"toggle-mode-type-wrapper"},[i("div",{staticClass:"header-icon"},[i("img",{attrs:{src:a("0cc0")}})]),i("div",[e._v("Invite People")])])])}],n=a("5530"),o=(a("a9e3"),a("498a"),a("d81d"),a("9911"),a("ac1f"),a("5319"),a("159b"),a("d3b7"),a("4de4"),a("c740"),a("a434"),a("69b3")),r=a("523d"),l=a("823b"),c=a("3f76"),d=a("ca00"),u=a("b21a"),h=a("2f62"),p=a("d20c"),m=a("4fcf"),g=m.debounce,f={name:"CollaborateUserList",components:{NoMoreResources:o["a"]},props:{mainContent:{type:Object,required:!0},contentId:{type:String,required:!0},contentType:{type:Number,required:!0}},computed:Object(n["a"])({inputWidth:function(){var e=this.inputValue||"",t=20*e.trim().length+22;return(t>100?t:100)+"px"},selectedUserEmailList:function(){return this.selectedUserList.map((function(e){return e.email}))},linkUrl:function(){var e=this.collaborate.link?"https://api.classcipe.com/collaborate/"+this.collaborate.link.linkCode:"";return e.indexOf("https://api")>-1&&(e=e.replace("https://api","https://my")),e},displaySelectUserList:function(){var e=this,t=[];return this.userList.forEach((function(a){-1===e.selectedUserEmailList.indexOf(a.email.trim())&&a.email.trim()!==e.$store.getters.userInfo.email&&t.push(a)})),t}},Object(h["c"])({vueSocket:"vueSocket"})),watch:{},data:function(){return{active:!1,loading:!1,conformLoading:!1,userNameOrEmail:null,collaborate:{},userList:[],collaborateUserList:[],selectedUserList:[],inviteMessage:null,publishMessage:null,inviteExperts:!1,inviteAll:!1,showUser:!1,approveFlag:!1,sendMessage:!0,permission:"Edit",collaborateStatus:c["a"],agreeLoading:!1,collaborateHistoryUsers:[],collaborateHistoryUserEmails:[],sendEmailVisibility:!1,validatorRules:{email:[{required:!0,type:"email",message:"Please input right email!",trigger:"blur"}]},model:{},sendLoading:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},debounceSearchUser:null}},created:function(){this.debounceSearchUser=g(this.searchUser,500),this.queryContentCollaborates(),this.findHistoryUsers()},methods:{handleFocusInput:function(){this.$refs["input"].focus(),this.active=!0},handleCloseTag:function(e){l["info"]("handleCloseTag "+e);var t=[];this.selectedUserList.forEach((function(a){a.email!==e&&t.push(a)})),this.selectedUserList=t,this.$logger.info("after handleCloseTag",this.selectedUserList)},handleEnsureSelect:function(){var e=this;this.$logger.info("handleEnsureSelect",this.selectedUserList);var t={id:this.contentId,type:this.contentType,users:this.selectedUserEmailList,permission:this.permission,message:this.inviteMessage};this.conformLoading=!0,Object(r["d"])(t).then((function(t){t.success?e.$message.success("Invite successfully"):e.$message.error(t.message)})).finally((function(){e.conformLoading=!1,e.selectedUserList=[],e.userNameOrEmail="",e.queryContentCollaborates(),e.searchUser(),e.showUser=!1}))},searchUser:function(){var e=this;this.$logger.info("searchUser "+this.userNameOrEmail),this.showUser=!0,this.userNameOrEmail?Object(d["isEmail"])(this.userNameOrEmail.trim())?(this.$logger.info("CollaboratesSearchUser "+this.userNameOrEmail),Object(r["i"])({name:this.userNameOrEmail.trim()}).then((function(t){e.$logger.info("SearchUser response",t),e.userList=t.result})).finally((function(){e.loading=!1}))):this.userList=this.collaborateHistoryUsers.filter((function(t){return-1!==t.email.trim().toLowerCase().indexOf(e.userNameOrEmail.trim().toLowerCase())||-1!==t.nickname.trim().toLowerCase().indexOf(e.userNameOrEmail.trim().toLowerCase())})):this.userList=this.collaborateHistoryUsers},findHistoryUsers:function(){var e=this;Object(r["i"])({name:""}).then((function(t){e.$logger.info("SearchUser response",t),e.collaborateHistoryUsers=t.result,e.collaborateHistoryUserEmails=t.result.map((function(e){return e.email}))})).finally((function(){}))},handleAddToSelect:function(e){this.$logger.info("handleAddToSelect "+e.email+" permisson "+this.permission);var t=this.selectedUserList.findIndex((function(t){return t.email===e.email}));-1!==t?this.selectedUserList.splice(t,1):(e.permission=this.permission,this.selectedUserList.push(e)),this.active=!1,this.userNameOrEmail="",this.$logger.info("selectedUserList ",this.selectedUserList)},handleToggleType:function(e){this.$logger.info("handleToggleType "+e),this.userSelectMode=e},handleCancel:function(){this.$logger.info("handleCancel"),this.$emit("cancel")},handleCopy:function(){var e=this;this.$logger.info("handleCopy"),this.$copyText(this.linkUrl).then((function(){e.$message.success("Copy successfully")})).catch((function(){e.$message.error("Copy failed")}))},handleEmail:function(){this.$logger.info("handleEmail"),this.sendEmailVisibility=!0},resetLink:function(){var e=this;this.collaborate.link.needUpdateCode=!0,Object(r["l"])(this.collaborate.link).then((function(t){e.$logger.info("CollaboratesUpdateLink response:",t),t.success&&(e.collaborate.link=t.result,e.$message.success("Reset link successfully"))})).finally((function(){}))},changeApprove:function(){var e=this;this.approveFlag=!this.approveFlag,this.collaborate.link.approveFlag=this.approveFlag,this.approveFlag&&(this.collaborate.link.needUpdateCode=!0),Object(r["l"])(this.collaborate.link).then((function(t){e.$logger.info("CollaboratesUpdateLink response:",t),t.success&&(e.collaborate.link=t.result,e.$copyText(e.linkUrl).then((function(){e.$message.success("The link has been reset and copied in your clipboard")})).catch((function(){e.$message.error("Copy failed")})))})).finally((function(){}))},queryContentCollaborates:function(){var e=this;this.collaborate={},this.loading=!0,Object(r["s"])({id:this.contentId,type:this.contentType}).then((function(t){e.$logger.info("QueryContentCollaborates response:",t),t.success&&(e.collaborate=t.result,e.collaborateUserList=e.collaborate.users,e.approveFlag=e.collaborate.link.approveFlag)})).finally((function(){e.loading=!1,e.$emit("confirmSelect",e.collaborate)}))},onChangeSendMessage:function(e){this.sendMessage=e.target.checked},back:function(){this.showUser=!1,this.selectedUserList=[],this.userNameOrEmail=""},handleAccept:function(e,t){var a=this;this.$logger.info("handleAccept",e),this.agreeLoading=!0,Object(r["b"])({id:e.id,agreeFlag:t}).then((function(e){l["info"]("handleApply",e),t===a.collaborateStatus.agree?a.$message.success("Agree successfully"):a.$message.success("Disagree successfully")})).then((function(){a.agreeLoading=!1,a.queryContentCollaborates()}))},handleChange:function(e,t,a){var i=this;e.permissions=t,this.$set(this.collaborateUserList,a,e),this.$logger.info("handleChange",e),Object(r["k"])(e).then((function(e){l["info"]("handleChange",e),i.$message.success("Update successfully")})).then((function(){i.vueSocket.sendMessageToUsers(u["k"],[e.userId],{busType:p["a"].changeCollaborate,busId:e.sourceId})}))},handleRemove:function(e,t){var a=this;this.$logger.info("handleRemove",e);var i=this;this.$confirm({title:"Confirm remove user",content:"Are you confirm remove user "+e.nickName+" ?",centered:!0,onOk:function(){Object(r["h"])(e).then((function(e){a.$logger.info("handleRemove",e),a.$message.success("Remove successfully")})).finally((function(){i.collaborateUserList.splice(t,1),i.queryContentCollaborates()}))}})},handleSendEmail:function(){var e=this,t=this;this.$refs.form.validate((function(a){if(!a)return!1;t.sendLoading=!0,Object(r["j"])({id:e.contentId,type:e.contentType,email:e.model.email}).then((function(t){l["info"]("handleChange",t),e.$message.success("Send successfully")})).finally((function(){t.sendLoading=!1,t.sendEmailVisibility=!1,t.model.email=""}))}))}}},v=f,y=(a("ceb7"),a("e0e1"),a("0c7c")),b=Object(y["a"])(v,i,s,!1,null,"14c6ecf3",null);t["a"]=b.exports},"0d05":function(e,t,a){"use strict";a("f2aa")},"0da1":function(e,t,a){},"0da2":function(e,t){},"0ddc":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAhCAYAAADDAmudAAAAAXNSR0IArs4c6QAABCdJREFUSEuNlk9oHFUcx7+/mbe0YCtpMgvapNCCgRzqIeBB7c7iQISKFgpFmqKHFsykMUENxkMPkuZUDykpSMzO5FIQwUNEpJF4m7C7xUqFFlpoQSGBJqWQSRo0xpR9Mz952W7cTebPvuPM730/7/fe9/d7jxAxst7kgVDPXCHiLgLmQz28vvrmwHJUbNo3Sgowis4EEX3GzJKAQiXY/HLdGl5PE63/nwiANyoMcfgGgU6qScxYCqD1Ps1/dLNZSDIAwIve5Cv7ROYegP1VCMtQp961E/YPzUBSAUrEKDvfEtOHNUEFgUbn/Zz9XRqkKUBrqXBShzZXL6YgTMitmv2/JUGiAd6ogDUmaxOVqyAyf+8RYl6sBJvdSQcfCWj1vnld0/U2P9//8w6k5P5bO4d6UMi4vpq3L8RlEQlo8aaOZnTtdiXY7KytLlt2F8A4GiUkWcvFOSsS8Nw5f4SgoVWzb1LZNSvaK3GrZGDeN20r6n/0Ft10z+ghZhiY9U371CFv6rgQurJq7AikfGPN+vjW7oBIQLbkzEEVF2FxJWcfM0rTowS+nARg5mt+vn84FWAUnXeJaLZWVH7w+GBWP/wARJH7/39tYMnP20cSAQc9x9in0x0idFQDeYOBcQIlrr4m+kxWOv+yBv9UZ1azecMWGUXnRyI6vbMK5g2ABKjaJtIGIzjlmwOzbUXndBCEd9etgcUdQLbkfgrgWppI4jmAR3yz/2pbye0B4wNVH9uANs/p0nS60+xK4+1Kl32zb6yt6J7XgCkElew2wCi5HgFvpa2eQx6DRmcJ6IqKZVQB2aL7NQhDIOol1RZ0IX5NE6+6CueCILgvhH47qm2o/36wPGPo7QvKKMq6ZBTdKSJcbAZQkehet+y7cXUhZfCqntFOEFNhe0HgXyhbcu4BdDwVwPxkJXh8RNlP2Xm/oEf1WajbDpreQ6Esg8ioAjBPRtGpEJFIAzBoxDf7rtbijJJ7g4D36guNwC0gOrDzrZqBy2niAH+1YvZfqo9rxtbMGFeAFWWkaFfgYUjywlpubxM7VHJyAlRKrAvGOdqdat2ErUBuda5ZnyxFiWzfGUJfiK8Jls8kXiajWLhIpE3tDkzq8TvFKehBHCAEZlZN+31q8SZahHhhgYCW+mAGyr5pm3EC2fL0WTB/H721LAMZdj+1Bu4/r+Tpzwk83hDM2NoMKsf+sQafRIkkVb86XD9vf6HmVZvd9guufY6AnsYsuMx62NvwLlWxevsVIozEGGPel8tv72nX6mnCQswRKLc7EwbPA3io3EZALu7yYXCZpHxnxRrcqGk0Xpnqcs+0T4AxlF4bjRFMKPiV5WFYY1v1fyLvZMMrvAahjdZXagLwFiO45JsDKss9I/Hp2OpNd+iCz0BtC9ABwkscQoLUdtHvUvJPqvklZfsfz73LKUKJwB0AAAAASUVORK5CYII="},"0e76":function(e,t,a){"use strict";a("a5f4")},"0eda":function(e,t,a){},"0f1d":function(e,t,a){"use strict";a("4830")},"0f63":function(e,t,a){"use strict";a("0187")},"0fa0":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relevant-tag-selector-wrapper"},[a("div",{staticClass:"question-list"},e._l(e.relevantQuestionList,(function(t,i){return a("div",{key:i,staticClass:"question-item"},[t.questionId?a("div",{class:{question:!0,"checked-item":-1!==e.selectedQuestionIdList.indexOf(t.questionId)},on:{click:function(a){return e.handleSelectQuestion(t)}}},[a("div",{staticClass:"content-text"},[e._v(" "+e._s(t.questionName?t.questionName:"Unnamed question")+" ")]),a("div",{staticClass:"selected-icon"},[-1!==e.selectedQuestionIdList.indexOf(t.questionId)?a("a-icon",{attrs:{type:"check-circle",theme:"filled"}}):e._e()],1)]):e._e(),a("div",{staticClass:"item-list"},e._l(t.knowledgeTagList,(function(t,i){return a("div",{key:i,class:{"item-item":!0,"checked-item":-1!==e.selectedKnowledgeTagIdList.indexOf(t.id)},on:{click:function(a){return e.handleSelectKnowledge(t)}}},[a("div",{staticClass:"item-name"},[a("div",{staticClass:"content-text"},[e._v(" "+e._s(t.info.description?t.info.description:"Unnamed description")+" ")]),a("div",{staticClass:"selected-icon"},[-1!==e.selectedKnowledgeTagIdList.indexOf(t.id)?a("a-icon",{attrs:{type:"check-circle",theme:"filled"}}):e._e()],1)])])})),0),a("div",{staticClass:"item-list"},e._l(t.skillTagList,(function(t,i){return a("div",{key:i,class:{"item-item":!0,"checked-item":-1!==e.selectedSkillTagIdList.indexOf(t.id)},on:{click:function(a){return e.handleSelectSkill(t)}}},[a("div",{staticClass:"item-name"},[a("div",{staticClass:"content-text"},[e._v(" "+e._s(t.info.description?t.info.description:"Unnamed description")+" ")]),a("div",{staticClass:"selected-icon"},[-1!==e.selectedSkillTagIdList.indexOf(t.id)?a("a-icon",{attrs:{type:"check-circle",theme:"filled"}}):e._e()],1)])])})),0)])})),0)])},s=[],n=(a("c740"),a("a434"),a("159b"),a("99af"),{name:"RelevantTagSelector",props:{relevantQuestionList:{type:Array,default:function(){return[]}}},data:function(){return{selectedQuestionIdList:[],selectedQuestionList:[],selectedKnowledgeTagList:[],selectedKnowledgeTagIdList:[],selectedSkillTagList:[],selectedSkillTagIdList:[]}},created:function(){this.$logger.info("RelevantTagSelector relevantQuestionList",this.relevantQuestionList)},methods:{handleSelectQuestion:function(e){var t=this;this.$logger.info("handleSelectQuestion",e);var a=this.selectedQuestionIdList.indexOf(e.questionId),i=this.selectedQuestionList.findIndex((function(t){return t.questionId===e.questionId}));-1!==a&&-1!==i?(this.selectedQuestionIdList.splice(a,1),this.selectedQuestionList.splice(i,1),e.knowledgeTagList.forEach((function(e){var a=t.selectedKnowledgeTagIdList.findIndex((function(t){return t===e.id})),i=t.selectedKnowledgeTagList.findIndex((function(t){return t.info.id===e.id}));-1!==a&&-1!==i&&(t.selectedKnowledgeTagIdList.splice(a,1),t.selectedKnowledgeTagList.splice(i,1))})),e.skillTagList.forEach((function(e){var a=t.selectedSkillTagIdList.findIndex((function(t){return t===e.id})),i=t.selectedSkillTagList.findIndex((function(t){return t.info.id===e.id}));-1!==a&&-1!==i&&(t.selectedSkillTagIdList.splice(a,1),t.selectedSkillTagList.splice(i,1))}))):(this.selectedQuestionIdList.push(e.questionId),this.selectedQuestionList.push(e)),this.updateSelected()},handleSelectKnowledge:function(e){this.$logger.info("handleSelectKnowledge",e);var t=this.selectedKnowledgeTagIdList.findIndex((function(t){return t===e.id})),a=this.selectedKnowledgeTagList.findIndex((function(t){return t.info.id===e.id}));-1!==t&&-1!==a?(this.selectedKnowledgeTagIdList.splice(t,1),this.selectedKnowledgeTagList.splice(a,1)):(this.selectedKnowledgeTagIdList.push(e.id),this.selectedKnowledgeTagList.push(e)),this.updateSelected()},handleSelectSkill:function(e){this.$logger.info("handleSelectSkill",e);var t=this.selectedSkillTagIdList.findIndex((function(t){return t===e.id})),a=this.selectedSkillTagList.findIndex((function(t){return t.id===e.id}));-1!==t&&-1!==a?(this.selectedSkillTagIdList.splice(t,1),this.selectedSkillTagList.splice(a,1)):(this.selectedSkillTagIdList.push(e.id),this.selectedSkillTagList.push(e)),this.updateSelected()},updateSelected:function(){var e=this;this.$logger.info("updateSelected",this.selectedQuestionList,this.selectedKnowledgeTagIdList,this.selectedSkillTagIdList);var t=[];this.selectedQuestionList.forEach((function(a){var i={id:a.questionId,name:a.questionName,knowledgeTags:[],skillTags:[]};a.knowledgeTagList.forEach((function(t){-1!==e.selectedKnowledgeTagIdList.indexOf(t.info.id)&&(i.knowledgeTags=i.knowledgeTags.concat(t.tagList))})),a.skillTagList.forEach((function(t){-1!==e.selectedSkillTagIdList.indexOf(t.info.id)&&(i.skillTags=i.skillTags.concat(t.tagList))})),t.push(i)})),this.$logger.info("updateSelected data",t),this.$emit("update-selected",{questionList:t})}}}),o=n,r=(a("e76a"),a("0c7c")),l=Object(r["a"])(o,i,s,!1,null,"5235376e",null);t["a"]=l.exports},"0fea":function(e,t,a){"use strict";a.d(t,"f",(function(){return u})),a.d(t,"e",(function(){return h})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return g})),a.d(t,"g",(function(){return f})),a.d(t,"d",(function(){return v}));a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("2ca0"),a("2b0e");var i=a("b775"),s=a("53ca"),n=a("d4ec"),o=a("bee2"),r=(a("ac1f"),a("caad"),a("2532"),a("25f0"),a("b64b"),a("6821")),l=a.n(r),c="dd05f1c54d63749eda95f9fa6d49v442a",d=function(){function e(){Object(n["a"])(this,e)}return Object(o["a"])(e,null,[{key:"sortAsc",value:function(e){var t=[],a=0;for(var i in e)t[a]=i,a++;var s=t.sort(),n={};for(var o in s)n[s[o]]=e[s[o]];return n}},{key:"getSign",value:function(e,t){var a=this.parseQueryString(e),i=this.mergeObject(a,t),s=this.sortAsc(i);return l()(JSON.stringify(s)+c).toUpperCase()}},{key:"parseQueryString",value:function(e){var t=/^[^\\?]+\?([\w\W]+)$/,a=/([^&=]+)=([\w\W]*?)(&|$|#)/g,i=t.exec(e),s={},n=e.substring(e.lastIndexOf("/")+1);if(n.includes(",")&&(n.includes("?")&&(n=n.substring(0,n.indexOf("?"))),s["x-path-variable"]=decodeURI(n)),i&&i[1]){var o,r=i[1];while(null!=(o=a.exec(r)))this.myIsNaN(o[2])&&(o[2]=o[2].toString()),s[o[1]]=o[2]}return s}},{key:"mergeObject",value:function(e,t){if(t&&Object.keys(t).length>0)for(var a in t)!0===t.hasOwnProperty(a)&&(this.myIsNaN(t[a])&&(t[a]=t[a].toString()),e[a]=t[a]);return e}},{key:"urlEncode",value:function(e,t,a){if(null===e)return"";var i="",n=Object(s["a"])(e);if("string"===n||"number"===n||"boolean"===n)i+="&"+t+"="+(null==a||a?encodeURIComponent(e):e);else for(var o in e){var r=null==t?o:t+(e instanceof Array?"["+o+"]":"."+o);i+=this.urlEncode(e[o],r,a)}return i}},{key:"getDateTimeToString",value:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();a<10&&(a="0"+a),i<10&&(i="0"+i);var s=e.getHours(),n=e.getMinutes(),o=e.getSeconds(),r=e.getMilliseconds();return s<10&&(s="0"+s),n<10&&(n="0"+n),o<10&&(o="0"+o),r<10&&(o="0"+r),t+""+a+i+s+n+o}},{key:"myIsNaN",value:function(e){return"number"===typeof e&&!isNaN(e)}}]),e}();function u(e,t){var a=d.getSign(e,t),s={"X-Sign":a,"X-TIMESTAMP":d.getDateTimeToString()};return Object(i["c"])({url:e,method:"post",data:t,headers:s})}function h(e,t,a){var s=d.getSign(e,t),n={"X-Sign":s,"X-TIMESTAMP":d.getDateTimeToString()};return Object(i["c"])({url:e,method:a,data:t,headers:n})}function p(e,t){var a=d.getSign(e,t),s={"X-Sign":a,"X-TIMESTAMP":d.getDateTimeToString()};return Object(i["c"])({url:e,method:"get",params:t,headers:s})}function m(e,t){return Object(i["c"])({url:e,method:"post",params:t})}function g(e,t){return Object(i["c"])({url:e,params:t,method:"get",responseType:"blob"})}function f(e,t){return Object(i["c"])({url:e,data:t,method:"post",headers:{"Content-Type":"multipart/form-data"}})}function v(e,t){t||(t="http");try{if(e&&e.startsWith(t))return e;if(e&&e.length>0&&-1===e.indexOf("["))return"https://api.app.classcipe.com/classcipe/"+e}catch(a){}}},1054:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19"},children:[{tag:"g",attrsMap:{transform:"translate(0.5 0.5)"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:rgba(228,228,228,0.2);stroke:#888996;",d:"M9,0A9,9,0,1,1,0,9,9,9,0,0,1,9,0Z"}},{tag:"path",attrsMap:{class:"b",style:"fill:#888996;",d:"M24.47,24.8V21.78h3.016a.5.5,0,0,0,0-1.005H24.47V17.759a.5.5,0,0,0-1.005,0v3.016H20.449a.5.5,0,0,0,0,1.005h3.016V24.8a.5.5,0,0,0,1.005.044q0-.022,0-.044Z",transform:"translate(-14.966 -12.299)"}}]}]})}},1077:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{t:"1649489113509",class:"icon",viewBox:"0 0 1049 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2299","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"204.8828125",height:"200"},children:[{tag:"defs"},{tag:"path",attrsMap:{d:"M498.572908 914.311043 136.915348 914.311043c-13.711277 0-26.391441-4.56833-35.716719-12.868783-4.677728-4.162172-12.519211-13.064946-12.519211-25.906064L88.679418 233.106795c0-12.833574 7.841482-21.737605 12.519211-25.897262 9.326535-8.302968 22.005442-12.87004 35.716719-12.87004l205.567298 0L342.482646 105.661332 124.340809 105.661332c-32.390754 0-63.044964 11.416424-86.321692 32.130461C13.501282 159.622449 0 189.006631 0 220.532257l0 667.578478c0 31.534428 13.501282 60.917352 38.019117 82.741721 23.276728 20.720325 53.930938 32.129203 86.314147 32.129203l434.183726 0C534.790094 980.983761 514.506106 942.74459 498.572908 914.311043L498.572908 914.311043zM498.572908 914.311043","p-id":"2300",fill:"#2c2c2c"}},{tag:"path",attrsMap:{d:"M897.337931 207.209533c4.677728 4.160915 12.520468 13.063688 12.520468 25.897262l0 241.393416c27.487941 10.736141 65.641606 25.273565 88.678161 42.964683L998.536559 220.538544c0-31.525626-13.508827-60.914837-38.026662-82.739206-23.269184-20.721582-53.923394-32.130461-86.314147-32.130461L646.926056 105.668877l0 88.670616 214.696413 0C875.333746 194.339493 888.013911 198.907823 897.337931 207.209533L897.337931 207.209533zM897.337931 207.209533","p-id":"2301",fill:"#2c2c2c"}},{tag:"path",attrsMap:{d:"M789.258515 359.675813l-64.738754-64.733724L540.434804 479.001896 540.434804 34.339807C540.434804 15.384948 525.056143 0 506.100027 0l-22.89069 0c-18.954859 0-34.33855 15.384948-34.33855 34.339807l0 425.156465L284.705157 295.329384l-67.003429 67.004686 278.62411 278.61908 0 0","p-id":"2302",fill:"#2c2c2c"}},{tag:"path",attrsMap:{d:"M803.458941 533.592998c-135.430295 0-245.203501 109.750572-245.203501 245.202244 0 135.416463 109.773206 245.204759 245.203501 245.204759 135.415205 0 245.203501-109.788296 245.203501-245.204759C1048.662442 643.34357 938.874147 533.592998 803.458941 533.592998L803.458941 533.592998 803.458941 533.592998zM956.254674 718.593381 784.663778 884.059218c-2.294853 2.294853-4.851257 4.069121-7.603823 5.407052-10.77135 7.664181-25.859538 6.703486-35.518042-2.953759l-73.693083-73.711945c-10.775122-10.775122-10.775122-28.237384 0-38.993644 10.775122-10.816618 28.236126-10.816618 39.009991 0l55.314138 55.295276 155.069209-149.501203c10.75626-10.795241 28.234869-10.795241 39.011248 0C967.024766 690.355997 967.024766 707.834606 956.254674 718.593381L956.254674 718.593381 956.254674 718.593381zM956.254674 718.593381","p-id":"2303",fill:"#2c2c2c"}}]})}},"112c":function(e,t){e.exports="data:image/png;base64,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"},1138:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rubric",on:{click:e.handleUpdateHeader}},[i("table",{staticClass:"rubric-table"},[i("thead",[e.mode===this.tableMode.Edit?i("draggable",{staticClass:"table-header",attrs:{tag:"tr",disabled:e.disabledDraggable},on:{end:e.handleDragEnd},model:{value:e.headers,callback:function(t){e.headers=t},expression:"headers"}},e._l(e.headers,(function(t,s){return t.visible?i("th",{key:t.type,class:{"header-item":!0,"preview-mode":e.mode===e.tableMode.Preview,"min-header-width":-1!==[e.headerType.AchievementLevel].indexOf(t.type),"criteria-header-width":-1!==[e.headerType.Criteria].indexOf(t.type),"medium-header-width":-1!==[e.headerType.Description].indexOf(t.type)&&e.formType!==e.tableType.Rubric},attrs:{"data-header":JSON.stringify(t),"data-header-type":t.type,"data-header-mode":e.mode}},[i("div",{staticClass:"label-text",on:{click:function(a){return a.stopPropagation(),e.handleEditHeader(t)}}},[i("span",{staticClass:"header-label"},[e._v(e._s(t.label))])]),t.editing?[i("div",{staticClass:"label-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"header.label"}],staticClass:"header-input-item",domProps:{value:t.label},on:{click:function(e){e.stopPropagation()},blur:e.handleUpdateHeader,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleUpdateHeader.apply(null,arguments)},input:function(a){a.target.composing||e.$set(t,"label",a.target.value)}}})])]:e._e(),[i("div",{staticClass:"add-header-item"},[i("a-tooltip",{attrs:{title:"Add new level"}},[i("a-icon",{attrs:{type:"plus-circle"},on:{click:function(t){return e.handleAddNewHeader(s)}}})],1)],1)],t.type.startsWith(e.headerType.UserDefine)?i("div",{staticClass:"remove-header"},[i("a-popconfirm",{staticClass:"rubric-delete-popconfirm",attrs:{title:"Remove Header ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleRemoveHeader(t)}}},[i("template",{slot:"icon"},[i("div",{staticClass:"rubric-big-delete"},[i("img",{staticClass:"big-delete-icon",attrs:{src:a("dfe9")}})])]),i("img",{staticClass:"link-icon",attrs:{src:a("4165")}})],2)],1):e._e()],2):e._e()})),0):e._e(),e.mode!==this.tableMode.Edit?i("tr",{staticClass:"table-header"},e._l(e.headers,(function(t){return t.visible?i("th",{key:t.type,class:{"header-item":!0,"preview-mode":e.mode===e.tableMode.Preview},attrs:{"data-header":JSON.stringify(t),"data-header-type":t.type,"data-header-mode":e.mode}},[i("div",{staticClass:"label-text"},[i("span",{staticClass:"header-label"},[e._v(e._s(t.label))])])]):e._e()})),0):e._e()],1),i("tbody",{staticClass:"table-body"},e._l(e.list,(function(t,s){return i("tr",{directives:[{name:"show",rawName:"v-show",value:!(t.hasOwnProperty("isSelectedIBLine")&&t.isSelectedIBLine&&e.$store.getters.hiddenIbCurriculumId),expression:"!(item.hasOwnProperty('isSelectedIBLine') && item.isSelectedIBLine && $store.getters.hiddenIbCurriculumId)"}],key:s,staticClass:"body-line",attrs:{"data-row-id":t.rowId}},[e._l(e.headers,(function(n,o){return n.visible?i("td",{key:s+"-"+n.type,class:{"body-item":!0,"big-body-item":e.formType===e.tableType.CenturySkills&&n.type===e.headerType.Description},attrs:{"data-index":o,"data-row-id":t.rowId,"data-header-type":n.type},on:{click:function(a){return e.handleClickBodyItem(t,n)}}},[t.hasOwnProperty(n.type)?[n.type===e.headerType.Criteria?[e.formType===e.tableType.CenturySkills?[t[e.headerType.Criteria]&&t[e.headerType.Criteria].name?[i("div",{staticClass:"data-item criteria-data",on:{dblclick:function(a){return a.stopPropagation(),e.handleAddCriteria(n,t,a)}}},[i("div",{staticClass:"criteria-name"},[e._v(" "+e._s(t[e.headerType.Criteria].userInputText?t[e.headerType.Criteria].userInputText:t[e.headerType.Criteria].name)+" ")]),e.mode===e.tableMode.Edit?i("span",{staticClass:"edit-description",on:{click:function(a){return a.stopPropagation(),e.handleClickEnterCriteria(n,t)}}},[e._v(" Please enter explanation for students to understand ")]):e._e()])]:[i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.tableMode.Edit,expression:"mode === tableMode.Edit"}],staticClass:"data-item add-criteria",on:{click:function(a){return a.stopPropagation(),e.handleAddCriteria(n,t,a)}}},[i("add-opacity-icon"),i("div",{staticClass:"add-text"},[e._v("Click to choose the objectives")])],1)]]:e._e(),e.formType===e.tableType.Rubric?[t[e.headerType.Criteria].isSelfInput||t[e.headerType.Criteria].name?t[e.headerType.Criteria].isSelfInput&&e.mode===e.tableMode.Edit?[i("div",{staticClass:"add-criteria-input",on:{click:function(e){e.stopPropagation()}}},[i("a-textarea",{staticClass:"my-text-input",staticStyle:{height:"100%"},attrs:{placeholder:"Enter"},model:{value:t[e.headerType.Criteria].name,callback:function(a){e.$set(t[e.headerType.Criteria],"name",a)},expression:"item[headerType.Criteria].name"}})],1)]:[i("div",{staticClass:"data-item criteria-data",on:{dblclick:function(a){return e.handleAddCriteria(n,t,a)}}},[i("div",{staticClass:"criteria-name"},[e._v(" "+e._s(t[e.headerType.Criteria].name)+" ")])])]:[i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.tableMode.Edit,expression:"mode === tableMode.Edit"}],staticClass:"data-item add-criteria-option",attrs:{"data-is-self-input":t[e.headerType.Criteria].isSelfInput},on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"create-option-select",on:{click:function(a){return e.handleAddCriteria(n,t,a)}}},[i("add-opacity-icon"),i("div",{staticClass:"add-text"},[e._v("Click to choose the objectives")])],1),i("div",{staticClass:"create-option-input",on:{click:function(a){return e.handleInputIBCriteria(n,t,a)}}},[i("a-icon",{style:{fontSize:"18px"},attrs:{type:"edit"}}),i("div",{staticClass:"add-text"},[e._v("Enter customized content")])],1)])]]:e._e(),e.formType===e.tableType.Rubric_2?[i("div",{staticClass:"data-item criteria-data"},[i("div",{staticClass:"criteria-name"},[e._v(" "+e._s(t[e.headerType.Criteria].name)+" ")])])]:e._e()]:e._e(),n.type===e.headerType.Description?[e.formType===e.tableType.Rubric_2?[t[e.headerType.Description]&&t[e.headerType.Description].name?[i("div",{staticClass:"data-item criteria-data",on:{dblclick:function(a){return e.handleAddCriteria(n,t,a)}}},[i("div",{staticClass:"criteria-name"},[e._v(" "+e._s(t[e.headerType.Description].name)+" ")])])]:[i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.tableMode.Edit,expression:"mode === tableMode.Edit"}],staticClass:"data-item add-criteria",on:{click:function(a){return e.handleAddCriteria(n,t,a)}}},[i("add-opacity-icon"),i("div",{staticClass:"add-text"},[e._v("Click to choose the objectives")])],1)]]:e._e(),e.formType===e.tableType.CenturySkills?[t[e.headerType.Description]&&t[e.headerType.Description].name?[i("div",{staticClass:"data-item criteria-data"},[i("div",{staticClass:"criteria-name my-century-criteria",on:{dblclick:function(a){return e.handleAddCriteria(n,t,a)}}},[i("div",{staticClass:"criteria-left-name-list"},e._l(t[e.headerType.Description].parentNameList,(function(t,a){return i("div",{key:a,class:{"criteria-left-name-item":!0,"first-left-name":0===a,"no-first-name":a>0}},[e._v(" "+e._s(t)+" ")])})),0),i("div",{staticClass:"criteria-right-description"},[i("div",{staticClass:"description-name"},[e._v(" "+e._s(t[e.headerType.Description].userInputText?t[e.headerType.Description].userInputText:t[e.headerType.Description].name)+" ")]),e.mode===e.tableMode.Edit&&e.$store.getters.bindCurriculum!==e.AllCurriculums.AU&&e.$store.getters.bindCurriculum!==e.AllCurriculums.NZ?i("span",{staticClass:"edit-description",on:{click:function(a){return a.stopPropagation(),e.handleClickEnterCriteriaDescription(n,t)}}},[e._v(" Please enter explanation for students to understand ")]):e._e()])])])]:[i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.tableMode.Edit,expression:"mode === tableMode.Edit"}],staticClass:"data-item add-criteria",on:{click:function(a){return e.handleAddCriteria(n,t,a)}}},[i("add-opacity-icon"),i("div",{staticClass:"add-text"},[e._v("Click to choose the objectives")])],1)]]:e._e()]:e._e()]:e._e(),e.mode===e.tableMode.Edit?[n.type===e.headerType.Comment?[i("div",{staticClass:"comment-indicator-input"},[i("a-textarea",{staticClass:"my-text-input",staticStyle:{height:"100%"},attrs:{placeholder:""},on:{blur:function(a){return e.handleUpdateField(n,t)}},model:{value:t[e.headerType.Comment].name,callback:function(a){e.$set(t[e.headerType.Comment],"name",a)},expression:"item[headerType.Comment].name"}})],1)]:e._e(),n.type.startsWith(e.headerType.UserDefine)?[i("div",{staticClass:"user-define-indicator-input"},[i("a-textarea",{staticClass:"my-text-input",staticStyle:{height:"100%"},attrs:{placeholder:"Enter"},on:{blur:function(a){return e.handleUpdateField(n,t)}},model:{value:t[n.type].name,callback:function(a){e.$set(t[n.type],"name",a)},expression:"item[header.type].name"}})],1)]:e._e()]:e._e(),n.type===e.headerType.AchievementLevel?[i("div",{staticClass:"sub-level-data",attrs:{data:JSON.stringify(e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId])}},[i("div",{staticClass:"sub-level-list",attrs:{"data-mode":e.mode},on:{click:function(e){e.stopPropagation()}}},[e.mode===e.tableMode.Edit||e.mode===e.tableMode.TeacherEvaluate?e._l(t[e.headerType.AchievementLevel].subLevelDescription,(function(s,o){return i("div",{key:o,staticClass:"sub-level-item"},[e.mode===e.tableMode.Edit?[i("div",{staticClass:"start-index",on:{click:function(t){return t.stopPropagation(),e.handleSwitchModeTips.apply(null,arguments)}}},[i("div",{staticClass:"select-block"},[i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}})],1),e._v(" "+e._s(s.startIndex)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:null!==s.endIndex,expression:"subLevel.endIndex !== null"}],staticClass:"end-index",on:{click:function(t){return t.stopPropagation(),e.handleSwitchModeTips.apply(null,arguments)}}},[i("div",{staticClass:"select-block"},[i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}})],1),e._v(" "+e._s(s.endIndex)+" ")])]:e._e(),e.mode===e.tableMode.TeacherEvaluate?[i("div",{staticClass:"start-index"},[i("div",{staticClass:"select-block",on:{click:function(a){return a.stopPropagation(),e.handleClickSubLevelItem(t,n,s.startIndex)}}},[e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].data===s.startIndex?i("img",{attrs:{src:a("7aa6")}}):i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}})],1),e._v(" "+e._s(s.startIndex)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:null!==s.endIndex,expression:"subLevel.endIndex !== null"}],staticClass:"end-index",on:{click:function(a){return a.stopPropagation(),e.handleClickSubLevelItem(t,n,s.endIndex)}}},[i("div",{staticClass:"select-block"},[e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].data===s.endIndex?i("img",{attrs:{src:a("7aa6")}}):i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}})],1),e._v(" "+e._s(s.endIndex)+" ")])]:e._e()],2)})):e._e(),e.mode===e.tableMode.StudentEvaluate?[e._l(t[e.headerType.AchievementLevel].subLevelDescription,(function(s,n){return e.formBodyData&&e.formBodyData[t.rowId]&&null!==e.formBodyData[t.rowId].data?i("div",{key:n,staticClass:"sub-level-item"},[i("div",{staticClass:"start-index"},[i("div",{staticClass:"select-block"},[e.formBodyData[t.rowId].data===s.startIndex?i("img",{attrs:{src:a("7aa6")}}):e._e()]),e.formBodyData[t.rowId].data===s.startIndex?[e._v(" "+e._s(s.startIndex)+" ")]:e._e()],2),i("div",{directives:[{name:"show",rawName:"v-show",value:null!==s.endIndex,expression:"subLevel.endIndex !== null"}],staticClass:"end-index"},[i("div",{staticClass:"select-block"},[e.formBodyData[t.rowId].data===s.endIndex?i("img",{attrs:{src:a("7aa6")}}):e._e()]),e.formBodyData[t.rowId].data===s.endIndex?[e._v(e._s(s.endIndex))]:e._e()],2)]):e._e()})),e.formBodyData&&e.formBodyData[t.rowId]&&null===e.formBodyData[t.rowId].data?i("div",{staticClass:"no-level-data"},[e._v(" The teacher has not graded you yet. ")]):e._e()]:e._e()],2)]),n.type!==e.headerType.AchievementLevel&&n.type!==e.headerType.LevelDescriptor&&n.type!==e.headerType.Indicators?i("div",{staticClass:"selected-icon"},[e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].teacherEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("teacher-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].studentEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("student-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].peerEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.PeerEvaluate)?i("peer-icon"):e._e()],1):e._e()]:e._e(),n.type===e.headerType.LevelDescriptor?[i("div",{staticClass:"sub-level-data",on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"sub-level-desc"},[t[e.headerType.AchievementLevel].isSelfInput&&e.mode===e.tableMode.Edit?e._e():e._l(t[e.headerType.AchievementLevel].subLevelDescription,(function(t,a){return i("div",{key:a,staticClass:"sub-level-desc-item"},[i("a-tooltip",{attrs:{placement:"topLeft",mouseEnterDelay:1}},[i("template",{slot:"title"},[e._v(" "+e._s(t.description)+" ")]),e._v(" "+e._s(t.description)+" "),t.description&&e.mode===e.tableMode.TeacherEvaluate?i("a-tooltip",{attrs:{placement:"top",title:"Add to comment"}},[i("a-icon",{staticClass:"my-copy-item-icon",style:{color:"#999"},attrs:{type:"copy"},on:{click:function(a){return e.handleUseClicked(t.description)}}})],1):e._e()],2)],1)})),t[e.headerType.AchievementLevel].isSelfInput&&e.mode===e.tableMode.Edit?e._l(t[e.headerType.AchievementLevel].subLevelDescription,(function(t,a){return i("div",{key:a,staticClass:"sub-level-desc-input-item"},[i("a-input",{staticClass:"my-desc-input",model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"subLevel.description"}})],1)})):e._e()],2)]),i("div",{staticClass:"selected-icon"},[e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].teacherEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("teacher-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].studentEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("student-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].peerEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.PeerEvaluate)?i("peer-icon"):e._e()],1)]:e._e(),n.type===e.headerType.Indicators&&e.mode===e.tableMode.Edit?[i("div",{staticClass:"sub-level-data",on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"sub-level-indicator"},e._l(t[e.headerType.Indicators].subLevelIndicators,(function(t,a){return i("div",{key:a,staticClass:"sub-level-indicator-item"},[i("a-input",{staticClass:"my-indicator-input",model:{value:t.indicator,callback:function(a){e.$set(t,"indicator",a)},expression:"subIndicator.indicator"}})],1)})),0)]),i("div",{staticClass:"selected-icon"},[e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].teacherEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("teacher-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].studentEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("student-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].peerEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.PeerEvaluate)?i("peer-icon"):e._e()],1)]:e._e(),e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate||e.mode===e.tableMode.PeerEvaluate?[n.type===e.headerType.Indicators?[i("div",{staticClass:"sub-level-data",on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"sub-level-indicator"},e._l(t[e.headerType.Indicators].subLevelIndicators,(function(t,a){return i("div",{key:a,staticClass:"sub-level-indicator-item"},[i("div",{staticClass:"my-indicator-text"},[e._v(" "+e._s(t&&t.indicator?t.indicator:"")+" "),t&&t.indicator&&e.mode===e.tableMode.TeacherEvaluate?i("a-tooltip",{attrs:{placement:"top",title:"Add to comment"}},[i("a-icon",{staticClass:"my-copy-item-icon",style:{color:"#999"},attrs:{type:"copy"},on:{click:function(a){return e.handleUseClicked(t.indicator)}}})],1):e._e()],1)])})),0)]),i("div",{staticClass:"selected-icon"},[e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].teacherEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("teacher-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].studentEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("student-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].peerEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.PeerEvaluate)?i("peer-icon"):e._e()],1)]:e._e(),n.type===e.headerType.Comment?[i("div",{staticClass:"comment-indicator-input"},[i("a-textarea",{staticClass:"my-text-input",staticStyle:{height:"100%"},attrs:{placeholder:""},on:{blur:function(a){return e.handleUpdateField(n,t)}},model:{value:t[e.headerType.Comment].name,callback:function(a){e.$set(t[e.headerType.Comment],"name",a)},expression:"item[headerType.Comment].name"}})],1)]:e._e(),n.type.startsWith(e.headerType.UserDefine)?[i("div",{staticClass:"indicator-data"},[e._v(" "+e._s(t[n.type].name)+" ")]),i("div",{staticClass:"selected-icon"},[e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].teacherEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("teacher-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].studentEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate)?i("student-icon"):e._e(),e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].peerEvaluation===n.type&&(e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.PeerEvaluate)?i("peer-icon"):e._e()],1)]:e._e()]:e._e(),n.type!==e.headerType.Evidence||e.mode!==e.tableMode.TeacherEvaluate&&e.mode!==e.tableMode.StudentEvaluate&&e.mode!==e.tableMode.PeerEvaluate?e._e():[i("div",{staticClass:"evidence-data"},[e.formBodyData&&e.formBodyData[t.rowId]&&e.formBodyData[t.rowId].evidenceIdList?[i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.tableMode.TeacherEvaluate||e.mode===e.tableMode.StudentEvaluate,expression:"mode === tableMode.TeacherEvaluate || mode === tableMode.StudentEvaluate"}],class:{"evidence-info":!0,"exist-evidence":t[e.headerType.Evidence].num},on:{click:function(a){return e.handleAddEvidenceLine(s,t,a)}}},[i("add-icon",{directives:[{name:"show",rawName:"v-show",value:!e.formBodyData[t.rowId].evidenceIdList.length,expression:"!formBodyData[item.rowId].evidenceIdList.length"}]}),i("add-small-green-icon",{directives:[{name:"show",rawName:"v-show",value:e.formBodyData[t.rowId].evidenceIdList.length,expression:"formBodyData[item.rowId].evidenceIdList.length"}]}),i("div",{staticClass:"evidence-num"},[e._v("( "+e._s(e.formBodyData[t.rowId].evidenceIdList.length?e.formBodyData[t.rowId].evidenceIdList.length:0)+" ) ")])],1)]:e._e()],2)]],2):e._e()})),e.mode===e.tableMode.Edit?[i("div",{staticClass:"add-more-header"},[i("a-popconfirm",{staticClass:"rubric-delete-popconfirm",attrs:{title:"Delete this line ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleDeleteLine(t)}}},[i("template",{slot:"icon"},[i("div",{staticClass:"rubric-big-delete"},[i("img",{staticClass:"big-delete-icon",attrs:{src:a("dfe9")}})])]),i("img",{staticClass:"delete-row",attrs:{src:a("4165")}})],2)],1)]:e._e()],2)})),0)]),e.mode===e.tableMode.Edit?i("div",{staticClass:"add-new-line",on:{click:e.handleAddNewLine}},[i("div",{staticClass:"add-new-line-item"},[i("add-green-icon")],1)]):e._e(),i("a-modal",{attrs:{destroyOnClose:"",width:"1200px","dialog-style":{top:"20px"},footer:null},on:{ok:e.handleEnsureSelectCriteria},model:{value:e.selectCurriculumVisible,callback:function(t){e.selectCurriculumVisible=t},expression:"selectCurriculumVisible"}},[i("div",{staticClass:"associate-library"},[i("new-browser",{attrs:{"select-mode":e.selectModel.evaluationMode,"show-menu":e.showMenuList,"default-active-menu":e.defaultActiveMenu,"question-index":"evaluation_"},on:{"select-all-21-century":e.handleSelectAll21CenturyListData,"select-curriculum":e.handleSelectCurriculumListData,"select-subject-specific-skill":e.handleSelectSubjectSpecificSkillListData,"select-century-skill":e.handleSelect21CenturySkillListData,"select-assessmentType":e.handleSelectAssessmentType,"select-idu":e.handleSelectIdu,"ensure-select":e.handleEnsureSelectCriteria}})],1)]),i("a-modal",{attrs:{footer:null,maskClosable:!1,closable:!1,width:"700px",destroyOnClose:""},model:{value:e.inputDescriptionVisible,callback:function(t){e.inputDescriptionVisible=t},expression:"inputDescriptionVisible"}},[i("modal-header",{on:{close:function(t){e.inputDescriptionVisible=!1}}}),i("div",{staticClass:"rubric-modal"},[i("div",{staticClass:"rubric-header"},[i("div",{staticClass:"my-modal-header"},[e._v(" The specific description you entered will be shown to students instead of the curriculum description ")])]),i("div",{staticClass:"description-text"},[e.currentEnterDescriptionLine?i("div",{staticClass:"old-description"},[e._v(" "+e._s(e.currentEnterDescriptionLine[e.headerType.Description].name)+" ")]):e._e(),e.currentEnterCriteriaLine?i("div",{staticClass:"old-description"},[e._v(" "+e._s(e.currentEnterCriteriaLine[e.headerType.Criteria].name)+" ")]):e._e()]),i("div",{staticClass:"description-input"},[i("a-textarea",{attrs:{placeholder:"Enter task specific description",autoSize:{minRows:3,maxRows:6}},on:{blur:e.handleUpdateDescription},model:{value:e.inputDescription,callback:function(t){e.inputDescription=t},expression:"inputDescription"}})],1),i("div",{staticClass:"select-rubric-action"},[i("a-button",{staticClass:"my-rubric-btn",staticStyle:{width:"80px","background-color":"#F5F5F5","border-color":"#F5F5F5","box-shadow":"none",color:"#000000"},attrs:{shape:"round",type:"primary"},on:{click:e.handleCancelDescription}},[e._v("Cancel ")]),i("a-button",{staticClass:"my-rubric-btn",staticStyle:{width:"80px"},attrs:{shape:"round",type:"primary"},on:{click:e.handleEnsureDescription}},[e._v("Confirm ")])],1)])],1)],1)},s=[],n=(a("a9e3"),a("159b"),a("a434"),a("c740"),a("99af"),a("b0c0"),a("4de4"),a("2ca0"),a("a4d3"),a("e01a"),a("ac1f"),a("1276"),a("a02e")),o=a("489c"),r=a("f93e"),l=a("b76a"),c=a.n(l),d=a("3264"),u=a("ab44"),h=a("7849"),p=a("90e8"),m={Criteria:"criteria",AchievementLevel:"achievementLevel",LevelDescriptor:"levelDescriptor",Description:"description",Indicators:"indicators",Comment:"comment",Evidence:"evidence",Novice:"novice",Learner:"learner",Practitoner:"practitoner",Expert:"expert",UserDefine:"user_define_"},g=m,f=a("60f8"),v=a.n(f),y=a("9c2c"),b=a.n(y),C=a("d6ea"),w=a.n(C),k=a("1054"),T=a.n(k),L=a("da06"),I=a.n(L),S=a("60427"),A=a("5d88"),x=a.n(A),_=a("519d"),D=a.n(_),O=a("a615f"),E=a.n(O),N={name:"EvaluationTable",components:{AddIcon:v.a,AddSmallGreenIcon:b.a,AddOpacityIcon:T.a,AddGreenIcon:w.a,QuestionIcon:I.a,ModalHeader:S["a"],draggable:c.a,NewBrowser:d["a"],StudentIcon:D.a,PeerIcon:x.a,TeacherIcon:E.a},props:{initRawData:{type:Array,default:function(){return[]}},initRawHeaders:{type:Array,default:function(){return[]}},formId:{type:String,required:!0},mode:{type:String,required:!0},formType:{type:Number,required:!0},formBodyData:{type:Object,default:function(){return null}},taskLearnOuts:{type:Array,default:function(){return[]}},taskSelfOuts:{type:Array,default:function(){return[]}}},data:function(){return{selectModel:o["a"],selfHeaderAddIndex:1,headers:[],list:[],defaultActiveMenu:u["a"].specificSkills,showMenuList:[u["a"].centurySkills],selectCurriculumVisible:!1,selectKnowledgeTagVisible:!1,selectedKnowledgeTag:[],tagColorList:["pink","orange","green","cyan","blue","red","purple"],currentSelectHeader:null,currentSelectLine:null,tableType:h["a"],tableMode:p["a"],headerType:g,selectedAll21CenturyList:[],selectedCurriculumList:[],selected21CenturySkillList:[],selectedSubjectSpecificSkillList:[],selectedAssessmentList:[],selectedIduList:[],inputDescriptionVisible:!1,inputDescription:null,currentEnterDescriptionLine:null,currentEnterCriteriaLine:null,disabledDraggable:!1,selected21CenturyItem:null,has21CenturySkillNoDescriptionItem:!1,AllCurriculums:r["b"]}},watch:{list:function(e){var t=this,a=!1;this.formType===this.tableType.CenturySkills&&e.forEach((function(e){e.hasOwnProperty(t.headerType.Description)&&!1===e[t.headerType.Description].isDescription&&(t.$logger.info("!!! has21CenturySkillNoDescriptionItem",e),a=!0)})),this.has21CenturySkillNoDescriptionItem=a,this.mode===this.tableMode.TeacherEvaluate?this.headers.forEach((function(e){e.type===t.headerType.Evidence&&(e.visible=!0)})):this.headers.forEach((function(e){e.type===t.headerType.Evidence&&(e.visible=!1)}))}},created:function(){var e=this;if(this.$logger.info("["+this.mode+"] EvaluationTable created formType "+this.formType,"initRawHeaders",this.initRawHeaders,"initRawData",this.initRawData," formBodyData",this.formBodyData),-1===[p["a"].Edit,p["a"].Preview,p["a"].TeacherEvaluate,p["a"].StudentEvaluate,p["a"].PeerEvaluate].indexOf(this.mode)&&this.$confirm({title:"Parameter error",content:"Please make sure your link is correct, the current evaluation mode is "+this.mode+".",centered:!0,onOk:function(){e.$emit("error-mode")},onCancel:function(){e.$emit("error-mode")}}),this.mode===p["a"].TeacherEvaluate&&"teacher"!==this.$store.getters.currentRole&&this.$confirm({title:"Access denied",content:"Only teachers have access to teacher mode",centered:!0,onOk:function(){e.$emit("error-mode")},onCancel:function(){e.$emit("error-mode")}}),this.initRawHeaders.length)this.headers=this.initRawHeaders;else if(this.formType===h["a"].Rubric)this.headers=[{label:"Criteria",previewLabel:"Criteria",type:g.Criteria,editable:!1,editing:!1,required:!0,visible:!0},{label:"Achievement Level",previewLabel:"Achievement Level",type:g.AchievementLevel,editable:!1,editing:!1,required:!0,visible:!0},{label:"Level descriptor",previewLabel:"Level descriptor",type:g.LevelDescriptor,editable:!1,editing:!1,required:!0,visible:!0},{label:"Task specific indicators",previewLabel:"Task specific indicators",type:g.Indicators,editable:!1,editing:!1,required:!0,visible:!0},{label:"Evidence",previewLabel:"Evidence",type:g.Evidence,editable:!1,editing:!1,required:!0,visible:!0}];else if(this.formType===h["a"].Rubric_2)this.headers=[{label:"Description",previewLabel:"Description",type:g.Description,editable:!1,editing:!1,required:!0,visible:!0},{label:"Unnamed level",previewLabel:"Unnamed level",type:g.UserDefine,editable:!0,editing:!1,required:!1,visible:!0},{label:"Evidence",previewLabel:"Evidence",type:g.Evidence,editable:!1,editing:!1,required:!0,visible:!0}];else if(this.formType===h["a"].CenturySkills){var t=parseInt(this.$store.getters.bindCurriculum);this.headers=1===t||2===t?[{label:"Criteria",previewLabel:"Criteria",type:g.Criteria,editable:!1,editing:!1,required:!0,visible:!0},{label:"21st Century Skills",previewLabel:"21st Century Skills",type:g.Description,editable:!1,editing:!1,required:!0,visible:!0},{label:"Novice",previewLabel:"Novice",type:g.UserDefine+"Novice",editable:!0,editing:!1,required:!1,visible:!0},{label:"Learner",previewLabel:"Learner",type:g.UserDefine+"Learner",editable:!0,editing:!1,required:!1,visible:!0},{label:"Practitoner",previewLabel:"Practitoner",type:g.UserDefine+"Practitoner",editable:!0,editing:!1,required:!1,visible:!0},{label:"Expert",previewLabel:"Expert",type:g.UserDefine+"Expert",editable:!0,editing:!1,required:!1,visible:!0},{label:"Comment",previewLabel:"Comment",type:g.Comment,editable:!1,editing:!1,required:!0,visible:!0},{label:"Evidence",previewLabel:"Evidence",type:g.Evidence,editable:!1,editing:!1,required:!0,visible:!0}]:[{label:"21st Century Skills",previewLabel:"21st Century Skills",type:g.Description,editable:!1,editing:!1,required:!0,visible:!0},{label:"Novice",previewLabel:"Novice",type:g.UserDefine+"Novice",editable:!0,editing:!1,required:!1,visible:!0},{label:"Learner",previewLabel:"Learner",type:g.UserDefine+"Learner",editable:!0,editing:!1,required:!1,visible:!0},{label:"Practitoner",previewLabel:"Practitoner",type:g.UserDefine+"Practitoner",editable:!0,editing:!1,required:!1,visible:!0},{label:"Expert",previewLabel:"Expert",type:g.UserDefine+"Expert",editable:!0,editing:!1,required:!1,visible:!0},{label:"Comment",previewLabel:"Comment",type:g.Comment,editable:!1,editing:!1,required:!0,visible:!0},{label:"Evidence",previewLabel:"Evidence",type:g.Evidence,editable:!1,editing:!1,required:!0,visible:!0}]}this.$logger.info("["+this.mode+"] form headers ",this.headers),this.initRawData.length?this.list=this.initRawData:this.$store.getters.isIBTeacher||!this.taskLearnOuts.length&&!this.taskSelfOuts.length?this.handleAddNewLine():this.handleAddNewLineWithTaskOuts(),n["LibraryEventBus"].$on(n["LibraryEvent"].ContentListSelectClick,this.handleContentListSelectClick),n["LibraryEventBus"].$on(n["LibraryEvent"].CenturySkillsSelect,this.handleCenturySkillsSelect),n["LibraryEventBus"].$on(n["LibraryEvent"].CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect)},destroyed:function(){n["LibraryEventBus"].$off(n["LibraryEvent"].ContentListSelectClick,this.handleContentListSelectClick),n["LibraryEventBus"].$off(n["LibraryEvent"].CenturySkillsSelect,this.handleCenturySkillsSelect),n["LibraryEventBus"].$off(n["LibraryEvent"].CancelCenturySkillsSelect,this.handleCancelCenturySkillsSelect),this.$logger.info("["+this.mode+"] off NewClickableKnowledgeTag ContentListSelectClick handler")},methods:{handleContentListSelectClick:function(e){"evaluation_"===e.questionIndex&&(this.$logger.info("["+this.mode+"] evaluation handleContentListSelectClick hit",e),n["LibraryEventBus"].$emit(n["LibraryEvent"].ContentListSelectedListUpdate,{id:e.subKnowledgeId}))},handleEditHeader:function(e){this.disabledDraggable=!0,this.$logger.info("disabled Draggable"),this.$logger.info("["+this.mode+"] handleEditHeader",e),e.editable?(this.headers.forEach((function(e){0===e.label.length&&(e.label=e.previewLabel)})),this.headers.forEach((function(t){t===e?(t.editing=!0,t.previewLabel=t.label):t.editing=!1}))):this.$logger.info("["+this.mode+"] current header not editable",e)},handleUpdateHeader:function(){this.headers.forEach((function(e){0===e.label.length&&(e.label=e.previewLabel)})),this.headers.forEach((function(e){e.editing=!1})),this.disabledDraggable=!1},handleAddNewHeader:function(e){this.$logger.info("["+this.mode+"] handleAddNewHeader this.selfHeaderTypeIndex "+this.selfHeaderAddIndex+" hIndex "+e);var t=this.headerType.UserDefine+this.selfHeaderAddIndex,a=[];this.headers.forEach((function(e){return a.push(e.type)}));while(-1!==a.indexOf(t))this.selfHeaderAddIndex++,t=this.headerType.UserDefine+this.selfHeaderAddIndex;var i={label:"Unnamed Level ",previewLabel:"Unnamed Level ",type:t,editable:!0,editing:!1,visible:!0};this.headers.splice(e+1,0,i);var s=JSON.parse(JSON.stringify(this.list));s.forEach((function(e){e[i.type]={name:null}})),this.list=s,this.$logger.info("["+this.mode+"] after update list",this.list),this.selfHeaderAddIndex++},handleRemoveHeader:function(e){this.$logger.info("["+this.mode+"] handleRemoveHeader ",e);var t=this.headers.findIndex((function(t){return t.type===e.type}));-1!==t&&this.headers.splice(t,1);var a=JSON.parse(JSON.stringify(this.list));a.forEach((function(t){delete t[e.type]})),this.list=a,this.$logger.info("["+this.mode+"] after delete column update list",this.list)},handleAddNewLine:function(){this.$logger.info("["+this.mode+"] handleAddNewLine ");var e={},t=this.generateRowId();e.rowId=t,this.headers.forEach((function(a){e[a.type]={name:null,rowId:t}})),this.formType===this.tableType.CenturySkills?(e[this.headerType.Description]={name:null,rowId:t,parentNameList:[],isDescription:!0},e[this.headerType.Evidence]={num:0,rowId:t}):this.formType===this.tableType.Rubric?(e.isSelectedIBLine=!1,e.isSelfInputLine=!1,e[this.headerType.Criteria]={rowId:t,name:null,isSelfInput:!1},e[this.headerType.AchievementLevel]={rowId:t,subLevelDescription:[],isSelfInput:!1},e[this.headerType.Indicators]={rowId:t,subLevelIndicators:[],isSelfInput:!1},e[this.headerType.Evidence]={num:0,rowId:t}):this.formType===this.tableType.Rubric_2&&(e[this.headerType.Evidence]={num:0,rowId:t}),this.$logger.info("["+this.mode+"] init new line ",e),this.list.push(e)},handleAddNewLineWithTaskOuts:function(){var e=this;this.$logger.info("["+this.mode+"] handleAddNewLineWithTaskOuts ",this.taskLearnOuts,this.taskSelfOuts);var t=this.taskLearnOuts.concat(this.taskSelfOuts);t.forEach((function(t){var a={},i=e.generateRowId();a.rowId=i,e.headers.forEach((function(e){a[e.type]={name:null,rowId:i}})),e.formType===e.tableType.CenturySkills?(a[e.headerType.Description]={name:t.name,rowId:i,parentNameList:t.parentNameList,isDescription:!0},a[e.headerType.Evidence]={num:0,rowId:i},e.$logger.info("["+e.mode+"] init new line ",a),e.list.push(a)):e.formType===e.tableType.Rubric_2&&(a[e.headerType.Description].name=t.name,a[e.headerType.Evidence]={num:0,rowId:i},e.$logger.info("["+e.mode+"] init new line ",a),e.list.push(a))}))},handleDragEnd:function(){this.$logger.info("["+this.mode+"] handleDragEnd",this.headers)},handleDeleteLine:function(e){this.$logger.info("["+this.mode+"] handleDeleteLine",e),this.mode===p["a"].Edit&&(this.list=this.list.filter((function(t){return t!==e})))},handleClickBodyItem:function(e,t){this.$logger.info("["+this.mode+"]["+this.mode+"] handleClickBodyItem "+t.label,e,"header",t),(-1!==[g.Indicators,g.AchievementLevel,g.LevelDescriptor,g.UserDefine].indexOf(t.type)||t.type.startsWith(g.UserDefine))&&this.$emit("update-evaluation",{formId:this.formId,evaluationMode:this.mode,rowId:e.rowId,value:t.type,evaluateUserEmail:this.$store.getters.email,evaluateUserName:this.$store.getters.nickname,data:null})},handleClickSubLevelItem:function(e,t,a){this.$logger.info(a+" ["+this.mode+"]["+this.mode+"] handleClickSubLevelItem "+t.label,e,"header",t),(-1!==[g.Indicators,g.AchievementLevel,g.LevelDescriptor,g.UserDefine].indexOf(t.type)||t.type.startsWith(g.UserDefine))&&this.$emit("update-evaluation",{formId:this.formId,evaluationMode:this.mode,rowId:e.rowId,value:t.type,evaluateUserEmail:this.$store.getters.email,evaluateUserName:this.$store.getters.nickname,data:a})},handleSwitchModeTips:function(){this.$message.warn("Please switch to evaluation mode first!")},handleAddCriteria:function(e,t,a){if(a.preventDefault(),a.stopPropagation(),this.$logger.info("["+this.mode+"] handleAddCriteria "+e.type,e,t),this.mode===p["a"].Edit){if(this.formType===this.tableType.Rubric_2)this.showMenuList=[u["a"].learningOutcomes,u["a"].specificSkills,u["a"].assessmentType],this.defaultActiveMenu=u["a"].learningOutcomes;else if(this.formType===this.tableType.Rubric)this.showMenuList=[u["a"].specificSkills,u["a"].idu],this.defaultActiveMenu=u["a"].specificSkills;else if(this.formType===this.tableType.CenturySkills){var i=parseInt(this.$store.getters.bindCurriculum);this.$logger.info("CenturySkills header.type "+e.type,e.type===this.headerType.Description,e.type===this.headerType.Criteria),e.type===this.headerType.Description?1===i||2===i?(this.showMenuList=[u["a"].all21Century],this.defaultActiveMenu=u["a"].all21Century):(this.showMenuList=[u["a"].centurySkills],this.defaultActiveMenu=u["a"].centurySkills):e.type===this.headerType.Criteria&&(1===i?(this.showMenuList=[u["a"].AUGeneralCapabilities],this.defaultActiveMenu=u["a"].AUGeneralCapabilities):2===i&&(this.showMenuList=[u["a"].NZKeyCompetencies],this.defaultActiveMenu=u["a"].NZKeyCompetencies))}this.selectCurriculumVisible=!0,this.currentSelectHeader=e,this.currentSelectLine=t}},handleInputIBCriteria:function(e,t,a){a.preventDefault(),a.stopPropagation(),this.$logger.info("handleInputIBCriteria "),this.currentSelectHeader=e,this.currentSelectLine=t,this.currentSelectLine.isSelectedIBLine=!1,this.currentSelectLine.isSelfInputLine=!0,this.currentSelectLine[this.headerType.Criteria]={name:"",rowId:this.currentSelectLine.rowId,isSelfInput:!0};for(var i=[],s=0;s<8;s++)0!==s&&s%2!==1||i.push({startIndex:s,endIndex:0===s?null:s+1,description:""});this.currentSelectLine[this.headerType.AchievementLevel]={name:"",rowId:this.currentSelectLine.rowId,subLevelDescription:i,isSelfInput:!0};for(var n=[],o=0;o<5;o++)n.push({indicator:""});this.currentSelectLine[this.headerType.Indicators]={rowId:this.currentSelectLine.rowId,subLevelIndicators:n,isSelfInput:!0},this.$logger.info("self input currentSelectLine with criteria data ",this.currentSelectLine)},handleEnsureSelectCriteria:function(){var e=this;this.$logger.info("["+this.mode+"] handleEnsureSelectCriteria","this.list",this.list),this.selectCurriculumVisible=!1;var t=[];if(this.selectedAll21CenturyList.forEach((function(e){t.push(e)})),this.selectedCurriculumList.forEach((function(e){t.push(e)})),this.selected21CenturySkillList.forEach((function(e){t.push(e)})),this.selectedSubjectSpecificSkillList.forEach((function(e){t.push(e)})),this.selectedAssessmentList.forEach((function(e){t.push(e)})),this.selectedIduList.forEach((function(e){t.push(e)})),this.selected21CenturyItem){var a=[],i=this.selected21CenturyItemParent,s=3;while(i&&s-- >0)a.push(i.name),i=i.parent;var n={name:this.selected21CenturyItem.name,parentNameList:a,isDescription:!1};t.push(n),this.$logger.info("selectedList add selected21CenturyItem",n)}if(this.$logger.info("formType "+this.formType+" selectedList",t),this.formType===this.tableType.CenturySkills){if(t.length>=1){var o=Object.assign(this.currentSelectHeader);o.type===this.headerType.Description?(this.currentSelectLine[this.headerType.Description]={name:t[0].name,rowId:this.currentSelectLine.rowId,parentNameList:t[0].parentNameList,isDescription:t[0].isDescription},this.$logger.info("["+this.mode+"] update currentSelectLine with Description 1 data ",this.currentSelectLine),t.length>1&&t.forEach((function(t,a){if(a>0){var i={},s=e.generateRowId();i.rowId=s,e.headers.forEach((function(e){i[e.type]={name:null,rowId:s}})),i[e.headerType.Description]={name:t.name,rowId:s,parentNameList:t.parentNameList,isDescription:t.isDescription},i[e.headerType.Evidence]={num:0,rowId:s},i.rowId=s,e.$logger.info("["+e.mode+"] CenturySkills add new line with Description data ",i),e.list.push(i)}}))):o.type===this.headerType.Criteria&&(this.currentSelectLine[this.headerType.Criteria]={name:t[0].name,rowId:this.currentSelectLine.rowId},this.$logger.info("["+this.mode+"] update currentSelectLine with criteria 1 data ",this.currentSelectLine),t.length>1&&t.forEach((function(t,a){if(a>0){var i={},s=e.generateRowId();i.rowId=s,e.headers.forEach((function(e){i[e.type]={name:null,rowId:s}})),i[e.headerType.Description]={name:null,rowId:s,parentNameList:[]},i[e.headerType.Criteria]={name:t.name,rowId:i.rowId},i[e.headerType.Evidence]={num:0,rowId:s},i.rowId=s,e.$logger.info("["+e.mode+"] CenturySkills add new line with criteria data ",i),e.list.push(i)}})))}this.list=this.list.filter((function(e){return!e.description||e.description.name||!e.criteria||e.criteria.name})),this.$logger.info("CenturySkills 过滤掉没有Description的行",this.list)}else if(this.formType===this.tableType.Rubric){if(t.length>=1){this.currentSelectLine.isSelectedIBLine=!0,this.currentSelectLine.isSelfInputLine=!1,this.currentSelectLine[this.headerType.Criteria]={name:t[0].name,rowId:this.currentSelectLine.rowId,isSelfInput:!1},this.currentSelectLine[this.headerType.AchievementLevel]={name:t[0].name,rowId:this.currentSelectLine.rowId,subLevelDescription:t[0].subLevelDescription,isSelfInput:!1};var r=[];t[0].subLevelDescription.forEach((function(e){r.push({indicator:""})})),this.currentSelectLine[this.headerType.Indicators]={rowId:this.currentSelectLine.rowId,subLevelIndicators:r,isSelfInput:!1},this.$logger.info("["+this.mode+"] update currentSelectLine with criteria data ",this.currentSelectLine),t.length>1&&t.forEach((function(a,i){if(i>0){var s={},n=e.generateRowId();s.rowId=n,s.isSelectedIBLine=!0,s.isSelfInputLine=!1,e.headers.forEach((function(e){s[e.type]={name:null,rowId:n}})),s[e.headerType.Criteria]={name:a.name,rowId:n,isSelfInput:!1},s[e.headerType.AchievementLevel]={name:a.name,rowId:n,subLevelDescription:a.subLevelDescription,isSelfInput:!1};var o=[];t[0].subLevelDescription.forEach((function(e){o.push({indicator:""})})),s[e.headerType.Indicators]={rowId:e.currentSelectLine.rowId,subLevelIndicators:o,isSelfInput:!1},s[e.headerType.Evidence]={num:0,rowId:n},e.$logger.info("["+e.mode+"] Rubric add new line with criteria data ",s),e.list.push(s)}}))}this.list=this.list.filter((function(e){return!e.criteria||e.criteria.name})),this.$logger.info("Rubric 过滤掉没有criteria的行",this.list)}else this.formType===this.tableType.Rubric_2?(this.$logger.info("["+this.mode+"] tableType.Rubric selectedList",t),t.length>=1&&(this.currentSelectLine[this.headerType.Description]={name:t[0].name,rowId:this.currentSelectLine.rowId},this.$logger.info("["+this.mode+"] update currentSelectLine description with criteria data ",this.currentSelectLine),t.length>1&&t.forEach((function(t,a){if(a>0){var i={},s=e.generateRowId();e.headers.forEach((function(e){i[e.type]={name:null,rowId:s}})),i[e.headerType.Description]={name:t.name,rowId:s},i[e.headerType.Evidence]={num:0,rowId:s},i.rowId=s,e.$logger.info("["+e.mode+"] Rubric description add new line with criteria data ",i),e.list.push(i)}}))),this.list=this.list.filter((function(e){return!e.description||e.description.name})),this.$logger.info("Rubric_2 过滤掉没有Description的行",this.list)):this.$logger.info("["+this.mode+"] rubric form no allow select");this.selectedAll21CenturyList=[],this.selectedCurriculumList=[],this.selected21CenturySkillList=[],this.selectedSubjectSpecificSkillList=[],this.selectedAssessmentList=[],this.selectedIduList=[]},handleUpdateDescription:function(e,t){this.$logger.info("["+this.mode+"] handleUpdateDescription",e,t)},handleUpdateField:function(e,t){this.$logger.info("["+this.mode+"] handleUpdateField",e,t)},handleClickEnterCriteriaDescription:function(e,t){this.$logger.info("["+this.mode+"] handleClickEnterCriteriaDescription",e,t),this.mode===p["a"].Edit&&(this.inputDescription=t[this.headerType.Description].userInputText,this.currentEnterDescriptionLine=t,this.inputDescriptionVisible=!0)},handleClickEnterCriteria:function(e,t){this.$logger.info("["+this.mode+"] handleClickEnterCriteria",e,t),this.mode===p["a"].Edit&&(this.inputDescription=t[this.headerType.Criteria].userInputText,this.currentEnterCriteriaLine=t,this.inputDescriptionVisible=!0)},handleEnsureDescription:function(){this.$logger.info("["+this.mode+"] handleEnsureDescription "+this.inputDescription),this.currentEnterDescriptionLine&&(this.currentEnterDescriptionLine[this.headerType.Description].userInputText=this.inputDescription),this.currentEnterCriteriaLine&&(this.currentEnterCriteriaLine[this.headerType.Criteria].userInputText=this.inputDescription),this.mode===p["a"].Edit&&(this.inputDescriptionVisible=!1,this.currentEnterDescriptionLine=null,this.currentEnterCriteriaLine=null,this.inputDescription=null)},handleCancelDescription:function(){this.$logger.info("["+this.mode+"] handleEnsureDescription "+this.inputDescription),this.currentEnterDescriptionLine=null,this.currentEnterCriteriaLine=null,this.inputDescription=null,this.inputDescriptionVisible=!1},handleAddEvidenceLine:function(e,t,a){a.stopPropagation(),a.preventDefault(),this.$logger.info("["+this.mode+"] handleAddEvidenceLine",e,t),this.$emit("add-evidence",{index:e,data:this.formBodyData[t.rowId],rowId:t.rowId})},handleSelectAll21CenturyListData:function(e){this.$logger.info("["+this.mode+"] EvaluationTable handleSelectAll21CenturyListData",e);var t=[];e.forEach((function(e){var a=e.item,i=[],s=a.originParent,n=3;while(s&&n-- >0)i.push(s.name),s=s.originParent;var o={name:e.item.name,parentNameList:i,isDescription:!0};t.push(o)})),this.selectedAll21CenturyList=t,this.$logger.info("["+this.mode+"] selectedAll21CenturyList ",t)},handleSelectCurriculumListData:function(e){this.$logger.info("["+this.mode+"] EvaluationTable handleSelectCurriculumListData",e);var t=[];e.forEach((function(e){var a={name:e.knowledgeData.name,isDescription:!0};t.push(a)})),this.selectedCurriculumList=t,this.$logger.info("["+this.mode+"] handleSelectCurriculumListData ",t)},handleSelectSubjectSpecificSkillListData:function(e){var t=this;this.$logger.info("["+this.mode+"] EvaluationTable handleSelectSubjectSpecificSkillListData",e);var a=[];e.forEach((function(e){var i=e.knowledgeData.subLevelDescripton,s=[];i.forEach((function(e){var t=e[0],a=t.split("-"),i=parseInt(a[0]),n=null;2===a.length&&(n=parseInt(a[1]));var o=e[1];s.push({startIndex:i,endIndex:n,description:o})})),t.$logger.info("["+t.mode+"] handle subLevel",i,s);var n={name:e.knowledgeData.name,subLevelDescription:s,isDescription:!0};a.push(n)})),this.selectedSubjectSpecificSkillList=a,this.$logger.info("["+this.mode+"] handleSelectSubjectSpecificSkillListData ",a)},handleSelect21CenturySkillListData:function(e){this.$logger.info("["+this.mode+"] EvaluationTable handleSelectCurriculumListData",e);var t=[];e.forEach((function(e){var a=[],i=e.knowledgeData.originParent,s=3;while(i&&s-- >0)a.push(i.name),i=i.originParent;var n={name:e.knowledgeData.name,parentNameList:a,isDescription:!0};t.push(n)})),this.selectedCurriculumList=t,this.$logger.info("["+this.mode+"] handleSelectCurriculumListData ",t),n["LibraryEventBus"].$emit(n["LibraryEvent"].CancelCenturySkillsSelect)},handleSelectAssessmentType:function(e){this.$logger.info("["+this.mode+"] EvaluationTable handleSelectAssessmentType",e);var t=[];e.forEach((function(e){var a={name:e.knowledgeData.name,isDescription:!0};t.push(a)})),this.selectedAssessmentList=t,this.$logger.info("["+this.mode+"] handleSelectAssessmentType ",t)},handleSelectIdu:function(e){var t=this;this.$logger.info("["+this.mode+"] EvaluationTable handleSelectIdu",e);var a=[];e.forEach((function(e){var i=e.knowledgeData.subLevelDescripton,s=[];i.forEach((function(e){var a=e[0],i=[];i=-1!==a.indexOf("–")?a.split("–"):-1!==i.indexOf("-")?a.split("-"):[a],t.$logger.info("indexRangeArray",i,e);var n=parseInt(i[0]),o=null;2===i.length&&(o=parseInt(i[1]));var r=e[1];s.push({startIndex:n,endIndex:o,description:r,isDescription:!0})})),t.$logger.info("["+t.mode+"] handle subLevel",i,s);var n={name:e.knowledgeData.name,subLevelDescription:s};a.push(n)})),this.selectedIduList=a,this.$logger.info("["+this.mode+"] handleSelectIdu ",a)},handleCancelSelectData:function(){},getTableStructData:function(){return this.$logger.info("getTableStructData",this.headers,this.list),{headers:this.headers,list:this.list,formId:this.formId}},generateRowId:function(){var e="row_"+Math.random();while(-1!==this.list.findIndex((function(t){return t.rowId===e})))e="row_"+Math.random();return this.$logger.info("generateRowId "+e),e},handleCenturySkillsSelect:function(e){this.$logger.info("NewBrowser handleCenturySkillsSelect",e),this.selected21CenturyItem=e.item,this.selected21CenturyItemParent=e.parent},handleCancelCenturySkillsSelect:function(){this.selected21CenturyItem=null,this.selected21CenturyItemParent=null},handleUseClicked:function(e){this.$logger.info("handleUseClicked",e),this.$emit("use-clicked-text",e)}}},M=N,j=(a("53f2"),a("0c7c")),R=Object(j["a"])(M,i,s,!1,null,"720d1163",null);t["a"]=R.exports},"11aa":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAsCAYAAADxRjE/AAAAAXNSR0IArs4c6QAABJ1JREFUaEPNmWnI5XMUxz9f+75lCaGQlK3EG5GSFyRrsi/T2IYZqWFGDAaTNWuIPBSFGDOl0YzGTJNRNBJhsrywNUi27Brr0ffpXN153P92527n1VP33Pv//M/v/M75nvOIEbaI2Bw4C7gE2Al4EZihUWSOCHPtDNwAnAusm5x/A4+PHHRErAfsA9wFHDEhqP8Ai0cKOiI2AA4GHgAO6JAFfwHXjAx0Ah8C3Afs2wHYUf4EOGokoCNiE+BI4E5gz4J79gswXdLY0KEjYgvgeODWrBCdmH8HngamSFo9VOiI2Bo4DbgR2LYgws7jt4ATJH1hn6FBR8R2wDm+WMBWBcABfAVcKOn5ls9QoCNie2AScFUJsBl/Bu5xvZbkGj1uA4eOiB2AycCVwJYlzW11dsBJkr5v9xsodETski15KuAWXWSO6rvA2ZLemeg0MOiI2B24DLgA2LgE2Hn8JTBL0mOd/AYC3QZ8PuCaXGY/Ak8Cl7u8DQU6IvY2QKq1jSqAXY+XO+db5W3g0BHhdjwDOBXYsALYebwSmCbplTLfvqVHROyfFeJkwEKoyj4HbgYekuS8LrS+QEeEpaVL2ik1Imy4H4Cn/B1J1hil1nPoTAkDO8JVOWw4X7alwFRJq6qA/XlPoRN4FnBizQhbbr45PkJJL9UB7il0ROyaOuLMGmWtxfcxcDswJskvUMt6FumIaLXmvWo9Gb4F3Dyul/Rrze+Mu/US2prYiu2gGgC/AQuAmZI+q+G/hktX0DktHwocDlgbvAz4eKentrDsLDLrY/u7Ta9oCtx1pCPCO4g7LMwBQ9wPPAisA1yd3a9Tu3b9dQO5CXi2qh4XvVC3kbakvAU4I+Wlj/tR4N580EzAF3LTCQ/2xbsbeFjSH91EuXGks0J4yvgU8IWbk7sJdzzXWzcIn4BFz7RUdK0xyhdvzLOgpJ+6Ba4NHRE+9uOA2cBuuUh5BHDuegt0dDYSR29+lrEPc8L2Wsva+TlgrqTv1ga4FnTuI3zBLgV2zIrjdPBCxbnsrndtNhSng3N8UU7XK7rN27IXK83pjPDFOct5t9ZulpGus15f+W/Pe6cDXglYsS3LvF/epHHUOYUq6GPy4uyRlWHib/7pKpDp8A1wRQ6sXg0Y3J/NkfReHZi6PoXQOYA+ARxWoSMM90LKyo/yAl4EeOJ+LaEX1gWq41cGbVnp8d15XGWuv544rIctgHxCJwFvuxTWVW9VD2l9XgbtS+ZlStnU3P4cg7+eebxobepwFXxH6NwROzWObaDYWs96NZcr3tr3xYqgXX/dKKryuROUL91sSfP6Qlyk8nK+eya7nhtLE/NQ6jXWkiZfauJbFGlP0K67Ll1NzI3FGuQ2SV6A98X+B536wvX1QMD//2hib+TadmH7wrDJD9TxXQM6ItbPsjUF2KzOD7T5WFdbci4o2gw1/L1C9/+gU9h7bWXJuU2DqcaKzidjLbKynxFuvcU4dJvGsNS09KzS2e6C1sbudC6Nhu1aHzc9AeVG/jrgvJJtplWdIT8AnLeLgff7nQZFL2Noi/X9UhBZ9Dhi3vJ8nf86cBVYNSzATuD/Aok9WzfHt1isAAAAAElFTkSuQmCC"},"11fa":function(e,t,a){"use strict";a("eedc")},1449:function(e,t,a){"use strict";var i=function(){var e=this,t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"my-unit-plan-preview"},[t.loading?[s("a-skeleton",{attrs:{active:""}})]:[s("a-row",{staticClass:"action-header"},[s("a-col",{staticClass:"action-header-toggle",attrs:{span:"24"}},[s("a-radio-group",{attrs:{"button-style":"solid"},on:{change:t.handleViewModeChange},model:{value:t.viewMode,callback:function(e){t.viewMode=e},expression:"viewMode"}},[s("a-radio-button",{staticClass:"left-button",attrs:{value:"Detail"}},[t._v(" Info ")]),s("a-radio-button",{staticClass:"right-button",attrs:{value:"Preview"}},[t._v(" Detail ")]),s("a-radio-button",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student","teacher"],expression:"['student', 'teacher']"}],staticClass:"right-button",attrs:{value:"Reviews"}},[t._v(" Reviews ")])],1)],1)],1),s("a-row",{staticClass:"top-header"},[s("a-col",{attrs:{span:"24"}},[s("div",{staticClass:"title-line"},[s("div",{staticClass:"name"},[t._v(" "+t._s(t.data.name)+" ")]),s("div",{staticClass:"action-item"},[s("div",{staticClass:"star"},[t.data.createBy!==t.$store.getters.userInfo.email?[t.data.isFavorite?t._e():s("img",{attrs:{src:a("58e7")},on:{click:function(e){return t.handleFavorite(t.data)}}}),t.data.isFavorite?s("img",{attrs:{src:a("24e3")},on:{click:function(e){return t.handleFavorite(t.data)}}}):t._e()]:t._e()],2),this.isOwner||this.isCollaborater?s("div",{staticClass:"edit"},[s("a-button",{attrs:{type:"primary",shape:"round"},on:{click:function(e){return t.handleEditItem(t.data)}}},[s("div",{staticClass:"button-content"},[t._v(" Edit "),s("img",{staticClass:"edit-icon",attrs:{src:a("11aa")}})])])],1):s("div",{staticClass:"edit"},[t.myContentId?s("a-button",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:t.copyLoading,type:"primary",shape:"round"},on:{click:function(e){return t.handleEditItem({id:t.myContentId})}}},[s("div",{staticClass:"button-content"},[t._v(" Edit in my content "),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"edit"}})],1)]):s("a-button",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:t.copyLoading,type:"primary",shape:"round"},on:{click:t.handleDuplicateItem}},[s("div",{staticClass:"button-content"},[t._v(" Copy "),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"copy"}})],1)]),t.data.type===t.typeMap.task?s("a-button",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:t.copyLoading,type:"primary",shape:"round"},on:{click:t.handleStartTask}},[s("div",{staticClass:"button-content"},[t._v(" Start "+t._s(t.data.buyed?"Session":"")),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"play-circle"}})],1)]):t._e()],1)])])])],1),s("a-row",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"author-info"},[s("a-col",{staticClass:"avatar-icon",attrs:{span:"3"}},[s("img",{attrs:{src:t.collaborate.owner&&t.collaborate.owner.avatar}})]),s("a-col",{attrs:{span:"21"}},[s("div",{staticClass:"sub-info"},[s("div",{staticClass:"created-by"},[t._v(" "+t._s(t.data.createBy)+" ")]),s("div",{staticClass:"created-time"},[t.lastChangeSavedTime?[t._v(" "+t._s(t.lastChangeSavedTime)+" ")]:t._e()],2)]),s("div",{staticClass:"star-info"},[s("review-score",{attrs:{review:t.reviewsStats,placement:"bottom"}}),s("a-button",{attrs:{type:"link"}},[t._v(t._s(t._f("percentFormat")(t.reviewsStats.overall))+" ("+t._s(t.reviewsStats.reviewsCount)+" reviews)")])],1)])],1),s("a-space",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"},{name:"show",rawName:"v-show",value:"Reviews"!==t.viewMode,expression:"viewMode !== 'Reviews'"}],staticClass:"author-info"},[s("div",{staticClass:"avatar-icon"},[s("img",{attrs:{src:t.collaborate.owner&&t.collaborate.owner.avatar}})]),s("div",[s("div",{staticClass:"sub-info"},[s("div",{staticClass:"created-by"},[t._v(" "+t._s(t.collaborate.owner&&t.collaborate.owner.nickname)+" ")]),s("div",{staticClass:"created-time"},[t.lastChangeSavedTime?[t._v(" "+t._s(t.lastChangeSavedTime)+" ")]:t._e()],2)]),s("div",{staticClass:"star-info",on:{click:function(){return e.viewMode="Reviews"}}},[s("a-tooltip",{attrs:{placement:"right"}},[s("template",{slot:"title"},[t._v(" "+t._s(t.reviewsStats.reviewsScoreStatDetail&&t.reviewsStats.reviewsScoreStatDetail[4]&&t.reviewsStats.reviewsScoreStatDetail[4].reviewsScoreCount)+" people gave a score of 5 stars ")]),s("a-rate",{attrs:{value:t.reviewsStats.avgReviewsScore,"allow-half":"",disabled:""}})],2)],1)])]),s("a-row",{directives:[{name:"show",rawName:"v-show",value:"Detail"===t.viewMode,expression:"viewMode === 'Detail'"}],staticClass:"data-info"},[s("a-col",{staticClass:"right-detail",attrs:{span:"24"}},[s("div",{staticClass:"sub-detail"},[s("div",{staticClass:"detail-block"},[s("div",{staticClass:"block-main-label"},[t.data.type===t.typeMap.task?[t._v("Task details")]:[t._v("Overview")]],2),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"view-text"},[t._v(" "+t._s(t.data.overview)+" ")])]),t.data.type===t.typeMap.task&&t.data.questionNames.length>0?[s("div",{staticClass:"block-main-label"},[t._v(" Key question(s)/Line(s) of Inquiry ")]),s("div",{staticClass:"detail-block",staticStyle:{margin:"10px"}},[s("div",{staticClass:"keyword-block-content"},[s("div",{staticClass:"content-list"},t._l(t.data.questionNames,(function(e,a){return s("div",{key:a,staticClass:"content-item"},[e?s("div",{staticClass:"question"},[t._v(" "+t._s(e)+" ")]):t._e()])})),0)])])]:t._e(),s("div",{staticClass:"block-main-label"},[t._v(" Customized tags ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"custom-tags"},t._l(t.data.customTags,(function(e,a){return s("div",{key:"tagIndex"+a,staticClass:"tag-item"},[s("a-tooltip",{attrs:{title:e.parentName}},[s("a-tag",{staticClass:"tag"},[t._v(" "+t._s(e.name)+" ")])],1)],1)})),0)]),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"block-main-label"},[t._v(" This task contains interactive questions of ")]),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"overview-block"},[s("div",{staticClass:"custom-tags"},t._l(t.inActiveTypes,(function(e,a){return s("div",{key:"interActiveIndex"+a,staticClass:"tag-item"},[s("a-tooltip",{attrs:{title:e}},[s("a-tag",{staticClass:"tag",attrs:{color:t.tagColorList[a]}},[t._v(" "+t._s(e)+" ")])],1)],1)})),0)]),s("div",{staticClass:"block-main-label"},[t._v(" Learning Objectives ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"learn-question-tag"},[s("div",{staticClass:"learn-out",staticStyle:{margin:"10px"}},[s("ui-learn-out-sub",{attrs:{"learn-outs":t.data.learnOuts,"self-outs":t.data.selfOuts,"class-info-list":t.itemsList}})],1)])]),t.data.inquiry?[s("div",{staticClass:"block-main-label"},[t._v(" Big idea ")]),s("div",{staticClass:"inquiry-block-content"},[s("div",{staticClass:"inquiry"},[t._v(" "+t._s(t.data.inquiry)+" ")])])]:t._e(),t.data.materialList&&t.data.materialList.length?[s("div",{staticClass:"block-main-label"},[t._v(" Material list ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"material-list"},t._l(t.data.materialList,(function(e,a){return s("div",{key:a,staticClass:"material-item"},[s("div",{staticClass:"material-name"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"material-link",on:{click:function(a){return t.handleOpenLink(e.link)}}},[t._v(" "+t._s(e.link)+" ")])])})),0)])]:t._e(),t.data.rwc?[s("div",{staticClass:"block-main-label"},[t._v(" Real World Connection(s) ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"view-text"},[t._v(" "+t._s(t.data.rwc)+" ")])])]:t._e()],2)])])],1),s("a-row",{directives:[{name:"show",rawName:"v-show",value:"Preview"===t.viewMode,expression:"viewMode === 'Preview'"}],staticClass:"preview-data-info"},[s("a-col",{staticClass:"slide-preview",attrs:{span:"24"}},[t.data.scenarios||t.data.inquiry||t.data.questions&&t.data.questions.length?s("div",{staticClass:"data-detail-wrapper"},[t.data.scenarios?[s("div",{staticClass:"block-main-label"},[t._v(" Sustainable development goal ")]),s("div",{staticClass:"detail-block"},t._l(t.data.scenarios,(function(e,a){return s("div",{key:a,staticClass:"scenario-item ref-block"},[s("div",{staticClass:"scenario-block-content"},[s("div",{staticClass:"content-list"},[s("div",{staticClass:"content-item"},[s("div",{staticClass:"question"},[e.description?[s("a-tooltip",{attrs:{title:e.description,placement:"top"}},[t._v(" "+t._s(e.sdgName)+" ")])]:[t._v(" "+t._s(e.sdgName))]],2),s("div",{staticClass:"tags"},t._l(e.sdgKeyWords,(function(e,a){return s("div",{key:"tagIndex"+a,staticClass:"tag-item"},[s("a-tag",{staticClass:"tag"},[t._v(" "+t._s(e.name)+" ")])],1)})),0)])])])])})),0)]:t._e(),t.data&&t.data.inquiry?[s("div",{staticClass:"detail-block"},[s("div",{staticClass:"block-main-label"},[t._v(" Big idea ")]),s("div",{staticClass:"inquiry-block-content"},[s("div",{staticClass:"inquiry"},[t._v(" "+t._s(t.data.inquiry)+" ")])])])]:t._e(),t.data&&t.data.questions&&t.data.questions.length?[s("div",{staticClass:"block-main-label"},[t._v(" Key question(s)/Line(s) of Inquiry ")]),s("div",{staticClass:"detail-block"},[s("div",{staticClass:"keyword-block-content"},[t.data.questions&&t.data.questions.length?s("div",{staticClass:"content-list"},t._l(t.data.questions,(function(e,a){return s("div",{key:"qIndex"+a,staticClass:"content-item"},[e&&e.name?s("div",{staticClass:"question"},[t._v(" "+t._s(e.name)+" ")]):t._e()])})),0):t._e()])])]:t._e()],2):t._e(),t.type===t.typeMap.task&&t.data.presentationId&&t.imgList.length>0?[s("div",{staticClass:"top-icon-groups"},[s("a-col",{staticClass:"material-row"},[Object.keys(t.currentPageMaterial).length>0?s("div",{staticClass:"icon-group"},[t.currentPageMaterial.hasOwnProperty("text")?s("a-badge",{attrs:{count:t.showMaterialSize("text")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("text")}}},[s("text-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Text")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("image")?s("a-badge",{attrs:{count:t.showMaterialSize("image")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("image")}}},[s("image-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Image")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("video")?s("a-badge",{attrs:{count:t.showMaterialSize("video")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("video")}}},[s("video-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Video")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("audio")?s("a-badge",{attrs:{count:t.showMaterialSize("audio")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("audio")}}},[s("audio-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Audio")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("iframe")?s("a-badge",{attrs:{count:t.showMaterialSize("iframe")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("iframe")}}},[s("youtube-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Youtube")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("pdf")?s("a-badge",{attrs:{count:t.showMaterialSize("pdf")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("pdf")}}},[s("pdf-type-svg"),s("div",{staticClass:"icon-text"},[t._v("PDF")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("website")?s("a-badge",{attrs:{count:t.showMaterialSize("website")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("website")}}},[s("url-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Website")])],1)]):t._e()],1):t._e()])],1),s("a-skeleton",{attrs:{loading:t.slideLoading,active:""}},[s("div",{ref:"slide",staticClass:"slide-select-wrapper"},[s("div",{staticClass:"slide-select"},[s("div",{staticClass:"slide-select-and-preview"},[s("div",{staticClass:"slide-preview",style:{width:"600px"}},[s("a-carousel",{ref:"carousel",attrs:{arrows:"","after-change":t.onChangePage}},[s("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"10px",zIndex:"9"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[s("a-icon",{attrs:{type:"left-circle"}})],1),s("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"10px",zIndex:"9"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[s("a-icon",{attrs:{type:"right-circle"}})],1),t._l(t.imgList,(function(e,t){return s("div",{key:t},[s("img",{attrs:{src:e}})])}))],2),t.currentPageItem?s("div",{staticClass:"plugin-tags"},[s("a-row",{staticClass:"tag-row"},[t.currentPageItem.data.bloomLevel?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Bloom's Taxonomy:")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[t._v(t._s(t.currentPageItem.data.bloomLevel))])]):t._e(),t.currentPageItem.data.knowledgeLevel?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Knowledge dimension(s):")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[t._v(t._s(t.currentPageItem.data.knowledgeLevel))])]):t._e()]),s("a-row",{staticClass:"tag-row"},[t.currentPageItem.data.verbs&&t.currentPageItem.data.verbs.length>0?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Command terms:")]),t._l(t.currentPageItem.data.verbs,(function(e,a){return s("span",{key:a,staticClass:"tag-value",staticStyle:{color:"#15C39A"}},[t._v(t._s(e))])}))],2):t._e(),t.currentPageTips?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Tip added:")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#0054FF"}},[t._v(t._s(t.currentPageTips.tip))])]):t._e()]),t.currentPageItem.data.learnOuts&&t.currentPageItem.data.learnOuts.length>0?s("a-row",{staticClass:"tag-row"},[s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Learning Objectives:")]),t._l(t.currentPageItem.data.learnOuts,(function(e,a){return s("span",{key:a,staticClass:"tag-value",staticStyle:{color:"#00BCF2"}},[s("a-tooltip",{attrs:{title:e.path,overlayStyle:{"z-index":"3000"}}},[t._v(t._s(e.name)+" ")])],1)}))],2)]):t._e(),s("a-row",{staticClass:"tag-row"},[s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("This is a "),s("span",[t._v(t._s(t.currentPageItem.type))]),t._v(" slide")])])])],1):t._e(),t.imgList&&t.imgList.length?s("div",{staticClass:"page-info"},[t._v(" "+t._s(t.currentImgIndex+1)+" / "+t._s(t.imgList.length)+" ")]):t._e(),s("div",{staticClass:"carousel-page"},[s("div",{staticClass:"img-list-wrapper"},[s("div",{staticClass:"img-list"},t._l(t.imgList,(function(e,a){return s("div",{key:"index"+a,staticClass:"img-item",on:{click:function(e){return t.handleGotoImgIndex(a)}}},[s("img",{attrs:{src:e}})])})),0)])])],1)])])])])]:t._e(),t.type===t.typeMap.evaluation?[s("evaluation-table-preview",{attrs:{"evaluation-id":t.data.id}})]:t._e()],2)],1),s("a-row",{directives:[{name:"show",rawName:"v-show",value:"Reviews"===t.viewMode,expression:"viewMode === 'Reviews'"}],staticClass:"reviews-info"},["student"===t.currentRole?s("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[s("rate-by-percent",{attrs:{rates:t.reviewsStats}}),s("reviews-preview",{attrs:{id:t.id,role:"student",list:t.ReviewsTask.ReviewsTaskList,save:t.ReviewsTask.ReviewsTaskSave,del:t.ReviewsTask.ReviewsTaskDelete,myReview:t.ReviewsTask.ReviewsTaskMyReview}})],1):s("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[s("reviews-preview",{attrs:{id:t.id,role:"teacher",list:t.ReviewsTeacher.ReviewsTeacherList,save:t.ReviewsTeacher.ReviewsTeacherSave,del:t.ReviewsTeacher.ReviewsTeacherDelete,myReview:t.ReviewsTeacher.ReviewsTeacherMyReview,canEdit:!0},on:{update:t.loadReviewStats}})],1)],1)],s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px",zIndex:6e3,title:"My Materials"},on:{ok:function(e){t.materialVisible=!1},cancel:function(e){t.materialVisible=!1}},model:{value:t.materialVisible,callback:function(e){t.materialVisible=e},expression:"materialVisible"}},[s("task-material-preview",{attrs:{"current-page-element-lists":t.currentPageElementLists,"filter-type":t.filterMaterialType,"current-page-index":t.currentImgIndex}})],1),s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"900px",zIndex:5e3,title:null},on:{ok:function(e){t.mediaVisible=!1},cancel:function(e){t.mediaVisible=!1}},model:{value:t.mediaVisible,callback:function(e){t.mediaVisible=e},expression:"mediaVisible"}},[s("media-preview",{attrs:{"media-list":t.mediaList,"material-type":t.filterMaterialType}})],1)],2)},s=[],n=a("5530"),o=(a("a9e3"),a("d81d"),a("a630"),a("3ca3"),a("d3b7"),a("6062"),a("ddb0"),a("159b"),a("b0c0"),a("823b")),r=a("3f76"),l=a("69b3"),c=a("8c95"),d=a("c621"),u=a("972f"),h=a("7eee"),p=a("d33b"),m=a("873a"),g=a("542c"),f=a("91ff"),v=a("d980"),y=a("dd6e"),b=a("abb8"),C=a("e11c"),w=a("9afb"),k=a("f93e"),T=a("2934"),L=a("5225"),I=a("9fb0"),S=a("8ded"),A=a.n(S),x=a("2f59"),_=a("2f62"),D=a("6b36"),O=a("c2e5"),E=a("ca00"),N=E.formatLocalUTC,M=a("de0d"),j=M.UnitPlanQueryById,R=a("b199"),B=R.TaskQueryById,P=a("9f06"),U=P.EvaluationQueryById,F=a("95c6"),V=F.FavoritesAdd,$=a("56f2"),q=$.SelfStudyTaskBye,K=$.SelfStudyTaskStart,Q={name:"CommonPreview",components:{UiLearnOutSub:f["a"],EvaluationTablePreview:u["a"],CommonAssociatePreview:c["a"],NoMoreResources:l["a"],TaskLink:h["a"],MediaPreview:m["a"],TaskMaterialPreview:g["a"],RateByPercent:v["a"],ReviewsPreview:y["a"],ReviewScore:b["a"]},props:{id:{type:String,required:!0},type:{type:Number,required:!0},isLibrary:{type:Boolean,default:!1},myContentId:{type:String,default:null}},mixins:[p["a"],C["a"],x["a"]],computed:Object(n["a"])(Object(n["a"])({},Object(_["e"])({userMode:function(e){return e.app.userMode},currentRole:function(e){return e.user.currentRole}})),{},{lastChangeSavedTime:function(){if(this.data){o["info"]("lastChangeSavedTime data",this.data);var e=this.data.updateTime||this.data.createTime;if(e)return N(e)}return""},inActiveTypes:function(){var e=[];return this.itemsList&&(e=this.itemsList.map((function(e){return e.type}))),Array.from(new Set(e))}}),mixin:[x["a"]],data:function(){return{loading:!0,slideLoading:!1,copyLoading:!1,data:null,imgList:[],viewMode:"Detail",RATE_TOOLTIPS:k["y"],ReviewsTask:D,ReviewsTeacher:O,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:-1,typeMap:r["e"],subPreviewVisible:!1,currentImgIndex:0,initPrompts:[],reviewsStats:{avgReviewsScore:0,reviewsScoreStatDetail:[],reviewsCount:0,effectiveness:0,overall:0,quality:0,studentsEngagement:0}}},created:function(){o["info"]("CommonPreview id "+this.id+" type "+this.type),this.loadData()},methods:{loadData:function(){var e=this;o["info"]("loadData "+this.id+" type "+this.type),this.loading=!0,this.type===this.typeMap["unit-plan"]?j({id:this.id}).then((function(t){o["info"]("UnitPlanQueryById "+e.id,t.result),e.data=t.result,e.oldForm=e.data,e.data&&e.data.image&&(e.imgList=[e.data.image])})).finally((function(){e.loading=!1,e.queryContentCollaborates(e.id,e.type)})):this.type===this.typeMap.task?B({id:this.id}).then((function(t){o["info"]("TaskQueryById "+e.id,t.result),e.data=t.result,e.loading=!1,e.oldForm=e.data,e.queryContentCollaborates(e.id,e.type),e.loadThumbnail(),e.data.presentationId&&e.getClassInfo(e.data.presentationId)})):this.type===this.typeMap.evaluation&&U({id:this.id}).then((function(t){o["info"]("EvaluationQueryById "+e.id,t.result),e.data=t.result,e.oldForm=e.data,e.data&&e.data.image&&(e.imgList=[e.data.image])})).finally((function(){e.loading=!1,e.queryContentCollaborates(e.id,e.type)})),Object(T["a"])(k["q"]).then((function(t){t.success&&(o["info"]("DICT_PROMPT_TYPE",t.result),e.initPrompts=t.result)})),this.loadReviewStats()},handleAuthCallback:function(){this.$logger.info("Preview handleAuthCallback"),"loadThumbnail"===this.currentMethodName?this.loadThumbnail():"handleDuplicateItem"===this.currentMethodName&&this.handleDuplicateItem()},loadThumbnail:function(){var e=this;this.$logger.info("Preview loadThumbnail ",this.data),this.data.presentationId?this.isLibrary?Object(d["d"])({taskId:this.data.id}).then((function(t){if(t.code!==e.ErrorCode.ppt_google_token_expires&&t.code!==e.ErrorCode.ppt_forbidden){var a=t.result.pageObjects;e.thumbnailList=[],a.length?a.forEach((function(t){e.imgList.push(t.contentUrl),e.thumbnailList.push({contentUrl:t.contentUrl,id:t.pageObjectId}),e.slideLoading=!1,e.$logger.info("current imgList ",e.imgList)})):(e.imgList=[],e.slideLoading=!1)}else e.$logger.info("等待授权事件通知"),e.currentMethodName="loadThumbnail"})):Object(d["d"])({taskId:this.data.id}).then((function(t){if(t.code!==e.ErrorCode.ppt_google_token_expires&&t.code!==e.ErrorCode.ppt_forbidden){var a=t.result.pageObjects;e.thumbnailList=[],a.length?a.forEach((function(t){e.imgList.push(t.contentUrl),e.thumbnailList.push({contentUrl:t.contentUrl,id:t.pageObjectId}),e.slideLoading=!1,e.$logger.info("current imgList ",e.imgList)})):(e.imgList=[],e.slideLoading=!1)}else e.$logger.info("等待授权事件通知"),e.currentMethodName="loadThumbnail"})):this.slideLoading=!1},loadReviewStats:function(){var e=this,t=null;t="student"===this.currentRole?D["ReviewsTaskStats"]:O["ReviewsTeacherStats"],t&&t({taskId:this.id,purchasesId:this.id}).then((function(t){t.success&&(e.reviewsStats=t.result)}))},handleSelectContentType:function(e){o["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){o["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1},handleViewModeChange:function(){this.$logger.info("handleViewModeChange "+this.viewMode)},handleFavorite:function(e){var t=this;o["info"]("handleFavorite",e),V({sourceId:e.id,sourceType:e.type}).then((function(a){o["info"]("FavoritesAdd ",a),e.isFavorite=!e.isFavorite,t.data.isFavorite=e.isFavorite,t.$emit("favoritiesAdd",Object(n["a"])({},t.data))}))},handleGotoImgIndex:function(e){this.$logger.info("handleGotoImgIndex "+e),this.currentImgIndex=e,this.$refs.carousel.goTo(e)},handleEditItem:function(e){e.type=this.type,o["info"]("handleEditItem",e),e.type===r["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+e.id,"_blank"):e.type===r["e"].task?window.open("/teacher/task-redirect/"+e.id,"_blank"):e.type===r["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+e.id,"_blank")},handleDuplicateItem:function(){var e=this;this.$logger.info("handleDuplicateItem",this.data),this.$confirm({title:"Confirm to copy",content:"Are you sure to copy "+this.data.name+" ?",centered:!0,onOk:function(){e.copyLoading=!0,Object(w["Duplicate"])({id:e.data.id,type:e.data.type}).then((function(t){t.code!==e.ErrorCode.ppt_google_token_expires&&t.code!==e.ErrorCode.ppt_forbidden?(e.$logger.info("Duplicate response",t),e.$message.success("Copy successfully")):e.currentMethodName="handleDuplicateItem"})).finally((function(){e.copyLoading=!1}))}})},handleStartTask:function(){var e=this;this.$confirm({title:"Confirm to start",content:"Are you sure to start "+this.data.name+" ?",centered:!0,onOk:function(){e.copyLoading=!0,e.data.buyed||k["X"].SCHOOL===e.userMode?e.handleStartSession(e.data.id):q({taskId:e.data.id}).then((function(t){t.success&&e.handleStartSession(e.data.id)})).finally((function(){e.copyLoading=!1}))}})},handleOpenLink:function(e){window.open(e,"_blank")},handleStartSession:function(e){var t=this;this.copyLoading=!0,K({taskId:e}).then((function(e){if(t.$logger.info("StartOpenSession res",e),e.success){t.copyLoading=!1;var a=L["a"]+"s/"+e.result.classId+"?token="+A.a.get(I["a"]);t.$logger.info("try open "+a),window.location.href=a}else t.$message.warn("StartLesson Failed! "+e.message)})).finally((function(){t.copyLoading=!1}))}}},G=Q,H=(a("7569"),a("0c7c")),z=Object(H["a"])(G,i,s,!1,null,"0a1695ec",null);t["a"]=z.exports},1712:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.mergeTagList.length||e.showTagList.length,expression:"mergeTagList.length || showTagList.length"}],staticClass:"custom-tag"},[a("div",[a("a-card",{staticClass:"cover-card",attrs:{"head-style":{background:"#15c39a",color:"#fff"},"body-style":{padding:"10px"},title:"edit"===e.displayMode?"Tag your content":"Tag",bordered:!1}},[e.showArrow?a("a",{staticClass:"header-triangle"}):e._e(),a("a-button",{directives:[{name:"show",rawName:"v-show",value:"edit"===e.displayMode,expression:"displayMode === 'edit'"}],staticClass:"setting-button",attrs:{slot:"extra",href:"#"},on:{click:e.handleSetting},slot:"extra"},[e._v("My tags "),a("a-icon",{attrs:{type:"edit"}})],1),"edit"===e.displayMode?a("div",{staticClass:"tag-selected-label"},[0===e.showTagList.length?[e._v("No tags added : ")]:e._e(),0!==e.showTagList.length?[e._v("Tags added :")]:e._e()],2):e._e(),a("div",{staticClass:"tag-content-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTagList.length,expression:"showTagList.length"}],staticClass:"selected-tag"},[a("div",{staticClass:"skt-tag-list"},e._l(e.showTagList,(function(t){return a("div",{key:t.name,staticClass:"skt-tag-item "},[a("a-tooltip",{attrs:{title:t.parentName}},[a("a-tag",{class:{"tag-item":!0,"tag-disable":!e.canCloseTag(t)},attrs:{closable:e.canCloseTag(t)},on:{close:function(a){return e.closeTag(t)}}},[e._v(" "+e._s(t.name)+" ")])],1)],1)})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.tagList.length,expression:"!tagList.length"}],staticClass:"no-selected-tag"},[a("div",{staticClass:"no-tag-content"},["edit"===e.displayMode?[e._v("Click on the tag below to select")]:e._e(),"readonly"===e.displayMode?[e._v("no tag")]:e._e()],2)])]),"edit"===e.displayMode?a("a-spin",{attrs:{spinning:e.tagLoading}},[a("div",{staticClass:"tag-category"},[a("a-row",[a("a-col",{attrs:{offset:"0",span:"24"}},[a("div",[a("a-tabs",{attrs:{"tab-position":"top"}},e._l(e.mergeTagList,(function(t,i){return a("a-tab-pane",{key:i,attrs:{tab:t.name}},[a("a-row",[a("a-col",{attrs:{offset:"0",span:24}},[a("div",{staticClass:"tag-search-input"},[a("a-input-search",{staticClass:"search-input",attrs:{placeholder:"Search or create tags"},on:{search:e.searchTag,keyup:e.searchTag},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleKeyEnter(t)}},model:{value:e.inputTag,callback:function(t){e.inputTag=t},expression:"inputTag"}})],1)])],1),a("div",{staticClass:"skt-tag-wrapper"},[a("div",{staticClass:"triangle"}),1===t.customDeep?[a("div",{staticClass:"skt-tag-list"},[e.filterKeywordListInput(t.keywords).length>0?a("div",{staticClass:"search-tag-wrapper tag-wrapper"},e._l(e.filterKeywordListInput(t.keywords),(function(i,s){return a("div",{key:s,staticClass:"skt-tag-item"},[a("a-tag",{staticClass:"tag-item",attrs:{draggable:"true"},on:{click:function(a){return e.selectChooseTag(t,i)}}},[e._v(" "+e._s(i)+" ")])],1)})),0):e._e(),0!==e.filterKeywordListInput(t.keywords).length||t.createOwn?e._e():a("dvi",{staticClass:"no-tag-content"},[a("div",{staticClass:"no-tag-text"},[e._v("Tag does not exist")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.createOwn&&!e.tagNameIsExist(e.createTagName,e.showTagList)&&!e.tagIsExist(e.createTagName,e.filterKeywordListInput(t.keywords))&&e.createTagName&&e.createTagName.length>=1,expression:"parent.createOwn && !tagNameIsExist(createTagName,showTagList) && !tagIsExist(createTagName,filterKeywordListInput(parent.keywords)) && createTagName && createTagName.length >= 1"}],staticClass:"create-tag-wrapper tag-wrapper"},[a("div",{staticClass:"skt-tag-create-line",on:{click:function(a){return e.handleCreateTagByInput(t)}}},[a("div",{staticClass:"create-tag-label"},[e._v(" Create ")]),a("div",{staticClass:"create-tag"},[a("a-tag",{staticClass:"created-tag-item"},[e._v(" "+e._s(e.createTagName)+" ")])],1)])])],1)]:[a("a-tabs",{attrs:{"tab-position":"top"}},e._l(t.children,(function(i,s){return a("a-tab-pane",{key:s,attrs:{tab:i.name}},[a("div",{staticClass:"skt-tag-list"},[e.filterKeywordListInput(i.keywords).length>0?a("div",{staticClass:"search-tag-wrapper tag-wrapper"},e._l(e.filterKeywordListInput(i.keywords),(function(s,n){return a("div",{key:n,staticClass:"skt-tag-item"},[a("a-tag",{staticClass:"tag-item",on:{click:function(a){return e.selectChooseTag(i,s,t)}}},[e._v(" "+e._s(s)+" ")])],1)})),0):e._e(),a("div",{staticClass:"create-tag-wrapper tag-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.tagNameIsExist(e.createTagName,e.showTagList)&&!e.tagIsExist(e.createTagName,e.filterKeywordListInput(i.keywords))&&e.createTagName&&e.createTagName.length>=1,expression:"!tagNameIsExist(createTagName,showTagList) && !tagIsExist(createTagName, filterKeywordListInput(child.keywords)) && createTagName && createTagName.length >= 1"}],staticClass:"skt-tag-create-line",on:{click:function(a){return e.handleCreateTagByInput(i,t)}}},[a("div",{staticClass:"create-tag-label"},[e._v(" Create ")]),a("div",{staticClass:"create-tag"},[a("a-tag",{staticClass:"created-tag-item"},[e._v(" "+e._s(e.createTagName)+" ")])],1)])])])])})),1)]],2)],1)})),1)],1)])],1)],1)]):e._e()],1)],1),a("a-modal",{attrs:{title:"My tags",footer:null,width:"600px",destroyOnClose:"",afterClose:e.refreshTag},model:{value:e.settingVisible,callback:function(t){e.settingVisible=t},expression:"settingVisible"}},[a("div",[a("tag-setting")],1)])],1)},s=[],n=(a("159b"),a("c740"),a("b0c0"),a("4de4"),a("d81d"),a("ac1f"),a("1276"),a("a434"),a("7db0"),a("823b")),o=a("f736"),r=a("b842"),l=a("d28d"),c=a("d33b4"),d=a("69b3"),u={name:"CustomTag",components:{NoMoreResources:d["a"],TagBrowser:o["a"],TagSetting:r["a"]},mixins:[c["a"]],props:{selectedTagsList:{type:Array,default:function(){return[]}},customTags:{type:Object,required:!0},scopeTagsList:{type:Array,default:function(){return[]}},showArrow:{type:Boolean,default:!1},currentFieldName:{type:String,default:null},displayMode:{type:String,default:"edit"}},mounted:function(){},destroyed:function(){},data:function(){return{tagList:this.selectedTagsList,globalRootKey:"",tagLoading:!1,visible:!0,settingVisible:!1,browseVisible:!1,inputTag:"",tagName:"",createTagName:"",tagSearchList:[]}},created:function(){this.$logger.info("customTags",this.customTags)},computed:{showTagList:function(){var e=this,t=[];return this.tagList.forEach((function(a){e.currentFieldName&&e.currentFieldName===a.fieldName?t.push(a):e.currentFieldName||t.push(a)})),t},mergeTagList:function(){var e=this,t=[];this.$logger.info("customTags",this.customTags),this.$logger.info("scopeTagsList",this.scopeTagsList);var a=this.customTags.userGlobalTags;return this.scopeTagsList.forEach((function(i){var s=e.customTags.recommends.findIndex((function(e){return e.name===i})),n="";s>-1&&(n=e.customTags.recommends[s],n.customDeep>1&&a.length>0&&n.children.forEach((function(e){a.forEach((function(t){t.parentId===e.id&&-1===e.keywords.indexOf(t.name)&&e.keywords.push(t.name)}))})));var o=e.customTags.userTags.findIndex((function(e){return e.name===i}));o>-1&&(n?e.customTags.userTags[o].keywords.forEach((function(e){-1===n.keywords.indexOf(e)&&n.keywords.push(e)})):(n=e.customTags.userTags[o],n.customDeep||(n.customDeep=1))),n&&t.push(n)})),this.$logger.info("mergeTagList",t),t},filterKeywordListInput:function(){return function(e){var t=this,a=e;this.inputTag&&(a=e.filter((function(e){return e.toLowerCase().indexOf(t.inputTag.toLowerCase())>-1})));var i=this.tagList.map((function(e){return e.name.toLowerCase()}));return a.filter((function(e){return-1===i.indexOf(e.toLowerCase())}))}},canCloseTag:function(){return function(e){return-1!==this.scopeTagsList.indexOf(e.parentName)||!!(e.parentName.indexOf("-")>-1&&this.scopeTagsList.indexOf(e.parentName.split("-")[0]>-1))}}},watch:{selectedTagsList:function(){this.$logger.info("selectedTagsList change",this.selectedTagsList),this.tagList=this.selectedTagsList}},methods:{handleOk:function(){},handleCancel:function(){this.visible=!1},handleSetting:function(){this.settingVisible=!0},handleBrowse:function(){this.browseVisible=!0},closeTag:function(e){this.tagList.splice(this.tagList.findIndex((function(t){return t.name===e.name})),1),this.tagName="",this.$emit("change-user-tags",this.tagList)},selectChooseTag:function(e,t,a){this.$logger.info("choose tag ",e,t,a),this.tagList.unshift({parentName:a?a.name+"-"+e.name:e.name,name:t,fieldName:this.currentFieldName,id:"unique_id_"+Math.random()})},remoteChooseTag:function(e,t){var a=this,i=this.mergeTagList.find((function(t){return t.id===e}));i&&t&&("string"===typeof t&&(t=[t]),t.forEach((function(e){var t=a.tagList.find((function(t){return t.name===e}));t||a.selectChooseTag(i,e)})))},handleTagItemDrop:function(e,t){},handleCreateTagByInput:function(e,t){var a=this;this.$logger.info("skill handleCreateTagByInput "+this.createTagName,"parent",e);var i=this.tagList.find((function(e){return e.name.toLowerCase()===a.createTagName.toLowerCase()}));if(i)this.$message.warn("already exist same name tag");else{var s={name:this.createTagName,parentName:e.name,parentId:t?e.id:"",isGlobal:!!t};this.tagLoading=!0,Object(l["b"])(s).then((function(i){a.$logger.info("add AddUserTagNew ",i.result),i.success?(s.id=i.result.id,a.createTagName="",a.inputTag="",a.$message.success("Add tag successfully"),a.$emit("change-add-keywords",s),a.selectChooseTag(e,s.name,t)):a.$message.error(i.message),a.tagLoading=!1}))}},handleKeyEnter:function(e){this.$logger.info("tag handleKeyEnter ",this.inputTag,e),this.createTagName=this.inputTag,this.handleCreateTagByInput(e)},searchTag:function(e){n["info"]("tag searchTag",e),this.createTagName=this.inputTag},refreshTag:function(){this.$emit("reload-user-tags")}}},h=u,p=(a("b7b8"),a("0c7c")),m=Object(p["a"])(h,i,s,!1,null,"293c78e8",null);t["a"]=m.exports},"172e":function(e,t,a){},1899:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"common-link"},[i("div",{staticClass:"link-group-wrapper"},[e.groups.length&&!e.linkGroupLoading?[i("draggable",{attrs:{disabled:!e.canEdit,animation:"300",group:"group",move:e.onMove},model:{value:e.groups,callback:function(t){e.groups=t},expression:"groups"}},e._l(e.groups,(function(t,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:!(e.hiddenEmptyGroup&&0===t.contents.length),expression:"!(hiddenEmptyGroup && group.contents.length === 0)"}],key:s,staticClass:"link-group"},[i("div",{staticClass:"group-item"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.groupName,expression:"group.groupName"}],staticClass:"group-header"},[i("div",{staticClass:"group-left-info"},[i("div",{staticClass:"group-name"},[t.editing?e._e():i("div",{staticClass:"group-name-text"},[e._v(" "+e._s(t.groupName?t.groupName:"Untitled")+" ")]),t.editing?i("div",{staticClass:"group-name-input"},[i("a-input",{staticClass:"group-name-input",on:{pressEnter:function(a){return e.handleToggleEditGroupName(t,s)}},model:{value:e.newGroupName,callback:function(t){e.newGroupName=t},expression:"newGroupName"}})],1):e._e()]),e.canEdit?i("div",{staticClass:"group-edit-icon",on:{click:function(a){return e.handleToggleEditGroupName(t,s)}}},[i("a-tooltip",[i("template",{slot:"title"},[e._v(" Rename ")]),t.editing?e._e():i("a-icon",{style:{fontSize:"20px",color:"#15C39A"},attrs:{type:"edit"}})],2),t.editing?i("a-icon",{style:{fontSize:"20px",color:"#15C39A"},attrs:{type:"check"}}):e._e()],1):e._e()]),e.canEdit?i("div",{staticClass:"group-right-info"},[i("div",{staticClass:"group-action"},[i("a-button",{style:{"background-color":"#fff",color:"#000",border:"none"},attrs:{type:"primary"},on:{click:function(a){return e.handleLinkGroup(t)}}},[i("div",{staticClass:"btn-text"},[e._v(" + Link ")])])],1),i("a-popconfirm",{attrs:{"cancel-text":"No","ok-text":"Yes",title:"Delete group?"},on:{confirm:function(a){return e.handleDeleteGroup(t)}}},[i("span",{staticClass:"delete-action"},[i("img",{attrs:{src:a("1ffa")}})])])],1):e._e()]),i("draggable",{staticStyle:{width:"100%","min-height":"50px"},attrs:{disabled:!e.canEdit,animation:"300",group:"link-content"},on:{add:e.handleDragContent,update:e.handleDragContent,end:e.handleDragEnd},model:{value:t.contents,callback:function(a){e.$set(t,"contents",a)},expression:"group.contents"}},e._l(t.contents,(function(t){return i("div",{key:t.id,staticClass:"group-link-item"},[i("div",{staticClass:"left-info"},[i("div",{staticClass:"icon"},[i("content-type-icon",{attrs:{type:t.type}})],1),i("div",{staticClass:"name",on:{click:function(a){return e.handleViewDetail(t)}}},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[e._v(" Click and drag tasks to move between categorys ")]),e._v(" "+e._s(t.name?t.name:"untitled")+" ")],2)],1),t.type===e.typeMap.task?["fa"===t.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag green-active-task-type"},[e._v(" "+e._s(t.taskType)+" ")]):e._e(),"sa"===t.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag red-active-task-type"},[e._v(" "+e._s(t.taskType)+" ")]):e._e(),"activity"===t.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag blue-active-task-type"},[e._v(" "+e._s(t.taskType)+" ")]):e._e()]:e._e(),t.isCreated?i("div",{staticClass:"downloaded-icon"},[i("a-tooltip",{attrs:{placement:"top",title:"already saved in my content"}},[i("downloaded-svg")],1)],1):e._e()],2),i("div",{staticClass:"right-info"},[i("div",{staticClass:"date"},[e._v(e._s(e._f("dayjs")(t.createTime)))]),i("div",{staticClass:"status"},[0===t.status?[e._v("Draft")]:e._e(),1===t.status?[e._v("Published")]:e._e()],2),e.canEdit?i("div",{staticClass:"more-action-wrapper action-item-wrapper"},[i("a-dropdown",[i("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"more"}}),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("a-popconfirm",{attrs:{title:e.$t("teacher.my-content.action-delete")+"?","cancel-text":"No","ok-text":"Yes"},on:{confirm:function(a){return e.handleDeleteLinkItem(t)}}},[i("a",{staticClass:"delete-action",attrs:{href:"#"}},[i("a-icon",{attrs:{type:"delete"}}),e._v(" "+e._s(e.$t("teacher.my-content.action-delete"))+" ")],1)])],1),i("a-menu-item",[i("a",{on:{click:function(a){return e.handleEditLinkItem(t)}}},[i("a-icon",{attrs:{type:"form"}}),e._v(" "+e._s(e.$t("teacher.my-content.action-edit"))+" ")],1)])],1)],1)],1):e._e()])])})),0)],1)])})),0)]:e._e()],2),i("a-modal",{attrs:{"dialog-style":{top:"0px"},footer:null,destroyOnClose:"",width:"900px"},model:{value:e.selectLinkContentVisible,callback:function(t){e.selectLinkContentVisible=t},expression:"selectLinkContentVisible"}},[i("div",{staticClass:"my-modal-title",attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.linkTitle)+" ")]),i("div",{staticClass:"link-content-wrapper"},[i("new-my-content",{attrs:{"default-group-name":e.subDefaultGroupName,"filter-type-list":e.subFilterTypeList,"from-id":e.fromId,"from-type":e.fromType,"group-name-list":e.groupNameList,mode:"common-link","selected-list":e.selectedList,"show-create":e.showCreate,"show-tabs":e.showTabs},on:{cancel:function(t){e.selectLinkContentVisible=!1},ensure:e.handleEnsureSelectedLink}})],1)]),i("a-drawer",{attrs:{closable:!1,visible:e.previewVisible,destroyOnClose:"",placement:"right",width:"1000px"},on:{close:function(t){e.previewVisible=!1}}},[i("div",{staticClass:"preview-wrapper-row"},[i("div",{staticClass:"view-back"},[i("a-button",{staticClass:"preview-back-btn",attrs:{type:"primary",shape:"round"},on:{click:function(t){e.previewVisible=!1}}},[i("a-icon",{style:{"font-size":"12px"},attrs:{type:"left"}}),e._v("Back")],1)],1),e.previewCurrentId&&e.previewType?i("div",{staticClass:"detail-wrapper"},[i("common-preview-v2",{attrs:{id:e.previewCurrentId,type:e.previewType}})],1):e._e()])])],1)},s=[],n=a("2909"),o=(a("a9e3"),a("159b"),a("d3b7"),a("498a"),a("9afb")),r=a("9586"),l=a("1e7f"),c=a("3f76"),d=a("8f46"),u=a("823b"),h=a("adfc"),p=a("b76a"),m=a.n(p),g=a("1077"),f=a.n(g),v={name:"PlanLink",components:{ContentTypeIcon:d["a"],NewMyContent:l["a"],MyContentSelector:r["a"],CommonPreviewV2:h["a"],draggable:m.a,DownloadedSvg:f.a},props:{fromType:{type:Number,required:!0},fromId:{type:String,required:!0},filterType:{type:Number,default:0},hiddenEmptyGroup:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!0},isLibrary:{type:Boolean,default:!1}},computed:{groupNameList:function(){var e=[];return this.groups.forEach((function(t){e.push(t.groupName)})),e}},data:function(){return{defaultGroupName:"Untitled category",defaultGroupNameEditMode:"view",defaultGroupOtherContents:[],linkGroupLoading:!0,ownerLinkGroupList:[],othersLinkGroupList:[],groups:[],subDefaultGroupName:["Untitled category"],currentGroupId:null,selectLinkContentVisible:!1,typeMap:c["e"],previewVisible:!1,previewCurrentId:"",previewType:"",subFilterTypeList:[c["e"].evaluation],showCreate:!0,showTabs:!0,linkTitle:"Link Content",editingGroup:"",groupRransition:[],newGroupName:null,selectedList:[]}},created:function(){this.$logger.info("load PlanLink with id["+this.fromId+"] fromType["+this.fromType+"]"),this.subFilterTypeList=[c["e"].task],this.getAssociate()},methods:{getAssociate:function(){var e=this;this.$logger.info("GetAssociate id["+this.fromId+"] fromType["+this.fromType+"]"),this.linkGroupLoading=!0,Object(o["GetAssociate"])({id:this.fromId,type:this.fromType,published:this.isLibrary?1:0}).then((function(t){e.$logger.info("CommonLink GetAssociate response",t),e.groups=t.result.groups,e.$logger.info("formatted owner",t.result.owner),e.$logger.info("formatted others",t.result.others),e.othersLinkGroupList=[],e.ownerLinkGroupList=t.result.owner,e.groups.forEach((function(t){t.editing=!1,t.contents=[],e.ownerLinkGroupList.forEach((function(e){e.group===t.groupName&&(t.contents=e.contents)}))})),e.groups=e.groups.sort((function(e,t){return e.groupName?1:-1})),e.$logger.info("formatted groups",e.groups),e.$logger.info("ownerLinkGroupList",e.ownerLinkGroupList),t.result.others.forEach((function(t){var a;(a=e.othersLinkGroupList).unshift.apply(a,Object(n["a"])(t.contents))})),e.$logger.info("othersLinkGroupList",e.othersLinkGroupList),e.$emit("group-name-list-update")})).finally((function(){e.linkGroupLoading=!1}))},handleEnsureSelectedLink:function(e){this.$logger.info("handleEnsureSelectedLink",e),this.selectLinkContentVisible=!1,this.getAssociate()},handleLinkGroup:function(e){var t=this;this.$logger.info("handleLinkGroup",e),this.subDefaultGroupName=e.groupName,this.selectLinkContentVisible=!0,this.selectedList=[],e.contents.forEach((function(e){t.selectedList.push(e.type+"-"+e.id)})),this.fromType===c["e"]["unit-plan"]?this.subFilterTypeList=[c["e"].task]:this.filterType===c["e"].task&&(this.subFilterTypeList=[c["e"].evaluation,c["e"]["unit-plan"]])},handleToggleEditGroupName:function(e,t){var a=this;this.$logger.info("handleToggleEditGroupName",e),e.editing?function(){var i="Untitled group ",s=1;while(1){var n=!0;if(a.groups.forEach((function(e){e.groupName===i+s&&(n=!1)})),n){i+=s;break}s++}e.groupName=a.newGroupName&&a.newGroupName.trim().length?a.newGroupName:i,Object(o["AddOrSaveGroupName"])({fromId:a.fromId,fromType:a.fromType,id:e.id,groupName:e.groupName}).then((function(e){a.$logger.info("AddOrSaveGroupName",e)})).finally((function(){e.editing=!1,a.$set(a.groups,t,e)}))}():(this.newGroupName=e.groupName,e.editing=!0,this.$set(this.groups,t,e))},handleDeleteGroup:function(e){var t=this;this.$logger.info("handleDeleteGroup",e),Object(o["DeleteGroup"])({fromId:this.fromId,fromType:this.fromType,id:e.id}).then((function(e){t.$logger.info("DeleteGroup",e),t.getAssociate()}))},handleViewDetail:function(e){u["info"]("handleViewDetail",e),this.previewCurrentId=e.id,this.previewType=e.type,this.previewVisible=!0},handleEditLinkItem:function(e){u["info"]("handleEditLinkItem",e),e.type===c["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+e.id,"_blank"):e.type===c["e"].task?window.open("/teacher/task-redirect/"+e.id,"_blank"):e.type===c["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+e.id,"_blank")},handleDeleteLinkItem:function(e){var t=this;this.$logger.info("handleDeleteLinkItem",e),Object(o["AssociateCancel"])({fromId:this.fromId,fromType:this.fromType,toId:e.id,toType:e.type}).then((function(e){t.$logger.info("handleDeleteLinkItem response ",e),t.getAssociate()}))},handleDragEnd:function(){var e=this;u["info"]("handleDragEnd ",this.groups),this.groups.forEach((function(t,a){e.$set(e.groups,a,t)})),Object(o["SaveGroupItems"])({fromId:this.fromId,fromType:this.fromType,groups:this.groups}).then((function(t){e.$logger.info("AddOrSaveGroupName",t)})).finally((function(){}))},onMove:function(e,t){return!!e.draggedContext.element.groupName&&!!e.relatedContext.element.groupName},handleDragContent:function(e,t){this.$logger.info("PlanLink handleDragContent",e,this.groups,t);var a=JSON.parse(e.item.dataset.item);this.$logger.info("drag in data ",a)}}},y=v,b=(a("8b49"),a("0c7c")),C=Object(b["a"])(y,i,s,!1,null,"39bd8b28",null);t["a"]=C.exports},"1e7f":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-content"},[e.showTabs?i("div",{staticClass:"display-type-toggle"},[-1!==e.filterTypeList.indexOf(e.typeMap["unit-plan"])?i("div",{class:{"display-type-item":!0,"active-display-type":e.currentType===e.typeMap["unit-plan"]},on:{click:function(t){return e.handleToggleDisplayType(e.typeMap["unit-plan"])}}},[e._v(" "+e._s(e.$t("teacher.my-content.unit-plan-type"))+" ")]):e._e(),-1!==e.filterTypeList.indexOf(e.typeMap.task)?i("div",{class:{"display-type-item":!0,"active-display-type":e.currentType===e.typeMap.task},on:{click:function(t){return e.handleToggleDisplayType(e.typeMap.task)}}},[e._v(" "+e._s(e.$t("teacher.my-content.tasks-type"))+" ")]):e._e(),-1!==e.filterTypeList.indexOf(e.typeMap.evaluation)?i("div",{class:{"display-type-item":!0,"active-display-type":e.currentType===e.typeMap.evaluation},on:{click:function(t){return e.handleToggleDisplayType(e.typeMap.evaluation)}}},[e._v(" "+e._s(e.$t("teacher.my-content.evaluation-type"))+" ")]):e._e()]):e._e(),e.showCreate?i("div",{staticClass:"create-new-action"},[i("div",{staticClass:"create-action"},[i("a-button",{attrs:{type:"primary",shape:"round",icon:"plus",loading:e.createLoading},on:{click:e.handleEnsureCreate}},[e._v(" Create New "+e._s(e.currentTypeLabel)+" ")])],1)]):e._e(),i("div",{staticClass:"content-wrapper"},[i("a-skeleton",{attrs:{loading:e.skeletonLoading,active:""}},[i("div",{staticClass:"content-list"},["list"===e.dataListMode?i("a-list",{attrs:{size:"large",pagination:e.pagination,"data-source":e.myContentList,loading:e.loading},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("a-list-item",{key:"item.key",class:{"my-list-item":!0,"active-item":-1!==e.mySelectedList.indexOf(t.type+"-"+t.id),"active-new-item":t.id===e.editId},attrs:{"data-id":t.type+"-"+t.id}},[i("div",{staticClass:"select-block",on:{click:function(a){return e.handleLinkItem(t,a)}}},[-1===e.mySelectedList.indexOf(t.type+"-"+t.id)?i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):e._e(),-1!==e.mySelectedList.indexOf(t.type+"-"+t.id)?i("div",{staticClass:"selected-icon"},[i("img",{attrs:{src:a("7aa6")}})]):e._e()],1),i("span",{staticClass:"content-info-left"},[i("content-type-icon",{attrs:{type:t.type}}),i("span",{staticClass:"name-content"},[e.editId===t.id&&"input"===e.createNewNameMode?i("a-input",{ref:"inputRef",attrs:{size:"small",type:"text",placeholder:"Input name"},on:{blur:function(a){return e.handleConfirmName(t)},pressEnter:function(a){return e.handleConfirmName(t)}},model:{value:e.createNewName,callback:function(t){e.createNewName=t},expression:"createNewName"}}):i("a-tooltip",{attrs:{title:"Rename"}},[i("span",{staticClass:"name-text",on:{click:function(a){return e.handleRename(t)}}},[e._v(" "+e._s(t.name?t.name:"Untitled")+" ")])])],1)],1),i("span",{staticClass:"content-info-right"},[i("span",{staticClass:"status"},[0===t.status?[e._v("Draft")]:e._e(),1===t.status?[e._v("Published")]:e._e()],2),i("span",{staticClass:"update-time"},[e._v(" "+e._s(e._f("dayjs")(t.updateTime||t.createTime))+" ")]),i("div",{staticClass:"action"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item",on:{click:function(a){return e.handleViewDetail(t,a)}}},[i("span",{staticClass:"btn-text"},[e._v("Preview")])]),i("div",{staticClass:"action-item",on:{click:function(a){return e.handleEditItem(t)}}},[i("span",{staticClass:"btn-text"},[e._v("Edit")])])]),e.mode===e.displayMode.Link?i("div",{attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link this content to my Unit?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleLinkItem(t,a)}}},[i("span",[i("a-icon",{attrs:{type:"form"}}),e._v(" Link ")],1)])],1)])]):e._e(),e.mode===e.displayMode.Refer?i("div",{attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item refer-item"},[i("a-button",{staticClass:"refer-btn",attrs:{type:"primary"},on:{click:function(a){return e.handleReferItem(t,a)}}},[i("img",{staticClass:"btn-icon btn-icon-white",attrs:{src:a("e568")}}),i("img",{staticClass:"btn-icon btn-icon-color",attrs:{src:a("83d7")}}),i("div",{staticClass:"btn-text"},[e._v(" Refer ")])])],1)])]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.displayMode.Evaluation,expression:"mode === displayMode.Evaluation"}],attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleLinkItem(t,a)}}},[i("div",{staticClass:"link-item"},[i("img",{staticClass:"link-icon",attrs:{src:a("de1a")}}),e._v(" "+e._s("Link this evaluation to this "+(t.type===e.typeMap.task?"task":t.type===e.typeMap.task?"lesson":""))+" ")])])],1)])])])])])}}],null,!1,2451434729)}):e._e(),"card"===e.dataListMode?i("a-list",{attrs:{size:"large",pagination:e.pagination,"data-source":e.myContentList,loading:e.loading},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("div",{key:"item.key",staticClass:"my-card-list-item"},[i("div",{staticClass:"cover-img-wrapper"},[i("div",{staticClass:"cover-image",style:{backgroundImage:"url("+t.image+")"}})]),i("div",{staticClass:"item-intro"},[i("div",{staticClass:"page-info"},[i("span",{staticClass:"page-num-tag"},[e._v(" 1/1 ")])]),i("div",{staticClass:"main-title",on:{click:function(a){return e.handleViewDetail(t,a)}}},[e._v(" "+e._s(t.name?t.name:"Untitled")+" ")]),i("div",{staticClass:"sub-title"},[e._v(" "+e._s(e._f("dayjs")(t.createTime))+" ")])]),i("div",{staticClass:"item-action-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.displayMode.Link,expression:"mode === displayMode.Link"}]},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link this content to my Unit?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleLinkItem(t,a)}}},[i("span",[i("a-icon",{attrs:{type:"form"}}),e._v(" Link ")],1)])],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.displayMode.Refer,expression:"mode === displayMode.Refer"}]},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item refer-item"},[i("a-button",{staticClass:"refer-btn",attrs:{type:"primary"},on:{click:function(a){return e.handleReferItem(t,a)}}},[i("img",{staticClass:"btn-icon btn-icon-white",attrs:{src:a("e568")}}),i("img",{staticClass:"btn-icon btn-icon-color",attrs:{src:a("83d7")}}),i("div",{staticClass:"btn-text"},[e._v(" Refer ")])])],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.displayMode.Evaluation,expression:"mode === displayMode.Evaluation"}]},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleLinkItem(t,a)}}},[i("div",{staticClass:"link-item"},[i("img",{staticClass:"link-icon",attrs:{src:a("de1a")}}),e._v(" "+e._s("Link this evaluation to this "+(t.type===e.typeMap.task?"task":t.type===e.typeMap.task?"lesson":""))+" ")])])],1)])])]),i("div",{staticClass:"card-action-icon"},[-1!==e.mySelectedList.indexOf(t.type+"-"+t.id)?i("img",{attrs:{src:a("7aa6")}}):e._e()])])}}],null,!1,727205947)}):e._e(),i("div",{staticClass:"modal-ensure-action-line"},[i("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:e.handleCancel}},[e._v("Cancel")]),i("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round",loading:e.ensureLoading},on:{click:e.handleEnsure}},[e._v("Ok")])],1)],1)]),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",width:"800px",closable:!1,visible:e.previewVisible},on:{close:e.handlePreviewClose}},[i("div",{staticClass:"preview-wrapper"},[i("a-row",{staticClass:"preview-wrapper-row"},[i("a-col",{attrs:{span:"3"}},[i("div",{staticClass:"view-back",on:{click:e.handlePreviewClose}},[i("div",{staticClass:"back-icon"},[i("img",{attrs:{src:a("217a")}})])])]),i("a-col",{attrs:{span:"21"}},[i("div",{staticClass:"detail-wrapper"},[e.previewCurrentId&&e.previewType?i("div",{staticClass:"preview-detail"},[i("common-preview-no-link",{attrs:{id:e.previewCurrentId,type:e.previewType}})],1):e._e()])])],1)],1)])],1)])},s=[],n=a("3835"),o=a("b85c"),r=a("1da1"),l=(a("96cf"),a("a9e3"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("fb6a"),a("159b"),a("a434"),a("b0c0"),a("823b")),c=a("ea23"),d=a("7d7a"),u=a("9afb"),h=a("95c6"),p=a("3f76"),m=a("4803"),g=a("8f46"),f=a("4fb2"),v=a("57a5b"),y=a("69b3"),b=a("05be"),C=a.n(b),w=a("8d47"),k=a.n(w),T=a("9f06"),L=a("b199"),I=a("de0d"),S=a("1449"),A={name:"NewMyContent",components:{CommonPreviewNoLink:S["a"],ContentStatusIcon:m["a"],ContentTypeIcon:g["a"],UnitPlanPreview:c["default"],MaterialPreview:d["default"],NoMoreResources:y["a"],PuBuIcon:C.a,ListModeIcon:k.a},props:{filterTypeList:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}},mode:{type:String,default:v["a"].Link},selectedType:{type:String,default:"created-by-me"},currentId:{type:String,default:""},fromType:{type:Number,required:!0},fromId:{type:String,required:!0},defaultGroupName:{type:String,default:null},showTabs:{type:Boolean,default:!0},showCreate:{type:Boolean,default:!0},noSelectedTips:{type:String,default:"Please select at least one content."}},data:function(){var e=this;return{skeletonLoading:!0,loading:!0,createLoading:!1,loadFailed:!1,myContentList:[],displayMode:v["a"],currentStatus:"all-status",currentStatusLabel:this.$t("teacher.my-content.all-status"),currentType:null,currentTypeLabel:null,currentOwner:"all-owner",currentOwnerLabel:this.$t("teacher.my-content.all-owner"),previewVisible:!1,previewCurrentId:"",previewType:"",pagination:{onChange:function(t){l["info"]("pagination onChange",t),e.pageNo=t,e.loadMyContent()},showTotal:function(e){return"Total ".concat(e," items")},total:0,pageSize:10},pageNo:1,typeMap:p["e"],dataListMode:"list",createdType:"All",createNewName:"",createNewNameMode:"hide",mySelectedList:[],waitCancelAssociateMap:new Map,waitAddAssociateMap:new Map,editId:"",ensureLoading:!1}},watch:{selectedType:function(e){this.$logger.info("watch select type "+e),this.pageNo=1,this.myContentList=[],this.pagination.total=0,this.pagination.pageSize=8,this.loadMyContent()}},created:function(){this.$logger.info("NewMyContent filterTypeList",this.filterTypeList),this.filterTypeList.length&&(this.currentType=this.filterTypeList[0],this.currentTypeLabel=Object(p["b"])(this.filterTypeList[0])),this.$logger.info("currentTypeLabel "+this.currentTypeLabel),this.$logger.info("NewMyContent selectedList",this.selectedList),this.mySelectedList=this.selectedList.slice(),this.loadMyContent()},methods:{loadMyContent:function(){this.loading=!0,"Created by me"===this.createdType?this.getMyContent():"My Favorite"===this.createdType?this.getMyFavorites():"Shared"===this.createdType?(this.loading=!1,this.skeletonLoading=!1,this.$logger.info("shared coming soon!")):this.getMyContent()},handleToggleDataListMode:function(e){this.$logger.info("handleToggleDataListMode"+e),this.dataListMode=e},getMyContent:function(){var e=this,t=[];this.filterTypeList.forEach((function(e){t.push(p["e"][e])})),Object(u["FindMyContent"])({owner:p["c"][this.currentOwner],types:this.currentType?[this.currentType]:t,pageNo:this.pageNo,pageSize:this.pagination.pageSize,currentId:this.currentId}).then((function(t){l["info"]("getMyContent",t),t.result&&t.result.records&&t.result.records.length?(t.result.records.forEach((function(e,t){e.key=t})),e.myContentList=t.result.records,e.pagination.total=t.result.total):(e.myContentList=[],e.pagination.total=0),l["info"]("myContentList",e.myContentList)})).finally((function(){e.loading=!1,e.skeletonLoading=!1,e.$nextTick((function(){e.$refs.inputRef&&e.$refs.inputRef.focus()}))}))},getMyFavorites:function(){var e=this;this.$logger.info("getMyFavorites"),Object(h["FavoritesGetMyFavorites"])({type:this.currentType,pageNo:this.pageNo,pageSize:this.pagination.pageSize}).then((function(t){e.$logger.info("FavoritesGetMyFavorites response",t),t.result&&t.result.records&&t.result.records.length?(t.result.records.forEach((function(e,t){e.key=t})),e.myContentList=t.result.records,e.pagination.total=t.result.total,e.pagination.current=t.result.current):(e.myContentList=[],e.pagination.total=0)})).finally((function(){e.loading=!1,e.skeletonLoading=!1}))},toggleStatus:function(e,t){l["info"]("toggleStatus "+e+" label "+t),this.currentStatus=e,this.currentStatusLabel=t,this.loadMyContent()},toggleType:function(e,t){l["info"]("toggleType "+e+" label "+t),this.currentType=e,this.currentTypeLabel=t,this.loadMyContent()},toggleOwner:function(e,t){l["info"]("toggleOwner "+e+" label "+t),this.currentOwner=e,this.currentOwnerLabel=t,this.loadMyContent()},handleLinkItem:function(e,t){l["info"]("handleLinkItem",e),t.preventDefault(),t.stopPropagation();var a=e.type+"-"+e.id,i=this.mySelectedList.indexOf(a);-1!==i?(this.mySelectedList.splice(i,1),this.waitCancelAssociateMap.set(a,e),this.waitAddAssociateMap.delete(a)):(this.mySelectedList.push(a),this.waitAddAssociateMap.set(a,e),this.waitCancelAssociateMap.delete(a))},handleViewDetail:function(e,t){l["info"]("my content created by me handleViewDetail",e,t),t.preventDefault(),t.stopPropagation(),this.previewCurrentId=e.id,this.previewType=e.type,this.previewVisible=!0},handlePreviewClose:function(){l["info"]("handlePreviewClose"),this.previewCurrentId="",this.previewType="",this.previewVisible=!1},handleReferItem:function(e,t){l["info"]("handleReferItem",e),t.preventDefault(),t.stopPropagation(),f["b"].$emit(f["a"].ReferContentItem,{item:e})},handleToggleType:function(e){this.$logger.info("handleToggleType "+e),this.createdType=e,this.loadMyContent()},handleToggleDisplayType:function(e){this.$logger.info("handleToggleDisplayType"+e),this.currentType===e?(this.currentType=null,this.currentTypeLabel=null):(this.currentType=e,this.currentTypeLabel=Object(p["b"])(e)),this.$logger.info("after handleToggleDisplayType"+this.currentType),this.loadMyContent()},handleEnsureCreate:function(){var e=this;this.$logger.info("handleEnsureCreate "+this.currentType+" "+this.createNewName),this.createLoading=!0,this.createNewName="",this.currentType===this.typeMap.evaluation?Object(T["EvaluationAddOrUpdate"])({name:this.createNewName}).then((function(t){e.$logger.info("EvaluationAddOrUpdate response",t),e.editId=t.result.id,e.createNewNameMode="input";var a=e.typeMap.evaluation+"-"+e.editId;e.mySelectedList.push(a),e.waitAddAssociateMap.set(a,{id:e.editId,type:e.typeMap.evaluation}),e.loadMyContent()})).finally((function(){e.createLoading=!1})):this.currentType===this.typeMap.task?Object(L["TaskAddOrUpdate"])({name:this.createNewName}).then((function(t){e.$logger.info("TaskAddOrUpdate response",t),e.editId=t.result.id,e.createNewNameMode="input";var a=e.typeMap.task+"-"+e.editId;e.mySelectedList.push(a),e.waitAddAssociateMap.set(a,{id:e.editId,type:e.typeMap.task}),e.loadMyContent()})).finally((function(){e.createLoading=!1})):this.currentType===this.typeMap["unit-plan"]&&Object(I["UnitPlanAddOrUpdate"])({name:this.createNewName}).then((function(t){e.$logger.info("UnitPlanAddOrUpdate response",t),e.editId=t.result.id,e.createNewNameMode="input";var a=e.typeMap["unit-plan"]+"-"+e.editId;e.mySelectedList.push(a),e.waitAddAssociateMap.set(a,{id:e.editId,type:e.typeMap["unit-plan"]}),e.loadMyContent()})).finally((function(){e.createLoading=!1}))},handleCancel:function(){this.$emit("cancel")},handleEnsure:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,s,r,l,c,d,h,p,m,g,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$logger.info("handleEnsure add group associate",e.waitAddAssociateMap,e.waitCancelAssociateMap,e.defaultGroupName),e.ensureLoading=!0,!e.waitCancelAssociateMap.size&&!e.waitAddAssociateMap.size){t.next=18;break}a={fromId:e.fromId,fromType:e.fromType,groupName:e.defaultGroupName,otherContents:[]},i=Object(o["a"])(e.waitAddAssociateMap);try{for(i.s();!(s=i.n()).done;)r=Object(n["a"])(s.value,2),l=r[0],c=r[1],-1===e.selectedList.indexOf(l)?a.otherContents.push({toId:c.id,toType:c.type}):e.$logger.info("handleEnsure waitAddAssociateMap item is selected skip "+l,c,e.selectedList)}catch(v){i.e(v)}finally{i.f()}d={fromId:e.fromId,fromType:e.fromType,others:[]},h=Object(o["a"])(e.waitCancelAssociateMap);try{for(h.s();!(p=h.n()).done;)m=Object(n["a"])(p.value,2),g=m[0],f=m[1],-1!==e.selectedList.indexOf(g)?d.others.push({toId:f.id,toType:f.type}):e.$logger.info("handleEnsure waitCancelAssociateMap item is no selected skip "+g,f,e.selectedList)}catch(v){h.e(v)}finally{h.f()}if(e.ensureLoading=!0,e.$logger.info("associate data",a),!a.otherContents.length){t.next=14;break}return t.next=14,Object(u["Associate"])(a);case 14:if(e.$logger.info("cancelAssociateData data",d),!d.others.length){t.next=18;break}return t.next=18,Object(u["AssociateCancel"])(d);case 18:e.ensureLoading=!1,e.$emit("ensure");case 20:case"end":return t.stop()}}),t)})))()},handleEditItem:function(e){l["info"]("handleEditItem",e),e.type===p["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+e.id,"_blank"):e.type===p["e"].task?window.open("/teacher/task-redirect/"+e.id,"_blank"):e.type===p["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+e.id,"_blank")},handleConfirmName:function(e){var t=this;this.createNewNameMode="hide",e.name!==this.createNewName&&(e.name=this.createNewName,Object(u["Rename"])({id:e.id,type:e.type,name:this.createNewName}).then((function(e){t.$logger.info("Rename response",e),e.success||t.$message.error(e.message)})))},handleRename:function(e){var t=this;this.editId=e.id,this.createNewNameMode="input",this.createNewName=e.name,this.$nextTick((function(){t.$refs.inputRef.focus()}))}}},x=A,_=(a("98bc"),a("0c7c")),D=Object(_["a"])(x,i,s,!1,null,"51277f3f",null);t["a"]=D.exports},"1ffa":function(e,t,a){e.exports=a.p+"img/delete.531182ef.png"},"207f":function(e,t,a){"use strict";a("6f02")},"20de":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"30.75",height:"24.6",viewBox:"0 0 30.75 24.6"},children:[{tag:"g",attrsMap:{id:"黄色文件夹",transform:"translate(0)"},children:[{tag:"path",attrsMap:{id:"路径_406","data-name":"路径 406",style:"fill: #ce9f06;",class:"cls-1",d:"M269.187,4.28H258.341L255.592.494A1.286,1.286,0,0,0,254.676,0h-7.638c-.916,0-1.526.988-1.221,2.305l2.749,17.288a1.486,1.486,0,0,0,1.375,1.317h16.8a1.513,1.513,0,0,0,1.375-1.316l2.139-13.173c.305-1.153-.305-2.14-1.07-2.14Z",transform:"translate(-239.833)"}},{tag:"path",attrsMap:{id:"路径_407","data-name":"路径 407",style:"fill: #fff;",class:"cls-2",d:"M358.4,286.514V275.456h18.45v11.058Z",transform:"translate(-349.793 -268.839)"}},{tag:"path",attrsMap:{id:"路径_408","data-name":"路径 408",style:" fill: #ffcd2c;",class:"cls-3",d:"M29.158,229.582H15.641l-3.615-3.806a1.656,1.656,0,0,0-1.1-.5H1.5a1.552,1.552,0,0,0-1.415,2.15L4.64,243.31a1.766,1.766,0,0,0,1.728,1.159H25.413a1.768,1.768,0,0,0,1.729-1.157l3.588-12.076a1.523,1.523,0,0,0-1.572-1.653Z",transform:"translate(0 -219.868)"}}]}]})}},"214d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-tag"},[a("div",{staticStyle:{"font-family":"Inter-Bold"}},[e._v(" "+e._s(e.knowledge.name)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tags.length,expression:"tags.length"}],staticClass:"tag-select-wrapper"},[a("a-row",[a("a-col",{attrs:{offset:"0",span:"24"}},[a("div",{staticClass:"skt-tag-list"},e._l(e.tags,(function(t){return a("div",{key:t,staticClass:"skt-tag-item "},[a("a-tag",{staticClass:"tag-item",attrs:{closable:!0},on:{close:function(a){return e.closeTag(t)}}},[e._v(" "+e._s(t)+" ")])],1)})),0)])],1)],1),a("a-spin",{directives:[{name:"show",rawName:"v-show",value:e.tagLoading,expression:"tagLoading"}],staticClass:"spin-loading"}),a("a-row",[a("a-col",[a("div",{staticClass:"tag-search-input"},[a("a-input-search",{staticClass:"search-input",attrs:{size:"large",placeholder:"Search tag"},on:{search:e.searchTag,keyup:e.searchTag},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeyup.apply(null,arguments)}},model:{value:e.inputTag,callback:function(t){e.inputTag=t},expression:"inputTag"}})],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tagSearchList.length||e.inputTag,expression:"tagSearchList.length || inputTag"}],staticClass:"skt-tag-wrapper"},[a("a-row",[a("a-col",{attrs:{offset:"0"}},[a("div",{staticClass:"skt-tag-list"},[a("div",{staticClass:"triangle"}),a("div",{staticClass:"search-tag-wrapper tag-wrapper"},e._l(e.tagSearchList,(function(t){return a("div",{key:t,staticClass:"skt-tag-item"},[a("a-tag",{class:{"tag-item":!0,"tag-disable":e.tags.indexOf(t)>-1},attrs:{draggable:"true"},on:{click:function(a){return e.selectChooseTag(t)}}},[e._v(" "+e._s(t)+" ")])],1)})),0),a("div",{staticClass:"create-tag-wrapper tag-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.tagIsExist(e.inputTag,e.tagSearchList)&&e.inputTag&&e.inputTag.length>=1,expression:"!tagIsExist(inputTag,tagSearchList) && inputTag && inputTag.length >= 1"}],staticClass:"skt-tag-create-line",on:{click:e.handleCreateTagByInput}},[a("div",{staticClass:"create-tag-label"},[e._v(" Create ")]),a("div",{staticClass:"create-tag"},[a("a-tag",{staticClass:"created-tag-item"},[e._v(" "+e._s(e.inputTag)+" ")])],1)])])])])],1)],1),e.contentLoading?e._e():a("div",{directives:[{name:"show",rawName:"v-show",value:!e.inputTag,expression:"!inputTag"}],staticClass:"hot-select-wrapper"},[a("a-row",[a("a-col",{attrs:{offset:"0",span:"24"}},[a("div",{staticClass:"title"},[e._v("Hot")]),a("div",{staticClass:"skt-tag-list"},e._l(e.hotList,(function(t,i){return a("div",{key:i,staticClass:"skt-tag-item"},[a("a-tag",{class:{"tag-item":!0,"tag-disable":e.tags.indexOf(t)>-1},on:{click:function(a){return e.addTag(t)}}},[e._v(" "+e._s(t)+" ")])],1)})),0)]),a("a-col",{attrs:{offset:"0",span:"24"}},[a("div",{staticClass:"title"},[e._v("Knowledge")]),a("div",{ref:"knowledgeTagRef",class:{"skt-tag-list":!0,"hide-some":e.isHideSome}},e._l(e.recommendList,(function(t,i){return a("div",{key:i,staticClass:"skt-tag-item "},[a("a-tag",{class:{"tag-item":!0,"tag-disable":e.tags.indexOf(t)>-1},on:{click:function(a){return e.addTag(t)}}},[e._v(" "+e._s(t)+" ")])],1)})),0),a("div",{staticClass:"downUp"},[e.isHideSome?a("a-icon",{attrs:{type:"double-right"},on:{click:e.showAll}}):e._e(),e.isHideSome?e._e():a("a-icon",{attrs:{type:"double-left"},on:{click:e.showAll}})],1)])],1)],1),a("a-skeleton",{attrs:{loading:e.contentLoading,active:""}})],1)},s=[],n=(a("a434"),a("498a"),a("823b")),o=a("db6a"),r=a("d33b4"),l=a("4fcf"),c=l.debounce,d={name:"LearnOutAddTag",components:{},mixins:[r["a"]],computed:{},props:{knowledge:{type:Object,default:function(){}}},data:function(){return{tags:this.knowledge.tags?this.knowledge.tags:[],hotList:[],recommendList:[],tagLoading:!1,contentLoading:!1,visible:!0,inputTag:"",tagName:"",tagSearchList:[],userTags:[],isHideSome:!0}},created:function(){this.debouncedSearchKnowledge=c(this.searchTag,500),this.$logger.info("knowledge ",this.knowledge),this.loadRecommendTags()},watch:{},methods:{handleOk:function(){},closeTag:function(e){this.tags.splice(this.tags.indexOf(e),1),this.$emit("handle-select-tags",this.tags),this.$logger.info("handle-select-tags ",this.tags)},selectChooseTag:function(e){this.addTag(e)},loadRecommendTags:function(){var e=this;this.contentLoading=!0,Object(o["FindRecommendByKnowledgeId"])({knowledgeId:this.knowledge.knowledgeId}).then((function(t){e.$logger.info("loadRecommendTags response",t.result),t.success?(e.hotList=t.result.hots,e.recommendList=t.result.tags,e.contentLoading=!1,setTimeout((function(){e.$refs.knowledgeTagRef.offsetHeight<200&&(e.isHideSome=!1)}),100)):e.$message.error(t.message)}))},addTag:function(e){-1===this.tags.indexOf(e)&&this.tags.push(e),this.$emit("handle-select-tags",this.tags),this.$logger.info("handle-select-tags ",this.tags)},handleKeyup:function(){this.$logger.info("tag handleKeyup ",this.inputTag),this.debouncedSearchKnowledge(this.inputTag),this.handleCreateTagByInput()},handleCreateTagByInput:function(){this.$logger.info("skill handleCreateTagByInput "+this.inputTag),this.addTag(this.inputTag),this.inputTag=""},searchTag:function(){var e=this;n["info"]("searchTag",this.inputTag);var t=this.inputTag;t&&"string"===typeof t&&t.trim().length>=3?Object(o["FindRecommendByKnowledgeId"])({knowledgeId:this.knowledge.knowledgeId,key:t}).then((function(t){n["info"]("searchByDescription",t),e.tagSearchList=t.result.tags})):this.tagSearchList=[]},handleEnsureSelectData:function(){this.addTagVisible=!1,this.knowledge.tags=this.tags,this.$emit("remove-learn-outs",this.tags)},showAll:function(){this.isHideSome=!this.isHideSome}}},u=d,h=(a("9ee6"),a("0c7c")),p=Object(h["a"])(u,i,s,!1,null,"29f8bd7a",null);t["a"]=p.exports},"217a":function(e,t,a){e.exports=a.p+"img/back.c46424eb.png"},"247c":function(e,t,a){},"24e3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAmCAYAAAC29NkdAAAAAXNSR0IArs4c6QAAA2BJREFUWEfNmEloFEEUhr83iTHGLQqCMaKIIO4KehARNJLMaDwYMQRF8SxuF8WD4JKgB1HEBZFchIAobogLWWYSoiAo0aCCIgQRcQUXEteAmfST7jjjOHv3lGCdBrr+731dXVNd1UKapi1U4aMaZQZCKcpIhNfAAyya+MFlWUVPWsYNRlHAamA5wlyU8QifgVfAY5Tz4qcxFUOSXdAQSxCOosxJVxz4DpzAYr8EnN/Rpu0MI8weYDNQlJajdGCxVZbREd8vQVBb2Y1Sl0Es/vJD+qmUZbyzL2gbE7GcUZnughMG9kkFB2IzfwlqiJPAJhfQ2K7PgTL6KSCPW8A4TxylTvzsjWSjgtrKNpRjnqCRkPIEwQdMy4GjWNRIgEs2wxHUFibh4wkwJAewuajyBYup9pQZEAxyDmGNuQoGSEq9+Nko2kYpFi+AfANYk4he+hgrGmQ7wmGTZGMsZYMt2IwQMAY1CVIaREO8BUpMcg2yOm1BNQg0jfpoC9oreJ5pshGeYtmC3UCxEaB5SI8t+AiYbZ5thPjQFmwANhjBmYbYi7W2sA4fZ0yzDfGqRK9TRCFv/rt5qHQTpiSyWTiEjx2G7toMxqJWAuwbEGxkDIN4BowwQ8+RorxnEJOljG+x+8GdKAdzRJuJKxvFT70N+yPYTj593EWYZ6aKZ8o9brNAarH+EnQedTMz8NGJMNgzPrdgLzBPKngawSQemkJsBY7nVsdzepNUcCo2nfzYGeQiQrXnMt6C56UicVefXLCdQsKEgEXearlO3aIEv8zkZ3wyqaAzH69QzDDn+Piv39Od/KBMVvI12W2lFPz9pykhjzvARNdjkl2gC2GhlPMpVfe0go5kK1NQbv6DXfdL8lksZc6BLWXLKBgjac/JCdkNTMZeXeQTyCSXsA6mw2qQcQjNwKyM5dOCuE+YSqnkQzacrEYwAtJ2ignTBCzIBp6kTxvdVEkN37LNuxJ0HncLQ8njGsrSbIs4/ZQr9LBGahKXkpznYDxAL1DAaBrQrD+XnKKcLSID71c3zfUIRh+3IoTYj7ArTcF+lJ3i54gbqdi+ngWjokHWIpwGCuMkehDWSrnzx/LcchZ0pleQ+QjXomul8ow+VsgKujyb/Q4aEXQkrzKcItZjf37s5WyqV5db4V8Yk/SC1H4NzQAAAABJRU5ErkJggg=="},2609:function(e,t,a){},2775:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-search-input"},[a("a-input",{style:{borderRadius:e.round?"32px":"6px"},attrs:{placeholder:e.placeholder},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)},function(t){return e.handleUpdateValue.apply(null,arguments)}]},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}}),a("div",{staticClass:"search-icon",on:{click:e.handleSearch}},[a("search-icon")],1),e.data?a("div",{staticClass:"search-close",on:{click:e.handleClear}},[a("a-icon",{attrs:{type:"close"}})],1):e._e()],1)},s=[],n=a("c44c"),o=a.n(n),r={name:"CustomSearchInput",components:{SearchIcon:o.a},props:{value:{type:String,default:null},round:{type:Boolean,default:!1},placeholder:{type:String,default:null}},data:function(){return{data:null}},watch:{value:function(e){this.data=e}},created:function(){this.data=this.value},methods:{handleSearch:function(){this.$logger.info("search",this.data),this.$emit("search",this.data)},handleUpdateValue:function(){this.$emit("update:value",this.data),this.$emit("change",this.data)},handleClear:function(){this.data="",this.handleUpdateValue(),this.handleSearch(),this.$emit("clear")}}},l=r,c=(a("cfe3"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,"10ece3be",null);t["a"]=d.exports},"27aa":function(e,t,a){"use strict";a("5bb5")},"27f0":function(e,t){e.exports="data:image/png;base64,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"},2943:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"plus-icon",style:{width:e.size+"px",height:e.size+"px"},on:{click:e.handleClick}},[a("plus-btn",{style:{width:e.size+"px",height:e.size+"px",fill:e.color}})],1)},s=[],n=(a("a9e3"),a("3354")),o=a.n(n),r={name:"PlusIcon",props:{size:{type:Number,default:15},color:{type:String,default:"#007A8E"}},components:{PlusBtn:o.a},data:function(){return{}},created:function(){},methods:{handleClick:function(){this.$emit("click")}}},l=r,c=(a("db87"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,"da0bcc88",null);t["a"]=d.exports},"295a":function(e,t,a){"use strict";a("ed14")},"2a7e":function(e,t,a){},"2ac8":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("b775"),s={QuestionAddOrUpdate:"/classcipe/api/question/addOrUpdate",QuestionQueryById:"/classcipe/api/question/queryById",QuestionDelete:"/classcipe/api/question/delete",QuestionDeleteBatch:"/classcipe/api/question/deleteBatch",QuestionList:"/classcipe/api/question/list",FindQuestionsByBigIdea:"/classcipe/api/question/findQuestionsByBigIdea"};function n(e){return Object(i["d"])({url:s.FindQuestionsByBigIdea,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"2ae5":function(e,t){e.exports="data:image/png;base64,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"},"2c6e":function(e,t,a){e.exports=a.p+"img/alert.03d7851e.png"},"2cf6":function(e,t,a){"use strict";a("ad1e")},"2d57":function(e,t,a){},"2e09":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-space",[null!==e.currentBloom?a("a-popover",{attrs:{trigger:"click",overlayClassName:"choose-con",visible:e.bloomTagVisible},on:{visibleChange:e.handleBloomChange}},[a("template",{slot:"content"},[a("div",{staticClass:"choose-bar-title"},[e._v("Set Bloom's taxonomy")]),a("div",{staticClass:"choose-bar"},e._l(e.bloomLevel,(function(t,i){return a("div",{key:"bloom_"+t.title,staticClass:"choose-bar-item",style:{background:e.COLOR_LEVEL.BLOOM[i],height:e.HEIGHT[i]+"px"},on:{click:function(a){return e.changeLevel("bloomTag",t.title)}}},[a("label",[e._v(e._s(t.title))])])})),0)]),e.currentBloom?a("a-rate",{staticClass:"rate-bar-con super-small bloom-color",attrs:{tooltips:e.bloomLevelDesc,count:e.bloomLevel.length,value:e.currentBloomLevel,disabled:""}},[a("div",{attrs:{slot:"character"},slot:"character"},[a("div",{staticClass:"rate-bar"})])]):a("a-icon",{staticClass:"default-icon",attrs:{type:"plus-circle"}})],2):e._e(),null!==e.currentKnowledge?a("a-popover",{attrs:{trigger:"click",overlayClassName:"choose-con",visible:e.knowledgeDimensionVisible},on:{visibleChange:e.handleKnowledgeChange}},[a("template",{slot:"content"},[a("div",{staticClass:"choose-bar-title"},[e._v("Set Knowledge Dimensions")]),a("div",{staticClass:"choose-bar"},e._l(e.knowledgeLevel,(function(t,i){return a("div",{key:"knowledge_"+t.title,staticClass:"choose-bar-item",style:{background:e.COLOR_LEVEL.KNOWLEDGE[i],height:e.HEIGHT[i]+"px"},on:{click:function(a){return e.changeLevel("knowledgeDimension",t.title)}}},[a("label",[e._v(e._s(t.title))])])})),0)]),e.currentKnowledge?a("a-rate",{staticClass:"rate-bar-con super-small knowledge-color",attrs:{tooltips:e.knowledgeLevelDesc,count:e.knowledgeLevel.length,value:e.currentKnowledgeLevel,disabled:""}},[a("div",{attrs:{slot:"character"},slot:"character"},[a("div",{staticClass:"rate-bar"})])]):a("a-icon",{staticClass:"default-icon",attrs:{type:"plus-circle"}})],2):e._e()],1)},s=[],n=a("3835"),o=(a("d81d"),a("7db0"),a("d3b7"),a("3ca3"),a("ddb0"),a("f93e")),r=a("2934"),l={name:"RateLevel",props:{bloom:{type:String,default:null},knowledge:{type:String,default:null}},watch:{bloom:{handler:function(e){this.currentBloom=e}},knowledge:{handler:function(e){this.currentKnowledge=e}}},computed:{bloomLevelDesc:function(){return this.bloomLevel&&this.bloomLevel.length>0?this.bloomLevel.map((function(e){return e.title})):[]},currentBloomLevel:function(){var e=this;if(this.currentBloom&&this.bloomLevel.length>0){var t=this.bloomLevel.find((function(t){return t.text===e.currentBloom}));return t?parseInt(t.value):0}return 0},knowledgeLevelDesc:function(){return this.knowledgeLevel&&this.knowledgeLevel.length>0?this.knowledgeLevel.map((function(e){return e.title})):[]},currentKnowledgeLevel:function(){var e=this;if(this.currentKnowledge&&this.knowledgeLevel.length>0){var t=this.knowledgeLevel.find((function(t){return t.text===e.currentKnowledge}));return t?parseInt(t.value):0}return 0}},data:function(){return{COLOR_LEVEL:o["f"],bloomTagVisible:!1,knowledgeDimensionVisible:!1,HEIGHT:[20,27,35,45,56,67,78,100],currentBloom:this.bloom,currentKnowledge:this.knowledge,bloomLevel:[],knowledgeLevel:[]}},created:function(){this.initDict()},methods:{initDict:function(){var e=this;Promise.all([Object(r["a"])(o["k"]),Object(r["a"])(o["l"])]).then((function(t){var a=Object(n["a"])(t,2),i=a[0],s=a[1];i.success&&(e.bloomLevel=i.result),s.success&&(e.knowledgeLevel=s.result)}))},changeLevel:function(e,t){this[e+"Visible"]=!1,this.$emit("change",{type:e,title:t})},handleKnowledgeChange:function(e){this.knowledgeDimensionVisible=e},handleBloomChange:function(e){this.bloomTagVisible=e}}},c=l,d=(a("dec2"),a("295a"),a("0c7c")),u=Object(d["a"])(c,i,s,!1,null,"0a638762",null);t["a"]=u.exports},"30f4":function(e,t,a){"use strict";a("56bd")},"32b8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAhCAYAAADDAmudAAAAAXNSR0IArs4c6QAABCtJREFUSEuVll1oHFUUx/9ndrbNQy1pGkEhhRSMpO18ZK1IxQgNRIhooVCkKfrQvhVJ6+42PvRB2j7Vh3RnarDJY0AEHyIijdS3Lhix0pjd2dl8gEICRiiIqaQBV3bmHrm72XSSzs6s8zj33P/vnnPPxyWEfB8eLe/bm/BuAtRLhDwTT1lO3x9htnH/KMogqzsWCGmAPWZM8hP+xF5N/R0nGlyPBJzEffUVveMuCENyEzPWWIhheyH1Y6uQSIAUyRz75SVSVBeEtrooe/BpOLdgft0KJBYgRbJ66QsQf/BUkD3BynnbNb6Mg7QEyBxzhiiBezvF2PNB/bdL5s9RkFCAjH0eA15jo8yqNtV/sluIgVXeEKmoiw8FZA3nhBDKQbusf9cQzerOP0/vIYBinsq5fReaeREKSPcWupU99FBscE/jdBnDWSGgO0xI+Il+e0ELzaxQQC1zEuqvYBrJucbntXQ1OqrNTsnMecvtGwhbbxaiMwCmAczkSuapy0ccTU3CjbrMahWvjy+ZD3bbhHugO/eIMCQv0SqZh9Oac01RcD0yJRl2zjUzsYC05r6jKGKmUVTrG4+fO7D/wBKBQuPfEJRVbrnmoUjAlZfnOkVbskBA11Zr2CTGGOJOv6XKvtdjLRz/LZjmO0KU1YvfgOh04FSbBKih6RkSL1/wqdvlvpm0XjiNKor2cmp1G5AxnI8IsONKP2qdBY9a5b5baX1+UIHyvqyPGmBEn+vdg2Sh1ZNGQK7nSuaNtF44r0CZqPiJ52uAjF68T0QnY08vxA2QchaE3ia2NUBWL42DeASCh+nSEedEMomfYsVlo/Zxzhcoqyoehnkr1wsL69MpvWOFCF1g2JQxnAkCLrYCEJ5I2YupYrO68KrQVZXeAPHklt73lDUcWaFaLIDxaN5dPyS7rExn3pv8PeiFrANBGEyAZwHqrKc55SlrFKsAqXEAFsqoVdZvbXdXw7kL4N3tlAbWwGgnwr6AVs0DjhVn+tRyjatBuxbTekx68GfDpWdAjOWq510YXzr+TBO7fLTYr6r0Q2Rd+DgnPdjh6vYGRqVK6BkvmWthIvWZoaw0B7BHFe9FymjFi6TQxG5DeUGWa4T2+Hpxlnr3EC81AzBj2nLN9yjdXWin/YqcVu27jGdzJfPNZgJZrXgWCn0Vvs6eV6XUZ0tmuV7JmnuFFDG2w5hRqfj/Hr6z+NqjMJGY6h/LlcyP5b4aQLbXlN4hh8xgUEyAZ4kwHHyX1san1nETCkbDwDK0Bfevtxqvku1uuvU0kW+f/t2eMJAnYJnBnSD0Rwyf2YqXePvOorbZ0NgxD+pv0YNWrVH9z4+Byccb65mp1YFKcGv4TNbmXyUlcS1YqU15jAeCxVW7nMqH2UQ+HS8ZTpcKnAHLsKCLCS+A2SOiZQjMCSG+lc0vytn/AMUIvCIfNlbzAAAAAElFTkSuQmCC"},3350:function(e,t,a){"use strict";a("d49c")},3354:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{t:"1652003320043",class:"icon",viewBox:"0 0 1025 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3575","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"48.046875",height:"48"},children:[{tag:"defs"},{tag:"path",attrsMap:{d:"M874.2655 149.720727a512.131782 512.131782 0 1 1-724.2325 0 512.188584 512.188584 0 0 1 724.2325 0z m-72.707263 72.139237a409.659983 409.659983 0 1 0 0 579.386 409.659983 409.659983 0 0 0 0-579.386z m-56.802549 253.339369a51.803925 51.803925 0 0 1-35.785606 88.043951h-0.568026l-145.414525-0.568026 0.568025 145.414526a51.122294 51.122294 0 0 1-51.122294 51.122294 51.122294 51.122294 0 0 1-51.690319-50.554269v-0.568025l0.568025-145.414526-145.414525 0.568026a51.122294 51.122294 0 0 1-51.122294-51.122295v-0.568025a51.122294 51.122294 0 0 1 51.122294-51.122294l145.414525 0.568025-0.568025-145.414525a51.406307 51.406307 0 0 1 102.812613 0l-0.568025 145.414525 145.414525-0.568025a51.122294 51.122294 0 0 1 36.353632 14.768663z","p-id":"3576"}}]})}},3361:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"27.909",viewBox:"0 0 28 27.909"},children:[{tag:"defs"},{tag:"path",attrsMap:{id:"liebiao_","data-name":"liebiao ",class:"cls-1",d:"M62,62h6.932v6.93H62V62Zm10.279,0H90v6.93H72.279V62Zm0,10.326H90v7.208H72.279V72.326ZM62,72.326h6.932v7.208H62V72.326Zm0,10.558h6.932v7.024H62V82.885Zm10.279,0H90v7.024H72.279V82.885Z",transform:"translate(-62 -62)"}}]})}},"35a2":function(e,t,a){"use strict";a("e317")},3906:function(e,t,a){},"3a09":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selfouts-input-with"},[a("a-textarea",{staticClass:"cc-form-textarea",attrs:{"auto-size":{minRows:1,maxRows:3},placeholder:"Type in your learning objective",disabled:e.disabled},on:{change:e.updateOptionsListFunction},nativeOn:{focus:function(t){return e.updateOptionsListFunction.apply(null,arguments)},click:function(t){return e.updateOptionsListFunction.apply(null,arguments)},input:function(t){return e.updateOptionsListFunction.apply(null,arguments)}},model:{value:e.displayValue,callback:function(t){e.displayValue=t},expression:"displayValue"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.optionList.length,expression:"optionList.length"}],staticClass:"option-list",on:{click:function(e){e.stopPropagation()}}},e._l(e.optionList,(function(t,i){return a("div",{key:i,staticClass:"option-item",on:{click:function(a){return e.handleSelectItem(t)}}},[a("div",{staticClass:"option-name"},[a("a-tooltip",{attrs:{placement:"topLeft",mouseEnterDelay:.6,title:t.path}},[e._v(" "+e._s(t.name)+" ")])],1)])})),0)],1)},s=[],n=a("1da1"),o=(a("96cf"),a("b0c0"),a("498a"),a("4de4"),a("db6a")),r=a("4fcf"),l=r.debounce,c={name:"SelfOutsInput",props:{filterTypes:{type:Array,default:function(){return[]}},gradeIds:{type:Array,default:function(){return[]}},subjectIds:{type:Array,default:function(){return[]}},defaultDisplayName:{type:String,default:null},defaultSelfOutSubject:{type:String,default:null},disabled:{type:Boolean,default:!1}},watch:{displayValue:function(e){this.$emit("update-value",e)},selfOutSubject:function(e){this.$emit("update-subject",e)}},data:function(){return{displayValue:"",selfOutSubject:null,optionList:[],creating:!1,updateOptionsListFunction:null}},created:function(){this.displayOptionList=[],this.$logger.info("myOptionList ",this.myOptionList),this.defaultDisplayName&&(this.displayValue=this.defaultDisplayName),this.defaultSelfOutSubject&&(this.selfOutSubject=this.defaultSelfOutSubject),this.updateOptionsListFunction=l(this.handleUpdateOptionsList,500)},mounted:function(){this.globalClick(this.handleClick)},methods:{handleSelectItem:function(e){this.displayValue=e.name,this.optionList=[]},handleClick:function(){this.optionList=[]},handleUpdateOptionsList:function(){this.displayValue&&this.displayValue.trim()&&this.SearchKnowledge()},SearchKnowledge:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["SearchKnowledge"])({filterTypes:e.filterTypes,gradeIds:e.gradeIds,subjectIds:e.subjectIds,key:e.displayValue.trim()});case 2:a=t.sent,e.$logger.info("SearchKnowledge res",a),a.success&&(e.optionList=a.result.filter((function(t){return t.name.toLowerCase()!==e.displayValue.trim().toLowerCase()})));case 5:case"end":return t.stop()}}),t)})))()}}},d=c,u=(a("82f8c"),a("0c7c")),h=Object(u["a"])(d,i,s,!1,null,"0a5d70a2",null);t["a"]=h.exports},"3b74":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShow?a("div",{staticClass:"collaborate-tooltip"},[a("div",{staticClass:"ant-tooltip ant-tooltip-placement-top"},[a("div",{staticClass:"ant-tooltip-content"},[a("div",{staticClass:"ant-tooltip-arrow"}),a("div",{staticClass:"ant-tooltip-inner",attrs:{role:"tooltip"}},[e._v(" "+e._s(e.userNames)+" are editing. ")])])])]):e._e()},s=[],n=(a("a15b"),{name:"CollaborateTooltip",components:{},props:{formId:{type:String,default:null},fieldName:{type:String,required:!0}},data:function(){return{isShow:!1,collaborateUserName:[],userNameList:[],durationTime:2e4}},watch:{},mounted:function(){var e=this;this.$nextTick((function(){setInterval(e.setShowFlag,2e3)}))},computed:{userNames:function(){return this.collaborateUserName.join("、")}},methods:{setShowFlag:function(){var e=this.$store.state.websocket.collaborateMsg;e&&e.content.id===this.formId&&e.content.fieldName===this.fieldName?(new Date).getTime()-e.timestamp>this.durationTime?this.isShow=!1:(this.isShow=!0,this.collaborateUserName=[e.from.nickname]):this.isShow=!1}}}),o=n,r=(a("c2b1"),a("0c7c")),l=Object(r["a"])(o,i,s,!1,null,"0cdfe22c",null);t["a"]=l.exports},"3f1f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAfZJREFUSEu1lk2ITmEUx38/ZGGhULOijLKgFBM2Ss2gSMnCwkKysUBKkY2FsUFZsJhJxkKysLKQhRRFaTZiIx+xECUR+YoVHT1v93m787rvfPTeeza37n3O//ec557znCOTWEQMALuADcBaYB7wCXgLPAEeADfV35PppG9WLYiINcAFYONUAgX4DDCi/um2/j9QRBwFzgJzpgEpL3kE7FFfVflNAEXEGLB/hoDy8h/ANnW8U6MNioiTwHAPkOz6BRhQ35W1WqCIWA2k0Gd6XN32dV8drALdA4ZqiKYssUO9lV8YESltUzR12x11axl0HjhSNwX4CyxQf7bqKCJSNCmqJmyLejeDvgPzm6AAh9WRDEohzmoINKyeyqCU9wsbAh1Xz2XQM2BlQ6C96rUMugLsawi0Qn2ZQbuB6w2A3quLy3WUeswboK9m2An1dBtU3HXHgNZPq8m+AcvUr52gucBDYF1NoHYSTAAVUfUDj9O10SMsRbNc/VzW6Wx864HbPdTVU2AVkJ6b1TRftKyqlS8Frk5zXsg6afcHgBvApaJLp/rcpH6sBGXPiNgJHCz61Owux5nmg4vAZfVXyXe08E01NKR+qJyCyqIRsQjYDiwpOnASTNk0rr7o9j8jIl2mh4DXwOCUoF4SIyJyr3veKKjI5jTw9P0D4GWhmJscHysAAAAASUVORK5CYII="},"3f4f":function(e,t){e.exports="data:image/png;base64,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"},"410d":function(e,t,a){"use strict";a("7953")},4133:function(e,t,a){"use strict";a("973f")},4198:function(e,t,a){"use strict";a("49af")},"422a":function(e,t,a){"use strict";a("2609")},4329:function(e,t,a){},"439b":function(e,t,a){},4551:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAnCAYAAAB9qAq4AAAAAXNSR0IArs4c6QAAB9pJREFUWEe9mGlsVNcVx//nvVm8zGbPG+MFAwaSkrCZmr1jggNElcKiNAofmnwoUW0TpFSqUiVqK2LopjRN2g9tSTxuhSpBPiRqKhqSqmwuHgcIgQBhSQgYbON9FmYfz/Lerd6lM7LxeMaUgftpNHPvOb/5n+Wd+wiZVkuLYN1QvUNg8o8ZMItAQsZ99/klA1MI6FZI/IPn8K092L1budskZfIhHXdsJsJ7IBQByLjnPtnGHmdgiEBQtrrs2z+ZGmCn4yAxPJ1HiJymGOFjt71pY27AlhbBtq5qCARbTqv53MDgch3tL787zBPCV9reNl3Ush4wPJC8m/Q/ERQ5QTO9DY19Y/dMALS271kvaDSH8ynOVG0pyeQGT8OOI1kBJWfrKwR6a6pG795nFLUoFDUYiUfv2QQD+4m7vvnt7ICdrW3E6If3al0FW22uwLO2uTBpdPjY041D3l4MxyNTNsWI/cVtb27MCmhzOk4CWDlVqwZRi5WmCjxjm41vG8sQlhOIKEmU64pwPeLDQU83jnh7MZKYkqKnXPVNqyYHbG/RSJoqFwGWXIAGUYPlpgpskWZjqbEMChiOeG/h8O1ehJMJrC2pwtNSDUo0elwJe/GJtwft3ltZQRngcyf7bWjYnUz5H1cklvZ3Zmm1Yle2CtYQwW6uwiapBsuMZSAinPQP8nBeDnvhSkShMIYSrR6PFFqwxlKF9aXVMIk6XA578C9vD/7t6UFQTkzUgKAkEvIcX8NL3RkBpROOjSTjo2zqVeuN2PvYeswqMMGbGMXvb53DicAghmIRxJk87qhIBKu2EAuLrXh5+mIsMdowGAvjV92neegzLSZik3t108GMgNaO1lcFot9mA7Ro9HhtRh3Wl86AWaPjanzo6sLp4BDCcjoy3ISWBCw0SFztzVINV/F0YBi/6/0C50OujG4Uxl7zrGl+M7OCHY59RHg+G6AAQnWBAQuKJay1VGGZaRpGlSROBoZwyNOLC2EXEorCw7uhdAbPxUpdMbqifp6fZwIjuBb1YVQZr3bKJ2PY717T9EJGQJvTcQ5AbTZAHQlYYS7HzWiAK7TYIPE8W2ywISIncCo4hEAyjtWmCv5H+kZDOOa7hdOBEYzEI6gpNHHALH3yvKu+ackEwMqPdhXFLRWDBDJlA6zQFeHPjzagezSA//j68EXQBb0gos5QxsP+aJEFAhHPteO+Ph7SwXgYNYVmrLNU8zzcO3gFB9w3MucgWEDnG6wY2LSLN9B0FVuPtz0mCOxyrvHKotHhR9Nrsdw0jSt4PuRGh68fF0JunpN1xjIYRR3OBIfRFwthZoEJay3T+f5iUYuLITf2DX/N/9gkiykKzfc80fjVeECn4xkB+DBX/1N/V5twrUHCanMl74HqOhdywekb4K1EZgzVBUY8YanCClM5B1d7Yad/gOdgbyyAJGOTulKA73nqm/4xDlDqbNtJjP0iF6CqwndLZ+JK2MOfGAuKrbBbKlFrsEFmCs4ER+BPxrHSXA6rpgDfRHzo9PfjbEBVjGGBQcLnwWH0jgYndcWIXnfbG395l4Kt7wug53IBVukNaJu3Dn2jQa7IZ/4hxJjMiyQFqtq4GfXjU/8ALw4VvNZog91ciXnFJXij5wyO3R43VY1zq4B94Klv3jpeQWfrZQI9ngtQfXRtr1qYDt1XYS+c/wtdkik814oEDQeLsSQWqeDmCl7tamtRc3P/0FV8E/VNriDYFXd98/w0oK39fQM0vmGA30FyLrVZp9pLKvkvhdxw+gdxPqgqdieUKpg6QKjgZ4MjPEdVQHdiNJePCJKWaa6GrSFexZZj7y7WaoXzuU7d/buq5hJjGW/YS01l0AsaXAi6eONWi0MdIM4FXTju6+ftRn1OT3UlEkqt78ntFzig1Nn6fWK0f6qHM4EuNU1Dg2U66kxlKCARl8IeHPb24lP/4D2BpWwzYs+77c3vcUBrZ9uvBcZ+9v8Cps6VavRYbi5HiajnedkfC2HyZpLdm0L0G4+98ed3FOxwHCDC5vsFzOd5xvBP95qmLQTGSOpsu0bAnHw6uF9bDOhy2xsfoZLDb5jFQusIMaa7X6P5PM+I4nLUU0ZS+7tLSSN8nk/j+bLFksoysnY4fiAQ9o41qiamOqEID+ad0QR+hSmIKfKEglIYtpHkbHuLwF5JndKQgJl6I+YWmVEsPpyoh+U4rkf86IkFeVNPtxrQ2yR1Oo4Sw5OpL+cVWZTdNauEBcWl/AL+oFZqmlEvYVE5iUthL16/eVK5GvGlX7kwwjGydThGxr4oeudbDeFnbXOLHxRYyu6XITf/uMggpV393XU9+NLVduMYCV1kczrUuceQ+vLGqm0Bg6jJOlXnA37LxTuXxwMLN6XNhZWkr+bE3rF38hBJTscpAlakdp2oe+7G3ELL7HxAZLPxalcn//nNOfb0tmtRX9d3zn6Q7scM+Eyt4p8KBHU4FNWdL1Y87to5a7lNreIHudSbn7q0wp2UU6t4141T7r8Nf52Kuaww7CTjkT9Z9TrtUSJaoELqSIi/WDlffKpkhqhW9MNYauUeut0r/3XgkpJgTAuoExu7FIsn1vFnccmRPYtEvbiXQAu5kgQUkoYeJmCUJdV31eqSGdhFOSZvu71+x5fpW5106I+VrLjwBWLKRjBmJTa14TVfCjNCBEQeRsJBCkf3uZ96eUC1/V+bw0Kjp/RGAgAAAABJRU5ErkJggg=="},4554:function(e,t,a){"use strict";a("6c7c")},"464d":function(e,t,a){"use strict";var i=function(){var e=this,t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"tag-ui"},[s("div",{staticClass:"objectives-wrapper"},[s("custom-form-item",{attrs:{"label-color":"#FF786D"}},[s("template",{slot:"label"},[t._v(" Achievement objectives ")]),s("template",{slot:"action"},[s("plus-icon",{on:{click:function(e){return t.handleAddNew(t.TagType.skill,t.skillInputList)}}})],1),t.getKnowledgeListType(t.TagType.skill).length>0?t._l(t.getKnowledgeListType(t.TagType.skill),(function(e,a){return s("div",{key:a,staticClass:"objectives-list"},[s("div",{staticClass:"objectives-list-item objectives-list-item-skill objectives-list-item-top-fixed"},[s("div",{directives:[{name:"selectPopover",rawName:"v-selectPopover",value:["modal",t.domFn,e,!0],expression:"['modal', domFn, k, true]"}],staticClass:"skt-description",on:{dblclick:function(a){return t.handleAddTag(e)}}},[s("a-tooltip",{attrs:{placement:"topLeft",title:e.path}},[t._v(" "+t._s(e.name))])],1),s("a-space",{staticClass:"objectives-tag",attrs:{direction:"vertical"}},[e.commandTerms&&e.commandTerms.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Command term:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.commandTerms,(function(a,i){return s("div",{key:"skill_command_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#ec7d31",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"commandTerms",i)}}},[t._v(t._s(a.name))]),s("rate-level",{attrs:{bloom:a.bloomTag,knowledge:a.knowledgeDimension},on:{change:function(e){return t.handleChangeLevel(e,a)}}})],1)})),0)]):t._e(),e.knowledgeTags&&e.knowledgeTags.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Knowledge tag:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.knowledgeTags,(function(a,i){return s("div",{key:"skill_knowledge_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#a5a5a5",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"knowledgeTags",i)}}},[t._v(t._s(a.name))])],1)})),0)]):t._e()],1)],1),t.canEdit?s("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleDeleteKnowledgeItem(e)}}},[s("div",{staticClass:"delete-action"},[s("a-icon",{style:{fontSize:"14px",color:"red"},attrs:{type:"delete"}})],1)]):t._e()],1)})):t._e(),s("div",{staticClass:"customize-objectives-list"},t._l(t.skillInputList,(function(e,a){return s("div",{key:a,staticClass:"objectives-input-item"},[s("self-outs-input",{directives:[{name:"selectPopover",rawName:"v-selectPopover",value:["modal",t.domFn,e,!0],expression:"['modal', domFn, skillInput, true]"}],staticClass:"skill-input",attrs:{"filter-types":[t.TagType.skill,t.TagType.ibSkill,t.TagType.idu],"grade-ids":t.gradeIds,"subject-ids":t.subjectIds,"default-display-name":e.name,"default-self-out-subject":e.subjectId?e.subjectId:null,disabled:!t.canEdit},on:{"update-value":function(t){return e.name=t},"update-subject":function(t){return e.subjectId=t}}}),t.canEdit?s("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleDeleteSkill(e)}}},[s("div",{staticClass:"self-out-delete-icon"},[s("a-icon",{style:{fontSize:"14px",color:"red"},attrs:{type:"delete"}})],1)]):t._e(),s("a-space",{staticClass:"objectives-tag",attrs:{direction:"vertical"}},[e.commandTerms&&e.commandTerms.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Command term:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.commandTerms,(function(a,i){return s("div",{key:"skill_input_command_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#ec7d31",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"commandTerms",i)}}},[t._v(t._s(a.name))]),s("rate-level",{attrs:{bloom:a.bloomTag,knowledge:a.knowledgeDimension},on:{change:function(e){return t.handleChangeLevel(e,a)}}})],1)})),0)]):t._e(),e.knowledgeTags&&e.knowledgeTags.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Knowledge tag:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.knowledgeTags,(function(a,i){return s("div",{key:"skill_input_knowledge_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#a5a5a5",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"knowledgeTags",i)}}},[t._v(t._s(a.name))])],1)})),0)]):t._e()],1)],1)})),0)],2),s("custom-form-item",{attrs:{"label-color":"#47A3E4"}},[s("template",{slot:"label"},[t._v(" Learning outcomes ")]),s("template",{slot:"action"},[s("plus-icon",{on:{click:function(e){return t.handleAddNew(t.TagType.knowledge,t.knowledgeInputList)}}})],1),t.getKnowledgeListType(t.TagType.knowledge).length>0?t._l(t.getKnowledgeListType(t.TagType.knowledge),(function(e,a){return s("div",{key:a,staticClass:"objectives-list"},[s("div",{staticClass:"objectives-list-item objectives-list-item-learn objectives-list-item-top-fixed"},[s("div",{directives:[{name:"selectPopover",rawName:"v-selectPopover",value:["modal",t.domFn,e,!0],expression:"['modal', domFn, k, true]"}],staticClass:"skt-description",on:{dblclick:function(a){return t.handleAddTag(e)}}},[s("a-tooltip",{attrs:{placement:"topLeft",title:e.path}},[t._v(" "+t._s(e.name))])],1),s("a-space",{staticClass:"objectives-tag",attrs:{direction:"vertical"}},[e.commandTerms&&e.commandTerms.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Command term:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.commandTerms,(function(a,i){return s("div",{key:"knowledge_command_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#ec7d31",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"commandTerms",i)}}},[t._v(t._s(a.name))]),s("rate-level",{attrs:{bloom:a.bloomTag,knowledge:a.knowledgeDimension},on:{change:function(e){return t.handleChangeLevel(e,a)}}})],1)})),0)]):t._e(),e.knowledgeTags&&e.knowledgeTags.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Knowledge tag:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.knowledgeTags,(function(a,i){return s("div",{key:"knowledge_knowledge_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#a5a5a5",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"knowledgeTags",i)}}},[t._v(t._s(a.name))])],1)})),0)]):t._e()],1)],1),t.canEdit?s("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleDeleteKnowledgeItem(e)}}},[s("div",{staticClass:"delete-action"},[s("a-icon",{style:{fontSize:"14px",color:"red"},attrs:{type:"delete"}})],1)]):t._e()],1)})):t._e(),s("div",{staticClass:"customize-objectives-list"},t._l(t.knowledgeInputList,(function(e,a){return s("div",{key:a,staticClass:"objectives-input-item"},[s("self-outs-input",{directives:[{name:"selectPopover",rawName:"v-selectPopover",value:["modal",t.domFn,e,!0],expression:"['modal', domFn, knowledgeInput, true]"}],staticClass:"knowledge-input",attrs:{"filter-types":[t.TagType.knowledge],"grade-ids":t.gradeIds,"subject-ids":t.subjectIds,"default-display-name":e.name,"default-self-out-subject":e.subjectId?e.subjectId:null,disabled:!t.canEdit},on:{"update-value":function(t){return e.name=t},"update-subject":function(t){return e.subjectId=t}}}),t.canEdit?s("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleDeleteKnowledge(e)}}},[s("div",{staticClass:"self-out-delete-icon"},[s("a-icon",{style:{fontSize:"14px",color:"red"},attrs:{type:"delete"}})],1)]):t._e(),s("a-space",{staticClass:"objectives-tag",attrs:{direction:"vertical"}},[e.commandTerms&&e.commandTerms.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Command term:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.commandTerms,(function(a,i){return s("div",{key:"knowledgeInput_command_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#ec7d31",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"commandTerms",i)}}},[t._v(t._s(a.name))]),s("rate-level",{attrs:{bloom:a.bloomTag,knowledge:a.knowledgeDimension},on:{change:function(e){return t.handleChangeLevel(e,a)}}})],1)})),0)]):t._e(),e.knowledgeTags&&e.knowledgeTags.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Knowledge tag:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.knowledgeTags,(function(a,i){return s("div",{key:"knowledgeInput_knowledge_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#a5a5a5",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"knowledgeTags",i)}}},[t._v(t._s(a.name))])],1)})),0)]):t._e()],1)],1)})),0)],2),s("custom-form-item",{attrs:{"label-color":"#FF933C"}},[s("template",{slot:"label"},[t._v(" "+t._s(t.$classcipe.get21stCenturyDisplayNameByCurriculum(t.$store.getters.bindCurriculum))+" ")]),s("template",{slot:"action"},[s("plus-icon",{on:{click:function(e){return t.handleAddNew(t.TagType.century,t.centuryInputList)}}})],1),t.getKnowledgeListType(t.TagType.century).length>0?t._l(t.getCenturyCategoryList(t.TagType.century),(function(e){return s("div",{key:e.categoryName,staticClass:"category-item"},[s("div",{staticClass:"category-name"},[s("a-icon",{attrs:{type:"tag"}}),t._v(" "+t._s(e.categoryName))],1),t._l(e.list,(function(e,i){return s("div",{key:i,staticClass:"objectives-list"},[s("div",{staticClass:"objectives-list-item objectives-list-item-21 objectives-list-item-top-fixed",on:{click:function(a){return t.handleActiveDescription(t.TagType.century,e)}}},[s("div",{directives:[{name:"selectPopover",rawName:"v-selectPopover",value:["modal",t.domFn,e,!0],expression:"['modal', domFn, k, true]"}],staticClass:"skt-description skt-description-21",on:{dblclick:function(a){return t.handleAddTag(e)}}},[s("a-tooltip",{attrs:{placement:"topLeft",title:e.path}},[t._v(" "+t._s(e.name))])],1),s("a-space",{staticClass:"objectives-tag",attrs:{direction:"vertical"}},[e.commandTerms&&e.commandTerms.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Command term:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.commandTerms,(function(a,i){return s("div",{key:"century_command_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#ec7d31",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"commandTerms",i)}}},[t._v(t._s(a.name))]),s("rate-level",{attrs:{bloom:a.bloomTag,knowledge:a.knowledgeDimension},on:{change:function(e){return t.handleChangeLevel(e,a)}}})],1)})),0)]):t._e(),e.knowledgeTags&&e.knowledgeTags.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Knowledge tag:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.knowledgeTags,(function(a,i){return s("a-tag",{key:"century_knowledge_"+i,staticClass:"objectives-tag-item",attrs:{color:"#a5a5a5",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"knowledgeTags",i)}}},[t._v(t._s(a.name))])})),1)]):t._e()],1),e.tagType===t.TagType.century?s("div",{staticClass:"actions"},[s("span",{staticClass:"add-action",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.handleAddTag(e)}}},[s("img",{attrs:{src:a("d314")}})]),s("span",{staticClass:"up-down"},[e.tagListVisible?s("a-icon",{attrs:{type:"up"}}):s("a-icon",{attrs:{type:"down"}})],1)]):t._e(),e.tagListVisible?s("a-divider",{staticStyle:{margin:"10px 0px"}}):t._e(),e.tagListVisible?s("div",{staticClass:"skt-description-tag-list"},t._l(e.tags,(function(a){return s("div",{key:a,class:{"tag-list-item":!0,"skill-mode":!0}},[s("a-tag",{staticClass:"tag-item",attrs:{closable:!0},on:{close:function(i){return t.handleDeleteTag(e,a)}}},[t._v(t._s(a))])],1)})),0):t._e()],1),t.canEdit?s("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleDeleteKnowledgeItem(e)}}},[s("div",{staticClass:"delete-action"},[s("a-icon",{style:{fontSize:"14px",color:"red"},attrs:{type:"delete"}})],1)]):t._e()],1)}))],2)})):t._e(),s("div",{staticClass:"customize-objectives-list"},t._l(t.centuryInputList,(function(e,a){return s("div",{key:a,staticClass:"objectives-input-item"},[s("self-outs-input",{directives:[{name:"selectPopover",rawName:"v-selectPopover",value:["modal",t.domFn,e,!0],expression:"['modal', domFn, centuryInput, true]"}],staticClass:"century-input",attrs:{"filter-types":[t.TagType.century,t.TagType.common],"grade-ids":t.gradeIds,"subject-ids":t.subjectIds,"default-display-name":e.name,"default-self-out-subject":e.subjectId?e.subjectId:null,disabled:!t.canEdit},on:{"update-value":function(t){return e.name=t},"update-subject":function(t){return e.subjectId=t}}}),t.canEdit?s("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleDeleteCentury(e)}}},[s("div",{staticClass:"self-out-delete-icon"},[s("a-icon",{style:{fontSize:"14px",color:"red"},attrs:{type:"delete"}})],1)]):t._e(),s("a-space",{staticClass:"objectives-tag",attrs:{direction:"vertical"}},[e.commandTerms&&e.commandTerms.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Command term:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.commandTerms,(function(a,i){return s("div",{key:"century_input_command_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#ec7d31",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"commandTerms",i)}}},[t._v(t._s(a.name))]),s("rate-level",{attrs:{bloom:a.bloomTag,knowledge:a.knowledgeDimension},on:{change:function(e){return t.handleChangeLevel(e,a)}}})],1)})),0)]):t._e(),e.knowledgeTags&&e.knowledgeTags.length>0?s("a-space",{staticClass:"objectives-tag-type"},[s("div",{staticClass:"objectives-tag-title"},[t._v("Knowledge tag:")]),s("div",{staticClass:"objectives-tag-content"},t._l(e.knowledgeTags,(function(a,i){return s("div",{key:"century_input_knowledge_"+i,staticClass:"objectives-tag-item"},[s("a-tag",{attrs:{color:"#a5a5a5",closable:!0},on:{close:function(a){return t.handleCloseObjectiveTag(e,"knowledgeTags",i)}}},[t._v(t._s(a.name))])],1)})),0)]):t._e()],1)],1)})),0)],2)],1),s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px"},model:{value:t.addTagVisible,callback:function(e){t.addTagVisible=e},expression:"addTagVisible"}},[s("div",{staticClass:"my-modal-title",attrs:{slot:"title"},slot:"title"},[t._v(" Add tag ")]),s("learn-out-add-tag",{attrs:{knowledge:t.knowledge},on:{"handle-select-tags":t.handleEnsureTags}})],1),s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"1000px",title:"Add tag"},model:{value:t.centuryTagVisible,callback:function(e){t.centuryTagVisible=e},expression:"centuryTagVisible"}},[s("div",{staticClass:"ensure-setting-modal"},[s("div",{staticClass:"tips"},[s("p",[t._v(" "+t._s(t.knowledge.name)+" ")])]),s("div",[t._l(t.centuryTagList,(function(e,a){return s("div",{key:a,staticClass:"row-cascader"},[s("a-cascader",{staticStyle:{width:"900px"},attrs:{fieldNames:{label:"name",value:"name",children:"children"},options:t.centuryList,"change-on-select":""},model:{value:t.centuryTagList[a],callback:function(e){t.$set(t.centuryTagList,a,e)},expression:"centuryTagList[index]"}}),t.centuryTagList.length>1?s("a-button",{attrs:{type:"link",icon:"minus",size:"large"},on:{click:function(e){return t.handleRemoveCenturyTag(a)}}}):t._e()],1)})),s("a-button",{attrs:{type:"link",icon:"plus-circle",size:"large"},on:{click:function(e){return t.handleAddCenturyTag()}}})],2),s("div",{staticClass:"modal-ensure-action-line-center"},[s("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:function(e){t.centuryTagVisible=!1}}},[t._v("Cancel")]),s("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:t.handleEnsureCenturyTags}},[t._v("Confirm")])],1)])]),s("div",{directives:[{name:"clickOutside",rawName:"v-clickOutside"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"quickModal",attrs:{id:"modal"}},[s("a-space",{staticClass:"quick-keyword-con"},[s("label",[t._v("Set ")]),s("quick-word-button",{attrs:{type:"black",text:"Command term",quickWord:t.quickWord,dataCondition:{type:1},loadApi:t.KnowledgeTermTagQueryByKeywords},on:{sub:function(e){return t.handleQuickWordSet(e,"commandTerms")},getResult:t.getCurrentQuickWords,changeWord:function(t){return e.commandTermForm.name=t}},scopedSlots:t._u([{key:"create",fn:function(){return[s("div",{staticClass:"quick-word-sub"},[s("a-divider",{staticStyle:{margin:"10px 0"}}),s("a-space",{directives:[{name:"show",rawName:"v-show",value:t.showQuickWordCreate,expression:"showQuickWordCreate"}]},[s("label",[t._v("Create:")]),s("a-button",{directives:[{name:"show",rawName:"v-show",value:t.showQuickWordCreate,expression:"showQuickWordCreate"}],attrs:{size:"small",type:"primary"},on:{click:function(e){t.showQuickWordCreate=!0}}},[t._v(" "+t._s(t.commandTermForm.name||"Command term")+" ")])],1),s("command-term-add",{directives:[{name:"show",rawName:"v-show",value:t.showQuickWordCreate,expression:"showQuickWordCreate"}],attrs:{customTags:t.customTags,initName:t.commandTermForm.name},on:{cancel:function(e){t.showQuickWordCreate=!1},save:t.handleSaveCommanTerm}})],1)]},proxy:!0}])}),s("label",[t._v(" or ")]),s("quick-word-button",{attrs:{type:"black",text:"Knowledge tag",quickWord:t.quickWord,dataCondition:{type:2},loadApi:t.KnowledgeTermTagQueryByKeywords},on:{sub:function(e){return t.handleQuickWordSet(e,"knowledgeTags")}},scopedSlots:t._u([{key:"create",fn:function(){return[s("div")]},proxy:!0}])})],1)],1)],1)},s=[],n=a("3835"),o=a("b85c"),r=a("5530"),l=(a("ac1f"),a("1276"),a("159b"),a("7db0"),a("b0c0"),a("4de4"),a("c740"),a("a434"),a("d3b7"),a("4ec9"),a("3ca3"),a("ddb0"),a("498a"),a("d81d"),a("823b")),c=a("69b3"),d=a("214d"),u=a("2e09"),h=a("f93e"),p=a("db6a"),m=a("d6ea"),g=a.n(m),f=a("018d"),v=a("3a09"),y=a("bf37"),b=a("df5e"),C=a("2943"),w=a("b5ba"),k=a("bf99"),T=a("2f62"),L={name:"UiLearnOut",components:{DeleteIcon:w["a"],PlusIcon:C["a"],CustomFormItem:b["a"],SelfOutsInput:v["a"],LearnOutAddTag:d["a"],NoMoreResources:c["a"],AddGreenIcon:g.a,QuickWordButton:f["a"],RateLevel:u["a"],CommandTermAdd:k["a"]},props:{learnOuts:{type:Array,default:function(){return[]}},selfOuts:{type:Array,default:function(){return[]}},canEdit:{type:Boolean,default:!0},customTags:{type:Object,default:function(){}}},computed:Object(r["a"])(Object(r["a"])({},Object(T["e"])({info:function(e){return e.user.info},gradeIds:function(e){return e.user.info.preference?e.user.info.preference.gradeIds:[]},subjectIds:function(e){return e.user.info.preference?e.user.info.preference.subjectIds:[]}})),{},{dealPath:function(){return function(e){return e?e.split(">"):e}}}),data:function(){return{knowledgeList:[],addTagVisible:!1,centuryTagVisible:!1,centuryTagList:[],knowledge:{},tags:[],TagType:h["T"],centuryList:[],skillInputList:[],knowledgeInputList:[],centuryInputList:[],AllCurriculums:h["b"],quickWord:"",commandTerms:[],knowledgeTags:[],showQuickWordCreate:!1,currentObjective:null,bloomParentId:"",bloomOptions:[],knowLedgeParentId:"",knowLedgeOptions:[],KnowledgeTermTagQueryByKeywords:y["a"],commandTermForm:{name:""}}},created:function(){this.knowledgeList=this.learnOuts,l["info"]("knowledgeList ",this.knowledgeList),this.initBloomOptions(),this.get21century(),this.initSelfOuts()},watch:{learnOuts:function(e){this.$logger.info("learnOuts change!",e),this.knowledgeList=e},selfOuts:function(e){this.$logger.info("selfOuts change!",e),this.initSelfOuts()},centuryTagList:function(e){var t=this;this.$logger.info("centuryTagList change!",e,this.centuryList),this.centuryList.forEach((function(e){return t.removeDisabled(e)})),this.centuryTagList.forEach((function(e){for(var a=t.centuryList,i=function(t){var i=e[t],s=a.find((function(e){return e.name===i}));if(!s)return"break";t===e.length-1&&(s.disabled=!0),a=s.children},s=0;s<e.length;s++){var n=i(s);if("break"===n)break}}))}},methods:{initBloomOptions:function(){if(this.customTags&&this.customTags.recommends){var e=this.customTags.recommends.find((function(e){return"Bloom's Taxonomy"===e.name}));e?(this.bloomOptions=e.keywords,this.bloomParentId=e.id):(this.bloomOptions=[],this.bloomParentId="");var t=this.customTags.recommends.find((function(e){return"Knowledge Dimensions"===e.name}));t?(this.knowLedgeOptions=t.keywords,this.knowLedgeParentId=t.id):(this.knowLedgeOptions=[],this.knowLedgeParentId="")}},initSelfOuts:function(){this.$logger.info("initSelfOuts",this.selfOuts);var e=this.selfOuts.filter((function(e){return e.tagType===h["T"].skill})),t=this.selfOuts.filter((function(e){return e.tagType===h["T"].knowledge})),a=this.selfOuts.filter((function(e){return e.tagType===h["T"].century}));e.length?this.skillInputList=e:this.skillInputList=[],this.$logger.info("skillInputList",this.skillInputList),t.length?this.knowledgeInputList=t:this.knowledgeInputList=[],this.$logger.info("knowledgeInputList",this.skillInputList),a.length?this.centuryInputList=a:this.centuryInputList=[],this.$logger.info("centuryInputList",this.skillInputList)},handleActiveDescription:function(e,t){var a=this.knowledgeList.findIndex((function(e){return e.knowledgeId===t.knowledgeId}));this.knowledgeList[a].tagType!==h["T"].knowledge&&this.knowledgeList[a].tagType!==h["T"].century||(this.knowledgeList[a].tagListVisible?this.knowledgeList[a].tagListVisible=!1:this.knowledgeList[a].tagListVisible=!0,this.$set(this.knowledgeList,a,this.knowledgeList[a]),l["info"]("tagListVisible ",this.knowledgeList[a].tagListVisible))},handleDeleteTag:function(e,t){var a=this.knowledgeList.findIndex((function(t){return t.knowledgeId===e.knowledgeId}));this.knowledgeList[a].tags.splice(this.knowledgeList[a].tags.indexOf(t),1)},handleDeleteKnowledgeItem:function(e){var t=this.knowledgeList.findIndex((function(t){return t.knowledgeId===e.knowledgeId})),a=this.knowledgeList[t];this.knowledgeList.splice(t,1),this.$emit("remove-learn-outs",a)},handleAddTag:function(e){l["info"]("handleAddTag ",e),e.tagType===h["T"].knowledge?(this.knowledge=e,this.addTagVisible=!0):e.tagType===h["T"].century&&(this.knowledge=e,this.centuryTagList=[],this.centuryTagList.push([]),this.centuryTagVisible=!0)},handleEnsureSelectData:function(){this.addTagVisible=!1},handleEnsureTags:function(e){var t=this;this.knowledge.tags=e;var a=this.knowledgeList.findIndex((function(e){return e.knowledgeId===t.knowledge.knowledgeId}));this.knowledgeList[a].tagListVisible=!0},handleEnsureCenturyTags:function(){var e=this;l["info"]("handleEnsureCenturyTags ",this.centuryTagList),0!==this.centuryTagList[0].length?(this.centuryTagList.forEach((function(t){e.knowledge.tags||(e.knowledge.tags=[]),-1===e.knowledge.tags.indexOf(t[t.length-1])&&e.knowledge.tags.push(t[t.length-1]),l["info"]("this.knowledge.tags ",e.knowledge.tags)})),this.centuryTagVisible=!1,this.knowledge.tagListVisible=!0):this.$message.error("Please select tags")},handleRemoveCenturyTag:function(e){l["info"]("handleRemoveCenturyTag ",e),this.centuryTagList.splice(e,1),this.handleUpdateCenturyTag()},handleAddCenturyTag:function(){this.$logger.info("handleAddCenturyTag ",this.centuryTagList),this.centuryTagList.push([])},handleUpdateCenturyTag:function(){this.$logger.info("handleUpdateCenturyTag ","selected",this.centuryTagList,"option",this.centuryList)},treeForeach:function(e,t){var a=this;e.forEach((function(e){e.children&&a.treeForeach(e.children,t),t(e)}))},get21century:function(){var e=this;Object(p["getAll21Century"])({}).then((function(t){e.$logger.info("getAll21Century response",t),t.success&&(e.centuryList=t.result,e.treeForeach(e.centuryList,(function(t){t.disabled=!1,0===t.children.length&&(t.title=e.$options.filters["gradeFormat"](t.gradeNames))})))})).finally((function(){e.subTreeLoading=!1}))},getKnowledgeListType:function(e){return e===h["T"].skill?this.knowledgeList.filter((function(e){return e.tagType===h["T"].skill||e.tagType===h["T"].ibSkill||e.tagType===h["T"].idu})):e===h["T"].century?this.knowledgeList.filter((function(e){return e.tagType===h["T"].century||e.tagType===h["T"].common})):this.knowledgeList.filter((function(t){return t.tagType===e}))},getCenturyCategoryList:function(e){var t=this.getKnowledgeListType(e);this.$logger.info("getCenturyCategoryList list ",t);var a=new Map;a.set("Others",[]),t.forEach((function(e){if(e.path)if(-1!==e.path.indexOf(">")){var t=e.path.split(">"),i=t[1];a.has(i)?a.get(i).push(e):a.set(i,[e])}else{var s=e.path;a.has(s)?a.get(s).push(e):a.set(s,[e])}else a.get("Others").push(e)}));var i,s=[],r=Object(o["a"])(a);try{for(r.s();!(i=r.n()).done;){var l=Object(n["a"])(i.value,2),c=l[0],d=l[1];d&&d.length>0&&"Others"!==c&&s.push({categoryName:c,list:d})}}catch(u){r.e(u)}finally{r.f()}return a.get("Others").length>0&&s.push({categoryName:"Others",list:a.get("Others")}),this.$logger.info("getCenturyCategoryList ",s),s},removeDisabled:function(e){var t=this;e.disabled&&(e.disabled=!1),e.children&&e.children.forEach((function(e){t.removeDisabled(e)}))},handleDeleteSkill:function(e){this.$logger.info("handleDelete ",e),this.skillInputList=this.skillInputList.filter((function(t){return t.key!==e.key}))},handleDeleteKnowledge:function(e){this.$logger.info("handleDelete ",e),this.knowledgeInputList=this.knowledgeInputList.filter((function(t){return t.key!==e.key}))},handleDeleteCentury:function(e){this.$logger.info("handleDelete ",e),this.centuryInputList=this.centuryInputList.filter((function(t){return t.key!==e.key}))},handleAddNew:function(e,t){this.$logger.info("handleAddNew ",t),t.push({name:"",subjectId:null,key:Math.random()+"",tagType:e,commandTerms:[],knowledgeTags:[]})},getSelfOuts:function(){var e=[];return this.skillInputList.length&&this.skillInputList.forEach((function(t){t.name&&t.name.trim()&&e.push(t)})),this.knowledgeInputList.length&&this.knowledgeInputList.forEach((function(t){t.name&&t.name.trim()&&e.push(t)})),this.centuryInputList.length&&this.centuryInputList.forEach((function(t){t.name&&t.name.trim()&&e.push(t)})),this.$logger.info("getSelfOuts ",e),e},domFn:function(e,t){this.currentObjective=Object(r["a"])({},t),this.quickWord=e.split(" ")[0],this.commandTermForm.name=this.quickWord,this.showQuickWordCreate=!1},getCurrentQuickWords:function(e){var t=this;if(e.length>0&&this.commandTermForm.name){var a=e.map((function(e){return e.toLowerCase()})).find((function(e){return e===t.commandTermForm.name.toLowerCase()}));this.showQuickWordCreate=!a}else this.showQuickWordCreate=!0},handleCloseObjectiveTag:function(e,t,a){e[t].splice(a,1),this.$forceUpdate()},handleQuickWordSet:function(e,t){var a=this;setTimeout((function(){a.$refs.quickModal.style.display="none"}),200),this.$emit("addCustomTag",e);var i=this.knowledgeList.find((function(e){return e.knowledgeId===a.currentObjective.knowledgeId}));if(i)i[t]?i[t].find((function(t){return t.id===e.id}))||i[t].push({id:e.id,name:e.word,bloomTag:e.bloomTag,knowledgeDimension:e.knowledgeDimension}):this.$set(i,t,[{id:e.id,name:e.word,bloomTag:e.bloomTag,knowledgeDimension:e.knowledgeDimension}]);else{var s=this.skillInputList.find((function(e){return e.key===a.currentObjective.key}));s||(s=this.knowledgeInputList.find((function(e){return e.key===a.currentObjective.key})),s||(s=this.centuryInputList.find((function(e){return e.key===a.currentObjective.key})))),s&&s[t]?s[t].find((function(t){return t.id===e.id}))||s[t].push({id:e.id,name:e.word,bloomTag:e.bloomTag,knowledgeDimension:e.knowledgeDimension}):this.$set(s,t,[{id:e.id,name:e.word,bloomTag:e.bloomTag,knowledgeDimension:e.knowledgeDimension}])}},handleSaveCommanTerm:function(e){this.handleQuickWordSet(e,"commandTerms"),this.showQuickWordCreate=!1},handleChangeLevel:function(e,t){e&&(t[e.type]=e.title)}}},I=L,S=(a("e2cf"),a("0c7c")),A=Object(S["a"])(I,i,s,!1,null,"1b470103",null);t["a"]=A.exports},4768:function(e,t,a){},4803:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"status-icon-item"},[0===e.status?[a("a-icon",{attrs:{type:"cloud-upload"}})]:e._e()],2)},s=[],n=(a("a9e3"),{name:"ContentStatusIcon",props:{status:{type:Number,default:-1}}}),o=n,r=(a("0f1d"),a("0c7c")),l=Object(r["a"])(o,i,s,!1,null,"7b28124c",null);t["a"]=l.exports},4830:function(e,t,a){},4992:function(e,t,a){e.exports=a.p+"img/default-avatar.db1c5445.png"},"49af":function(e,t,a){},"49cf":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#808191;",d:"M147.606,67.158q-.2.222-.369.394l-.3.3a3.363,3.363,0,0,1-.271.246l-3.325-3.35q.2-.2.493-.468t.493-.419a1.45,1.45,0,0,1,1.059-.345,2.553,2.553,0,0,1,.911.222,3.346,3.346,0,0,1,.825.69,3.912,3.912,0,0,1,.7,1.034,3.168,3.168,0,0,1,.16.813A1.114,1.114,0,0,1,147.606,67.158ZM138.2,69.892l3.818-3.818L145.34,69.4q-2.094,2.094-3.818,3.793-.739.714-1.441,1.416T138.8,75.865q-.579.554-.948.924l-.443.443a4.227,4.227,0,0,1-.394.345,2.45,2.45,0,0,1-.493.3q-.271.123-.751.3t-1,.333q-.517.16-.985.3a4.376,4.376,0,0,1-.714.16q-.468.049-.5-.086a1.879,1.879,0,0,1,.037-.6q.025-.246.123-.727t.2-.973q.1-.493.209-.924a4.73,4.73,0,0,1,.185-.6,3.071,3.071,0,0,1,.259-.468,3.28,3.28,0,0,1,.382-.443Zm8.35,3.571a2.087,2.087,0,0,1,.985.246A1.033,1.033,0,0,1,148,74.72v5.591a3.074,3.074,0,0,1-.259,1.268,3.234,3.234,0,0,1-.7,1.01,3.176,3.176,0,0,1-1.01.665,3.007,3.007,0,0,1-1.158.234H131.128a2.761,2.761,0,0,1-1.158-.259,3.276,3.276,0,0,1-1-.7,3.6,3.6,0,0,1-.7-1.047A3.121,3.121,0,0,1,128,80.188V66.468a2.241,2.241,0,0,1,.271-1.022,3.8,3.8,0,0,1,.7-.961,3.966,3.966,0,0,1,.973-.714,2.321,2.321,0,0,1,1.084-.283h5.739a1.022,1.022,0,0,1,.973.5,2.069,2.069,0,0,1,.283,1.022,1.937,1.937,0,0,1-.283,1,1.036,1.036,0,0,1-.973.48h-4.507a1.071,1.071,0,0,0-.837.357,1.263,1.263,0,0,0-.32.874V79.3a1.143,1.143,0,0,0,.32.825,1.11,1.11,0,0,0,.837.333h11.4a1.28,1.28,0,0,0,.887-.333,1.065,1.065,0,0,0,.369-.825V74.72a1.061,1.061,0,0,1,.16-.591,1.289,1.289,0,0,1,.394-.394,1.594,1.594,0,0,1,.517-.209A2.6,2.6,0,0,1,146.547,73.463Z",transform:"translate(-128 -63.488)"}}]})}},"49e6":function(e,t,a){"use strict";a("a1e2")},"4b0e":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"20.499",height:"13.666",viewBox:"0 0 20.499 13.666"},children:[{tag:"path",attrsMap:{d:"M11.958,182.625l8.541-6.054-8.541-5.9v2.6S2.035,175.471,0,184.333c4.332-4.639,11.958-4.457,11.958-4.457Z",transform:"translate(0 -170.667)"}}]})}},"4fb2":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return n}));var i=a("2b0e"),s=new i["a"],n={LinkToMyContentItem:"LinkToMyContentItem",ToggleSelectContentItem:"ToggleSelectContentItem",ReferContentItem:"ReferContentItem",ReloadMyContent:"ReloadMyContent"}},5034:function(e,t,a){"use strict";a("2a7e")},"519d":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"31.442",height:"40",viewBox:"0 0 31.442 40"},children:[{tag:"g",attrsMap:{transform:"translate(-179.2 -99.38)"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#ffd629;",d:"M311.741,121.054h-8.855a3.363,3.363,0,0,1-3.334-3.372l-2.351-14.93a3.363,3.363,0,0,1,3.334-3.372h13.558a3.363,3.363,0,0,1,3.334,3.372l-2.351,14.93A3.363,3.363,0,0,1,311.741,121.054Z",transform:"translate(-112.388)"}},{tag:"path",attrsMap:{class:"b",style:"fill:#ffca29;",d:"M309.8,99.48h-9.432A3.382,3.382,0,0,0,297,102.852l2.378,14.93a3.382,3.382,0,0,0,3.372,3.372S320.211,104.4,309.8,99.48Z",transform:"translate(-112.28 -0.095)"}},{tag:"path",attrsMap:{class:"c",style:"fill:#fff;",d:"M305.523,99.48h-5.151A3.382,3.382,0,0,0,297,102.852l1.493,9.318S310.432,104.916,305.523,99.48Z",transform:"translate(-112.256 -0.095)"}},{tag:"path",attrsMap:{class:"d",style:"fill:#15c39a;",d:"M193.655,253.831l-12.8-7.107A2.924,2.924,0,0,1,179.4,244.2V229.982a2.924,2.924,0,0,1,1.459-2.528l12.8-7.107a2.916,2.916,0,0,1,2.923,0l12.8,7.107a2.924,2.924,0,0,1,1.459,2.528V244.2a2.924,2.924,0,0,1-1.459,2.528l-12.8,7.107A2.939,2.939,0,0,1,193.655,253.831Z",transform:"translate(-0.19 -114.84)"}},{tag:"path",attrsMap:{class:"e",style:"fill:#007b5e;",d:"M210.637,639.48v4.461a2.948,2.948,0,0,1-1.464,2.549l-12.8,7.168a2.9,2.9,0,0,1-2.923,0l-12.8-7.168a2.944,2.944,0,0,1-1.459-2.549v-4.257s1.01-.452,2.493,2.421c1.147,2.226,7.134,4.685,9.632,6.5a5.258,5.258,0,0,0,3.6,1.389,12.643,12.643,0,0,0,2.484-.576c2.233-.79,9.066-5.222,10.1-6.7C208.715,641,209.258,639.48,210.637,639.48Z",transform:"translate(0 -514.704)"}},{tag:"path",attrsMap:{class:"f",style:"opacity:0.2;fill:#f9f2d7;",d:"M234.729,224.149l-9.738-5.4a2.886,2.886,0,0,0-2.918,0L209.3,225.919s-.113,4.2,10.422,5.712,2.72.395,2.72.395S232.806,231.365,234.729,224.149Z",transform:"translate(-28.667 -113.316)"}},{tag:"path",attrsMap:{class:"g",style:"fill:#11b48e",d:"M375.76,446.593l.9,1.817a1.593,1.593,0,0,0,1.2.87l2.007.29a1.592,1.592,0,0,1,.88,2.716l-1.451,1.417a1.585,1.585,0,0,0-.457,1.408l.342,2a1.594,1.594,0,0,1-2.312,1.679l-1.793-.942a1.594,1.594,0,0,0-1.479,0l-1.793.942a1.593,1.593,0,0,1-2.312-1.679l.342-2a1.581,1.581,0,0,0-.457-1.408l-1.451-1.417a1.592,1.592,0,0,1,.885-2.716l2.007-.29a1.593,1.593,0,0,0,1.2-.87l.9-1.817a1.583,1.583,0,0,1,2.844,0Z",transform:"translate(-179.405 -330.031)"}},{tag:"path",attrsMap:{class:"h",style:"fill:#fff;",d:"M389.277,459.237l1.17,2.369a.953.953,0,0,0,.723.523l2.611.38a.955.955,0,0,1,.528,1.631l-1.893,1.845a.965.965,0,0,0-.276.847l.447,2.6a.957.957,0,0,1-1.389,1.008l-2.34-1.227a.95.95,0,0,0-.889,0l-2.335,1.227a.957.957,0,0,1-1.389-1.008l.447-2.6a.952.952,0,0,0-.276-.847l-1.893-1.845a.958.958,0,0,1,.533-1.631l2.611-.38a.972.972,0,0,0,.723-.523l1.17-2.369A.959.959,0,0,1,389.277,459.237Z",transform:"translate(-193.493 -342.41)"}}]}]})}},"523d":function(e,t,a){"use strict";a.d(t,"n",(function(){return n})),a.d(t,"m",(function(){return o})),a.d(t,"t",(function(){return r})),a.d(t,"p",(function(){return l})),a.d(t,"o",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"q",(function(){return u})),a.d(t,"s",(function(){return h})),a.d(t,"i",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return g})),a.d(t,"k",(function(){return f})),a.d(t,"l",(function(){return v})),a.d(t,"f",(function(){return y})),a.d(t,"g",(function(){return b})),a.d(t,"e",(function(){return C})),a.d(t,"c",(function(){return w})),a.d(t,"r",(function(){return k})),a.d(t,"j",(function(){return T})),a.d(t,"h",(function(){return L}));var i=a("b775"),s={InviteCollaborate:"/classcipe/api/collaborate/invite",GetCollaborateUsers:"/classcipe/api/collaborate/getCollaborateUsers",GetShared:"/classcipe/api/collaborate/getShared",GetSharedNotReceived:"/classcipe/api/collaborate/getSharedNotReceived",GetFindSharedNotReceived:"/classcipe/api/collaborate/getFindSharedNotReceived",DeleteCollaborate:"/classcipe/api/collaborate/delete",DeleteByMeCollaborate:"/classcipe/api/collaborate/deleteByMe",ReceiveCollaborate:"/classcipe/api/collaborate/receive",GetCollaborateComment:"/classcipe/api/editMessage/queryNewMessage",DeleteCollaborateCommentById:"/classcipe/api/editMessage/delete",MarkedCollaborateComment:"/classcipe/api/editMessage/marked",AddCollaborateComment:"/classcipe/api/editMessage/addMessage",GetCollaborateModifiedHistory:"/classcipe/api/editMessage/queryHistory",QueryContentCollaborates:"/classcipe/api/collaborate/v2/queryContentCollaborates",CollaboratesSearchUser:"/classcipe/api/collaborate/v2/searchUser",CollaboratesInvite:"/classcipe/api/collaborate/v2/invite",CollaboratesAgree:"/classcipe/api/collaborate/v2/agree",CollaboratesUpdate:"/classcipe/api/collaborate/v2/updateCollaborate",CollaboratesRemove:"/classcipe/api/collaborate/v2/remove",CollaboratesUpdateLink:"/classcipe/api/collaborate/v2/updateLink",CollaboratesQueryShared:"/classcipe/api/collaborate/v2/queryShared",CollaboratesQuerySharedOwner:"/classcipe/api/collaborate/v2/querySharedOwner",QueryByLinkCode:"/classcipe/api/collaborate/v2/queryByLinkCode",CollaboratesApply:"/classcipe/api/collaborate/v2/apply",CollaboratesSendInviteEmail:"/classcipe/api/collaborate/v2/sendInviteEmail"};function n(e){return Object(i["d"])({url:s.DeleteCollaborate,method:"post",data:e})}function o(e){return Object(i["d"])({url:s.DeleteByMeCollaborate,method:"post",data:e})}function r(e){return Object(i["d"])({url:s.ReceiveCollaborate,method:"post",data:e})}function l(e){return Object(i["d"])({url:s.GetCollaborateComment,method:"post",data:e})}function c(e){return Object(i["d"])({url:s.DeleteCollaborateCommentById+"?id="+e.id,method:"post",data:e})}function d(e){return Object(i["d"])({url:s.AddCollaborateComment,method:"post",data:e})}function u(e){return Object(i["d"])({url:s.GetCollaborateModifiedHistory,method:"post",data:e})}function h(e){return Object(i["d"])({url:s.QueryContentCollaborates,method:"get",params:e})}function p(e){return Object(i["d"])({url:s.CollaboratesSearchUser,method:"get",params:e})}function m(e){return Object(i["d"])({url:s.CollaboratesInvite,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(i["d"])({url:s.CollaboratesAgree,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(i["d"])({url:s.CollaboratesUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(e){return Object(i["d"])({url:s.CollaboratesUpdateLink,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function y(e){return Object(i["d"])({url:s.CollaboratesQueryShared,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(e){return Object(i["d"])({url:s.CollaboratesQuerySharedOwner,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function C(e){return Object(i["d"])({url:s.QueryByLinkCode,method:"get",params:e})}function w(e){return Object(i["d"])({url:s.CollaboratesApply,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function k(e){return Object(i["d"])({url:s.MarkedCollaborateComment+"?id="+e.id,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function T(e){return Object(i["d"])({url:s.CollaboratesSendInviteEmail,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function L(e){return Object(i["d"])({url:s.CollaboratesRemove,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},5399:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA1FJREFUWEe92DtoFFEUBuD/jI8kYOGjsbCwECwVFLTQQtBCRDRooWAjCgoWyWqQgMK9Z+MDLLIzkkaMhZUpFFNEUEhhEVBQ0M5ABBuLFCFRtIgkmV9m1pVNsrPzzlQLe+653565c/beETRd1aq3z/fRD/AoRDY3fxf7mfxI+udVr3+NjW0KGBhwdy8tiQvwIIDvAMbIubuq+jsIk0asqneLpIXI+jQTLIslR63t7U46XrV2gnRGINi0Is8EyZOqlR8hUNUzBGzSxJFxxLy1PV1J8hjzYLtIxzcIOlvGE+Pk7HGpVt0Dvo+JXJX7PwMXrendkAQYxBhTOyuOPANa3zWBXBVr3ZcQOZ00ads44rW1PcfT5IpBfhar3hyAdA9Ea8EkuNBtbd9kFFDVPVOvXO+L5phIJPE7ALJ1Qs7QD5/K8TQVaYcjMRI+mYJziZDEeCSQvl9RrbiF4hodglxMgJymv3S4HfCIauVtXmBwW8PKrWxfbZFODVw4FiyXUoGRuMavjkSaTlWdD5dD1Bqk7+eqYCwuBtn4uhRgYtwyJE8bU3m1ckkVDkyNC0TEJPnniOrN6VKBReMKXYNl4AoDloUrBFgmLjewbFwu4FrgMgPXCpcJWBauWn24x/f9IYgcCnshOeE46EvVqFW9UySfp9p9t2nCjaZsjOkUZ+sUgB3LGjWRfLNQP0Ns/JLqtJcAV9/A1naK43xrtXNKXMHw1AfcSbz9SogrDGit9w6C4OwafxETwYmscbaNG5C7guEakS2/Eq29lLhCKmjM4H5x1n2IqwQy4AoBqnrXCAy1BWbEFQK01nsMweUI4A+QQ+ScqupibJVbBOReg1a9d8CyB2S+fjv5FJgbTfowROGLAH4KD/fkW0DekLNjeVHN2NzALLctzRhjBneJsy74J1l1RTZqAa8a0/sozURZY1XdS4QMpwKCnBHBhY6Orvf9/Vd+Zp283bh794a2LSwsHiVleNU7wn8Dxao7BciuMgAF5JyWmBZSwBw5UpCjYkxtrzjyIeolYo70uYfS58nwFbC1DwcgvJ07Y5EJiBFre86HQGPMepGt9yHoK3KOzLmI5+TsxaDX/n/LX4e6h0RwAyLBtmp75gkyDeQMKO8B/4m1ldFGir8fcc419qfJGAAAAABJRU5ErkJggg=="},"53f2":function(e,t,a){"use strict";a("8bab")},5455:function(e,t,a){e.exports=a.p+"img/no_user.dcd10f84.png"},"56bd":function(e,t,a){},5712:function(e,t,a){},"57a5b":function(e,t,a){"use strict";var i={Link:"Link",Select:"Select",Evaluation:"Evaluation",Refer:"Refer"};t["a"]=i},5841:function(e,t,a){"use strict";var i="0.3s height ease-in-out, 0.3s padding-top ease-in-out, 0.3s padding-bottom ease-in-out",s={"before-enter":function(e){e.style.transition=i,e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter:function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},"after-enter":function(e){e.style.transition="",e.style.height="",e.style.overflow=e.dataset.oldOverflow},"before-leave":function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},leave:function(e){0!==e.scrollHeight&&(e.style.transition=i,e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},"after-leave":function(e){e.style.transition="",e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}};t["a"]={name:"collapseTransition",functional:!0,render:function(e,t){var a=t.children,i={on:s};return e("transition",i,a)}}},"58e7":function(e,t){e.exports="data:image/png;base64,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"},"58ef":function(e,t,a){},"5ae4":function(e,t,a){e.exports=a.p+"img/upload_icon.409cc5b9.png"},"5b87":function(e,t,a){},"5bb5":function(e,t,a){},"5d88":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"31.442",height:"40",viewBox:"0 0 31.442 40"},children:[{tag:"g",attrsMap:{transform:"translate(-179.2 -99.38)"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#ffd629;",d:"M311.741,121.054h-8.855a3.363,3.363,0,0,1-3.334-3.372l-2.351-14.93a3.363,3.363,0,0,1,3.334-3.372h13.558a3.363,3.363,0,0,1,3.334,3.372l-2.351,14.93A3.363,3.363,0,0,1,311.741,121.054Z",transform:"translate(-112.388)"}},{tag:"path",attrsMap:{class:"b",style:"fill:#ffca29;",d:"M309.8,99.48h-9.432A3.382,3.382,0,0,0,297,102.852l2.378,14.93a3.382,3.382,0,0,0,3.372,3.372S320.211,104.4,309.8,99.48Z",transform:"translate(-112.28 -0.095)"}},{tag:"path",attrsMap:{class:"c",style:"fill:#fff;opacity:0.3;",d:"M305.523,99.48h-5.151A3.382,3.382,0,0,0,297,102.852l1.493,9.318S310.432,104.916,305.523,99.48Z",transform:"translate(-112.256 -0.095)"}},{tag:"path",attrsMap:{class:"d",style:"fill:#6bc04a;",d:"M193.655,253.831l-12.8-7.107A2.924,2.924,0,0,1,179.4,244.2V229.982a2.924,2.924,0,0,1,1.459-2.528l12.8-7.107a2.916,2.916,0,0,1,2.923,0l12.8,7.107a2.924,2.924,0,0,1,1.459,2.528V244.2a2.924,2.924,0,0,1-1.459,2.528l-12.8,7.107A2.939,2.939,0,0,1,193.655,253.831Z",transform:"translate(-0.19 -114.84)"}},{tag:"path",attrsMap:{class:"e",style:"fill:#258101;opacity:0.2;",d:"M210.637,639.48v4.461a2.948,2.948,0,0,1-1.464,2.549l-12.8,7.168a2.9,2.9,0,0,1-2.923,0l-12.8-7.168a2.944,2.944,0,0,1-1.459-2.549v-4.257s1.01-.452,2.493,2.421c1.147,2.226,7.134,4.685,9.632,6.5a5.258,5.258,0,0,0,3.6,1.389,12.643,12.643,0,0,0,2.484-.576c2.233-.79,9.066-5.222,10.1-6.7C208.715,641,209.258,639.48,210.637,639.48Z",transform:"translate(0 -514.704)"}},{tag:"path",attrsMap:{class:"f",style:"opacity:0.2;fill:#f9f2d7;",d:"M234.729,224.149l-9.738-5.4a2.886,2.886,0,0,0-2.918,0L209.3,225.919s-.113,4.2,10.422,5.712,2.72.395,2.72.395S232.806,231.365,234.729,224.149Z",transform:"translate(-28.667 -113.316)"}},{tag:"path",attrsMap:{class:"g",style:"fill:#5db43b;",d:"M375.76,446.593l.9,1.817a1.593,1.593,0,0,0,1.2.87l2.007.29a1.592,1.592,0,0,1,.88,2.716l-1.451,1.417a1.585,1.585,0,0,0-.457,1.408l.342,2a1.594,1.594,0,0,1-2.312,1.679l-1.793-.942a1.594,1.594,0,0,0-1.479,0l-1.793.942a1.593,1.593,0,0,1-2.312-1.679l.342-2a1.581,1.581,0,0,0-.457-1.408l-1.451-1.417a1.592,1.592,0,0,1,.885-2.716l2.007-.29a1.593,1.593,0,0,0,1.2-.87l.9-1.817a1.583,1.583,0,0,1,2.844,0Z",transform:"translate(-179.405 -330.031)"}},{tag:"path",attrsMap:{class:"h",style:"fill:#fff;",d:"M389.277,459.237l1.17,2.369a.953.953,0,0,0,.723.523l2.611.38a.955.955,0,0,1,.528,1.631l-1.893,1.845a.965.965,0,0,0-.276.847l.447,2.6a.957.957,0,0,1-1.389,1.008l-2.34-1.227a.95.95,0,0,0-.889,0l-2.335,1.227a.957.957,0,0,1-1.389-1.008l.447-2.6a.952.952,0,0,0-.276-.847l-1.893-1.845a.958.958,0,0,1,.533-1.631l2.611-.38a.972.972,0,0,0,.723-.523l1.17-2.369A.959.959,0,0,1,389.277,459.237Z",transform:"translate(-193.493 -342.41)"}}]}]})}},"5ed8":function(e,t,a){},6064:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all-collaborate-comment-view"},[a("div",{staticClass:"filter-line"},[a("div",{staticClass:"filter-name"},[a("a-input",{attrs:{size:"large",placeholder:"Search teacher name"},on:{change:e.handleFilterNameChange},model:{value:e.filterName,callback:function(t){e.filterName=t},expression:"filterName"}})],1),a("div",{staticClass:"filter-type"},[a("div",{staticClass:"type-filter"},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{on:{click:function(t){return e.toggleType(0,"All")}}},[a("span",[e._v("All")])]),a("a-menu-item",{on:{click:function(t){return e.toggleType(1,"My")}}},[a("span",[e._v("My comments")])])],1),a("a-button",{staticClass:"type-filter-button",staticStyle:{padding:"0 30px","border-color":"#D8D8D8",display:"flex","align-items":"center",height:"40px","border-radius":"6px",background:"#FFFFFF","font-family":"Inter-Bold",color:"#182552"}},[e.currentTypeLabel?a("span",[e._v(e._s(e.currentTypeLabel))]):a("span",[e._v("Choose type(s)of content")]),a("a-icon",{attrs:{type:"caret-down"}})],1)],1)],1)])]),e._l(e.formatCommentList,(function(t,i){return a("div",{key:i,staticClass:"root-comment",staticStyle:{"box-shadow":"rgb(0 0 0 / 16%) 0px 3px 6px"}},[a("div",{staticClass:"root-comment-tab"},[e._v("Selected element | "+e._s(e.getFieldDisplayName(t.fieldName))+" "),t.isDelete?a("div",{staticStyle:{float:"right"}},[a("a-tag",{attrs:{color:"cyan"}},[e._v("Marked as read")])],1):e._e()]),a("div",{staticClass:"comment-record-wrapper"},[t.deleteThread?a("div",{staticClass:"delete-thread-mask"},[a("div",{staticClass:"delete-group"},[a("div",{staticStyle:{color:"#fff",margin:"5px"}},[e._v(" Delete this comment Thread? ")]),a("div",{staticClass:"delete-group-button"},[a("div",{staticClass:"upload-text"},[a("a-button",{attrs:{shape:"round",type:"primary"},on:{click:function(a){return e.handleDeleteComment(t,i)}}},[e._v("Delete")])],1),a("div",{staticClass:"upload-text"},[a("a-button",{attrs:{shape:"round"},on:{click:function(t){return e.cancelDeleteThread(i)}}},[e._v("Cancel")])],1)])])]):e._e(),a("div",{key:-1,staticClass:"record-list"},[a("div",{staticClass:"record-item"},[[a("div",{directives:[{name:"show",rawName:"v-show",value:t.username===e.$store.getters.userInfo.username,expression:"rootComment.username === $store.getters.userInfo.username"}],staticClass:"record-action"},[a("div",[a("a-dropdown",[a("a-icon",{staticStyle:{"font-size":"20px","margin-top":"10px"},attrs:{type:"more"}}),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(a){return e.handleDeleteRootCommentConfirm(t,i,!0)}}},[a("a-icon",{attrs:{type:"delete",theme:"filled"}}),e._v(" Delete ")],1)]),a("a-menu-item",[a("a",{on:{click:function(a){return e.handleEditCommentRoot(t,i)}}},[a("a-icon",{attrs:{type:"edit",theme:"filled"}}),e._v(" Edit ")],1)])],1)],1)],1)]),a("div",{staticClass:"comment-user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.avatar}})]),a("div",{staticClass:"user-name"},[a("div",{staticClass:"name-text"},[e._v(" "+e._s(t.nickname))]),a("div",{staticClass:"time-text"},[e._v(" "+e._s(e._f("dayComment")(t.createdTime)))])])]),t.editing?e._e():a("div",{staticClass:"comment-detail"},[a("div",{staticClass:"comment-text"},[e._v(" "+e._s(t.content)+" ")])]),t.editing?a("div",{staticClass:"comment-input-wrapper"},[a("div",{staticClass:"comment-input"},[a("input-reply-button",{attrs:{"collaborate-user-list":e.collaborateUserList,"comment-item":t,sending:t.sendLoading},on:{send:e.handleSend,cancel:e.handleCancel}})],1)]):e._e()]],2)]),e._l(t.subCommentList,(function(t,s){return a("div",{key:s,staticClass:"record-list"},[t.delete?a("div",{staticClass:"delete-mask"},[a("div",{staticClass:"delete-group"},[a("div",{staticStyle:{color:"#fff",margin:"5px"}},[e._v(" Delete this comment? ")]),a("div",{staticClass:"delete-group-button"},[a("div",{staticClass:"upload-text"},[a("a-button",{attrs:{shape:"round",type:"primary"},on:{click:function(a){return e.handleDeleteComment(t,s,i)}}},[e._v("Delete")])],1),a("div",{staticClass:"upload-text"},[a("a-button",{attrs:{shape:"round"},on:{click:function(a){return e.handleDeleteCommentConfirm(t,s,i,!1)}}},[e._v("Cancel")])],1)])])]):e._e(),a("div",{staticClass:"record-item"},[[a("div",{directives:[{name:"show",rawName:"v-show",value:t.username===e.$store.getters.userInfo.username,expression:"commentItem.username === $store.getters.userInfo.username"}],staticClass:"record-action"},[a("div",[a("a-dropdown",[a("a-icon",{staticStyle:{"font-size":"20px","margin-top":"10px"},attrs:{type:"more"}}),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(a){return e.handleDeleteCommentConfirm(t,s,i,!0)}}},[a("a-icon",{attrs:{type:"delete",theme:"filled"}}),e._v(" Delete ")],1)]),a("a-menu-item",[a("a",{on:{click:function(a){return e.handleEditComment(t,s,i)}}},[a("a-icon",{attrs:{type:"edit",theme:"filled"}}),e._v(" Edit ")],1)])],1)],1)],1)]),a("div",{staticClass:"comment-user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.avatar}})]),a("div",{staticClass:"user-name"},[a("div",{staticClass:"name-text"},[e._v(" "+e._s(t.username))]),a("div",{staticClass:"time-text"},[e._v(" "+e._s(e._f("dayComment")(t.createdTime)))])])]),t.editing?e._e():a("div",{staticClass:"comment-detail"},[a("div",{staticClass:"comment-text"},[e._v(" "+e._s(t.content)+" ")])]),t.editing?a("div",{staticClass:"comment-input-wrapper"},[a("div",{staticClass:"comment-input"},[a("input-reply-button",{attrs:{"collaborate-user-list":e.collaborateUserList,"comment-item":t,sending:t.sendLoading},on:{send:e.handleSend,cancel:e.handleCancel}})],1)]):e._e()]],2)])})),a("div",{staticClass:"comment-input-wrapper",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"comment-input"},[a("input-reply-button",{attrs:{"collaborate-user-list":e.collaborateUserList,sending:e.newComments[i].sendLoading,"comment-item":e.newComments[i]},on:{send:e.handleSend,cancel:e.handleCancelNewComment,focusInput:e.handleFocusInput}})],1)])],2)])}))],2)},s=[],n=(a("a9e3"),a("159b"),a("e1f0")),o=a("f93e"),r=a("3f76"),l={name:"CollaborateCommentView",components:{},mixins:[n["a"]],props:{commentList:{type:Array,default:function(){return[]}},collaborateUserList:{type:Array,default:function(){return[]}},sourceId:{type:String,default:null},sourceType:{type:Number,default:null}},data:function(){return{deleteCommentModalVisible:!1,currentDeleteComment:null,filterName:null,currentType:0,currentTypeLabel:"All"}},computed:{getFieldDisplayName:function(){return function(e){return this.sourceType===r["e"].task?o["V"][e]:this.sourceType===r["e"]["unit-plan"]?o["x"][e]:e}}},watch:{commentList:function(e){var t=this;this.$logger.info("CollaborateCommentPanel commentList",e),this.rawCommentList=[],e.forEach((function(e){e.sendLoading=!1,t.rawCommentList.push(e)})),this.formatCommentList=this.rawCommentList,this.$logger.info("formatCommentList",this.formatCommentList)}},created:function(){var e=this;this.$logger.info("CollaborateCommentPanel commentList",this.commentList),this.originalCommentList=this.commentList,this.rawCommentList=[],this.commentList.forEach((function(t){t.sendLoading=!1,e.rawCommentList.push(t)})),this.$logger.info("rawCommentList",this.rawCommentList),this.formatCommentList=this.rawCommentList,this.$logger.info("formatCommentList",this.formatCommentList),this.formatNewReply()},methods:{handleFilterNameChange:function(e){var t=this,a=this.filterName;e&&"string"===typeof e&&(a=e),this.$logger.info("handleFilterNameChange",a,this.formatCommentList);var i=[];0===this.currentType?this.commentList.forEach((function(e){var t=!1;(e.nickname&&-1!==e.nickname.toLowerCase().indexOf(a.toLowerCase()))|-1!==e.username.toLowerCase().indexOf(a.toLowerCase())?t=!0:e.subCommentList.forEach((function(e){(e.nickname&&-1!==e.nickname.toLowerCase().indexOf(a.toLowerCase()))|-1!==e.username.toLowerCase().indexOf(a.toLowerCase())&&(t=!0)})),t&&i.push(e)})):(this.commentList.forEach((function(e){var s=!1;e.nickname===t.$store.getters.userInfo.nickname&&e.nickname&&-1!==e.nickname.toLowerCase().indexOf(a.toLowerCase())?s=!0:e.subCommentList.forEach((function(e){e.nickname===t.$store.getters.userInfo.nickname&&e.nickname&&-1!==e.nickname.toLowerCase().indexOf(a.toLowerCase())&&(s=!0)})),s&&i.push(e)})),this.$logger.info("tmpCommentList",i)),this.formatCommentList=i},toggleType:function(e,t){this.$logger.info("toggleType "+e+" label "+t),this.currentType=e,this.currentTypeLabel=t,this.formatCommentList=[],0===this.currentType?this.formatCommentList=this.commentList:(this.handleFilterNameChange(this.$store.getters.userInfo.nickname),this.$logger.info("formatCommentList",this.formatCommentList))}}},c=l,d=(a("82a3"),a("0c7c")),u=Object(d["a"])(c,i,s,!1,null,"2badb930",null);t["a"]=u.exports},"60f8":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19"},children:[{tag:"g",attrsMap:{transform:"translate(-771.25 -365.25)"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#808191;stroke:#808191;",d:"M9,0A9,9,0,1,1,0,9,9,9,0,0,1,9,0Z",transform:"translate(771.75 365.75)"}},{tag:"path",attrsMap:{class:"b",style:"fill:#fff;stroke:#fff;stroke-width:0.5px;",d:"M24.47,24.8V21.78h3.016a.5.5,0,0,0,0-1.005H24.47V17.759a.5.5,0,0,0-1.005,0v3.016H20.449a.5.5,0,0,0,0,1.005h3.016V24.8a.5.5,0,0,0,1.005.044q0-.022,0-.044Z",transform:"translate(756.784 353.451)"}}]}]})}},6626:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unit-plan-preview"},[e.loading?[a("a-skeleton",{attrs:{active:""}})]:[a("a-row",{staticClass:"top-header"},[a("a-col",{attrs:{span:"24"}},[a("div",{staticClass:"title-line"},[a("div",{staticClass:"name"},[e._v(" "+e._s(e.data.name)+" ")])])])],1),a("a-row",{staticClass:"data-info"},[a("a-col",{staticClass:"right-detail",attrs:{span:"24"}},[e.data?a("div",{staticClass:"detail-wrapper"},[a("div",{staticClass:"block-main-label"},[e._v(" Overview ")]),a("div",{staticClass:"ref-block",on:{click:function(t){return e.handleReferItem("overview",e.data.overview)},mouseenter:function(t){return e.handleHoverBlock("overview")}}},[a("div",{staticClass:"overview-block"},[a("div",{staticClass:"view-text"},[e._v(" "+e._s(e.data.overview)+" ")])])]),a("div",{staticClass:"block-main-label"},[e._v(" Sustainable development goal ")]),a("div",{staticClass:"detail-block"},[e.data.scenarios&&e.data.scenarios.length?e._l(e.data.scenarios,(function(t,i){return a("div",{key:i,staticClass:"scenario-item ref-block",on:{click:function(a){return e.handleReferItem("sdg",t)},mouseenter:function(t){return e.handleHoverBlock("sdg")}}},[a("div",{staticClass:"block-title"},[e._v(" "+e._s(t.description)+" ")]),a("div",{staticClass:"scenario-block-content"},[a("div",{staticClass:"content-list"},[a("div",{staticClass:"content-item"},[a("div",{staticClass:"question"},[e._v(" "+e._s(t.sdgName)+" ")]),a("div",{staticClass:"tags"},e._l(t.sdgKeyWords,(function(t,i){return a("div",{key:i,staticClass:"tag-item"},[a("a-tag",{staticClass:"tag"},[e._v(" "+e._s(t.name)+" ")])],1)})),0)])])])])})):[a("a-empty")]],2),a("div",{staticClass:"detail-block "},[a("div",{staticClass:"block-main-label"},[e._v(" Scenario description ")]),a("div",{staticClass:"inquiry-block-content ref-block",on:{click:function(t){return e.handleReferItem("inquiry",e.data.inquiry)},mouseenter:function(t){return e.handleHoverBlock("inquiry")}}},[e.data.inquiry?[a("div",{staticClass:"inquiry"},[e._v(" "+e._s(e.data.inquiry)+" ")])]:e._e()],2)]),a("div",{staticClass:"block-main-label"},[e._v(" Question / Line of inquiry ")]),a("div",{staticClass:"detail-block"},[e.data.questions&&e.data.questions.length?[a("div",{staticClass:"keyword-block-content"},[e.data.questions&&e.data.questions.length?a("div",{staticClass:"content-list"},e._l(e.data.questions,(function(t,i){return a("div",{key:i,staticClass:"content-item"},[a("div",{staticClass:"ref-block",on:{click:function(a){return e.handleReferItem("question",t)},mouseenter:function(t){return e.handleHoverBlock("question")}}},[t&&t.name?a("div",{staticClass:"question"},[e._v(" "+e._s(t.name)+" ")]):e._e(),t&&t.knowledgeTags&&t.knowledgeTags.length?a("div",{staticClass:"content-sub-list"},e._l(t.knowledgeTags,(function(t,i){return a("div",{key:i,staticClass:"content-sub-item"},[a("div",{staticClass:"sub-title"},[a("div",{staticClass:"sub-title-name"},[e._v(" "+e._s(t.description)+" "),t.subSubjectName?a("div",{staticClass:"subject-name"},[e._v(" "+e._s(t.subSubjectName)+" ")]):e._e()]),a("div",{staticClass:"sub-detail"},[a("a-tag",{staticClass:"tag"},[e._v(" "+e._s(t.name)+" ")])],1)])])})),0):e._e(),t&&t.skillTags&&t.skillTags.length?a("div",{staticClass:"content-sub-list"},e._l(t.skillTags,(function(t,i){return a("div",{key:i,staticClass:"content-sub-item"},[a("div",{staticClass:"sub-title"},[a("div",{staticClass:"sub-title-name"},[e._v(" "+e._s(t.description)+" ")]),a("div",{staticClass:"sub-detail"},[a("a-tag",{staticClass:"tag"},[e._v(" "+e._s(t.name)+" ")])],1)])])})),0):e._e()])])})),0):e._e()])]:e._e()],2)]):e._e()])],1),e.id&&e.type?a("div",{staticClass:"associate-info"},[a("refer-associate-list",{attrs:{id:e.id,"content-type":e.type},on:{"refer-associate":e.handleReferAssociate}})],1):e._e()]],2)},s=[],n=(a("a9e3"),a("d3b7"),a("823b")),o=a("3f76"),r=a("69b3"),l=a("8c95"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"associate-preview"},[i("a-row",{staticClass:"bottom-relative"},[i("a-col",{staticClass:"content-type-filter",attrs:{span:"24"}},[i("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.handleUserTypeChange},model:{value:e.activeUserType,callback:function(t){e.activeUserType=t},expression:"activeUserType"}},[i("a-radio-button",{staticClass:"left-button",attrs:{value:"owner"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-owner"))+" ")]),i("a-radio-button",{staticClass:"right-button",attrs:{value:"others"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-others"))+" ")])],1),i("div",{staticClass:"content-type-list"},[i("div",{staticClass:"toggle-mode-type-wrapper"},[i("div",{staticClass:"toggle-mode-type"},[i("div",{staticClass:"toggle-mode"},[i("div",{class:{"mode-item":!0,"skill-active-mode":e.activeContentType===e.typeMap.task},on:{click:function(t){return e.handleSelectContentType(e.typeMap.task)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.task"))+" ")]),i("div",{class:{"mode-item":!0,"knowledge-active-mode":e.activeContentType===e.typeMap.lesson},on:{click:function(t){return e.handleSelectContentType(e.typeMap.lesson)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.lesson"))+" ")]),i("div",{class:{"mode-item":!0,"general-active-mode":e.activeContentType===e.typeMap.evaluation},on:{click:function(t){return e.handleSelectContentType(e.typeMap.evaluation)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.evaluation"))+" ")])])])])])],1),i("a-col",{staticClass:"created-toggle",attrs:{span:"24"}},[i("div",{staticClass:"toggle-view-type"},[i("div",{staticClass:"switch-icon"},[i("div",{class:{"icon-item":!0,"active-icon":"list"===e.dataListMode},on:{click:function(t){return e.handleToggleDataListMode("list")}}},[i("list-mode-icon")],1),i("div",{class:{"icon-item":!0,"active-icon":"card"===e.dataListMode},on:{click:function(t){return e.handleToggleDataListMode("card")}}},[i("pu-bu-icon")],1)])])])],1),i("a-row",[i("a-col",{attrs:{span:"24"}},[i("div",{staticClass:"associate-info"},e._l(e.currentAssociateList,(function(t,s){return i("div",{key:s,staticClass:"associate-block-list"},[t.type===e.activeContentType?["list"===e.dataListMode?e._l(t.datas,(function(n,o){return t.datas.length?i("div",{key:o,staticClass:"question-item list-question-item"},e._l(n.lists,(function(t,o){return i("div",{key:o,class:{"list-item":!0,"browser-item":!0,"odd-line":s%2===0}},[i("div",{staticClass:"item-name"},[i("dir-icon",{attrs:{"content-type":n.type}}),i("span",{staticClass:"data-name"},[e._v(" "+e._s(t.name)+" ")])],1),i("div",{staticClass:"arrow-item"},[i("span",{staticClass:"data-time"},[e._v(" "+e._s(e._f("dayjs")(t.updateTime||t.createTime))+" ")]),i("div",{staticClass:"link-it",on:{click:function(a){return e.handleLinkIt(t)}}},[i("div",{staticClass:"link-item"},[i("img",{staticClass:"link-icon",attrs:{src:a("c97b")}}),e._v(" "+e._s("Link this content to my Unit")+" ")])])])])})),0):e._e()})):e._e(),"card"===e.dataListMode?[e._l(t.datas,(function(n,o){return t.datas.length?i("div",{key:o,staticClass:"question-item card-question-item"},e._l(n.lists,(function(n,o){return i("div",{key:o,class:{"my-card-list-item":!0,"card-item":!0,"browser-item":!0,"odd-line":s%2===0}},[i("div",{staticClass:"cover-img-wrapper"},[i("div",{staticClass:"cover-image",style:{backgroundImage:"url("+n.image+")"}})]),i("div",{staticClass:"item-intro"},[i("div",{staticClass:"page-info"},[i("span",{staticClass:"page-num-tag"},[e._v(" 1/1 ")])]),i("div",{staticClass:"main-title"},[e._v(" "+e._s(n.name?n.name:"Untitled")+" ")]),i("div",{staticClass:"sub-title"},[e._v(" "+e._s(e._f("dayjs")(n.createTime))+" ")])]),i("div",{staticClass:"item-action-wrapper"},[i("div",[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleLinkIt(t)}}},[i("div",{staticClass:"link-item"},[i("img",{staticClass:"link-icon",attrs:{src:a("c97b")}}),e._v(" Link this content to my Unit ")])])],1)])])])])})),0):e._e()})),t.datas.length?e._e():i("div",{staticClass:"no-list-tips"},[i("no-more-resources")],1)]:e._e()]:e._e()],2)})),0)])],1),i("a-row")],1)},d=[],u=a("8f46"),h=a("05be"),p=a.n(h),m=a("8d47"),g=a.n(m),f=a("6964"),v=a("faaa"),y=a("9afb"),b=y.GetAssociate,C={name:"ReferAssociateList",props:{id:{type:String,required:!0},contentType:{type:Number,required:!0}},components:{NoMoreResources:r["a"],DirIcon:v["a"],DataCardView:f["a"],ContentTypeIcon:u["a"],PuBuIcon:p.a,ListModeIcon:g.a},data:function(){return{loading:!0,associateData:null,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:o["e"].task,activeUserType:"owner",currentAssociateList:[],typeMap:o["e"],previewType:"",dataListMode:"list"}},created:function(){n["info"]("Associate Preview id "+this.id),this.loadAssociateData()},methods:{loadAssociateData:function(){var e=this;n["info"]("loadAssociateData "+this.id+" "+this.contentType),this.loading=!0,b({id:this.id,type:this.contentType}).then((function(t){n["info"]("GetAssociate ",t),e.associateData=t.result,e.currentAssociateList=e.associateData[e.activeUserType]})).then((function(){n["info"]("get favorite "+e.id)})).finally((function(){e.loading=!1}))},handleToggleDataListMode:function(e){this.$logger.info("handleToggleDataListMode"+e),this.dataListMode=e},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.previewType=null},handleUserTypeChange:function(e){n["info"]("handleUserTypeChange "+this.activeUserType),this.currentAssociateList=this.associateData[this.activeUserType],n["info"]("currentAssociateList",this.currentAssociateList)},handleClickTitle:function(e){n["info"]("handleClickTitle",e),this.previewType=o["e"]["unit-plan"]},handleLinkIt:function(e){this.$logger.info("handleLinkIt",e),this.$emit("refer-associate",{item:e})}}},w=C,k=(a("2cf6"),a("0c7c")),T=Object(k["a"])(w,c,d,!1,null,"6b21898e",null),L=T.exports,I=a("ca00"),S=I.formatLocalUTC,A=a("de0d"),x=A.UnitPlanQueryById,_={name:"ReferPreview",components:{ReferAssociateList:L,CommonAssociatePreview:l["a"],NoMoreResources:r["a"]},props:{id:{type:String,required:!0},type:{type:Number,required:!0}},computed:{lastChangeSavedTime:function(){if(this.data){n["info"]("lastChangeSavedTime data",this.data);var e=this.data.createTime||this.data.updateTime;if(e)return S(e)}return""}},data:function(){return{loading:!0,data:null,tagColorList:["pink","orange","green","cyan","blue","red","purple"],typeMap:o["e"],subPreviewVisible:!1}},created:function(){n["info"]("ReferPreview id "+this.id+" type "+this.type),this.loadData()},methods:{loadData:function(){var e=this;n["info"]("reference preview loadData "+this.id+" type "+this.type),this.loading=!0,this.type===this.typeMap["unit-plan"]&&x({id:this.id}).then((function(t){n["info"]("reference preview UnitPlanQueryById "+e.id,t.result),e.data=t.result})).finally((function(){e.loading=!1}))},handleReferItem:function(e,t){this.$logger.info("handleReferItem "+e,t),this.$emit("refer",{blockType:e,data:t})},handleHoverBlock:function(e){this.$logger.info("handleHoverBlock "+e),this.$emit("hover-refer-block",{blockType:e})},handleReferAssociate:function(e){this.$logger.info("handleReferAssociate",e),this.$emit("refer-associate",e)}}},D=_,O=(a("79c3"),Object(k["a"])(D,i,s,!1,null,"09949312",null));t["a"]=O.exports},"666c":function(e,t,a){"use strict";a("05c1")},6691:function(e,t,a){"use strict";a("8aa2")},"66d8":function(e,t,a){"use strict";a("a283")},6821:function(e,t,a){(function(){var t=a("00d8"),i=a("9a634").utf8,s=a("044b"),n=a("9a634").bin,o=function(e,a){e.constructor==String?e=a&&"binary"===a.encoding?n.stringToBytes(e):i.stringToBytes(e):s(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=t.bytesToWords(e),l=8*e.length,c=1732584193,d=-271733879,u=-1732584194,h=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[l>>>5]|=128<<l%32,r[14+(l+64>>>9<<4)]=l;var m=o._ff,g=o._gg,f=o._hh,v=o._ii;for(p=0;p<r.length;p+=16){var y=c,b=d,C=u,w=h;c=m(c,d,u,h,r[p+0],7,-680876936),h=m(h,c,d,u,r[p+1],12,-389564586),u=m(u,h,c,d,r[p+2],17,606105819),d=m(d,u,h,c,r[p+3],22,-1044525330),c=m(c,d,u,h,r[p+4],7,-176418897),h=m(h,c,d,u,r[p+5],12,1200080426),u=m(u,h,c,d,r[p+6],17,-1473231341),d=m(d,u,h,c,r[p+7],22,-45705983),c=m(c,d,u,h,r[p+8],7,1770035416),h=m(h,c,d,u,r[p+9],12,-1958414417),u=m(u,h,c,d,r[p+10],17,-42063),d=m(d,u,h,c,r[p+11],22,-1990404162),c=m(c,d,u,h,r[p+12],7,1804603682),h=m(h,c,d,u,r[p+13],12,-40341101),u=m(u,h,c,d,r[p+14],17,-1502002290),d=m(d,u,h,c,r[p+15],22,1236535329),c=g(c,d,u,h,r[p+1],5,-165796510),h=g(h,c,d,u,r[p+6],9,-1069501632),u=g(u,h,c,d,r[p+11],14,643717713),d=g(d,u,h,c,r[p+0],20,-373897302),c=g(c,d,u,h,r[p+5],5,-701558691),h=g(h,c,d,u,r[p+10],9,38016083),u=g(u,h,c,d,r[p+15],14,-660478335),d=g(d,u,h,c,r[p+4],20,-405537848),c=g(c,d,u,h,r[p+9],5,568446438),h=g(h,c,d,u,r[p+14],9,-1019803690),u=g(u,h,c,d,r[p+3],14,-187363961),d=g(d,u,h,c,r[p+8],20,1163531501),c=g(c,d,u,h,r[p+13],5,-1444681467),h=g(h,c,d,u,r[p+2],9,-51403784),u=g(u,h,c,d,r[p+7],14,1735328473),d=g(d,u,h,c,r[p+12],20,-1926607734),c=f(c,d,u,h,r[p+5],4,-378558),h=f(h,c,d,u,r[p+8],11,-2022574463),u=f(u,h,c,d,r[p+11],16,1839030562),d=f(d,u,h,c,r[p+14],23,-35309556),c=f(c,d,u,h,r[p+1],4,-1530992060),h=f(h,c,d,u,r[p+4],11,1272893353),u=f(u,h,c,d,r[p+7],16,-155497632),d=f(d,u,h,c,r[p+10],23,-1094730640),c=f(c,d,u,h,r[p+13],4,681279174),h=f(h,c,d,u,r[p+0],11,-358537222),u=f(u,h,c,d,r[p+3],16,-722521979),d=f(d,u,h,c,r[p+6],23,76029189),c=f(c,d,u,h,r[p+9],4,-640364487),h=f(h,c,d,u,r[p+12],11,-421815835),u=f(u,h,c,d,r[p+15],16,530742520),d=f(d,u,h,c,r[p+2],23,-995338651),c=v(c,d,u,h,r[p+0],6,-198630844),h=v(h,c,d,u,r[p+7],10,1126891415),u=v(u,h,c,d,r[p+14],15,-1416354905),d=v(d,u,h,c,r[p+5],21,-57434055),c=v(c,d,u,h,r[p+12],6,1700485571),h=v(h,c,d,u,r[p+3],10,-1894986606),u=v(u,h,c,d,r[p+10],15,-1051523),d=v(d,u,h,c,r[p+1],21,-2054922799),c=v(c,d,u,h,r[p+8],6,1873313359),h=v(h,c,d,u,r[p+15],10,-30611744),u=v(u,h,c,d,r[p+6],15,-1560198380),d=v(d,u,h,c,r[p+13],21,1309151649),c=v(c,d,u,h,r[p+4],6,-145523070),h=v(h,c,d,u,r[p+11],10,-1120210379),u=v(u,h,c,d,r[p+2],15,718787259),d=v(d,u,h,c,r[p+9],21,-343485551),c=c+y>>>0,d=d+b>>>0,u=u+C>>>0,h=h+w>>>0}return t.endian([c,d,u,h])};o._ff=function(e,t,a,i,s,n,o){var r=e+(t&a|~t&i)+(s>>>0)+o;return(r<<n|r>>>32-n)+t},o._gg=function(e,t,a,i,s,n,o){var r=e+(t&i|a&~i)+(s>>>0)+o;return(r<<n|r>>>32-n)+t},o._hh=function(e,t,a,i,s,n,o){var r=e+(t^a^i)+(s>>>0)+o;return(r<<n|r>>>32-n)+t},o._ii=function(e,t,a,i,s,n,o){var r=e+(a^(t|~i))+(s>>>0)+o;return(r<<n|r>>>32-n)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,a){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var i=t.wordsToBytes(o(e,a));return a&&a.asBytes?i:a&&a.asString?n.bytesToString(i):t.bytesToHex(i)}})()},"68c4d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-details"},[a("a-card",{staticClass:"cover-card"},[a("div",{staticClass:"assessment-task-button",attrs:{slot:"title"},slot:"title"},[a("div",{staticStyle:{width:"200px"},on:{click:function(t){return e.hideModel()}}},[a("a-icon",{attrs:{type:"left"}}),e._v(" Assessment task details ")],1)]),a("div",{staticClass:"tab-content"},[a("div",{class:{"tab-item":!0,"tab-item-active":"1"===e.tab},attrs:{value:"1"},on:{click:function(t){return e.changeTab("1")}}},[e._v(" Assessment task(s) ")]),a("div",{class:{"tab-item":!0,"tab-item-active":"2"===e.tab},attrs:{value:"2"},on:{click:function(t){return e.changeTab("2")}}},[e._v(" Learning experience ")])]),"1"===e.tab?a("div",{staticClass:"tab1-details"},[e._l(e.associateTaskList,(function(t,i){return a("div",{key:i,staticClass:"tab-item-block"},[a("div",{staticClass:"tab1-item"},[a("div",{staticClass:"left-card"},[a("div",{staticClass:"time-top"},[a("span",{staticClass:"time-month"},[e._v(e._s(e.formatMonth(t)))]),a("span",{staticClass:"time-day"},[e._v(e._s(e.formatDay(t)))])]),a("div",{staticClass:"time-bottom"},[e._v(" "+e._s(e.formatTime(t))+" ")])]),a("div",{staticClass:"center-card"},[a("div",{staticClass:"title-image"},[a("div",{staticClass:"center-title"},[e._v(" "+e._s(t.name)+" ")]),a("Go-Icon",{staticClass:"go-icon",on:{click:function(a){return e.handleEditTask(t)}}})],1),a("div",{staticClass:"center-tags"},[a("div",{staticClass:"tag-list-item"},["FA"==t.taskType?a("a-tag",{staticClass:"tag-item",attrs:{closable:!1}},[e._v("Formative")]):e._e(),"SA"==t.taskType?a("a-tag",{staticClass:"tag-item",attrs:{closable:!1}},[e._v("Summative")]):e._e(),"Activity"==t.taskType?a("a-tag",{staticClass:"tag-item",attrs:{closable:!1}},[e._v("Activity")]):e._e(),"IA"==t.taskType?a("a-tag",{staticClass:"tag-item",attrs:{closable:!1}},[e._v("IA")]):e._e()],1)])]),a("div",{staticClass:"right-card",on:{click:function(a){return e.showTaskLearnOut(t)}}},[t.showLearnOut?a("a-button",{attrs:{shape:"round",type:"link",icon:"caret-up"}},[e._v("Show objectives ")]):e._e(),t.showLearnOut?e._e():a("a-button",{attrs:{shape:"round",type:"link",icon:"caret-down"}},[e._v("Show objectives ")])],1)]),t.showLearnOut?a("div",{staticClass:" learn-out"},[a("ui-learn-out-sub",{attrs:{"learn-outs":t.learnOuts}})],1):e._e()])})),0===e.associateTaskList.length?[a("no-more-resources",{attrs:{tips:"no data!"}})]:e._e()],2):e._e(),"2"===e.tab?a("div",{staticClass:"tab2-details"},[0===e.associateTaskList.length?[a("no-more-resources",{attrs:{tips:"no data!"}})]:[a("div",{staticClass:"tab2-title"},[e._v(" Learning experience/Student expectations ")]),a("div",{staticClass:"tab2-task-list"},e._l(e.associateTaskList,(function(t,i){return a("div",{key:i,staticClass:"task-card"},[a("div",{staticClass:"title-image"},[a("div",{staticClass:"center-title"},[e._v(" "+e._s(t.name)+" ")]),a("Go-Icon",{staticClass:"go-icon",on:{click:function(a){return e.handleEditTask(t)}}})],1),a("div",{staticClass:"overview"},[e._v(" "+e._s(t.overview)+" ")])])})),0),a("div",{staticClass:"tab2-title"},[e._v(" Teaching strategie ")]),a("div",{staticClass:"tab2-task-list"},e._l(e.associateTaskList,(function(t,i){return a("div",{key:i,staticClass:"task-card"},[a("div",{staticClass:"title-image"},[a("div",{staticClass:"center-title"},[e._v(" "+e._s(t.name)+" ")]),a("Go-Icon",{staticClass:"go-icon",on:{click:function(a){return e.handleEditTask(t)}}})],1),a("div",{staticClass:"task-tags"},[a("div",{staticClass:"tag-list-item"},e._l(t.customTags,(function(t,i){return"Teaching strategies"===t.parentName?a("a-tag",{key:i,staticClass:"tag-item",attrs:{closable:!1}},[e._v(e._s(t.name))]):e._e()})),1)])])})),0),a("div",{staticClass:"tab2-title"},[e._v(" Differentiate instructions ")]),a("div",{staticClass:"tab2-task-list"},e._l(e.associateTaskList,(function(t,i){return a("div",{key:i,staticClass:"task-card"},[a("div",{staticClass:"title-image"},[a("div",{staticClass:"center-title"},[e._v(" "+e._s(t.name)+" ")]),a("Go-Icon",{staticClass:"go-icon",on:{click:function(a){return e.handleEditTask(t)}}})],1),a("div",{staticClass:"task-tags"},[a("div",{staticClass:"tag-list-item"},e._l(t.customTags,(function(t,i){return"Differentiated instructions"===t.parentName?a("a-tag",{key:i,staticClass:"tag-item",attrs:{closable:!1}},[e._v(e._s(t.name))]):e._e()})),1)])])})),0)]],2):e._e()])],1)},s=[],n=(a("c740"),a("d33b4")),o=a("91ff"),r=a("3f76"),l=a("c1df"),c=a.n(l),d=a("4b0e"),u=a.n(d),h=a("69b3"),p={name:"AssessmentTaskDetails",components:{NoMoreResources:h["a"],UiLearnOutSub:o["a"],GoIcon:u.a},mixins:[n["a"]],props:{associateTaskList:{type:Array,default:function(){return[]}}},mounted:function(){},destroyed:function(){},data:function(){return{loading:!1,tab:"1",contentType:r["e"]}},created:function(){this.$logger.info("associateTaskList ",this.associateTaskList)},computed:{formatMonth:function(){return function(e){var t=e.startDate;return t||(t=e.createTime),c.a.utc(t).local().format("MMM")}},formatDay:function(){return function(e){var t=e.startDate;return t||(t=e.createTime),c.a.utc(t).local().format("DD")}},formatTime:function(){return function(e){var t=e.startDate;return t||(t=e.createTime),c.a.utc(t).local().format("ddd HH:mm a")}}},watch:{},methods:{changeTab:function(e){this.tab=e},showTaskLearnOut:function(e){this.$logger.info("showTaskLearnOut ",e);var t=this.associateTaskList.findIndex((function(t){return t.id===e.id}));e.showLearnOut=!e.showLearnOut,this.$set(this.associateTaskList,t,e)},handleEditTask:function(e){window.open("/teacher/task-redirect/"+e.id,"_blank")},hideModel:function(){this.$emit("hide-assessment-task")}}},m=p,g=(a("9b4b"),a("0c7c")),f=Object(g["a"])(m,i,s,!1,null,"acbb3898",null);t["a"]=f.exports},6964:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-card-view"},[a("div",{staticClass:"card-cover",style:{backgroundImage:"url("+e.cover+")"}}),a("div",{class:{"card-info":!0,"active-item":e.activeFlag}},[a("div",{staticClass:"card-title"},[a("div",{staticClass:"type-icon"},[a("content-type-icon",{attrs:{type:e.contentType}})],1),a("div",{staticClass:"title-text"},[e._v(e._s(e.title))])]),a("div",{staticClass:"card-time"},[e._v(" "+e._s(e._f("dayjs")(e.updateTime))+" ")])])])},s=[],n=(a("a9e3"),a("8f46")),o={name:"DataCardView",components:{ContentTypeIcon:n["a"]},props:{cover:{type:String,default:null},title:{type:String,default:null},updateTime:{type:String,default:null},activeFlag:{type:Boolean,default:!1},contentType:{type:Number,required:!0}}},r=o,l=(a("7531"),a("0c7c")),c=Object(l["a"])(r,i,s,!1,null,"3706e6d5",null);t["a"]=c.exports},"69e4":function(e,t,a){"use strict";a("5b87")},"6b36":function(e,t,a){"use strict";a.r(t),a.d(t,"reviewsTaskAPIUrl",(function(){return s})),a.d(t,"ReviewsTaskSave",(function(){return n})),a.d(t,"ReviewsTaskList",(function(){return o})),a.d(t,"ReviewsTaskMyReview",(function(){return r})),a.d(t,"ReviewsTaskStats",(function(){return l})),a.d(t,"ReviewsTaskDelete",(function(){return c})),a.d(t,"ReviewsTaskMyReviewBySession",(function(){return d})),a.d(t,"getReviewsStatByContentId",(function(){return u}));var i=a("b775"),s={delete:"/classcipe/api/reviewsTask/delete",getMyReviews:"/classcipe/api/reviewsTask/library/getMyReviews",getMyReviewsSession:"/classcipe/api/reviewsTask/session/getMyReviews",getReviewsStat:"/classcipe/api/reviewsTask/library/getReviewsStat",list:"/classcipe/api/reviewsTask/list",save:"/classcipe/api/reviewsTask/save",getReviewsStatByContentId:"/classcipe/api/reviewsTask/getReviewsStatByContentId"};function n(e){return Object(i["d"])({url:s.save,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(i["d"])({url:s.list,method:"get",params:e})}function r(e){return Object(i["d"])({url:s.getMyReviews,method:"get",params:e})}function l(e){return Object(i["d"])({url:s.getReviewsStat,method:"get",params:e})}function c(e){return Object(i["d"])({url:s.delete+"?id="+e.id,method:"get",data:e})}function d(e){return Object(i["d"])({url:s.getMyReviewsSession,method:"get",params:e})}function u(e){return Object(i["d"])({url:s.getReviewsStatByContentId,method:"get",params:e})}},"6c7c":function(e,t,a){},"6f02":function(e,t,a){},"6f20":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-update"},[a("div",{staticClass:"alert"},[e._m(0),a("div",{staticClass:"alert-text"},[e._v(" The content has been edited by "+e._s(this.saveContentMsg.from.nickname)+"！"),a("br"),e._v(" Please update to view the latest version. ")]),a("div",{staticClass:"alert-text-sub"},[e._v("Please edit on the latest")]),a("div",{staticClass:"alert-button"},[a("a-button",{staticClass:"button-text",attrs:{loading:e.loading,type:"primary",shape:"round"},on:{click:e.updateContent}},[e._v("Update")])],1)])])},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"alert-img"},[i("img",{attrs:{src:a("2c6e")}})])}],n=a("5530"),o=(a("a9e3"),a("2f62")),r={name:"CollaborateUpdateContent",components:{},props:{sourceId:{type:String,required:!0},sourceType:{type:Number,required:!0}},data:function(){return{loading:!1,refreshing:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])({vueSocket:"vueSocket"})),Object(o["e"])({saveContentMsg:function(e){return e.websocket.saveContentMsg}})),created:function(){this.loading=!1},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])(["receiveSaveContentMsg"])),{},{updateContent:function(){var e=this,t=this.saveContentMsg;t.hideUpdate=!0,this.loading=!0,this.receiveSaveContentMsg(t),this.$emit("update-content",""),setTimeout((function(){e.$message.info({content:"The latest version has been loaded and your local offline changes can be viewed and restored on history section.",duration:5})}),1e3)}})},l=r,c=(a("836b"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,"db87dbc6",null);t["a"]=d.exports},"6f6b":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"30.511",height:"24.408",viewBox:"0 0 30.511 24.408"},children:[{tag:"g",attrsMap:{id:"打开的文件夹",transform:"translate(0)"},children:[{tag:"path",attrsMap:{id:"路径_403","data-name":"路径 403",style:" fill: #009b77;",class:"cls-1",d:"M269,4.247H258.243L255.515.491A1.276,1.276,0,0,0,254.606,0h-7.579c-.909,0-1.515.98-1.212,2.287l2.728,17.153a1.474,1.474,0,0,0,1.364,1.307h16.671a1.5,1.5,0,0,0,1.364-1.306l2.122-13.071c.3-1.144-.3-2.124-1.062-2.124Z",transform:"translate(-239.879 0)"}},{tag:"path",attrsMap:{id:"路径_404","data-name":"路径 404",style:" fill: #fff;",class:"cls-2",d:"M358.4,286.427V275.456h18.306v10.971Z",transform:"translate(-349.86 -268.89)"}},{tag:"path",attrsMap:{id:"路径_405","data-name":"路径 405",style:" fill: #15c39a;",class:"cls-3",d:"M28.931,229.548H15.519l-3.587-3.776a1.643,1.643,0,0,0-1.091-.492H1.484a1.54,1.54,0,0,0-1.4,2.133L4.6,243.169a1.752,1.752,0,0,0,1.715,1.15h18.9a1.754,1.754,0,0,0,1.716-1.148l3.56-11.982a1.511,1.511,0,0,0-1.56-1.64Z",transform:"translate(0 -219.911)"}}]}]})}},7286:function(e,t,a){},7531:function(e,t,a){"use strict";a("2d57")},7569:function(e,t,a){"use strict";a("ba70")},7715:function(e,t,a){},7849:function(e,t,a){"use strict";var i={Rubric:1,Rubric_2:2,CenturySkills:3};t["a"]=i},7953:function(e,t,a){},"79c3":function(e,t,a){"use strict";a("9473")},"79d6":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"big-idea"},[a("a-row",{staticClass:"row-wrapper"},[a("a-col",{staticClass:"col-wrapper",attrs:{span:"20"}},[a("div",[a("div",{staticClass:"col-input-serach"},[a("a-input-search",{staticClass:"search-input",attrs:{placeholder:"Search",allowClear:!0},on:{search:e.searchTag},model:{value:e.inputTag,callback:function(t){e.inputTag=t},expression:"inputTag"}},[a("a-icon",{style:{fontSize:"16px",color:"#15c39a","margin-right":"5px"},attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),a("div",{staticClass:"description-wrapper"},[a("div",{staticClass:"description-list"},e._l(e.bigIdeaList,(function(t,i){return a("div",{key:i,class:{"description-item":!0,"kd-active-item":e.selectedBigIdea===t},on:{click:function(a){return e.selectBigIdea(t)}}},[a("span",{staticClass:"tag-title"},[e._v(e._s(t.inquiry))]),e._l(t.inquiryKeywords,(function(t,i){return a("div",{key:"inquery_keyword_"+i,staticClass:"inquiry-keyword-item"},[a("a-tag",{attrs:{color:"green"}},[e._v(e._s(t))])],1)}))],2)})),0)])])])],1),a("a-spin",{directives:[{name:"show",rawName:"v-show",value:e.tagLoading,expression:"tagLoading"}],staticClass:"keyword-loading"}),a("a-spin",{directives:[{name:"show",rawName:"v-show",value:e.bigLoading,expression:"bigLoading"}],staticClass:"big-loading"})],1)},s=[],n=(a("4de4"),a("159b"),a("d3b7"),a("823b")),o=a("f736"),r=a("b3db"),l=a("82bf"),c=a("4fcf"),d=c.debounce,u={name:"BigIdeaBrowse",components:{TagBrowser:o["a"]},props:{},mounted:function(){},destroyed:function(){},computed:{showHotList:function(){var e=this;return this.subjectId?this.keywordHotList.filter((function(t){return-1!==e.keywordList.indexOf(t)})):this.keywordHotList}},data:function(){return{keywordList:[],keywordLetterList:[],keywordHotList:[],bigIdeaList:[],selectedKeywords:"",selectedBigIdea:"",tagLoading:!1,bigLoading:!1,visible:!0,inputTag:"",tagName:"",subjectTree:[],subjectList:[],subjectNames:[],selectSubject:"",conceptList:[],selectedConcept:[],alphabet:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}},created:function(){this.debouncedSearchKnowledge=d(this.searchTag,500),this.QueryBigIdea()},watch:{},methods:{queryBigIdeaKeywords:function(e){this.selectedKeywords=e,this.QueryBigIdea()},getLettersList:function(){var e=this;this.keywordLetterList=[],this.alphabet.forEach((function(t){var a={};a.letter=t,a.content=e.keywordList.filter((function(e){return e[0].toUpperCase()===t})),0!==a.content.length&&e.keywordLetterList.push(a)})),n["info"]("keywordLetterList ",this.keywordLetterList)},QueryBigIdea:function(){var e=this;this.bigLoading=!0;var t={};this.inputTag&&(t.keywords=this.inputTag),Object(l["d"])(t).then((function(t){e.$logger.info("QueryNewBigIdea response",t.result),t.success&&(e.bigIdeaList=t.result)})).finally((function(){e.bigLoading=!1}))},queryTagsBySubjectIds:function(){var e=this;this.$logger.info("queryTagsBySubjectIds"),Object(r["QueryTagsBySubjectIds"])({mainSubjectId:this.subjectId}).then((function(t){e.$logger.info("queryTagsByMainSubjectId response",t.result),t.success&&(e.conceptList=t.result["Universal Concept"],e.keywordList=t.result["Key words"])})).finally((function(){e.getLettersList()}))},selectBigIdea:function(e){this.selectedBigIdea=e,this.$emit("handle-select",e)},handleAddUserTag:function(e,t){},searchTag:function(){n["info"]("tag searchTag",this.inputTag),this.QueryBigIdea()},handleSelectSubject:function(e){this.selectSubject=e,this.subjectNames=[e],this.QueryBigIdea()}}},h=u,p=(a("6691"),a("0c7c")),m=Object(p["a"])(h,i,s,!1,null,"d9423d1a",null);t["a"]=m.exports},"7aa6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAABWlJREFUWEfVmX9MHFUQx7/THvGuLaAUKNge7Qnyo9IgAYUWjNo0NipEaqgl0QQbDOgfNcFEA4l/mNSERhJJ1Kgl4o9EE6pVUUi1ptLGKumlJaQttaAVECilSLFAhSP8eGaWXXK3t3e7e3do+/7Zy723bz47b2bevHmEIJoQIg9AAYAkAHEANshPnnUYwKD87ALwPRH9Eqg4MvuiEOJBAM/KgNEm3x8F0ALgA7PQhkGFECkADgAoUuB6pyfw3bU+tE+OYGR2CkMzU9KTW2zYKtita7DWYsX9EXF4JCoBDluE+3c1Aagiom4jH6sLKoSwAqgD8BwAyz/zs6gf6kTj1d/Q65owImNpjMMagZJ1ySi/Mx2rV4bx/3OsXQCVROTyN5lfUCEE293XAHLnxAI+Gb6Iuv4OjMxOmwJUD44Ns6EyIROlcWmw0AruPgVgFxGxXWs2n6BCiAzZnjb0uybxzK9H0TX1d1CA6pdTV92BTzfvRII1nLvY8QqI6KyWEE1QGfJnAGuc48Mo6zoWtBZ9fSFrtyF1B3IiefFwA0C+FqwXqLzcpznUNI/2oLy7FfNChFST6slWEqE+ZTsKo+/irj4AW9Vm4AEqO85xtknWZFFny7JDKtAM25ReoGiWV/NhImJnk5oa9D0Az7NNPnb2m2Vbbn9mcCTjCcVm3yeiF7xAhRCpAM7PiQXL9o6vQu44Rm2HHaw180mOBqzNNCK65KFRIQSHoaKGKxdQ/Ueb0XkDHsdLzaFpZmHea47axHyUxqfx/01EtGsJVN4WT3AwzzlzaNmXvCohGy/aMyTQhqELqO7xVAxHAmf2HmVTyCUip2SjQoiPeP+uG+hAzZ9nAtaSkRf3O3JRsX6Lx9Dyrh/RNNrj8V/1xmxU2jP5v4+JaC8JISwArgCIZm2a3RaNwCljtCC5782BDhxQKSjJdjvasnZz9ygRxTBoPoCTnGDktB8yI9fUWF+QPElx5xH8dP2y13zOrD1KIvMAg9ZwFvPu4Dm81uc0JdzoYH+Q/uTud2xFxfp0FvM6g37BH1V28Riar/UalW14nD/I+svn8Wov5yParXCtAw1pO7jzMIOe5P218Ny3cE5c1XyjOCZJSs04lLDDtV7n/EG/BQPJs2+LjEfTFj5A4ASDsho3ZZ1uxMDMpJd0t8FSH6d75V2taNHRfrCQLMt+Wzja7yvhn30Mysml1d72oWbwrdqYjZcWw8RS04MNBSQLW73Cgt5te/nnDV3QkthkvJXMxyTP5gs2VJBaoH6Xnre6L9Mfl+xFDzaUkFpLr+tMvASN9zyqpGCaZpATsc5rx1EG6nm3L7dUO5Oh8OQP1p//BwrJc6rDk+GAbxY2GEgGVQd8eQsdR07757rB0ShssJAM4sx6Cg5bJP+UtlDTSYkebCggvZISxlXSPK0sxpeKfcGGApJlusXvxTRPBn0IwHGziTPD1iTmSdUP3l7f6G/H24Oax3Jdk3IfoEqc+UR6aulwt3QU0ci49aQwsEvMh+zEWpuYh9L4zSzW8ygia/XWONzJsDfTcfkdItqnrOatWYCQtcpFoJu7pKOoWQhxL5+j/qciGXt5p9qB/ZUdGbaZi2X/UdmRi2OFWpAMbaqQ+9lwtxQr/wqykBsTZsMrCVl4Oi5FKeRyUWx3QIVcNzPwKo0fHOrE4ZHfcWl6XC/EevQn2SJRHHs3KrxL4/vcK3dak+rW8N2A+Yqm1vOyYRw/jPVLh8KxORcGXJMYm10sxUeFWWG3hiPKYgXnqouXDVKCoTS+bHhZKYLpfbFhUDdgzrbKgry+Ocjboh6ce79pUPeX5SrLTgC8q/Gd0yb5ycP4TokdhJ98IXaUiNgWA2r/AqKY1RuF7jn8AAAAAElFTkSuQmCC"},"7b6b":function(e,t,a){"use strict";a("f637")},"7eee":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"common-link"},[i("div",{staticClass:"link-group-wrapper"},[e.ownerLinkGroupList.length&&!e.linkGroupLoading?e._l(e.ownerLinkGroupList,(function(t,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:!(e.hiddenEmptyGroup&&0===t.contents.length),expression:"!(hiddenEmptyGroup && linkGroup.contents.length === 0)"}],key:a,staticClass:"link-group"},[i("div",{staticClass:"group-item"},[i("div",{staticClass:"group-header"},[i("div",{staticClass:"group-left-info"},[i("div",{staticClass:"group-name"},[i("div",{staticClass:"group-name-text"},[e._v(" "+e._s(t.group)+" ")])])]),i("div",{staticClass:"group-right-info"},[i("div",{staticClass:"group-action"},[i("a-button",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],style:{"background-color":"#fff",color:"#000",border:"none"},attrs:{type:"primary"},on:{click:function(a){return e.handleLinkGroup(t)}}},[i("div",{staticClass:"btn-text",staticStyle:{"line-height":"20px"}},[e._v(" + Link ")])])],1)])]),i("div",{staticClass:"group-body"},[i("draggable",{attrs:{group:"site",animation:"300",disabled:!e.canEdit},on:{end:e.handleDragEnd},model:{value:t.contents,callback:function(a){e.$set(t,"contents",a)},expression:"linkGroup.contents"}},[i("transition-group",e._l(t.contents,(function(t){return i("div",{key:t.id,staticClass:"group-link-item"},[i("div",{staticClass:"left-info",on:{click:function(a){return e.handleViewDetail(t)}}},[i("div",{staticClass:"icon"},[i("content-type-icon",{attrs:{type:t.type}})],1),i("div",{staticClass:"name"},[e.showDragTips?i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[e._v(" Click and drag content to change the order ")]),e._v(" "+e._s(t.name?t.name:"untitled")+" ")],2):e._e(),e.showDragTips?e._e():[e._v(" "+e._s(t.name?t.name:"untitled")+" ")]],2),t.type===e.typeMap.task?["fa"===t.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag green-active-task-type"},[e._v(" "+e._s(t.taskType)+" ")]):e._e(),"sa"===t.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag red-active-task-type"},[e._v(" "+e._s(t.taskType)+" ")]):e._e(),"activity"===t.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag blue-active-task-type"},[e._v(" "+e._s(t.taskType)+" ")]):e._e(),"ia"===t.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag blue-active-task-type"},[e._v(" "+e._s(t.taskType)+" ")]):e._e()]:e._e(),t.isCreated?i("div",{staticClass:"downloaded-icon"},[i("a-tooltip",{attrs:{placement:"top",title:"already saved in my content"}},[i("downloaded-svg")],1)],1):e._e()],2),i("div",{staticClass:"right-info"},[i("div",{staticClass:"date",on:{click:function(a){return e.handleViewDetail(t)}}},[e._v(e._s(e._f("dayjs")(t.createTime)))]),i("div",{staticClass:"status",on:{click:function(a){return e.handleViewDetail(t)}}},[0===t.status?[e._v("Draft")]:e._e(),1===t.status?[e._v("Published")]:e._e()],2),e.canEdit?i("div",{staticClass:"more-action-wrapper action-item-wrapper"},[i("a-dropdown",[i("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"more"}}),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("a-popconfirm",{attrs:{title:e.$t("teacher.my-content.action-delete")+"?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleDeleteLinkItem(t)}}},[i("a",{staticClass:"delete-action",attrs:{href:"#"}},[i("a-icon",{attrs:{type:"delete"}}),e._v(" "+e._s(e.$t("teacher.my-content.action-delete"))+" ")],1)])],1),i("a-menu-item",[i("a",{on:{click:function(a){return e.handleEditLinkItem(t)}}},[i("a-icon",{attrs:{type:"form"}}),e._v(" "+e._s(e.$t("teacher.my-content.action-edit"))+" ")],1)])],1)],1)],1):e._e()])])})),0)],1),0===t.contents.length?i("div",{staticClass:"no-link-group-contents"},[i("no-more-resources")],1):e._e()],1)])])})):e._e()],2),i("a-modal",{attrs:{footer:null,"dialog-style":{top:"10px"},destroyOnClose:"",width:"900px"},model:{value:e.selectLinkContentVisible,callback:function(t){e.selectLinkContentVisible=t},expression:"selectLinkContentVisible"}},[i("div",{staticClass:"my-modal-title",attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.linkTitle)+" ")]),i("div",{staticClass:"link-content-wrapper"},[i("task-new-my-content",{attrs:{"from-id":e.fromId,"from-type":e.fromType,"filter-type":e.subFilterType,"no-selected-tips":e.noSelectedTips,"selected-list":e.selectedList,"group-name":e.groupName},on:{cancel:function(t){e.selectLinkContentVisible=!1},ensure:e.handleEnsureSelectedLink}})],1)]),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",closable:!1,width:"800px",visible:e.previewVisible},on:{close:function(t){e.previewVisible=!1}}},[i("a-row",{staticClass:"preview-wrapper-row"},[i("a-col",{attrs:{span:"2"}},[i("div",{staticClass:"view-back",on:{click:function(t){e.previewVisible=!1}}},[i("div",{staticClass:"back-icon"},[i("img",{attrs:{src:a("217a")}})])])]),i("a-col",{attrs:{span:"22"}},[e.previewCurrentId&&e.previewType?i("div",{staticClass:"detail-wrapper"},[i("common-preview-no-link",{attrs:{id:e.previewCurrentId,type:e.previewType}})],1):e._e()])],1)],1)],1)},s=[],n=(a("a9e3"),a("d3b7"),a("159b"),a("7db0"),a("498a"),a("9afb")),o=a("9586"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-content"},[i("div",{staticClass:"create-new-action"},[i("div",{staticClass:"create-action"},[i("a-button",{attrs:{type:"primary",shape:"round",icon:"plus",loading:e.createLoading},on:{click:e.handleEnsureCreate}},[e._v(" Create New "+e._s(e.currentTypeLabel)+" ")])],1)]),i("div",{staticClass:"content-wrapper"},[i("a-skeleton",{attrs:{loading:e.skeletonLoading,active:""}},[i("div",{staticClass:"content-list"},["list"===e.dataListMode?i("a-list",{attrs:{size:"large",pagination:e.pagination,"data-source":e.myContentList,loading:e.loading},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("a-list-item",{key:"item.key",class:{"my-list-item":!0,"active-item":-1!==e.mySelectedList.indexOf(t.type+"-"+t.id),"active-new-item":t.id===e.editId},attrs:{"data-id":t.type+"-"+t.id}},[i("div",{staticClass:"select-block",on:{click:function(a){return e.handleLinkItem(t,a)}}},[-1===e.mySelectedList.indexOf(t.type+"-"+t.id)?i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):e._e(),-1!==e.mySelectedList.indexOf(t.type+"-"+t.id)?i("div",{staticClass:"selected-icon"},[i("img",{attrs:{src:a("7aa6")}})]):e._e()],1),i("span",{staticClass:"content-info-left"},[i("content-type-icon",{attrs:{type:t.type}}),i("span",{staticClass:"name-content"},[e.editId===t.id&&"input"===e.createNewNameMode?i("a-input",{ref:"inputRef",attrs:{size:"small",type:"text",placeholder:"Input name"},on:{blur:function(a){return e.handleConfirmName(t)},pressEnter:function(a){return e.handleConfirmName(t)}},model:{value:e.createNewName,callback:function(t){e.createNewName=t},expression:"createNewName"}}):i("a-tooltip",{attrs:{title:"Rename"}},[i("span",{staticClass:"name-text",on:{click:function(a){return e.handleRename(t)}}},[e._v(" "+e._s(t.name?t.name:"Untitled")+" ")])])],1)],1),i("span",{staticClass:"content-info-right"},[i("span",{staticClass:"status"},[0===t.status?[e._v("Draft")]:e._e(),1===t.status?[e._v("Published")]:e._e()],2),i("span",{staticClass:"update-time"},[e._v(" "+e._s(e._f("dayjs")(t.updateTime||t.createTime))+" ")]),i("div",{staticClass:"action"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item",on:{click:function(a){return e.handleViewDetail(t,a)}}},[i("span",{staticClass:"btn-text"},[e._v("Preview")])]),i("div",{staticClass:"action-item",on:{click:function(a){return e.handleEditItem(t)}}},[i("span",{staticClass:"btn-text"},[e._v("Edit")])])])])])])}}],null,!1,69311050)}):e._e(),"card"===e.dataListMode?i("a-list",{attrs:{size:"large",pagination:e.pagination,"data-source":e.myContentList,loading:e.loading},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("div",{key:"item.key",staticClass:"my-card-list-item"},[i("div",{staticClass:"cover-img-wrapper"},[i("div",{staticClass:"cover-image",style:{backgroundImage:"url("+t.image+")"}})]),i("div",{staticClass:"item-intro"},[i("div",{staticClass:"page-info"},[i("span",{staticClass:"page-num-tag"},[e._v(" 1/1 ")])]),i("div",{staticClass:"main-title",on:{click:function(a){return e.handleViewDetail(t,a)}}},[e._v(" "+e._s(t.name?t.name:"Untitled")+" ")]),i("div",{staticClass:"sub-title"},[e._v(" "+e._s(e._f("dayjs")(t.createTime))+" ")])]),i("div",{staticClass:"card-action-icon"},[-1!==e.mySelectedList.indexOf(t.type+"-"+t.id)?i("img",{attrs:{src:a("7aa6")}}):e._e()])])}}],null,!1,2926693872)}):e._e(),i("div",{staticClass:"modal-ensure-action-line"},[i("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:e.handleCancel}},[e._v("Cancel")]),i("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round",disabled:!e.mySelectedList.length,loading:e.ensureLoading},on:{click:e.handleEnsure}},[e._v("Ok")])],1)],1)]),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",width:"800px",closable:!1,visible:e.previewVisible},on:{close:e.handlePreviewClose}},[i("div",{staticClass:"preview-wrapper"},[i("a-row",{staticClass:"preview-wrapper-row"},[i("a-col",{attrs:{span:"3"}},[i("div",{staticClass:"view-back",on:{click:e.handlePreviewClose}},[i("div",{staticClass:"back-icon"},[i("img",{attrs:{src:a("217a")}})])])]),i("a-col",{attrs:{span:"21"}},[i("div",{staticClass:"detail-wrapper"},[e.previewCurrentId&&e.previewType?i("div",{staticClass:"preview-detail"},[i("common-preview-no-link",{attrs:{id:e.previewCurrentId,type:e.previewType}})],1):e._e()])])],1)],1)])],1)])},l=[],c=a("3835"),d=a("b85c"),u=a("1da1"),h=(a("96cf"),a("4ec9"),a("3ca3"),a("ddb0"),a("fb6a"),a("a434"),a("b0c0"),a("823b")),p=a("ea23"),m=a("7d7a"),g=a("3f76"),f=a("4803"),v=a("8f46"),y=a("4fb2"),b=a("69b3"),C=a("05be"),w=a.n(C),k=a("8d47"),T=a.n(k),L=a("9f06"),I=a("b199"),S=a("1449"),A={name:"NewMyContent",components:{CommonPreviewNoLink:S["a"],ContentStatusIcon:f["a"],ContentTypeIcon:v["a"],UnitPlanPreview:p["default"],MaterialPreview:m["default"],NoMoreResources:b["a"],PuBuIcon:w.a,ListModeIcon:T.a},props:{filterType:{type:Number,required:!0},selectedList:{type:Array,default:function(){return[]}},fromId:{type:String,required:!0},fromType:{type:Number,required:!0},groupName:{type:String,required:!0},noSelectedTips:{type:String,default:"Please select at least one content."}},data:function(){var e=this;return{skeletonLoading:!0,loading:!0,createLoading:!1,loadFailed:!1,myContentList:[],currentStatus:"all-status",currentStatusLabel:this.$t("teacher.my-content.all-status"),currentType:null,currentTypeLabel:null,currentOwner:"all-owner",currentOwnerLabel:this.$t("teacher.my-content.all-owner"),previewVisible:!1,previewCurrentId:"",previewType:"",pagination:{onChange:function(t){h["info"]("pagination onChange",t),e.pageNo=t,e.getMyContent()},showTotal:function(e){return"Total ".concat(e," items")},total:0,pageSize:10},pageNo:1,typeMap:g["e"],dataListMode:"list",createdType:"All",createNewName:"",createNewNameMode:"hide",mySelectedList:[],mySelectedMap:new Map,editId:"",ensureLoading:!1,waitAddAssociateMap:new Map,waitCancelAssociateMap:new Map}},created:function(){this.$logger.info("NewMyContent filterType",this.filterType),this.currentType=this.filterType,this.currentTypeLabel=Object(g["b"])(this.filterType),this.$logger.info("currentTypeLabel "+this.currentTypeLabel),this.$logger.info("NewMyContent selectedList",this.selectedList),this.mySelectedList=this.selectedList.slice(),this.getMyContent()},methods:{handleToggleDataListMode:function(e){this.$logger.info("handleToggleDataListMode"+e),this.dataListMode=e},getMyContent:function(){var e=this;this.loading=!0,Object(n["FindMyContent"])({owner:g["c"][this.currentOwner],types:[this.currentType],pageNo:this.pageNo,pageSize:this.pagination.pageSize,currentId:this.currentId}).then((function(t){h["info"]("getMyContent",t),t.result&&t.result.records&&t.result.records.length?(t.result.records.forEach((function(e,t){e.key=t})),e.myContentList=t.result.records,e.pagination.total=t.result.total):(e.myContentList=[],e.pagination.total=0),h["info"]("myContentList",e.myContentList)})).finally((function(){e.loading=!1,e.skeletonLoading=!1,e.$nextTick((function(){e.$refs.inputRef&&e.$refs.inputRef.focus()}))}))},handleLinkItem:function(e,t){h["info"]("handleLinkItem",e),t.preventDefault(),t.stopPropagation();var a=e.type+"-"+e.id,i=this.mySelectedList.indexOf(a);-1!==i?(this.mySelectedList.splice(i,1),this.waitCancelAssociateMap.set(a,e),this.waitAddAssociateMap.delete(a)):(this.mySelectedList.push(a),this.waitAddAssociateMap.set(a,e),this.waitCancelAssociateMap.delete(a))},handleViewDetail:function(e,t){h["info"]("my content created by me handleViewDetail",e,t),t.preventDefault(),t.stopPropagation(),this.previewCurrentId=e.id,this.previewType=e.type,this.previewVisible=!0},handleToggleSelect:function(e){h["info"]("handleToggleSelect",e)},handlePreviewClose:function(){h["info"]("handlePreviewClose"),this.previewCurrentId="",this.previewType="",this.previewVisible=!1},handleReferItem:function(e,t){h["info"]("handleReferItem",e),t.preventDefault(),t.stopPropagation(),y["b"].$emit(y["a"].ReferContentItem,{item:e})},handleToggleType:function(e){this.$logger.info("handleToggleType "+e),this.createdType=e,this.getMyContent()},handleToggleDisplayType:function(e){this.$logger.info("handleToggleDisplayType"+e),this.currentType===e?(this.currentType=null,this.currentTypeLabel=null):(this.currentType=e,this.currentTypeLabel=Object(g["b"])(e)),this.$logger.info("after handleToggleDisplayType"+this.currentType),this.getMyContent()},handleEnsureCreate:function(){var e=this;this.$logger.info("handleEnsureCreate "+this.currentType+" "+this.createNewName),this.createLoading=!0,this.createNewName="",this.currentType===this.typeMap.evaluation?Object(L["EvaluationAddOrUpdate"])({name:this.createNewName}).then((function(t){e.$logger.info("EvaluationAddOrUpdate response",t),e.editId=t.result.id,e.createNewNameMode="input";var a=e.typeMap.evaluation+"-"+e.editId;e.mySelectedList.push(a),e.waitAddAssociateMap.set(a,{id:e.editId,type:e.typeMap.evaluation}),e.getMyContent()})).finally((function(){e.createLoading=!1})):this.currentType===this.typeMap.task?Object(I["TaskAddOrUpdate"])({name:this.createNewName}).then((function(t){e.$logger.info("TaskAddOrUpdate response",t),e.editId=t.result.id,e.createNewNameMode="input";var a=e.typeMap.task+"-"+e.editId;e.mySelectedList.push(a),e.waitAddAssociateMap.set(a,{id:e.editId,type:e.typeMap.task}),e.getMyContent()})).finally((function(){e.createLoading=!1})):(this.$logger.info("handleEnsureCreate currentType is not supported"),this.$message.warn("handleEnsureCreate currentType is not supported"))},handleCancel:function(){this.$emit("cancel")},handleEnsure:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,i,s,o,r,l,u,h,p,m,g,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$logger.info("handleEnsure waitCancelAssociateMap",e.waitAddAssociateMap,"waitCancelAssociateMap",e.waitCancelAssociateMap),e.ensureLoading=!0,!e.waitCancelAssociateMap.size&&!e.waitAddAssociateMap.size){t.next=18;break}a={fromId:e.fromId,fromType:e.fromType,groupName:e.groupName,otherContents:[]},i=Object(d["a"])(e.waitAddAssociateMap);try{for(i.s();!(s=i.n()).done;)o=Object(c["a"])(s.value,2),r=o[0],l=o[1],-1===e.selectedList.indexOf(r)?a.otherContents.push({toId:l.id,toType:l.type}):e.$logger.info("handleEnsure waitAddAssociateMap item is selected skip "+r,l,e.selectedList)}catch(v){i.e(v)}finally{i.f()}u={fromId:e.fromId,fromType:e.fromType,others:[]},h=Object(d["a"])(e.waitCancelAssociateMap);try{for(h.s();!(p=h.n()).done;)m=Object(c["a"])(p.value,2),g=m[0],f=m[1],-1!==e.selectedList.indexOf(g)?u.others.push({toId:f.id,toType:f.type}):e.$logger.info("handleEnsure waitCancelAssociateMap item is no selected skip "+g,f,e.selectedList)}catch(v){h.e(v)}finally{h.f()}if(e.ensureLoading=!0,e.$logger.info("associate data",a),!a.otherContents.length){t.next=14;break}return t.next=14,Object(n["Associate"])(a);case 14:if(e.$logger.info("cancelAssociateData data",u),!u.others.length){t.next=18;break}return t.next=18,Object(n["AssociateCancel"])(u);case 18:e.ensureLoading=!1,e.$emit("ensure");case 20:case"end":return t.stop()}}),t)})))()},handleEditItem:function(e){h["info"]("handleEditItem",e),e.type===g["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+e.id,"_blank"):e.type===g["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+e.id,"_blank")},handleConfirmName:function(e){var t=this;this.createNewNameMode="hide",e.name!==this.createNewName&&(e.name=this.createNewName,Object(n["Rename"])({id:e.id,type:e.type,name:this.createNewName}).then((function(e){t.$logger.info("Rename response",e),e.success||t.$message.error(e.message)})))},handleRename:function(e){var t=this;this.editId=e.id,this.createNewNameMode="input",this.createNewName=e.name,this.$nextTick((function(){t.$refs.inputRef.focus()}))}}},x=A,_=(a("0e76"),a("0c7c")),D=Object(_["a"])(x,r,l,!1,null,"6a2ed480",null),O=D.exports,E=a("1077"),N=a.n(E),M=a("b76a"),j=a.n(M),R={name:"TaskLink",components:{NoMoreResources:b["a"],ContentTypeIcon:v["a"],TaskNewMyContent:O,MyContentSelector:o["a"],CommonPreviewNoLink:S["a"],draggable:j.a,DownloadedSvg:N.a},props:{fromType:{type:Number,required:!0},fromId:{type:String,required:!0},filterType:{type:Number,default:0},canEdit:{type:Boolean,default:!0},isLibrary:{type:Boolean,default:!1},hiddenEmptyGroup:{type:Boolean,default:!1},showDragTips:{type:Boolean,default:!0}},data:function(){return{defaultGroupName:"Untitled category",defaultGroupNameEditMode:"view",defaultGroupOtherContents:[],linkGroupLoading:!0,ownerLinkGroupList:[],subDefaultGroupName:["Untitled category"],noSelectedTips:"",currentGroupId:null,selectLinkContentVisible:!1,typeMap:g["e"],previewVisible:!1,previewCurrentId:"",previewType:"",subFilterType:null,selectedList:[],showCreate:!0,showTabs:!0,linkTitle:null,groupName:null}},created:function(){this.$logger.info("load TaskLink with id["+this.fromId+"] fromType["+this.fromType+"]"),this.getAssociate()},methods:{getAssociate:function(){var e=this;this.$logger.info("GetAssociate id["+this.fromId+"] fromType["+this.fromType+"]"),this.linkGroupLoading=!0,Object(n["GetAssociate"])({id:this.fromId,type:this.fromType,published:this.isLibrary?1:0}).then((function(t){if(e.$logger.info("TaskLink GetAssociate response",t),t.success){var a=t.result;e.ownerLinkGroupList=[],a.groups.forEach((function(t){e.ownerLinkGroupList.push({group:t.groupName,contents:[]}),t.editing=!1}));var i=[],s=[];a.owner.forEach((function(t){t.contents.forEach((function(t){t.type===e.typeMap["unit-plan"]?i.push(t):t.type===e.typeMap.evaluation&&s.push(t)}))}));var n=e.ownerLinkGroupList.find((function(e){return"Relevant Unit Plan(s)"===e.group}));n&&(n.contents=i);var o=e.ownerLinkGroupList.find((function(e){return"Linked assessment tool(s)"===e.group}));o&&(o.contents=s),e.ownerLinkGroupList=e.ownerLinkGroupList.sort((function(e,t){return-1!==e.group.indexOf("Unit Plan")?-1:1})),e.selectedList=[],e.ownerLinkGroupList.forEach((function(t){t.contents.forEach((function(t){e.selectedList.push(t.type+"-"+t.id)}))})),e.$logger.info("ownerLinkGroupList",e.ownerLinkGroupList)}else e.$message.error(t.message)})).finally((function(){e.linkGroupLoading=!1}))},handleEnsureSelectedLink:function(e){this.$logger.info("handleEnsureSelectedLink",e),this.selectLinkContentVisible=!1,this.getAssociate()},handleLinkGroup:function(e){this.$logger.info("handleLinkGroup",e),this.subDefaultGroupName=e.group,"Linked assessment tool(s)"===e.group.trim()?(this.subFilterType=g["e"].evaluation,this.linkTitle="Link Assessment tool(s)",this.groupName="Linked assessment tool(s)",this.noSelectedTips="No assessment rubric(s) selected",this.selectLinkContentVisible=!0):"Relevant Unit Plan(s)"===e.group.trim()?(this.subFilterType=g["e"]["unit-plan"],this.linkTitle="Link Unit Plan",this.groupName="Relevant Unit Plan(s)",this.noSelectedTips="No new Unit plan selected",this.selectLinkContentVisible=!0):(this.$logger.warn("handleLinkGroup unknown group",e),this.$message.warn("handleLinkGroup unknown group "+e))},handleToggleEditGroupName:function(e){var t=this;if(this.$logger.info("handleToggleEditGroupName",e),e.editing){e.editing=!1;var a=[];e.contents.forEach((function(e){a.push(e.id)})),Object(n["AddOrSaveGroupName"])({fromId:this.fromId,fromType:this.fromType,groupName:e.group,ids:a}).then((function(a){t.$logger.info("AddOrSaveGroupName",a),e.editing=!1}))}else e.editing=!0},handleViewDetail:function(e){h["info"]("handleViewDetail",e),this.previewCurrentId=e.id,this.previewType=e.type,this.previewVisible=!0},handleEditLinkItem:function(e){h["info"]("handleEditLinkItem",e),e.type===g["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+e.id,"_blank"):e.type===g["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+e.id,"_blank")},handleDeleteLinkItem:function(e){var t=this;this.$logger.info("handleDeleteLinkItem",e),Object(n["AssociateCancel"])({fromId:this.fromId,fromType:this.fromType,toId:e.id,toType:e.type}).then((function(e){t.$logger.info("handleDeleteLinkItem response ",e),t.getAssociate()}))},handleDragEnd:function(){var e=this;h["info"]("handleDragEnd ",this.ownerLinkGroupList),this.ownerLinkGroupList.forEach((function(t){var a=[];t.contents.forEach((function(e){a.push(e.id)})),Object(n["AddOrSaveGroupName"])({fromId:e.fromId,fromType:e.fromType,groupName:t.group,ids:a}).then((function(t){e.$logger.info("AddOrSaveGroupName",t)}))}))}}},B=R,P=(a("666c"),Object(_["a"])(B,i,s,!1,null,"1c31a9fc",null));t["a"]=P.exports},"81c4":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-row",{staticClass:"common-form-header"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.getters.hiddenHeader&&e.debounceHiddenHeader,expression:"$store.getters.hiddenHeader && debounceHiddenHeader"}],staticClass:"hover-bar",on:{mouseenter:e.handleMouseEnterOutHoverBar,mouseout:e.handleCancelBounce}}),i("a-col",{attrs:{span:"15"}},[i("a-space",[e.showBack?i("span",{staticClass:"back-icon"},[i("a-icon",{attrs:{type:"left"}})],1):e._e(),e.showBack?i("a-button",{staticClass:"nav-back-btn",attrs:{type:"link"},on:{click:e.handleBack}},[e._v(e._s(e.$t("teacher.add-lesson.back")))]):e._e(),i("span",[i("content-type-icon",{attrs:{type:e.form.type}})],1),e.form.type===e.typeMap.classSessionEvaluation?[i("div",{staticClass:"edit-form-name"},[i("div",{staticClass:"form-name"},[e._v(" "+e._s(e.form.className?e.form.className:"Untitled session")+" ")]),i("div",{staticClass:"class-name"},[e._v(" "+e._s(e.form.name?e.form.name:"Untitled className")+" ")])])]:e._e(),e.form.type===e.typeMap.evaluation?[i("div",{staticClass:"edit-form-name"},[i("div",{staticClass:"form-name"},[e.editFormNameMode?[i("a-input",{attrs:{maxLength:240},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnsureNewFormName.apply(null,arguments)},click:function(e){e.stopPropagation()}},model:{value:e.formName,callback:function(t){e.formName=t},expression:"formName"}})]:[e._v(e._s(e.form.name?e.form.name:"Untitled session"))]],2),i("div",{staticClass:"edit-icon",on:{click:function(t){t.stopPropagation(),e.editFormNameMode=!e.editFormNameMode}}},[i("img",{attrs:{src:a("5399"),alt:""}})])])]:e._e(),e.form.type!==e.typeMap.evaluation&&e.form.type!==e.typeMap.classSessionEvaluation?[e.lastChangeSavedTime?i("span",{staticClass:"unit-last-change-time"},[i("span",{staticClass:"unit-nav-title"},[e._v(" "+e._s(e.form.name?e.form.name:"Untitled")+" ")]),e.form.name?i("a-divider",{attrs:{type:"vertical"}}):e._e(),e._v(" "+e._s(e.$t("teacher.add-lesson.last-change-saved-at-time",{time:e.lastChangeSavedTime}))+" ")],1):e._e()]:e._e()],2)],1),i("a-col",{staticClass:"unit-right-action",attrs:{span:"9"}},[i("a-space",[e.showCollaborate?[i("div",{staticClass:"collaborate-users"},[e._l(e.collaborateUserList,(function(t,a){return a<5?i("div",{key:a,class:{"item-avator":!0,gray:-1===e.onlineUsers.indexOf(t.email)},style:{"z-index":1e3-a}},[i("a-tooltip",{attrs:{title:e.formatOnlineEmail(t.email),placement:"bottom"}},[i("a-badge",{attrs:{color:"green"}},[i("a-avatar",{staticClass:"user-item",attrs:{size:30,src:t.userAvatar}})],1)],1)],1):e._e()})),i("a-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.collaborateUserList.length>5,expression:"collaborateUserList.length > 5"}],attrs:{overlayStyle:{"z-index":"3000"}}},[i("a",{staticClass:"ant-dropdown-link",staticStyle:{"font-size":"16px","margin-left":"15px"}},[e._v(" +"+e._s(e.collaborateUserList.length-5)+" ")]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},e._l(e.collaborateUserList,(function(t,a){return a>4?i("a-menu-item",{key:a},[i("a-avatar",{class:{"user-item":!0,gray:-1===e.onlineUsers.indexOf(t.email)},attrs:{size:"small",src:t.userAvatar}}),e._v(" "+e._s(t.userName)+" ")],1):e._e()})),1)],1)],2),i("a-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.isOwner,expression:"isOwner"}],attrs:{placement:"bottom",title:"Collaborate"}},[i("div",{staticClass:"collaborate-comment",on:{click:e.handleStartCollaborate}},[i("collaborate-user-icon",{staticClass:"active-icon"})],1)]),e.isOwner||e.isEditCollaborater?i("div",{staticClass:"collaborate-comment",on:{click:e.handleViewComment}},[i("comment-icon",{staticClass:"active-icon"})],1):e._e()]:e._e(),i("a-button",{directives:[{name:"show",rawName:"v-show",value:e.showShare&&(e.isOwner||e.isEditCollaborater),expression:"showShare && (isOwner || isEditCollaborater)"}],staticClass:"my-form-header-btn",on:{click:e.handleSharing}},[i("div",{staticClass:"btn-icon"},[i("a-icon",{style:{fontSize:"16px",color:"#15c39a"},attrs:{type:"share-alt"}})],1),i("div",{staticClass:"btn-text"},[e.isShare?[e._v(" Sharing ")]:[e._v(" Share ")]],2)]),i("a-button",{directives:[{name:"show",rawName:"v-show",value:e.isOwner||e.isEditCollaborater,expression:"isOwner || isEditCollaborater"}],staticClass:"my-form-header-btn",attrs:{loading:e.saving},on:{click:e.handleSave}},[i("div",{staticClass:"btn-icon"},[i("img",{attrs:{src:a("4551")}})]),i("div",{staticClass:"btn-text",attrs:{"data-isOwner":e.isOwner+"","data-isEditCollaborater":e.isEditCollaborater+""}},[e._v(" Save ")])]),e.isOwner&&0===e.form.status&&e.form.type!==e.typeMap.classSessionEvaluation?i("a-button",{staticClass:"my-form-header-btn",attrs:{loading:e.publishing},on:{click:function(t){return e.handlePublish(1)}}},[i("div",{staticClass:"btn-icon"},[i("img",{attrs:{src:a("f7b2")}})]),i("div",{staticClass:"btn-text",attrs:{"data-isOwner":e.isOwner+"","data-form-status":e.form.status+""}},[e._v(" Publish ")])]):e._e(),e.isOwner&&1===e.form.status?i("a-button",{staticClass:"my-form-header-btn",attrs:{loading:e.publishing},on:{click:function(t){return e.handlePublish(0)}}},[i("div",{staticClass:"btn-icon"},[i("a-icon",{style:{fontSize:"16px",color:"#15c39a"},attrs:{theme:"filled",type:"down-square"}})],1),i("div",{staticClass:"btn-text",attrs:{"data-isOwner":e.isOwner+"","data-form-status":e.form.status+""}},[e._v(" Unpublish ")])]):e._e()],2),e.allowHiddenHeader?i("div",{staticClass:"hidden-top-header",style:{"background-color":(e.hiddenHeader,"#fff")}},[i("div",{staticClass:"hidden-toggle",on:{click:e.toggleHiddenHeader}},[e.hiddenHeader?[i("a-icon",{style:{fontSize:"16px",color:"#182552"},attrs:{type:"caret-down"}})]:e._e()],2)]):e._e()],1)],1)},s=[],n=(a("cd17"),a("ed3b")),o=a("5530"),r=(a("a9e3"),a("c740"),a("99af"),a("b0c0"),a("a434"),a("4de4"),a("a903")),l=a.n(r),c=a("09cf"),d=a.n(c),u=a("8f46"),h=a("3f76"),p=a("49cf"),m=a.n(p),g=a("2f62"),f=a("9fb0"),v=a("4fcf"),y=v.debounce,b={name:"CommonFormHeader",components:{CommentIcon:l.a,ContentTypeIcon:u["a"],EditIcon:m.a,CollaborateUserIcon:d.a},props:{form:{type:Object,default:function(){return null}},collaborate:{type:Object,default:function(){return null}},lastChangeSavedTime:{type:String,default:""},showCollaborate:{type:Boolean,default:!0},showBack:{type:Boolean,default:!0},shareStatus:{type:Number,default:0},showShare:{type:Boolean,default:!0},isPreviewMode:{type:Boolean,default:!1}},data:function(){return{publishing:!1,saving:!1,typeMap:h["e"],editFormNameMode:!1,formName:"",collaborateUserList:[],owner:{},isShare:!1,onlineUsers:[this.$store.getters.userInfo.email],debounceHiddenHeader:null}},computed:Object(o["a"])(Object(o["a"])({isOwner:function(){return this.$store.getters.userInfo.email===this.form.createBy},isCollaborater:function(){var e=this,t=this.collaborateUserList.findIndex((function(t){return t.email===e.$store.getters.userInfo.email}));return t>-1},isEditCollaborater:function(){var e=this,t=this.collaborateUserList.findIndex((function(t){return t.email===e.$store.getters.userInfo.email}));return t>-1&&"Edit"===this.collaborateUserList[t].permissions}},Object(g["e"])({removedCollaborate:function(e){return e.websocket.removedCollaborate},hiddenHeader:function(e){return e.app.hiddenHeader}})),{},{allowHiddenHeader:function(){return this.$route.meta.allowHiddenHeader}}),watch:{collaborate:function(e){this.owner=e.owner;var t=[this.$store.getters.userInfo.email].concat(e.onlineEmails);this.onlineUsers=t,this.formatUserList(e.users)},shareStatus:function(e){this.isShare=1===e},removedCollaborate:function(e){var t=this;e&&e.indexOf(this.form.id)>-1&&n["a"].error({title:"Alert",content:"You have been removed from the collaborating list of "+this.form.name,okText:"Ok",mask:!0,onOk:function(){t.$router.push({path:"/teacher/main/created-by-me"})}});var a=this.collaborate.users.findIndex((function(e){return e.email===t.$store.getters.userInfo.email}));a>-1&&this.collaborate.users.splice(a,1),this.removedCollaborateAction(!1)}},created:function(){this.$logger.info("form header name:"+this.form.name+" lastChangeSavedTime:"+this.lastChangeSavedTime),this.form&&this.form.name&&(this.formName=this.form.name),this.debounceHiddenHeader=y(this.toggleHiddenHeader,500)},methods:Object(o["a"])(Object(o["a"])({handleMouseEnterOutHoverBar:function(){this.debounceHiddenHeader()}},Object(g["b"])(["removedCollaborateAction"])),{},{formatUserList:function(e){var t=this,a=[];this.owner&&(a=[{userName:this.owner.nickname,userAvatar:this.owner.avatar,email:this.owner.email}]),e&&(a=a.concat(e.filter((function(e){return t.onlineUsers.indexOf(e.email)>-1&&e.email!==t.owner.email}))),a=a.concat(e.filter((function(e){return-1===t.onlineUsers.indexOf(e.email)&&e.email!==t.owner.email})))),this.collaborateUserList=a},handleBack:function(){this.$logger.info("handleBack"),this.isPreviewMode?this.$emit("back"):(this.isOwner,this.$router.push({path:"/teacher/main/created-by-me"}))},handleSave:function(){this.saving=!0,this.$logger.info("handleSave"),this.$emit("save")},handlePublish:function(e){this.publishing=!0,this.$logger.info("handlePublish"),this.$emit("publish",e)},handleStartCollaborate:function(){this.$logger.info("handleStartCollaborate"),this.$emit("collaborate")},handleViewComment:function(){this.$emit("view-collaborate")},handleEnsureNewFormName:function(){if(this.$logger.info("handleEnsureNewFormName "+this.form.name),this.editFormNameMode=!1,this.formName&&this.formName!==this.form.name){var e=Object.assign({},this.form);e.name=this.formName,this.$emit("update-form",e)}this.$logger.info("editFormNameMode "+this.editFormNameMode)},handleSharing:function(){this.sharing=!0,this.$logger.info("handleSharing"),this.$emit("share")},formatOnlineEmail:function(e){return e===this.form.createBy?"Owner: "+e:e},toggleHiddenHeader:function(){this.$logger.info("toggleHiddenHeader"),this.$store.commit(f["j"],!this.$store.getters.hiddenHeader)},handleCancelBounce:function(){this.$logger.info("handleCancelBounce"),this.debounceHiddenHeader.cancel()}})},C=b,w=(a("9bc1"),a("0c7c")),k=Object(w["a"])(C,i,s,!1,null,"b4133aa6",null);t["a"]=k.exports},"82a3":function(e,t,a){"use strict";a("b07f")},"82bf":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return c}));var i=a("b775"),s={GetLinkCategory:"/classcipe/api/v2/mycontent/getLinkCategory",AddOrUpdateLinkCategory:"/classcipe/api/v2/mycontent/addOrUpdateLinkCategory",QueryTagsByIds:"/classcipe/api/v2/mycontent/queryTagsByIds",DeleteLinkCategory:"/classcipe/api/v2/mycontent/deleteLinkCategory",QueryCustomTags:"/classcipe/api/v2/mycontent/queryCustomTags",ImportOtherIdentityContent:"/classcipe/api/v2/mycontent/importOtherIdentityContent",UpdateContentField:"/classcipe/api/v2/mycontent/updateContentField",ContentBuy:"/classcipe/api/v2/mycontent/content/bye",QueryNewBigIdea:"/classcipe/api/v2/mycontent/queryNewBigIdea"};function n(e){return Object(i["d"])({url:s.QueryTagsByIds,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(i["d"])({url:s.QueryCustomTags,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(i["d"])({url:s.ImportOtherIdentityContent,method:"post",data:e})}function l(e){return Object(i["d"])({url:s.ContentBuy,method:"post",data:e})}function c(e){return Object(i["d"])({url:s.QueryNewBigIdea,method:"post",data:e})}},"82f8c":function(e,t,a){"use strict";a("0136")},"836b":function(e,t,a){"use strict";a("8fe4")},"83d7":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAAAAXNSR0IArs4c6QAABFVJREFUSEvVV19oW1UY//1O7k3btVuStndz3bAbIlqngqWT4dquxU0dMnAIFVEfOm1r53yosD74sFAVHSIKss2lFeaDjtEHcSBjIJK2aR+EysCJTETpUFdmbtdmmnZtkvPJTZo0mzdbyqrgebqc7/t+v+985/tzLrGCy//1kVrTa54W8AECKg/aFuA8oD6wJ9ecQVtbijnheMi0tLdK5hIPg7pGwDUUXtBInLui/5hEa1/yVj5WjYR6FdVhQJZwl4wEgnmB7rGbXz6eVrCGT9wNT+JV0bIX5FoCzj4F0IRMCXASNN63G1+8dDNya/j4M1DqUwBGQT1BDIZqYHVkoIWUd0WwjkAZgNUASnOGpEB0CoLzmuieaur6piDo94Nea3qmF5CHBMyEmlAU2QZwbdZOiPdYNRJ6ShR/UrPz0zTVWhhmvQB7CbQCKF9yABoiEwLVZjd1fFuQfDDorSmrMbB+SSMRlz1Q6lSOWOQcEQ4aGIJGX58gGCRaWpSFH0q1Ye5VgjdAbMojEQEuJJXaPbP9pYu3uvOs3Dc8sNmr5Jc8/ctuSZCRj4fMyji3KoWTBGqvPzlOR2fkeezpml3cpy9yzB9Lls2htf3ajQ4FIqE7DTDfUbswsWM9OOix1l/dJdCfEajMhQpIiGbP1I6Oo1b4aIUYZguAXiRTh+zW7qHbJ3YQwkGj2lPTQ/LtG7L1EgX7tMILFDzpJOWCknti27t+XhliADXjoVWJOX4BYFf+fQOYAVABwAQwH03+XuFW7+6hlqDyja7zOYCxxssxsE+7JU1l+Ng2j8czBLLETe4knd3UWecmcyX2j33cbGr9VrphUA7ZjV3hG4zTieMR9aiCGiDhd89mfh5t6ni6aGJrpP87ULY4lS6CH+2mzi3OZxogFDKr71MPAjoIsImAExn3hCTeiTZ2vl48caTf6cGetAGhoxvMcmzOlET16PEGQp0SLbUkC7dBAFqhfWp75yfLIc6cbnFFy6QcDZn6DHwV8hleHIBiG0Q2iOJqCrxu4MlUsnm6ZX9kRYgdkE3hE6V/eRYCJO6CYB9Ip2arF9tpdvTJtfkF68+dB6ZWjDgHJEJr6Fg5SkruQELXi2I3oe8F4BNw2m7s2AhnoLgs16y2Iv0FQ+2evZmOtmbjVZ83JZtF5DFCDLu5681C+itHnM9w5sOSjf6k+u2R1+b+W+KCYVkS/Dsn/v8Tz8Yq8PjBeBEHKVrFP3ak1tTeiTwDm1YkNAvQeWul12yJuT4+UR4tGrUIxcCGq3WG1uezqkJepBXpd95P9blN8CMy9SWgXGuyCJ7rVISikOKzJJ7L6wlnWT06cJCQw5DcAzwFII7FObFcon/qp2eKM7OzXU5rsJ2B8ZDPmOMIiPvzyG+fzx1BCzBsB/xPpN2pGh6oo9L9BLelPbv5S2z5TmUuTQM8m9IL+6/seOXXHIUzibiKOz0aW52fi+WjF7bQWiaVh2PReGwkWzF/Ay535VYy6arNAAAAAElFTkSuQmCC"},8480:function(e,t,a){},"870d":function(e,t,a){},8757:function(e,t,a){},8791:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("159b"),a("b0c0");function i(e){return e.forEach((function(e){e.label=e.name,e.value=e.id,e.children&&e.children.length&&(e.children=i(e.children))})),e}},"87a2":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comment-switch",on:{click:function(t){return e.handleClickSwitch(t)}}},[a("a-icon",{attrs:{type:"message"}})],1)},s=[],n=a("96ee"),o=a.n(n),r={name:"CommentSwitch",components:{MessageIcon:o.a},props:{fieldName:{type:String,required:!0},isActive:{type:Boolean,required:!1}},data:function(){return{activeStatus:this.isActive}},watch:{isActive:function(e){this.activeStatus=e}},methods:{handleClickSwitch:function(e){this.$logger.info("handleClickSwitch",this.activeStatus),this.activeStatus=!this.activeStatus;var t={fieldName:this.fieldName,activeStatus:this.activeStatus};this.$logger.info("event data",t),this.$emit("switch",t),e.stopPropagation(),e.preventDefault()}}},l=r,c=(a("30f4"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,"3dcaae00",null);t["a"]=d.exports},"87b4":function(e,t,a){"use strict";a("a67b")},"8a41":function(e,t,a){"use strict";a.r(t),a.d(t,"SkillLibraryEventBus",(function(){return s})),a.d(t,"SkillLibraryEvent",(function(){return n}));var i=a("2b0e"),s=new i["a"],n={SkillContentListUpdate:"SkillContentListUpdate",SkillContentListItemClick:"SkillContentListItemClick",SkillContentListSelectClick:"SkillContentListSelectClick",SkillContentListSelectedListUpdate:"SkillContentListSelectedListUpdate"}},"8aa2":function(e,t,a){},"8b49":function(e,t,a){"use strict";a("023b")},"8bab":function(e,t,a){},"8c95":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"associate-preview"},[i("a-row",{staticClass:"bottom-relative"},[i("a-col",{staticClass:"content-type-filter",attrs:{span:"24"}},[i("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.handleUserTypeChange},model:{value:e.activeUserType,callback:function(t){e.activeUserType=t},expression:"activeUserType"}},[i("a-radio-button",{staticClass:"left-button",attrs:{value:"owner"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-owner"))+" ")]),i("a-radio-button",{staticClass:"right-button",attrs:{value:"others"}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.by-others"))+" ")])],1),i("div",{staticClass:"content-type-list"},[i("div",{staticClass:"toggle-mode-type-wrapper"},[i("div",{staticClass:"toggle-mode-type"},[i("div",{staticClass:"toggle-mode"},[i("div",{class:{"mode-item":!0,"skill-active-mode":e.activeContentType===e.typeMap.task},on:{click:function(t){return e.handleSelectContentType(e.typeMap.task)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.task"))+" ")]),i("div",{class:{"mode-item":!0,"general-active-mode":e.activeContentType===e.typeMap.evaluation},on:{click:function(t){return e.handleSelectContentType(e.typeMap.evaluation)}}},[e._v(" "+e._s(e.$t("teacher.unit-plan-preview.evaluation"))+" ")])])])])])],1),i("a-col",{staticClass:"created-toggle",attrs:{span:"24"}},[i("div",{staticClass:"toggle-view-type"},[i("div",{staticClass:"switch-icon"},[i("div",{class:{"icon-item":!0,"active-icon":"list"===e.dataListMode},on:{click:function(t){return e.handleToggleDataListMode("list")}}},[i("list-mode-icon")],1),i("div",{class:{"icon-item":!0,"active-icon":"card"===e.dataListMode},on:{click:function(t){return e.handleToggleDataListMode("card")}}},[i("pu-bu-icon")],1)])])])],1),i("a-row",[i("a-col",{attrs:{span:"24"}},[i("div",{staticClass:"associate-info"},["list"===e.dataListMode?e._l(e.currentAssociateList,(function(t,s){return t.type===e.activeContentType?i("div",{key:s,staticClass:"associate-block-list"},[i("div",{staticClass:"question-item list-question-item"},[i("div",{class:{"list-item":!0,"browser-item":!0,"odd-line":s%2===0}},[i("div",{staticClass:"item-name"},[i("dir-icon",{attrs:{"content-type":t.type}}),i("span",{staticClass:"data-name",on:{click:function(a){return e.handleClickTitle(t)}}},[e._v(" "+e._s(t.name?t.name:"Untitled")+" ")])],1),i("div",{staticClass:"arrow-item"},[i("span",{staticClass:"data-time"},[e._v(" "+e._s(e._f("dayjs")(t.updateTime||t.createTime))+" ")]),i("div",{staticClass:"edit-item-icon",on:{click:function(a){return e.handleEditItem(t.type,t)}}},[i("img",{attrs:{src:a("ae3c")}})]),i("div",{staticClass:"star-it",on:{click:function(a){return e.handleFavorite(t)}}},[t.createBy!==e.$store.getters.userInfo.email?[t.isFavorite?e._e():i("img",{attrs:{src:a("58e7")}}),t.isFavorite?i("img",{attrs:{src:a("24e3")}}):e._e()]:e._e()],2),i("div",{staticClass:"edit-it",on:{click:function(a){return e.handleEditItem(t.type,t)}}},[i("a-icon",{attrs:{type:"more"}})],1)])])])]):e._e()})):e._e(),"card"===e.dataListMode?[i("div",{staticClass:"associate-block-list associate-block-list-card"},e._l(e.currentAssociateList,(function(t,s){return t.type===e.activeContentType?i("div",{key:s,staticClass:"question-item card-question-item"},[i("div",{class:{"card-item":!0,"browser-item":!0,"odd-line":s%2===0}},[i("data-card-view",{attrs:{title:t.name,"update-time":t.updateTime,cover:t.image,"content-type":t.type}}),i("div",{staticClass:"card-action-item"},[i("div",{staticClass:"action-left"},[i("div",{staticClass:"edit-item-icon",on:{click:function(a){return e.handleEditItem(t.type,t)}}},[i("img",{attrs:{src:a("ae3c")}})]),t.createBy!==e.$store.getters.userInfo.email?[i("div",{staticClass:"star-it",on:{click:function(a){return e.handleFavorite(t)}}},[t.isFavorite?e._e():i("img",{attrs:{src:a("58e7")}}),t.isFavorite?i("img",{attrs:{src:a("24e3")}}):e._e()])]:e._e()],2),i("div",{staticClass:"action-right"},[i("div",{staticClass:"edit-it",on:{click:function(a){return e.handleEditItem(t.type,t)}}},[i("a-icon",{attrs:{type:"more"}})],1)])])],1)]):e._e()})),0)]:e._e()],2)])],1),i("a-row")],1)},s=[],n=(a("a9e3"),a("d3b7"),a("159b"),a("823b")),o=a("3f76"),r=a("8f46"),l=a("05be"),c=a.n(l),d=a("8d47"),u=a.n(d),h=a("6964"),p=a("faaa"),m=a("69b3"),g=a("95c6"),f=g.FavoritesAdd,v=a("9afb"),y=v.GetAssociate,b={name:"IsLibrary",props:{id:{type:String,required:!0},contentType:{type:Number,required:!0}},components:{NoMoreResources:m["a"],DirIcon:p["a"],DataCardView:h["a"],ContentTypeIcon:r["a"],PuBuIcon:c.a,ListModeIcon:u.a},data:function(){return{loading:!0,associateData:null,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:o["e"].task,activeUserType:"owner",currentAssociateList:[],typeMap:o["e"],previewType:"",dataListMode:"list"}},created:function(){n["info"]("Associate Preview id "+this.id),this.loadAssociateData()},methods:{loadAssociateData:function(){var e=this;n["info"]("loadAssociateData "+this.id+" "+this.contentType),this.loading=!0,y({id:this.id,type:this.contentType,published:this.isLibrary?1:0,preview:!0}).then((function(t){n["info"]("GetAssociate ",t),e.associateData=t.result,e.handleUserTypeChange()})).then((function(){n["info"]("get favorite "+e.id)})).finally((function(){e.loading=!1}))},handleToggleDataListMode:function(e){this.$logger.info("handleToggleDataListMode"+e),this.dataListMode=e},handleSelectContentType:function(e){n["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.previewType=null},handleUserTypeChange:function(){var e=this;n["info"]("handleUserTypeChange "+this.activeUserType);var t=this.associateData[this.activeUserType];this.currentAssociateList=[],t.forEach((function(t){t.contents&&t.contents.length&&t.contents.forEach((function(t){e.currentAssociateList.push(t)}))})),n["info"]("currentAssociateList",this.currentAssociateList)},handleClickTitle:function(e){n["info"]("handleClickTitle",e),this.previewType=o["e"]["unit-plan"]},handleSubPreview:function(e,t){n["info"]("handleSubPreview",e,t),this.previewType=o["e"]["unit-plan"]},handleFavorite:function(e){n["info"]("handleFavorite",e),f({sourceId:e.id,sourceType:e.type}).then((function(t){n["info"]("FavoritesAdd ",t),e.isFavorite=!e.isFavorite}))},handleEditItem:function(e,t){n["info"]("handleEditItem",e,t),t.type===o["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+t.id,"_blank"):t.type===o["e"].task?window.open("/teacher/task-redirect/"+t.id,"_blank"):t.type===o["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+t.id,"_blank")}}},C=b,w=(a("fa0b"),a("0c7c")),k=Object(w["a"])(C,i,s,!1,null,"3b8f30d4",null);t["a"]=k.exports},"8d47":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"27.909",viewBox:"0 0 28 27.909"},children:[{tag:"path",attrsMap:{id:"liebiao_","data-name":"liebiao ",class:"cls-1",d:"M62,62h6.932v6.93H62V62Zm10.279,0H90v6.93H72.279V62Zm0,10.326H90v7.208H72.279V72.326ZM62,72.326h6.932v7.208H62V72.326Zm0,10.558h6.932v7.024H62V82.885Zm10.279,0H90v7.024H72.279V82.885Z",transform:"translate(-62 -62)"}}]})}},"8e3a":function(e,t,a){},"8f46":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"status-icon-item"},[e.type===e.typeMap.task?a("span",[e._v("Task")]):e._e(),e.type===e.typeMap["unit-plan"]?a("span",[e._v("Unit")]):e._e(),e.type===e.typeMap.pd?a("span",[e._v("PD")]):e._e(),e.type===e.typeMap.video?a("span",[e._v("Video")]):e._e()])},s=[],n=(a("a9e3"),a("3f76")),o={name:"ContentTypeIcon",props:{type:{type:Number,default:-1},size:{type:String,default:"30px"}},data:function(){return{typeMap:n["e"]}}},r=o,l=(a("4133"),a("0c7c")),c=Object(l["a"])(r,i,s,!1,null,"a464ed10",null);t["a"]=c.exports},"8fe4":function(e,t,a){},"90e8":function(e,t,a){"use strict";var i={Edit:"edit",Preview:"preview",StudentEvaluate:"student-evaluate",TeacherEvaluate:"teacher-evaluate",PeerEvaluate:"peer-evaluate"};t["a"]=i},"91ff":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag-ui"},[a("a-col",[a("div",{staticClass:"objectives-wrapper"},[e.getknowledgeListType(e.TagType.skill).length>0?a("a-row",{staticClass:"objectives-wrapper-block"},[a("div",{staticClass:"title-item title-skill"},[e._v("Achievement objectives")]),e._l(e.getknowledgeListType(e.TagType.skill),(function(t,i){return a("div",{key:i,staticClass:"objectives-list"},[a("div",{staticClass:"objectives-list-item objectives-list-item-skill objectives-list-item-top-fixed"},[a("div",{staticClass:"skt-description"},[a("a-tooltip",{attrs:{title:t.path}},[t.key?a("span",{staticClass:"self-out-icon"},[a("a-icon",{attrs:{type:"user-add"}})],1):e._e(),e._v(" "+e._s(t.name)+" "),t.subjectId&&e.getSubjectName(t.subjectId)?a("span",{staticClass:"subject-name-tag"},[a("a-tag",{staticClass:"my-subject-name-tag"},[e._v(e._s(e.getSubjectName(t.subjectId)))])],1):e._e()]),e.bloomInfo(t.knowledgeId,"isExist")?a("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"skt-chart"},[a("div",{staticClass:"skt-chart-detail"},[a("label",[e._v("Bloom Taxonomy")]),a("a-rate",{staticClass:"rate-bar-con small",attrs:{tooltips:e.bloomLevelDesc,count:6,value:e.bloomInfo(t.knowledgeId,"bloomLevel"),disabled:""}},[a("div",{attrs:{slot:"character"},slot:"character"},[a("div",{staticClass:"rate-bar"})])])],1),a("div",{staticClass:"skt-chart-detail"},[a("label",[e._v("Knowledge dimension")]),e._l(e.bloomInfo(t.knowledgeId,"knowledgeLevel"),(function(i,s){return a("a-tag",{key:t.name+"bloom_tag"+s,staticClass:"tag-item",attrs:{color:"purple"}},[e._v(" "+e._s(i)+" ")])}))],2)]):e._e()],1)])])}))],2):e._e(),e.getknowledgeListType(e.TagType.knowledge).length>0?a("a-row",{staticClass:"objectives-wrapper-block"},[a("div",{staticClass:"title-item title-learnout"},[e._v("Learning outcomes")]),e._l(e.getknowledgeListType(e.TagType.knowledge),(function(t,i){return a("div",{key:i,staticClass:"objectives-list"},[a("div",{staticClass:"objectives-list-item objectives-list-item-learn objectives-list-item-top-fixed"},[a("div",{staticClass:"skt-description"},[a("a-tooltip",{attrs:{title:t.path}},[t.key?a("span",{staticClass:"self-out-icon"},[a("a-icon",{attrs:{type:"user-add"}})],1):e._e(),e._v(" "+e._s(t.name)+" "),t.subjectId&&e.getSubjectName(t.subjectId)?a("span",{staticClass:"subject-name-tag"},[a("a-tag",{staticClass:"my-subject-name-tag"},[e._v(e._s(e.getSubjectName(t.subjectId)))])],1):e._e()]),e.bloomInfo(t.knowledgeId,"isExist")?a("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"skt-chart"},[a("div",{staticClass:"skt-chart-detail"},[a("label",[e._v("Bloom Taxonomy")]),a("a-rate",{staticClass:"rate-bar-con small",attrs:{tooltips:e.bloomLevelDesc,count:6,value:e.bloomInfo(t.knowledgeId,"bloomLevel"),disabled:""}},[a("div",{attrs:{slot:"character"},slot:"character"},[a("div",{staticClass:"rate-bar"})])])],1),a("div",{staticClass:"skt-chart-detail"},[a("label",[e._v("Knowledge dimension")]),e._l(e.bloomInfo(t.knowledgeId,"knowledgeLevel"),(function(i,s){return a("a-tag",{key:t.name+"bloom_tag"+s,staticClass:"tag-item",attrs:{color:"purple"}},[e._v(" "+e._s(i)+" ")])}))],2)]):e._e()],1)])])}))],2):e._e(),e.getknowledgeListType(e.TagType.century).length>0?a("a-row",{staticClass:"objectives-wrapper-block"},[a("div",{staticClass:"title-item title-21"},[e.$store.getters.bindCurriculum===e.AllCurriculums.NZ?[e._v(" Key competencies ")]:e.$store.getters.bindCurriculum===e.AllCurriculums.AU?[e._v(" General capabilities ")]:[e._v(" 21st Century Skills ")]],2),e._l(e.getknowledgeListType(e.TagType.century),(function(t,i){return a("div",{key:i,staticClass:"objectives-list"},[a("div",{staticClass:"objectives-list-item objectives-list-item-21 objectives-list-item-top-fixed",on:{click:function(a){return e.handleActiveDescription(e.TagType.century,t)}}},[a("div",{staticClass:"skt-description skt-description-21"},[a("a-tooltip",{attrs:{title:t.path}},[t.key?a("span",{staticClass:"self-out-icon"},[a("a-icon",{attrs:{type:"user-add"}})],1):e._e(),e._v(" "+e._s(t.name)+" "),t.subjectId&&e.getSubjectName(t.subjectId)?a("span",{staticClass:"subject-name-tag"},[a("a-tag",{staticClass:"my-subject-name-tag"},[e._v(e._s(e.getSubjectName(t.subjectId)))])],1):e._e()]),e.bloomInfo(t.knowledgeId,"isExist")?a("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"skt-chart"},[a("div",{staticClass:"skt-chart-detail"},[a("label",[e._v("Bloom Taxonomy")]),a("a-rate",{staticClass:"rate-bar-con small",attrs:{tooltips:e.bloomLevelDesc,count:6,value:e.bloomInfo(t.knowledgeId,"bloomLevel"),disabled:""}},[a("div",{attrs:{slot:"character"},slot:"character"},[a("div",{staticClass:"rate-bar"})])])],1),a("div",{staticClass:"skt-chart-detail"},[a("label",[e._v("Knowledge dimension")]),e._l(e.bloomInfo(t.knowledgeId,"knowledgeLevel"),(function(i,s){return a("a-tag",{key:t.name+"bloom_tag"+s,staticClass:"tag-item",attrs:{color:"purple"}},[e._v(" "+e._s(i)+" ")])}))],2)]):e._e()],1),t.tagListVisible?a("a-divider",{staticStyle:{margin:"10px 0px"}}):e._e(),t.tagListVisible?a("div",{staticClass:"skt-description-tag-list"},e._l(t.tags,(function(i){return a("div",{key:i,class:{"tag-list-item":!0,"skill-mode":!0}},[a("a-tag",{staticClass:"tag-item",attrs:{closable:!0},on:{close:function(a){return e.handleDeleteTag(t,i)}}},[e._v(e._s(i))])],1)})),0):e._e()],1)])}))],2):e._e()],1)]),a("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px"},model:{value:e.addTagVisible,callback:function(t){e.addTagVisible=t},expression:"addTagVisible"}},[a("div",{staticClass:"my-modal-title",attrs:{slot:"title"},slot:"title"},[e._v(" Add tag ")]),a("learn-out-add-tag",{attrs:{knowledge:e.knowledge},on:{"handle-select-tags":e.handleEnsureTags}})],1),a("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"1000px",title:"Add tag"},model:{value:e.centuryTagVisible,callback:function(t){e.centuryTagVisible=t},expression:"centuryTagVisible"}},[a("div",{staticClass:"ensure-setting-modal"},[a("div",{staticClass:"tips"},[a("p",[e._v(" "+e._s(e.knowledge.name)+" ")])]),a("div",[e._l(e.centuryTagList,(function(t,i){return a("div",{key:i,staticClass:"row-cascader"},[a("a-cascader",{staticStyle:{width:"900px"},attrs:{fieldNames:{label:"name",value:"name",children:"children"},options:e.centuryList,"change-on-select":""},model:{value:e.centuryTagList[i],callback:function(t){e.$set(e.centuryTagList,i,t)},expression:"centuryTagList[index]"}}),e.centuryTagList.length>1?a("a-button",{attrs:{type:"link",icon:"minus",size:"large"},on:{click:function(t){return e.handleRemoveCenturyTag(i)}}}):e._e()],1)})),a("a-button",{attrs:{type:"link",icon:"plus-circle",size:"large"},on:{click:function(t){return e.handleAddCenturyTag()}}})],2),a("div",{staticClass:"modal-ensure-action-line-center"},[a("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:function(t){e.centuryTagVisible=!1}}},[e._v("Cancel")]),a("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:e.handleEnsureCenturyTags}},[e._v("Confirm")])],1)])])],1)},s=[],n=(a("ac1f"),a("1276"),a("d81d"),a("4de4"),a("7db0"),a("a630"),a("3ca3"),a("d3b7"),a("6062"),a("ddb0"),a("99af"),a("c740"),a("a434"),a("159b"),a("b0c0"),a("823b")),o=a("69b3"),r=a("214d"),l=a("f93e"),c=a("db6a"),d=a("2934"),u={name:"UiLearnOutSub",components:{LearnOutAddTag:r["a"],NoMoreResources:o["a"]},props:{learnOuts:{type:Array,default:function(){return[]}},selfOuts:{type:Array,default:function(){return[]}},classInfoList:{type:Array,default:function(){return[]}}},mounted:function(){},destroyed:function(){},computed:{dealPath:function(){return function(e){return e?e.split(">"):e}},bloomInfo:function(){var e=this;return function(t,a){if(!t||0===e.classInfoList.length)return null;var i=e.classInfoList.map((function(e){return e.data&&e.data.data?e.data.data:""})),s=i.filter((function(e){return e&&e.learnOuts&&e.learnOuts.length>0})),n=s.filter((function(e){return e.learnOuts.find((function(e){return e.knowledgeId===t}))})),o={knowledgeLevel:[],bloomLevel:0};return o.knowledgeLevel=Array.from(new Set(n.map((function(e){return e.knowledgeLevel})).filter((function(e){return""!==e})))),o.bloomLevel=n.map((function(t){var a=e.bloomLevel.find((function(e){return e.text===t.bloomLevel}));return a?parseInt(a.value):""})).filter((function(e){return""!==e})).sort().pop(),"isExist"===a?o.knowledgeLevel.length>0||o.bloomLevel>0:o[a]}},bloomLevelDesc:function(){return this.bloomLevel&&this.bloomLevel.length>0?this.bloomLevel.map((function(e){return e.title})):[]}},data:function(){return{knowledgeList:[],addTagVisible:!1,centuryTagVisible:!1,centuryTagList:[],knowledge:{},tags:[],TagType:l["T"],AllCurriculums:l["b"],centuryList:[],bloomLevel:[]}},created:function(){this.knowledgeList=this.learnOuts.concat(this.selfOuts),n["info"]("knowledgeList ",this.knowledgeList),this.get21century(),this.initData()},watch:{},methods:{initData:function(){var e=this;Object(d["a"])(l["k"]).then((function(t){t.success&&(n["info"]("DICT_BLOOM_TAXONOMY",t.result),e.bloomLevel=t.result)}))},handleActiveDescription:function(e,t){var a=this.knowledgeList.findIndex((function(e){return e.knowledgeId===t.knowledgeId}));this.knowledgeList[a].tagType!==l["T"].knowledge&&this.knowledgeList[a].tagType!==l["T"].century||(this.knowledgeList[a].tagListVisible?this.knowledgeList[a].tagListVisible=!1:this.knowledgeList[a].tagListVisible=!0,this.$set(this.knowledgeList,a,this.knowledgeList[a]),n["info"]("tagListVisible ",this.knowledgeList[a].tagListVisible))},handleDeleteTag:function(e,t){var a=this.knowledgeList.findIndex((function(t){return t.knowledgeId===e.knowledgeId}));this.knowledgeList[a].tags.splice(this.knowledgeList[a].tags.indexOf(t),1)},handleDeleteKnowledgeItem:function(e){var t=this.knowledgeList.findIndex((function(t){return t.knowledgeId===e.knowledgeId})),a=this.knowledgeList[t];this.knowledgeList.splice(t,1),this.$emit("remove-learn-outs",a)},handleAddTag:function(e){n["info"]("handleAddTag ",e),e.tagType===l["T"].knowledge?(this.knowledge=e,this.addTagVisible=!0):e.tagType===l["T"].century&&(this.knowledge=e,this.centuryTagList=[],this.centuryTagList.push([]),this.centuryTagVisible=!0)},handleEnsureSelectData:function(){this.addTagVisible=!1},handleEnsureTags:function(e){var t=this;this.knowledge.tags=e;var a=this.knowledgeList.findIndex((function(e){return e.knowledgeId===t.knowledge.knowledgeId}));this.knowledgeList[a].tagListVisible=!0},handleEnsureCenturyTags:function(){var e=this;n["info"]("handleEnsureCenturyTags ",this.centuryTagList),0!==this.centuryTagList[0].length?(this.centuryTagList.forEach((function(t){e.knowledge.tags||(e.knowledge.tags=[]),-1===e.knowledge.tags.indexOf(t[t.length-1])&&e.knowledge.tags.push(t[t.length-1]),n["info"]("this.knowledge.tags ",e.knowledge.tags)})),this.centuryTagVisible=!1,this.knowledge.tagListVisible=!0):this.$message.error("Please select tags")},handleRemoveCenturyTag:function(e){n["info"]("handleRemoveCenturyTag ",e),this.centuryTagList.splice(e,1)},handleAddCenturyTag:function(){this.centuryTagList.push([])},treeForeach:function(e,t){var a=this;e.forEach((function(e){e.children&&a.treeForeach(e.children,t),t(e)}))},get21century:function(){var e=this;Object(c["getAll21Century"])({}).then((function(t){e.$logger.info("getAll21Century response",t),t.success&&(e.centuryList=t.result,e.treeForeach(e.centuryList,(function(t){0===t.children.length&&(t.title=e.$options.filters["gradeFormat"](t.gradeNames))})))})).finally((function(){e.subTreeLoading=!1}))},getknowledgeListType:function(e){return e===l["T"].skill?this.knowledgeList.filter((function(e){return e.tagType===l["T"].skill||e.tagType===l["T"].ibSkill||e.tagType===l["T"].idu})):e===l["T"].century?this.knowledgeList.filter((function(e){return e.tagType===l["T"].century||e.tagType===l["T"].common})):this.knowledgeList.filter((function(t){return t.tagType===e}))},getSubjectName:function(e){var t=this.$store.getters.allSubjects.find((function(t){return t.id===e}));return t?t.name:null}}},h=u,p=(a("66d8"),a("0c7c")),m=Object(p["a"])(h,i,s,!1,null,"306ae012",null);t["a"]=m.exports},9473:function(e,t,a){},9586:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-content-selector"},[a("my-content-created-by-me",{attrs:{"filter-type-list":e.filterTypeList,"selected-list":e.selectedList,mode:e.mode,"selected-type":e.selectedType,"current-id":e.currentId}})],1)},s=[],n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-content"},[i("div",{staticClass:"filter-line"},[i("div",{staticClass:"status-tab"},["created-by-me"===e.selectedType?i("div",{staticClass:"toggle-mode-type-wrapper"},[i("div",{staticClass:"toggle-mode-type"},[i("div",{staticClass:"toggle-mode"},[i("div",{class:{"mode-item":!0,"skill-active-mode":"all-status"===e.currentStatus},on:{click:function(t){e.toggleStatus("all-status",e.$t("teacher.my-content.all-status"))}}},[e._v(" "+e._s(e.$t("teacher.my-content.all-status"))+" ")]),i("div",{class:{"mode-item":!0,"knowledge-active-mode":"published"===e.currentStatus},on:{click:function(t){e.toggleStatus("published",e.$t("teacher.my-content.published-status"))}}},[e._v(" "+e._s(e.$t("teacher.my-content.published-status"))+" ")]),i("div",{class:{"mode-item":!0,"general-active-mode":"draft"===e.currentStatus},on:{click:function(t){e.toggleStatus("draft",e.$t("teacher.my-content.draft-status"))}}},[e._v(" "+e._s(e.$t("teacher.my-content.draft-status"))+" ")])])])]):e._e()])]),i("div",{staticClass:"content-wrapper"},[i("a-skeleton",{attrs:{loading:e.skeletonLoading,active:""}},[i("div",{staticClass:"content-list"},["list"===e.dataListMode?i("a-list",{attrs:{size:"large",pagination:e.pagination,"data-source":e.myContentList,loading:e.loading},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("a-list-item",{key:"item.key",class:{"my-list-item":!0,"active-item":-1!==e.selectedList.indexOf(t.id)},on:{click:function(a){return e.handleToggleSelect(t,a)}}},[i("span",{staticClass:"content-info-left"},[i("content-type-icon",{attrs:{type:t.type}}),i("span",{staticClass:"name-content"},[i("span",{staticClass:"name-text",on:{click:function(a){return e.handleViewDetail(t,a)}}},[e._v(" "+e._s(t.name?t.name:"Untitled")+" ")])])],1),i("span",{staticClass:"content-info-right"},[i("span",{staticClass:"update-time"},[e._v(" "+e._s(e._f("dayjs")(t.updateTime||t.createTime))+" ")]),i("span",{staticClass:"status"},[0===t.status?[e._v("Draft")]:e._e(),1===t.status?[e._v("Published")]:e._e()],2),i("div",{staticClass:"action"},[e.mode===e.displayMode.Link?i("div",{attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link this content to my Unit?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleLinkItem(t,a)}}},[i("span",[i("a-icon",{attrs:{type:"form"}}),e._v(" Link ")],1)])],1)])]):e._e(),e.mode===e.displayMode.Refer?i("div",{attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item refer-item"},[i("a-button",{staticClass:"refer-btn",attrs:{type:"primary"},on:{click:function(a){return e.handleReferItem(t,a)}}},[i("img",{staticClass:"btn-icon btn-icon-white",attrs:{src:a("e568")}}),i("img",{staticClass:"btn-icon btn-icon-color",attrs:{src:a("83d7")}}),i("div",{staticClass:"btn-text"},[e._v(" Refer ")])])],1)])]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.mode===e.displayMode.Evaluation,expression:"mode === displayMode.Evaluation"}],attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleLinkItem(t,a)}}},[i("div",{staticClass:"link-item"},[i("img",{staticClass:"link-icon",attrs:{src:a("de1a")}}),e._v(" "+e._s("Link this evaluation to this "+(t.type===e.typeMap.task?"task":t.type===e.typeMap.lesson?"lesson":""))+" ")])])],1)])])])]),-1!==e.selectedList.indexOf(t.id)?i("div",{directives:[{name:"show",rawName:"v-show",value:"refer"!==e.mode,expression:"mode !== 'refer'"}],staticClass:"action-icon"},[i("img",{attrs:{src:a("7aa6")}})]):e._e()])}}],null,!1,2472396095)}):e._e(),"card"===e.dataListMode?i("a-list",{attrs:{size:"large",pagination:e.pagination,"data-source":e.myContentList,loading:e.loading},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("div",{key:"item.key",staticClass:"my-card-list-item"},[i("div",{staticClass:"ppt-preview-wrapper"},[i("div",{staticClass:"template-hover-action-mask"},[i("div",{staticClass:"template-hover-action"},[i("div",{staticClass:"modal-ensure-action-line"},[i("a-button",{staticClass:"action-ensure action-item",attrs:{shape:"round"},on:{click:function(a){return e.handlePreviewTemplate(t)}}},[i("a-icon",{attrs:{type:"eye",theme:"filled"}}),i("div",{staticClass:"btn-text"},[e._v(" Preview ")])],1),-1===e.selectedList.indexOf(t.id)?i("a-button",{staticClass:"action-ensure action-item",attrs:{shape:"round"},on:{click:function(a){return e.handleToggleSelect(t,a)}}},[i("a-icon",{attrs:{type:"plus-circle",theme:"filled"}}),i("div",{staticClass:"btn-text"},[e._v(" Add ")])],1):i("a-button",{staticClass:"action-ensure action-item",attrs:{shape:"round"},on:{click:function(a){return e.handleToggleSelect(t,a)}}},[i("a-icon",{attrs:{type:"minus-circle",theme:"filled"}}),i("div",{staticClass:"btn-text"},[e._v(" Remove ")])],1)],1)])]),i("div",{staticClass:"cover-img-wrapper"},[i("div",{staticClass:"cover-image",style:{backgroundImage:"url("+t.image+")"}})])]),i("div",{staticClass:"item-intro",on:{click:function(a){return e.handleViewDetail(t,a)}}},[i("div",{staticClass:"page-info"},[i("span",{staticClass:"page-num-tag"},[e._v(" 1/"+e._s(t.pageObjectIds.length)+" ")])]),i("div",{staticClass:"main-title"},[e._v(" "+e._s(t.name?t.name:"Untitled")+" ")]),i("div",{staticClass:"sub-title"},[e._v(" "+e._s(e._f("dayjs")(t.createTime))+" ")])]),i("div",{staticClass:"card-action-icon"},[-1!==e.selectedList.indexOf(t.id)?i("img",{attrs:{src:a("7aa6")}}):e._e()])])}}],null,!1,2092858905)}):e._e()],1)]),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",width:"1000px",closable:!1,"z-index":4e3,visible:e.previewVisible},on:{close:e.handlePreviewClose}},[i("div",{staticClass:"preview-wrapper-row"},[i("div",{staticClass:"view-back"},[i("a-button",{staticClass:"preview-back-btn",attrs:{type:"primary",shape:"round"},on:{click:e.handlePreviewClose}},[i("a-icon",{style:{"font-size":"12px"},attrs:{type:"left"}}),e._v("Back")],1)],1),i("div",{staticClass:"detail-wrapper"},[e.previewCurrentId&&e.previewType?i("div",{staticClass:"preview-detail"},[i("common-preview-v2",{attrs:{id:e.previewCurrentId,type:e.previewType}})],1):e._e()])])]),i("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"1000px",zIndex:4e3,title:null},on:{ok:function(t){e.previewTemplateVisible=!1},cancel:function(t){e.previewTemplateVisible=!1}},model:{value:e.previewTemplateVisible,callback:function(t){e.previewTemplateVisible=t},expression:"previewTemplateVisible"}},[i("div",{staticClass:"link-content-wrapper"},[i("template-preview",{attrs:{template:e.previewTemplate,"selected-template-id-list":e.selectedList},on:{"handle-select":e.handleToggleSelect}})],1)])],1)])},o=[],r=(a("ac1f"),a("1276"),a("159b"),a("d3b7"),a("823b")),l=a("ea23"),c=a("7d7a"),d=a("9afb"),u=a("95c6"),h=a("3f76"),p=a("4803"),m=a("8f46"),g=a("4fb2"),f=a("57a5b"),v=a("adfc"),y=a("69b3"),b=a("3361"),C=a.n(b),w=a("9b5b"),k=a.n(w),T=a("e709"),L={name:"MyContentCreatedByMe",components:{CommonPreviewV2:v["a"],ContentStatusIcon:p["a"],ContentTypeIcon:m["a"],UnitPlanPreview:l["default"],MaterialPreview:c["default"],NoMoreResources:y["a"],PubuSvg:k.a,LiebiaoSvg:C.a,TemplatePreview:T["a"]},props:{filterTypeList:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}},mode:{type:String,default:f["a"].Link},selectedType:{type:String,default:"created-by-me"},currentId:{type:String,default:""}},data:function(){var e=this;return{skeletonLoading:!0,loading:!0,loadFailed:!1,myContentList:[],displayMode:f["a"],currentStatus:"all-status",currentStatusLabel:this.$t("teacher.my-content.all-status"),currentType:"",currentTypeLabel:this.$t("teacher.my-content.all-type"),currentOwner:"all-owner",currentOwnerLabel:this.$t("teacher.my-content.all-owner"),previewVisible:!1,previewCurrentId:"",previewType:"",pagination:{onChange:function(t){r["info"]("pagination onChange",t),e.pageNo=t,e.loadMyContent()},showTotal:function(e){return"Total ".concat(e," items")},total:0,pageSize:100},pageNo:1,typeMap:h["e"],dataListMode:"card",previewTemplate:{},previewTemplateVisible:!1}},watch:{selectedType:function(e){this.$logger.info("watch select type "+e),this.pageNo=1,this.myContentList=[],this.pagination.total=0,this.pagination.pageSize=100,this.loadMyContent()}},computed:{countPptSize:function(){return function(e){return e?e.split(",").length:0}}},created:function(){r["info"]("teacher my content filter type ",this.filterTypeList),this.loadMyContent()},mounted:function(){},methods:{loadMyContent:function(){this.loading=!0,"created-by-me"===this.selectedType?this.getMyContent():"my-favorite"===this.selectedType?this.getMyFavorites():"shared"===this.selectedType&&(this.loading=!1,this.skeletonLoading=!1,this.$logger.info("shared coming soon!"))},handleToggleDataListMode:function(e){this.$logger.info("handleToggleDataListMode"+e),this.dataListMode=e},getMyContent:function(){var e=this,t=[];this.filterTypeList.forEach((function(e){t.push(h["e"][e])})),Object(d["FindMyContent"])({owner:h["c"][this.currentOwner],status:h["d"][this.currentStatus],types:this.currentType?[h["e"][this.currentType]]:t,pageNo:this.pageNo,pageSize:this.pagination.pageSize,currentId:this.currentId,slideStatus:1}).then((function(t){r["info"]("getMyContent",t),t.result&&t.result.records&&t.result.records.length?(t.result.records.forEach((function(e,t){e.key=t})),e.myContentList=t.result.records,e.pagination.total=t.result.total):(e.myContentList=[],e.pagination.total=0),r["info"]("myContentList",e.myContentList)})).finally((function(){e.loading=!1,e.skeletonLoading=!1}))},getMyFavorites:function(){var e=this;this.$logger.info("getMyFavorites"),Object(u["FavoritesGetMyFavorites"])({type:h["e"][this.currentType],pageNo:this.pageNo,pageSize:this.pagination.pageSize}).then((function(t){e.$logger.info("FavoritesGetMyFavorites response",t),t.result&&t.result.records&&t.result.records.length?(t.result.records.forEach((function(e,t){e.key=t})),e.myContentList=t.result.records,e.pagination.total=t.result.total,e.pagination.current=t.result.current):(e.myContentList=[],e.pagination.total=0)})).finally((function(){e.loading=!1,e.skeletonLoading=!1}))},toggleStatus:function(e,t){r["info"]("toggleStatus "+e+" label "+t),this.currentStatus=e,this.currentStatusLabel=t,this.loadMyContent()},toggleType:function(e,t){r["info"]("toggleType "+e+" label "+t),this.currentType=e,this.currentTypeLabel=t,this.loadMyContent()},toggleOwner:function(e,t){r["info"]("toggleOwner "+e+" label "+t),this.currentOwner=e,this.currentOwnerLabel=t,this.loadMyContent()},handleLinkItem:function(e,t){r["info"]("handleLinkItem",e),t.preventDefault(),t.stopPropagation(),g["b"].$emit(g["a"].LinkToMyContentItem,{item:e})},handleViewDetail:function(e,t){r["info"]("my content created by me handleViewDetail",e,t),t.preventDefault(),t.stopPropagation(),this.previewCurrentId=e.id,this.previewType=e.type,this.previewVisible=!0},handleToggleSelect:function(e,t){r["info"]("handleToggleSelect",e,t),g["b"].$emit(g["a"].ToggleSelectContentItem,e,t),this.previewTemplateVisible=!1},handlePreviewClose:function(){r["info"]("handlePreviewClose"),this.previewCurrentId="",this.previewType="",this.previewVisible=!1},handleReferItem:function(e,t){r["info"]("handleReferItem",e),t.preventDefault(),t.stopPropagation(),g["b"].$emit(g["a"].ReferContentItem,{item:e})},handlePreviewTemplate:function(e){this.$logger.info("handlePreviewTemplate ",e),this.previewTemplateVisible=!0,this.previewTemplate=e}}},I=L,S=(a("9828"),a("0c7c")),A=Object(S["a"])(I,n,o,!1,null,"78832e01",null),x=A.exports,_={name:"MyContentSelector",components:{MyContentCreatedByMe:x},props:{filterTypeList:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}},mode:{type:String,default:f["a"].Link},currentId:{type:String,default:""}},data:function(){return{displayMode:f["a"],selectedType:"created-by-me"}},computed:{},created:function(){this.$logger.info("MyContentSelector selectedType "+this.selectedType+", mode:"+this.mode+", filterType ",this.filterTypeList)},mounted:function(){},methods:{handleToggleType:function(e){this.$logger.info("handleToggleType "+e),this.selectedType=e}}},D=_,O=(a("27aa"),Object(S["a"])(D,i,s,!1,null,"1ed7a2f5",null));t["a"]=O.exports},"95c6":function(e,t,a){"use strict";a.r(t),a.d(t,"favoritesAPIUrl",(function(){return s})),a.d(t,"FavoritesAdd",(function(){return n})),a.d(t,"FavoritesQueryById",(function(){return o})),a.d(t,"FavoritesDelete",(function(){return r})),a.d(t,"FavoritesDeleteBatch",(function(){return l})),a.d(t,"FavoritesList",(function(){return c})),a.d(t,"FavoritesGetMyFavorites",(function(){return d}));var i=a("b775"),s={FavoritesAdd:"/classcipe/api/favorites/add",FavoritesQueryById:"/classcipe/api/favorites/queryById",FavoritesDelete:"/classcipe/api/favorites/delete",FavoritesDeleteBatch:"/classcipe/api/favorites/deleteBatch",FavoritesList:"/classcipe/api/favorites/list",FavoritesGetMyFavorites:"/classcipe/api/favorites/getMyFavorites"};function n(e){return Object(i["d"])({url:s.FavoritesAdd,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(i["d"])({url:s.FavoritesQueryById,method:"get",params:e})}function r(e){return Object(i["d"])({url:s.FavoritesDelete,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["d"])({url:s.FavoritesDeleteBatch,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["d"])({url:s.FavoritesList,method:"get",params:e})}function d(e){return Object(i["d"])({url:s.FavoritesGetMyFavorites,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"96ee":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{t:"1651915735660",class:"icon",viewBox:"0 0 1200 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4133","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"56.25",height:"48"},children:[{tag:"path",attrsMap:{d:"M1200.510327 511.982345C1200.510327 229.226854 931.807869 0 600.255164 0S0 229.226854 0 511.982345a478.791766 478.791766 0 0 0 188.197648 372.122893 624.971553 624.971553 0 0 1-66.73425 69.276507 38.522258 38.522258 0 0 0 22.597841 67.334506c20.126203 1.977311 40.605496 3.001276 61.08479 3.001276 117.226303 0 394.04986 0.282473 395.109135 0.282473C931.807869 1023.964691 1200.510327 794.737837 1200.510327 511.982345z m-609.788628-95.334643a95.617117 95.617117 0 1 1-96.040826 95.546498 95.934899 95.934899 0 0 1 96.040826-95.546498z m-328.021792 0a95.617117 95.617117 0 1 1-96.393918 95.546498A95.864281 95.864281 0 0 1 262.699907 416.647702z m674.757422 191.198924a95.617117 95.617117 0 1 1 0-191.198924 95.617117 95.617117 0 1 1 0 191.163615z","p-id":"4134"}}]})}},"972f":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"evaluation-preview"},[e.loading?[a("a-skeleton",{attrs:{active:""}})]:[a("a-row",{staticClass:"top-info",attrs:{gutter:[16,24]}},[a("a-col",{attrs:{span:"24"}},e._l(e.forms,(function(t,i){return a("div",{key:i,class:{"form-item":!0,"form-item-active":!0}},[a("evaluation-table",{ref:"evaluationTable",refInFor:!0,attrs:{"form-id":t.formId,"init-raw-headers":t.initRawHeaders,"init-raw-data":t.initRawData,"form-type":t.formType,mode:e.EvaluationTableMode.Preview}})],1)})),0)],1)]],2)},s=[],n=(a("d3b7"),a("159b"),a("823b")),o=a("8f46"),r=a("c0f4"),l=a("9f06"),c=a("ca00"),d=a("9586"),u=a("0fa0"),h=a("1138"),p=a("90e8"),m={name:"EvaluationTablePreview",components:{EvaluationTable:h["a"],ContentTypeIcon:o["a"],InputSearch:r["a"],MyContentSelector:d["a"],RelevantTagSelector:u["a"]},props:{evaluationId:{type:String,default:null}},data:function(){return{loading:!0,forms:[],evaluationTableList:[],initRawHeaders:[],initRawData:[],selfType:!1,EvaluationTableMode:p["a"]}},computed:{lastChangeSavedTime:function(){var e=this.form.updateTime||this.form.createTime;return e?Object(c["formatLocalUTC"])(this.form.updateTime||this.form.createTime):""}},created:function(){n["info"]("EvaluationTablePreview created "+this.evaluationId),this.initData()},methods:{initData:function(){var e=this;n["info"]("initData doing..."),Object(l["EvaluationQueryByIds"])({ids:[this.evaluationId]}).then((function(t){e.$logger.info("handleToggleSelect EvaluationQueryByIds "+e.evaluationId,t);var a=[];t.result.forEach((function(e){e.forms.forEach((function(e){a.push({title:e.title,titleEditing:!1,formType:e.formType,se:e.se,pe:e.pe,menuVisible:!1,id:e.id,formId:e.formId,initRawHeaders:JSON.parse(e.initRawHeaders),initRawData:JSON.parse(e.initRawData)})}))})),e.forms=a,0===e.forms.length&&e.$message.warn("The current assessment tool form has not been created")})).finally((function(){e.loading=!1}))}}},g=m,f=(a("4198"),a("0c7c")),v=Object(f["a"])(g,i,s,!1,null,"e834b3c0",null);t["a"]=v.exports},"973f":function(e,t,a){},9828:function(e,t,a){"use strict";a("0eda")},"98bc":function(e,t,a){"use strict";a("0da1")},"98e2":function(e,t,a){},"9a45":function(e,t,a){},"9a634":function(e,t){var a={utf8:{stringToBytes:function(e){return a.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(a.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],a=0;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},bytesToString:function(e){for(var t=[],a=0;a<e.length;a++)t.push(String.fromCharCode(e[a]));return t.join("")}}};e.exports=a},"9b4b":function(e,t,a){"use strict";a("dd87")},"9b5b":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"27.223",height:"28",viewBox:"0 0 27.223 28"},children:[{tag:"defs"},{tag:"path",attrsMap:{id:"pubu_","data-name":"pubu ",class:"cls-1",d:"M17422.268,9413v-7.046h6.957V9413Zm-9.953,0v-7.046h7.268V9413Zm-10.312,0v-7.046h6.953V9413Zm20.266-10.41v-7.231h6.957v7.231Zm-9.953,0v-7.231h7.268v7.231Zm-10.312,0v-7.231h6.953v7.231Zm20.266-10.638V9385h6.957v6.952Zm-9.953,0V9385h7.268v6.952Zm-10.312,0V9385h6.953v6.952Z",transform:"translate(-17402.002 -9385.001)"}}]})}},"9bb4":function(e,t,a){},"9bc1":function(e,t,a){"use strict";a("9bb4")},"9c2c":function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19"},children:[{tag:"g",attrsMap:{transform:"translate(-771.25 -365.25)"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#15c39a;stroke:#15c39a;",d:"M9,0A9,9,0,1,1,0,9,9,9,0,0,1,9,0Z",transform:"translate(771.75 365.75)"}},{tag:"path",attrsMap:{class:"b",style:"fill:#fff;stroke:#fff;stroke-width:0.5px;",d:"M24.47,24.8V21.78h3.016a.5.5,0,0,0,0-1.005H24.47V17.759a.5.5,0,0,0-1.005,0v3.016H20.449a.5.5,0,0,0,0,1.005h3.016V24.8a.5.5,0,0,0,1.005.044q0-.022,0-.044Z",transform:"translate(756.784 353.451)"}}]}]})}},"9ee6":function(e,t,a){"use strict";a("9a45")},"9f06":function(e,t,a){"use strict";a.r(t),a.d(t,"evaluationAPIUrl",(function(){return r})),a.d(t,"EvaluationAddOrUpdate",(function(){return l})),a.d(t,"EvaluationQueryById",(function(){return c})),a.d(t,"EvaluationQueryByIds",(function(){return d})),a.d(t,"EvaluationDelete",(function(){return u})),a.d(t,"FindMyClasses",(function(){return h})),a.d(t,"GetSessionEvaluationByClassId",(function(){return p})),a.d(t,"SaveSessionEvaluation",(function(){return m})),a.d(t,"QuerySessionEvaluation",(function(){return g})),a.d(t,"QuerySessionEvidence",(function(){return f})),a.d(t,"SaveSessionEvidence",(function(){return v})),a.d(t,"QuerySessionTakeaway",(function(){return y})),a.d(t,"SaveSessionTakeaway",(function(){return b})),a.d(t,"GetEvaluationFormSet",(function(){return C})),a.d(t,"SaveEvaluationFormSet",(function(){return w})),a.d(t,"GetEvaluationMode",(function(){return k})),a.d(t,"SaveEvaluationMode",(function(){return T}));var i=a("b775"),s=a("8ded"),n=a.n(s),o=a("9fb0"),r={addOrUpdate:"/classcipe/api/evaluation/addOrUpdate",delete:"/classcipe/api/evaluation/delete",deleteBatch:"/classcipe/api/evaluation/deleteBatch",list:"/classcipe/api/evaluation/list",queryById:"/classcipe/api/evaluation/queryById",queryByIds:"/classcipe/api/evaluation/queryByIds",findMyClasses:"/classcipe/api/evaluation/findMyClasses",GetSessionEvaluationByClassId:"/classcipe/api/evaluation/getSessionEvaluationByClassId",querySessionEvaluation:"/classcipe/api/evaluation/querySessionEvaluation",saveSessionEvaluation:"/classcipe/api/evaluation/saveSessionEvaluation",querySessionEvidence:"/classcipe/api/evaluation/querySessionEvidence",saveSessionEvidence:"/classcipe/api/evaluation/saveSessionEvidence",getEvaluationFormSet:"/classcipe/api/evaluation/getEvaluationFormSet",saveEvaluationFormSet:"/classcipe/api/evaluation/saveEvaluationFormSet",getEvaluationMode:"/classcipe/api/evaluation/getEvaluationMode",saveEvaluationMode:"/classcipe/api/evaluation/saveEvaluationMode",saveSessionTakeaway:"/classcipe/api/evaluation/saveSessionTakeaway",querySessionTakeaway:"/classcipe/api/evaluation/querySessionTakeaway"};function l(e){return Object(i["d"])({url:r.addOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["d"])({url:r.queryById,method:"get",params:e})}function d(e){return Object(i["d"])({url:r.queryByIds,method:"post",data:e})}function u(e){return Object(i["d"])({url:r.delete+"?id="+e.id,method:"post",data:e})}function h(e){var t=n.a.get(o["a"]);return e["token"]=t,Object(i["d"])({url:r.findMyClasses,method:"post",data:e})}function p(e){return Object(i["d"])({url:r.GetSessionEvaluationByClassId,method:"get",params:e})}function m(e){return Object(i["d"])({url:r.saveSessionEvaluation,method:"post",data:e})}function g(e){return Object(i["d"])({url:r.querySessionEvaluation,method:"post",data:e})}function f(e){return Object(i["d"])({url:r.querySessionEvidence,method:"post",data:e})}function v(e){return Object(i["d"])({url:r.saveSessionEvidence,method:"post",data:e})}function y(e){return Object(i["d"])({url:r.querySessionTakeaway,method:"post",data:e})}function b(e){return Object(i["d"])({url:r.saveSessionTakeaway,method:"post",data:e})}function C(e){return Object(i["d"])({url:r.getEvaluationFormSet,method:"post",data:e})}function w(e){return Object(i["d"])({url:r.saveEvaluationFormSet,method:"post",data:e})}function k(e){return Object(i["d"])({url:r.getEvaluationMode,method:"post",data:e})}function T(e){return Object(i["d"])({url:r.saveEvaluationMode,method:"post",data:e})}},a076:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"31.91",height:"27.001",viewBox:"0 0 31.91 27.001"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#828282;",d:"M4.973,93.469a11.045,11.045,0,0,0,19.819,5.422,1.227,1.227,0,1,1,1.963,1.473,13.5,13.5,0,0,1-24.257-7L2.14,93.7A1.228,1.228,0,0,1,.315,92.062L2.77,89.607a1.227,1.227,0,0,1,1.825,0l2.455,2.455A1.228,1.228,0,0,1,5.224,93.7l-.251-.234Zm21.964-2.4A11.045,11.045,0,0,0,7.118,85.646a1.227,1.227,0,1,1-1.963-1.473,13.5,13.5,0,0,1,24.256,7l.359-.336A1.228,1.228,0,1,1,31.6,92.476l-2.455,2.455a1.227,1.227,0,0,1-1.825,0l-2.455-2.455a1.228,1.228,0,0,1,1.825-1.642l.251.234Z",transform:"translate(0 -78.769)"}}]})}},a1e2:function(e,t,a){},a262:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"share-content-setting"},[e.loading?[a("div",{staticClass:"loading-wrapper"},[a("a-spin")],1)]:e._e(),e.loading?e._e():[e.shareContent.status?[a("div",{staticClass:"share-tips"},[a("div",{staticClass:"tips-text"},[e.shareContent.status?[e._v(" Everyone with this link have access to this content ")]:[e._v(" Once turned on, you can share knowledges with others via a link. ")]],2)]),a("div",{staticClass:"turn-off",on:{click:e.switchShareStatus}},[a("div",{staticClass:"turn-off-text"},[e.shareContent.status?[e._v(" Turn off sharing ")]:[e._v(" Turn on sharing ")]],2)]),a("div",{staticClass:"share-setting"},[a("div",{staticClass:"url-info"},[a("div",{staticClass:"url-and-copy"},[a("div",{staticClass:"url-text"},[a("div",{staticClass:"url-text-text"},[e._v(e._s(e.shareUrl))])]),a("div",{staticClass:"copy-text"},[a("a-button",{attrs:{type:"primary",shape:"round",size:"small"},on:{click:e.handleCopyLink}},[e.shareContent.needPassword?[e._v(" Copy link and password ")]:[e._v(" Copy link ")]],2)],1)]),a("div",{staticClass:"is-need-password"},[a("a-radio",{attrs:{checked:e.shareContent.needPassword},on:{click:e.changeNeedPassword}},[e._v(" Password required to access the content ")])],1)]),a("div",{staticClass:"password-info"},[a("div",{staticClass:"password-setting"},[a("div",{staticClass:"refresh-password",on:{click:e.refreshPassword}},[a("refresh-svg"),e._v(" Reset password ")],1),a("div",{staticClass:"password-item"},[a("span",{staticClass:"password-text"},[e._v(e._s(e.shareContent.password))])]),e.refreshing?a("a-spin",[a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1):e._e()],1)])])]:e._e(),e.shareContent.status?e._e():[a("div",{staticClass:"turn-on"},[e._m(0),a("div",{staticClass:"turn-on-text"},[e._v(" When opened to share , this file can be shared through links. ")]),a("div",{staticClass:"turn-on-button"},[a("a-button",{attrs:{type:"primary",shape:"round"},on:{click:e.switchShareStatus}},[e._v("Open to share")])],1)])]]],2)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"turn-on-img"},[i("img",{attrs:{src:a("a28d")}})])}],n=a("1da1"),o=(a("96cf"),a("a9e3"),a("acd9")),r=a("a076"),l=a.n(r),c={name:"ShareContentSetting",components:{RefreshSvg:l.a},props:{sourceId:{type:String,required:!0},sourceType:{type:Number,required:!0}},data:function(){return{loading:!0,shareContent:{needPassword:!1,code:"",password:""},refreshing:!1}},computed:{shareUrl:function(){return this.shareContent.code?window.location.origin+"/share/"+this.shareContent.code:""}},created:function(){this.$logger.info("ShareContentSetting created "+this.sourceId+" "+this.sourceType),this.loadingShareContent()},methods:{loadingShareContent:function(){var e=this;this.loading=!0,Object(o["c"])({sourceId:this.sourceId,sourceType:this.sourceType}).then((function(t){e.$logger.info("QueryContentShare response",t),t.result?(e.shareContent=t.result,e.loading=!1):Object(o["f"])({sourceId:e.sourceId,sourceType:e.sourceType,status:0}).then((function(t){e.$logger.info("ShareStatus response",t),e.shareContent=t.result,e.loading=!1}))}))},changeNeedPassword:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$logger.info("changeNeedPassword "+!e.shareContent.needPassword),e.shareContent.needPassword=!e.shareContent.needPassword,e.shareContent.password){t.next=5;break}return t.next=5,e.refreshPassword();case 5:return t.next=7,e.updateContentShare();case 7:case"end":return t.stop()}}),t)})))()},refreshPassword:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.refreshing=!0,t.next=3,Object(o["d"])({sourceId:e.sourceId,sourceType:e.sourceType});case 3:a=t.sent,e.$logger.info("ResetPassword response",a),e.shareContent.password=a.result.password,e.refreshing=!1;case 7:case"end":return t.stop()}}),t)})))()},handleCopyLink:function(){var e=this,t=this.shareUrl;this.shareContent.needPassword&&(t+=" (Password:"+this.shareContent.password+")"),this.$copyText(t).then((function(){e.$message.success("Copy successfully")})).catch((function(){e.$message.error("Copy failed")}))},switchShareStatus:function(){var e=this;Object(o["f"])({sourceId:this.sourceId,sourceType:this.sourceType,status:this.shareContent.status?0:1}).then((function(t){e.$logger.info("switchShareStatus response",t),e.shareContent=t.result,e.$message.success("Set successfully"),e.$emit("update-share-status",e.shareContent.status)}))},updateContentShare:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$logger.info("updateContentShare",e.shareContent),t.next=3,Object(o["e"])(e.shareContent);case 3:a=t.sent,e.$logger.info("ShareAddOrUpdate response",a),e.$message.success("Set successfully");case 6:case"end":return t.stop()}}),t)})))()}}},d=c,u=(a("207f"),a("0c7c")),h=Object(u["a"])(d,i,s,!1,null,"3f7e29a4",null);t["a"]=h.exports},a283:function(e,t,a){},a28d:function(e,t,a){e.exports=a.p+"img/share.98b2252b.png"},a2b1:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-row",{staticClass:"new-tag-ui"},[i("a-col",{attrs:{span:"24"}},[i("div",{staticClass:"skt-search-wrapper"},[i("div",{staticClass:"search-input"},[i("div",{staticClass:"knowledge-tag-search-input"},[i("a-popover",{attrs:{placement:"topLeft"}},[i("template",{slot:"content"},[i("p",[e._v("enter key words or choose from your curriculum")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputTag,expression:"inputTag"}],attrs:{placeholder:e.$t("teacher.add-unit-plan.please-enter-knowledge-tag")},domProps:{value:e.inputTag},on:{keyup:e.handleKeyup,input:function(t){t.target.composing||(e.inputTag=t.target.value)}}})],2)],1)]),i("div",{staticClass:"toggle-mode-type-wrapper"},[i("a-tooltip",[i("template",{slot:"title"},[e._v(" Matching relevant tags will help connect global teaching resources. ")]),i("div",{staticClass:"toggle-mode-type"},[i("div",{staticClass:"toggle-mode"},[i("div",{class:{"mode-item":!0,"skill-active-mode":e.currentMode===e.mode.skill},on:{click:function(t){return e.handleToggleMode(e.mode.skill)}}},[e._v(" Skill tags ")]),i("div",{class:{"mode-item":!0,"knowledge-active-mode":e.currentMode===e.mode.knowledge},on:{click:function(t){return e.handleToggleMode(e.mode.knowledge)}}},[e._v(" Knowledge tags ")])])])],2)],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.tagListVisible,expression:"tagListVisible"}],staticClass:"skt-tag-wrapper"},[i("a-row",[i("a-col",{attrs:{span:"24"}},[i("div",{staticClass:"skt-tag-list"},[i("div",{staticClass:"triangle"}),i("a-tooltip",{attrs:{title:" double click the tag to show relevant learning objectives from curriculum."}},[e.searchTagList&&e.searchTagList.length?i("div",{class:{"search-tag-wrapper":!0,"tag-wrapper":!0,"knowledge-mode":e.currentMode===e.mode.knowledge,"skill-mode":e.currentMode===e.mode.skill,"general-mode":e.currentMode===e.mode.general}},[e._l(e.searchTagList,(function(t,s){return[t.type===e.tagOriginType.Search?i("div",{key:s,staticClass:"skt-tag-item",attrs:{"data-tag-type":t.type},on:{dblclick:function(a){return e.handleDbClickTagListTag(t)}}},[i("a-tag",{staticClass:"tag-item",attrs:{draggable:"true"},on:{dragstart:function(a){return e.handleTagItemDragStart(t,a)}}},[i("div",{staticClass:"tag-icon"},[i("img",{staticClass:"search-icon",attrs:{src:a("3f1f")}}),i("div",{staticClass:"tag-name"},[e._v(" "+e._s(t.name)+" ")])])]),t.type===e.tagOriginType.Create?i("a-tag",{staticClass:"tag-item",attrs:{draggable:"true",closable:""},on:{dragstart:function(a){return e.handleTagItemDragStart(t,a)},close:function(a){return e.handleDeleteCreatedTag(t)}}},[i("a-icon",{attrs:{type:"highlight"}}),e._v(" "+e._s(t.name)+" ")],1):e._e()],1):e._e()]}))],2):e._e()]),i("a-tooltip",{attrs:{title:" double click the tag to show relevant learning objectives from curriculum."}},[e.recommendTagList&&e.recommendTagList.length?i("div",{class:{"search-tag-wrapper":!0,"tag-wrapper":!0,"knowledge-mode":e.currentMode===e.mode.knowledge,"skill-mode":e.currentMode===e.mode.skill,"general-mode":e.currentMode===e.mode.general}},e._l(e.recommendTagList,(function(t,s){return i("div",{key:s,staticClass:"skt-tag-item",attrs:{"data-tag-type":t.type},on:{dblclick:function(a){return e.handleDbClickTagListTag(t)}}},[i("a-tag",{staticClass:"tag-item recommend-tag-item",attrs:{draggable:"true"},on:{dragstart:function(a){return e.handleTagItemDragStart(t,a)}}},[i("div",{staticClass:"tag-icon"},[e.currentMode===e.mode.knowledge?i("img",{staticClass:"recommend-icon",attrs:{src:a("b3f3")}}):e._e(),e.currentMode===e.mode.general?i("img",{staticClass:"recommend-icon",attrs:{src:a("32b8")}}):e._e(),e.currentMode===e.mode.skill?i("img",{staticClass:"recommend-icon",attrs:{src:a("0ddc")}}):e._e(),i("div",{staticClass:"tag-name"},[e._v(" "+e._s(t.name)+" ")])])])],1)})),0):e._e()]),i("div",{class:{"create-tag-wrapper":!0,"tag-wrapper":!0,"knowledge-mode":e.currentMode===e.mode.knowledge,"skill-mode":e.currentMode===e.mode.skill,"general-mode":e.currentMode===e.mode.general}},[i("div",{staticClass:"skt-tag-create-line",on:{click:e.handleCreateTagByInput}},[e.createTagName?i("div",{staticClass:"create-tag-label"},[e._v(" Create ")]):e._e(),i("div",{staticClass:"create-tag"},[e.createTagName?i("a-tag",{staticClass:"created-tag-item"},[e._v(" "+e._s(e.createTagName)+" ")]):e._e()],1),e.createdTagList&&e.createdTagList.length?e._l(e.createdTagList,(function(t,a){return i("div",{key:a,staticClass:"create-tag",attrs:{"data-tag-type":t.type},on:{dblclick:function(a){return e.handleDbClickTagListTag(t)}}},[i("a-tag",{staticClass:"created-tag-item",attrs:{draggable:"true",closable:""},on:{dragstart:function(a){return e.handleTagItemDragStart(t,a)},close:function(a){return e.handleDeleteCreatedTag(t)}}},[e._v(" "+e._s(t.name)+" ")])],1)})):e._e()],2)])],1)])],1)],1),i("div",{staticClass:"open-curriculum-wrapper"},[i("a-row",[i("a-col",{attrs:{span:"24"}},[i("div",{staticClass:"open-curriculum-btn-wrapper"},[i("div",{staticClass:"open-curriculum",on:{click:e.handleCreateDescription}},[i("img",{attrs:{src:a("3f4f")}}),i("span",{staticClass:"open-curriculum-text"},[e._v("Choose from curriculum ")])])])])],1)],1),i("div",{staticClass:"skt-description-list-wrapper"},[e.descriptionTagList.length?i("a-row",[i("a-col",{attrs:{span:"24"}},[i("div",{staticClass:"skt-description-list"},[e.descriptionTagList.length?i("div",{key:e.descriptionTagList[0].subKnowledgeId,class:{"skt-description-tag-item":!0,"skt-description-tag-item-top-fixed":!0,"active-description-line":e.descriptionTagList[0].subKnowledgeId===e.activeSubKnowledgeId},attrs:{"data-id":e.descriptionTagList[0].subKnowledgeId},on:{dblclick:function(t){return e.handleActiveDescription(e.descriptionTagList[0].subKnowledgeId)}}},[i("div",{staticClass:"skt-description"},[e.descriptionTagList[0].subKnowledgeId===e.activeSubKnowledgeId?i("a-tooltip",{attrs:{title:"double click one learning outcome to add relevant tags"}},[e._v(" "+e._s(e.subKnowledgeId2InfoMap.get(e.descriptionTagList[0].subKnowledgeId).description)+" ")]):[e._v(" "+e._s(e.subKnowledgeId2InfoMap.get(e.descriptionTagList[0].subKnowledgeId).description)+" ")]],2),i("div",{staticClass:"skt-description-tag-list",attrs:{droppable:e.activeSubKnowledgeId===e.descriptionTagList[0].subKnowledgeId?"true":"false"},on:{dragover:function(e){e.preventDefault()},drop:function(t){return e.handleTagItemDrop(e.descriptionTagList[0],t)}}},e._l(e.descriptionTagList[0].tagList,(function(t,a){return i("div",{key:a+t.name+t.type,class:{"tag-list-item":!0,"knowledge-mode":e.currentMode===e.mode.knowledge,"skill-mode":e.currentMode===e.mode.skill,"general-mode":e.currentMode===e.mode.general}},[t.type===e.tagOriginType.Origin?i("a-tag",{staticClass:"tag-item",attrs:{closable:t.subKnowledgeId===e.activeSubKnowledgeId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),t.type===e.tagOriginType.Search?i("a-tag",{staticClass:"tag-item",attrs:{closable:t.subKnowledgeId===e.activeSubKnowledgeId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),t.type===e.tagOriginType.Description?i("a-tag",{staticClass:"tag-item",attrs:{closable:t.subKnowledgeId===e.activeSubKnowledgeId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e()],1)})),0),i("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(t){return e.handleDeleteKnowledgeItem(e.descriptionTagList[0].subKnowledgeId)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.descriptionTagList[0].subKnowledgeId===e.activeSubKnowledgeId,expression:"descriptionTagList[0].subKnowledgeId === activeSubKnowledgeId"}],staticClass:"delete-action"},[i("img",{attrs:{src:a("1ffa")}})])])],1):e._e(),i("div",{staticClass:"skt-description-sub-list"},e._l(e.descriptionTagList,(function(t,s){return e.descriptionTagList.length&&s>0?i("div",{key:t.subKnowledgeId,class:{"skt-description-tag-item":!0,"active-description-line":t.subKnowledgeId===e.activeSubKnowledgeId},attrs:{"data-id":t.subKnowledgeId},on:{dblclick:function(a){return e.handleActiveDescription(t.subKnowledgeId)}}},[i("div",{staticClass:"skt-description"},[i("template",{slot:"title"},[e._v(" "+e._s(e.subKnowledgeId2InfoMap.get(t.subKnowledgeId).description)+" ")]),e._v(" "+e._s(e.subKnowledgeId2InfoMap.get(t.subKnowledgeId).description)+" ")],2),i("div",{staticClass:"skt-description-tag-list",attrs:{droppable:e.activeSubKnowledgeId===t.subKnowledgeId?"true":"false"},on:{dragover:function(e){e.preventDefault()},drop:function(a){return e.handleTagItemDrop(t,a)}}},e._l(t.tagList,(function(t,a){return i("div",{key:a+t.name+t.type,class:{"tag-list-item":!0,"knowledge-mode":e.currentMode===e.mode.knowledge,"skill-mode":e.currentMode===e.mode.skill,"general-mode":e.currentMode===e.mode.general}},[t.type===e.tagOriginType.Origin?i("a-tag",{staticClass:"tag-item",attrs:{closable:t.subKnowledgeId===e.activeSubKnowledgeId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),t.type===e.tagOriginType.Search?i("a-tag",{staticClass:"tag-item",attrs:{closable:t.subKnowledgeId===e.activeSubKnowledgeId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e(),t.type===e.tagOriginType.Description?i("a-tag",{staticClass:"tag-item",attrs:{closable:t.subKnowledgeId===e.activeSubKnowledgeId},on:{close:function(a){return e.handleDescriptionTagClose(t)}}},[e._v(" "+e._s(t.name)+" ")]):e._e()],1)})),0),i("a-popconfirm",{attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return e.handleDeleteKnowledgeItem(t.subKnowledgeId)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.subKnowledgeId===e.activeSubKnowledgeId,expression:"item.subKnowledgeId === activeSubKnowledgeId"}],staticClass:"delete-action"},[i("img",{attrs:{src:a("1ffa")}})])])],1):e._e()})),0)])])],1):e._e()],1),i("a-modal",{attrs:{title:"Select from the relevant Unit",destroyOnClose:"",width:"600px"},on:{ok:e.handleEnsureTagSearchList},model:{value:e.tagNameSearchListDialogueVisible,callback:function(t){e.tagNameSearchListDialogueVisible=t},expression:"tagNameSearchListDialogueVisible"}},[i("div",{staticClass:"search-tag-list"},[e._l(e.tagNameSearchList,(function(t,a){return i("div",{key:a,class:{"search-description-item":!0,"selected-item":-1!==e.tagNameSearchListSelected.indexOf(t.descriptionId)}},[i("div",{staticClass:"description-info",on:{click:function(a){return e.handleTagNameSearchListSelected(t)}}},[i("div",{staticClass:"info-detail"},[i("div",{staticClass:"info-text"},[e._v(" "+e._s(t.description)+" ")]),-1!==e.tagNameSearchListSelected.indexOf(t.descriptionId)?i("div",{staticClass:"info-checked"},[i("a-icon",{style:{fontSize:"16px",color:"#15C39A"},attrs:{type:"check-circle"}})],1):e._e()])])])})),e.tagNameSearchList.length?e._e():i("div",{staticClass:"empty-search-list"},[i("no-more-resources",{attrs:{tips:"no relevant content, please open curriculum to choose"},on:{"show-library":function(t){return e.showLibrary()}}})],1)],2)]),i("a-modal",{attrs:{destroyOnClose:"",width:"1200px","dialog-style":{top:"20px"}},on:{ok:e.handleEnsureAssociate},model:{value:e.associateLibraryVisible,callback:function(t){e.associateLibraryVisible=t},expression:"associateLibraryVisible"}},[i("div",{staticClass:"associate-library"},[i("new-browser",{attrs:{"select-mode":e.selectModel.knowledgeDescription,"question-index":e.questionIndex}})],1)])],1)],1)},s=[],n=a("2909"),o=a("3835"),r=a("b85c"),l=a("5530"),c=(a("4de4"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("b0c0"),a("6062"),a("c740"),a("498a"),a("a434"),a("7db0"),a("a02e")),d=a("823b"),u=a("db6a"),h=a("3264"),p=a("489c"),m=a("69b3"),g=a("f93e"),f=a("4fcf"),v=f.debounce,y=f.sortBy,b={Origin:"Origin",Search:"Search",Description:"Description",Create:"Create"},C={skill:"skill",knowledge:"knowledge",general:"general"},w={name:"NewUiClickableKnowledgeTag",components:{NewBrowser:h["a"],NoMoreResources:m["a"]},props:{questionIndex:{type:String,default:""},selectedKnowledgeTags:{type:Array,default:function(){return[]}},selectedSkillTags:{type:Array,default:function(){return[]}},gradeIds:{type:Array,default:function(){return[]}},subjectIds:{type:Array,default:function(){return[]}}},mounted:function(){d["info"]("NewClickableKnowledgeTag "+this.questionIndex+" selectedKnowledgeTags"),c["LibraryEventBus"].$on(c["LibraryEvent"].ContentListSelectClick,this.handleContentListSelectClick)},destroyed:function(){c["LibraryEventBus"].$off(c["LibraryEvent"].ContentListSelectClick,this.handleContentListSelectClick),this.$logger.info("off NewClickableKnowledgeTag ContentListSelectClick handler")},computed:{searchTagList:function(){var e=this;return this.tagList.filter((function(t){return t.type===e.tagOriginType.Search}))},recommendTagList:function(){var e=this;return this.tagList.filter((function(t){return t.type===e.tagOriginType.Description}))},createdTagList:function(){var e=this;return this.tagList.filter((function(t){return t.type===e.tagOriginType.Create}))}},data:function(){return{inputTag:"",searchList:[],tagList:[],tagOriginType:b,selectModel:p["a"],descriptionTagList:[],descriptionKnowLedgeTagList:[],descriptionSkillList:[],subKnowledgeId2InfoMap:new Map,activeSubKnowledgeId:null,tagNameSearchListDialogueVisible:!1,tagNameSearchList:[],tagNameSearchListSelected:[],associateLibraryVisible:!1,createTagName:"",currentMode:C.skill,mode:C,activeDescriptionId:null,tagListVisible:!1}},created:function(){this.debouncedSearchKnowledge=v(this.searchKnowledge,500),this.descriptionKnowLedgeTagList=this.initSelectTagList(this.selectedKnowledgeTags),this.descriptionSkillTagList=this.initSelectTagList(this.selectedSkillTags),this.descriptionTagList=this.currentMode===C.knowledge?this.descriptionKnowLedgeTagList:this.descriptionSkillTagList,this.$logger.info("after add tagList",this.tagList),this.$logger.info("after add descriptionKnowLedgeTagList",this.descriptionKnowLedgeTagList),this.$logger.info("after add descriptionSkillTagList",this.descriptionSkillTagList)},watch:{currentMode:function(e){e===C.knowledge?(this.descriptionSkillList=this.descriptionTagList,this.descriptionTagList=this.descriptionKnowLedgeTagList):(this.descriptionKnowLedgeTagList=this.descriptionTagList,this.descriptionTagList=this.descriptionSkillList),this.$logger.info("mode",this.currentMode,"descriptionTagList",this.descriptionSkillTagList)},searchList:function(){var e=this;this.$logger.info("update search tag list with list size "+this.searchList.length,this.searchList);var t=this.tagList;t=this.tagList,t=t.filter((function(t){return t.type!==e.tagOriginType.Search}));var a=[];this.searchList.forEach((function(e){-1===a.indexOf(e.name)&&(t.push(Object(l["a"])(Object(l["a"])({},e),{},{type:b.Search})),a.push(e.name))})),this.tagList=t,this.$logger.info("after update search tag list",this.tagList),t.length>0?this.tagListVisible=!0:this.inputTag||(this.tagListVisible=!1)}},methods:{initSelectTagList:function(e){var t=this,a=new Map,i=new Set;e.forEach((function(e){if(i.has(e.name)?t.$logger.info("tag name "+e.name+" exist",e,i):t.tagList.push(Object(l["a"])(Object(l["a"])({},e),{},{type:b.Origin})),e.subKnowledgeId&&e.curriculumId===t.$store.getters.bindCurriculum&&!a.has(e.subKnowledgeId)&&(a.set(e.subKnowledgeId,[]),t.subKnowledgeId2InfoMap.set(e.subKnowledgeId,Object(l["a"])({},e))),e.curriculumId===t.$store.getters.bindCurriculum){t.$logger.info("current bindCurriculum  match curriculumId, add "+e.subKnowledgeId+" to descriptionTagMap",e,a[e.subKnowledgeId]);var s=a.get(e.subKnowledgeId);s.push(Object(l["a"])(Object(l["a"])({},e),{},{type:b.Origin})),a.set(e.subKnowledgeId,s)}else t.$logger.info("skip! current bindCurriculum not match curriculumId",e,t.$store.getters.bindCurriculum)}));var s,n=[],c=Object(r["a"])(a);try{for(c.s();!(s=c.n()).done;){var d=Object(o["a"])(s.value,2),u=d[0],h=d[1];n.push(Object.assign({},{subKnowledgeId:u,tagList:h,_updateTimestamp:(new Date).getTime()})),this.$logger.info("add "+u+" tagList ",h)}}catch(p){c.e(p)}finally{c.f()}return n=y(n,"_updateTimestamp","asc").reverse(),n},handleContentListSelectClick:function(e){if(e.questionIndex===this.questionIndex){this.$logger.info("handleContentListSelectClick hit "+this.questionIndex,e);var t=this.descriptionTagList.findIndex((function(t){return t.subKnowledgeId===e.subKnowledgeId}));-1===t&&(this.subKnowledgeId2InfoMap.set(e.subKnowledgeId,Object(l["a"])({},e)),this.descriptionTagList.push({subKnowledgeId:e.subKnowledgeId,tagList:[],_updateTimestamp:0}),this.currentMode===C.skill?-1===this.descriptionKnowLedgeTagList.findIndex((function(t){return t.subKnowledgeId===e.subKnowledgeId}))&&this.descriptionKnowLedgeTagList.push({subKnowledgeId:e.subKnowledgeId,tagList:[],_updateTimestamp:0}):-1===this.descriptionSkillTagList.findIndex((function(t){return t.subKnowledgeId===e.subKnowledgeId}))&&this.descriptionSkillTagList.push({subKnowledgeId:e.subKnowledgeId,tagList:[],_updateTimestamp:0})),c["LibraryEventBus"].$emit(c["LibraryEvent"].ContentListSelectedListUpdate,{id:e.subKnowledgeId}),this.$logger.info("subKnowledgeId2InfoMap["+e.subKnowledgeId+"]",this.subKnowledgeId2InfoMap.get(e.subKnowledgeId))}},handleKeyup:function(){this.$logger.info("handleKeyup ",this.inputTag),this.debouncedSearchKnowledge(this.inputTag),this.createTagName=this.inputTag},searchKnowledge:function(e){var t=this;d["info"]("searchKnowledge",e),this.searchList=[],"string"===typeof e&&e.trim().length>=1&&Object(u["KnowledgeSearch"])({key:e,tagType:this.currentMode===C.knowledge?g["T"].knowledge:g["T"].skill}).then((function(e){d["info"]("searchKnowledge response",e),t.searchList=e.result}))},handleDescriptionTagClose:function(e){this.$logger.info("handleDescriptionTagClose ",e);var t=this.descriptionTagList.findIndex((function(t){return t.subKnowledgeId===e.subKnowledgeId})),a=this.descriptionTagList[t];this.$logger.info("raw handleDescriptionTagClose ",a),a.tagList=a.tagList.filter((function(t){return t.name!==e.name})),this.descriptionTagList.splice(t,1,a),this.currentMode===C.knowledge?this.$emit("remove-knowledge-tag",Object(l["a"])({questionIndex:this.questionIndex},e)):this.$emit("remove-skill-tag",Object(l["a"])({questionIndex:this.questionIndex},e)),this.$logger.info("after handleDescriptionTagClose ",this.descriptionTagList[t])},handleActiveDescription:function(e){var t=this;this.$logger.info("handleActiveDescription TagList"+e," old tag list",this.tagList,this.descriptionTagList),this.activeSubKnowledgeId=e,this.$logger.info("activeSubKnowledgeId "+this.activeSubKnowledgeId);var a=this.descriptionTagList.findIndex((function(e){return e.subKnowledgeId===t.activeSubKnowledgeId})),i=this.descriptionTagList[a];i._updateTimestamp=(new Date).getTime(),this.descriptionTagList.splice(a,1,i),this.descriptionTagList=y(this.descriptionTagList,"_updateTimestamp","asc").reverse(),this.$logger.info("update sort ",this.descriptionTagList),d["info"]("dblclick desc searchKnowledge"),Object(u["KnowledgeQueryTagsByKnowledgeId"])({knowledgeId:this.activeSubKnowledgeId}).then((function(e){t.$logger.info("KnowledgeQueryTagsByKnowledgeId response",e.result);var a=e.result,i=Object(n["a"])(t.tagList);t.$logger.info("tag list filter before tag list"+t.tagOriginType.Description,i),i=i.filter((function(e){return e.type!==t.tagOriginType.Description})),t.$logger.info("tag list filter after tag list"+t.tagOriginType.Description,i);var s=[];a.forEach((function(e){-1===s.indexOf(e.name)&&(i.push(Object(l["a"])(Object(l["a"])({},e),{},{type:b.Description})),s.push(e.name))})),t.tagList=i,t.$logger.info("handleActiveDescription after update search tag list",t.tagList)}))},handleCreateTagByInput:function(){var e=this;if(this.$logger.info("handleCreateTagByInput "+this.createTagName),this.createTagName){var t=this.tagList.find((function(t){return t.name===e.createTagName}));t?this.$message.warn("already exist same name tag"):this.tagList.push({name:this.createTagName,type:this.tagOriginType.Create,tagType:this.currentMode===C.knowledge?g["T"].knowledge:g["T"].skill}),this.createTagName="",this.inputTag=""}},handleDeleteCreatedTag:function(e){var t=this;this.$logger.info("handleDeleteCreatedTag ",e);var a=[];this.tagList.forEach((function(i){i.type===t.tagOriginType.Create&&i.name===e.name||a.push(i)})),this.tagList=a,this.$logger.info("after handleDeleteCreatedTag tag list",this.tagList)},handleDeleteKnowledgeItem:function(e){var t=this;this.$logger.info("handleDeleteKnowledgeItem "+e,this.descriptionTagList);var a=this.descriptionTagList.findIndex((function(t){return t.subKnowledgeId===e})),i=this.descriptionTagList[a];-1!==a?(i.tagList.forEach((function(e){t.currentMode===C.knowledge?t.$emit("remove-knowledge-tag",Object(l["a"])({questionIndex:t.questionIndex},e)):t.$emit("remove-skill-tag",Object(l["a"])({questionIndex:t.questionIndex},e))})),this.descriptionTagList.splice(a,1),this.$logger.info("after delete "+e,this.descriptionTagList)):this.$logger.info("descriptionTagMap dont exist "+e)},handleDbClickTagListTag:function(e){var t=this;this.$logger.info("handleDbClickTagListTag",e),Object(u["KnowledgeSearch"])({words:e.name,tagType:this.currentMode===C.knowledge?g["T"].knowledge:g["T"].skill,gradeIds:this.gradeIds,subjectIds:this.subjectIds}).then((function(e){d["info"]("handleDbClickTagListTag searchKnowledge response",e),t.tagNameSearchList=e.result.filter((function(e){return e.curriculumId===t.$store.getters.bindCurriculum})),t.$logger.info("after filter curriculumId tagNameSearchList",t.tagNameSearchList),t.tagNameSearchListSelected=[],t.tagNameSearchListDialogueVisible=!0}))},handleEnsureTagSearchList:function(){var e=this;this.$logger.info("handleEnsureTagSearchList",this.tagNameSearchListSelected);var t=[];this.tagNameSearchList.forEach((function(a){-1!==e.tagNameSearchListSelected.indexOf(a.subKnowledgeId)?t.push(a):e.$logger.info(a.subKnowledgeId+" dont exist in ",e.tagNameSearchListSelected)})),this.$logger.info("ensureKnowledgeTagList",t),t.forEach((function(t){var a=e.descriptionTagList.findIndex((function(e){return e.subKnowledgeId===t.subKnowledgeId}));-1===a&&(e.descriptionTagList.push({subKnowledgeId:t.subKnowledgeId,tagList:[],_updateTimestamp:(new Date).getTime()}),e.subKnowledgeId2InfoMap.set(t.subKnowledgeId,Object(l["a"])({},t))),a=e.descriptionTagList.findIndex((function(e){return e.subKnowledgeId===t.subKnowledgeId}));var i=e.descriptionTagList[a];i.tagList.find((function(e){return e.name===t.name}))?e.$logger.info("skip! exist "+t.name+" "+t.id):(i.tagList.push(Object(l["a"])(Object(l["a"])({},t),{},{type:b.Origin})),e.currentMode===C.knowledge?e.$emit("add-knowledge-tag",Object(l["a"])({questionIndex:e.questionIndex},t)):e.$emit("add-skill-tag",Object(l["a"])({questionIndex:e.questionIndex},t)),e.descriptionTagList.splice(a,1,i))})),this.tagNameSearchListSelected=[],this.tagNameSearchList=[],this.tagNameSearchListDialogueVisible=!1},handleTagNameSearchListSelected:function(e){this.$logger.info("handleTagNameSearchListSelected",e);var t=this.tagNameSearchListSelected.indexOf(e.descriptionId);-1!==t?this.tagNameSearchListSelected.splice(t,1):this.tagNameSearchListSelected.push(e.descriptionId)},handleCreateDescription:function(){this.$logger.info("handleCreateDescription"),this.associateLibraryVisible=!0},handleEnsureAssociate:function(){this.$logger.info("handleEnsureAssociate"),this.associateLibraryVisible=!1},handleTagItemDragStart:function(e,t){this.$logger.info("handleTagItemDragStart",e,t),t.dataTransfer.setData("tag",JSON.stringify(e))},handleTagItemDrop:function(e,t){var a=e.subKnowledgeId;if(this.activeSubKnowledgeId===a){this.$logger.info("handleTagItemDrop "+a,e,t);var i=this.subKnowledgeId2InfoMap.get(a);this.$logger.info("knowledgeInfo ",i);var s=t.dataTransfer.getData("tag");this.$logger.info("drag tag ",s),s=JSON.parse(s);var n=Object.assign({},i);delete n.id,n.name=s.name,this.$logger.info("ready add tag ",n);var o=this.descriptionTagList.findIndex((function(e){return e.subKnowledgeId===a})),r=this.descriptionTagList[o];r.tagList.find((function(e){return e.name===n.name}))?(this.$logger.info("skip! exist "+n.name+" "+n.id),this.$message.warn("already exist same name tag")):(this.$logger.info("add tag",n),r.tagList.push(Object(l["a"])(Object(l["a"])({},n),{},{type:b.Origin})),this.$logger.info("tagItem",r),this.descriptionTagList.splice(o,1,r),this.replaceTempTag(n))}else this.$logger.info("not in edit mode",a,this.activeSubKnowledgeId)},replaceTempTag:function(e){this.$logger.info("replace tag",e);var t=this.descriptionTagList.findIndex((function(t){return t.subKnowledgeId===(e.subKnowledgeId||e.id)})),a=this.descriptionTagList[t];this.$logger.info("replace tag target list",a.tagList),a.tagList=a.tagList.filter((function(t){return t.name!==e.name})),a.tagList.push(Object(l["a"])(Object(l["a"])({},e),{},{type:b.Origin})),this.currentMode===C.knowledge?this.$emit("add-knowledge-tag",Object(l["a"])({questionIndex:this.questionIndex},e)):this.$emit("add-skill-tag",Object(l["a"])({questionIndex:this.questionIndex},e)),this.descriptionTagList.splice(t,1,a)},handleToggleMode:function(e){this.$logger.info("handleToggleMode "+e),this.currentMode=e,this.tagListVisible=!1,this.inputTag&&(this.debouncedSearchKnowledge(this.inputTag),this.createTagName=this.inputTag)},hide:function(e){this.$logger.info("hide"+e),this.$set(e,!1)},handleClickChange:function(e,t){this.$logger.info("handleClickChange"+e+" "+t),this.$set(e,t)},showLibrary:function(){this.associateLibraryVisible=!0,this.tagNameSearchListDialogueVisible=!1}}},k=w,T=(a("4554"),a("0c7c")),L=Object(T["a"])(k,i,s,!1,null,"6e13a457",null);t["a"]=L.exports},a5f4:function(e,t,a){},a615f:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"31.442",height:"40",viewBox:"0 0 31.442 40"},children:[{tag:"g",attrsMap:{transform:"translate(-179.2 -99.38)"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#6bc04a;",d:"M311.741,121.054h-8.855a3.363,3.363,0,0,1-3.334-3.372l-2.351-14.93a3.363,3.363,0,0,1,3.334-3.372h13.558a3.363,3.363,0,0,1,3.334,3.372l-2.351,14.93A3.363,3.363,0,0,1,311.741,121.054Z",transform:"translate(-112.388)"}},{tag:"path",attrsMap:{class:"b",style:"fill:#85d663;opacity:0.3;",d:"M309.8,99.48h-9.432A3.382,3.382,0,0,0,297,102.852l2.378,14.93a3.382,3.382,0,0,0,3.372,3.372S320.211,104.4,309.8,99.48Z",transform:"translate(-112.28 -0.095)"}},{tag:"path",attrsMap:{class:"c",style:"fill:#99dd7a;opacity:0.3;",d:"M305.523,99.48h-5.151A3.382,3.382,0,0,0,297,102.852l1.493,9.318S310.432,104.916,305.523,99.48Z",transform:"translate(-112.256 -0.095)"}},{tag:"path",attrsMap:{class:"d",style:"fill:#ffd629;",d:"M193.655,253.831l-12.8-7.107A2.924,2.924,0,0,1,179.4,244.2V229.982a2.924,2.924,0,0,1,1.459-2.528l12.8-7.107a2.916,2.916,0,0,1,2.923,0l12.8,7.107a2.924,2.924,0,0,1,1.459,2.528V244.2a2.924,2.924,0,0,1-1.459,2.528l-12.8,7.107A2.939,2.939,0,0,1,193.655,253.831Z",transform:"translate(-0.19 -114.84)"}},{tag:"path",attrsMap:{class:"e",style:"fill:#ff9a2c;opacity:0.2;",d:"M210.637,639.48v4.461a2.948,2.948,0,0,1-1.464,2.549l-12.8,7.168a2.9,2.9,0,0,1-2.923,0l-12.8-7.168a2.944,2.944,0,0,1-1.459-2.549v-4.257s1.01-.452,2.493,2.421c1.147,2.226,7.134,4.685,9.632,6.5a5.258,5.258,0,0,0,3.6,1.389,12.643,12.643,0,0,0,2.484-.576c2.233-.79,9.066-5.222,10.1-6.7C208.715,641,209.258,639.48,210.637,639.48Z",transform:"translate(0 -514.704)"}},{tag:"path",attrsMap:{class:"f",style:"fill:#f9f2d7;opacity:0.2;",d:"M234.729,224.149l-9.738-5.4a2.886,2.886,0,0,0-2.918,0L209.3,225.919s-.113,4.2,10.422,5.712,2.72.395,2.72.395S232.806,231.365,234.729,224.149Z",transform:"translate(-28.667 -113.316)"}},{tag:"path",attrsMap:{class:"g",style:"fill:#6bc04a;opacity:0.25;",d:"M375.76,446.593l.9,1.817a1.593,1.593,0,0,0,1.2.87l2.007.29a1.592,1.592,0,0,1,.88,2.716l-1.451,1.417a1.585,1.585,0,0,0-.457,1.408l.342,2a1.594,1.594,0,0,1-2.312,1.679l-1.793-.942a1.594,1.594,0,0,0-1.479,0l-1.793.942a1.593,1.593,0,0,1-2.312-1.679l.342-2a1.581,1.581,0,0,0-.457-1.408l-1.451-1.417a1.592,1.592,0,0,1,.885-2.716l2.007-.29a1.593,1.593,0,0,0,1.2-.87l.9-1.817a1.583,1.583,0,0,1,2.844,0Z",transform:"translate(-179.405 -330.031)"}},{tag:"path",attrsMap:{class:"h",style:"fill:#ea803f;",d:"M389.277,459.237l1.17,2.369a.953.953,0,0,0,.723.523l2.611.38a.955.955,0,0,1,.528,1.631l-1.893,1.845a.965.965,0,0,0-.276.847l.447,2.6a.957.957,0,0,1-1.389,1.008l-2.34-1.227a.95.95,0,0,0-.889,0l-2.335,1.227a.957.957,0,0,1-1.389-1.008l.447-2.6a.952.952,0,0,0-.276-.847l-1.893-1.845a.958.958,0,0,1,.533-1.631l2.611-.38a.972.972,0,0,0,.723-.523l1.17-2.369A.959.959,0,0,1,389.277,459.237Z",transform:"translate(-193.493 -342.41)"}}]}]})}},a67b:function(e,t,a){},a88c:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"skill-wrapper"},[a("div",{staticClass:"tag-list-show"},e._l(e.selectedSkillTags,(function(t,i){return a("a-row",{key:i,staticClass:"tag-line"},[a("a-col",{staticClass:"tag-name-col",attrs:{span:"5"}},[a("span",{staticClass:"tag-name tag-show-item"},[a("a-icon",{staticClass:"tag-name-icon",attrs:{type:"tag"}}),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[e._v(e._s(t.name))]),e._v(" "+e._s(t.name)+" ")],2)],1)]),a("a-col",{staticClass:"tag-name-col",attrs:{span:"17"}},[a("span",{staticClass:"tag-description  tag-show-item"},[e._v(" "+e._s(t.description)+" ")])]),a("a-col",{staticClass:"tag-action-col",attrs:{span:"2"}},[a("span",{staticClass:"tag-action"},[a("a-icon",{attrs:{type:"delete"},on:{click:function(a){return e.handleDeleteTag(t)}}})],1)])],1)})),1),a("div",{staticClass:"skill-tag-wrapper"},[a("a-row",[a("a-col",{attrs:{span:"3"}},[a("div",{staticClass:"tag-select grade-select border-right"},[a("div",{staticClass:"tag-label"},[e._v(" "+e._s(e.$t("teacher.add-unit-plan.select-grade"))+" ")]),a("div",{staticClass:"tag-list-container"},[a("div",{staticClass:"tag-list"},e._l(e.gradeList,(function(t,i){return a("div",{key:i,class:{"tag-item":!0,"active-item":e.gradeId===t.id},on:{click:function(a){return e.handleSelectGrade(t)}}},[e._v(e._s(t.name))])})),0)])])]),a("a-col",{attrs:{span:"21"}},[a("div",{staticClass:"tag-select grade-select"},[a("div",{staticClass:"tag-label"},[e._v(" "+e._s(e.$t("teacher.add-unit-plan.skill-tags"))+" ")]),a("div",{staticClass:"skill-tag-tree"},[a("div",{staticClass:"main-skill border-right"},[a("div",{staticClass:"tag-list-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.skillLoading,expression:"!skillLoading"}],staticClass:"tag-list"},e._l(e.skillTree,(function(t,i){return a("div",{key:i,class:{"tag-item":!0,"active-item":e.mainSkillId===t.id},on:{click:function(a){return e.handleSelectMainSkillItem(t)}}},[a("a-tooltip",{attrs:{placement:"leftTop"}},[a("template",{slot:"title"},[e._v(" "+e._s(t.name))]),e._v(" "+e._s(t.name)+" ")],2),t.children.length?a("a-icon",{staticClass:"tag-more",attrs:{type:"right"}}):e._e()],1)})),0),a("a-spin",{directives:[{name:"show",rawName:"v-show",value:e.skillLoading,expression:"skillLoading"}],staticClass:"spin-loading"})],1)]),a("div",{staticClass:"sub-skill border-right"},[a("div",{staticClass:"tag-list-container"},[a("div",{staticClass:"tag-list"},e._l(e.skillTreeChild,(function(t,i){return a("div",{key:i,class:{"tag-item":!0,"active-item":e.subSkillId===t.id},on:{click:function(a){return e.handleSelectSubSkillItem(t)}}},[a("a-tooltip",{attrs:{placement:"leftTop"}},[a("template",{slot:"title"},[e._v(e._s(t.name))]),e._v(" "+e._s(t.name)+" ")],2),e._v(" "+e._s(t.name)+" "),t.children.length?a("a-icon",{staticClass:"tag-more",attrs:{type:"right"}}):e._e()],1)})),0)])]),a("div",{staticClass:"grand-sub-skill border-right"},[a("div",{staticClass:"tag-list-container"},[a("div",{staticClass:"tag-list"},e._l(e.skillTreeGrandChild,(function(t,i){return a("div",{key:i,class:{"tag-item":!0,"active-item":e.grandSubSkillId===t.id},on:{click:function(a){return e.handleSelectGrandSubSkillItem(t)}}},[a("a-tooltip",{attrs:{placement:"leftTop"}},[a("template",{slot:"title"},[e._v(e._s(t.name))]),e._v(" "+e._s(t.name)+" ")],2),e._v(" "+e._s(t.name)+" "),t.tags.length?a("a-icon",{staticClass:"tag-more",attrs:{type:"right"}}):e._e()],1)})),0)])]),a("div",{staticClass:"skill-tag"},[a("div",{staticClass:"tag-list-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loadingSkill,expression:"!loadingSkill"}],staticClass:"tag-list"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showNewTagInput,expression:"showNewTagInput"}],staticClass:"tag-item input-tag-item"},[a("a-input",{staticClass:"new-tag-input",attrs:{placeholder:e.$t("teacher.add-unit-plan.input-new-tag")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAddNewTag.apply(null,arguments)}},model:{value:e.newTag,callback:function(t){e.newTag=t},expression:"newTag"}})],1),e._l(e.skillTags,(function(t,i){return a("div",{key:i,class:{"tag-item":!0,"active-item":-1!==e.selectedSkillTagIdList.indexOf(t.id)},on:{click:function(a){return e.handleSelectSkillTag(t)}}},[a("a-tooltip",{attrs:{placement:"leftTop"}},[a("template",{slot:"title"},[e._v(e._s(t.name))]),e._v(" "+e._s(t.name)+" ")],2),-1!==e.selectedSkillTagIdList.indexOf(t.id)?a("a-icon",{staticClass:"tag-more",attrs:{type:"check"}}):e._e()],1)}))],2),a("a-spin",{directives:[{name:"show",rawName:"v-show",value:e.loadingSkill,expression:"loadingSkill"}],staticClass:"spin-loading"})],1)])])])])],1)],1)])},s=[],n=(a("d81d"),a("d3b7"),a("b0c0"),a("a434"),a("823b")),o=a("0da2"),r={name:"SkillTag",props:{questionIndex:{type:String,default:""},gradeList:{type:Array,default:function(){return[]}},defaultGradeId:{type:String,default:""},selectedSkillTags:{type:Array,default:function(){return[]}}},mounted:function(){},data:function(){return{gradeId:"",mainSkillId:"",subSkillId:"",grandSubSkillId:"",skillTree:[],skillTreeChild:[],skillTreeGrandChild:[],skillTags:[],selectedSkillTagIdList:[],skillLoading:!1,newTag:"",showNewTagInput:!1,loadingSkill:!1,tagObjData:{},currentGrandSubSkill:{}}},created:function(){this.gradeId=this.defaultGradeId,this.selectedSkillTagIdList=this.selectedSkillTags.map((function(e){return e.id}))},methods:{handleSelectGrade:function(e){n["info"]("handleSelectGrade",e),this.gradeId=e.id,this.resetSkill(),this.getSkillTree()},checkSelectGrade:function(){return this.gradeId||this.$message.warn(this.$t("teacher.add-unit-plan.select-grade-first")),!!this.gradeId},resetSkill:function(){this.mainSkillId="",this.subSkillId="",this.grandSubSkillId="",this.skillTree=[],this.skillTreeChild=[],this.skillTreeGrandChild=[],this.skillTags=[],this.showNewTagInput=!1},getSkillTree:function(){var e=this;this.skillLoading=!0,n["info"]("grade:"+this.gradeId),Object(o["SkillGetTreeByGradeId"])({gradeId:this.gradeId}).then((function(t){n["info"]("getSkillTree response",t),e.skillTree=t.result,n["info"]("skillTree",e.skillTree)})).finally((function(){e.skillLoading=!1}))},handleSelectMainSkillItem:function(e){n["info"]("handleSelectMainSkillItem",e),e.id!==this.mainSkillId&&(this.resetSubSkillTags(),this.mainSkillId=e.id,this.skillTreeChild=e.children)},resetSubSkillTags:function(){this.subSkillId="",this.grandSubSkillId="",this.skillTreeChild=[],this.skillTreeGrandChild=[],this.skillTags=[],this.showNewTagInput=!1},handleSelectSubSkillItem:function(e){n["info"]("handleSelectSubSkillItem",e),e.id!==this.subSkillId&&(this.resetGrandSubSkillTags(),this.subSkillId=e.id,this.skillTreeGrandChild=e.children,this.showNewTagInput=!1)},resetGrandSubSkillTags:function(){this.grandSubSkillId="",this.skillTreeGrandChild=[],this.skillTags=[],this.showNewTagInput=!1},handleSelectGrandSubSkillItem:function(e){n["info"]("handleSelectGrandSubSkillItem",e),e.id!==this.mainSkillId&&(this.resetSkillTags(),this.grandSubSkillId=e.id,this.skillTags=[],this.currentGrandSubSkill=e,this.refreshSkillTags())},resetSkillTags:function(){this.skillTags=[],this.showNewTagInput=!0},handleSelectSkillTag:function(e){n["info"]("handleSelectSkillTag",e),-1===this.selectedSkillTagIdList.indexOf(e.id)?(this.$set(this.tagObjData,e.id,Object.assign({},this.currentGrandSubSkill)),this.selectedSkillTagIdList.push(e.id),this.$emit("add-skill-tag",{questionIndex:this.questionIndex,id:e.id,name:e.name,description:this.currentGrandSubSkill.name}),n["info"]("tagObjData",this.tagObjData)):(n["info"]("before remove skillTags",this.selectedSkillTagIdList,this.selectedSkillTagIdList.indexOf(e.id)),this.selectedSkillTagIdList.splice(this.selectedSkillTagIdList.indexOf(e.id),1),this.$delete(this.tagObjData,e.id),this.$emit("remove-skill-tag",{questionIndex:this.questionIndex,id:e.id}),n["info"]("tagObjData",this.tagObjData),n["info"]("after delete skillTags",this.selectedSkillTagIdList))},handleAddNewTag:function(){var e=this;n["info"]("handleAddNewTag",this.newTag),Object(o["SkillAddOrUpdateTag"])({skillId:this.currentGrandSubSkill.id,name:this.newTag}).then((function(t){n["info"]("SkillAddOrUpdateTag",t),e.newTag="",e.refreshSkillTags()}))},refreshSkillTags:function(){var e=this;this.loadingSkill=!0,n["info"]("refreshSkillTags"),Object(o["SkillQueryTagsBySkillId"])({skillId:this.currentGrandSubSkill.id}).then((function(t){n["info"]("SkillQueryTagsBySkillId",t),e.skillTags=t.result})).finally((function(){e.loadingSkill=!1}))},handleDeleteTag:function(e){n["info"]("handleDeleteTag",e),-1!==this.selectedSkillTagIdList.indexOf(e.id)?(n["info"]("before delete skillTags",this.selectedSkillTagIdList,this.selectedSkillTagIdList.indexOf(e.id)),this.selectedSkillTagIdList.splice(this.selectedSkillTagIdList.indexOf(e.id),1),this.$delete(this.tagObjData,e.id),this.$emit("remove-skill-tag",{questionIndex:this.questionIndex,id:e.id}),n["info"]("tagObjData",this.tagObjData),n["info"]("after delete skillTags",this.selectedSkillTagIdList)):n["info"]("no found target delete skillTag",e)}}},l=r,c=(a("35a2"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,"20b6c07e",null);t["a"]=d.exports},a903:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40"},children:[{tag:"g",attrsMap:{id:"组_3098","data-name":"组 3098",transform:"translate(-1148 -81)"},children:[{tag:"g",attrsMap:{id:"组_2452","data-name":"组 2452",transform:"translate(1046.967 -34.555)"},children:[{tag:"path",attrsMap:{id:"路径_1323","data-name":"路径 1323",d:"M257.987,432.507h0a2.427,2.427,0,1,0,4.855,0h0a2.427,2.427,0,1,0-4.855,0Z",transform:"translate(-148.775 -298.588)",fill:"#15c39a"}},{tag:"path",attrsMap:{id:"路径_1324","data-name":"路径 1324",d:"M459.935,432.507h0a2.427,2.427,0,1,0,4.855,0h0a2.427,2.427,0,1,0-4.855,0Z",transform:"translate(-341.129 -298.588)",fill:"#15c39a"}},{tag:"path",attrsMap:{id:"路径_1325","data-name":"路径 1325",d:"M661.883,432.507a2.427,2.427,0,1,0,2.427-2.427A2.427,2.427,0,0,0,661.883,432.507Z",transform:"translate(-533.483 -298.588)",fill:"#15c39a"}},{tag:"path",attrsMap:{id:"路径_1326","data-name":"路径 1326",d:"M139.309,127.116a17.325,17.325,0,0,0-4.226-5.506,21.375,21.375,0,0,0-27.5,0,17.263,17.263,0,0,0-4.226,5.506,15.57,15.57,0,0,0-1.562,6.8,15.845,15.845,0,0,0,2.179,7.962,18.117,18.117,0,0,0,5.126,5.552v5.737a1.388,1.388,0,0,0,.692,1.2,1.389,1.389,0,0,0,1.384,0l6.071-3.506a22.012,22.012,0,0,0,4.088.381,20.768,20.768,0,0,0,13.751-5.01,17.262,17.262,0,0,0,4.226-5.506,15.605,15.605,0,0,0,0-13.613Zm-17.977,21.362a19.272,19.272,0,0,1-4.036-.427,1.383,1.383,0,0,0-.98.156l-4.451,2.571v-4.071a1.4,1.4,0,0,0-.623-1.159,13.915,13.915,0,0,1-6.688-11.629c0-8.026,7.524-14.552,16.778-14.552s16.778,6.527,16.778,14.552-7.53,14.558-16.778,14.558Z",transform:"translate(0 0)",fill:"#15c39a"}}]},{tag:"rect",attrsMap:{id:"矩形_1460","data-name":"矩形 1460",width:"40",height:"40",transform:"translate(1148 81)",fill:"none"}}]}]})}},abb8:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["student"===e.currentRole?a("a-rate",{attrs:{"allow-half":"",disabled:""},model:{value:e.data.reviewsScore,callback:function(t){e.$set(e.data,"reviewsScore",t)},expression:"data.reviewsScore"}}):e._e(),"teacher"===e.currentRole?a("a-popover",{attrs:{placement:e.placement},on:{visibleChange:e.debouncedGetData}},[a("template",{slot:"content"},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-space",{attrs:{direction:"vertical"}},[a("a-space",{attrs:{align:"center"}},[a("label",[e._v("Students engagement")]),a("a-rate",{staticStyle:{margin:"0"},attrs:{tooltips:e.RATE_TOOLTIPS.ENGAGEMENT,"allow-half":"",disabled:""},model:{value:e.data.studentsEngagement,callback:function(t){e.$set(e.data,"studentsEngagement",t)},expression:"data.studentsEngagement"}})],1),a("a-space",{attrs:{align:"center"}},[a("label",[e._v("Effectiveness of teaching & learning")]),a("a-rate",{staticStyle:{margin:"0"},attrs:{tooltips:e.RATE_TOOLTIPS.EFFETIVENESS,"allow-half":"",disabled:""},model:{value:e.data.effectiveness,callback:function(t){e.$set(e.data,"effectiveness",t)},expression:"data.effectiveness"}})],1),a("a-space",{attrs:{align:"center"}},[a("label",[e._v("Quality of the content")]),a("a-rate",{staticStyle:{margin:"0"},attrs:{tooltips:e.RATE_TOOLTIPS.QUALITY,"allow-half":"",disabled:""},model:{value:e.data.quality,callback:function(t){e.$set(e.data,"quality",t)},expression:"data.quality"}})],1)],1)],1)],1),a("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.OVERALL,"allow-half":"",disabled:""},model:{value:e.data.overall,callback:function(t){e.$set(e.data,"overall",t)},expression:"data.overall"}}),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"down"}})],2):e._e()],1)},s=[],n=a("5530"),o=(a("d3b7"),a("f93e")),r=a("c2e5"),l=a("6b36"),c=a("2f62"),d=a("4fcf"),u=d.debounce,h={name:"ReviewScore",props:{review:{type:Object,default:function(){}},placement:{type:String,default:"bottom"},id:{type:String,default:null}},watch:{review:{handler:function(e){this.data=e?Object(n["a"])({},e):{}},immediate:!0},id:{handler:function(e){e&&(this.reviewId=e)},immediate:!0}},computed:Object(n["a"])({},Object(c["e"])({currentRole:function(e){return e.user.currentRole}})),created:function(){this.debouncedGetData=u(this.getReview,300)},beforeDestroy:function(){this.timer&&clearTimeout(this.timer)},data:function(){return{RATE_TOOLTIPS:o["y"],data:{},reviewId:this.id,hasRender:!1,timer:null,loading:!1}},methods:{getReview:function(e){var t=this;if(this.reviewId&&e&&!this.hasRender){var a=null;a="student"===this.currentRole?l["ReviewsTaskStats"]:r["ReviewsTeacherStats"],this.loading=!0,a&&a({taskId:this.reviewId,purchasesId:this.reviewId}).then((function(e){e.success&&(t.data=e.result,t.hasRender=!0,t.timer=setTimeout((function(){t.hasRender=!1}),6e4))})).finally((function(){t.loading=!1}))}}}},p=h,m=a("0c7c"),g=Object(m["a"])(p,i,s,!1,null,"f2be10da",null);t["a"]=g.exports},ac3e:function(e,t,a){},acba:function(e,t,a){"use strict";a("7715")},acd9:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var i=a("b775"),s={shareStatus:"/classcipe/api/contentShare/shareStatus",addOrUpdate:"/classcipe/api/contentShare/addOrUpdate",queryContentShare:"/classcipe/api/contentShare/queryContentShare",resetPassword:"/classcipe/api/contentShare/resetPassword",anonGetShareContentDetails:"/classcipe/api/anon/getShareContentDetails",getShareInfo:"/classcipe/api/anon/getShareInfo"};function n(e){return Object(i["d"])({url:s.shareStatus,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(i["d"])({url:s.addOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(i["d"])({url:s.queryContentShare,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["d"])({url:s.resetPassword,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["d"])({url:s.anonGetShareContentDetails,method:"get",params:e})}function d(e){return Object(i["d"])({url:s.getShareInfo,method:"get",params:e})}},ad1e:function(e,t,a){},adfc:function(e,t,a){"use strict";var i=function(){var e=this,t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"my-common-preview"},[t.loading?[s("a-skeleton",{attrs:{active:""}})]:[s("div",{staticClass:"main-content-preview",class:{"has-extra-info":-1!==[t.typeMap.task,t.typeMap["unit-plan"]].indexOf(t.type)}},[s("div",{staticClass:"top-header"},[s("div",{staticClass:"title-line"},[s("div",{staticClass:"name"},[t._v(" "+t._s(t.data.name)+" ")]),s("div",{staticClass:"action-item"},[s("div",{staticClass:"star"},[t.data.createBy!==t.$store.getters.userInfo.email?[t.data.isFavorite?t._e():s("img",{attrs:{src:a("58e7")},on:{click:function(e){return t.handleFavorite(t.data)}}}),t.data.isFavorite?s("img",{attrs:{src:a("24e3")},on:{click:function(e){return t.handleFavorite(t.data)}}}):t._e()]:t._e()],2),this.isOwner||this.isCollaborater?s("div",{staticClass:"edit"},[s("a-button",{attrs:{type:"primary",shape:"round"},on:{click:function(e){return t.handleEditItem(t.data)}}},[s("div",{staticClass:"button-content"},[t._v(" Edit "),s("img",{staticClass:"edit-icon",attrs:{src:a("11aa")}})])])],1):s("div",{staticClass:"edit"},[t.myContentId?s("a-button",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:t.copyLoading,type:"primary",shape:"round"},on:{click:function(e){return t.handleEditItem({id:t.myContentId})}}},[s("div",{staticClass:"button-content"},[t._v(" Edit in my content "),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"edit"}})],1)]):s("a-button",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:t.copyLoading,type:"primary",shape:"round"},on:{click:t.handleDuplicateItem}},[s("div",{staticClass:"button-content"},[t._v(" Copy "),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"copy"}})],1)]),t.data.type===t.typeMap.task?s("a-button",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:t.copyLoading,type:"primary",shape:"round"},on:{click:t.handleStartTask}},[s("div",{staticClass:"button-content"},[t._v(" Start "+t._s(t.data.buyed?"Session":"")),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"play-circle"}})],1)]):t._e()],1)])])]),s("a-row",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"author-info"},[s("a-col",{staticClass:"avatar-icon",attrs:{span:"3"}},[s("img",{attrs:{src:t.collaborate.owner&&t.collaborate.owner.avatar}})]),s("a-col",{attrs:{span:"21"}},[s("div",{staticClass:"sub-info"},[s("div",{staticClass:"created-by"},[t._v(" "+t._s(t.data.createBy)+" ")]),s("div",{staticClass:"created-time"},[t.lastChangeSavedTime?[t._v(" "+t._s(t.lastChangeSavedTime)+" ")]:t._e()],2)]),s("div",{staticClass:"star-info"},[s("review-score",{attrs:{review:t.reviewsStats,placement:"bottom"}}),s("a-button",{attrs:{type:"link"}},[t._v(t._s(t._f("percentFormat")(t.reviewsStats.overall))+" ("+t._s(t.reviewsStats.reviewsCount)+" reviews)")])],1)])],1),s("a-space",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"author-info"},[s("div",{staticClass:"avatar-icon"},[s("img",{attrs:{src:t.collaborate.owner&&t.collaborate.owner.avatar}})]),s("div",[s("div",{staticClass:"sub-info"},[s("div",{staticClass:"created-by"},[t._v(" "+t._s(t.collaborate.owner&&t.collaborate.owner.nickname)+" ")]),s("div",{staticClass:"created-time"},[t.lastChangeSavedTime?[t._v(" "+t._s(t.lastChangeSavedTime)+" ")]:t._e()],2)]),s("div",{staticClass:"star-info",on:{click:function(){return e.viewMode="Reviews"}}},[s("a-tooltip",{attrs:{placement:"right"}},[s("template",{slot:"title"},[t._v(" "+t._s(t.reviewsStats.reviewsScoreStatDetail&&t.reviewsStats.reviewsScoreStatDetail[4]&&t.reviewsStats.reviewsScoreStatDetail[4].reviewsScoreCount)+" people gave a score of 5 stars ")]),s("a-rate",{attrs:{value:t.reviewsStats.avgReviewsScore,"allow-half":"",disabled:""}})],2)],1)])]),s("a-row",{staticClass:"data-info"},[s("a-col",{staticClass:"right-detail",attrs:{span:"24"}},[s("div",{staticClass:"sub-detail"},[s("div",{staticClass:"detail-block"},[s("div",{staticClass:"block-main-label"},[t.data.type===t.typeMap.task?[t._v("Task details")]:[t._v("Overview")]],2),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"view-text"},[t._v(" "+t._s(t.data.overview)+" ")])]),t.data.type===t.typeMap.task&&t.data.questionNames.length>0?[s("div",{staticClass:"block-main-label"},[t._v(" Key question(s)/Line(s) of Inquiry ")]),s("div",{staticClass:"detail-block",staticStyle:{margin:"10px"}},[s("div",{staticClass:"keyword-block-content"},[s("div",{staticClass:"content-list"},t._l(t.data.questionNames,(function(e,a){return s("div",{key:a,staticClass:"content-item"},[e?s("div",{staticClass:"question"},[t._v(" "+t._s(e)+" ")]):t._e()])})),0)])])]:t._e(),s("div",{staticClass:"block-main-label"},[t._v(" Customized tags ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"custom-tags"},t._l(t.data.customTags,(function(e,a){return s("div",{key:"tagIndex"+a,staticClass:"tag-item"},[s("a-tooltip",{attrs:{title:e.parentName}},[s("a-tag",{staticClass:"tag"},[t._v(" "+t._s(e.name)+" ")])],1)],1)})),0)]),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"block-main-label"},[t._v(" This task contains interactive questions of ")]),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"overview-block"},[s("div",{staticClass:"custom-tags"},t._l(t.inActiveTypes,(function(e,a){return s("div",{key:"interActiveIndex"+a,staticClass:"tag-item"},[s("a-tooltip",{attrs:{title:e}},[s("a-tag",{staticClass:"tag",attrs:{color:t.tagColorList[a]}},[t._v(" "+t._s(e)+" ")])],1)],1)})),0)]),s("div",{staticClass:"block-main-label"},[t._v(" Learning Objectives ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"learn-question-tag"},[s("div",{staticClass:"learn-out",staticStyle:{margin:"10px"}},[s("ui-learn-out-sub",{attrs:{"learn-outs":t.data.learnOuts,"self-outs":t.data.selfOuts,"class-info-list":t.itemsList}})],1)])]),t.data.inquiry?[s("div",{staticClass:"block-main-label"},[t._v(" Big idea ")]),s("div",{staticClass:"inquiry-block-content"},[s("div",{staticClass:"inquiry"},[t._v(" "+t._s(t.data.inquiry)+" ")])])]:t._e(),t.data.materialList&&t.data.materialList.length?[s("div",{staticClass:"block-main-label"},[t._v(" Material list ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"material-list"},t._l(t.data.materialList,(function(e,a){return s("div",{key:a,staticClass:"material-item"},[s("div",{staticClass:"material-name"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"material-link",on:{click:function(a){return t.handleOpenLink(e.link)}}},[t._v(" "+t._s(e.link)+" ")])])})),0)])]:t._e(),t.data.rwc?[s("div",{staticClass:"block-main-label"},[t._v(" Real World Connection(s) ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"view-text"},[t._v(" "+t._s(t.data.rwc)+" ")])])]:t._e()],2)])])],1),s("a-row",{staticClass:"preview-data-info"},[s("a-col",{staticClass:"slide-preview",attrs:{span:"24"}},[t.data.scenarios||t.data.inquiry||t.data.questions&&t.data.questions.length?s("div",{staticClass:"data-detail-wrapper"},[t.data.scenarios?[s("div",{staticClass:"block-main-label"},[t._v(" Sustainable development goal ")]),s("div",{staticClass:"detail-block"},t._l(t.data.scenarios,(function(e,a){return s("div",{key:a,staticClass:"scenario-item ref-block"},[s("div",{staticClass:"scenario-block-content"},[s("div",{staticClass:"content-list"},[s("div",{staticClass:"content-item"},[s("div",{staticClass:"question"},[e.description?[s("a-tooltip",{attrs:{title:e.description,placement:"top"}},[t._v(" "+t._s(e.sdgName)+" ")])]:[t._v(" "+t._s(e.sdgName))]],2),s("div",{staticClass:"tags"},t._l(e.sdgKeyWords,(function(e,a){return s("div",{key:"tagIndex"+a,staticClass:"tag-item"},[s("a-tag",{staticClass:"tag"},[t._v(" "+t._s(e.name)+" ")])],1)})),0)])])])])})),0)]:t._e(),t.data&&t.data.inquiry?[s("div",{staticClass:"detail-block"},[s("div",{staticClass:"block-main-label"},[t._v(" Big idea ")]),s("div",{staticClass:"inquiry-block-content"},[s("div",{staticClass:"inquiry"},[t._v(" "+t._s(t.data.inquiry)+" ")])])])]:t._e(),t.data&&t.data.questions&&t.data.questions.length?[s("div",{staticClass:"block-main-label"},[t._v(" Key question(s)/Line(s) of Inquiry ")]),s("div",{staticClass:"detail-block"},[s("div",{staticClass:"keyword-block-content"},[t.data.questions&&t.data.questions.length?s("div",{staticClass:"content-list"},t._l(t.data.questions,(function(e,a){return s("div",{key:"qIndex"+a,staticClass:"content-item"},[e&&e.name?s("div",{staticClass:"question"},[t._v(" "+t._s(e.name)+" ")]):t._e()])})),0):t._e()])])]:t._e()],2):t._e(),t.type===t.typeMap.evaluation?[s("evaluation-table-preview",{attrs:{"evaluation-id":t.data.id}})]:t._e()],2)],1),s("div",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"associate-info"},[t.type===t.typeMap.task?[s("task-link",{ref:"commonLink",attrs:{"show-drag-tips":!1,isLibrary:t.isLibrary,"hidden-empty-group":!0,"can-edit":!1,"from-id":t.id,"from-type":t.type}})]:t._e(),t.type===t.typeMap["unit-plan"]?[s("plan-link",{ref:"commonLink",attrs:{isLibrary:t.isLibrary,"hidden-empty-group":!0,"can-edit":!1,"from-id":t.id,"from-type":t.type}})]:t._e()],2),s("a-row",{staticClass:"reviews-info"},["student"===t.currentRole?s("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[s("rate-by-percent",{attrs:{rates:t.reviewsStats}}),s("reviews-preview",{attrs:{id:t.id,role:"student",list:t.ReviewsTask.ReviewsTaskList,save:t.ReviewsTask.ReviewsTaskSave,del:t.ReviewsTask.ReviewsTaskDelete,myReview:t.ReviewsTask.ReviewsTaskMyReview}})],1):s("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[s("reviews-preview",{attrs:{id:t.id,role:"teacher",list:t.ReviewsTeacher.ReviewsTeacherList,save:t.ReviewsTeacher.ReviewsTeacherSave,del:t.ReviewsTeacher.ReviewsTeacherDelete,myReview:t.ReviewsTeacher.ReviewsTeacherMyReview,canEdit:!0},on:{update:t.loadReviewStats}})],1)],1)],1),-1!==[t.typeMap.task,t.typeMap["unit-plan"]].indexOf(t.type)?s("div",{staticClass:"extra-content-preview"},[t.type===t.typeMap.task&&t.data.presentationId&&t.imgList.length>0?[s("div",{staticClass:"top-icon-groups"},[s("a-col",{staticClass:"material-row"},[Object.keys(t.currentPageMaterial).length>0?s("div",{staticClass:"icon-group"},[t.currentPageMaterial.hasOwnProperty("text")?s("a-badge",{attrs:{count:t.showMaterialSize("text")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("text")}}},[s("text-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Text")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("image")?s("a-badge",{attrs:{count:t.showMaterialSize("image")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("image")}}},[s("image-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Image")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("video")?s("a-badge",{attrs:{count:t.showMaterialSize("video")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("video")}}},[s("video-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Video")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("audio")?s("a-badge",{attrs:{count:t.showMaterialSize("audio")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("audio")}}},[s("audio-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Audio")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("iframe")?s("a-badge",{attrs:{count:t.showMaterialSize("iframe")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("iframe")}}},[s("youtube-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Youtube")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("pdf")?s("a-badge",{attrs:{count:t.showMaterialSize("pdf")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("pdf")}}},[s("pdf-type-svg"),s("div",{staticClass:"icon-text"},[t._v("PDF")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("website")?s("a-badge",{attrs:{count:t.showMaterialSize("website")}},[s("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("website")}}},[s("url-type-svg"),s("div",{staticClass:"icon-text"},[t._v("Website")])],1)]):t._e()],1):t._e()])],1),s("a-skeleton",{attrs:{loading:t.slideLoading,active:""}},[s("div",{ref:"slide",staticClass:"slide-select-wrapper"},[s("div",{staticClass:"slide-select"},[s("div",{staticClass:"slide-select-and-preview"},[s("div",{staticClass:"slide-preview",style:{width:"310px"}},[s("a-carousel",{ref:"carousel",attrs:{arrows:"","after-change":t.onChangePage}},[s("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"-23px","z-index":"9"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[s("a-icon",{style:{"font-size":"20px",color:"#aaa",opacity:.6},attrs:{type:"left-circle"}})],1),s("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"-23px","z-index":"9"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[s("a-icon",{style:{"font-size":"20px",color:"#aaa",opacity:.6},attrs:{type:"right-circle"}})],1),t._l(t.imgList,(function(e,t){return s("div",{key:t,staticClass:"slide-item"},[s("img",{attrs:{src:e}})])}))],2),t.currentPageItem?s("div",{staticClass:"plugin-tags"},[s("a-row",{staticClass:"tag-row"},[t.currentPageItem.data.bloomLevel?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Bloom's Taxonomy:")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[t._v(t._s(t.currentPageItem.data.bloomLevel))])]):t._e(),t.currentPageItem.data.knowledgeLevel?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Knowledge dimension(s):")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[t._v(t._s(t.currentPageItem.data.knowledgeLevel))])]):t._e()]),s("a-row",{staticClass:"tag-row"},[t.currentPageItem.data.verbs&&t.currentPageItem.data.verbs.length>0?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Command terms:")]),t._l(t.currentPageItem.data.verbs,(function(e,a){return s("span",{key:a,staticClass:"tag-value",staticStyle:{color:"#15C39A"}},[t._v(t._s(e))])}))],2):t._e(),t.currentPageTips?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Tip added:")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#0054FF"}},[t._v(t._s(t.currentPageTips.tip))])]):t._e()]),t.currentPageItem.data.learnOuts&&t.currentPageItem.data.learnOuts.length>0?s("a-row",{staticClass:"tag-row"},[s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("Learning Objectives:")]),t._l(t.currentPageItem.data.learnOuts,(function(e,a){return s("span",{key:a,staticClass:"tag-value",staticStyle:{color:"#00BCF2"}},[s("a-tooltip",{attrs:{title:e.path,overlayStyle:{"z-index":"3000"}}},[t._v(t._s(e.name)+" ")])],1)}))],2)]):t._e(),s("a-row",{staticClass:"tag-row"},[s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[t._v("This is a "),s("span",[t._v(t._s(t.currentPageItem.type))]),t._v(" slide")])])])],1):t._e(),t.imgList&&t.imgList.length?s("div",{staticClass:"page-info"},[t._v(" "+t._s(t.currentImgIndex+1)+" / "+t._s(t.imgList.length)+" ")]):t._e()],1)])])])])]:t._e(),t.type===t.typeMap["unit-plan"]?[s("div",{staticClass:"unit-cover",style:{"background-image":"url("+(t.data.image?t.data.image:"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+")"}})]:t._e(),t.type===t.typeMap.task?s("div",{staticClass:"recommend"},[s("div",{staticClass:"recommend-title"},[s("a-divider",[t._v("Recommend")])],1),s("div",{staticClass:"recommend-list"},t._l(t.recommendTemplateList,(function(e,a){return s("div",{key:a,staticClass:"slide-preview-item",style:{width:"310px"}},[s("a-carousel",{ref:"carousel",refInFor:!0,attrs:{arrows:""}},[s("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"-23px","z-index":"9"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[s("a-icon",{style:{"font-size":"20px",color:"#aaa",opacity:.6},attrs:{type:"left-circle"}})],1),s("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"-23px","z-index":"9"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[s("a-icon",{style:{"font-size":"20px",color:"#aaa",opacity:.6},attrs:{type:"right-circle"}})],1),t._l(e.images,(function(e,t){return s("div",{key:t,staticClass:"slide-item"},[s("img",{attrs:{src:e}})])}))],2),e.introduce?s("a-row",{staticClass:"slide-desc",attrs:{title:e.introduce}},[t._v(" "+t._s(e.introduce)+" ")]):t._e(),s("div",{staticClass:"recommend-slide-name"},[t._v(" "+t._s(e.name)+" ")])],1)})),0)]):t._e()],2):t._e()],s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px",zIndex:6e3,title:"My Materials"},on:{ok:function(e){t.materialVisible=!1},cancel:function(e){t.materialVisible=!1}},model:{value:t.materialVisible,callback:function(e){t.materialVisible=e},expression:"materialVisible"}},[s("task-material-preview",{attrs:{"current-page-element-lists":t.currentPageElementLists,"filter-type":t.filterMaterialType,"current-page-index":t.currentImgIndex}})],1),s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"900px",zIndex:5e3,title:null},on:{ok:function(e){t.mediaVisible=!1},cancel:function(e){t.mediaVisible=!1}},model:{value:t.mediaVisible,callback:function(e){t.mediaVisible=e},expression:"mediaVisible"}},[s("media-preview",{attrs:{"media-list":t.mediaList,"material-type":t.filterMaterialType}})],1)],2)},s=[],n=a("5530"),o=(a("a9e3"),a("d81d"),a("a630"),a("3ca3"),a("d3b7"),a("6062"),a("ddb0"),a("159b"),a("b0c0"),a("823b")),r=a("3f76"),l=a("69b3"),c=a("8c95"),d=a("c621"),u=a("972f"),h=a("7eee"),p=a("d33b"),m=a("873a"),g=a("542c"),f=a("91ff"),v=a("d980"),y=a("dd6e"),b=a("abb8"),C=a("e11c"),w=a("9afb"),k=a("f93e"),T=a("2934"),L=a("5225"),I=a("9fb0"),S=a("8ded"),A=a.n(S),x=a("2f62"),_=a("6b36"),D=a("c2e5"),O=a("1899"),E=a("2f59"),N=a("ca00"),M=N.formatLocalUTC,j=a("de0d"),R=j.UnitPlanQueryById,B=a("b199"),P=B.TaskQueryById,U=a("9f06"),F=U.EvaluationQueryById,V=a("95c6"),$=V.FavoritesAdd,q=a("56f2"),K=q.SelfStudyTaskBye,Q=q.SelfStudyTaskStart,G={name:"CommonPreviewV2",components:{PlanLink:O["a"],UiLearnOutSub:f["a"],EvaluationTablePreview:u["a"],CommonAssociatePreview:c["a"],NoMoreResources:l["a"],TaskLink:h["a"],MediaPreview:m["a"],TaskMaterialPreview:g["a"],RateByPercent:v["a"],ReviewsPreview:y["a"],ReviewScore:b["a"]},props:{id:{type:String,required:!0},type:{type:Number,required:!0},isLibrary:{type:Boolean,default:!1},myContentId:{type:String,default:null}},mixins:[p["a"],C["a"],E["a"]],computed:Object(n["a"])(Object(n["a"])({},Object(x["e"])({userMode:function(e){return e.app.userMode},currentRole:function(e){return e.user.currentRole}})),{},{lastChangeSavedTime:function(){if(this.data){o["info"]("lastChangeSavedTime data",this.data);var e=this.data.updateTime||this.data.createTime;if(e)return M(e)}return""},inActiveTypes:function(){var e=[];return this.itemsList&&(e=this.itemsList.map((function(e){return e.type}))),Array.from(new Set(e))}}),data:function(){return{loading:!0,slideLoading:!1,copyLoading:!1,data:null,imgList:[],viewMode:"Detail",RATE_TOOLTIPS:k["y"],ReviewsTask:_,ReviewsTeacher:D,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:-1,typeMap:r["e"],subPreviewVisible:!1,currentImgIndex:0,initPrompts:[],reviewsStats:{avgReviewsScore:0,reviewsScoreStatDetail:[],reviewsCount:0,effectiveness:0,overall:0,quality:0,studentsEngagement:0},recommendTemplateList:[]}},created:function(){o["info"]("CommonPreviewV2 id "+this.id+" type "+this.type),this.loadData()},methods:{loadData:function(){var e=this;o["info"]("loadData "+this.id+" type "+this.type),this.loading=!0,this.type===this.typeMap["unit-plan"]?R({id:this.id}).then((function(t){o["info"]("UnitPlanQueryById "+e.id,t.result),e.data=t.result,e.oldForm=e.data,e.data&&e.data.image&&(e.imgList=[e.data.image])})).finally((function(){e.loading=!1,e.queryContentCollaborates(e.id,e.type)})):this.type===this.typeMap.task?(P({id:this.id}).then((function(t){o["info"]("TaskQueryById "+e.id,t.result),e.data=t.result,e.loading=!1,e.oldForm=e.data,e.queryContentCollaborates(e.id,e.type),e.loadThumbnail(),e.data.presentationId&&e.getClassInfo(e.data.presentationId)})),this.$logger.info("loadRecommendThumbnail"),Object(d["f"])({taskId:this.id}).then((function(t){o["info"]("loadRecommendThumbnail res:",t.result),t.success&&(e.recommendTemplateList=t.result)}))):this.type===this.typeMap.evaluation&&F({id:this.id}).then((function(t){o["info"]("EvaluationQueryById "+e.id,t.result),e.data=t.result,e.oldForm=e.data,e.data&&e.data.image&&(e.imgList=[e.data.image])})).finally((function(){e.loading=!1,e.queryContentCollaborates(e.id,e.type)})),Object(T["a"])(k["q"]).then((function(t){t.success&&(o["info"]("DICT_PROMPT_TYPE",t.result),e.initPrompts=t.result)})),this.loadReviewStats()},handleAuthCallback:function(){this.$logger.info("Preview handleAuthCallback"),"loadThumbnail"===this.currentMethodName?this.loadThumbnail():"handleDuplicateItem"===this.currentMethodName&&this.handleDuplicateItem()},loadThumbnail:function(){var e=this;this.$logger.info("Preview loadThumbnail ",this.data),this.data.presentationId?this.isLibrary?Object(d["d"])({taskId:this.data.id}).then((function(t){if(t.code!==e.ErrorCode.ppt_google_token_expires&&t.code!==e.ErrorCode.ppt_forbidden){var a=t.result.pageObjects;e.thumbnailList=[],a.length?a.forEach((function(t){e.imgList.push(t.contentUrl),e.thumbnailList.push({contentUrl:t.contentUrl,id:t.pageObjectId}),e.slideLoading=!1,e.$logger.info("current imgList ",e.imgList)})):(e.imgList=[],e.slideLoading=!1)}else e.$logger.info("等待授权事件通知"),e.currentMethodName="loadThumbnail"})):Object(d["d"])({taskId:this.data.id}).then((function(t){if(t.code!==e.ErrorCode.ppt_google_token_expires&&t.code!==e.ErrorCode.ppt_forbidden){var a=t.result.pageObjects;e.thumbnailList=[],a.length?a.forEach((function(t){e.imgList.push(t.contentUrl),e.thumbnailList.push({contentUrl:t.contentUrl,id:t.pageObjectId}),e.slideLoading=!1,e.$logger.info("current imgList ",e.imgList)})):(e.imgList=[],e.slideLoading=!1)}else e.$logger.info("等待授权事件通知"),e.currentMethodName="loadThumbnail"})):this.slideLoading=!1},loadReviewStats:function(){var e=this,t=null;t="student"===this.currentRole?_["ReviewsTaskStats"]:D["ReviewsTeacherStats"],t&&t({taskId:this.id,purchasesId:this.id}).then((function(t){t.success&&(e.reviewsStats=t.result)}))},handleSelectContentType:function(e){o["info"]("handleSelectContentType "+e),this.activeContentType=e},handleSubPreviewClose:function(){o["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1},handleViewModeChange:function(){this.$logger.info("handleViewModeChange "+this.viewMode)},handleFavorite:function(e){var t=this;o["info"]("handleFavorite",e),$({sourceId:e.id,sourceType:e.type}).then((function(a){o["info"]("FavoritesAdd ",a),e.isFavorite=!e.isFavorite,t.data.isFavorite=e.isFavorite,t.$emit("favoritiesAdd",Object(n["a"])({},t.data))}))},handleGotoImgIndex:function(e){this.$logger.info("handleGotoImgIndex "+e),this.currentImgIndex=e,this.$refs.carousel.goTo(e)},handleEditItem:function(e){e.type=this.type,o["info"]("handleEditItem",e),e.type===r["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+e.id,"_blank"):e.type===r["e"].task?window.open("/teacher/task-redirect/"+e.id,"_blank"):e.type===r["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+e.id,"_blank")},handleDuplicateItem:function(){var e=this;this.$logger.info("handleDuplicateItem",this.data),this.$confirm({title:"Confirm to copy",content:"Are you sure to copy "+this.data.name+" ?",centered:!0,onOk:function(){e.copyLoading=!0,Object(w["Duplicate"])({id:e.data.id,type:e.data.type}).then((function(t){t.code!==e.ErrorCode.ppt_google_token_expires&&t.code!==e.ErrorCode.ppt_forbidden?(e.$logger.info("Duplicate response",t),e.$message.success("Copy successfully"),e.$router.push({path:"/teacher/main/created-by-me"})):e.currentMethodName="handleDuplicateItem"})).finally((function(){e.copyLoading=!1}))}})},handleStartTask:function(){var e=this;this.$confirm({title:"Confirm to start",content:"Are you sure to start "+this.data.name+" ?",centered:!0,onOk:function(){e.copyLoading=!0,e.data.buyed||k["X"].SCHOOL===e.userMode?e.handleStartSession(e.data.id):K({taskId:e.data.id}).then((function(t){t.success&&e.handleStartSession(e.data.id)})).finally((function(){e.copyLoading=!1}))}})},handleOpenLink:function(e){window.open(e,"_blank")},handleStartSession:function(e){var t=this;this.copyLoading=!0,Q({taskId:e}).then((function(e){if(t.$logger.info("StartOpenSession res",e),e.success){t.copyLoading=!1;var a=L["a"]+"s/"+e.result.classId+"?token="+A.a.get(I["a"]);t.$logger.info("try open "+a),window.location.href=a}else t.$message.warn("StartLesson Failed! "+e.message)})).finally((function(){t.copyLoading=!1}))}}},H=G,z=(a("422a"),a("0c7c")),W=Object(z["a"])(H,i,s,!1,null,"27fd44ab",null);t["a"]=W.exports},ae3c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAAXNSR0IArs4c6QAABDNJREFUWEfNl2FoG2UYx//Pm6TO6GBikov7MGpyQWQqg30pE93cPinU5oJa5kQGInVaNkVGPzgtOBmbyNbpRBHZHGgV63ppRTYQtgmF6hcFURB2VyedNZdtzbSr7dbc+0hC03XtJblrm9T7ev/neX78732f5znC/+BZubo5FAwGOgG0EjhnA3toubmijclGBOgUQPfMYvltWcFC8eR6vyhChW4yiPHjsoHdGdc2+wWlCVg596tJyI5lAVPUlmaC6AHRLfOOEvMwj43fW3ewsJp8SpD4lIDAXChmZmJ7S8bsP1NXsIiqbSPCJwTyO106ZtllGelXCu/qBhZRkzsI4ggRhDMUf28ZuYeAs/m6gYXjyXZB9C4RORrBwFVmuS5rpM0SdM0dC6vaSwJ4rxxUAYRtfs4a0o/OdrKmYEosuYt8oqtSE2fwF9Y5fetcTc3AFDX1MsAHKzkFxoVr0ndfbqjn77qAKfHUXhLYU9EphrTBmy8Z+ndOuiV3TElobxHotWozmJn3WYZeVrekYFFV6wDRfhdQZy1D3wJAltMuGVjhTBHhUDUogC/nJ+0HLg33j1TSLgmYEtd2kqDD1aEAKZHKmr16Ne2iwaLx1HYmPlrx9k1TMKPLMnqLI6fas0iwJ31Kws45rS4OA3rQMnIPl0ZOjcEARU39QoS1VQqNXpf2ulGzb7ga0IJHUiShvUCMFyXh0MVz+rHiFkpiAIQVzsMZtmTZfNFMn3QLtaAhrqip00R4pBAsJe/Omvo7Siy5FT5x3GnHksydWUN/0wuUJ7Db41rkqqlnw7GWx4RP9M3sVFLuzZjpN0KN2kafH2kiWjUDwTiRMXytQI9dE7DpHnWAmTstQ98fvrvlCeH3dZccKi14kTWpmGjgIwCaJNCdnczsxoXBCa9QLhzb5FfUO44R0TOl5FLi7azZ26GoWgsRfQmgofCOmT+2DL2tUjf3AlixXURV7TiInp2XUPKHGVPfEY4nH/WR6C0dfGZ0W0bvNi8AnkeSEteeJ0EflQtk5s8sI7ddia3aSIL6QRQsOmfLp62h9OeLhSvj2PqAkljzB4HuqlSAmfssTLaG8iua/AF8VfxxZW7PGPr7NQGLqslNIHHGTXJmPo2x8cev3RoMNPjE2qw5+oPb7l4pv6NjhSYqQB+4AZs++IOWoW9wq3ejcwRTEtphAu10k6CkyYxP3YaRr//1EuPZMUXVfiai+90WYWbLMvSoW70b3TzHFDXVRIRBN8E3OjwfzBj6q55iqoidwAaI8KDrIoxfr2Niw6hx8h/XMS6EN4FFEqnXBeB+4DJOjE9w29if+mUXtTxJZsCURHIXofLP6Y3MPGBL3ud1lfFCRljdHFSCgQNEaC/b5YHfCfyTBL7NS/mNl4XPC8xsLUXiqTZBmLlRzJwHcUYyRiDw19QUzl85n76y0AILjfsPWT6SVuLmISoAAAAASUVORK5CYII="},b07f:function(e,t,a){},b0e0:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{class:{"tag-input-wrapper":!0,active:e.active,"tag-dom":!0},on:{click:e.handleFocusInput}},[a("div",{staticClass:"tag-input-list tag-dom"},[a("div",{staticClass:"tag-list tag-dom"},[e._l(e.selectedKeywords,(function(t,i){return a("div",{key:i,staticClass:"tag-item tag-dom"},[a("a-tag",{staticClass:"tag-dom input-tag-item",attrs:{closable:""},on:{close:function(a){return e.handleCloseTag(t)}}},[e._v(" "+e._s(t.name)+" ")])],1)})),a("div",{staticClass:"tag-input tag-dom "},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"input",staticClass:"tag-dom",style:{width:e.inputWidth},attrs:{type:"text",placeholder:"Enter key words"},domProps:{value:e.inputValue},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAddTag.apply(null,arguments)},e.searchTag],blur:function(t){e.active=!1},search:e.searchTag,input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})]),e.fetching?a("a-spin",{attrs:{slot:"notFoundContent",size:"small"},slot:"notFoundContent"}):e._e()],2)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tagSearchList.length||e.createTagName,expression:"tagSearchList.length || createTagName"}],staticClass:"skt-tag-wrapper"},[a("a-row",[a("a-col",{attrs:{offset:"0",span:"24"}},[a("div",{staticClass:"skt-tag-list"},[e._l(e.tagSearchList,(function(t,i){return a("div",{key:i,staticClass:"skt-tag-item"},[a("a-tag",{staticClass:"tag-item",attrs:{draggable:"true"},on:{click:function(a){return e.selectChooseTag(t)}}},[e._v(" "+e._s(t.name)+" ")])],1)})),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tagSearchList.length&&e.createTagName&&e.createTagName.length>=1,expression:"tagSearchList.length == 0 && createTagName && createTagName.length >= 1"}],staticClass:"skt-tag-create-line",on:{click:e.handleCreateTagByInput}},[a("div",{staticClass:"create-tag-label"},[e._v(" Create ")]),a("div",{staticClass:"create-tag"},[a("a-tag",{staticClass:"tag-item"},[e._v(" "+e._s(e.createTagName)+" ")])],1)])],2)])],1)],1)])},s=[],n=(a("a9e3"),a("498a"),a("159b"),a("b0c0"),a("4de4"),a("823b")),o=a("0fea"),r=a("b3db"),l={name:"SdgTagInput",props:{selectedKeywords:{type:Array,default:function(){return[]}},sdgKey:{type:Number,required:!0}},data:function(){return{fetching:!1,lastFetchId:0,inputValue:"",tagColorList:["pink","orange","green","cyan","blue","red","purple"],active:!1,createTagName:"",tagSearchList:[]}},computed:{inputWidth:function(){var e=this.inputValue||"",t=20*e.trim().length+22;return(t>100?t:100)+"px"}},created:function(){},methods:{handleAddTag:function(){if(n["info"]("handleAddTag "+this.sdgKey+" "+this.inputValue),this.inputValue&&this.inputValue.trim().length){var e=this.inputValue.trim();-1===this.selectedKeywords.indexOf(e)?this.$emit("add-tag",{sdgKey:this.sdgKey,tagName:e}):n["info"]("skip! input value "+e+" exist in",this.selectedKeywords)}else n["info"]("skip! input value empty");this.inputValue=""},searchTag:function(){var e=this;n["info"]("tag searchTag",this.inputValue),this.createTagName=this.inputValue;var t=this.inputValue;if(this.tagSearchList=[],!(t.length<3)){this.fetching=!0,this.lastFetchId+=1;var a=this.lastFetchId;Object(o["c"])(r["scenarioAPIUrl"].ScenarioSearchKey,{keywords:t}).then((function(t){a===e.lastFetchId&&(t.success&&t.result.forEach((function(t){e.tagSearchList.push({id:t.id,name:t.name})})),e.fetching=!1)}))}},reset:function(){this.createTagName="",this.tagSearchList=[],this.inputValue=""},selectChooseTag:function(e){0===this.selectedKeywords.filter((function(t){return t.name===e.name})).length?(this.$emit("add-tag",{sdgKey:this.sdgKey,tagName:e.name}),this.reset()):n["info"]("skip! input value "+e.name+" exist in",this.selectedKeywords)},handleCloseTag:function(e){n["info"]("handleCloseTag "+this.sdgKey+" "+e),this.$emit("remove-tag",{sdgKey:this.sdgKey,tagName:e})},handleFocusInput:function(){this.$refs["input"].focus(),this.active=!0},handleCreateTagByInput:function(){this.handleAddTag()}}},c=l,d=(a("87b4"),a("0c7c")),u=Object(d["a"])(c,i,s,!1,null,"cf2b4bd4",null);t["a"]=u.exports},b3e1:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{t:"1651291412559",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2926",width:"48",height:"48","xmlns:xlink":"http://www.w3.org/1999/xlink"},children:[{tag:"path",attrsMap:{d:"M776.28836885 838.02245644a56.86808467 56.86808467 0 0 1-56.86808467 56.18566846H307.41100859a56.86808467 56.86808467 0 0 1-56.86808554-56.18566845V241.36250908h526.31412715v596.65994737zM364.33596114 140.47852607a11.37361729 11.37361729 0 0 1 11.71482626-11.37361728h274.90032247a11.37361729 11.37361729 0 0 1 11.71482539 11.37361728v34.12085098H364.33596114v-34.12085098z m547.41218642 34.12085098h-180.89737822v-34.12085098a79.61531924 79.61531924 0 0 0-79.61531924-78.53482529H376.33512763A79.61531924 79.61531924 0 0 0 296.43546816 140.47852607v34.12085098H114.79880498a34.12085097 34.12085097 0 1 0 0 67.72988936h66.53565879v595.69319004a125.10978662 125.10978662 0 0 0 126.07654482 123.97242568h412.00927559a125.10978662 125.10978662 0 0 0 126.07654483-123.97242568V241.36250908h66.53565878a34.12085097 34.12085097 0 0 0 34.46205997-34.12085098 33.49530175 33.49530175 0 0 0-34.7464002-32.86975341zM513.15973964 792.86919717a34.12085097 34.12085097 0 0 0 34.4051921-34.12085098V398.43215967a34.46205908 34.46205908 0 0 0-68.86725117 0v360.31618652a34.12085097 34.12085097 0 0 0 34.46205908 34.12085098m-124.48423741-71.99499551a34.12085097 34.12085097 0 0 0 34.46205909-34.12085098v-216.09872315a34.46205908 34.46205908 0 0 0-68.92411904 0v216.09872315a35.14447617 35.14447617 0 0 0 34.46205995 34.12085098m248.91160782 0a34.12085097 34.12085097 0 0 0 34.46205908-34.12085098v-216.09872315a34.46205908 34.46205908 0 0 0-68.92411904 0v216.09872315a34.12085097 34.12085097 0 0 0 34.46205996 34.12085098","p-id":"2927"}}]})}},b3f3:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAhCAYAAADDAmudAAAAAXNSR0IArs4c6QAABBJJREFUSEuNlk1oXFUUx//nzkwTJXmZ18SgkEIDDWRRsQEXihGmEGk+5j4KRRrRRbvrIqDFuuhC2q7qImJAJF0WRHARkbw7+eiqD4xYqdCUFCwoGDBKSZt5cV5KU+bNHLmTmTgZ77w3b/nOued3z7nnf+4lGL7NTKYj1dFxHUIMMrPXznzzxVzuL5Nv3D+KcvAd5wsAH4E5BNENFAqf2p63HRe03h4JuJ3JJIcsSzEwqhcxsJEEJi3X/bFVSCRAB9l0nGNJ5jUiaq8EZQ4JmEwr9V0rkFiADuI7ztcAPtgPyBwK5nNdudw3cZCWAFvj46MimVw6EExDhBjump//OQpiBOjan/S8sLaw0lWWFRgCraNQGIo6eCNgS8o3kkTdXa67UAual/LZ/jnUk5hv2kqdb5aFEeCPjh5FKnUXQTBQ253vOH8AOGoKlACGm3WWEbB56tSxVFvbb4Joqmt+/itdshOWVWxaa2bPVuqkyW4EbEt5honmwJyzlZL5iYnjlEisRR1mmfnNbqXuNPoYAXkpl4hIi2vddt1+P5u9AiGuRrYk84yt1MVYwD+OM1EGcjVRbQdBZ9qyfm1W/7qAG7brHokE/C1lzwtE9wD0VR13UC5Px+6+6lx8/nyg99at3+vb/ECJfCm/B9Hp2i4Y2AFz0tiehnoxszysVM6X8jSKxVV7eXl9H+A7zocAZuKkH2O/ZLvu508mJkYSQryv9VEBPJFyUAD3Wt1pBOSq7brXfCnPMTAbBsFLFYAv5W0QZWJ3Xy5fY6KzRDTYxHcP4DhfApiicnmS9FgQRD/FBteTulR6D8ADCHHXlK2233/6dO6EZWnV94F5hrYdZ5aBC60AEIZD9uLiajNdcKn0qhDiLda3HwAClsmXcg1Ex+MAzPzofhAc0VNWt3M78GdDFhsJYKTEvAKinqqOPA0ogigZBwBQ6ZCany+lAlG2XmgMpAnoqP3by8BxOC44MX+WVupyvV8rbc3M0zqDx/spNZCY+SED501DLJ/NDpMQP0RtTh+6BjSmWi0f73IYDnQvLW2YglTujEOHdLeYP+bwGfAK5bPZCyTE7P+8ImZ8TZwJIj0Em31ztuu+S34mk8Ze36YPeDKv2Eq93Wz1djZ7loX41mhnDrlcHjq8sPBgT8mO8zGA6XpnZt4NS6X+3sXFR8YSRaifmKfTSn1S1QJQvRL1s2SkMYs25sn6d6n2fa2z8zoRXWqye281CN6pvUr2p2nladLZuQSi4cZMAHgE6I7qoT278fIH80oxCMZ6PW+nTgv/hatmoh+8U3HaaLQTcMMvFC72e95uvc14Jz8eH389mUhcaVCqkUnMd5j5sp3LeSaHyKfj1thYn0ilzgAYJqCPgZcrT3ngIYh+QRjO6+EXle2/we7D78i0JuwAAAAASUVORK5CYII="},b4ab:function(e,t,a){},b5ba:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"delete-icon",style:{width:e.size+"px",height:e.size+"px"},on:{click:e.handleClick}},[a("delete-btn",{style:{width:e.size+"px",height:e.size+"px",fill:e.color}})],1)},s=[],n=(a("a9e3"),a("b3e1")),o=a.n(n),r={name:"DeleteIcon",props:{size:{type:Number,default:15},color:{type:String,default:"#F16A39"}},components:{DeleteBtn:o.a},data:function(){return{}},created:function(){},methods:{handleClick:function(){this.$emit("click")}}},l=r,c=(a("0f63"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,"25a8a6d9",null);t["a"]=d.exports},b7b8:function(e,t,a){"use strict";a("ac3e")},b7d7:function(e,t,a){},b7f2:function(e,t,a){},b842:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag-setting",on:{click:e.trySaveTagCategory}},[a("a-spin",{attrs:{spinning:e.tagLoading}},[a("div",{staticClass:"tag-content-wrapper"},[a("div",{staticClass:"tag-tab",attrs:{id:"tag-tab"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.userTagList.length,expression:"userTagList.length"}],staticClass:"icon-left icon-nav",on:{click:function(t){return t.stopPropagation(),e.scrollLeft.apply(null,arguments)}}},[a("a-icon",{attrs:{type:"left"}})],1),e.userTagList.length?a("div",{staticClass:"user-tag-category-tabs",attrs:{id:"user-tag-category-tabs"}},e._l(e.userTagList,(function(t,i){return a("div",{key:i,class:{"user-tag-item":!0,"active-tab":t.name===e.currentActiveTagCategoryName},on:{click:function(a){return e.handleActiveTagCategory(t)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.editing,expression:"userTagItem.editing === false"}],staticClass:"action-icon"},[a("div",{staticClass:"tag-title-item"},[a("div",{staticClass:"tag-title",on:{dblclick:function(a){return e.handleEditTagCategory(t)}}},[e._v(e._s(t.name))]),a("div",{staticClass:"tag-delete-icon",on:{click:function(a){return e.handleDeleteTagCategory(t.name)}}},[a("a-icon",{style:{fontSize:"12px",color:"#15c39a"},attrs:{type:"delete"}})],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.editing,expression:"userTagItem.editing === true"}],staticClass:"editing-title",on:{click:function(e){e.stopPropagation()}}},[a("a-input",{staticClass:"my-tag-category-input",attrs:{placeholder:"Name your category",id:"tag-category-"+t.name},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleEnsureUpdateTagCategory(t)}},model:{value:e.currentEditTagCategoryName,callback:function(t){e.currentEditTagCategoryName=t},expression:"currentEditTagCategoryName"}})],1)])})),0):e._e(),a("div",{staticClass:"icon-right icon-nav"},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:e.userTagList.length,expression:"userTagList.length"}],attrs:{type:"right"},on:{click:function(t){return t.stopPropagation(),e.scrollRight.apply(null,arguments)}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.userTagList.length>=1,expression:"userTagList.length >= 1"}],staticClass:"icon-add"},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[e._v(" Add tag type ")]),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:e.showAddCategory,expression:"showAddCategory"}],style:{fontSize:"18px",color:"#15c39a"},attrs:{type:"plus-circle"},on:{click:function(t){return t.stopPropagation(),e.handleInitCreateTagCategory.apply(null,arguments)}}})],2)],1)]),a("div",{staticClass:"user-tag-list-wrapper"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"skt-tag-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.userTagList.length,expression:"userTagList.length"}],staticClass:"skt-tag-list"},[a("div",{staticClass:"search-tag-wrapper tag-wrapper"},[e._l(e.displayTagList,(function(t){return a("div",{key:t,staticClass:"skt-tag-item"},[a("a-tag",{staticClass:"tag-item",class:{"active-tag-item":e.tagSearchList.indexOf(t)>-1}},[e._v(" "+e._s(t)+" "),a("a-icon",{attrs:{type:"close"},on:{click:function(a){return e.handleDeleteTag(t)}}})],1)],1)})),a("div",{staticClass:"create-tag-item-btn"},[a("a-input",{directives:[{name:"show",rawName:"v-show",value:e.createTagInputVisible,expression:"createTagInputVisible"}],ref:"search-input",staticClass:"search-input",attrs:{placeholder:"Create Tags"},on:{pressEnter:e.handleEnsureCreateTag,change:e.handleFilterSearchTag},nativeOn:{blur:function(t){return e.handleEnsureCreateTag.apply(null,arguments)}},model:{value:e.inputTag,callback:function(t){e.inputTag=t},expression:"inputTag"}}),a("div",{staticClass:"create-tag-item-wrapper"},[0!==e.displayTagList.length||e.createTagInputVisible?e._e():a("div",{staticClass:"no-tag-list"},[a("div",{staticClass:"no-tips"},[e._v(" There is no tag under the current type. ")])]),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[e._v(" Create tag ")]),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:!e.createTagInputVisible,expression:"!createTagInputVisible"}],style:{fontSize:"18px",color:"#15c39a"},attrs:{type:"plus-circle"},on:{click:e.handleShowSearchInput}})],2)],1)],1)],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.userTagList.length&&!e.tagLoading,expression:"userTagList.length === 0 && !tagLoading"}],staticClass:"no-tag-tips"},[a("no-more-resources",{attrs:{tips:""}}),a("div",{staticClass:"no-tips"},[e._v(" No tags type have been added yet, create one now ? ")]),a("div",{staticClass:"create-tag-btn"},[a("a-button",{attrs:{type:"primary",shape:"round"},on:{click:e.handleInitCreateTagCategory}},[e._v("Create")])],1)],1)])])])])])],1)},s=[],n=(a("b0c0"),a("159b"),a("498a"),a("d3b7"),a("7db0"),a("a630"),a("3ca3"),a("4de4"),a("d28d")),o=a("d33b4"),r=a("69b3"),l={name:"TagSetting",mixins:[o["a"]],components:{NoMoreResources:r["a"]},data:function(){return{currentActiveTagCategory:null,currentActiveTagCategoryName:"",currentEditTagCategoryName:"",userTagList:[],createTagName:"",tagLoading:!1,inputTag:"",tagSearchList:[],currentEditTagName:"",displayTagList:[],createTagInputVisible:!1}},computed:{showAddCategory:function(){return this.userTagList.every((function(e){return!1===e.editing}))}},created:function(){this.handleUpdateUserTags()},methods:{handleActiveTagCategory:function(e){this.$logger.info("handleActiveTagCategory",e),this.currentActiveTagCategoryName=e.name,this.currentActiveTagCategory=e,this.displayTagList=e.keywords,this.filterKeyword()},handleEditTagCategory:function(e){this.$logger.info("handleEditTagCategory",e),this.currentEditTagCategoryName=e.name,this.userTagList.forEach((function(e){e.editing=!1})),e.editing=!0},handleEnsureUpdateTagCategory:function(e){this.$logger.info("handleEnsureUpdateTagCategory "+this.currentEditTagCategoryName,e),this.currentEditTagCategoryName=this.currentEditTagCategoryName&&this.currentEditTagCategoryName.trim()?this.currentEditTagCategoryName.trim():"Untitled category "+(this.userTagList.length+1),e.newTag?this.handleCreateTagCategory(e):this.handleUpdateTagCategory(e)},handleCreateTagCategory:function(e){var t=this;this.$logger.info("handleCreateTagCategory",e),this.tagLoading=!0,Object(n["a"])({parentName:this.currentEditTagCategoryName}).then((function(e){t.$logger.info("add AddUserParentTag ",e.result),e.success?t.handleUpdateUserTags():(t.$message.error(e.message),t.tagLoading=!1)})).catch((function(){t.tagLoading=!1}))},handleUpdateTagCategory:function(e){var t=this;this.$logger.info("handleUpdateTagCategory",e),e.name&&this.currentEditTagCategoryName&&e.name!==this.currentEditTagCategoryName&&(this.tagLoading=!0,Object(n["k"])({name:e.name,newName:this.currentEditTagCategoryName}).then((function(e){t.$logger.info("UpdateUserParentTag response",e.result),e.success?t.handleUpdateUserTags():(t.$message.error(e.message),t.tagLoading=!1)})).catch((function(){t.tagLoading=!1})))},handleInitCreateTagCategory:function(){var e=this;this.$logger.info("handleInitCreateTagCategory"),this.currentEditTagName="Untitled category "+(this.userTagList.length+1);var t={name:this.currentEditTagName,editing:!0,newTag:!0,keywords:[]};this.currentActiveTagCategoryName=t.name,this.currentEditTagCategoryName=t.name,this.currentActiveTagCategory=t,this.displayTagList=[],this.userTagList.push(t),this.$nextTick((function(){var a=document.getElementById("tag-category-"+t.name);a&&a.focus(),e.scrollRight()}))},handleUpdateUserTags:function(){var e=this;this.tagLoading=!0,Object(n["c"])({}).then((function(t){if(e.$logger.info("FindCustomTags response",t.result),t.success){var a=[];t.result.userTags.forEach((function(e){e.name&&(e.editing=!1,e.newTag=!1,a.push(e))})),e.userTagList=a,e.$logger.info("userTagList",e.userTagList);var i=e.userTagList.find((function(t){return t.name&&e.currentActiveTagCategoryName===t.name}));i||(i=e.userTagList.find((function(t){return t.name&&e.currentEditTagCategoryName===t.name}))),!i&&e.userTagList.length>0&&(i=e.userTagList.find((function(e){return e.name}))),i&&(e.currentActiveTagCategoryName=i.name,e.currentActiveTagCategory=i,e.displayTagList=i.keywords),e.$logger.info("currentActiveTagCategory",e.currentActiveTagCategory,"displayTagList",e.displayTagList),e.filterKeyword()}else e.$message.error(t.message)})).finally((function(){e.tagLoading=!1}))},filterKeyword:function(){var e=this;if(this.currentActiveTagCategoryName){this.tagSearchList=[];var t=this.userTagList.find((function(t){return t.name===e.currentActiveTagCategoryName}));if(this.$logger.info("userTagItem",t),!t||t.keywords&&0===t.keywords.length)return;this.tagSearchList=Array.from(t.keywords),this.tagSearchList=this.tagSearchList.filter((function(t){return e.inputTag&&e.inputTag.trim()&&t.toLowerCase().indexOf(e.inputTag.toLowerCase())>-1})),this.$logger.info("tagSearchList",this.tagSearchList)}},handleEnsureCreateTag:function(){this.$logger.info("handleEnsureCreateTag",this.inputTag),this.createTagName=this.inputTag,this.inputTag="",this.createTagInputVisible=!1,this.handleCreateTagByInput()},handleCreateTagByInput:function(){var e=this;this.$logger.info("handleCreateTagByInput "+this.createTagName);var t=!1,a=this.userTagList.find((function(t){return t.name===e.currentActiveTagCategoryName}));if(a&&a.keywords){var i=a.keywords.find((function(t){return t.toLowerCase()===e.createTagName.toLowerCase()}));i&&(t=!0)}if(t)this.$message.warn("Already exist same name tag");else if(this.createTagName&&this.createTagName.trim()){var s={name:this.createTagName,parentName:this.currentActiveTagCategoryName};this.tagLoading=!0,Object(n["b"])(s).then((function(t){e.$logger.info("add AddUserTagNew ",t.result),t.success?(e.handleUpdateUserTags(),e.$message.success("Add tag successfully"),e.inputTag="",e.createTagName="",e.$emit("change-add-keywords",s)):e.$message.error(t.message)})).finally((function(){e.tagLoading=!1}))}else;},handleFilterSearchTag:function(){this.$logger.info("tag handleFilterSearchTag",this.inputTag),this.createTagName=this.inputTag,this.filterKeyword()},handleDeleteTag:function(e){var t=this;this.$createElement;this.$confirm({title:"Delete tag "+e,content:function(e){return e("div",{class:"my-delete-tips"},["Are you sure you want to delete this tag ? This is permanent and can not be undone ."])},bodyStyle:{padding:"10px"},okText:"Confirm",centered:!0,onOk:function(){t.handleEnsureDeleteTag(e)}})},handleEnsureDeleteTag:function(e){var t=this;this.$logger.info("handleEnsureDeleteTag "+this.currentActiveTagCategoryName+" "+e),this.tagLoading=!0,Object(n["l"])({parentName:this.currentActiveTagCategoryName,name:e}).then((function(e){t.$logger.info("add UserTagDeleteNew ",e.result),e.success?(t.handleUpdateUserTags(),t.$message.success("Delete successfully")):t.$message.error(e.message)})).finally((function(){t.tagLoading=!1}))},handleDeleteTagCategory:function(e){var t=this;this.$createElement;this.$confirm({title:"Delete tag type "+e,content:function(e){return e("div",{class:"my-delete-tips"},["Are you sure you want to delete this tag type ? After deleting, all tags under this type will be deleted as well."])},bodyStyle:{padding:"10px"},okText:"Confirm",centered:!0,onOk:function(){t.handleEnsureDeleteTagCategory(e)}})},handleEnsureDeleteTagCategory:function(e){var t=this;this.$logger.info("handleEnsureDeleteTagCategory "+e),this.tagLoading=!0,Object(n["l"])({parentName:e}).then((function(e){t.$logger.info("add UserTagDeleteNew ",e.result),e.success?(t.handleUpdateUserTags(),t.$message.success("Delete successfully")):t.$message.error(e.message)})).finally((function(){t.tagLoading=!1}))},handleShowSearchInput:function(){var e=this;this.createTagInputVisible=!0,this.$nextTick((function(){e.$refs["search-input"].focus()}))},scrollLeft:function(){this.$logger.info("scrollLeft");var e=document.getElementById("user-tag-category-tabs");e.scrollTo({left:e.scrollLeft-400,behavior:"smooth"})},scrollRight:function(){this.$logger.info("scrollRight");var e=document.getElementById("user-tag-category-tabs");e.scrollTo({left:e.scrollLeft+400,behavior:"smooth"})},trySaveTagCategory:function(){this.$logger.info("trySaveTagCategory");var e=this.userTagList.find((function(e){return e.editing&&e.name}));e?(this.$logger.info("trySaveTagCategory userTagItem",e),e.newTag?this.handleCreateTagCategory(e):this.handleUpdateTagCategory(e)):this.$logger.info("no editing tag category")}}},c=l,d=(a("acba"),a("0c7c")),u=Object(d["a"])(c,i,s,!1,null,"7e71e60a",null);t["a"]=u.exports},b9f9:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{closable:!0,footer:null,maskClosable:!1,destroyOnClose:"",width:"640px"},on:{cancel:e.handleClose},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"publish-list-wrapper"},[a("div",{staticClass:"publish-list"},e._l(e.myTaskList,(function(t,i){return a("a-row",{key:i,staticClass:"publish-item",attrs:{gutter:5},nativeOn:{click:function(a){return e.handleChangeItem(t)}}},[a("a-col",{attrs:{span:1}},[a("a-checkbox",{directives:[{name:"show",rawName:"v-show",value:-1===e.publishedIdList.indexOf(t.id),expression:"publishedIdList.indexOf(task.id) === -1"}],attrs:{checked:t.checked}})],1),a("a-col",{attrs:{span:14}},[a("div",{staticClass:"task-info"},[a("div",{staticClass:"task-icon"},[a("content-type-icon",{attrs:{type:t.type}}),e._v(" "+e._s(t.name?t.name:"Untitled")+" ")],1)])]),a("a-col",{attrs:{span:6}},[e._v(" "+e._s(e._f("dayjs")(t.updateTime))+" ")]),a("a-col",{attrs:{span:3}},[e._v(" "+e._s(1===t.status?"Published":"Draft")+" ")])],1)})),1),a("div",{staticClass:"publish-button"},[a("a-button",{attrs:{type:"primary",shape:"round"},on:{click:e.handlePublish}},[e._v("Publish")])],1)])])},s=[],n=(a("a9e3"),a("159b"),a("8f46")),o={name:"PublishList",components:{ContentTypeIcon:n["a"]},props:{taskList:{type:Array,default:function(){return[]}},parentType:{type:Number,required:!0},parentId:{type:String,required:!0}},data:function(){return{selectedIdList:[],publishedIdList:[],myTaskList:[],visible:!0}},created:function(){var e=this;this.publishedIdList=[],this.myTaskList=[],this.taskList.forEach((function(t){var a=Object.assign({},t);a.checked=!1,a.status&&e.publishedIdList.push(a.id),e.myTaskList.push(a)})),this.$logger.info("PublishList myTaskList",this.myTaskList)},methods:{handlePublish:function(){var e=this;this.$logger.info("PublishList handlePublish",this.selectedIdList),this.selectedIdList=[],this.myTaskList.forEach((function(t){t.checked&&e.selectedIdList.push(t.id)})),this.$emit("publish",this.selectedIdList)},handleChangeItem:function(e){this.$logger.info("PublishList handleChangeItem",e),e.checked=!e.checked},handleClose:function(){this.$emit("close")}}},r=o,l=(a("c7c0"),a("0c7c")),c=Object(l["a"])(r,i,s,!1,null,"7c29c6ab",null);t["a"]=c.exports},ba70:function(e,t,a){},be9d:function(e,t,a){},bf37:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("b775"),s="knowledgeTermTag",n={KnowledgeTermTagAdminCreate:"/classcipe/api/".concat(s,"/admin/create"),KnowledgeTermTagAdminDelete:"/classcipe/api/".concat(s,"/admin/delete"),KnowledgeTermTagAdminEdit:"/classcipe/api/".concat(s,"/admin/edit"),KnowledgeTermTagCommandTermList:"/classcipe/api/".concat(s,"/commandTermList"),KnowledgeTermTagKnowledgeTagList:"/classcipe/api/".concat(s,"/knowledgeTagList"),KnowledgeTermTagCustomCreate:"/classcipe/api/".concat(s,"/custom/create"),KnowledgeTermTagCustomDelete:"/classcipe/api/".concat(s,"/custom/delete"),KnowledgeTermTagCustomEdit:"/classcipe/api/".concat(s,"/custom/edit"),KnowledgeTermTagQueryByKeywords:"/classcipe/api/".concat(s,"/queryByKeywords")};function o(e){return Object(i["d"])({url:n.KnowledgeTermTagQueryByKeywords,method:"get",params:e})}},bf99:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form-model",e._b({ref:"commandTermFormRef",attrs:{layout:"horizontal",rules:e.commandTermRules,model:e.commandTermForm}},"a-form-model",{labelCol:{span:0},wrapperCol:{span:24}},!1),[a("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"",prop:"name"}},[a("a-input",{attrs:{placeholder:"input command term"},model:{value:e.commandTermForm.name,callback:function(t){e.$set(e.commandTermForm,"name",t)},expression:"commandTermForm.name"}})],1)],1),a("a-space",[a("a-button",{attrs:{loading:e.saveCommanTermLoading,size:"small",type:"primary"},on:{click:e.handleSaveCommanTerm}},[e._v("Create")]),a("a-button",{attrs:{size:"small",type:""},on:{click:e.handleCancel}},[e._v("Cancel")])],1)],1)},s=[],n=(a("b0c0"),a("7db0"),a("d3b7"),a("d1e5")),o={name:"CommandTermAdd",props:{customTags:{type:Object,default:function(){}},initName:{type:String,default:""},type:{type:String,default:"terms"}},watch:{initName:function(e){this.commandTermForm.name=e}},data:function(){return{bloomParentId:"",bloomOptions:[],knowLedgeParentId:"",knowLedgeOptions:[],saveCommanTermLoading:!1,termsCreate:n["d"],dimensionsCreate:n["a"],commandTermForm:{name:"",parentId:"",bloom:"",knowledge:""},commandTermRules:{name:[{required:!0,message:"Please input term name",trigger:"blur"}],bloom:[{required:!0,message:"Please select bloom",trigger:"change"}],knowledge:[{required:!0,message:"Please select knowledgeDimension",trigger:"change"}]}}},created:function(){this.initBloomOptions()},methods:{initBloomOptions:function(){if(this.customTags&&this.customTags.recommends){var e=this.customTags.recommends.find((function(e){return"Bloom's Taxonomy"===e.name}));e?(this.bloomOptions=e.keywords,this.bloomParentId=e.id):(this.bloomOptions=[],this.bloomParentId="");var t=this.customTags.recommends.find((function(e){return"Knowledge Dimensions"===e.name}));t?(this.knowLedgeOptions=t.keywords,this.knowLedgeParentId=t.id):(this.knowLedgeOptions=[],this.knowLedgeParentId="")}},handleSaveCommanTerm:function(){var e=this;this.$refs.commandTermFormRef.validate((function(t){if(!t)return!1;e.saveCommanTermLoading=!0,e[e.type+"Create"]({tag:e.commandTermForm.name}).then((function(t){0===t.code?e.$emit("save",{word:e.commandTermForm.name,parentId:e.bloomParentId,tag:e.commandTermForm.bloom,bloomTag:e.commandTermForm.bloom,knowledgeDimensionId:e.knowLedgeParentId,knowledgeDimension:e.commandTermForm.knowledge,id:t.result.id}):e.$message.error(t.message)})).finally((function(){e.saveCommanTermLoading=!1}))}))},handleCancel:function(){this.$emit("cancel")}}},r=o,l=a("0c7c"),c=Object(l["a"])(r,i,s,!1,null,"16bc2068",null);t["a"]=c.exports},c0f4:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-search"},[a("a-textarea",{staticClass:"cc-form-textarea",attrs:{"auto-size":{minRows:2,maxRows:6},placeholder:e.placeholder,disabled:!e.canEdit},on:{keyup:e.handleSearch,focus:e.handleSearch},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.fetching?a("a-spin",{attrs:{slot:"notFoundContent",size:"small"},slot:"notFoundContent"}):e._e(),e.showSearchListFlag?a("div",{staticClass:"search-list-wrapper"},[a("ul",{staticClass:"search-list"},e._l(e.searchList,(function(t,i){return a("li",{key:i,staticClass:"search-list-item input-search-item",on:{click:function(a){return e.handleSelectItem(t)}}},[e._v(e._s(t[e.label]))])})),0)]):e._e()],1)},s=[],n=(a("a9e3"),a("823b")),o={name:"InputSearch",props:{defaultValue:{type:String,default:null},keyIndex:{type:Number,default:null},currendIndex:{type:Number,default:null},label:{type:String,default:"name"},placeholder:{type:String,default:"name"},searchList:{type:Array,default:function(){return[]}},canEdit:{type:Boolean,default:!0}},computed:{showSearchListFlag:function(){return this.searchList.length>0&&this.keyIndex===this.currendIndex}},mounted:function(){this.globalClick(this.handleClick)},data:function(){return{fetching:!1,lastFetchId:0,value:null}},created:function(){this.value=this.defaultValue,n["info"]("inputSearch value",this.value)},watch:{defaultValue:function(e){this.$logger.info("defaultValue change",e),this.value=e}},methods:{handleClick:function(e){e.target.classList.contains("input-search-item")||this.$emit("reset")},handleSearch:function(){n["info"]("handleSearch"+this.value),this.$emit("search",this.keyIndex,this.value),this.$emit("change")},handleSelectItem:function(e){n["info"]("handleSelectItem",e),this.value=e[this.label],this.$emit("select-item",this.keyIndex,e),this.$emit("reset")},handleResetSearchList:function(){n["info"]("handleResetSearchList"),this.$emit("reset")}}},r=o,l=(a("cad2"),a("0c7c")),c=Object(l["a"])(r,i,s,!1,null,"c65473be",null);t["a"]=c.exports},c164:function(e,t,a){"use strict";a("be9d")},c2b1:function(e,t,a){"use strict";a("e7df")},c2e5:function(e,t,a){"use strict";a.r(t),a.d(t,"reviewsTeacherAPIUrl",(function(){return n})),a.d(t,"ReviewsTeacherSave",(function(){return o})),a.d(t,"ReviewsTeacherList",(function(){return r})),a.d(t,"ReviewsTeacherDelete",(function(){return l})),a.d(t,"ReviewsTeacherMyReview",(function(){return c})),a.d(t,"ReviewsTeacherStats",(function(){return d})),a.d(t,"byOverall",(function(){return u}));var i=a("b775"),s="reviewsTeacher",n={delete:"/classcipe/api/".concat(s,"/delete"),list:"/classcipe/api/".concat(s,"/list"),save:"/classcipe/api/".concat(s,"/save"),myReviews:"/classcipe/api/".concat(s,"/myReviews"),queryReviewsStat:"/classcipe/api/".concat(s,"/queryReviewsStat"),byOverall:"/classcipe/api/".concat(s,"/reviewsStat/byOverall")};function o(e){return Object(i["d"])({url:n.save,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(i["d"])({url:n.list,method:"get",params:e})}function l(e){return Object(i["d"])({url:n.delete+"?id="+e.id,method:"get",data:e})}function c(e){return Object(i["d"])({url:n.myReviews,method:"get",params:e})}function d(e){return Object(i["d"])({url:n.queryReviewsStat,method:"get",params:e})}function u(e){return Object(i["d"])({url:n.byOverall,method:"get",params:e})}},c44c:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{t:"1651919287086",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3862","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"48",height:"48"},children:[{tag:"defs"},{tag:"path",attrsMap:{d:"M1011.699621 955.59682l-299.842879-300.13541a400.32681 400.32681 0 1 0-56.555731 56.75075l299.84288 300.086654a39.686521 39.686521 0 0 0 28.277865 11.701186 41.636719 41.636719 0 0 0 28.765415-11.701186 39.784031 39.784031 0 0 0-0.48755-56.701994zM80.480272 401.594439a320.807504 320.807504 0 1 1 320.807503 321.148788 321.295053 321.295053 0 0 1-320.807503-321.343808z","p-id":"3863"}}]})}},c48b:function(e,t,a){},c493:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-full-form-wrapper"},[i("div",{staticClass:"form-header",style:{left:e.collapsed?"80px":"256px"}},[i("common-form-header",{ref:"commonFormHeader",attrs:{collaborate:e.collaborate,form:e.form,"share-status":e.shareStatus,"last-change-saved-time":e.lastChangeSavedTime},on:{back:e.goBack,collaborate:e.handleStartCollaborate,publish:e.handlePublishUnitPlan,save:function(t){return e.handleSaveUnitPlan(!0)},share:e.handleShareUnitPlan,"view-collaborate":e.handleViewCollaborate}})],1),i("a-card",{attrs:{bodyStyle:{padding:"16px 24px",height:"100%",minHeight:"1200px"},bordered:!1}},[e.contentLoading?e._e():i("a-row",{staticClass:"unit-content"},[i("a-col",{staticClass:"main-content",attrs:{span:"24"}},[i("a-card",{staticClass:"card-wrapper",attrs:{"body-style":{padding:"16px",display:"flex","justify-content":"space-between"},bordered:!1}},[i("div",{ref:"form",staticClass:"unit-plan-form-left root-locate-form",style:{width:e.leftWidth+"px"},on:{click:function(t){return e.focusInput(t)}}},[i("a-form-model",{staticClass:"my-form-wrapper",attrs:{model:e.form}},[i("a-steps",{attrs:{current:e.currentActiveStepIndex,direction:"vertical"},on:{change:e.onChangeStep}},[i("a-step",{staticClass:"step",attrs:{status:0===e.currentActiveStepIndex?"process":"wait",title:"Edit Unit plan"}},[i("template",{slot:"description"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.currentActiveStepIndex,expression:"currentActiveStepIndex === 0"}],staticClass:"step-detail"},[e._l(e.$store.getters.formConfigData.planCommonList,(function(t){return[t.visible&&t.fieldName===e.planField.Name?i("div",{key:t.fieldName,staticClass:"form-block tag-content-block",attrs:{"data-field-name":e.planField.Name}},[i("collaborate-tooltip",{attrs:{"form-id":e.unitPlanId,fieldName:e.planField.Name}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.Name},attrs:{"is-active":e.currentFieldName===e.planField.Name,"field-name":e.planField.Name},on:{switch:e.handleSwitchComment}}),i("a-form-item",[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(e._f("unitLabelName")("Unit Name",e.planField.Name,e.$store.getters.formConfigData))+" "),e.unitLabelName(e.planField.Name,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Unit Name",e.planField.Name,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-input",{staticClass:"my-form-input",attrs:{placeholder:"Enter Unit Name",disabled:!e.canEdit},on:{change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.Name,e.form.name)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],2)],1):e._e(),t.visible&&t.fieldName===e.planField.Overview?i("div",{key:t.fieldName,staticClass:"form-block tag-content-block",attrs:{"data-field-name":e.planField.Overview,id:"overview"}},[i("collaborate-tooltip",{attrs:{"form-id":e.unitPlanId,fieldName:e.planField.Overview}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.Overview},attrs:{"field-name":e.planField.Overview,"is-active":e.currentFieldName===e.planField.Overview},on:{switch:e.handleSwitchComment}}),i("a-form-model-item",{ref:"overview",refInFor:!0,staticClass:"task-audio-line"},[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(e._f("unitLabelName")("Overview",e.planField.Overview,e.$store.getters.formConfigData))+" "),e.unitLabelHint(e.planField.Overview,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Overview",e.planField.Overview,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-textarea",{attrs:{autoSize:"",placeholder:"Overview","allow-clear":"",disabled:!e.canEdit},on:{change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.Overview,e.form.overview)}},model:{value:e.form.overview,callback:function(t){e.$set(e.form,"overview",t)},expression:"form.overview"}})],2)],1):e._e(),t.visible&&t.fieldName===e.planField.ProjectBased?i("div",{key:t.fieldName,staticClass:"form-block form-radio-wrapper tag-content-block",attrs:{"data-field-name":e.planField.ProjectBased}},[i("collaborate-tooltip",{staticStyle:{top:"-30px"},attrs:{"form-id":e.unitPlanId,fieldName:e.planField.ProjectBased}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.ProjectBased},attrs:{"field-name":e.planField.ProjectBased,"is-active":e.currentFieldName===e.planField.ProjectBased},on:{switch:e.handleSwitchComment}}),i("a-form-item",{staticStyle:{display:"flex"}},[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(e._f("unitLabelName")("Project-based Unit",e.planField.ProjectBased,e.$store.getters.formConfigData))+" "),e.unitLabelHint(e.planField.ProjectBased,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Project-based Unit",e.planField.ProjectBased,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-radio-group",{staticStyle:{"margin-left":"20px"},attrs:{name:"radioGroup",disabled:!e.canEdit},on:{change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.ProjectBased,e.form.projectBased)}},model:{value:e.form.projectBased,callback:function(t){e.$set(e.form,"projectBased",t)},expression:"form.projectBased"}},[i("a-radio",{attrs:{value:1}},[e._v(" Yes ")]),i("a-radio",{attrs:{value:0}},[e._v(" No ")])],1)],2)],1):e._e(),t.visible&&t.fieldName===e.planField.UnitType?i("div",{key:t.fieldName,staticClass:"form-block form-radio-wrapper tag-content-block",attrs:{"data-field-name":e.planField.UnitType}},[i("collaborate-tooltip",{staticStyle:{top:"-30px"},attrs:{"form-id":e.unitPlanId,fieldName:e.planField.UnitType}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.UnitType},attrs:{"field-name":e.planField.UnitType,"is-active":e.currentFieldName===e.planField.UnitType},on:{switch:e.handleSwitchComment}}),i("a-form-item",{staticStyle:{display:"flex"}},[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(e._f("unitLabelName")("Unit type",e.planField.UnitType,e.$store.getters.formConfigData))+" "),e.unitLabelName(e.planField.UnitType,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Unit type",e.planField.UnitType,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-radio-group",{staticStyle:{"margin-left":"20px"},attrs:{name:"unitType",disabled:!e.canEdit},on:{change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.UnitType,e.form.unitType)}},model:{value:e.form.unitType,callback:function(t){e.$set(e.form,"unitType",t)},expression:"form.unitType"}},[i("a-radio",{attrs:{value:0}},[e._v(" Single-subject Unit ")]),i("a-radio",{attrs:{value:1}},[e._v(" Integrated Unit ")])],1)],2)],1):e._e(),t.visible&&t.fieldName===e.planField.GradeId?i("div",{key:t.fieldName,staticClass:"form-block grade-time tag-content-block",attrs:{"data-field-name":e.planField.GradeId}},[i("collaborate-tooltip",{attrs:{"form-id":e.unitPlanId,fieldName:e.planField.StartDate}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.StartDate},attrs:{"field-name":e.planField.StartDate,"is-active":e.currentFieldName===e.planField.StartDate},on:{switch:e.handleSwitchComment}}),i("a-form-item",{staticStyle:{width:"26%","margin-bottom":"0px"}},[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(e._f("unitLabelName")("Grade level",e.planField.GradeId,e.$store.getters.formConfigData))+" "),e.unitLabelHint(e.planField.GradeId,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Grade level",e.planField.GradeId,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-select",{staticClass:"my-big-select",attrs:{getPopupContainer:function(e){return e.parentElement},placeholder:"Select a grade",disabled:!e.canEdit,size:"large"},model:{value:e.form.gradeId,callback:function(t){e.$set(e.form,"gradeId",t)},expression:"form.gradeId"}},e._l(e.gradeList,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],2),i("a-form-item",{staticClass:"range-time",staticStyle:{width:"70%","margin-bottom":"0px",position:"relative"},attrs:{label:"Start Date"}},[e.getWeek?i("div",{staticClass:"week-time"},[i("a-tag",{staticStyle:{"border-radius":"10px","font-size":"14px"},attrs:{color:"cyan"}},[e._v(" "+e._s(e.getWeek)+" ")])],1):e._e(),i("a-range-picker",{staticStyle:{width:"100%"},attrs:{"show-time":{format:"HH:mm"},format:"LLL",size:"large"},on:{openChange:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.StartDate,e.form.startDate)}},model:{value:e.rangeDate,callback:function(t){e.rangeDate=t},expression:"rangeDate"}},[i("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1):e._e(),t.visible&&t.fieldName===e.planField.Inquiry?i("div",{key:t.fieldName,staticClass:"form-block inquiry-form-block tag-content-block",attrs:{id:"inquiry","data-field-name":e.planField.Inquiry}},[i("collaborate-tooltip",{attrs:{"form-id":e.unitPlanId,"field-name":e.planField.Inquiry}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.Inquiry},attrs:{"is-active":e.currentFieldName===e.planField.Inquiry,"field-name":e.planField.Inquiry},on:{switch:e.handleSwitchComment}}),i("a-form-item",{staticClass:"bigIdea"},[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(e._f("unitLabelName")("Big Idea/ Statement of Inquiry/ Central Idea",e.planField.Inquiry,e.$store.getters.formConfigData))+" "),e.unitLabelHint(e.planField.Inquiry,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Big Idea/ Statement of Inquiry/ Central Idea",e.planField.Inquiry,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-textarea",{staticClass:"my-form-textarea inquiry",attrs:{placeholder:"teacher"===e.$store.getters.currentRole?e.$t("teacher.add-unit-plan.teacher-direction-of-inquiry"):e.$t("teacher.add-unit-plan.expert-direction-of-inquiry"),"auto-size":"",disabled:!e.canEdit},on:{change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.Inquiry,e.form.inquiry)}},model:{value:e.form.inquiry,callback:function(t){e.$set(e.form,"inquiry",t)},expression:"form.inquiry"}})],2),e.canEdit?i("a-tooltip",{attrs:{title:"Browse"},on:{click:function(t){t.stopPropagation(),e.selectBigIdeaDataVisible=!0}}},[i("span",{staticClass:"browse"},[i("a-icon",{attrs:{theme:"twoTone",twoToneColor:"rgba(21, 195, 154, 1)",type:"appstore"}})],1)]):e._e()],1):e._e(),t.visible&&t.fieldName===e.planField.Scenarios?i("div",{key:t.fieldName,staticClass:"form-block tag-content-block",attrs:{"data-field-name":e.planField.Scenarios}},[i("collaborate-tooltip",{attrs:{"form-id":e.unitPlanId,fieldName:e.planField.Sdg}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.Sdg},attrs:{"is-active":e.currentFieldName===e.planField.Sdg,"field-name":e.planField.Sdg},on:{switch:e.handleSwitchComment}}),i("a-divider",[e._v("Teaching goals")]),i("a-row",[i("a-col",{attrs:{span:"24"}},[i("div",{staticClass:"form-block-title"},[e._v(" "+e._s(e._f("unitLabelName")("UN Sustainable Development Goal(s)",e.planField.Scenarios,e.$store.getters.formConfigData))+" "),e.unitLabelHint(e.planField.Scenarios,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("UN Sustainable Development Goal(s)",e.planField.Scenarios,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2)])],1),e._l(e.form.scenarios,(function(t,s){return i("div",{key:s,staticClass:"sdg-form-block",attrs:{id:"sdg"}},[i("div",{staticClass:"scenario-description"},[i("a-popconfirm",{directives:[{name:"show",rawName:"v-show",value:e.form.scenarios.length>1,expression:"form.scenarios.length > 1"}],attrs:{title:"Delete?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(t){return e.handleDeleteSdg(s)}}},[i("span",{staticClass:"delete-action"},[i("img",{attrs:{src:a("1ffa"),alt:""}})])]),i("a-form-model-item",[i("a-select",{staticClass:"my-big-select",attrs:{getPopupContainer:function(e){return e.parentElement},placeholder:"Select a goal from UN",disabled:!e.canEdit,size:"large"},on:{change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.Sdg,e.form.sdg)}},model:{value:t.sdgId,callback:function(a){e.$set(t,"sdgId",a)},expression:"scenario.sdgId"}},e._l(e.sdgList,(function(t,a){return i("a-select-option",{key:a,attrs:{disabled:-1!=e.selectedSdg.indexOf(t.id),value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),i("a-form-model-item",[i("input-search",{ref:"descriptionInputSearch",refInFor:!0,attrs:{"currend-index":e.currentIndex,"default-value":t.description,"key-index":s,"search-list":e.descriptionSearchList,label:"description","can-edit":e.canEdit},on:{reset:function(t){e.descriptionSearchList=[]},search:e.handleDescriptionSearch,"select-item":e.handleSelectScenario,change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.Sdg,e.form.sdg)}}})],1)],1)])})),i("add-green-icon",{staticClass:"add-input input-icon",on:{click:e.handleAddMoreSdg}})],2):e._e(),t.visible&&t.fieldName===e.planField.Rwc?i("div",{key:t.fieldName,staticClass:"form-block form-block-rwc tag-content-block",attrs:{"data-field-name":e.planField.Rwc}},[i("collaborate-tooltip",{attrs:{"form-id":e.unitPlanId,fieldName:e.planField.Rwc}}),i("a-form-model-item",[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(e._f("unitLabelName")("Real World Connection(s)",e.planField.Rwc,e.$store.getters.formConfigData))+" "),e.unitLabelHint(e.planField.Rwc,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Real World Connection(s)",e.planField.Rwc,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-select",{attrs:{getPopupContainer:function(e){return e.parentElement},size:"large",placeholder:"Choose real world connection",disabled:!e.canEdit},on:{change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.Rwc,e.form.rwc)}},model:{value:e.form.rwc,callback:function(t){e.$set(e.form,"rwc",t)},expression:"form.rwc"}},e._l(e.rwcList,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],2)],1):e._e(),t.visible&&t.fieldName===e.planField.Question?i("div",{key:t.fieldName,class:{"form-block":!0,"form-block-disabled":e.$store.getters.userInfo.disableQuestion,"tag-content-block":!0},attrs:{"data-field-name":e.planField.Question}},[i("collaborate-tooltip",{attrs:{"form-id":e.unitPlanId,fieldName:e.planField.Question}}),e.$store.getters.userInfo.disableQuestion?e._e():i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.Question},attrs:{"is-active":e.currentFieldName===e.planField.Question,"field-name":e.planField.Question},on:{switch:e.handleSwitchComment}}),i("a-form-item",{staticClass:"unit-question"},[i("span",{attrs:{slot:"label"},slot:"label"},[i("a-tooltip",{attrs:{title:"Set key question/Line of inquiry"}},[i("a-icon",{staticStyle:{color:"#15c39a",cursor:"pointer","font-size":"18px"},attrs:{type:"exclamation-circle"},on:{click:function(t){e.questionSettingVisible=!0}}})],1),e._v(" "+e._s(e._f("unitLabelName")("Key question(s) / Line(s) of inquiry",e.planField.Question,e.$store.getters.formConfigData))+" "),e.unitLabelHint(e.planField.Question,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Key question(s) / Line(s) of inquiry",e.planField.Question,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),e.$store.getters.userInfo.disableQuestion?e._e():i("div",[i("div",{staticClass:"question-more"},[i("a-button",{attrs:{type:"link"},on:{click:function(t){e.questionMoreVisible=!0}}},[e._v("more")])],1),e.showRecommendQuestion?i("div",{staticClass:"recommend-question"},[i("a-icon",{staticClass:"close-icon",attrs:{type:"close"},on:{click:function(t){t.stopPropagation(),e.hideRecommendQuestion=!0}}}),i("div",{staticClass:"recommend-box"},[i("a-tooltip",{attrs:{title:"You can add the key questions relevant to the big idea you chose above"}},[i("span",{staticClass:"title"},[i("a-icon",{staticStyle:{width:"25px"},attrs:{type:"question-circle"}}),e._v("Recommended:")],1)]),i("ul",{staticClass:"recommend-ul"},e._l(e.recommendQuestionList,(function(t,a){return a<3&&-1===e.selectQuestion.indexOf(t.name)?i("li",{key:a},[e._v(" "+e._s(t.name)+" "),i("a-button",{staticClass:"add-question",attrs:{type:"link"},on:{click:function(a){return a.stopPropagation(),e.handerInsertQuestion(t)}}},[e._v(" add ")])],1):e._e()})),0)],1)],1):e._e(),e._l(e.form.questions,(function(t,a){return i("div",{key:a,staticClass:"form-input-item"},[i("a-textarea",{staticClass:"my-form-textarea",attrs:{placeholder:"teacher"===e.$store.getters.currentRole?e.$t("teacher.add-unit-plan.teacher-nth-key-question"):e.$t("teacher.add-unit-plan.expert-nth-key-question"),"auto-size":"",disabled:!e.canEdit},on:{change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.Question,e.form.question)}},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"question.name"}}),e.form.questions.length>1?i("div",{staticClass:"delete-icon",on:{click:function(t){return e.handleRemoveQuestion(a)}}},[i("a-icon",{style:{fontSize:"20px"},attrs:{type:"delete"}})],1):e._e()],1)}))],2)]),e.$store.getters.userInfo.disableQuestion?e._e():i("a-button",{staticClass:"add-button",staticStyle:{top:"-40px"},attrs:{icon:"plus-circle",size:"large",type:"link"},on:{click:e.handleAddMoreQuestion}})],1):e._e(),t.visible&&t.fieldName===e.planField.LearnOuts?i("div",{key:t.fieldName,staticClass:"form-block tag-content-block",attrs:{"data-field-name":e.planField.LearnOuts}},[i("collaborate-tooltip",{staticStyle:{left:"100px"},attrs:{"form-id":e.unitPlanId,fieldName:e.planField.Assessment}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.Assessment},attrs:{"is-active":e.currentFieldName===e.planField.Assessment,"field-name":e.planField.Assessment},on:{switch:e.handleSwitchComment}}),i("a-form-item",[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(e._f("unitLabelName")("Set learning objectives",e.planField.LearnOuts,e.$store.getters.formConfigData))+" "),e.unitLabelHint(e.planField.LearnOuts,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Set learning objectives",e.planField.LearnOuts,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-badge",{attrs:{dot:e.hasExtraRecommend}},[i("a-button",{attrs:{type:"primary",disabled:!e.canEdit},on:{click:function(t){return e.handleSelectDescription()}}},[i("div",{staticClass:"btn-text",staticStyle:{"line-height":"20px"}},[e._v(" "+e._s(e._f("unitLabelName")("Set learning objectives",e.planField.LearnOuts,e.$store.getters.formConfigData))+" ")])])],1),i("a-button",{staticClass:"assessment-task-button",attrs:{ghost:"",type:"link"},on:{click:function(t){return e.handleClickTaskDetail(t)}}},[e._v(" Assessment task details "),i("a-icon",{attrs:{type:"right"}})],1)],2),i("ui-learn-out",{ref:"learnOut",refInFor:!0,attrs:{"custom-tags":e.customTags,"learn-outs":e.form.learnOuts,"self-outs":e.form.selfOuts,"can-edit":e.canEdit},on:{addCustomTag:e.handleAddCustomTagRemote,"remove-learn-outs":e.handleRemoveLearnOuts}})],1):e._e(),t.visible&&t.fieldName===e.planField.Prior?i("div",{key:t.fieldName,staticClass:"form-block tag-content-block",staticStyle:{clear:"both"},attrs:{"data-field-name":e.planField.Prior}},[i("collaborate-tooltip",{attrs:{"form-id":e.unitPlanId,fieldName:e.planField.Prior}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.Prior},attrs:{"is-active":e.currentFieldName===e.planField.Prior,"field-name":e.planField.Prior},on:{switch:e.handleSwitchComment}}),i("a-form-model-item",[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(e._f("unitLabelName")("Prior learning experience",e.planField.Prior,e.$store.getters.formConfigData))+" "),e.unitLabelHint(e.planField.Prior,e.$store.getters.formConfigData)?[i("a-tooltip",{attrs:{title:e._f("unitLabelHint")("Prior learning experience",e.planField.Prior,e.$store.getters.formConfigData),placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-textarea",{attrs:{"allow-clear":"","auto-size":"",placeholder:"What are the approaches to find out what students already knew?",disabled:!e.canEdit},on:{change:function(t){return e.handleCollaborateEvent(e.unitPlanId,e.planField.Prior,e.form.prior)}},model:{value:e.form.prior,callback:function(t){e.$set(e.form,"prior",t)},expression:"form.prior"}})],2)],1):e._e()]})),e._l(e.$store.getters.formConfigData.planCustomList,(function(t){return[t.visible&&e.form.customFieldData&&e.form.customFieldData.hasOwnProperty(t.id)?i("div",{key:t.id,staticClass:"form-block tag-content-block",attrs:{"data-field-name":"cust_"+t.name,"data-field-id":t.id}},[i("a-form-item",[i("template",{staticClass:"my-label",slot:"label"},[e._v(" "+e._s(t.name)+" "),t.hint?[i("a-tooltip",{attrs:{title:t.hint,placement:"top"}},[i("a-icon",{attrs:{type:"info-circle"}})],1)]:e._e()],2),i("a-input",{staticClass:"my-form-input",attrs:{disabled:!e.canEdit},model:{value:e.form.customFieldData[t.id],callback:function(a){e.$set(e.form.customFieldData,t.id,a)},expression:"form.customFieldData[custFieldItem.id]"}})],2)],1):e._e()]}))],2)])],2),i("a-step",{attrs:{title:"Link Plan content"}},[i("template",{slot:"description"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.currentActiveStepIndex,expression:"currentActiveStepIndex === 1"}],staticClass:"step-detail"},[i("div",{staticClass:"form-block"},[i("collaborate-tooltip",{attrs:{"form-id":e.unitPlanId,"field-name":e.planField.Link}}),i("comment-switch",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],class:{"my-comment-switch":!0,"my-comment-show":e.currentFieldName===e.planField.Link},attrs:{"field-name":e.planField.Link,"is-active":e.currentFieldName===e.planField.Link},on:{switch:e.handleSwitchComment}}),i("a-form-item",{staticClass:"link-plan-title",attrs:{label:"Add task(s)"}},[i("a-space",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}]},[i("a-button",{style:{"background-color":"#fff",color:"#000",border:"1px solid #D8D8D8",display:"flex","align-items":"center"},attrs:{type:"primary",loading:e.linkLoading},on:{click:e.handleAddTasks}},[i("div",{staticClass:"btn-text",staticStyle:{"line-height":"20px","padding-left":"5px"}},[e._v(" + Link Task(s) ")])]),i("a-button",{staticClass:"addCategory",style:{"background-color":"#fff",color:"#000",border:"1px solid #D8D8D8"},attrs:{loading:e.addCategoryLoading,type:"primary"},on:{click:e.handleAddTerm}},[i("div",{staticClass:"btn-text",staticStyle:{"line-height":"20px","padding-left":"5px"}},[e._v(" + Add category ")])])],1)],1),i("div",{staticClass:"common-link-wrapper"},[i("plan-link",{ref:"planLink",attrs:{"can-edit":e.canEdit,"from-id":this.unitPlanId,"from-type":this.contentType["unit-plan"]},on:{"group-name-list-update":e.handleUpdateGroupNameList}})],1)],1)])])],2)],1)],1)],1),i("div",{staticClass:"unit-plan-form-right step",style:{width:e.rightWidth+"px"}},[e.showRightModule(e.rightModule.collaborate)?[i("a-skeleton",{attrs:{loading:e.showHistoryLoading,active:""}},[i("div",{staticClass:"collaborate-panel",style:{width:e.rightWidth+"px","margin-top":"0px","z-index":100,padding:"10px"}},[i("div",{staticClass:"icon"},[i("comment-icon")],1),i("a-tabs",{attrs:{"default-active-key":e.defaultHistoryKey}},[i("a-tab-pane",{key:"1",attrs:{tab:"Comment"}},[i("collaborate-comment-view",{attrs:{"comment-list":e.collaborateCommentList,"source-id":e.unitPlanId,"source-type":e.contentType["unit-plan"],"collaborate-user-list":e.collaborate.users},on:{"update-comment":e.handleUpdateCommentList}})],1),i("a-tab-pane",{key:"2",attrs:{"force-render":"",tab:"History"}},[i("collaborate-history",{attrs:{"history-list":e.historyList},on:{restore:e.handleRestoreField}})],1)],1)],1)])]:e._e(),e.showRightModule(e.rightModule.collaborateComment)?[i("div",{staticClass:"collaborate-panel",style:{width:e.rightWidth+"px","margin-top":e.collaborateTop+"px","z-index":100,padding:"10px"}},[i("collaborate-comment-panel",{attrs:{"comment-list":e.collaborateCommentList,"field-name":e.currentFieldName,"source-id":e.unitPlanId,"source-type":e.contentType["unit-plan"],"collaborate-user-list":e.collaborate.users},on:{"cancel-comment":e.handleCancelComment,"update-comment":e.handleUpdateCommentList}})],1)]:e._e(),e.showRightModule(e.rightModule.imageUpload)&&0===e.currentActiveStepIndex?[i("div",{staticClass:"form-block-right",style:{width:e.rightWidth+"px"}},[i("a-form-model-item",{staticClass:"img-wrapper"},[i("a-upload-dragger",{attrs:{customRequest:e.handleUploadImage,showUploadList:!1,accept:"image/png, image/jpeg",name:"file",disabled:!e.canEdit}},[e.canEdit?i("div",{directives:[{name:"show",rawName:"v-show",value:e.form.image,expression:"form.image"}],staticClass:"delete-img",on:{click:function(t){return e.handleDeleteImage(t)}}},[i("a-icon",{attrs:{type:"close-circle"}})],1):e._e(),e.uploading?[i("div",{staticClass:"upload-container"},[i("p",{staticClass:"ant-upload-drag-icon"},[i("a-icon",{attrs:{type:"cloud-upload"}})],1),i("p",{staticClass:"ant-upload-text"},[i("a-spin"),i("span",{staticClass:"uploading-tips"},[e._v(e._s(e.$t("teacher.add-unit-plan.uploading")))])],1)])]:e._e(),!e.uploading&&e.form&&e.form.image?[i("div",{staticClass:"image-preview"},[i("img",{attrs:{src:e.form.image,alt:""}})])]:e._e(),e.uploading||!e.form||e.form.image?e._e():[i("div",{staticClass:"upload-container"},[i("p",{staticClass:"ant-upload-drag-icon"},[i("img",{staticClass:"upload-icon",attrs:{src:a("5ae4")}})]),i("p",{staticClass:"ant-upload-text"},[e._v(" "+e._s(e.$t("teacher.add-unit-plan.upload-a-picture"))+" ")])])]],2)],1)],1)]:e._e(),e.showRightModule(e.rightModule.customTag)?[i("div",{directives:[{name:"show",rawName:"v-show",value:!this.contentLoading,expression:"!this.contentLoading"}],style:{width:e.rightWidth+"px","margin-top":e.customTagTop+"px","z-index":50}},[i("custom-tag",{ref:"customTag",attrs:{"display-mode":e.canEdit?"edit":"readonly","scope-tags-list":e.customTagList,"selected-tags-list":e.form.customTags,"show-arrow":e.showCustomTag,"custom-tags":e.customTags,"current-field-name":e.currentFocusFieldName},on:{"reload-user-tags":e.loadCustomTags,"change-add-keywords":e.handleChangeAddKeywords,"change-user-tags":e.handleChangeCustomTags}})],1)]:e._e(),e.showRightModule(e.rightModule.taskDetails)&&0===e.currentActiveStepIndex?[i("div",{staticClass:"task-details-panel",style:{width:e.rightWidth+"px","margin-top":e.taskDetailsTop+"px","z-index":200}},[i("Assessment-Task-Details",{attrs:{"associate-task-list":e.associateTaskList},on:{"hide-assessment-task":function(t){return e.resetRightModuleVisible()}}})],1)]:e._e()],2)])],1)],1),i("a-modal",{attrs:{closable:!0,footer:null,maskClosable:!1,destroyOnClose:"",width:"640px"},model:{value:e.showCollaborateModalVisible,callback:function(t){e.showCollaborateModalVisible=t},expression:"showCollaborateModalVisible"}},[e.showCollaborateModalVisible?i("collaborate-user-list",{attrs:{"content-id":e.unitPlanId,"content-type":e.contentType["unit-plan"],"main-content":e.collaborateContent},on:{confirmSelect:e.confirmSelectCollaborateUsers}}):e._e()],1),i("a-modal",{attrs:{footer:null,destroyOnClose:"",title:"Select Content Type"},on:{cancel:function(t){e.selectAddContentTypeVisible=!1},ok:function(t){e.selectAddContentTypeVisible=!1}},model:{value:e.selectAddContentTypeVisible,callback:function(t){e.selectAddContentTypeVisible=t},expression:"selectAddContentTypeVisible"}},[i("div",{staticClass:"add-content-wrapper"},[i("div",{staticClass:"add-content-item",on:{click:e.handleAddUnitPlanTask}},[i("a",[i("content-type-icon",{attrs:{type:e.contentType.task}}),e._v(" "+e._s(e.$t("teacher.add-unit-plan.task"))+" ")],1)]),i("div",{staticClass:"add-content-item",on:{click:e.handleAddUnitPlanLesson}},[i("a",[i("content-type-icon",{attrs:{type:e.contentType.lesson}}),e._v(" "+e._s(e.$t("teacher.add-unit-plan.lesson"))+" ")],1)]),i("div",{staticClass:"add-content-item",on:{click:e.handleAddUnitPlanEvaluation}},[i("a",[i("content-type-icon",{attrs:{type:e.contentType.evaluation}}),e._v(" "+e._s(e.$t("teacher.add-unit-plan.evaluation"))+" ")],1)]),e.addLoading?i("div",{staticClass:"add-loading"},[i("a-spin")],1):e._e()])]),i("a-modal",{attrs:{footer:null,destroyOnClose:"",title:"Add Audio"},on:{cancel:function(t){e.showAddAudioVisible=!1},ok:function(t){e.showAddAudioVisible=!1}},model:{value:e.showAddAudioVisible,callback:function(t){e.showAddAudioVisible=t},expression:"showAddAudioVisible"}},[i("div",{staticClass:"audio-material-action"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.currentUploading,expression:"currentUploading"}],staticClass:"uploading-mask"},[i("div",{staticClass:"uploading"},[i("a-spin",{attrs:{large:""}})],1)]),i("div",{staticClass:"action-item"},[i("a-upload",{attrs:{customRequest:e.handleUploadAudio,showUploadList:!1,accept:"audio/*",name:"file"}},[i("a-button",{attrs:{icon:"upload",type:"primary"}},[e._v(e._s(e.$t("teacher.add-unit-plan.upload-audio")))])],1)],1),i("a-divider",[e._v(" "+e._s(e.$t("teacher.add-unit-plan.or"))+" ")]),i("div",{staticClass:"action-item-column"},[i("div",{staticClass:"action-tips"},[e._v(" "+e._s(e.$t("teacher.add-unit-plan.record-your-voice"))+" ")])]),i("div",{staticClass:"material-action"},[i("a-button",{key:"back",staticClass:"action-item",on:{click:e.handleCancelAddAudio}},[e._v(" Cancel ")]),i("a-button",{key:"submit",staticClass:"action-item",attrs:{type:"primary"},on:{click:e.handleConfirmAddAudio}},[e._v(" Ok ")])],1)],1)]),i("a-modal",{attrs:{footer:null,destroyOnClose:"",title:"Refer MyContent",width:"1150px"},on:{cancel:function(t){e.selectReferMyContentVisible=!1},ok:function(t){e.selectReferMyContentVisible=!1}},model:{value:e.selectReferMyContentVisible,callback:function(t){e.selectReferMyContentVisible=t},expression:"selectReferMyContentVisible"}},[i("div",{staticClass:"link-content-wrapper"},[i("my-content-selector",{attrs:{"current-id":e.unitPlanId,"filter-type-list":["unit-plan"],mode:e.DisplayMode.Refer}})],1)]),i("a-drawer",{attrs:{closable:!1,mask:!1,visible:e.referDetailVisible,destroyOnClose:"",placement:"right",width:"700px"},on:{close:e.handleCloseReferDetail}},[i("a-row",{staticClass:"preview-wrapper-row"},[i("a-col",{staticClass:"view-back-col",attrs:{span:"2"}},[i("div",{staticClass:"view-back",on:{click:e.handleCloseReferDetail}},[i("div",{staticClass:"back-icon"},[i("img",{attrs:{src:a("217a")}})])])]),i("a-col",{staticClass:"preview-wrapper-col",attrs:{span:"24"}},[i("div",{staticClass:"detail-wrapper"},[i("div",{staticClass:"refer-detail"},[i("refer-preview",{attrs:{id:e.referId,type:e.referType},on:{refer:e.handleReferBlock,"hover-refer-block":e.handleHoverReferBlock,"refer-associate":e.handleReferAssociate}})],1)])])],1)],1),i("a-modal",{attrs:{"dialog-style":{top:"10px"},footer:null,destroyOnClose:"",width:"900px"},model:{value:e.selectLinkContentVisible,callback:function(t){e.selectLinkContentVisible=t},expression:"selectLinkContentVisible"}},[i("div",{staticClass:"my-modal-title",attrs:{slot:"title"},slot:"title"},[e._v(" Link my content ")]),i("div",{staticClass:"link-content-wrapper"},[i("new-my-content",{attrs:{"default-group-name":e.newTermName,"filter-type-list":[e.contentType.task],"from-id":e.unitPlanId,"from-type":e.contentType["unit-plan"],"group-name-list":e.groupNameList,"group-name-mode":e.groupNameMode,mode:"common-link","selected-list":e.selectedTaskList},on:{cancel:function(t){e.selectLinkContentVisible=!1},ensure:e.handleEnsureSelectedLink}})],1)]),i("a-modal",{attrs:{"dialog-style":{top:"20px"},footer:null,title:null,destroyOnClose:"",width:"1200px"},on:{cancel:function(t){e.selectSyncDataVisible=!1},ok:function(t){e.selectSyncDataVisible=!1}},model:{value:e.selectSyncDataVisible,callback:function(t){e.selectSyncDataVisible=t},expression:"selectSyncDataVisible"}},[i("div",{staticClass:"link-content-wrapper"},[i("new-browser",{ref:"newBrowser",attrs:{"default-active-menu":e.defaultActiveMenu,"recommend-data":e.recommendData,"selected-id":e.selectedIdList,"selected-list":e.selectedList,"show-menu":e.showMenuList,"show-curriculum":!0,"question-index":"_questionIndex_1"},on:{"select-assessmentType":e.handleSelectAssessmentType,"select-curriculum":e.handleSelectCurriculum,"select-subject-specific-skill":e.handleSelectSubjectSpecificSkillListData,"select-century-skill":e.handleSelect21CenturySkillListData,"select-idu":e.handleSelectIdu,"select-recommend":e.handleSelectRecommend,"cancel-select":e.handleCancelSelectData,"ensure-select":e.handleEnsureSelectData}})],1)]),i("a-modal",{attrs:{footer:null,destroyOnClose:"",title:"Set key question(s) / Line(s) of inquiry",width:"600px"},model:{value:e.questionSettingVisible,callback:function(t){e.questionSettingVisible=t},expression:"questionSettingVisible"}},[i("div",{staticClass:"ensure-setting-modal"},[i("div",{staticClass:"tips"},[i("p",[e._v("We understand that for some countries, \"key questions/line of inquiry\" is not required in Unit plan so you have the option to turn it off. You won't see that section once it's off.")]),i("p"),i("p",{staticStyle:{color:"red"}},[e._v("You might turn it on or change in your account setting If you need the section in future.")])]),i("a-switch",{on:{change:e.onChangeSwitch},model:{value:e.disableQuestion,callback:function(t){e.disableQuestion=t},expression:"disableQuestion"}}),i("span",{staticStyle:{color:"red","font-family":"Inter-Bold","font-size":"15px"}},[e._v(" Key question(s) / Line(s) of inquiry")]),i("div",{staticClass:"modal-ensure-action-line-center"},[i("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:function(t){e.questionSettingVisible=!1}}},[e._v("Cancel ")]),i("a-button",{staticClass:"action-ensure action-item",attrs:{loading:e.confirmLoading,shape:"round",type:"primary"},on:{click:e.handQuestionSetting}},[e._v("Confirm ")])],1)],1)]),i("a-modal",{attrs:{footer:null,destroyOnClose:"",title:"Browse big idea",width:"70%"},on:{cancel:function(t){e.selectBigIdeaDataVisible=!1},ok:function(t){e.selectBigIdeaDataVisible=!1}},model:{value:e.selectBigIdeaDataVisible,callback:function(t){e.selectBigIdeaDataVisible=t},expression:"selectBigIdeaDataVisible"}},[i("div",{staticClass:"link-content-wrapper"},[i("BigIdeaBrowse",{on:{"handle-select":e.handleSelectBigIdeaData}}),i("div",{staticClass:"modal-ensure-action-line-right"},[i("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:function(t){e.selectBigIdeaDataVisible=!1}}},[e._v("Cancel ")]),i("a-button",{staticClass:"action-ensure action-item",attrs:{shape:"round",type:"primary"},on:{click:e.handleEnsureSelectBigIdeaData}},[e._v("Ok ")])],1)],1)]),i("a-modal",{attrs:{footer:null,destroyOnClose:"",title:"Browse Key Questions",width:"900px"},on:{cancel:function(t){e.questionMoreVisible=!1},ok:function(t){e.questionMoreVisible=!1}},model:{value:e.questionMoreVisible,callback:function(t){e.questionMoreVisible=t},expression:"questionMoreVisible"}},[i("div",{staticClass:"link-content-wrapper"},[i("QuestionBrowse",{attrs:{"big-idea":e.form.inquiry,"question-list":e.form.questions},on:{"select-question":e.handleSelectQuestion}}),i("div",{staticClass:"modal-ensure-action-line-right",staticStyle:{"justify-content":"center"}},[i("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:function(t){e.questionMoreVisible=!1}}},[e._v("Cancel ")]),i("a-button",{staticClass:"action-ensure action-item",attrs:{shape:"round",type:"primary"},on:{click:e.handleEnsureSelectQuestionData}},[e._v("Ok ")])],1)],1)]),i("a-modal",{attrs:{footer:null,destroyOnClose:"",title:"Share",width:"500px"},on:{ok:function(t){e.shareVisible=!1},cancel:function(t){e.shareVisible=!1}},model:{value:e.shareVisible,callback:function(t){e.shareVisible=t},expression:"shareVisible"}},[i("share-content-setting",{attrs:{"source-id":e.form.id,"source-type":e.form.type},on:{"update-share-status":e.handleShareStatus}})],1),i("a-modal",{attrs:{footer:null,title:null,destroyOnClose:"",width:"700px",maskClosable:!1,closable:!1},model:{value:e.showUpdateContent,callback:function(t){e.showUpdateContent=t},expression:"showUpdateContent"}},[i("collaborate-update-content",{ref:"collaborateUpdate",attrs:{"source-id":e.form.id,"source-type":e.form.type},on:{"update-content":e.handleUpdateContent}})],1),e.publishListVisible?i("publish-list",{attrs:{"parent-id":e.unitPlanId,"parent-type":e.contentType["unit-plan"],"task-list":e.associateTaskList},on:{publish:e.handleMultiPublish,close:e.handleMultiPublishClose}}):e._e(),i("a-skeleton",{attrs:{loading:e.contentLoading,active:""}})],1)],1)},s=[],n=a("b85c"),o=a("5530"),r=a("1da1"),l=(a("96cf"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("d81d"),a("b0c0"),a("7db0"),a("4de4"),a("a4d3"),a("e01a"),a("498a"),a("a434"),a("c740"),a("6062"),a("99af"),a("823b")),c=a("8f46"),d=a("3f76"),u=a("f93e"),h=a("2934"),p=a("b3db"),m=a("85b1"),g=a("c0f4"),f=a("b0e0"),v=a("9afb"),y=a("c418"),b=a("8791"),C=a("a2b1"),w=a("0143"),k=a("a88c"),T=a("de0d"),L=a("ca00"),I=a("9586"),S=a("b199"),A=a("b775"),x={createLessonPPT:"/classcipe/api/lesson/createLessonPPT",addOrUpdate:"/classcipe/api/lesson/addOrUpdate",delete:"/classcipe/api/lesson/delete",deleteBatch:"/classcipe/api/lesson/deleteBatch",list:"/classcipe/api/lesson/list",LessonQueryById:"/classcipe/api/lesson/queryById"};function _(e){return Object(A["d"])({url:x.addOrUpdate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}var D=a("9f06"),O=a("1712"),E=a("4fb2"),N=a("0fa0"),M=a("d761"),j=a("0cdf"),R=a("81c4"),B=a("3264"),P=a("489c"),U=a("57a5b"),F=a("a02e"),V=a("6626"),$=a("464d"),q=a("1899"),K=a("1e7f"),Q=a("d28d"),G=a("ab44"),H=a("fdf4"),z=a("87a2"),W=a("6064"),Y=a("a903"),J=a.n(Y),Z=a("e9b0"),X=a("c24f"),ee=a("79d6"),te=a("2ac8"),ae=a("cd60"),ie=a("5841"),se=a("d33b4"),ne=a("c1df"),oe=a.n(ne),re=a("68c4d"),le=a("e11c"),ce=a("0368"),de=a("a262"),ue=a("acd9"),he=a("3b74"),pe=a("774b"),me=a("6f20"),ge=a("b9f9"),fe=a("d6ea"),ve=a.n(fe),ye=a("82bf"),be={name:"AddUnitPlan",components:{PublishList:ge["a"],ShareContentSetting:de["a"],AssessmentTaskDetails:re["a"],QuestionBrowse:ae["a"],CollaborateHistory:Z["a"],CollaborateCommentView:W["a"],CommentSwitch:z["a"],CollaborateCommentPanel:H["a"],NewMyContent:K["a"],PlanLink:q["a"],ReferPreview:V["a"],CollaborateUserList:j["a"],CommonFormHeader:R["a"],ContentTypeIcon:c["a"],InputSearch:g["a"],SdgTagInput:f["a"],NewUiClickableKnowledgeTag:C["a"],NewClickableSkillTag:w["a"],SkillTag:k["a"],MyContentSelector:I["a"],CustomTag:O["a"],RelevantTagSelector:N["a"],AddKeywordTag:M["a"],NewBrowser:B["a"],commentIcon:J.a,UiLearnOut:$["a"],BigIdeaBrowse:ee["a"],Collapse:ie["a"],CollaborateTooltip:he["a"],CollaborateUpdateContent:me["a"],AddGreenIcon:ve.a},props:{unitPlanId:{type:String,default:null}},mixins:[se["a"],le["a"],ce["a"]],data:function(){return{showCollaborateVisible:!1,contentLoading:!0,referenceLoading:!1,contentType:d["e"],DisplayMode:U["a"],selectAddContentTypeVisible:!1,selectLinkContentVisible:!1,showAddAudioVisible:!1,currentUploading:!1,audioUrl:null,labelCol:{span:4},wrapperCol:{span:18},form:{id:null,image:"",inquiry:"",name:"Untitled UnitPlan",status:0,subjects:"",learnOuts:[],selfOuts:[],questions:[{id:"",name:""}],scenarios:{description:"",sdgId:"1",sdgKeyWords:[{id:"",name:""}]},createTime:"",updateTime:"",materials:[],customTags:[],overview:"",subjectIds:[],gradeIds:[],summarize:"",startDate:"",endDate:"",gradeId:void 0,prior:"",customFieldData:null},rangeDate:[],uploading:!1,sdgList:[],subjectList:[],gradeList:[],subjectTree:[],descriptionSearchList:[],addLoading:!1,currentIndex:0,saving:!1,publishing:!1,selectModel:P["a"],selectDescriptionIndex:"",selectReferMyContentVisible:!1,referDetailVisible:!1,referId:null,referType:null,activeReferBlock:"",showSidebar:!0,currentActiveStepIndex:0,groupNameList:[],groupNameListOther:[],selectSyncDataVisible:!1,selectedCurriculumList:[],selectedSpecificSkillList:[],selectedCenturySkillList:[],selectedIduList:[],selectedRecommendList:[],selectedBigIdeaList:[],selectedAssessmentList:[],selectIdea:!1,showCustomTag:!1,customTagTop:0,customTagList:[],customTags:{},NavigationType:G["a"],defaultActiveMenu:G["a"].learningOutcomes,showMenuList:[G["a"].specificSkills,G["a"].centurySkills,G["a"].learningOutcomes,G["a"].assessmentType,G["a"].idu],collaborateTop:0,questionSettingVisible:!1,disableQuestion:!1,confirmLoading:!1,selectBigIdeaDataVisible:!1,selectNewBigIdea:"",recommendQuestionList:[],showHistoryLoading:!1,hideRecommendQuestion:!1,questionMoreVisible:!1,selectedQuestionList:[],groupNameMode:"input",newTermName:"Untitled category",associateTaskList:[],tagColorList:["pink","orange","green","cyan","blue","red","purple"],recommendData:[],recommendDataIdList:[],selectedIdList:[],selectedList:[],selectedTaskList:[],taskDetailsTop:0,associateUnitPlanIdList:[],associateTaskIdList:[],associateId2Name:new Map,defaultGroupName:"Untitled category",addCategoryLoading:!1,rwcList:[],shareVisible:!1,shareStatus:0,planField:u["w"],linkLoading:!1,publishListVisible:!1,readonlyTagCategoryDescList:[]}},watch:{referDetailVisible:function(e){this.$logger.info("watch referDetailVisible "+e),this.$logger.info("screen width: ",document.body.clientWidth),e&&document.body.clientWidth<1700?this.showSidebar=!1:this.showSidebar=!0},"form.inquiry":function(e,t){this.$logger.info("watch form.inquiry change "+e,t),this.hideRecommendQuestion||(this.$logger.info("get recommend question "+e),this.findQuestionsByBigIdea(e),this.loadBigIdeaLearnOuts())}},beforeRouteLeave:function(e,t,a){var i=this;this.canEdit&&this.initCompleted&&JSON.stringify(this.form)!==JSON.stringify(this.oldForm)?this.$confirm({title:"Alert",okText:"Save",cancelText:"No",content:"Do you want to save the changes?",onOk:function(){i.handleSaveUnitPlan(!1),a()},onCancel:function(){a()}}):a()},computed:{lastChangeSavedTime:function(){var e=this.form.updateTime||this.form.createTime;return e?Object(L["formatLocalUTC"])(this.form.updateTime||this.form.createTime):""},selectedSdg:function(){var e=[];return this.form.scenarios.forEach((function(t){return e.push(t.sdgId)})),e},showRecommendQuestion:function(){return!this.hideRecommendQuestion&&(!!this.form.inquiry&&0!==this.recommendQuestionList.length)},selectQuestion:function(){return this.form.questions.map((function(e){return e.name}))},getTaskTags:function(){return this.form.questions.map((function(e){return e.name}))},hasExtraRecommend:function(){var e=this;this.$logger.info("-------------",this.form.learnOuts,this.recommendDataIdList);var t=!1;return this.form.learnOuts.forEach((function(a){-1===e.recommendDataIdList.indexOf(a.knowledgeId)&&(t=!0,e.$logger.info("------------learnOuts",a," not exist in ",e.recommendDataIdList))})),t}},created:function(){l["info"]("unitPlanId "+this.unitPlanId+" "+this.$route.path),E["b"].$on(E["a"].ReferContentItem,this.handleReferItem),F["LibraryEventBus"].$on(F["LibraryEvent"].ContentListSelectClick,this.handleDescriptionSelectClick),this.initData(),this.getAssociate(),this.loadCustomTags(),this.debouncedGetSdgByDescription=Object(m["a"])(this.searchScenario,300),this.findQuestionsByBigIdea=Object(m["a"])(this.findQuestionsByBigIdea,800),this.queryContentCollaborates(this.unitPlanId,this.contentType["unit-plan"]),this.currentActiveStepIndex=this.getSessionStep()},beforeDestroy:function(){E["b"].$off(E["a"].ReferContentItem,this.handleReferItem),F["LibraryEventBus"].$off(F["LibraryEvent"].ContentListSelectClick,this.handleDescriptionSelectClick)},methods:{initData:function(){var e=this;l["info"]("initData doing..."),Promise.all([Object(p["GetAllSdgs"])(),Object(v["GetMyGrades"])(),Object(y["SubjectTree"])({curriculumId:this.$store.getters.bindCurriculum}),Object(Q["f"])({key:"Real world connections"})]).then((function(t){if(l["info"]("initData done",t),l["info"]("GetAllSdgs Response ",t[0]),t[0].code||(e.sdgList=t[0].result),t[1].code||(l["info"]("GetMyGrades",t[1].result),e.gradeList=t[1].result),!t[2].code){l["info"]("SubjectTree",t[2].result);var a=t[2].result;a=Object(b["a"])(a),e.subjectTree=a,l["info"]("after format subjectTree",a)}t[3].code||(l["info"]("rwc",t[3].result),e.rwcList=t[3].result.children?t[3].result.children:[]),l["info"]("sdgList",e.sdgList)})).then((function(){e.restoreUnitPlan(e.unitPlanId,!0)})).catch((function(t){e.$message.error(e.$t("teacher.add-unit-plan.init-data-failed"))})).finally((function(){e.referenceLoading=!1}))},handleSelfOutsData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$logger.info(" handleSelfOutsData"),t.next=3,Object(v["GetReferOutcomes"])({id:e.unitPlanId,type:e.contentType["unit-plan"]});case 3:a=t.sent,e.$logger.info("getReferOutcomes response",a),a.success&&a.result.length&&(i=a.result,i.forEach((function(t){if(t.hasOwnProperty("isSelfCustom")&&t.isSelfCustom){t.fromId=t.fromList[0].fromId,t.fromName=t.fromList[0].fromName,t.fromTypeName=e.type2Name[t.fromList[0].fromType];var a=e.recommendData.find((function(e){return e.fromId===t.fromId}));a&&(e.$logger.info("targetItem "+a.fromName+" add SelfCustom SelfOut "+t.name,t),a.list.push(t))}})));case 6:case"end":return t.stop()}}),t)})))()},restoreUnitPlan:function(e,t){var a=this;t&&(this.contentLoading=!0),l["info"]("restoreUnitPlan "+e),Object(T["UnitPlanQueryById"])({id:e}).then((function(t){l["info"]("UnitPlanQueryById "+e,t.result);var i=t.result;0===i.scenarios.length?i.scenarios.push({description:"",sdgId:"1",sdgKeyWords:[]}):i.scenarios.forEach((function(e){e.sdgId||(e.sdgId=void 0)})),i.gradeId?0===a.gradeList.filter((function(e){return e.id===i.gradeId})).length&&(a.form.gradeId=void 0):i.gradeId=void 0,i.rwc||(i.rwc=void 0),i.startDate&&i.endDate&&(a.rangeDate.push(oe.a.utc(i.startDate).local()),a.rangeDate.push(oe.a.utc(i.endDate).local()));var s=i.customFieldData?JSON.parse(i.customFieldData):null,n={};s?a.$store.getters.formConfigData.planCustomList.forEach((function(e){s.hasOwnProperty(e.id)?n[e.id]=s[e.id]:n[e.id]=""})):a.$store.getters.formConfigData.planCustomList.forEach((function(e){n[e.id]=""})),a.$logger.info("displayCustomFieldData",n),i.customFieldData=n,a.form=i,0===i.questions.length&&a.form.questions.push({name:""})})).finally((function(){a.contentLoading=!1,a.loadCollaborateData(a.form.type,a.form.id),a.oldForm=JSON.parse(JSON.stringify(a.form)),a.initCompleted=!0,a.loadingShareContent()}))},handleUploadImage:function(e){var t=this;l["info"]("handleUploadImage",e);var a=new FormData;a.append("file",e.file,e.file.name),this.uploading=!0,this.$http.post(h["b"].UploadFile,a,{contentType:!1,processData:!1,headers:{"Content-Type":"multipart/form-data"},timeout:6e4}).then((function(e){l["info"]("handleUploadImage upload response:",e),t.form.image=t.$store.getters.downloadUrl+e.result})).catch((function(e){l["error"]("handleUploadImage error",e),t.$message.error(t.$t("teacher.add-unit-plan.upload-image-file-failed"))})).finally((function(){t.uploading=!1}))},handleDeleteImage:function(e){l["info"]("handleDeleteImage ",e),e.stopPropagation(),e.preventDefault(),this.form.image=null},handleDescriptionSearch:function(e,t){l["info"]("handleDescriptionSearch:",e,t),this.form.scenarios[e].description=t,this.debouncedGetSdgByDescription(e,t)},searchScenario:function(e,t){var a=this;l["info"]("searchScenario",t),this.currentIndex=e,"string"===typeof t&&t.trim().length>=3?Object(p["ScenarioSearch"])({searchKey:this.form.scenarios[e].description}).then((function(e){l["info"]("searchByDescription",e),a.descriptionSearchList=e.result})):this.descriptionSearchList=[]},handleSelectScenario:function(e,t){if(this.form.scenarios.hasOwnProperty(e)&&t&&t.sdgKeyWords&&t.description&&(this.form.scenarios[e].description=t.description,t.sdgKeyWords.length)){var a=t.sdgKeyWords;l["info"]("scenario["+e+"].sdgKeyWords",a),this.form.scenarios[e].sdgKeyWords=a}},handleAddMoreSdg:function(){var e={description:"",sdgId:void 0,sdgKeyWords:[]};this.form.scenarios.push(e)},handleDeleteSdg:function(e){this.form.scenarios.length>1?(this.form.scenarios.splice(e,1),l["info"]("scenarios ",this.form.scenarios,"sdgTotal "+this.form.scenarios.length)):this.$message.warn(this.$t("teacher.add-unit-plan.at-least-one-sdg"))},handleAddSdgTag:function(e){var t={name:e.tagName},a=e.sdgKey;l["info"]("handleAddSdgTag ",t.name,a),this.form.scenarios[a].sdgKeyWords.push(t),l["info"]("after handleAddSdgTag ",this.form.scenarios[a].sdgKeyWords)},handleRemoveSdgTag:function(e){var t=e.tagName,a=e.sdgKey;l["info"]("handleRemoveSdgTag ",t,a),this.form.scenarios[a].sdgKeyWords.splice(this.form.scenarios[a].sdgKeyWords.indexOf(t),1),l["info"]("after handleRemoveSdgTag ",this.form.scenarios[a].sdgKeyWords)},handleSelectSubject:function(e){l["info"]("handleSelectSubject",e),this.form.subjects=e},handleAddMoreQuestion:function(){var e={id:null,name:""};l["info"]("handleAddMoreQuestion ",e),this.form.questions.push(e)},handleRemoveQuestion:function(e){l["info"]("handleRemoveQuestion ",e),1===this.form.questions.length?this.form.questions[e].name="":this.form.questions.splice(e,1)},handleRemoveSkillTag:function(e){l["info"]("Unit Plan handleRemoveSkillTag",e),l["info"]("target question data",this.questionDataObj[e.questionIndex]),this.questionDataObj[e.questionIndex].skillTags=this.questionDataObj[e.questionIndex].skillTags.filter((function(t){return t.id!==e.id})),l["info"]("Unit Plan after handleRemoveSkillTag ",this.questionDataObj[e.questionIndex].skillTags)},handleAddSkillTag:function(e){l["info"]("Unit Plan handleAddSkillTag",e),l["info"]("target question data",this.questionDataObj[e.questionIndex]),this.questionDataObj[e.questionIndex].skillTags.push(Object.assign({},e)),this.$logger.info("after handleAddSkillTag questionDataObj "+e.questionIndex,this.questionDataObj[e.questionIndex])},handleSaveUnitPlan:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return l["info"]("handleSaveUnitPlan",t.form,t.sdgDataObj,t.questionDataObj),t.cleaPageCache(),i=Object.assign({},t.form),2===t.rangeDate.length&&(s=t.rangeDate[0].clone(),n=t.rangeDate[1].clone(),i.startDate=s.utc().format("YYYY-MM-DD HH:mm:ss"),i.endDate=n.utc().format("YYYY-MM-DD HH:mm:ss")),t.unitPlanId&&(i.id=t.unitPlanId),t.$refs.learnOut&&t.$refs.learnOut.length>0&&(i.selfOuts=t.$refs.learnOut[0].getSelfOuts()),i.customFieldData&&(i.customFieldData=JSON.stringify(i.customFieldData)),l["info"]("basic unitPlanData",i),a.next=10,Object(T["UnitPlanAddOrUpdate"])(i);case 10:o=a.sent,l["info"]("UnitPlanAddOrUpdate",o.result),o.success?(t.oldForm=JSON.parse(JSON.stringify(t.form)),t.$message.success(t.$t("teacher.add-unit-plan.save-success")),e&&t.handleBack()):t.$message.error(o.message),t.handleSaveContentEvent(t.unitPlanId,t.contentType["unit-plan"],t.oldForm);case 14:case"end":return a.stop()}}),a)})))()},handlePublishUnitPlan:function(e){var t=this;this.$logger.info("handlePublishUnitPlan",{id:this.unitPlanId,status:e},"associateTaskList",this.associateTaskList);var a=this.associateTaskList.some((function(e){return 0===e.status}));this.$logger.info("handlePublishUnitPlan isNeedPublishAssociate",a),e?a?this.$confirm({title:"Alert",content:"Would you like to publish the linked tasks as well?",centered:!0,okText:"Yes",cancelText:"No, publish this Unit plan only.",onOk:function(){t.$logger.info("handlePublishUnitPlan onOk"),t.publishListVisible=!0},onCancel:function(){t.handlePublishFormItem(e),t.$refs.commonFormHeader.publishing=!1}}):(this.form.status=e,this.handlePublishFormItem(e)):this.$confirm({title:"Alert",content:"If you wish to unpublish the linked tasks, please go to individual task page to unpublish.",onOk:function(){t.form.status=e,t.handlePublishFormItem(e)},onCancel:function(){t.$refs.commonFormHeader.publishing=!1}})},handleMultiPublish:function(e){var t=this;this.$logger.info("handleMultiPublish",e);var a=e.map((function(e){return{id:e,type:t.contentType.task}}));this.$logger.info("handleMultiPublish associates",a);var i={id:this.unitPlanId,status:1,type:this.contentType["unit-plan"],associates:a};Object(v["UpdateContentStatus"])(i).then((function(e){e.success?(t.$message.success(t.$t("teacher.add-unit-plan.save-success")),t.publishListVisible=!1):t.$message.error(e.message),t.form.status=1})).finally((function(){t.$refs.commonFormHeader.publishing=!1,t.$refs.planLink.getAssociate()}))},handleMultiPublishClose:function(){this.$logger.info("handleMultiPublishClose"),this.$refs.commonFormHeader.publishing=!1,this.publishListVisible=!1},handlePublishFormItem:function(e){var t=this,a={id:this.unitPlanId,status:e,type:this.contentType["unit-plan"]};Object(v["UpdateContentStatus"])(a).then((function(){1===e?t.$message.success(t.$t("teacher.add-unit-plan.publish-success")):t.$message.success("Unpublish successfully"),t.form.status=e})).finally((function(){t.$refs.commonFormHeader.publishing=!1}))},handleAddUnitPlanMaterial:function(){l["info"]("handleAddUnitPlanMaterial "+this.unitPlanId),this.$router.push({path:"/teacher/unit-plan-material-redirect/"+this.unitPlanId+"/create"})},handleAddUnitPlanTask:function(){var e=this;this.$logger.info("handleAddUnitPlanTask "+this.unitPlanId),this.addLoading?this.$logger.info("add loading"):(this.addLoading=!0,Object(S["TaskAddOrUpdate"])({name:"Unnamed Task",associateId:this.form.id,associateType:this.form.type}).then((function(t){e.$logger.info("TaskAddOrUpdate",t.result),t.success?(Object(v["Associate"])({fromId:e.unitPlanId,fromType:e.contentType["unit-plan"],toId:t.result.id,toType:e.contentType.task}).then((function(t){e.$logger.info("Associate response ",t)})),e.addLoading=!1,e.$router.push({path:"/teacher/task-redirect/"+t.result.id})):e.$message.error(t.message)})).finally((function(){e.addLoading=!1})))},handleAddUnitPlanLesson:function(){var e=this;l["info"]("handleAddUnitPlanLesson "+this.unitPlanId),this.addLoading?this.$logger.info("add loading"):(this.addLoading=!0,_({name:"Unnamed Lesson",associateId:this.form.id,associateType:this.form.type}).then((function(t){e.$logger.info("LessonAddOrUpdate",t.result),t.success?(Object(v["Associate"])({fromId:e.unitPlanId,fromType:e.contentType["unit-plan"],toId:t.result.id,toType:e.contentType.lesson}).then((function(t){e.$logger.info("Associate response ",t)})),e.addLoading=!1,e.$router.push({path:"/teacher/unit-plan-lesson-redirect/"+t.result.id})):e.$message.error(t.message)})).finally((function(){e.addLoading=!1})))},handleAddUnitPlanEvaluation:function(){var e=this;l["info"]("handleAddUnitPlanEvaluation "+this.unitPlanId),this.addLoading?this.$logger.info("add loading"):(this.addLoading=!0,Object(D["EvaluationAddOrUpdate"])({name:null,associateId:this.form.id,associateType:this.form.type}).then((function(t){e.$logger.info("EvaluationAddOrUpdate",t.result),t.success?(Object(v["Associate"])({fromId:e.unitPlanId,fromType:e.contentType["unit-plan"],toId:t.result.id,toType:e.contentType.evaluation}).then((function(t){e.$logger.info("Associate response ",t)})),e.addLoading=!1,e.$router.push({path:"/teacher/evaluation-redirect/"+t.result.id})):e.$message.error(t.message)})).finally((function(){e.addLoading=!1})))},goBack:function(){this.$logger.info("click goBack"),this.$router.push({path:"/teacher/main/created-by-me"})},handleChangeCustomTags:function(e){this.form.customTags=e},handleChangeAddKeywords:function(e){if(e.isGlobal)this.customTags.userGlobalTags.push(e);else{var t=this.customTags.userTags.findIndex((function(t){return t.name===e.parentName}));t>-1&&this.customTags.userTags[t].keywords.push(e.name)}},handleAudioResult:function(e){var t=this;l["info"]("handleAudioResult",e),this.currentUploading=!0;var a=new FormData;a.append("file",e,"audio.wav"),this.$http.post(h["b"].UploadFile,a,{contentType:!1,processData:!1,headers:{"Content-Type":"multipart/form-data"},timeout:6e4}).then((function(e){l["info"]("handleAudioResult upload response:",e),t.audioUrl=t.$store.getters.downloadUrl+e.result,l["info"]("handleAudioResult audioUrl",t.audioUrl)})).catch((function(e){l["error"]("handleAudioResult error",e)})).finally((function(){t.currentUploading=!1}))},handleUploadAudio:function(e){var t=this;l["info"]("handleUploadAudio",e),this.currentUploading=!0;var a=new FormData;a.append("file",e.file,e.file.name),this.uploading=!0,this.$http.post(h["b"].UploadFile,a,{contentType:!1,processData:!1,headers:{"Content-Type":"multipart/form-data"},timeout:6e4}).then((function(e){l["info"]("handleUploadAudio upload response:",e),t.audioUrl=t.$store.getters.downloadUrl+e.result})).catch((function(e){l["error"]("handleUploadImage error",e)})).finally((function(){t.currentUploading=!1}))},handleCancelAddAudio:function(){this.audioUrl=null,this.showAddAudioVisible=!1},handleConfirmAddAudio:function(){this.audioUrl&&(this.form.audioUrl=this.audioUrl,this.audioUrl=null),this.showAddAudioVisible=!1},handleAddAudioOverview:function(){this.$logger.info("handleAddAudioOverview"),this.showAddAudioVisible=!0},handleSelectDescription:function(){var e=this;this.showMenuList=[G["a"].specificSkills,G["a"].centurySkills,G["a"].learningOutcomes,G["a"].assessmentType,G["a"].idu],this.selectedList=JSON.parse(JSON.stringify(this.form.learnOuts)),this.form.learnOuts.forEach((function(t){t.knowledgeId?e.selectedIdList.push(t.knowledgeId):e.$logger.info("parentData selected id not exist ",t)})),this.$logger.info("handleSelectDescription selectedList",this.selectedList," recommendData ",this.recommendData),this.selectSyncDataVisible=!0,this.defaultActiveMenu=G["a"].learningOutcomes,this.handleCollaborateEvent(this.unitPlanId,this.planField.Assessment,this.form.assessment)},handleConfirmAssociate:function(){this.$logger.info("handleConfirmAssociate"),this.associateLibraryVisible=!1},handleStartRefer:function(){this.$logger.info("handleStartRefer"),this.selectReferMyContentVisible=!0,this.referDetailVisible=!1},handleDescriptionSelectClick:function(e){this.$logger.info("unit plan handleDescriptionSelectClick",e),this.selectSyncDataVisible=!1},handleReferItem:function(e){this.$logger.info("handleReferItem",e),this.referId=e.item.id,this.referType=e.item.type,this.selectReferMyContentVisible=!1,this.referDetailVisible=!0,this.$logger.info("referId "+this.referId+" referType "+this.referType)},handleCloseReferDetail:function(){this.$logger.info("handleCloseReferDetail"),this.referDetailVisible=!1,this.referId=null,this.referType=null,this.$refs["form"].className="unit-plan-form-left"},handleHoverReferBlock:function(e){this.$logger.info("handleHoverReferBlock",e),this.$refs["form"].className="unit-plan-form-left "+e.blockType,document.getElementById(e.blockType).scrollIntoView({behavior:"smooth",block:"center"})},handleReferBlock:function(e){if(this.$logger.info("handleReferBlock",e),"overview"===e.blockType&&(this.form.overview=e.data),"inquiry"===e.blockType&&(this.form.inquiry=e.data),"sdg"===e.blockType&&this.form.scenarios.push(e.data),"question"===e.blockType){this.form.scenarios.push(e.data);var t=Object.assign({questionId:null,visible:!1},e.data);l["info"]("handleReferBlock AddQuestion ",t),this.questionMaxIndex=this.questionMaxIndex+1,this.questionTotal=this.questionTotal+1,this.$set(this.questionDataObj,this.questionPrefix+this.questionMaxIndex,t)}},handleReferAssociate:function(e){var t=this;this.$logger.info("handleReferAssociate",e),Object(v["Associate"])({fromId:this.unitPlanId,fromType:this.contentType["unit-plan"],toId:e.item.id,toType:e.item.type}).then((function(e){t.$logger.info("Associate response ",e),t.$message.success("associate successfully!")}))},showSelectLinkContentVisible:function(){if(this.form.questions&&0!==this.form.questions.length)this.selectLinkContentVisible=!0;else{this.$logger.info("no relevantQuestionList");var e=this;this.$confirm({title:"Alert",content:"Please add questions and tags before linking",onOk:function(){e.handleHoverReferBlock({blockType:"question"})}})}},showSelectAddContentTypeVisible:function(){if(this.form.questions&&0!==this.form.questions.length)this.selectAddContentTypeVisible=!0;else{this.$logger.info("no relevantQuestionList");var e=this;this.$confirm({title:"Alert",content:"Please add questions and tags before linking",onOk:function(){e.handleHoverReferBlock({blockType:"question"})}})}},handleAddTasks:function(){var e=this;this.$logger.info("handleAddTasks",this.groupNameList),this.linkLoading=!0,this.form.name||this.form.overview||this.form.inquiry||this.form.scenarios.length||this.form.questions.length?(this.groupNameMode="input",this.newTermName="",this.selectLinkContentVisible=!0,this.setSessionStep(1)):this.$message.warn("Course info is empty, please fill the form first!"),this.handleCollaborateEvent(this.unitPlanId,this.planField.Link,this.associateTaskList),this.$nextTick((function(){setTimeout((function(){e.linkLoading=!1}),500)}))},handleAddTerm:function(){var e=this;this.$logger.info("handleAddTerm",this.groupNameList),this.addCategoryLoading=!0,Object(v["AddOrSaveGroupName"])({fromId:this.unitPlanId,fromType:this.contentType["unit-plan"],groupName:this.defaultGroupName+"_"+this.groupNameList.length}).then((function(t){e.$logger.info("AddOrSaveGroupName",t),e.$refs.planLink.getAssociate(),e.addCategoryLoading=!1})),this.handleCollaborateEvent(this.unitPlanId,this.planField.Link,this.associateTaskList)},handleEnsureSelectedLink:function(e){this.$logger.info("handleEnsureSelectedLink",e),this.selectLinkContentVisible=!1,this.getAssociate(),this.$refs.planLink.getAssociate(),this.handleCollaborateEvent(this.unitPlanId,this.planField.Link,this.associateTaskList)},getAssociate:function(){var e=this;this.$logger.info("AddUnitPlan GetAssociate id["+this.unitPlanId+"] fromType["+this.contentType["unit-plan"]+"]"),this.associateUnitPlanIdList=[],this.associateTaskIdList=[],this.associateTaskList=[],Object(v["GetAssociate"])({id:this.unitPlanId,type:this.contentType["unit-plan"]}).then((function(t){e.$logger.info("AddUnitPlan GetAssociate response",t),e.groupNameList=t.result.groups,e.groupNameListOther=[],e.selectedTaskList=[],t.result.owner.forEach((function(t){t.contents.forEach((function(t){e.selectedTaskList.push(t.type+"-"+t.id),t.type===e.contentType["unit-plan"]&&(e.associateUnitPlanIdList.push(t.id),e.associateId2Name.set(t.id,t.name),t.questions.forEach((function(a){e.associateQuestionList.push(Object(o["a"])(Object(o["a"])({},a),{},{unitName:t.name}))}))),t.type===e.contentType.task&&(e.associateTaskIdList.push(t.id),e.associateId2Name.set(t.id,t.name),e.associateTaskList.push(t))}))})),t.result.others.forEach((function(t){-1===e.groupNameListOther.indexOf(t.group)&&e.groupNameListOther.push(t.group),t.contents.forEach((function(t){t.type===e.contentType["unit-plan"]&&(e.associateUnitPlanIdList.push(t.id),e.associateId2Name.set(t.id,t.name),t.questions.forEach((function(a){e.associateQuestionList.push(Object(o["a"])(Object(o["a"])({},a),{},{unitName:t.name}))}))),t.type===e.contentType.task&&(e.associateTaskIdList.push(t.id),e.associateId2Name.set(t.id,t.name))}))})),e.newTermName="Untitled category_"+e.groupNameList.length,e.$logger.info("AddTask GetAssociate formatted groupNameList",e.groupNameList,e.groupNameListOther),e.$logger.info("*******************associateUnitPlanIdList",e.associateUnitPlanIdList),e.$logger.info("*******************associateTaskIdList",e.associateTaskIdList),e.$logger.info("associateTaskIdList",e.associateTaskIdList)})).finally((function(){e.linkGroupLoading=!1,(e.associateUnitPlanIdList.length>0||e.associateTaskIdList.length>0)&&(e.loadRefLearnOuts(),e.handleSelfOutsData()),e.associateTaskIdList.length&&e.loadTaskCategoryDesc()}))},loadTaskCategoryDesc:function(){var e=this,t=new Set(this.associateTaskIdList);this.$logger.info("loadTaskCategoryDesc",t),Object(ye["e"])({ids:t}).then((function(t){e.$logger.info("loadTaskCategoryDesc res",t.result),e.readonlyTagCategoryDescList=t.result}))},loadRefLearnOuts:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,s,o,r,l,c,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.recommendData=[],e.recommendDataIdList=[],!e.associateUnitPlanIdList.length){t.next=10;break}return t.next=5,Object(v["FindSourceOutcomes"])({type:e.contentType["unit-plan"],ids:e.associateUnitPlanIdList});case 5:if(a=t.sent,e.$logger.info("FindSourceOutcomes unit-plan response",a),a.success){i=new Map,a.result.forEach((function(t){i.has(t.fromId)?i.get(t.fromId).push(t):i.set(t.fromId,[t]),e.recommendDataIdList.push(t.knowledgeId)})),s=Object(n["a"])(i.values());try{for(s.s();!(o=s.n()).done;)r=o.value,e.recommendData.push({fromId:r[0].fromId,fromName:r[0].fromName,fromTypeName:e.type2Name[r[0].fromType],list:r})}catch(h){s.e(h)}finally{s.f()}}e.$logger.info("update unit-plan recommendData ",e.recommendData),e.$logger.info("************************update unit-plan recommendDataIdList ",e.recommendDataIdList);case 10:if(!e.associateTaskIdList.length){t.next=15;break}return t.next=13,Object(v["FindSourceOutcomes"])({type:e.contentType.task,ids:e.associateTaskIdList});case 13:if(a=t.sent,a.success){e.$logger.info("FindSourceOutcomes task response",a),l=new Map,a.result.forEach((function(t){l.has(t.fromId)?l.get(t.fromId).push(t):l.set(t.fromId,[t]),e.recommendDataIdList.push(t.knowledgeId)})),c=Object(n["a"])(l.values());try{for(c.s();!(d=c.n()).done;)u=d.value,e.recommendData.push({fromId:u[0].fromId,fromName:u[0].fromName,fromTypeName:e.type2Name[u[0].fromType],list:u})}catch(h){c.e(h)}finally{c.f()}e.$logger.info("update task recommendData ",e.recommendData),e.$logger.info("************************update unit-plan recommendDataIdList ",e.recommendDataIdList)}case 15:case"end":return t.stop()}}),t)})))()},loadBigIdeaLearnOuts:function(){var e=this;this.form.inquiry&&Object(v["FindBigIdeaSourceOutcomes"])({bigIdea:this.form.inquiry,id:this.unitPlanId}).then((function(t){e.$logger.info("FindBigIdeaSourceOutcomes response",t);var a=new Map;t.result.forEach((function(t){a.has(t.fromId)?a.get(t.fromId).push(t):a.set(t.fromId,[t]),e.recommendDataIdList.push(t.knowledgeId)}));var i,s=Object(n["a"])(a.values());try{for(s.s();!(i=s.n()).done;){var o=i.value;e.recommendData.push({fromId:o[0].fromId,fromName:e.form.inquiry,fromTypeName:"Big Idea",list:o})}}catch(r){s.e(r)}finally{s.f()}e.$logger.info("update unit-plan recommendData ",e.recommendData),e.$logger.info("************************update unit-plan recommendDataIdList ",e.recommendDataIdList)}))},handleUpdateGroupNameList:function(){this.$logger.info("handleUpdateGroupNameList"),this.getAssociate(),this.handleCollaborateEvent(this.unitPlanId,this.planField.Link,this.associateTaskList)},handleSelectBigIdeaData:function(e){this.selectNewBigIdea=e},handleSelectAssessmentType:function(e){this.$logger.info("handleSelectAssessmentType",e),this.selectedAssessmentList=e},handleSelectCurriculum:function(e){this.$logger.info("handleSelectCurriculum",e),this.selectedCurriculumList=e},handleSelectSubjectSpecificSkillListData:function(e){this.selectedSpecificSkillList=e,this.$logger.info("handleSelectSubjectSpecificSkillListData",e)},handleSelect21CenturySkillListData:function(e){this.$logger.info("handleSelect21CenturySkillListData",e),this.selectedCenturySkillList=e},handleSelectIdu:function(e){this.$logger.info("handleSelectIdu",e),this.selectedIduList=e},handleSelectRecommend:function(e){this.$logger.info("handleSelectRecommend",e),this.selectedRecommendList=e},handleCancelSelectData:function(){this.selectedCurriculumList=[],this.selectedSpecificSkillList=[],this.selectedCenturySkillList=[],this.selectedAssessmentList=[],this.selectedIduList=[],this.selectedRecommendList=[],this.selectSyncDataVisible=!1},handleEnsureSelectData:function(){var e=this;this.$logger.info("handleEnsureSelectData",this.selectedCurriculumList,this.selectedSpecificSkillList,this.selectedCenturySkillList,this.selectedBigIdeaList,this.selectedAssessmentList,this.selectedIduList),this.$logger.info("mySelectedList",this.$refs.newBrowser.mySelectedList),this.$logger.info("learnOuts",this.form.learnOuts);var t=this.$refs.newBrowser.mySelectedList.filter((function(e){return!e.hasOwnProperty("isSelfCustom")||e.hasOwnProperty("isSelfCustom")&&!e.isSelfCustom}));this.$logger.info("filterLearnOuts",t),this.form.learnOuts=JSON.parse(JSON.stringify(t)),this.$refs.newBrowser.selectedRecommendList.forEach((function(t){if(t.hasOwnProperty("isSelfCustom")&&t.isSelfCustom){var a=JSON.parse(JSON.stringify(t));a.key=Math.random()+"",e.form.selfOuts.push(a)}else{var i=e.form.learnOuts.findIndex((function(e){return e.knowledgeId===t.knowledgeId}));-1===i&&e.form.learnOuts.push(t)}})),this.selectedIduList.forEach((function(t){var a=e.form.learnOuts.filter((function(e){return e.knowledgeId===t.id}));a.length>0||e.form.learnOuts.push({knowledgeId:t.knowledgeData.id,name:t.knowledgeData.name,tagType:t.knowledgeData.tagType,path:t.knowledgeData.path,tags:t.tags})}));var a=this.selectedCurriculumList.concat(this.selectedSpecificSkillList).concat(this.selectedCenturySkillList).concat(this.selectedAssessmentList);if(this.selectIdea)return this.selectedBigIdeaList.length>0&&(this.form.inquiry=this.selectedBigIdeaList[0].bigIdea),void(this.selectSyncDataVisible=!1);a.forEach((function(t){var a=e.form.learnOuts.filter((function(e){return e.knowledgeId===t.knowledgeId}));a.length>0||e.form.learnOuts.push({knowledgeId:t.knowledgeData.id,name:t.knowledgeData.name,tagType:t.knowledgeData.tagType,path:t.knowledgeData.path})})),this.$logger.info("this.form.learnOuts",this.form.learnOuts),this.selectSyncDataVisible=!1,this.handleCancelSelectData()},handleRemoveLearnOuts:function(e){this.$logger.info("handleRemoveLearnOuts",e);var t=this.form.learnOuts.findIndex((function(t){return t.knowledgeId===e.knowledgeId}));t>-1&&this.form.learnOuts.splice(t,1),this.handleCollaborateEvent(this.unitPlanId,this.planField.Assessment,this.form.assessment)},onChangeStep:function(e){"number"===typeof e&&(this.setSessionStep(e),setTimeout((function(){var e=document.querySelector(".ant-layout-content");e&&e.scrollIntoView(!0)}),100))},loadCustomTags:function(){var e=this;Object(Q["c"])({}).then((function(t){e.$logger.info("FindCustomTags response",t.result),t.success?(e.customTags=t.result,u["i"].plan.default.forEach((function(t){e.customTagList.push(t)})),e.customTags.userTags.forEach((function(t){-1===e.customTagList.indexOf(t.name)&&e.customTagList.push(t.name)}))):e.$message.error(t.message)}))},focusInput:function(e){var t=this,a=e.target,i=a.offsetTop?a.offsetTop:0,s=a.offsetParent;this.currentFocusFieldName=null,this.customTagList=[];while(null!==s){if(i+=s?s.offsetTop:0,s=s?s.offsetParent:void 0,!s)break;if(s.classList.contains("tag-content-block")&&s.hasAttribute("data-field-name")){var n,o,r=s.getAttribute("data-field-name");this.$logger.info("current block fieldName",r),this.currentFocusFieldName=r,null!==(n=this.$store.getters.formConfigData)&&void 0!==n&&null!==(o=n.planFieldTagMap)&&void 0!==o&&o[r]&&(this.customTagList=this.$store.getters.formConfigData.planFieldTagMap[r].map((function(e){return e.tagName})),this.$logger.info(r+" customTagList",this.customTagList))}if(s&&s.classList.contains("root-locate-form"))break}this.currentFocusFieldName?(this.$logger.info("show currentFocusFieldName tag ",this.currentFocusFieldName),this.customTagTop=i-20,this.showCustomTag=!0,this.setRightModuleVisible(this.rightModule.customTag)):(this.$logger.info("show global tag"),u["i"].plan.default.forEach((function(e){t.customTagList.push(e)})),this.customTags.userTags.forEach((function(e){-1===t.customTagList.indexOf(e.name)&&t.customTagList.push(e.name)})),this.showCustomTag=!1,this.customTagTop=0,this.setRightModuleVisible())},handleSwitchComment:function(e){if(this.$logger.info("handleSwitchComment",e),!e.activeStatus)return this.currentFieldName="",void this.resetRightModuleVisible();this.setRightModuleVisible(this.rightModule.collaborateComment),this.currentFieldName=e.fieldName;var t=[];this.collaborateCommentList.forEach((function(e){t.push(e)})),this.collaborateCommentList=t,this.collaborateTop=e.top},handleViewCollaborate:function(){this.$logger.info("handleViewCollaborate"),-1!==this.showModuleList.indexOf(this.rightModule.collaborate)?this.resetRightModuleVisible():this.setRightModuleVisible(this.rightModule.collaborate),this.showHistoryLoading=!0,this.loadCollaborateData(this.form.type,this.form.id)},handleUpdateCommentList:function(){this.$logger.info("handleUpdateCommentList"),this.GetCollaborateComment(this.form.type,this.form.id)},handleRestoreField:function(e){this.$logger.info("handleRestoreField",e,this.form),e&&(this.form=e,this.$message.success("restore successfully!")),this.$logger.info("after handleRestoreField",this.form)},handQuestionSetting:function(){var e=this;this.confirmLoading=!0,Object(X["d"])({disableQuestion:!this.disableQuestion}).then((function(t){e.$logger.info("UserSetting",t.result),t.success?e.$store.dispatch("GetInfo"):e.$message.error(t.message)})).finally((function(){e.questionSettingVisible=!1,e.confirmLoading=!1}))},onChangeSwitch:function(e){this.disableQuestion=e},handleEnsureSelectBigIdeaData:function(){this.selectNewBigIdea?(this.form.inquiry=this.selectNewBigIdea,this.selectBigIdeaDataVisible=!1):this.$message.error("Please select a big idea")},findQuestionsByBigIdea:function(e){var t=this;e&&Object(te["a"])({bigIdea:e}).then((function(e){if(l["info"]("FindQuestionsByBigIdea ",e),t.recommendQuestionList=[],e.success){var a=t.form.questions.map((function(e){return e.name}));e.result.forEach((function(e){-1===a.indexOf(e.name)&&0===t.recommendQuestionList.filter((function(t){return t.name===e.name})).length&&t.recommendQuestionList.push(e)}))}})).finally({})},handerInsertQuestion:function(e){var t=this.form.questions.map((function(e){return e.name}));t.indexOf(e.name)>-1?this.$message.warning("Question is existed"):(1!==this.form.questions.length||this.form.questions[0].name||(this.form.questions=[]),this.form.questions.push(e))},handleSelectQuestion:function(e){l["info"]("handleSelectQuestion ",e),this.selectedQuestionList=e},handleEnsureSelectQuestionData:function(){var e=this;l["info"]("handleEnsureSelectQuestionData ",this.selectedQuestionList);var t=this.form.questions.map((function(e){return e.name}));this.selectedQuestionList.forEach((function(a){-1===t.indexOf(a)&&e.form.questions.push({name:a})})),this.questionMoreVisible=!1},setSessionStep:function(e){this.currentActiveStepIndex=e,sessionStorage.setItem("unit-plan-step-"+this.unitPlanId,e)},getSessionStep:function(){var e=sessionStorage.getItem("unit-plan-step-"+this.unitPlanId);return null!==e?parseInt(e):0},handleEditTask:function(e){window.open("/teacher/task-redirect/"+e.id,"_blank")},handleClickTaskDetail:function(e){this.$logger.info("handleClickTaskDetail",this.showTaskDetails),this.setRightModuleVisible(this.rightModule.taskDetails);var t=e.target,a=t.offsetTop,i=t.offsetParent;while(null!==i)if(a+=i.offsetTop,i=i.offsetParent,i.classList&&i.classList.contains("root-locate-form"))break;this.taskDetailsTop=a,e.preventDefault(),e.stopPropagation()},handleShareUnitPlan:function(){this.$logger.info("handleShareUnitPlan"),this.shareVisible=!0},loadingShareContent:function(){var e=this;Object(ue["c"])({sourceId:this.form.id,sourceType:this.form.type}).then((function(t){e.$logger.info("form QueryContentShare response",t),t.result?e.shareStatus=t.result.status:e.shareStatus=0}))},handleUpdateContent:function(){var e=this;this.form.updateTime=oe.a.utc(new Date).format("YYYY-MM-DD HH:mm:ss"),pe["a"].setFormContentLocal(this.form.id,this.form.type,JSON.stringify(this.form)),this.defaultHistoryKey="2",this.handleViewCollaborate(),setTimeout((function(){e.restoreUnitPlan(e.form.id)}),100)},handleAddCustomTagRemote:function(e){e.parentId&&this.$refs.customTag&&this.$refs.customTag.remoteChooseTag(e.parentId,e.tag)}}},Ce=be,we=(a("5034"),a("0c7c")),ke=Object(we["a"])(Ce,i,s,!1,null,"30976e80",null);t["default"]=ke.exports},c506:function(e,t,a){"use strict";a("4329")},c621:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"f",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return d}));var i=a("b775"),s={getTemplates:"/classcipe/api/templates/getTemplates",filterTemplates:"/classcipe/api/templates/filterTemplates",recommendTemplates:"/classcipe/api/templates/recommendTemplates",getPresentation:"/classcipe/api/templates/getPresentation",getPublishedPresentation:"/classcipe/api/templates/getPublishedPresentation",getPageThumbnail:"/classcipe/api/templates/getPageThumbnail",queryById:"/classcipe/api/templates/queryById"};function n(e){return Object(i["d"])({url:s.getTemplates,method:"get",params:e})}function o(e){return Object(i["d"])({url:s.filterTemplates,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(e){return Object(i["d"])({url:s.recommendTemplates,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(i["d"])({url:s.getPresentation,method:"get",params:e})}function c(e){return Object(i["d"])({url:s.getPageThumbnail,method:"get",params:e})}function d(e){return Object(i["d"])({url:s.getPublishedPresentation,method:"get",params:e})}},c7c0:function(e,t,a){"use strict";a("dbf6")},c97b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAABRdJREFUaEPNWk1yE1cQfj0jeRtTltYxJ4hYpkCKfALbJ4hYIBUrlBMgn8BmlZJY2JwA+QQ2UlIsESfArC0XyhbNTKd7RiNGM+9P9pOSqQID836+r/+7BxBbfPZGbw8BRE0IbPK1IET8c/FMUIgZ/es1eHh5+7Q9sYFGZ2z22b063y2VgleAUUsA7FvfhngTeaJ396zzTrdnowSqfw9qIsT3awHPoyUiwodjlUY2RmBvNGh5IM6tJW5YGKF4ftdoX+SXbYRAZfz2NQjsuQKfniMj4ZxAdTQ4J+9suQb/gwQe3zU6w/TvTgnYgqdo85V+DUlLFHWSh4Ac0e+/mIgjillQDp/Mfn15s9hn2mL33g48fkbhdaf1F9eyU3c//rlfCrwWCHitvRXx3W2jE2vZiQYq437P5tJ5uNOdHTxfSl0FMo5eEZLDajTiiSccmZwQqI4HZBGaJyMxO30KkeSPOQP8WbpnceaDCSTSEp9UwCIh3tzV211b4Nl1urPZF6aN9qMHE+ALK6P+DAB+yoNUxe51yFRH/QtKhL/L9kSIx04I7I36R3TQRUoCEf9BAV1Z4kmBsHQxEqdcD6HAIXhwIsu27NjlwP+iMiMnBPhwvsif+03+cxiWhzpnlWXpfHjMAq6MBzcyXyDH++CMgK1Z6EoM0sTJtN7p5c8iAtcE9LfCHVQnbZWAqT5iiU7r7ViLOQ3ICdAiKwJs456AQz40EniZTeUuJJ+eoXJ6pQZsCFCEOSXnXAmD60YXk+SZgEr6SZQbfKNGaDcvLKMPqMqDNAbbSN8GPMH/PA92mjLHj7UP8F52F+G4VJqQsbZZpHIdiYeCj6U/HlzlWs/llQj4h5SACTzH+WmjU1BplowL8Drp813zUvi4QMAEPnZkyoA6R3YBPk50obiS2X7WZ1YIVP7qdwHhVGcWJgfeBviEABxwWb4kQG1gkxqMq/8a/KJ0YKel8YvikfUDVDR90U0P/jeSJ/8Lwp39NGLFGjCpnb19+qxzphKIaX+yTx0q+W3cjc39TyqbX96di34xAa30Dc2IC/CmcJmCl04ltE0DNd9BUK6pKktX4E1NURL5FHMhXeTR2b0r8IkJq7NtEnHkVSq/A1WhpEtWLsGn9q9qWkzBQ0lAKGzfztn0DisLBiwUCuNnq12daJkqX1BNFNTNhWmEsj74lFDS1Xk1AG8WBKWJzQjGMYH7g9clUN27tQmom+ztg4+duDru05eQ4gSMa22au9C8svgUpxDiMgjLLZXKeUhV9udUYyVfZhC8C6pjTu4r9ew+oG5nSNkvbhfzzzwoP9LZIddPQSm4SQetsjNUVaUpu9uSA10e0MVfmwu0JTFNFGhA+9jmHK0P6AZH3DqCLw5sP7hlLzLV81wb3dY76orTkllcC+m6ft3ASXWHGTw7wo8RuSVW6bIFAX0vwCSo1D5WzfVXJD8evKL1PV1VyVk+KEc1ne/Ykso0NIrpV+YkGmNcI8JZGJY+ZJ2bo4xf/n7oYTx+0ZoFgwcfmvcxSxmpJYGkRPAmsimzbGOiFTGhSosyZ3Fmo5SgxTTDVvq8bqUnNlWF6xycX5tMrM21zbp3FKYSdpXmete4Npvs7dK5ECcogREluOJHi/Wg82oqMUrRkQuH1fpA/mWS/r+fqb6O2BB5yOclm/MLPiDbFI9b6D9qkP0e2WqE6yj6ltvdlNSNJiQjEodKf05jdmwiwD4lIoo+qYnx91+gqITDwI+G2wCeYvwXDf1QTs785DsAAAAASUVORK5CYII="},cad2:function(e,t,a){"use strict";a("f424")},cd60:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"big-idea"},[a("a-row",{staticClass:"row-wrapper"},[a("a-col",{staticClass:"col-wrapper",attrs:{span:"12"}},[a("div",[a("div",{staticClass:"row-filter"},[a("div",[a("h3",[e._v("Recommended")])]),a("div",{staticClass:"keyword-search vertical-right"},[a("custom-search-input",{attrs:{placeholder:"Search key word"},on:{search:e.handleKeySearch,change:e.handleKeySearch}})],1)]),a("a-list",{attrs:{bordered:"","data-source":e.showQuestionList},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{staticClass:"row",on:{click:function(a){return e.selectItem(t)}}},[e._v(" "+e._s(t)+" ")])}}])})],1)]),a("a-col",{staticClass:"col-wrapper",staticStyle:{"margin-left":"10px"},attrs:{span:"12"}},[a("div",[a("h3",[e._v("Selected")]),a("a-list",{attrs:{bordered:"","data-source":e.selectQuestionList},scopedSlots:e._u([{key:"renderItem",fn:function(t,i){return a("a-list-item",{},[e._v(" "+e._s(t)+" "),a("div",{staticClass:"extra-remove",attrs:{slot:"extra"},on:{click:function(t){return e.removeItem(i)}},slot:"extra"},[a("a-icon",{attrs:{type:"close"}})],1)])}}])})],1)])],1),a("a-spin",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading"})],1)},s=[],n=(a("4de4"),a("159b"),a("b0c0"),a("d3b7"),a("a434"),a("2ac8")),o=a("823b"),r=a("3c3e"),l=a.n(r),c=a("2775"),d={name:"QuestionBrowse",components:{CustomSearchInput:c["a"],SousuoIconSvg:l.a},props:{questionList:{type:Array,default:function(){return[]}},bigIdea:{type:String,default:""},selectedSdg:{type:Array,default:function(){return[]}}},computed:{showQuestionList:function(){var e=this,t=[],a=this.AllQuestionList.filter((function(t){return-1===e.selectQuestionList.indexOf(t)}));return this.keywordSearchText?(a.forEach((function(a){a.toLowerCase().indexOf(e.keywordSearchText.toLowerCase())>-1&&t.push(a)})),t):a}},mounted:function(){},destroyed:function(){},data:function(){return{AllQuestionList:[],keywordSearchText:"",showList:[],selectQuestionList:[],loading:!1}},created:function(){this.queryQuestion()},watch:{},methods:{queryQuestion:function(){var e=this;this.showList=[],this.questionList.forEach((function(t){t.name&&e.selectQuestionList.push(t.name)})),this.loading=!0,o["info"]("FindQuestionsByBigIdea sdgs ",this.selectedSdg),Object(n["a"])({sdgs:this.selectedSdg}).then((function(t){o["info"]("FindQuestionsByBigIdea ",t),e.AllQuestionList=[],t.success&&t.result.forEach((function(t){-1===e.AllQuestionList.indexOf(t.name)&&e.AllQuestionList.push(t.name)}))})).finally((function(){e.loading=!1}))},handleChange:function(e,t,a){},selectItem:function(e){this.selectQuestionList.push(e),this.$emit("select-question",this.selectQuestionList)},removeItem:function(e){this.selectQuestionList.splice(e,1),this.$emit("select-question",this.selectQuestionList)},handleKeySearch:function(e){this.keywordSearchText=e},handleScroll:function(e,t){}}},u=d,h=(a("410d"),a("0c7c")),p=Object(h["a"])(u,i,s,!1,null,"6eb3a9cb",null);t["a"]=p.exports},ce3e:function(e,t,a){"use strict";a("5712")},ceb7:function(e,t,a){"use strict";a("3906")},cedf:function(e,t,a){"use strict";a("c48b")},cfe3:function(e,t,a){"use strict";a("b7f2")},d1e5:function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return m}));var i=a("b775"),s=a("9fb0"),n=a("8ded"),o=a.n(n),r="fio",l={termsPubList:"/".concat(r,"/tags-terms/pubList"),termsSearch:"/".concat(r,"/tags-terms/search"),termsCreate:"/".concat(r,"/tags-terms"),dimensionsPubList:"/".concat(r,"/tags-knowledge/pubList"),dimensionsSearch:"/".concat(r,"/tags-knowledge/search"),dimensionsCreate:"/".concat(r,"/tags-knowledge")};function c(e){return Object(i["d"])({url:l.termsPubList,method:"get",params:e})}function d(e){return Object(i["d"])({url:l.termsCreate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:o.a.get(s["a"])}})}function u(e){return Object(i["d"])({url:l.termsSearch,method:"get",params:e})}function h(e){return Object(i["d"])({url:l.dimensionsPubList,method:"get",params:e})}function p(e){return Object(i["d"])({url:l.dimensionsCreate,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:o.a.get(s["a"])}})}function m(e){return Object(i["d"])({url:l.dimensionsSearch,method:"get",params:e})}},d28d:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"k",(function(){return d})),a.d(t,"l",(function(){return u})),a.d(t,"c",(function(){return h})),a.d(t,"h",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"j",(function(){return g})),a.d(t,"g",(function(){return f}));var i=a("b775"),s={GetUserTags:"/classcipe/api/tag/getUserTags",UserTagAddOrUpdate:"/classcipe/api/tag/addOrUpdateUserTag",AddUserTagNew:"/classcipe/api/tag/addUserTagNew",AddUserParentTag:"/classcipe/api/tag/addUserParentTag",UpdateUserParentTag:"/classcipe/api/tag/updateUserParentTag",UserTagDelete:"/classcipe/api/tag/userTagDelete",UserTagDeleteNew:"/classcipe/api/tag/userTagDeleteNew",GetTreeByKey:"/classcipe/api/tag/getTreeByKey",GetGlobalTree:"/classcipe/api/tag/getTree",GetRootGlobalTag:"/classcipe/api/tag/getRootGlobalTag",GetGlobalTagKeywords:"/classcipe/api/tag/getTagKeywords",TagQueryById:"/classcipe/api/tag/queryById",TagDelete:"/classcipe/api/tag/delete",TagDeleteBatch:"/classcipe/api/tag/deleteBatch",FindCustomTags:"/classcipe/api/tag/findCustomTags",GetTagYearTips:"/classcipe/api/tag/getTagYearTips",QuerySourceTagByCategory:"/classcipe/api/tag/querySourceTagByParent",SchoolRootCustomList:"/classcipe/api/tag/rootSchoolCustomList",SchoolAddOrUpdateTag:"/classcipe/api/tag/addOrUpdate",SchoolTagSet:"/classcipe/api/tag/schoolTagSet",SchoolSelectLibrary:"/classcipe/api/tag/schoolSelectLibrary",SchoolTagDelete:"/classcipe/api/tag/schoolTagDelete",SchoolCommonTagList:"/classcipe/api/tag/schoolCommonTagList"};function n(e){return Object(i["d"])({url:s.GetTreeByKey,method:"get",params:e})}function o(e){return Object(i["d"])({url:s.GetTagYearTips,method:"get",params:e})}function r(e){return Object(i["d"])({url:s.GetGlobalTagKeywords,method:"get",params:e})}function l(e){return Object(i["d"])({url:s.AddUserTagNew,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(i["d"])({url:s.AddUserParentTag,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(i["d"])({url:s.UpdateUserParentTag,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(e){return Object(i["d"])({url:s.UserTagDeleteNew,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(e){return Object(i["d"])({url:s.FindCustomTags,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(e){return Object(i["d"])({url:s.SchoolSelectLibrary,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(e){return Object(i["d"])({url:s.SchoolTagDelete+"?id="+e.id,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function g(e){return Object(i["d"])({url:s.SchoolTagSet,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(e){return Object(i["d"])({url:s.SchoolCommonTagList,method:"get",params:e})}},d28e:function(e,t,a){"use strict";a.r(t),a.d(t,"SkillSelectModel",(function(){return i}));var i={skillDescription:"skillDescription"}},d314:function(e,t){e.exports="data:image/png;base64,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"},d33b:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a("159b"),a("9911"),a("4de4"),a("d81d"),a("d3b7");var i=a("7aef"),s=a("8448"),n=a.n(s),o=a("998c"),r=a.n(o),l=a("4084"),c=a.n(l),d=a("8a21"),u=a.n(d),h=a("1eeb"),p=a.n(h),m=a("5a1d"),g=a.n(m),f=a("6631"),v=a.n(f),y=a("1b72"),b={components:{TextTypeSvg:n.a,ImageTypeSvg:r.a,VideoTypeSvg:c.a,AudioTypeSvg:u.a,YoutubeTypeSvg:p.a,PdfTypeSvg:g.a,UrlTypeSvg:v.a},data:function(){return{loadingClass:!1,currentImgIndex:0,elementsList:[],itemsList:[],showMenuList:[],thumbnailList:[],fileTypeMap:i["a"],materialVisible:!1,mediaVisible:!1,mediaList:[],filterMaterialType:""}},created:function(){},computed:{currentPageElements:function(){var e=[];if(0===this.thumbnailList.length)return e;if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.elementsList.forEach((function(a){if(t===a.pageId){var s=a.data;"iframe"===s.type?e.push(i["a"].youtube):"image"===s.type?e.push(i["a"].img):"audio"===s.type?e.push(i["a"].audio):"text"===s.type?e.push(i["a"].txt):"video"===s.type?e.push(i["a"].video):"pdf"===s.type?e.push(i["a"].pdf):"website"===s.type&&e.push(i["a"].link)}}))}return e},currentPageElementLists:function(){var e=[];if(0===this.thumbnailList.length)return e;if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.elementsList.forEach((function(a){if(t===a.pageId){var i=a.data;e.push(i)}}))}return e},currentPageItem:function(){var e=[];if(0===this.thumbnailList.length)return"";if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.itemsList.forEach((function(a){if(t===a.pageId){var i=a.data;e.push(i)}}))}return e.length>0?e[0]:""},currentPageId:function(){return 0===this.thumbnailList.length?null:this.thumbnailList[this.currentImgIndex]?this.thumbnailList[this.currentImgIndex].id:void 0},currentPageTips:function(){if(0===this.thumbnailList.length)return"";var e=this.currentPageElementLists.filter((function(e){return"tip"===e.type}));return e?e[0]:""},currentPageMaterial:function(){var e={};if(0===this.thumbnailList.length)return e;if(this.thumbnailList[this.currentImgIndex]){var t=this.thumbnailList[this.currentImgIndex].id;this.elementsList.forEach((function(a){if(t===a.pageId){var i=a.data;"tip"!==i.type&&(e.hasOwnProperty(i.type)||(e[i.type]=[]),e[i.type].push(i))}}))}return e}},methods:{getClassInfo:function(e){var t=this;this.loadingClass=!0;var a=this.thumbnailList.map((function(e){return e.id}));0===a.length?this.loadingClass=!1:Object(y["d"])({slideId:e,pageIds:a}).then((function(e){t.$logger.info("QueryByClassInfoSlideId ",e),e.success&&(e.result.relements.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),e.result.items.forEach((function(e){"string"===typeof e.data&&(e.data=JSON.parse(e.data))})),t.elementsList=e.result.relements,t.itemsList=e.result.items)})).finally((function(){t.loadingClass=!1,t.setTaskKnowAndBloomFormPPT()}))},setTaskKnowAndBloomFormPPT:function(){var e=this.thumbnailList.map((function(e){return e.id})),t=[],a=[];this.itemsList.forEach((function(i){if(-1!==e.indexOf(i.pageId)){var s=i.data;s.data&&s.data.bloomLevel&&-1===t.indexOf(s.data.bloomLevel)&&t.push(s.data.bloomLevel),s.data&&s.data.knowledgeLevel&&-1===a.indexOf(s.data.knowledgeLevel)&&a.push(s.data.knowledgeLevel)}})),t.length>0&&this.setCustomTagByPPT&&this.setCustomTagByPPT(t,"Bloom's Taxonomy"),a.length>0&&this.setCustomTagByPPT&&this.setCustomTagByPPT(a,"Knowledge Dimensions")},showPluginMaterial:function(e){var t=this.currentPageMaterial[e];this.$logger.info("showPluginMaterial ",t),"text"===e||"website"===e||"pdf"===e?t.length>1?(this.filterMaterialType=e,this.materialVisible=!0):"tip"!==t[0].type&&window.open(t[0].url,"_blank"):(this.mediaList=t,this.filterMaterialType=e,this.mediaVisible=!0)},showMaterialSize:function(e){return this.currentPageMaterial[e].length>1?this.currentPageMaterial[e].length:0},computerSize:function(e){var t=0,a=this.thumbnailList[this.currentImgIndex].id;return this.elementsList.forEach((function(i){if(a===i.pageId){var s=i.data;s.type===e&&t++}})),t},onChangePage:function(e){this.currentImgIndex=e},getTargetPageItemData:function(e){var t=null;return this.itemsList.forEach((function(a){e===a.pageId&&(t=a.data)})),t}}}},d49c:function(e,t,a){},d761:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{class:{"tag-input-wrapper":!0,active:e.active,"tag-dom":!0},on:{click:e.handleFocusInput}},[a("div",{staticClass:"tag-input-list tag-dom"},[a("div",{staticClass:"tag-list tag-dom"},[e._l(e.tagList,(function(t,i){return a("div",{key:i,staticClass:"tag-item tag-dom"},[a("a-tag",{staticClass:"tag-dom",attrs:{color:e.tagColorList[i%e.tagColorList.length],closable:""},on:{close:function(a){return e.handleCloseTag(t)}}},[e._v(" "+e._s(t)+" ")])],1)})),a("div",{staticClass:"tag-input tag-dom"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"input",staticClass:"tag-dom",style:{width:e.inputWidth},attrs:{type:"text"},domProps:{value:e.inputValue},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleAddTag.apply(null,arguments)},e.handleKeyUpSearch],blur:function(t){e.active=!1},input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})])],2)])]),a("div",{staticClass:"search-result-list"},[a("div",{staticClass:"search-list"},e._l(e.searchResult,(function(t,i){return a("div",{key:i,staticClass:"list-item",on:{click:function(a){return e.handleSearchTag(t)}}},[e._v(" "+e._s(t)+" ")])})),0)])])},s=[],n=(a("498a"),a("159b"),a("b0c0"),a("823b")),o=a("4fcf"),r=o.debounce,l=a("0da2"),c=l.SkillSearch,d=a("db6a"),u=d.KnowledgeSearch,h={name:"AddKeywordTag",props:{currentTag:{type:Object,default:null}},data:function(){return{inputValue:"",searchType:null,tagColorList:["pink","orange","green","cyan","blue","red","purple"],active:!1,tagList:[],searchList:[]}},computed:{inputWidth:function(){var e=this.inputValue||"",t=20*e.trim().length+22;return(t>60?t>400?400:t:60)+"px"},searchResult:function(){var e=[];return this.searchList.forEach((function(t){t.name&&-1===e.indexOf(t.name)&&e.push(t.name)})),e}},created:function(){this.$logger.info("AddKeywordTag created ",this.currentTag),this.searchType=this.currentTag.type,this.tagList=this.currentTag.keywords?this.currentTag.keywords:[],this.$logger.info("tagList",this.tagList," searchType ",this.searchType),this.debouncedSearchKnowledge=r(this.searchTag,500)},methods:{handleKeyUpSearch:function(){this.$logger.info("handleKeyUpSearch ",this.inputValue),this.debouncedSearchKnowledge(this.inputValue)},searchTag:function(e){var t=this;n["info"]("searchTag "+this.searchType+", keyword "+this.inputValue),this.searchList=[],"string"===typeof e&&e.trim().length>=1&&("skill"===this.searchType?c({key:e}).then((function(e){n["info"]("skill searchKnowledge response",e),t.searchList=e.result})):u({key:e}).then((function(e){n["info"]("skill searchKnowledge response",e),t.searchList=e.result}))),this.$logger.info("searchList",this.searchList)},handleAddTag:function(){if(n["info"]("handleAddTag "+this.inputValue),this.inputValue&&this.inputValue.trim().length){var e=this.inputValue.trim();-1===this.tagList.indexOf(e)?this.$emit("add-tag",{tagName:e}):n["info"]("skip! input value "+e+" exist in",this.tagList)}else n["info"]("skip! input value empty");this.inputValue=""},handleCloseTag:function(e){n["info"]("handleCloseTag "+e),this.$emit("remove-tag",{tagName:e})},handleFocusInput:function(){this.$refs["input"].focus(),this.active=!0},handleSearchTag:function(e){n["info"]("handleSearchTag "+e),-1===this.currentTag.keywords.indexOf(e)&&this.currentTag.keywords.push(e),this.searchList=[],this.inputValue=""}}},p=h,m=(a("3350"),a("0c7c")),g=Object(m["a"])(p,i,s,!1,null,"4f62cc36",null);t["a"]=g.exports},d980:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"ratePercentCon",staticClass:"rate-percent-con"},[a("div",{staticClass:"rate-percent-wrap"},[a("div",{ref:"ratePercentSum",staticClass:"rate-percent__sum"},[a("div",{staticClass:"sum-title"},[e._v(e._s(e._f("percentFormat")(e.percents.avgReviewsScore)))]),a("div",{staticClass:"sum-desc"},[a("a-rate",{attrs:{defaultValue:e.percents.avgReviewsScore,"allow-half":"",disabled:""}})],1)]),a("div",{staticClass:"rate-percent__detail",attrs:{direction:"vertical"}},e._l(e.percents.reviewsScoreStatDetail.concat().reverse(),(function(t,i){return a("a-space",{key:"percent_"+i,staticClass:"detail-bar",attrs:{align:"center"}},[a("a-progress",{style:{width:e.progressWidth},attrs:{strokeLinecap:"square",strokeColor:"#FFBB00",percent:t.reviewsScoreRate,showInfo:!1}}),a("a-rate",{attrs:{defaultValue:t.reviewsScore,disabled:""}}),a("span",[e._v(e._s(t.reviewsScoreRate)+"%")])],1)})),1)])])},s=[],n=a("5530"),o=(a("b4ab"),{name:"RateByPercent",props:{rates:{type:Object,default:function(){return{avgReviewsScore:0,reviewsScoreStatDetail:[{reviewsScore:1,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:2,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:3,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:4,reviewsScoreCount:0,reviewsScoreRate:0},{reviewsScore:5,reviewsScoreCount:0,reviewsScoreRate:0}]}}}},watch:{rates:function(e){this.percents=Object(n["a"])({},e)}},data:function(){return{percents:this.rates,progressWidth:"135px"}},mounted:function(){if(this.$refs.ratePercentCon&&this.$refs.ratePercentSum){var e=this.$refs.ratePercentCon.getBoundingClientRect().width,t=this.$refs.ratePercentSum.getBoundingClientRect().width;this.progressWidth=e-40-t-45-200+"px"}}}),r=o,l=a("0c7c"),c=Object(l["a"])(r,i,s,!1,null,null,null);t["a"]=c.exports},d989:function(e,t,a){e.exports=a.p+"assets/delete.2d2d5820.svg"},d9d3:function(e,t,a){"use strict";a("fb02")},da06:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14"},children:[{tag:"path",attrsMap:{class:"a",style:"fill:#fff;",d:"M30.273,36.273a6,6,0,1,1,6-6,6.007,6.007,0,0,1-6,6m0-13a7,7,0,1,0,7,7,7,7,0,0,0-7-7m0,9.536a.441.441,0,1,0,.441.44.441.441,0,0,0-.441-.44m.481-5.736a2.264,2.264,0,0,0-2.743,2.212.5.5,0,1,0,1,0A1.263,1.263,0,1,1,30.7,30.473a1.391,1.391,0,0,0-.925,1.307v.147a.5.5,0,0,0,1,0v-.153a.383.383,0,0,1,.262-.36,2.263,2.263,0,0,0-.281-4.342",transform:"translate(-23.273 -23.273)"}}]})}},db87:function(e,t,a){"use strict";a("b7d7")},dbf6:function(e,t,a){},dd6e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"reviews-wrapper"},[e._m(0),i("review-edit",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],ref:"myReview",attrs:{role:e.role,canCreate:e.showCreate,myReviews:e.myReviews},on:{submit:e.handleSaveMyReview}}),e.needSearch?i("div",{staticClass:"reviews-search"},[i("div",{staticClass:"my-search"},[i("a-input-search",{attrs:{placeholder:"Search",allowClear:!0},on:{search:e.triggerSearch,pressEnter:e.triggerSearch},model:{value:e.reviewsNotes,callback:function(t){e.reviewsNotes=t},expression:"reviewsNotes"}})],1),i("a-select",{attrs:{getPopupContainer:function(e){return e.parentElement}},on:{change:e.triggerChangeRate},model:{value:e.reviewsScore,callback:function(t){e.reviewsScore=t},expression:"reviewsScore"}},[i("a-select-option",{attrs:{value:""}},[e._v(" All rating ")]),e._l([5,4,3,2,1],(function(t){return i("a-select-option",{key:"rate_choose_"+t,attrs:{value:t}},[e._v(" "+e._s(t)+" star ")])}))],2)],1):e._e(),i("div",{staticClass:"reviews-content"},[i("a-spin",{attrs:{spinning:e.delLoading}},[e.myReviews?i("div",{staticClass:"reviews-content-detail reviews-me"},[i("div",{staticClass:"content-detail__avatar"},[e.myReviews.avatar?i("img",{attrs:{src:e.myReviews.avatar}}):i("img",{attrs:{src:a("4992")}})]),i("div",{staticClass:"content-detail__rate"},[i("review-score",{attrs:{review:e.myReviews}}),i("div",{staticClass:"content-detail__tag"},[i("a-tag",{directives:[{name:"show",rawName:"v-show",value:e.myReviews.learningDistance,expression:"myReviews.learningDistance"}],attrs:{color:"#f50"}},[e._v(" Distance ")]),i("a-tag",{directives:[{name:"show",rawName:"v-show",value:e.myReviews.learningHome,expression:"myReviews.learningHome"}],attrs:{color:"#2db7f5"}},[e._v(" At home ")]),i("a-tag",{directives:[{name:"show",rawName:"v-show",value:e.myReviews.learningClass,expression:"myReviews.learningClass"}],attrs:{color:"#87d068"}},[e._v(" In-class ")])],1)],1),i("div",[i("div",{staticClass:"content-detail__title"},[i("div",{staticClass:"title-info"},[i("div",{staticClass:"info-author"},[e._v(" "+e._s(e.myReviews.nickName)+" ")]),i("div",{staticClass:"info-time"},[e._v(" "+e._s(e._f("dayjs")(e.myReviews.createTime))+" ")])])]),i("div",{staticClass:"content-detail__review"},[i("label",[e._v(" "+e._s(e.myReviews.reviewsNotes)+" ")])])]),i("a-space",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"canEdit"}],staticClass:"content-detail__edit"},[i("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!0)}}},[e._v("Edit")]),i("a-button",{attrs:{type:"link"},on:{click:e.handleDelMyReview}},[e._v("Delete")])],1)],1):e._e()]),i("a-skeleton",{directives:[{name:"show",rawName:"v-show",value:!e.myReviews,expression:"!myReviews"}],attrs:{loading:e.loading,active:""}},[e.reviewsList.length>0?i("a-list",{attrs:{"item-layout":"vertical",pagination:e.pagination,"data-source":e.reviewsList},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("a-list-item",{key:"item.id"},[i("div",{staticClass:"reviews-content-detail"},[i("div",{staticClass:"content-detail__avatar"},[t.avatar?i("img",{attrs:{src:t.avatar}}):i("img",{attrs:{src:a("4992")}})]),i("div",{staticClass:"content-detail__rate"},[i("review-score",{attrs:{review:t}}),i("div",{staticClass:"content-detail__tag"},[i("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.learningDistance,expression:"item.learningDistance"}],attrs:{color:"#f50"}},[e._v(" Distance ")]),i("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.learningHome,expression:"item.learningHome"}],attrs:{color:"#2db7f5"}},[e._v(" At home ")]),i("a-tag",{directives:[{name:"show",rawName:"v-show",value:t.learningClass,expression:"item.learningClass"}],attrs:{color:"#87d068"}},[e._v(" In-class ")])],1)],1),i("div",[i("div",{staticClass:"content-detail__title"},[i("div",{staticClass:"title-info"},[i("div",{staticClass:"info-author"},[e._v(" "+e._s(t.nickName)+" ")]),i("div",{staticClass:"info-time"},[e._v(" "+e._s(e._f("dayjs")(t.createTime))+" ")])])]),i("div",{staticClass:"content-detail__review"},[i("label",[e._v(" "+e._s(t.reviewsNotes)+" ")])])])])])}}],null,!1,2830671118)}):i("a-empty",{attrs:{description:"No reviews yet"}})],1)],1)],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reviews-title"},[a("h4",[e._v("Reviews")])])}],n=a("5530"),o=a("53ca"),r=(a("a9e3"),a("d3b7"),a("7db0"),a("823b")),l=a("f93e"),c=a("ed18"),d=a("abb8"),u={name:"ReviewsPreview",components:{ReviewEdit:c["a"],ReviewScore:d["a"]},props:{id:{type:[String,Number],required:!0},role:{type:String,default:"student"},save:{type:Function,default:function(){}},list:{type:Function,required:!0},del:{type:Function,default:function(){}},myReview:{type:Function,default:function(){}},canEdit:{type:Boolean,default:!0},canCreate:{type:Boolean,default:!0},needSearch:{type:Boolean,default:!0}},watch:{id:{handler:function(e){this.currentId=e,this.loadData()},immediate:!0},canCreate:function(e){this.showCreate=e}},data:function(){var e=this;return{loading:!1,delLoading:!1,subLoading:!1,showCreate:this.canCreate,RATE_TOOLTIPS:l["y"],isEdit:!1,myReviews:null,reviewsList:[],reviewsNotes:"",reviewsScore:"",currentId:this.id,pagination:{onChange:function(t){e.pageNo=t,e.loadReviewList()},showTotal:function(e){return"Total ".concat(e," items")},total:0,pageSize:10,size:"small"},pageNo:1,mockData:{reviewsLabel:1,reviewsNotes:"123213123",reviewsScore:1,overall:1,effectiveness:5,quality:4,studentsEngagement:1,createBy:"jacob",id:123213213,createTime:"123123"}}},mounted:function(){this.loadData()},methods:{justifyPromise:function(e){return("object"===Object(o["a"])(e)||"function"===typeof e)&&"function"===typeof e.then},loadData:function(){this.loadMyReview(),this.loadReviewList()},loadMyReview:function(){var e=this,t=this.myReview({taskId:this.currentId,purchasesId:this.currentId});this.justifyPromise(t)&&(this.$refs.myReview&&this.$refs.myReview.triggerLoading(!0),this.delLoading=!0,t.then((function(t){t.success&&t.result?e.myReviews=Object(n["a"])(Object(n["a"])({},t.result),{},{learningClass:Boolean(t.result.learningClass),learningDistance:Boolean(t.result.learningDistance),learningHome:Boolean(t.result.learningHome),updatedMsg:Boolean(t.result.updatedMsg)}):e.myReviews=null})).finally((function(){e.$refs.myReview&&e.$refs.myReview.triggerLoading(!1),e.delLoading=!1})))},loadReviewList:function(){var e=this,t=this.list({reviewsNotes:this.reviewsNotes,reviewsScore:this.reviewsScore,pageNo:this.pageNo,pageSize:this.pagination.pageSize,taskId:this.currentId,excludeSelf:1,overall:this.reviewsScore,searchKey:this.reviewsNotes,purchasesId:this.currentId});this.justifyPromise(t)&&(this.loading=!0,t.then((function(t){r["info"]("loadReviewList",t),t.result&&t.result.records&&t.result.records.length?(e.reviewsList=t.result.records,e.pagination.total=t.result.total):(e.reviewsList=[],e.pagination.total=0),r["info"]("reviewsList",e.reviewsList)})).finally((function(){e.loading=!1})))},handleDelMyReview:function(){var e=this;this.myReviews&&this.$confirm({title:"Confirm delete",content:"Are you sure to delete your review ?",centered:!0,onOk:function(){var t=e.del({id:e.myReviews.id});e.justifyPromise(t)&&(e.delLoading=!0,t.then((function(t){e.$logger.info("del response",t),t.success&&(e.$message.success("Del successfully"),e.myReviews=null,e.$emit("update"))})).finally((function(){e.delLoading=!1})))}})},handleSaveMyReview:function(e){var t=this;if("student"!==this.role||this.myReviews){var a=this.save(Object(n["a"])({taskId:this.currentId,purchasesId:this.currentId,id:this.myReviews&&this.myReviews.id?this.myReviews.id:null},e));this.justifyPromise(a)&&(this.$refs.myReview&&this.$refs.myReview.triggerLoading(!0),a.then((function(e){if(e.success){if(t.$message.success("Save successfully"),t.myReviews=Object(n["a"])(Object(n["a"])(Object(n["a"])({},t.myReviews),e.result),{},{learningClass:Boolean(e.result.learningClass),learningDistance:Boolean(e.result.learningDistance),learningHome:Boolean(e.result.learningHome),updatedMsg:Boolean(e.result.updatedMsg)}),t.myReviews&&t.myReviews.id){var a=t.reviewsList.find((function(e){return e.id===t.myReviews.id}));a&&(a=Object(n["a"])(Object(n["a"])({},a),e.result))}t.$refs.myReview&&t.$refs.myReview.triggerIsEdit(!1),t.$emit("update")}})).finally((function(){t.$refs.myReview&&t.$refs.myReview.triggerLoading(!1)})))}},triggerEdit:function(e){this.$refs.myReview&&this.$refs.myReview.triggerEdit(e)},triggerSearch:function(){this.loadReviewList()},triggerChangeRate:function(e){this.loadReviewList()}}},h=u,p=(a("f3d1"),a("0c7c")),m=Object(p["a"])(h,i,s,!1,null,"6616b678",null);t["a"]=m.exports},dd87:function(e,t,a){},de1a:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABL5JREFUWEetV11oHFUU/s7dieQh0GzzswvmYdudiEKlBQ0oJrjQhhpIdGdVaJGCog8RLe1DHyoqFSxYkGJFwYqKLRZSMGbXpEjElKRYaB8CBlowmNk04A+72TZJMUrC7twjd5LdnZ39T5y3uXPvOd/5+b57hvA/PK3B8GOaoEMAngDQAVAAjDUGm8Q0DcZwYn7pR2Aq43ZH2/Hf8lD/g5psOE9E/dXt8Cxb/GZyPnbVuXfLANp3GXvJQ+NE8Fd3vrGDwRlAnEjOffdx9syWALTrzx0k8gwT0FSrc+c+CQwuzo18rtbqBuDbHd4PFTlIcxq1o2NclsxXifkPQOgk6CCI+9177f5g7krGo7frAqCazSPElDtyZphgNpRBd0bags/qHtKGQHi8ADAjljRHjLoA+HRjzN1wzDwjM+t9qYUfEuXK0dYWavLs2DlZBELyo/UB6DSGCDbdNh++bq0s96VSU6vVeqElMPBwQ0PDr4Vlw+m6ANjpFJ6vmbEHoAvy/tK7hc5Dmj/o/YQJh0A0LdNrR5yZ8XVGfiLgQA4+42ZdACpHGdLade+QIHohu08CFxbnRl7Jvvs6I+8T8E4eAK+UBxAINbY80NRy77crf1ZLL1DsfJP44wlzpC973q9HToHwXlUhUjwXJC4B1MqQE8m5lb5SMrphqLRzRUspMZCKR8dzAILGZxA06ChBoigD7Z3h5wl0uYC7kl9OxKMXizNRwTnLwynz++H8mZDm1713QNSR72FWlM4/JZ0DsNh6sdBY+cjVFwYdd8qtWvPrxhsg+rQgCOaTOQCtuvG0hzBRpHDMU0lzubewBGVqXsZ5ezDyFAkVrUM9GWtWZm2XDcAfCAdYEzeKL5ZinitRETt2fkOEsLskpSLfcI7xYvXkM0kz+pYNwFckMHYiS4hMSPN3eicB6t6m8xl5f7lHaQj5gsYeEnTLZXDWWlnqcouMm+e5bi5Vc5XVBnGrxL2RkJzpScVHTXWe/Hr4FEgUcDNjZbruzo9OOzu4Hud2VnXjAyI66QyMgVVwujdpjt3MrpNPj6jaq1HKfhiYSM6N9G7H+UZZw8cI4pyT80DacDrfzIDxewE3pTyaiMdydPEFjbdJ0Olaal6wJxBq9GneL4jQzSAzk04fvbcwNuu2Q/7OCDsXpZTGYjwWy6759ci3IOT0vRzP3YZrfSefbiwTUXM+VfK1pBn7KvveHgyHhRDRSg3XHAg3N2q0V1rW7OKd0WStzu0S+HTjFyLalwfAl5Jm9IjTSNtuo9sjaD8gryXM2JTzm+K5EBzbuDewKtOyJ7UQm6kVhGrCj4hwPB+hukSsR7I0qWSopMhIPp+IR1+vGYAdnYd+LqCLGrM2haKcoQ3ppitunkuJE4vxkbM1A1Ab/boxCaKQ69AsmAcTZvSau7v9mvcYkxqnCidjACUErDIUW4rbAuF9Hk3cAKGxiG7Mt4lomhkrBO5gomdK/w/wgpVef7LScFoKSu429OmRV4nwZa2pc2fLkpmBWvqmSAecCwoECOfq+eNRyvnvP+nDf/81dncr4IsmIjU+a5r2YbUfTmZ7oDyTMJfPlh/XqkMqO5SqWxKElwh0gMG6LVbMKkr19zNuZdYv1lvvUnD+A2xgPb8puyDSAAAAAElFTkSuQmCC"},dec2:function(e,t,a){"use strict";a("8757")},df5e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cc-custom-form-item"},[e.showLabel?a("div",{staticClass:"label"},[a("div",{staticClass:"label-left",style:{color:e.labelColor,fontSize:e.labelSize+"px"}},[e.requiredField?a("div",{staticClass:"required-dot vertical-center"},[e._v("*")]):e._e(),e._t("label"),e.required?a("div",{staticClass:"required"},[e._v(" *Required ")]):e._e(),a("div",{staticClass:"tips"},[e._t("tips")],2)],2),a("div",{staticClass:"right-action"},[e._t("action")],2)]):e._e(),a("div",{staticClass:"form-item-content"},[e._t("default")],2)])},s=[],n=(a("a9e3"),{name:"CustomFormItem",props:{showLabel:{type:Boolean,default:!0},labelColor:{type:String,default:"#202020"},labelSize:{type:Number,default:14},required:{type:Boolean,default:!1},requiredField:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},methods:{}}),o=n,r=(a("ce3e"),a("0c7c")),l=Object(r["a"])(o,i,s,!1,null,"4ed45c61",null);t["a"]=l.exports},dfe9:function(e,t){e.exports="data:image/png;base64,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"},e0e1:function(e,t,a){"use strict";a("8e3a")},e11c:function(e,t,a){"use strict";a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return b}));var i=a("2909"),s=a("5530"),n=(a("c740"),a("159b"),a("b0c0"),a("d81d"),a("4de4"),a("d3b7"),a("523d")),o=a("b21a"),r=a("d4ec"),l=a("bee2"),c=a("ade3"),d=function(){function e(){Object(r["a"])(this,e),Object(c["a"])(this,"id",""),Object(c["a"])(this,"type",0),Object(c["a"])(this,"fieldName",""),Object(c["a"])(this,"inputValue","")}return Object(l["a"])(e,null,[{key:"convert2CollborateMsg",value:function(t){var a=new e;return a.id=t.id,a.type=t.type,a.fieldName=t.fieldName,a.inputValue=t.inputValue,a}}]),e}(),u=function(){function e(){Object(r["a"])(this,e),Object(c["a"])(this,"id",""),Object(c["a"])(this,"type",0),Object(c["a"])(this,"details",{})}return Object(l["a"])(e,null,[{key:"convert2SaveContentMsg",value:function(t){var a=new e;return a.id=t.id,a.type=t.type,a.details=t.details,a}}]),e}(),h=a("39e6"),p=a("f93e"),m=a("2f62"),g=a("8ded"),f=a.n(g),v=a("9fb0"),y={collaborate:1,collaborateComment:2,imageUpload:3,customTag:4,taskDetails:5,recommend:6,associate:7,assessmentToolsLearnOuts:8},b={data:function(){return{shareVisible:!1,shareStatus:0,oldForm:{},rightModule:y,showModuleList:[y.customTag,y.recommend],rightWidth:600,leftWidth:730,collaborate:{},initCompleted:!1,updateContentVisible:!1,defaultHistoryKey:"1",showCollaborateModalVisible:!1,collaborateContent:null,currentFieldName:{},historyList:[],collaborateCommentList:[],currentCollaborateCommentList:[],currentRightModule:null}},watch:{needRefreshCollaborate:function(e){e&&e.indexOf(this.oldForm.id)>-1&&this.isOwner&&(this.refreshCollaborateAction(!1),this.handleStartCollaborate())},changeCollaborate:function(e){e&&e.indexOf(this.form.id)>-1&&(this.changeCollaborateAction(!1),this.$logger.info("need changeCollaborate"),this.queryContentCollaborates(this.form.id,this.form.type))}},filters:{unitLabelName:function(e,t,a){return a&&a.planFieldMap&&a.planFieldMap[t]?a.planFieldMap[t]:e},unitLabelHint:function(e,t,a){return a&&a.planHintMap&&a.planHintMap[t]?a.planHintMap[t]:e},taskLabelName:function(e,t,a){return a&&a.taskFieldMap&&a.taskFieldMap[t]?a.taskFieldMap[t]:e},taskLabelHint:function(e,t,a){return a&&a.taskHintMap&&a.taskHintMap[t]?a.taskHintMap[t]:e}},created:function(){var e=this.$route.query.token;e||(e=f.a.get(v["a"]))},mounted:function(){var e=this;this.resetWidth(),window.onresize=function(){e.resetWidth()},window.addEventListener("beforeunload",(function(t){return e.beforeunloadHandler(t)})),this.receiveSaveContentMsg("")},destroyed:function(){var e=this;window.removeEventListener("beforeunload",(function(t){return e.beforeunloadHandler(t)}))},computed:Object(s["a"])(Object(s["a"])({getCollaborateUsers:function(){return function(e){var t=[];return e.users&&(t=Object(i["a"])(e.users)),e.owner.nickName=e.owner.nickname,t.push(e.owner),t}},isOwner:function(){return!!this.oldForm&&this.$store.getters.userInfo.email===this.oldForm.createBy},isCollaborater:function(){var e=this;if(!this.collaborate.users)return!1;var t=this.collaborate.users.findIndex((function(t){return t.email===e.$store.getters.userInfo.email}));return t>-1},isEditCollaborater:function(){var e=this;if(!this.collaborate.users)return!1;var t=this.collaborate.users.findIndex((function(t){return t.email===e.$store.getters.userInfo.email}));return t>-1&&"Edit"===this.collaborate.users[t].permissions},canEdit:function(){return this.isOwner||this.isEditCollaborater},showRightModule:function(){return function(e){return this.showModuleList.indexOf(e)>-1}},showUpdateContent:function(){var e=this.$store.state.websocket.saveContentMsg;return!(!e||e.content.id!==this.form.id)&&(e.content.details.updateTime=this.oldForm.updateTime,e.content.details.gradeId=this.oldForm.gradeId,!e.hideUpdate&&!Object(h["a"])(e.content.details,this.oldForm))},associateIdTypeList:function(){var e=this,t=[];return this.associateUnitPlanIdList&&this.associateUnitPlanIdList.forEach((function(a){t.push({id:a,type:e.$classcipe.typeMap["unit-plan"]})})),this.associateTaskIdList&&this.associateTaskIdList.forEach((function(a){t.push({id:a,type:e.$classcipe.typeMap.task})})),t}},Object(m["c"])({vueSocket:"vueSocket"})),Object(m["e"])({needRefreshCollaborate:function(e){return e.websocket.needRefreshCollaborate},removedCollaborate:function(e){return e.websocket.removedCollaborate},changeCollaborate:function(e){return e.websocket.changeCollaborate},collapsed:function(e){return e.app.sideCollapsed}})),methods:Object(s["a"])(Object(s["a"])({},Object(m["b"])(["refreshCollaborateAction","changeCollaborateAction","removedCollaborateAction","receiveSaveContentMsg"])),{},{setRightModuleVisible:function(e){e===this.rightModule.collaborate?this.showModuleList=[y.collaborate]:e===this.rightModule.collaborateComment?this.showModuleList=[y.collaborateComment]:e===this.rightModule.customTag?this.showModuleList=[y.customTag]:e===this.rightModule.taskDetails?this.showModuleList=[y.taskDetails]:e===this.rightModule.recommend?this.showModuleList=[y.recommend]:this.showModuleList=[y.customTag,y.recommend]},resetRightModuleVisible:function(){this.showModuleList=[y.customTag,y.recommend]},beforeunloadHandler:function(e){if(this.$logger.info("beforeunloadHandler ",this.$route.name),"AddTask"===this.$route.name||"UnitPlan"===this.$route.name)return e=e||window.event,e&&(e.returnValue="alert"),"alert"},resetWidth:function(){document.body.clientWidth<1400?(this.rightWidth=480,this.leftWidth=550):(this.rightWidth=600,this.leftWidth=720)},queryContentCollaborates:function(e,t){var a=this;this.collaborate={},Object(n["s"])({id:e,type:t}).then((function(e){a.$logger.info("QueryContentCollaborates response:",e),e.success&&(a.collaborate=e.result)}))},confirmSelectCollaborateUsers:function(e){this.collaborate=e},handleBack:function(){this.$logger.info("handleBack"),this.$router.push({path:"/teacher/main/created-by-me"})},handleCollaborateEvent:function(e,t,a){var i=this,s=new d;s.id=e,s.fieldName=t,s.inputValue=a;var n=this.collaborate.users.filter((function(e){return e.userId!==i.$store.getters.userInfo.id})).map((function(e){return e.userId}));this.isOwner||-1===n.indexOf(this.collaborate.owner.id)&&n.push(this.collaborate.owner.id),n.length>0&&this.vueSocket.sendMessageToUsers(o["a"],n,d.convert2CollborateMsg(s))},handleSaveContentEvent:function(e,t,a){var i=this,s=new u;s.id=e,s.type=t,s.details=a;var n=this.collaborate.users.filter((function(e){return e.userId!==i.$store.getters.userInfo.id})).map((function(e){return e.userId}));this.isOwner||-1===n.indexOf(this.collaborate.owner.id)&&n.push(this.collaborate.owner.id),n.length>0&&this.vueSocket.sendMessageToUsers(o["l"],n,u.convert2SaveContentMsg(s))},handleCancelComment:function(){this.handleDisplayRightModule(),this.currentFieldName=""},handleStartCollaborate:function(){this.$logger.info("handleStartCollaborate"),this.collaborateContent=Object.assign({},this.form),this.showCollaborateModalVisible=!0},cleaPageCache:function(){sessionStorage.removeItem(p["E"]),sessionStorage.removeItem(p["H"]),sessionStorage.removeItem(p["G"])},GetCollaborateModifiedHistory:function(e,t){var a=this;Object(n["q"])({sourceType:e,sourceId:t}).then((function(e){a.historyList=[],a.$logger.info("GetCollaborateModifiedHistory",e),e.code||(a.historyList=e.result)}))},GetCollaborateComment:function(e,t){var a=this;Object(n["p"])({sourceType:e,sourceId:t}).then((function(e){a.$logger.info("GetCollaborateComment",e),e.code||(a.collaborateCommentList=e.result)})).finally((function(){a.showHistoryLoading=!1}))},loadCollaborateData:function(e,t){this.GetCollaborateModifiedHistory(e,t),this.GetCollaborateComment(e,t)},handleShareStatus:function(e){this.$logger.info("handleShareStatus",e),this.shareStatus=e}})}},e1f0:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("c740"),a("a434");var i=a("523d"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comment-input"},[a("a-row",[a("a-mentions",{attrs:{rows:"2",placeholder:"Comment or add others with @"},on:{change:e.onChange,select:e.onSelect},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},e._l(e.collaborateUserList,(function(t,i){return a("a-mentions-option",{key:i,attrs:{value:t.nickName}},[e._v(" "+e._s(t.nickName)+" ")])})),1)],1),a("div",{staticClass:"confirm-button"},[a("a-button",{class:{"button-item":!0,"disabled-button":e.isDisabled},attrs:{type:"primary",loading:e.sending,disabled:e.isDisabled},on:{click:e.handleComment}},[e._v(" Comment ")]),a("a-button",{staticClass:"button-item",on:{click:e.cancelComment}},[e._v(" Cancel ")])],1)],1)},n=[],o={name:"InputWithButton",props:{sending:{type:Boolean,default:!1},collaborateUserList:{type:Array,default:function(){return[]}}},data:function(){return{inputValue:"",oldValue:"",isDisabled:!0}},methods:{created:function(){this.oldValue=this.inputValue},onSelect:function(e){},onChange:function(e){this.isDisabled=e===this.oldValue},handleComment:function(){this.$logger.info("trigger handleComment "+this.inputValue),this.inputValue&&this.$emit("comment",this.inputValue)},cancelComment:function(){this.inputValue="",this.$emit("cancelComment")}}},r=o,l=(a("f5c8"),a("0c7c")),c=Object(l["a"])(r,s,n,!1,null,"a4b3b0f8",null),d=c.exports,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comment-input"},[a("div",[a("a-mentions",{attrs:{rows:"2",placeholder:"Reply or add others with @"},on:{focus:e.focusInput,change:e.onChange,select:e.onSelect},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},e._l(e.collaborateUserList,(function(t,i){return a("a-mentions-option",{key:i,attrs:{value:t.nickName}},[e._v(" "+e._s(t.nickName)+" ")])})),1)],1),e.commentItem.editing?a("div",{staticClass:"confirm-button"},[a("a-button",{class:{"button-item":!0,"disabled-button":e.isDisabled},attrs:{type:"primary",loading:e.sending,disabled:e.isDisabled},on:{click:e.reply}},[e._v(" Reply ")]),a("a-button",{staticClass:"button-item",on:{click:e.cancelReply}},[e._v(" Cancel ")])],1):e._e()])},h=[],p={name:"InputReplyButton",props:{sending:{type:Boolean,default:!1},replyMode:{type:Boolean,default:!1},commentItem:{type:Object,default:function(){return{}}},collaborateUserList:{type:Array,default:function(){return[]}}},watch:{commentItem:function(e){this.$logger.info("commentItem "+e),this.inputValue=e.content,this.oldValue=e.content,this.loading=!!e.sendLoading&&e.sendLoading},sending:function(e){e||(this.inputValue="")}},data:function(){return{inputValue:"",oldValue:"",isDisabled:!0,loading:!1}},created:function(){this.loading=!!this.commentItem.sendLoading&&this.commentItem.sendLoading,this.inputValue=this.commentItem.content?this.commentItem.content:"",this.oldValue=this.commentItem.content?this.commentItem.content:""},methods:{onSelect:function(e){},onChange:function(e){this.isDisabled=e===this.oldValue},cancelReply:function(){this.$emit("cancel",this.commentItem)},reply:function(){this.inputValue&&(this.commentItem.content=this.inputValue,this.$emit("send",this.commentItem))},focusInput:function(){this.$emit("focusInput",this.commentItem)}}},m=p,g=(a("c506"),Object(l["a"])(m,u,h,!1,null,"153de7dd",null)),f=g.exports,v=a("d989"),y=a.n(v),b={components:{InputWithButton:d,InputReplyButton:f,deleteIcon:y.a},data:function(){return{newComments:[],rootCommentMap:new Map,formatCommentList:[],deleteThread:!1,rawCommentList:[],originalCommentList:[],deleteCommentModalVisible:!1,currentDeleteComment:null,commentSending:!1,addRoot:!1,newComment:{editing:!1,content:"",sendLoading:!1}}},created:function(){},computed:{},methods:{formatNewReply:function(){var e=this;this.newComments=[],this.formatCommentList.forEach((function(t,a){e.newComments.push({commentToId:t.id,index:a,editing:!1,content:"",sendLoading:!1})})),this.$logger.info("newComments",this.newComments)},handleCancel:function(e){if(this.$logger.info("handleCancel",e),e.editing=!1,e.commentToId){var t=this.formatCommentList.findIndex((function(t){return t.id===e.commentToId})),a=this.formatCommentList[t].subCommentList.findIndex((function(t){return t.id===e.id}));this.$set(this.formatCommentList[t].subCommentList,a,e)}else{var i=this.formatCommentList.findIndex((function(t){return t.id===e.id}));this.$set(this.formatCommentList,i,e)}},handleComment:function(e){var t=this,a={};this.fieldName&&(a.fieldName=this.fieldName),a.sourceId=this.sourceId,a.sourceType=this.sourceType,a.content=e,this.newComment.sendLoading=!0,this.$logger.info("handleComment",a),Object(i["a"])(a).then((function(e){var a=e.result;a.subCommentList=[],t.newComments.unshift({commentToId:a.id,index:0,editing:!1,content:"",sendLoading:!1}),t.newComments.forEach((function(e,t){e.index=t})),a.subCommentList=[],t.formatCommentList.unshift(a)})).finally((function(){t.newComment.sendLoading=!1,t.newComment.editing=!1,t.newComment.content="",t.addRoot=!1,t.$emit("update-comment")}))},cancelComment:function(){this.formatCommentList.length>0?this.addRoot=!1:this.$emit("cancel-comment")},handleCancelDelete:function(){this.$logger.info("handleCancelDelete"),this.deleteCommentModalVisible=!1,this.currentDeleteComment=null},handleEnsureDelete:function(){var e=this;this.$logger.info(""),this.deleteCommentModalVisible=!1,Object(i["o"])(this.currentDeleteComment).then((function(t){e.$emit("update-comment"),e.currentDeleteComment=null}))},handleSend:function(e){var t=this,a=this.formatCommentList.findIndex((function(t){return t.id===e.id}));-1===a&&(a=this.formatCommentList.findIndex((function(t){return t.id===e.commentToId})));var s=!e.commentToId;this.fieldName?e.fieldName=this.fieldName:e.fieldName=this.formatCommentList[a].fieldName,e.sourceId=this.sourceId,e.sourceType=this.sourceType,e.sendLoading=!0;var n=!1;if(e.id)if(s)this.$set(this.formatCommentList,a,e);else{var o=this.formatCommentList[a].subCommentList.findIndex((function(t){return t.id===e.id}));this.$set(this.formatCommentList[a].subCommentList,o,e)}else n=!0,this.$set(this.newComments,e.index,e);this.$logger.info("handleSend",e),Object(i["a"])(e).then((function(i){if(n){e.sendLoading=!1,e.editing=!1,e.content="",t.$set(t.newComments,e.index,e);var o=i.result;s?(o.subCommentList=[],t.formatCommentList.unshift(o)):t.formatCommentList[a].subCommentList.push(o)}else if(e.sendLoading=!1,e.editing=!1,s)t.$set(t.formatCommentList,a,e);else{var r=t.formatCommentList[a].subCommentList.findIndex((function(t){return t.id===e.id}));t.$set(t.formatCommentList[a].subCommentList,r,e)}})).finally((function(){t.$emit("update-comment")}))},handleDeleteRootCommentConfirm:function(e,t,a){e.deleteThread=a,this.$set(this.formatCommentList,t,e)},handleDeleteCommentConfirm:function(e,t,a,i){this.$logger.info("handleDeleteCommentConfirm",e),e.delete=i,this.$set(this.formatCommentList[a].subCommentList,t,e)},handleDeleteCommentRoot:function(e,t){var a=this;this.$logger.info("handleDeleteCommentRoot",e,t),Object(i["o"])(e).then((function(e){a.formatCommentList.splice(t,1)})).finally((function(){a.$emit("update-comment")}))},handleDeleteComment:function(e,t,a){var s=this;this.$logger.info("handleDeleteComment",e,t,a),Object(i["o"])(e).then((function(e){s.formatCommentList[a].subCommentList.splice(t,1)})).finally((function(){s.$emit("update-comment")}))},cancelDeleteThread:function(e){this.formatCommentList[e].deleteThread=!1,this.$set(this.formatCommentList,e,this.formatCommentList[e]),this.removeCommentContent(this.formatCommentList[e],!0)},handleCancelNewComment:function(e){this.$logger.info("handleFocusInput"),e.editing=!1,e.index&&-1!==e.index&&this.$set(this.newComments,e.index,e)},handleEditComment:function(e,t,a){this.$logger.info("handleEditComment",e),e.editing=!e.editing,this.$set(this.formatCommentList[a].subCommentList,t,e)},handleEditCommentRoot:function(e,t){this.$logger.info("handleEditCommentRoot",e),e.editing=!e.editing,this.$set(this.formatCommentList,t,e)},handleFocusInput:function(e){this.$logger.info("handleFocusInput"),e.editing=!0,this.$set(this.newComments,e.index,e)},handleMarked:function(e,t){var a=this;this.$logger.info("handleMarked",e),this.formatCommentList.splice(t,1),Object(i["r"])(e).then((function(e){a.$message.success("Marked successfully")})).finally((function(){a.$emit("update-comment")}))}}}},e2cf:function(e,t,a){"use strict";a("439b")},e317:function(e,t,a){},e568:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAAAAXNSR0IArs4c6QAAAw1JREFUSEvdl02ojmkYx3//g/H97fiOkYQwRUY2RIZIihRNWLAjFmfBwoJCQxIrmdjMAlmJkuzMkIWFFBvSTE6K5GhY+MrHNf1P962nx/u85z28Wcy1euq+7ut/ffyv674e0USJiInARWAW0FIw3QHcBY4BlyV9VD6MiF7AcGAeMBYYBNwDbgNPJH3oyseI2AUcAj7bLdwJ4B3QJun3ToWImALsANYAI9NFn30CngNngaOSHtcDj4j1wGmgZx29l8BcRcQi4DAwCugLDAT6lDz9mFK1VdLNKqMR8QPgqGcXUu2Uz08B5atHDLwaeAD8mw7npMgXA/0LII7+IbBO0q0uwMsRrwLOFe7cNrCVbNQ1cHrtoSN22vcBP5aid91XSGrvquYF/kwC/inoP61Fgs7zRLafU33N1ix20szdKOl10rWdIcAbSW/LDkXEBKDoaEclcDLYA1gKnAGGFQy+T+w8HhEDAPPEtd0j6c9vBk7gLkUb8FuJrWb4FmATsDKRcqqkv5sCnMD7ARdS9J9LB7wAHLFngHt0QK1+r5nqiDCZBidrLyW5hl9IRLglnMbeFaS6J2l6xd0vaxwRC4EDidGu0dXi5YjIxFkCnEokqmX/vKS13QG+A8xIF+77W5JbKzP7J2AvsCBlpoqQByXt7g6wZ7DZa3Ga++eWiIi5qfHdTvXGoO9ulvRHd4A7oyuIgXN/uvbbPa2AcYm5Hou1ZKGk600BTun2FBsKTE7t454dkcZpfvrsfKskPyi1iFmTXJUR1yCZZ/dowPN8KzAt1d1zfnzmRhm5qp0aAi45YU64DJ7By1x/SfsrSmCSfn3EdYy6r1skvfmuwFVgpQw1P+L/BbAH/atGImlUJ22f3l6ydHgD8bDwrpVlDPCsUaMN6vnx8Hqbpd3A3p/cl1lOAJfSKtSg3bpqHjK/AhsKWlcMvDPtwnkKeaNsaqrTm53t+z3YbGAPgmvAzNL234xoyzYM+hewPC/0rsHJtP8Wfz2aCW7QK8A2SY+KvzCO/BfAm2VrMxH9CwTccGZzx/wHLF5e3RCoSfoAAAAASUVORK5CYII="},e709:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"preview-preview"},[e.loading?[a("a-skeleton",{attrs:{active:""}})]:[a("a-row",{staticClass:"action-header"},[a("a-col",{staticClass:"action-header-toggle",attrs:{span:"24"}},[e._v(" "+e._s(e.templateData.name)+" ")])],1),a("a-row",{staticClass:"top-header"},[a("a-col",{staticClass:"material-row"},[a("div",{staticClass:"icon-group"},[e.currentPageMaterial.hasOwnProperty("text")?a("a-badge",{attrs:{count:e.showMaterialSize("text")}},[a("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("text")}}},[a("text-type-svg"),a("div",{staticClass:"icon-text"},[e._v("Text")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("image")?a("a-badge",{attrs:{count:e.showMaterialSize("image")}},[a("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("image")}}},[a("image-type-svg"),a("div",{staticClass:"icon-text"},[e._v("Image")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("video")?a("a-badge",{attrs:{count:e.showMaterialSize("video")}},[a("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("video")}}},[a("video-type-svg"),a("div",{staticClass:"icon-text"},[e._v("Video")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("audio")?a("a-badge",{attrs:{count:e.showMaterialSize("audio")}},[a("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("audio")}}},[a("audio-type-svg"),a("div",{staticClass:"icon-text"},[e._v("Audio")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("iframe")?a("a-badge",{attrs:{count:e.showMaterialSize("iframe")}},[a("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("iframe")}}},[a("youtube-type-svg"),a("div",{staticClass:"icon-text"},[e._v("Youtube")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("pdf")?a("a-badge",{attrs:{count:e.showMaterialSize("pdf")}},[a("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("pdf")}}},[a("pdf-type-svg"),a("div",{staticClass:"icon-text"},[e._v("PDF")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("website")?a("a-badge",{attrs:{count:e.showMaterialSize("website")}},[a("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("website")}}},[a("url-type-svg"),a("div",{staticClass:"icon-text"},[e._v("Website")])],1)]):e._e()],1)])],1),a("a-row",{staticClass:"preview-data-info"},[a("a-col",{staticClass:"slide-preview",attrs:{span:"24"}},[a("a-col",{attrs:{span:"24"}},[e.thumbnailList.length?e._e():a("div",{staticClass:"no-preview-img"},[a("no-more-resources")],1)]),a("a-col",{staticClass:"left-preview",staticStyle:{display:"flex","flex-direction":"row"},attrs:{span:"24"}},[a("div",{staticClass:"left-preview-left",staticStyle:{display:"flex"}},[e.thumbnailList.length?a("a-carousel",{ref:"carousel",staticClass:"my-carousel"},e._l(e.thumbnailList,(function(e,t){return a("div",{key:"cIndex"+t},[a("img",{attrs:{src:e.contentUrl}})])})),0):e._e(),e.currentPageItem?a("div",{staticClass:"plugin-tags"},[a("a-row",{staticClass:"tag-row"},[e.currentPageItem.data.bloomLevel?a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[e._v("Bloom's Taxonomy:")]),a("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[e._v(e._s(e.currentPageItem.data.bloomLevel))])]):e._e(),e.currentPageItem.data.knowledgeLevel?a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[e._v("Knowledge dimension(s):")]),a("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[e._v(e._s(e.currentPageItem.data.knowledgeLevel))])]):e._e()]),a("a-row",{staticClass:"tag-row"},[e.currentPageItem.data.verbs&&e.currentPageItem.data.verbs.length>0?a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[e._v("Command terms:")]),e._l(e.currentPageItem.data.verbs,(function(t,i){return a("span",{key:i,staticClass:"tag-value",staticStyle:{color:"#15C39A"}},[e._v(e._s(t))])}))],2):e._e(),e.currentPageTips?a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[e._v("Tip added:")]),a("span",{staticClass:"tag-value",staticStyle:{color:"#0054FF"}},[e._v(e._s(e.currentPageTips.tip))])]):e._e()]),e.currentPageItem.data.learnOuts&&e.currentPageItem.data.learnOuts.length>0?a("a-row",{staticClass:"tag-row"},[a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[e._v("Assessment objective(s):")]),e._l(e.currentPageItem.data.learnOuts,(function(t,i){return a("span",{key:i,staticClass:"tag-value",staticStyle:{color:"#00BCF2"}},[a("a-tooltip",{attrs:{title:t.path,overlayStyle:{"z-index":"3000"}}},[e._v(e._s(t.name)+" ")])],1)}))],2)]):e._e(),a("a-row",{staticClass:"tag-row"},[a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[e._v("This is a "),a("span",[e._v(e._s(e.currentPageItem.type))]),e._v(" slide")])])])],1):e._e(),e.thumbnailList&&e.thumbnailList.length?a("div",{staticClass:"page-info"},[e._v(" "+e._s(e.currentImgIndex+1)+" / "+e._s(e.thumbnailList.length)+" ")]):e._e(),-1===e.selectIds.indexOf(e.template.id)?a("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:function(t){return e.handleSelectTemplate(t)}}},[a("a-icon",{staticClass:"btn-icon",attrs:{type:"plus-circle"}}),a("div",{staticClass:"btn-text"},[e._v(" Insert ")])],1):e._e()],1),a("div",{staticClass:"carousel-page"},[a("div",{staticClass:"img-list-wrapper"},[a("div",{staticClass:"img-list"},e._l(e.thumbnailList,(function(t,i){return a("div",{key:"index"+i,staticClass:"img-item",on:{click:function(t){return e.handleGotoImgIndex(i)}}},[a("img",{attrs:{src:t.contentUrl}})])})),0)])])])],1)],1),a("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px",zIndex:6e3,title:"My Materials"},on:{ok:function(t){e.materialVisible=!1},cancel:function(t){e.materialVisible=!1}},model:{value:e.materialVisible,callback:function(t){e.materialVisible=t},expression:"materialVisible"}},[a("task-material-preview",{attrs:{"current-page-element-lists":e.currentPageElementLists,"filter-type":e.filterMaterialType,"current-page-index":e.currentImgIndex}})],1),a("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"900px",zIndex:5e3,title:null},on:{ok:function(t){e.mediaVisible=!1},cancel:function(t){e.mediaVisible=!1}},model:{value:e.mediaVisible,callback:function(t){e.mediaVisible=t},expression:"mediaVisible"}},[a("media-preview",{attrs:{"media-list":e.mediaList,"material-type":e.filterMaterialType}})],1)]],2)},s=[],n=(a("d3b7"),a("159b"),a("b0c0"),a("69b3")),o=a("8448"),r=a.n(o),l=a("998c"),c=a.n(l),d=a("4084"),u=a.n(d),h=a("8a21"),p=a.n(h),m=a("1eeb"),g=a.n(m),f=a("5a1d"),v=a.n(f),y=a("6631"),b=a.n(y),C=a("3111"),w=a("542c"),k=a("3f76"),T=a("c621"),L=a("d33b"),I=a("873a"),S=a("4fb2"),A=a("2f59"),x={name:"TemplatePreview",components:{TaskMaterialPreview:w["a"],MaterialTypeIcon:C["a"],NoMoreResources:n["a"],TextTypeSvg:r.a,ImageTypeSvg:c.a,VideoTypeSvg:u.a,AudioTypeSvg:p.a,YoutubeTypeSvg:g.a,PdfTypeSvg:v.a,UrlTypeSvg:b.a,MediaPreview:I["a"]},props:{template:{type:Object,default:function(){return null}},selectedTemplateIdList:{type:Array,default:function(){return[]}}},watch:{selectedTemplateIdList:function(e){this.$logger.info("selectedTemplateIdList ",e),this.selectIds=e}},computed:{},mounted:function(){},data:function(){return{selectIds:[],templateData:{},loading:!0,loadingClass:!1,data:null,subPreviewVisible:!1}},mixins:[L["a"],A["a"]],created:function(){this.loadData()},methods:{loadData:function(){var e=this;this.templateData=this.template,this.$logger.info("selectedTemplateIdList ",this.selectedTemplateIdList),this.selectIds=this.selectedTemplateIdList,this.templateData.type===k["e"].task?(this.loading=!0,Object(T["d"])({taskId:this.templateData.id}).then((function(t){if(e.$logger.info("task loadThumbnail response",t.result),t.code!==e.ErrorCode.ppt_google_token_expires&&t.code!==e.ErrorCode.ppt_forbidden){var a=t.result.pageObjects;e.templateData.pageObjectIds=[],a.forEach((function(t){e.templateData.pageObjectIds.push(t.id),e.thumbnailList.push({contentUrl:t.contentUrl,id:t.pageObjectId}),e.$logger.info("current thumbnailList ",e.thumbnailList)}))}})).finally((function(){e.loading=!1,e.getClassInfo(e.templateData.presentationId)}))):(this.loading=!1,this.templateData.images.forEach((function(t,a){e.thumbnailList.push({contentUrl:t,id:e.templateData.pageObjectIds[a]})})),this.getClassInfo(this.templateData.presentationId))},handleAuthCallback:function(){this.$logger.info("handleAuthCallback"),this.loadData()},handleGotoImgIndex:function(e){this.$logger.info("handleGotoImgIndex "+e),this.currentImgIndex=e,this.$refs.carousel.goTo(e)},handleSelectTemplate:function(e){this.$logger.info("handleSelectTemplate "+this.templateData.name),S["b"].$emit(S["a"].ToggleSelectContentItem,this.templateData,e)},handlePreviewMaterial:function(e){this.$logger.info("handlePreviewMaterial "+e),"tip"!==e.type&&window.open(e.url,"_blank")}}},_=x,D=(a("ff58"),a("0c7c")),O=Object(D["a"])(_,i,s,!1,null,"18f143d6",null);t["a"]=O.exports},e76a:function(e,t,a){"use strict";a("4768")},e7df:function(e,t,a){},e9b0:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collaborate-history"},[a("div",{staticClass:"history-list"},e._l(e.collaborateHistoryList,(function(t,i){return a("div",{key:i,staticClass:"history-item"},[a("div",{staticClass:"history-title"},[a("div",{staticClass:"created-time"},[a("a-icon",{attrs:{type:"plus-circle"}}),a("div",{staticClass:"time-text"},[e._v(" "+e._s(e._f("dayjs")(t.createdTime))+" ")])],1),a("div",{staticClass:"restore"},[a("div",{staticClass:"restore-action",on:{click:function(a){return e.handleRestoreHistory(t.content)}}},[e._v("Restore")])])]),a("div",{staticClass:"history-detail-list"},[t.isCache?[a("div",{staticClass:"history-detail-item"},[a("div",{staticClass:"user-name"},[e._v(" "+e._s(e.$store.getters.userInfo.email)+" ")]),a("div",{staticClass:"form-field",staticStyle:{"margin-left":"100px"}},[e._v(" Cache offline "),a("a-badge",{attrs:{status:"success"}})],1)])]:e._l(t.historyData,(function(t,i){return a("div",{key:i,staticClass:"history-detail-item"},[a("div",{staticClass:"user-name"},[e._v(" "+e._s(t.createdBy)+" ")]),a("div",{staticClass:"action"},[e._v(" Modified ")]),a("div",{staticClass:"form-field"},[e._v(" "+e._s(e.getLabelShow(t))+" ")])])}))],2)])})),0)])},s=[],n=a("5530"),o=(a("a9e3"),a("774b")),r=a("2f62"),l=a("3f76"),c={name:"CollaborateHistory",props:{historyList:{type:Array,default:function(){return[]}},sourceType:{type:Number,default:null}},data:function(){return{collaborateHistoryList:[]}},computed:Object(n["a"])(Object(n["a"])({},Object(r["e"])({formConfigData:function(e){return e.formConfigData}})),{},{getLabelShow:function(){return function(e){var t=this.$store.getters.formConfigData,a=this.sourceType===l["e"].task?t.taskFieldMap:t.planFieldMap;return a.customTags="Select Tags",a.yearList="Grade",a.subjectList="Subject",a.curriculumId="Curriculum",a.hasOwnProperty(e.fieldName)?a[e.fieldName]:e.fieldName}}}),created:function(){if(this.$logger.info("CollaborateHistory created",this.historyList),this.collaborateHistoryList=this.historyList,this.collaborateHistoryList.length>0){var e={},t=JSON.parse(this.collaborateHistoryList[0].content),a=o["a"].getFormContentLocal(t.id,t.type);a&&(e.createdTime=a.updateTime,e.isCache=!0,e.content=a,this.collaborateHistoryList.unshift(e))}},methods:{handleRestoreHistory:function(e){this.$logger.info("handleRestoreHistory",e),e instanceof Object?this.$emit("restore",e):this.$emit("restore",JSON.parse(e))}}},d=c,u=(a("69e4"),a("0c7c")),h=Object(u["a"])(d,i,s,!1,null,"99173834",null);t["a"]=h.exports},ea0c:function(e,t,a){"use strict";a("172e")},ed14:function(e,t,a){},ed18:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-reviews"},[!e.myReviews&&"teacher"!==e.role||e.footerBottom?e._e():a("a-space",{staticClass:"reviews-opt"},["student"!==e.role||e.isEdit?e._e():a("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!0)}}},[e._v("Edit Review")]),"teacher"!==e.role||e.myReviews||e.isEdit||!e.showCreate?e._e():a("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!0)}}},[e._v("Leave a Review")]),e.isEdit?a("a-button",{attrs:{type:"link"},on:{click:function(){return e.triggerEdit(!1)}}},[e._v("Cancel")]):e._e(),e.isEdit?a("a-button",{attrs:{type:"primary"},on:{click:e.handleSaveMyReview}},[e._v(e._s(e.myReviews?"Update":"Send"))]):e._e()],1),"student"===e.role?a("a-spin",{attrs:{spinning:e.subLoading}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"reviews-edit"},[a("div",{staticClass:"reviews-edit__check"},[a("div",[a("label",[e._v("Difficulty Level")]),a("a-rate",{staticClass:"rate-bar-con",attrs:{count:3,tooltips:e.reviewsText,allowClear:!1},model:{value:e.subForm.reviewsLabel,callback:function(t){e.$set(e.subForm,"reviewsLabel",t)},expression:"subForm.reviewsLabel"}},[a("div",{attrs:{slot:"character"},slot:"character"},[a("div",{staticClass:"rate-bar"})])])],1),a("div",[a("label",[e._v("Overall review")]),a("a-rate",{attrs:{allowClear:!1},model:{value:e.subForm.reviewsScore,callback:function(t){e.$set(e.subForm,"reviewsScore",t)},expression:"subForm.reviewsScore"}})],1)]),a("div",{staticClass:"reviews-edit__text"},[a("a-textarea",{ref:"reviewsNotes",attrs:{placeholder:"Enter your reviews......","auto-size":{minRows:4,maxRows:6}},model:{value:e.subForm.reviewsNotes,callback:function(t){e.$set(e.subForm,"reviewsNotes",t)},expression:"subForm.reviewsNotes"}})],1)])]):e._e(),"teacher"===e.role?a("a-spin",{attrs:{spinning:e.subLoading}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"reviews-edit"},[a("div",{staticClass:"reviews-edit__check"},[a("div",[a("a-tooltip",{attrs:{title:"Overall review"}},[a("label",[e._v("Overall review")])]),a("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.OVERALL,allowClear:!1},model:{value:e.subForm.overall,callback:function(t){e.$set(e.subForm,"overall",t)},expression:"subForm.overall"}})],1),a("div",[a("a-tooltip",{attrs:{title:"Students engagement"}},[a("label",[e._v("Students engagement")])]),a("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.ENGAGEMENT,allowClear:!1},model:{value:e.subForm.studentsEngagement,callback:function(t){e.$set(e.subForm,"studentsEngagement",t)},expression:"subForm.studentsEngagement"}})],1)]),a("div",{staticClass:"reviews-edit__check"},[a("div",[a("a-tooltip",{attrs:{title:"Effectiveness of teaching & learning"}},[a("label",[e._v("Effectiveness of teaching & learning")])]),a("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.EFFETIVENESS,allowClear:!1},model:{value:e.subForm.effectiveness,callback:function(t){e.$set(e.subForm,"effectiveness",t)},expression:"subForm.effectiveness"}})],1),a("div",[a("a-tooltip",{attrs:{title:"Quality of the content"}},[a("label",[e._v("Quality of the content")])]),a("a-rate",{attrs:{tooltips:e.RATE_TOOLTIPS.QUALITY,allowClear:!1},model:{value:e.subForm.quality,callback:function(t){e.$set(e.subForm,"quality",t)},expression:"subForm.quality"}})],1)]),a("div",{staticClass:"reviews-edit__check"},[a("div",[a("a-checkbox",{model:{value:e.subForm.learningDistance,callback:function(t){e.$set(e.subForm,"learningDistance",t)},expression:"subForm.learningDistance"}},[e._v(" Distance learning ")])],1),a("div",[a("a-checkbox",{model:{value:e.subForm.learningHome,callback:function(t){e.$set(e.subForm,"learningHome",t)},expression:"subForm.learningHome"}},[e._v(" At home learning ")])],1),a("div",[a("a-checkbox",{model:{value:e.subForm.learningClass,callback:function(t){e.$set(e.subForm,"learningClass",t)},expression:"subForm.learningClass"}},[e._v(" In-class learning ")])],1)]),a("div",{staticClass:"reviews-edit__text"},[a("a-textarea",{ref:"reviewsNotes",attrs:{placeholder:"Enter your reviews......","auto-size":{minRows:4,maxRows:6}},model:{value:e.subForm.reviewsNotes,callback:function(t){e.$set(e.subForm,"reviewsNotes",t)},expression:"subForm.reviewsNotes"}})],1),a("div",{staticClass:"reviews-edit__check",staticStyle:{"border-top":"0","border-bottom":"1px solid #d9d9d9"}},[a("a-checkbox",{model:{value:e.subForm.updatedMsg,callback:function(t){e.$set(e.subForm,"updatedMsg",t)},expression:"subForm.updatedMsg"}},[e._v(" Let me know if this resource is updated ")])],1)])]):e._e(),(e.myReviews||"teacher"===e.role)&&e.footerBottom?a("a-space",{staticClass:"reviews-footer"},[a("a-button",{on:{click:e.handleCancel}},[e._v("Cancel")]),a("a-button",{attrs:{type:"primary"},on:{click:e.handleSaveMyReview}},[e._v("Send")])],1):e._e()],1)},s=[],n=a("5530"),o=(a("a9e3"),a("f93e")),r={name:"ReviewsEdit",props:{footerBottom:{type:Boolean,default:!1},role:{type:String,default:"student"},myReviews:{type:Object,default:null},canCreate:{type:Boolean,default:!0}},watch:{canCreate:function(e){this.showCreate=e,!this.footerBottom&&("teacher"!==this.role||!this.showCreate||this.myReviews&&this.myReviews.id)||(this.isEdit=!0)},myReviews:{handler:function(e){this.subForm=e?Object(n["a"])({},e):Object(n["a"])({},this.init),this.footerBottom||"teacher"===this.role&&this.showCreate&&(!e||!e.id)?this.isEdit=!0:this.isEdit=!1},immediate:!0}},data:function(){return{subLoading:!1,showCreate:this.canCreate,RATE_TOOLTIPS:o["y"],isEdit:!1,reviewsText:["Easy","Intermediate","Difficult"],subForm:this.myReviews,init:{reviewsLabel:1,reviewsNotes:"",reviewsScore:1,overall:1,effectiveness:1,quality:1,studentsEngagement:1,learningClass:!1,learningDistance:!1,learningHome:!1,updatedMsg:!0}}},mounted:function(){!this.footerBottom&&("teacher"!==this.role||!this.showCreate||this.myReviews&&this.myReviews.id)||(this.isEdit=!0)},methods:{handleSaveMyReview:function(){if("student"!==this.role||this.myReviews){this.subLoading=!0;var e=Object(n["a"])(Object(n["a"])({},this.subForm),{},{learningClass:Number(this.subForm.learningClass),learningDistance:Number(this.subForm.learningDistance),learningHome:Number(this.subForm.learningHome),updatedMsg:Number(this.subForm.updatedMsg)});this.$emit("submit",e)}},handleCancel:function(){this.$emit("cancel")},triggerLoading:function(e){this.subLoading=e},triggerIsEdit:function(e){this.isEdit=e},triggerEdit:function(e){var t=this;this.isEdit=e,this.$nextTick((function(){e&&t.$refs.reviewsNotes&&t.$refs.reviewsNotes.focus()}))}}},l=r,c=(a("11fa"),a("0c7c")),d=Object(c["a"])(l,i,s,!1,null,"0bba4ebc",null);t["a"]=d.exports},ed70:function(e,t){e.exports="data:image/png;base64,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"},eedc:function(e,t,a){},f2aa:function(e,t,a){},f3d1:function(e,t,a){"use strict";a("247c")},f424:function(e,t,a){},f5c8:function(e,t,a){"use strict";a("8480")},f5f6:function(e,t,a){"use strict";a("98e2")},f637:function(e,t,a){},f736:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-library",attrs:{id:"new-library"}},[a("div",{staticClass:"navigation"},[e._v(" Browse More ")]),a("div",{staticClass:"main"},[e.treeItemData.length>0?a("div",{staticClass:"tree-navigation"},[a("a-directory-tree",{staticClass:"tree",attrs:{"default-expand-all":"",icon:e.getIcon,"tree-data":e.treeItemData,"replace-fields":{children:"children",title:"name",key:"id"}},on:{select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(t){return[a("p",[a("span",[e._v(e._s(t.title))]),a("span",{staticStyle:{"margin-left":"40px",color:"orange"}},[e._v(e._s(t.title))])])]}}],null,!1,3266010875)}),a("a-spin",{directives:[{name:"show",rawName:"v-show",value:e.loadingTree,expression:"loadingTree"}],staticClass:"spin-loading"})],1):e._e(),a("div",{staticClass:"content-list"},[a("div",{staticClass:"content-list-wrapper"},[a("div",{staticClass:"content-header"},[a("div",{staticClass:"name"},[a("a-page-header",{attrs:{title:"Label classification"}})],1)]),a("div",{staticClass:"content-list"},[a("a-divider"),e.tagValues.length>0?[a("div",{staticClass:"skt-tag-list"},e._l(e.tagValues,(function(t){return a("div",{key:t.id,staticClass:"skt-tag-item"},[a("a-badge",[a("a-tag",{staticClass:"tag-item",class:{"tag-item":!0,active:e.selectedTags.indexOf(t.name)>-1},on:{click:function(a){return e.selectTag(t)}}},[e._v(" "+e._s(t.name)+" ")]),e.selectedTags.indexOf(t.name)>-1?a("div",{staticClass:"icon-wrapper"},[a("a-icon",{staticClass:"checked-icon",style:{fontSize:"18px",color:"#ffffff"},attrs:{type:"check-circle"}})],1):e._e()],1)],1)})),0)]:[a("div",{staticClass:"content-empty"},[a("a-empty")],1)]],2),a("a-spin",{directives:[{name:"show",rawName:"v-show",value:e.loadingContent,expression:"loadingContent"}],staticClass:"spin-content-loading"})],1)])])])},s=[],n=(a("159b"),a("b0c0"),a("a434"),a("d28d")),o={name:"TagBrowser",components:{},data:function(){return{treeItemData:[],loadingContent:!1,loadingTree:!1,firstLoad:!1,tagValues:[],selectedTags:[],selectedTagsList:[]}},props:{rootKey:{type:String,default:""},tagList:{type:Array,default:function(){return[]}}},created:function(){var e=this;this.loadingTree=!0,Object(n["f"])({key:this.rootKey}).then((function(t){e.$logger.info("TagTree response",t.result),t.success?(e.treeItemData=t.result.children,0===e.treeItemData.length&&e.onSelect([t.result.id]),e.treeItemData.forEach((function(t){t.scopedSlots={title:"title"},e.loop(t)}))):e.$message.error(t.message),e.loadingTree=!1})),this.tagList.forEach((function(t){e.selectedTags.push(t.name),e.selectedTagsList.push(t)}))},mounted:function(){},methods:{onSelect:function(e,t){var a=this;this.loadingContent=!0,Object(n["d"])({tagId:e[0]}).then((function(e){a.$logger.info("GetGlobalTagKeywords response",e.result),e.success?a.tagValues=e.result:a.$message.error(e.message),a.loadingContent=!1}))},onExpand:function(){},selectTag:function(e){e.parentName=this.rootKey;var t=this.selectedTags.indexOf(e.name);e.isGlobal=!0,t>-1?(this.selectedTags.splice(t,1),this.selectedTagsList.splice(e,1)):(this.selectedTags.push(e.name),this.selectedTagsList.push(e)),this.$emit("add-global-tag",this.selectedTagsList)},getIcon:function(e){var t=this.$createElement,a=e.expanded;return t("a-icon",{attrs:{type:a?"folder-open":"folder"}})},loop:function(e){if(e.selectable=!1,e.children&&e.children.length>0)for(var t in e.children)this.loop(e.children[t]);else e.children&&0===e.children.length&&(e.selectable=!0)}}},r=o,l=(a("49e6"),a("0c7c")),c=Object(l["a"])(r,i,s,!1,null,"2c1ef957",null);t["a"]=c.exports},f7b2:function(e,t){e.exports="data:image/png;base64,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"},f8935:function(e,t,a){var i=a("b2b7");e.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"23.635",viewBox:"0 0 25 23.635"},children:[{tag:"g",attrsMap:{id:"蓝色文件夹",transform:"translate(-70.998 -72.533)"},children:[{tag:"path",attrsMap:{id:"路径_393","data-name":"路径 393",style:"fill: #4273f6;",class:"cls-1",d:"M93.425,96.167h-15.9A4.639,4.639,0,0,1,73,91.443V77.256a4.636,4.636,0,0,1,4.519-4.723l3.19.056a2.244,2.244,0,0,1,1.517.6l2.386,2.244a2.238,2.238,0,0,0,1.517.6h7.3a4.637,4.637,0,0,1,4.519,4.723v10.7a4.642,4.642,0,0,1-4.521,4.725Z",transform:"translate(-1.949)"}},{tag:"path",attrsMap:{id:"路径_394","data-name":"路径 394",style:"fill: #465cdb;\n        opacity: 0.69;",class:"cls-2",d:"M92.217,350.112H78.981a5.913,5.913,0,0,1-5.85-5.941V335.8a1.288,1.288,0,0,1,1.278-1.3H96.788a1.289,1.289,0,0,1,1.278,1.3v8.365a5.908,5.908,0,0,1-5.847,5.942Z",transform:"translate(-2.073 -254.958)"}},{tag:"path",attrsMap:{id:"路径_395","data-name":"路径 395",style:" fill: #fff;",class:"cls-3",d:"M177.619,318.685H160.68a1.6,1.6,0,0,1-1.575-1.606v-8.956a1.6,1.6,0,0,1,1.575-1.606h16.94a1.6,1.6,0,0,1,1.575,1.606v8.954a1.6,1.6,0,0,1-1.575,1.61Z",transform:"translate(-85.625 -227.596)"}},{tag:"path",attrsMap:{id:"路径_396","data-name":"路径 396",style:" fill: #fff; opacity: 0.16;",class:"cls-4",d:"M179.624,299.657h-16.94a1.6,1.6,0,0,1-1.575-1.606v-8.957a1.6,1.6,0,0,1,1.575-1.606h16.94a1.6,1.6,0,0,1,1.575,1.606v8.954A1.6,1.6,0,0,1,179.624,299.657Z",transform:"translate(-87.573 -209.086)"}},{tag:"path",attrsMap:{id:"路径_397","data-name":"路径 397",style:"fill: #4273f6;",class:"cls-1",d:"M93.371,418.174h-15.8A4.621,4.621,0,0,1,73,413.532V403.5H97.94v10.033a4.616,4.616,0,0,1-4.569,4.643Z",transform:"translate(-1.948 -322.007)"}},{tag:"path",attrsMap:{id:"路径_398","data-name":"路径 398",style:"fill: #5066fb;\n        opacity: 0.14;",class:"cls-5",d:"M91.367,747.612H75.57A4.621,4.621,0,0,1,71,742.97v-.484H95.936v.484a4.616,4.616,0,0,1-4.569,4.643Z",transform:"translate(0 -651.445)"}},{tag:"path",attrsMap:{id:"路径_399","data-name":"路径 399",style:" fill: #5d75ce;\n        opacity: 0.52;",class:"cls-6",d:"M347.708,457.546h-5.143a2.043,2.043,0,1,1,0-4.085h5.14a2.043,2.043,0,1,1,0,4.085Z",transform:"translate(-262.114 -370.394)"}},{tag:"path",attrsMap:{id:"路径_400","data-name":"路径 400",style:" fill: #ffd629;",class:"cls-7",d:"M372.261,471.719H367.7a1.619,1.619,0,1,1,0-3.239h4.561a1.619,1.619,0,0,1,0,3.239Z",transform:"translate(-286.952 -384.99)"}}]}]})}},fa0b:function(e,t,a){"use strict";a("7286")},fa3a:function(e,t,a){"use strict";a("58ef")},faaa:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dir-icon"},["blue"===e.dirType?i("blue-dir-svg",{staticClass:"blue"}):"yellow"===e.dirType?i("yellow-dir-svg",{staticClass:"yellow"}):"opened"===e.dirType?i("open-dir-svg",{staticClass:"opened"}):e.contentType===e.typeMap.task?i("img",{attrs:{src:a("ed70")}}):e.contentType===e.typeMap["unit-plan"]?i("img",{attrs:{src:a("27f0")}}):(e.contentType,e.typeMap.evaluation,i("img",{attrs:{src:a("2ae5")}}))],1)},s=[],n=(a("a9e3"),a("f8935")),o=a.n(n),r=a("20de"),l=a.n(r),c=a("6f6b"),d=a.n(c),u=a("3f76"),h={name:"DirIcon",components:{BlueDirSvg:o.a,YellowDirSvg:l.a,OpenDirSvg:d.a},props:{dirType:{type:String,default:null},contentType:{type:Number,default:null}},data:function(){return{typeMap:u["e"]}}},p=h,m=(a("c164"),a("0c7c")),g=Object(m["a"])(p,i,s,!1,null,"1cf1c170",null);t["a"]=g.exports},fb02:function(e,t,a){},fdf4:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collaborate-comment-panel"},[a("div",{staticClass:"panel-header"},[a("div",[e.formatCommentList.length>0?a("a-tooltip",{attrs:{title:"Add comment",placement:"right"}},[a("add-green-icon",{staticClass:"add-icon",on:{click:e.addRootComment}})],1):e._e()],1),a("div",[a("a-icon",{style:{color:"red",fontSize:"18px",cursor:"pointer"},attrs:{type:"close"},on:{click:function(t){return e.$emit("cancel-comment")}}})],1)]),e.addRoot?a("div",{staticClass:"add-comment-wrapper",staticStyle:{"box-shadow":"0px 3px 6px rgb(0 0 0 / 16%)"}},[a("div",{staticClass:"comment-user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.$store.getters.avatar}})]),a("div",{staticClass:"user-name"},[e._v(" "+e._s(e.$store.getters.nickname)+" ")])]),a("div",{staticClass:"comment-input-wrapper"},[a("div",{staticClass:"comment-input"},[a("input-with-button",{attrs:{"collaborate-user-list":e.collaborateUserList,"comment-item":e.newComment,sending:e.newComment.sendLoading},on:{cancelComment:e.cancelComment,comment:e.handleComment}})],1)])]):e._e(),e._l(e.formatCommentList,(function(t,i){return a("div",{key:i,staticClass:"root-comment",staticStyle:{"box-shadow":"rgb(0 0 0 / 16%) 0px 3px 6px"}},[a("div",{staticClass:"comment-record-wrapper",staticStyle:{"box-shadow":"0px 3px 6px rgb(0 0 0 / 16%)"}},[t.deleteThread?a("div",{staticClass:"delete-thread-mask"},[a("div",{staticClass:"delete-group"},[a("div",{staticStyle:{color:"#fff",margin:"5px"}},[e._v(" Delete this comment Thread? ")]),a("div",{staticClass:"delete-group-button"},[a("div",{staticClass:"upload-text"},[a("a-button",{attrs:{shape:"round",type:"primary"},on:{click:function(a){return e.handleDeleteCommentRoot(t,i)}}},[e._v("Delete")])],1),a("div",{staticClass:"upload-text"},[a("a-button",{attrs:{shape:"round"},on:{click:function(t){return e.cancelDeleteThread(i)}}},[e._v("Cancel")])],1)])])]):e._e(),a("div",{key:-1,staticClass:"record-list"},[a("div",{staticClass:"record-item"},[[a("div",{directives:[{name:"show",rawName:"v-show",value:t.username===e.$store.getters.userInfo.username,expression:"rootComment.username === $store.getters.userInfo.username"}],staticClass:"record-action"},[a("div",{staticStyle:{"margin-right":"20px","font-size":"18px","margin-top":"8px"},on:{click:function(a){return e.handleMarked(t,i)}}},[a("a-tooltip",{attrs:{placement:"bottom",title:"Marked as resolved and hide this discussion"}},[a("a-icon",{attrs:{type:"check"}})],1)],1),a("div",[a("a-dropdown",[a("a-icon",{staticStyle:{"font-size":"20px","margin-top":"10px"},attrs:{type:"more"}}),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(a){return e.handleDeleteRootCommentConfirm(t,i,!0)}}},[a("a-icon",{attrs:{type:"delete",theme:"filled"}}),e._v(" Delete ")],1)]),a("a-menu-item",[a("a",{on:{click:function(a){return e.handleEditCommentRoot(t,i)}}},[a("a-icon",{attrs:{type:"edit",theme:"filled"}}),e._v(" Edit ")],1)])],1)],1)],1)]),a("div",{staticClass:"comment-user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.avatar}})]),a("div",{staticClass:"user-name"},[a("div",{staticClass:"name-text"},[e._v(" "+e._s(t.nickname))]),a("div",{staticClass:"time-text"},[e._v(" "+e._s(e._f("dayComment")(t.createdTime)))])])]),t.editing?e._e():a("div",{staticClass:"comment-detail"},[a("div",{staticClass:"comment-text"},[e._v(" "+e._s(t.content)+" ")])]),t.editing?a("div",{staticClass:"comment-input-wrapper"},[a("div",{staticClass:"comment-input"},[a("input-reply-button",{attrs:{"collaborate-user-list":e.collaborateUserList,"comment-item":t,sending:t.sendLoading},on:{send:e.handleSend,cancel:e.handleCancel}})],1)]):e._e()]],2)]),e._l(t.subCommentList,(function(t,s){return a("div",{key:s,staticClass:"record-list"},[t.delete?a("div",{staticClass:"delete-mask"},[a("div",{staticClass:"delete-group"},[a("div",{staticStyle:{color:"#fff",margin:"5px"}},[e._v(" Delete this comment? ")]),a("div",{staticClass:"delete-group-button"},[a("div",{staticClass:"upload-text"},[a("a-button",{attrs:{shape:"round",type:"primary"},on:{click:function(a){return e.handleDeleteComment(t,s,i)}}},[e._v("Delete")])],1),a("div",{staticClass:"upload-text"},[a("a-button",{attrs:{shape:"round"},on:{click:function(a){return e.handleDeleteCommentConfirm(t,s,i,!1)}}},[e._v("Cancel")])],1)])])]):e._e(),a("div",{staticClass:"record-item"},[[a("div",{directives:[{name:"show",rawName:"v-show",value:t.username===e.$store.getters.userInfo.username,expression:"commentItem.username === $store.getters.userInfo.username"}],staticClass:"record-action"},[a("div",[a("a-dropdown",[a("a-icon",{staticStyle:{"font-size":"20px","margin-top":"10px"},attrs:{type:"more"}}),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(a){return e.handleDeleteCommentConfirm(t,s,i,!0)}}},[a("a-icon",{attrs:{type:"delete",theme:"filled"}}),e._v(" Delete ")],1)]),a("a-menu-item",[a("a",{on:{click:function(a){return e.handleEditComment(t,s,i)}}},[a("a-icon",{attrs:{type:"edit",theme:"filled"}}),e._v(" Edit ")],1)])],1)],1)],1)]),a("div",{staticClass:"comment-user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.avatar}})]),a("div",{staticClass:"user-name"},[a("div",{staticClass:"name-text"},[e._v(" "+e._s(t.nickname))]),a("div",{staticClass:"time-text"},[e._v(" "+e._s(e._f("dayComment")(t.createdTime)))])])]),t.editing?e._e():a("div",{staticClass:"comment-detail"},[a("div",{staticClass:"comment-text"},[e._v(" "+e._s(t.content)+" ")])]),t.editing?a("div",{staticClass:"comment-input-wrapper"},[a("div",{staticClass:"comment-input"},[a("input-reply-button",{attrs:{"collaborate-user-list":e.collaborateUserList,"comment-item":t,sending:t.sendLoading},on:{send:e.handleSend,cancel:e.handleCancel}})],1)]):e._e()]],2)])})),a("div",{staticClass:"comment-input-wrapper",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"comment-input"},[a("input-reply-button",{attrs:{"collaborate-user-list":e.collaborateUserList,sending:e.newComments[i].sendLoading,"comment-item":e.newComments[i]},on:{send:e.handleSend,cancel:e.handleCancelNewComment,focusInput:e.handleFocusInput}})],1)])],2)])}))],2)},s=[],n=(a("a9e3"),a("159b"),a("e1f0")),o=a("d6ea"),r=a.n(o),l={name:"CollaborateCommentPanel",components:{AddGreenIcon:r.a},mixins:[n["a"]],props:{commentList:{type:Array,default:function(){return[]}},collaborateUserList:{type:Array,default:function(){return[]}},sourceId:{type:String,default:null},sourceType:{type:Number,default:null},fieldName:{type:String,default:null}},data:function(){return{}},watch:{commentList:function(e){var t=this;this.$logger.info("CollaborateCommentPanel commentList",e),this.rawCommentList=[],e.forEach((function(e){e.sendLoading=!1,e.isDelete||t.fieldName!==e.fieldName||t.rawCommentList.push(e)})),this.formatCommentList=this.rawCommentList,this.addRoot=0===this.formatCommentList.length,this.$logger.info("formatCommentList",this.formatCommentList),this.formatNewReply()}},computed:{},created:function(){var e=this;this.$logger.info("CollaborateCommentPanel commentList",this.commentList),this.originalCommentList=this.commentList,this.rawCommentList=[],this.commentList.forEach((function(t){t.sendLoading=!1,t.isDelete||e.fieldName!==t.fieldName||e.rawCommentList.push(t)})),this.$logger.info("rawCommentList",this.rawCommentList),this.formatCommentList=this.rawCommentList,this.addRoot=0===this.formatCommentList.length,this.$logger.info("formatCommentList",this.formatCommentList),this.formatNewReply()},methods:{addRootComment:function(){this.addRoot=!0}}},c=l,d=(a("7b6b"),a("0c7c")),u=Object(d["a"])(c,i,s,!1,null,"331f9655",null);t["a"]=u.exports},ff58:function(e,t,a){"use strict";a("870d")}}]);