(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f3d3d40"],{"0bb4":function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* unused harmony export noticeAPIUrl */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EditCementSend; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return ListCementByUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return NoticeQueryById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return ListByMessage; });\n/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"b775\");\n\nvar noticeAPIUrl = {\n  listCementByUser: '/classcipe/sys/annountCement/listByUser',\n  editCementSend: '/classcipe/sys/sysAnnouncementSend/editByAnntIdAndUserId',\n  NoticeQueryById: '/classcipe/sys/annountCement/queryById',\n  listByMessage: '/classcipe/sys/annountCement/listByMessage'\n};\nfunction EditCementSend(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: noticeAPIUrl.editCementSend,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\nfunction ListCementByUser(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: noticeAPIUrl.listCementByUser,\n    method: 'get',\n    params: parameter\n  });\n}\nfunction NoticeQueryById(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: noticeAPIUrl.NoticeQueryById,\n    method: 'get',\n    params: parameter\n  });\n}\nfunction ListByMessage(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: noticeAPIUrl.listByMessage,\n    method: 'get',\n    params: parameter\n  });\n}\n\n//# sourceURL=webpack:///./src/api/notice.js?")},1778:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* unused harmony export LibraryV2Url */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return librarySearch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getLibraryRecommend; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getLibraryResource; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return queryAllResource; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return queryLibraryResource; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getLibraryPDContent; });\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"ac1f\");\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"b775\");\n\n\nvar LibraryV2Url = {\n  search: '/classcipe/api/v2/library/search',\n  getLibraryRecommend: '/classcipe/api/v2/library/getLibraryRecommend',\n  getLibraryResource: '/classcipe/api/v2/library/getLibraryResource',\n  queryAllResource: '/classcipe/api/v2/library/queryAllResource',\n  queryLibraryResource: '/classcipe/api/v2/library/queryLibraryResource',\n  getLibraryPDContent: '/classcipe/api/v2/library/getLibraryPDContent'\n};\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction librarySearch(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"])({\n    url: LibraryV2Url.search,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction getLibraryRecommend(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"])({\n    url: LibraryV2Url.getLibraryRecommend,\n    method: 'get',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction getLibraryResource(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"])({\n    url: LibraryV2Url.getLibraryResource,\n    method: 'get',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction queryAllResource(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"])({\n    url: LibraryV2Url.queryAllResource,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n/**\n * edit slide推荐的library和resource内容\n * @param parameter\n * @returns {AxiosPromise}\n */\n\nfunction queryLibraryResource(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"])({\n    url: LibraryV2Url.queryLibraryResource,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n/**\n * 推荐pd\n * @param parameter\n * @returns {AxiosPromise}\n */\n\nfunction getLibraryPDContent(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"])({\n    url: LibraryV2Url.getLibraryPDContent,\n    method: 'get',\n    params: parameter\n  });\n}\n\n//# sourceURL=webpack:///./src/api/v2/library.js?")},3881:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"ac86b5fa-vue-loader-template"}!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/components/User/UserProfileAvatar.vue?vue&type=template&id=e2c1ff82&scoped=true&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',{staticClass:"user-profile-avatar"},[_c(\'div\',{staticClass:"notification",on:{"click":_vm.handleToNotification}},[_c(\'a-badge\',{attrs:{"count":_vm.msgUnreadCount}},[_c(\'a-icon\',{style:({ fontSize: \'20px\', color: \'#999\' }),attrs:{"type":"mail"}})],1)],1),_c(\'a-dropdown\',{attrs:{"getPopupContainer":function (trigger) { return trigger.parentElement; }},model:{value:(_vm.dropVis),callback:function ($$v) {_vm.dropVis=$$v},expression:"dropVis"}},[(_vm.currentAvatar)?_c(\'a-avatar\',{attrs:{"src":_vm.currentAvatar}}):_c(\'img\',{attrs:{"src":__webpack_require__("4992")}}),_c(\'div\',{staticClass:"profile-info",attrs:{"slot":"overlay"},slot:"overlay"},[_c(\'div\',{staticClass:"base-info"},[_c(\'div\',{staticClass:"avatar"},[(_vm.currentAvatar)?_c(\'a-avatar\',{attrs:{"src":_vm.currentAvatar}}):_c(\'img\',{attrs:{"src":__webpack_require__("4992")}})],1),_c(\'div\',{staticClass:"base"},[_c(\'div\',{staticClass:"name"},[_vm._v(_vm._s(_vm.currentRealName))]),_c(\'div\',{staticClass:"email"},[_vm._v(_vm._s(_vm.$store.getters.userInfo.email))])])]),_c(\'div\',{staticClass:"storage-info"},[_c(\'a-progress\',{staticClass:"cc-storage-progress",attrs:{"percent":_vm.storageProgress,"show-info":false}}),_c(\'div\',{staticClass:"storage-info-text"},[_vm._v(" "+_vm._s(_vm._f("sizeFormat")(_vm.consumedSize))+" of "+_vm._s(_vm._f("sizeFormat")(_vm.totalSize))+" ")])],1),_c(\'div\',{staticClass:"plan-upgrade"},[_c(\'a-space\',[(_vm.info.planInfo && !_vm.info.planInfo.freeUsePlan)?_c(\'div\',{staticClass:"free-plan"},[_vm._v(_vm._s(_vm.info.planInfo.planName))]):_c(\'div\',{staticClass:"free-plan"},[_vm._v("Free plan")]),_c(\'div\',{staticClass:"upgrade"},[_vm._v("Upgrade")])]),(_vm.info.planInfo && _vm.info.planInfo.planUser && _vm.info.planInfo.planUser.planEndTime && !_vm.info.planInfo.freeUsePlan)?_c(\'div\',{staticClass:"plan-end"},[_vm._v(" Ends on "+_vm._s(_vm.info.planInfo.planUser.planEndTime)+" ")]):_vm._e()],1),_c(\'a-divider\',{staticClass:"cc-small-divider"}),_c(\'div\',{staticClass:"class-info"},[_c(\'div\',{staticClass:"class-list"},[_c(\'div\',{class:{\'class-item\': true, \'active\': _vm.userMode === _vm.USER_MODE.SELF},on:{"click":_vm.handleChangePersonal}},[_c(\'div\',{staticClass:"class-avatar"},[(_vm.$store.getters.userInfo.avatar)?_c(\'a-avatar\',{attrs:{"src":_vm.$store.getters.userInfo.avatar}}):_c(\'img\',{attrs:{"src":__webpack_require__("4992")}})],1),_c(\'div\',{staticClass:"class-base-info"},[_c(\'div\',{staticClass:"class-name"},[_vm._v("Personal")]),_c(\'div\',{staticClass:"class-updated-by"},[_vm._v(_vm._s(_vm.$store.getters.userInfo.firstname)+" "+_vm._s(_vm.$store.getters.userInfo.lastname))])])]),_vm._l((_vm.info.schoolList),function(schoolItem){return _c(\'div\',{key:schoolItem.id,class:{\'class-item\': true, \'active\': _vm.userMode === _vm.USER_MODE.SCHOOL && _vm.currentSchool.id === schoolItem.id},on:{"click":function($event){return _vm.handleChangeSchool(schoolItem)}}},[_c(\'div\',{staticClass:"class-avatar"},[(schoolItem.schoolUser.avatar)?_c(\'a-avatar\',{attrs:{"src":schoolItem.schoolUser.avatar}}):_c(\'a-avatar\',{staticStyle:{"color":"#f56a00","backgroundColor":"#fde3cf"}},[_vm._v(" "+_vm._s(schoolItem.schoolName ? schoolItem.schoolName[0].toUpperCase() : \'C\')+" ")])],1),_c(\'div\',{staticClass:"class-base-info"},[_c(\'div\',{staticClass:"class-name"},[_vm._v(_vm._s(schoolItem.schoolName))]),_c(\'div\',{staticClass:"class-updated-by"},[(schoolItem.schoolUser.firstname || schoolItem.schoolUser.lastname)?[_vm._v(" "+_vm._s(schoolItem.schoolUser.firstname)+" "+_vm._s(schoolItem.schoolUser.lastname)+" ")]:[_vm._v(" "+_vm._s(_vm.$store.getters.userInfo.firstname)+" "+_vm._s(_vm.$store.getters.userInfo.lastname)+" ")]],2)])])})],2)]),_c(\'a-divider\',{staticClass:"cc-small-divider"}),(_vm.isAuth)?_c(\'div\',{staticClass:"account profile-menu-item",on:{"click":_vm.handleToAccounts}},[(_vm.userMode === _vm.USER_MODE.SCHOOL)?[_vm._v(" School account ")]:[_vm._v(" Account ")]],2):_vm._e(),_c(\'div\',{staticClass:"logout profile-menu-item",on:{"click":_vm.handleLogout}},[_vm._v(" Logout ")])],1)],1)],1)}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/components/User/UserProfileAvatar.vue?vue&type=template&id=e2c1ff82&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__("1da1");\n\n// EXTERNAL MODULE: ./node_modules/ant-design-vue/es/modal/style/index.js\nvar style = __webpack_require__("cd17");\n\n// EXTERNAL MODULE: ./node_modules/ant-design-vue/es/modal/index.js + 12 modules\nvar modal = __webpack_require__("ed3b");\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__("5530");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__("d3b7");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__("ac1f");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__("5319");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js\nvar es_array_includes = __webpack_require__("caad");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.includes.js\nvar es_string_includes = __webpack_require__("2532");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js\nvar es_array_concat = __webpack_require__("99af");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js\nvar es_array_map = __webpack_require__("d81d");\n\n// EXTERNAL MODULE: ./node_modules/regenerator-runtime/runtime.js\nvar runtime = __webpack_require__("96cf");\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__("2f62");\n\n// EXTERNAL MODULE: ./src/api/user.js\nvar user = __webpack_require__("c24f");\n\n// EXTERNAL MODULE: ./src/store/mutation-types.js\nvar mutation_types = __webpack_require__("9fb0");\n\n// EXTERNAL MODULE: ./src/const/common.js\nvar common = __webpack_require__("f93e");\n\n// EXTERNAL MODULE: ./src/const/role.js\nvar role = __webpack_require__("6757");\n\n// EXTERNAL MODULE: ./src/api/notice.js\nvar notice = __webpack_require__("0bb4");\n\n// EXTERNAL MODULE: ./src/api/academicSettingCurriculum.js\nvar academicSettingCurriculum = __webpack_require__("8ee6");\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/components/User/UserProfileAvatar.vue?vue&type=script&lang=js&\n\n\n\n\n\n\n\n\n\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n/* harmony default export */ var UserProfileAvatarvue_type_script_lang_js_ = ({\n  name: \'UserProfileAvatar\',\n  data: function data() {\n    return {\n      // consumedSize: 102400000,\n      // totalSize: 1024 * 1024 * 1024,\n      unit: 1024 * 1024 * 1024,\n      schoolUserRole: role["a" /* SchoolUserRole */],\n      USER_MODE: common["U" /* USER_MODE */],\n      msg1Count: \'0\',\n      msg2Count: \'0\',\n      stopTimer: false,\n      dropVis: false\n    };\n  },\n  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["e" /* mapState */])({\n    info: function info(state) {\n      return state.user.info;\n    },\n    currentSchool: function currentSchool(state) {\n      return state.user.currentSchool;\n    },\n    userMode: function userMode(state) {\n      return state.app.userMode;\n    },\n    msgUnreadCount: function msgUnreadCount(state) {\n      return state.websocket.msgUnreadCount;\n    }\n  })), {}, {\n    msgTotal: function msgTotal() {\n      return parseInt(this.msg1Count) + parseInt(this.msg2Count);\n    },\n    consumedSize: function consumedSize() {\n      return this.userMode === common["U" /* USER_MODE */].SELF ? this.info.usedSpace * 1024 : this.currentSchool.usedSpace * 1024;\n    },\n    totalSize: function totalSize() {\n      return this.info.planInfo ? this.info.planInfo.storageSpace * this.unit : this.unit;\n    },\n    storageProgress: function storageProgress() {\n      return Math.round(this.consumedSize / this.totalSize * 100);\n    },\n    isAuth: function isAuth() {\n      // if (this.userMode === USER_MODE.SELF) return true\n      // if (this.hasRolePermission(\'admin\') || this.hasRolePermission(\'homeroom teacher\') || this.hasRolePermission(\'subject coordinator\')) return true\n      // return false\n      return true;\n    },\n    currentAvatar: function currentAvatar() {\n      if (this.userMode === common["U" /* USER_MODE */].SELF) {\n        return this.info.avatar;\n      } else {\n        if (!this.currentSchool || !this.currentSchool.schoolUser || !this.currentSchool.schoolUser.avatar) {\n          return this.info.avatar;\n        }\n\n        return this.currentSchool.schoolUser.avatar;\n      }\n    },\n    currentRealName: function currentRealName() {\n      if (this.userMode === common["U" /* USER_MODE */].SELF) {\n        return this.info.firstname + \' \' + this.info.lastname;\n      } else {\n        // 没有昵称 默认个人身份下昵称\n        if (!this.currentSchool || !this.currentSchool.schoolUser) {\n          return this.info.firstname + \' \' + this.info.lastname;\n        }\n\n        if (!this.currentSchool.schoolUser.firstname && !this.currentSchool.schoolUser.lastname) {\n          return this.info.firstname + \' \' + this.info.lastname;\n        }\n\n        return this.currentSchool.schoolUser.firstname + \' \' + this.currentSchool.schoolUser.lastname;\n      }\n    }\n  }),\n  created: function created() {\n    this.initData();\n    this.hasSetCurriculum();\n  },\n  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["d" /* mapMutations */])([mutation_types["M" /* TOOGLE_USER_MODE */], \'SET_CURRENT_SCHOOL\'])), Object(vuex_esm["b" /* mapActions */])([\'GetClassList\'])), {}, {\n    timerFun: function timerFun() {\n      var _this = this;\n\n      this.stopTimer = false;\n      var myTimer = setInterval(function () {\n        // 停止定时器\n        if (_this.stopTimer) {\n          clearInterval(myTimer);\n          return;\n        }\n\n        _this.loadData();\n      }, 6000);\n    },\n    initData: function initData() {\n      var _this2 = this;\n\n      Object(notice["c" /* ListCementByUser */])().then(function (res) {\n        if (res.success) {\n          _this2.announcement1 = res.result.anntMsgList;\n          _this2.msg1Count = res.result.anntMsgTotal;\n\n          _this2.$store.commit(\'SET_UNREAD_COUNT\', _this2.msg1Count ? _this2.msg1Count : 0);\n\n          _this2.$store.commit(\'SET_SHARED_COUNT\', res.result.collaborate ? res.result.collaborate : 0);\n        }\n      }).catch(function (error) {\n        _this2.$logger.error(\'系统消息通知异常\', error);\n\n        _this2.stopTimer = true;\n\n        _this2.$logger.error(\'清理timer\');\n      });\n    },\n    handleToSettings: function handleToSettings() {\n      this.$router.push({\n        path: \'/account/settings\'\n      });\n    },\n    handleToAccounts: function handleToAccounts() {\n      this.$router.push({\n        path: \'/account/info\'\n      });\n    },\n    handleToNotification: function handleToNotification() {\n      this.$router.push({\n        path: \'/notification\'\n      });\n    },\n    handleLogout: function handleLogout(e) {\n      var _this3 = this;\n\n      modal["a" /* default */].confirm({\n        title: this.$t(\'layouts.usermenu.dialog.title\'),\n        content: this.$t(\'layouts.usermenu.dialog.content\'),\n        onOk: function () {\n          var _onOk = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return _this3.$store.dispatch(\'Logout\');\n\n                  case 2:\n                    _context.next = 4;\n                    return AppLogout(\'www\', null);\n\n                  case 4:\n                    location.href = \'/v2/login\';\n\n                  case 5:\n                  case "end":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          function onOk() {\n            return _onOk.apply(this, arguments);\n          }\n\n          return onOk;\n        }(),\n        onCancel: function onCancel() {}\n      });\n    },\n    handleChangePersonal: function handleChangePersonal() {\n      var _this4 = this;\n\n      // 后端记录当前用户是否是个人模式，在个人模式下后台设置school未空字符\n      Object(user["c" /* SwitchUserModeSchool */])({\n        isPersonal: true,\n        schoolId: \'\'\n      }).finally(function () {\n        _this4[mutation_types["M" /* TOOGLE_USER_MODE */]](common["U" /* USER_MODE */].SELF); // this.SET_CURRENT_SCHOOL(null)\n\n\n        _this4.GetClassList();\n\n        _this4.$router.replace(\'/teacher/main/created-by-me\');\n\n        _this4.$store.dispatch(\'GetInfo\').then(function (res) {\n          _this4.hasSetCurriculum();\n        });\n      });\n    },\n    handleChangeSchool: function handleChangeSchool(val) {\n      var _this5 = this;\n\n      var oldMode = this.userMode;\n      Object(user["c" /* SwitchUserModeSchool */])({\n        isPersonal: false,\n        schoolId: val.id\n      }).then(function (res) {\n        // 获取对应学校班级\n        _this5[mutation_types["M" /* TOOGLE_USER_MODE */]](common["U" /* USER_MODE */].SCHOOL); // const item = this.info.schoolList.find(item => item.id === val.id)\n        // this.SET_CURRENT_SCHOOL(item)\n\n\n        _this5.GetClassList(val.id);\n\n        if (oldMode === common["U" /* USER_MODE */].SELF) {\n          _this5.$router.replace(\'/teacher/main/created-by-me\');\n        }\n\n        _this5.$store.dispatch(\'GetInfo\').then(function (res) {\n          _this5.hasSetCurriculum();\n        });\n      });\n    },\n    hasSetCurriculum: function hasSetCurriculum() {\n      return; // getCurriculumBySchoolId({\n      //   schoolId: this.currentSchool.id\n      // }).then(res => {\n      //   if (res.code === 0) {\n      //     if (res.result && res.result.length > 0) {\n      //       if (res.result[0].gradeSettingInfo.length === 0) {\n      //         this.doConfirmGoCuriculum()\n      //       }\n      //     } else {\n      //       this.doConfirmGoCuriculum()\n      //     }\n      //   }\n      // })\n    },\n    doConfirmGoCuriculum: function doConfirmGoCuriculum() {\n      var _this6 = this;\n\n      if (this.userMode === common["U" /* USER_MODE */].SCHOOL) {\n        var isSchoolAdmin = this.currentSchool.roleNames.includes(\'Admin\');\n\n        if (!isSchoolAdmin) {\n          return;\n        }\n      }\n\n      var sessionKey = "CURICULUM_SET_".concat(this.userMode, "_").concat(this.currentSchool.id, "_").concat(this.info.id);\n      var isSet = sessionStorage.getItem(sessionKey);\n\n      if (!isSet) {\n        this.$confirm({\n          title: \'Curriculum Set\',\n          content: \'Please Set Curriculum first\',\n          centered: true,\n          onOk: function onOk() {\n            sessionStorage.setItem(sessionKey, 1);\n\n            _this6.$router.push(\'/manage/curriculum\');\n          },\n          onCancel: function onCancel() {}\n        });\n      }\n    },\n    hasRolePermission: function hasRolePermission(roleCode) {\n      var hasPerm = false;\n\n      if (this.userMode === common["U" /* USER_MODE */].SCHOOL && this.currentSchool.roleNames) {\n        var roleNames = this.currentSchool.roleNames.map(function (item) {\n          return item.toLowerCase();\n        });\n        hasPerm = roleNames.includes(roleCode);\n      }\n\n      return hasPerm;\n    }\n  })\n});\n// CONCATENATED MODULE: ./src/components/User/UserProfileAvatar.vue?vue&type=script&lang=js&\n /* harmony default export */ var User_UserProfileAvatarvue_type_script_lang_js_ = (UserProfileAvatarvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/components/User/UserProfileAvatar.vue?vue&type=style&index=0&id=e2c1ff82&lang=less&scoped=true&\nvar UserProfileAvatarvue_type_style_index_0_id_e2c1ff82_lang_less_scoped_true_ = __webpack_require__("d0a7");\n\n// EXTERNAL MODULE: ./node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__("0c7c");\n\n// CONCATENATED MODULE: ./src/components/User/UserProfileAvatar.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer["a" /* default */])(\n  User_UserProfileAvatarvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  "e2c1ff82",\n  null\n  \n)\n\n/* harmony default export */ var UserProfileAvatar = __webpack_exports__["a"] = (component.exports);\n\n//# sourceURL=webpack:///./src/components/User/UserProfileAvatar.vue_+_4_modules?')},4992:function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "img/default-avatar.db1c5445.png";\n\n//# sourceURL=webpack:///./src/assets/icons/library/default-avatar.png?')},9774:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_GlobalSearchInput_vue_vue_type_style_index_0_id_d3f54b0c_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("a730");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_GlobalSearchInput_vue_vue_type_style_index_0_id_d3f54b0c_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_GlobalSearchInput_vue_vue_type_style_index_0_id_d3f54b0c_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n//# sourceURL=webpack:///./src/components/GlobalSearch/GlobalSearchInput.vue?')},"980a":function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* unused harmony export pdContentAPIUrl */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PDContentAddOrUpdate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return PDContentQueryById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return PDContentDelete; });\n/* unused harmony export PDContentDeleteBatch */\n/* unused harmony export PDContentList */\n/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"b775\");\n\nvar pdContentAPIUrl = {\n  PDContentAddOrUpdate: '/classcipe/api/v2/pd/addOrUpdate',\n  PDContentQueryById: '/classcipe/api/v2/pd/queryById',\n  PDContentDelete: '/classcipe/api/v2/pd/delete',\n  PDContentDeleteBatch: '/classcipe/api/v2/pd/deleteBatch',\n  PDContentList: '/classcipe/api/v2/pd/list'\n};\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction PDContentAddOrUpdate(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: pdContentAPIUrl.PDContentAddOrUpdate,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction PDContentQueryById(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: pdContentAPIUrl.PDContentQueryById,\n    method: 'get',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction PDContentDelete(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: pdContentAPIUrl.PDContentDelete + '?id=' + parameter.id,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction PDContentDeleteBatch(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: pdContentAPIUrl.PDContentDeleteBatch,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction PDContentList(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: pdContentAPIUrl.PDContentList,\n    method: 'get',\n    params: parameter\n  });\n}\n\n//# sourceURL=webpack:///./src/api/pdContent.js?")},a730:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/components/GlobalSearch/GlobalSearchInput.vue?./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-2!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options")},b199:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"taskAPIUrl\", function() { return taskAPIUrl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskCreateTaskPPT\", function() { return TaskCreateTaskPPT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskCreateNewTaskPPT\", function() { return TaskCreateNewTaskPPT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskAddOrUpdate\", function() { return TaskAddOrUpdate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SplitTask\", function() { return SplitTask; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskQueryById\", function() { return TaskQueryById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskDelete\", function() { return TaskDelete; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getTaskBySessionId\", function() { return getTaskBySessionId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UpdateSlideEditing\", function() { return UpdateSlideEditing; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"QuerySubTask\", function() { return QuerySubTask; });\n/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"b775\");\n\nvar taskAPIUrl = {\n  createTaskPPT: '/classcipe/api/task/createTaskPPT',\n  createNewTaskPPT: '/classcipe/api/task/createNewTaskPPT',\n  addOrUpdate: '/classcipe/api/task/addOrUpdate',\n  delete: '/classcipe/api/task/delete',\n  deleteBatch: '/classcipe/api/task/deleteBatch',\n  list: '/classcipe/api/task/list',\n  queryById: '/classcipe/api/task/queryById',\n  splitTask: '/classcipe/api/task/spliteTask',\n  getTaskBySessonId: '/classcipe/api/task/getTaskBySessonId',\n  updateSlideEditing: '/classcipe/api/task/updateSlideEditing',\n  querySubTask: '/classcipe/api/task/querySubTask'\n};\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction TaskCreateTaskPPT(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: taskAPIUrl.createTaskPPT,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\nfunction TaskCreateNewTaskPPT(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: taskAPIUrl.createNewTaskPPT,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction TaskAddOrUpdate(parameter) {\n  delete parameter.yearList;\n  delete parameter.subjectList;\n  delete parameter.curriculumId;\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: taskAPIUrl.addOrUpdate,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\nfunction SplitTask(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: taskAPIUrl.splitTask,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction TaskQueryById(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: taskAPIUrl.queryById,\n    method: 'get',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction TaskDelete(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: taskAPIUrl.delete + '?id=' + parameter.id,\n    method: 'post',\n    data: parameter\n  });\n}\nfunction getTaskBySessionId(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: taskAPIUrl.getTaskBySessonId,\n    method: 'get',\n    params: parameter\n  });\n}\nfunction UpdateSlideEditing(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: taskAPIUrl.updateSlideEditing,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\nfunction QuerySubTask(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"d\"])({\n    url: taskAPIUrl.querySubTask,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n\n//# sourceURL=webpack:///./src/api/task.js?")},b570:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/components/User/UserProfileAvatar.vue?./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-2!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options")},c44c:function(module,exports,__webpack_require__){eval('\n    var runtime = __webpack_require__("b2b7")\n    module.exports = {\n      __esModule: true,\n      default: runtime.svgComponent({\n  "tag": "svg",\n  "attrsMap": {\n    "t": "1651919287086",\n    "class": "icon",\n    "viewBox": "0 0 1024 1024",\n    "version": "1.1",\n    "xmlns": "http://www.w3.org/2000/svg",\n    "p-id": "3862",\n    "xmlns:xlink": "http://www.w3.org/1999/xlink",\n    "width": "48",\n    "height": "48"\n  },\n  "children": [\n    {\n      "tag": "defs"\n    },\n    {\n      "tag": "path",\n      "attrsMap": {\n        "d": "M1011.699621 955.59682l-299.842879-300.13541a400.32681 400.32681 0 1 0-56.555731 56.75075l299.84288 300.086654a39.686521 39.686521 0 0 0 28.277865 11.701186 41.636719 41.636719 0 0 0 28.765415-11.701186 39.784031 39.784031 0 0 0-0.48755-56.701994zM80.480272 401.594439a320.807504 320.807504 0 1 1 320.807503 321.148788 321.295053 321.295053 0 0 1-320.807503-321.343808z",\n        "p-id": "3863"\n      }\n    }\n  ]\n})\n    }\n  \n\n//# sourceURL=webpack:///./src/assets/v2/icons/search.svg?')},c621:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* unused harmony export templateUrl */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return TemplatesGetTemplates; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return FilterTemplates; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return recommendTemplates; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return TemplatesGetPresentation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return TemplatesGetPageThumbnail; });\n/* unused harmony export TemplatesQueryById */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return TemplatesGetPublishedPresentation; });\n/* harmony import */ var _node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"1da1\");\n/* harmony import */ var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"96cf\");\n/* harmony import */ var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"b775\");\n\n\n\nvar templateUrl = {\n  getTemplates: '/classcipe/api/templates/getTemplates',\n  filterTemplates: '/classcipe/api/templates/filterTemplates',\n  recommendTemplates: '/classcipe/api/templates/recommendTemplates',\n  getPresentation: '/classcipe/api/templates/getPresentation',\n  getPublishedPresentation: '/classcipe/api/templates/getPublishedPresentation',\n  getPageThumbnail: '/classcipe/api/templates/getPageThumbnail',\n  queryById: '/classcipe/api/templates/queryById'\n};\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction TemplatesGetTemplates(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"])({\n    url: templateUrl.getTemplates,\n    method: 'get',\n    params: parameter\n  });\n}\nfunction FilterTemplates(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"])({\n    url: templateUrl.filterTemplates,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\nfunction recommendTemplates(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"])({\n    url: templateUrl.recommendTemplates,\n    method: 'post',\n    data: parameter,\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction TemplatesGetPresentation(_x) {\n  return _TemplatesGetPresentation.apply(this, arguments);\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction _TemplatesGetPresentation() {\n  _TemplatesGetPresentation = Object(_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee(parameter) {\n    var rs, _ref, presentationId, revisionId;\n\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return Object(_utils_request__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"])({\n              url: templateUrl.getPresentation,\n              method: 'get',\n              params: parameter\n            });\n\n          case 2:\n            rs = _context.sent;\n\n            if (!parameter.needRefresh) {\n              _context.next = 8;\n              break;\n            }\n\n            _ref = (rs === null || rs === void 0 ? void 0 : rs.result) || {}, presentationId = _ref.presentationId, revisionId = _ref.revisionId;\n\n            if (!presentationId) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 8;\n            return App.service('slides').get('syncOldSlide', {\n              query: {\n                task: parameter.taskId,\n                id: presentationId,\n                rev: revisionId\n              }\n            });\n\n          case 8:\n            return _context.abrupt(\"return\", rs);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _TemplatesGetPresentation.apply(this, arguments);\n}\n\nfunction TemplatesGetPageThumbnail(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"])({\n    url: templateUrl.getPageThumbnail,\n    method: 'get',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction TemplatesQueryById(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"])({\n    url: templateUrl.queryById,\n    method: 'get',\n    params: parameter\n  });\n}\nfunction TemplatesGetPublishedPresentation(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"])({\n    url: templateUrl.getPublishedPresentation,\n    method: 'get',\n    params: parameter\n  });\n}\n\n//# sourceURL=webpack:///./src/api/template.js?")},cd3e:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"ac86b5fa-vue-loader-template"}!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/components/GlobalSearch/GlobalSearchInput.vue?vue&type=template&id=d3f54b0c&scoped=true&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',{staticClass:"global-search-input"},[_c(\'div\',{staticClass:"search-icon"},[_c(\'a-icon\',{attrs:{"type":"search"},nativeOn:{"click":function($event){return _vm.activeSearchInput.apply(null, arguments)}}})],1),_c(\'div\',{directives:[{name:"show",rawName:"v-show",value:(_vm.showSearchWrapper),expression:"showSearchWrapper"}],staticClass:"global-search"},[_c(\'div\',{staticClass:"search-input-line"},[_c(\'div\',{staticClass:"search-back"},[_c(\'a-icon\',{style:({color: \'#999\', fontSize: \'16px\'}),attrs:{"type":"arrow-left"},on:{"click":_vm.handleBack}})],1),_c(\'div\',{staticClass:"search-input"},[_c(\'input\',{directives:[{name:"model",rawName:"v-model",value:(_vm.searchKeyword),expression:"searchKeyword"}],attrs:{"autocomplete":"off","id":"search-input","placeholder":"Search..."},domProps:{"value":(_vm.searchKeyword)},on:{"keyup":[_vm.handleSearch,function($event){if(!$event.type.indexOf(\'key\')&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")){ return null; }return _vm.emitSearchEvent(_vm.searchKeyword)}],"input":function($event){if($event.target.composing){ return; }_vm.searchKeyword=$event.target.value}}})]),_c(\'div\',{directives:[{name:"show",rawName:"v-show",value:(_vm.searchKeyword.length > 0),expression:"searchKeyword.length > 0"}],staticClass:"search-clear",on:{"click":_vm.handleSearchClear}},[_c(\'a-icon\',{attrs:{"type":"close"}})],1)]),_c(\'div\',{staticClass:"search-recommend-list"},[_c(\'div\',{directives:[{name:"show",rawName:"v-show",value:(_vm.searchKeyword),expression:"searchKeyword"}],staticClass:"do-search",on:{"click":function($event){return _vm.emitSearchEvent(_vm.searchKeyword)}}},[_c(\'div\',{staticClass:"icon"},[_c(\'a-icon\',{style:({color: \'#999\', fontSize: \'16px\'}),attrs:{"type":"search"}})],1),_c(\'div\',{staticClass:"search-content-left"},[_vm._v(" Search \\""),_c(\'span\',{staticClass:"bold"},[_vm._v(_vm._s(_vm.searchKeyword))]),_vm._v("\\" ")])]),_c(\'div\',{directives:[{name:"show",rawName:"v-show",value:(_vm.showSearchHistory),expression:"showSearchHistory"}],staticClass:"search-history"},_vm._l((_vm.historyList),function(name){return _c(\'div\',{key:name,staticClass:"list-item",on:{"click":function($event){return _vm.emitSearchEvent(name)}}},[_c(\'div\',{staticClass:"icon"},[_c(\'a-icon\',{style:({color: \'#999\', fontSize: \'16px\'}),attrs:{"type":"clock-circle","theme":"filled"}})],1),_c(\'div\',{staticClass:"search-content"},[_vm._v(" "+_vm._s(name)+" ")])])}),0),_c(\'div\',{directives:[{name:"show",rawName:"v-show",value:(_vm.showSearchRecommend),expression:"showSearchRecommend"}],staticClass:"recommend-list"},[_vm._l((_vm.similarList),function(item,idx){return _c(\'div\',{key:idx,staticClass:"list-item",on:{"click":function($event){return _vm.emitSearchEvent(item.name)}}},[_c(\'div\',{staticClass:"icon similar-icon"},[_vm._v(" # ")]),_c(\'div\',{staticClass:"search-content"},[_c(\'div\',{staticClass:"content-name"},[_vm._v(" "+_vm._s(item.name)+" ")])])])}),_vm._l((_vm.pdList),function(item){return _c(\'div\',{key:item.id,staticClass:"list-item",on:{"click":function($event){return _vm.viewItem(item)}}},[_vm._m(0,true),_c(\'div\',{staticClass:"search-content"},[_c(\'div\',{staticClass:"content-name"},[_vm._v(" "+_vm._s(item.name)+" ")])])])}),_vm._l((_vm.planList),function(item){return _c(\'div\',{key:item.id,staticClass:"list-item",on:{"click":function($event){return _vm.viewItem(item)}}},[_vm._m(1,true),_c(\'div\',{staticClass:"search-content"},[_c(\'div\',{staticClass:"content-name"},[_vm._v(" "+_vm._s(item.name)+" ")])])])}),_vm._l((_vm.taskList),function(item){return _c(\'div\',{key:item.id,staticClass:"list-item",on:{"click":function($event){return _vm.viewItem(item)}}},[_vm._m(2,true),_c(\'div\',{staticClass:"search-content"},[_c(\'div\',{staticClass:"content-name"},[_vm._v(" "+_vm._s(item.name)+" ")])])])})],2),(_vm.searching)?_c(\'div\',{staticClass:"searching"},[_c(\'a-spin\',[_c(\'a-icon\',{staticStyle:{"font-size":"24px"},attrs:{"slot":"indicator","type":"loading","spin":"","tip":"searching..."},slot:"indicator"})],1)],1):_vm._e()]),_c(\'div\',{staticClass:"bg-mask",on:{"click":_vm.handleBack}})]),(_vm.previewVisible)?_c(\'content-preview\',{attrs:{"content-id":_vm.previewCurrentId,"content-type":_vm.previewType},on:{"close":_vm.handlePreviewClose}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',{staticClass:"icon"},[_c(\'div\',{staticClass:"tag-icon"},[_vm._v("PD")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',{staticClass:"icon"},[_c(\'div\',{staticClass:"tag-icon"},[_vm._v("Unit")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',{staticClass:"icon"},[_c(\'div\',{staticClass:"tag-icon"},[_vm._v("Task")])])}]\n\n\n// CONCATENATED MODULE: ./src/components/GlobalSearch/GlobalSearchInput.vue?vue&type=template&id=d3f54b0c&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__("5530");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.trim.js\nvar es_string_trim = __webpack_require__("498a");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.splice.js\nvar es_array_splice = __webpack_require__("a434");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js\nvar es_array_slice = __webpack_require__("fb6a");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__("ac1f");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.search.js\nvar es_string_search = __webpack_require__("841c");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__("d3b7");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__("159b");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js\nvar es_function_name = __webpack_require__("b0c0");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js\nvar es_array_concat = __webpack_require__("99af");\n\n// EXTERNAL MODULE: ./src/assets/v2/icons/search.svg?inline\nvar searchinline = __webpack_require__("c44c");\nvar searchinline_default = /*#__PURE__*/__webpack_require__.n(searchinline);\n\n// EXTERNAL MODULE: ./node_modules/lodash-es/debounce.js\nvar debounce = __webpack_require__("85b1");\n\n// EXTERNAL MODULE: ./src/api/v2/library.js\nvar library = __webpack_require__("1778");\n\n// EXTERNAL MODULE: ./src/components/Preview/ContentPreview.vue + 4 modules\nvar ContentPreview = __webpack_require__("ce85");\n\n// EXTERNAL MODULE: ./src/mixins/ContentItemMixin.js\nvar ContentItemMixin = __webpack_require__("f031");\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/components/GlobalSearch/GlobalSearchInput.vue?vue&type=script&lang=js&\n\n\n\n\n\n\n\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ var GlobalSearchInputvue_type_script_lang_js_ = ({\n  name: \'GlobalSearchInput\',\n  components: {\n    ContentPreview: ContentPreview["a" /* default */],\n    SearchIcon: searchinline_default.a\n  },\n  mixins: [ContentItemMixin["a" /* ContentItemMixin */]],\n  data: function data() {\n    return {\n      data: null,\n      searchKeyword: \'\',\n      showSearchWrapper: false,\n      searching: false,\n      handleSearch: null,\n      pdList: [],\n      planList: [],\n      similarList: [],\n      taskList: [],\n      historyList: []\n    };\n  },\n  props: {\n    schoolId: {\n      type: String,\n      default: \'0\'\n    },\n    source: {\n      type: String,\n      default: \'library\'\n    }\n  },\n  computed: {\n    showSearchHistory: function showSearchHistory() {\n      return this.searchKeyword === null || this.searchKeyword.trim() === \'\';\n    },\n    showSearchRecommend: function showSearchRecommend() {\n      return this.searchKeyword;\n    }\n  },\n  created: function created() {\n    this.handleSearch = Object(debounce["a" /* default */])(this.doSearch, 300);\n    this.restoreSearchKey();\n  },\n  methods: {\n    storeSearchKey: function storeSearchKey() {\n      var userId = this.$store.getters.userInfo.id;\n      window.sessionStorage.setItem("".concat(userId, "_search_key_list"), JSON.stringify(this.historyList));\n    },\n    restoreSearchKey: function restoreSearchKey() {\n      var userId = this.$store.getters.userInfo.id;\n      var searchKeyList = window.sessionStorage.getItem("".concat(userId, "_search_key_list"));\n\n      if (searchKeyList) {\n        this.historyList = JSON.parse(searchKeyList);\n      } else {\n        this.historyList = [];\n      }\n    },\n    handleSearchClear: function handleSearchClear() {\n      this.searchKeyword = \'\';\n      this.recommendList = [];\n    },\n    handleBack: function handleBack() {\n      this.$logger.info(\'handleBack\');\n      this.showSearchWrapper = false;\n    },\n    doSearch: function doSearch() {\n      var key = this.searchKeyword.trim();\n\n      if (key) {\n        var index = this.historyList.indexOf(key);\n\n        if (index !== -1) {\n          this.historyList.splice(index, 1);\n        }\n\n        this.historyList.unshift(key);\n\n        if (this.historyList.length > 5) {\n          this.historyList = this.historyList.slice(0, 5);\n        }\n\n        this.storeSearchKey();\n        this.search(key);\n      }\n    },\n    search: function search(value) {\n      var _this = this;\n\n      this.$logger.info(\'search\', value);\n      this.searching = true;\n      this.recommendList = [];\n      this.pdList = [];\n      this.planList = [];\n      this.taskList = [];\n      this.similarList = [];\n      Object(library["d" /* librarySearch */])({\n        key: value,\n        schoolId: this.schoolId // library resource内容不一样\n\n      }).then(function (response) {\n        _this.$logger.info(\'searchByKeyword \' + value, response);\n\n        var list = []; // 添加高亮标签\n\n        var similarList = response.result.similarList;\n        _this.pdList = response.result.pdList;\n        _this.planList = response.result.planList;\n        _this.taskList = response.result.taskList;\n        similarList.forEach(function (item) {\n          if (item.name) {\n            if (!list.some(function (i) {\n              return i.name === item.name;\n            })) {\n              var lastIndex = 0;\n              var index = item.name.toLowerCase().indexOf(value);\n              var tagName = \'\';\n\n              while (index !== -1 && index + value.length <= item.name.length) {\n                tagName += item.name.substring(lastIndex, index) + \'<span class="search-keyword-item">\' + item.name.substring(index, index + value.length) + \'</span>\';\n                lastIndex = index + value.length;\n                index = item.name.toLowerCase().indexOf(value, index + value.length);\n              }\n\n              tagName += item.name.substring(lastIndex);\n              var tagItem = {\n                fromType: item.fromType,\n                name: item.name,\n                tagName: tagName,\n                id: item.id\n              };\n              list.push(tagItem);\n            }\n          }\n        });\n        _this.similarList = similarList;\n      }).finally(function () {\n        _this.searching = false;\n      });\n    },\n    activeSearchInput: function activeSearchInput() {\n      this.showSearchWrapper = true;\n      this.$nextTick(function () {\n        document.getElementById(\'search-input\').focus();\n      });\n    },\n    emitSearchEvent: function emitSearchEvent(key) {\n      this.$logger.info(\'emitSearchEvent\', key);\n      this.$emit(\'search\', key);\n      this.handleBack();\n    },\n    viewItem: function viewItem(item) {\n      this.$logger.info(\'viewItem\', item);\n\n      var dataItem = Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, item), {}, {\n        type: parseInt(item.fromType)\n      });\n\n      this.$logger.info(\'dataItem\', item);\n      this.showSearchWrapper = false;\n      this.$router.push({\n        path: "/teacher/".concat(this.source, "-view/").concat(dataItem.type, "/").concat(dataItem.id)\n      });\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/GlobalSearch/GlobalSearchInput.vue?vue&type=script&lang=js&\n /* harmony default export */ var GlobalSearch_GlobalSearchInputvue_type_script_lang_js_ = (GlobalSearchInputvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/components/GlobalSearch/GlobalSearchInput.vue?vue&type=style&index=0&id=d3f54b0c&lang=less&scoped=true&\nvar GlobalSearchInputvue_type_style_index_0_id_d3f54b0c_lang_less_scoped_true_ = __webpack_require__("9774");\n\n// EXTERNAL MODULE: ./node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__("0c7c");\n\n// CONCATENATED MODULE: ./src/components/GlobalSearch/GlobalSearchInput.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer["a" /* default */])(\n  GlobalSearch_GlobalSearchInputvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  "d3f54b0c",\n  null\n  \n)\n\n/* harmony default export */ var GlobalSearchInput = __webpack_exports__["a"] = (component.exports);\n\n//# sourceURL=webpack:///./src/components/GlobalSearch/GlobalSearchInput.vue_+_4_modules?')},ce85:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"ac86b5fa-vue-loader-template"}!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/components/Preview/ContentPreview.vue?vue&type=template&id=499cb44e&scoped=true&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'a-drawer\',{staticClass:"cc-content-preview-drawer",attrs:{"visible":true,"closable":false,"title":null,"width":"1000px","bodyStyle":{ height: \'100%\' }},on:{"close":_vm.handleClose}},[_c(\'div\',{staticClass:"content-preview"},[_c(\'content-preview-detail\',_vm._b({on:{"close":_vm.handleClose,"reload":_vm.handleReload}},\'content-preview-detail\',_vm.$attrs,false))],1)])}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/components/Preview/ContentPreview.vue?vue&type=template&id=499cb44e&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__("d3b7");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js\nvar es_string_iterator = __webpack_require__("3ca3");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__("ddb0");\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/components/Preview/ContentPreview.vue?vue&type=script&lang=js&\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n/* harmony default export */ var ContentPreviewvue_type_script_lang_js_ = ({\n  name: \'ContentPreview\',\n  components: {\n    ContentPreviewDetail: function ContentPreviewDetail() {\n      return Promise.all(/* import() */[__webpack_require__.e("chunk-6e709c5e"), __webpack_require__.e("chunk-14f6b998"), __webpack_require__.e("chunk-26488622"), __webpack_require__.e("chunk-8537801c"), __webpack_require__.e("chunk-87c80460")]).then(__webpack_require__.bind(null, "70fe"));\n    }\n  },\n  data: function data() {\n    return {};\n  },\n  methods: {\n    handleClose: function handleClose() {\n      this.$emit(\'close\');\n    },\n    handleReload: function handleReload() {\n      this.$emit(\'reload\');\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/Preview/ContentPreview.vue?vue&type=script&lang=js&\n /* harmony default export */ var Preview_ContentPreviewvue_type_script_lang_js_ = (ContentPreviewvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/components/Preview/ContentPreview.vue?vue&type=style&index=0&id=499cb44e&lang=less&scoped=true&\nvar ContentPreviewvue_type_style_index_0_id_499cb44e_lang_less_scoped_true_ = __webpack_require__("fe45");\n\n// EXTERNAL MODULE: ./node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__("0c7c");\n\n// CONCATENATED MODULE: ./src/components/Preview/ContentPreview.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer["a" /* default */])(\n  Preview_ContentPreviewvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  "499cb44e",\n  null\n  \n)\n\n/* harmony default export */ var ContentPreview = __webpack_exports__["a"] = (component.exports);\n\n//# sourceURL=webpack:///./src/components/Preview/ContentPreview.vue_+_4_modules?')},d0a7:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_UserProfileAvatar_vue_vue_type_style_index_0_id_e2c1ff82_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("b570");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_UserProfileAvatar_vue_vue_type_style_index_0_id_e2c1ff82_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_UserProfileAvatar_vue_vue_type_style_index_0_id_e2c1ff82_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n//# sourceURL=webpack:///./src/components/User/UserProfileAvatar.vue?')},d340:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/components/Preview/ContentPreview.vue?./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-2!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options")},f031:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ContentItemMixin; });\n/* harmony import */ var _node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"1da1\");\n/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"d81d\");\n/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"0481\");\n/* harmony import */ var core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"b0c0\");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"159b\");\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"96cf\");\n/* harmony import */ var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _api_template__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"c621\");\n/* harmony import */ var _const_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"f93e\");\n/* harmony import */ var _api_task__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"b199\");\n/* harmony import */ var _api_pdContent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"980a\");\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"944d\");\n\n\n\n\n\n\n\n\n\n // import { TaskAddOrUpdate } from '@/api/task'\n// import { PDContentAddOrUpdate } from '@/api/pdContent'\n// import storage from 'store'\n// import { ACCESS_TOKEN } from '@/store/mutation-types'\n\n\nvar ContentItemMixin = {\n  data: function data() {\n    return {\n      allowPreview: true,\n      previewCurrentId: null,\n      previewType: null,\n      previewCode: null,\n      // live workshop sessionId\n      previewVisible: false,\n      previewSchoolId: '0',\n      updateEditSlideLoading: false,\n      setColor: ['#FFEDAF', '#C8F4FF', '#E6E4FF', '#ffccb0', '#ffa9a2', '#a3ecb9', '#f7c5f8', '#ffbfe2', '#d5b9ff', '#c4f6b1'],\n      savingSlides: false,\n      formSteps: [],\n      requiredFields: [],\n      emptyRequiredFields: []\n    };\n  },\n  created: function created() {// let token = this.$route.query.token\n    // if (!token) {\n    //   token = storage.get(ACCESS_TOKEN)\n    // }\n    // const contentType = parseInt(this.content.type)\n    // if (contentType === this.$classcipe.typeMap.task) {\n    //   if (!this.$store.getters.formConfigData.taskSteps || !this.$classcipe.taskRequiredFields) {\n    //     this.$store.dispatch('loadFormConfigData', token).then(() => {\n    //       this.formSteps = this.$store.getters.formConfigData.taskSteps || []\n    //       this.$logger.info('formSteps', this.formSteps)\n    //       this.requiredFields = this.$classcipe.taskRequiredFields\n    //       // TODO 暂时，等下面的TODO完成去掉\n    //       // this.calculateCanPublish()\n    //     })\n    //   } else {\n    //     // TODO 暂时，等下面的TODO完成去掉\n    //     // this.calculateCanPublish()\n    //   }\n    // }\n    // if (contentType === this.$classcipe.typeMap.pd) {\n    //   this.requiredFields = this.$classcipe.pdRequiredFields\n    //   this.formSteps = [\n    //     {\n    //       id: 1,\n    //       name: 'PD goals',\n    //       commonFields: [\n    //         PdField.Name,\n    //         PdField.Image,\n    //         PdField.CoverVideo,\n    //         PdField.Goals\n    //       ],\n    //       showRequiredTips: false,\n    //       showSatisfiedTips: false\n    //     },\n    //     {\n    //       id: 2,\n    //       name: 'Edit Slides',\n    //       commonFields: [\n    //         PdField.Slides\n    //       ],\n    //       showRequiredTips: false,\n    //       showSatisfiedTips: false\n    //     },\n    //     {\n    //       id: 3,\n    //       name: 'Link Tasks',\n    //       commonFields: [\n    //         PdField.Link\n    //       ],\n    //       showRequiredTips: false,\n    //       showSatisfiedTips: false\n    //     }\n    //   ]\n    //   // TODO 暂时，等下面的TODO完成去掉\n    //   // this.calculateCanPublish()\n    // }\n\n    return Object(_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  computed: {\n    commandTermsList: function commandTermsList() {\n      return Object(lodash_es__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"])(this.content.learnOuts.map(function (item) {\n        return item.commandTerms;\n      }).flat(2), 'name').map(function (item) {\n        return item.name;\n      });\n    },\n    knowledgeTagsList: function knowledgeTagsList() {\n      return Object(lodash_es__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"])(this.content.learnOuts.map(function (item) {\n        return item.knowledgeTags;\n      }).flat(2), 'name').map(function (item) {\n        return item.name;\n      });\n    }\n  },\n  methods: {\n    handlePreviewDetail: function handlePreviewDetail(data) {\n      var _this = this;\n\n      var isOrigin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      this.$logger.info('handlePreviewDetail', data, 'allowPreview', this.allowPreview);\n\n      if (this.allowPreview) {\n        this.previewVisible = false;\n        this.$nextTick(function () {\n          _this.previewCurrentId = isOrigin ? data.sourceFrom || data.id : data.id;\n          _this.previewType = data.type;\n          _this.previewCode = data.sessionId || data.sessionInfo && data.sessionInfo.classId;\n          _this.previewSchoolId = data.schoolId ? data.schoolId : '0'; // 原件显示创建编辑评论不显示评论列表，自己copy的时不显示创建编辑评论列表\n\n          _this.reviewList = false; // !isOrigin\n\n          _this.reviewCreate = !!isOrigin;\n          _this.reviewEdit = !!isOrigin;\n          _this.previewVisible = true;\n        });\n        this.$emit('preview', data);\n      }\n    },\n    handlePreviewDeleteDetail: function handlePreviewDeleteDetail(session) {\n      var _this2 = this;\n\n      this.$logger.info('handlePreviewDeleteDetail', session, 'allowPreview', this.allowPreview);\n\n      if (this.allowPreview) {\n        this.previewVisible = false;\n        this.$nextTick(function () {\n          _this2.previewCurrentId = session.contentId;\n          _this2.previewType = session.contentType;\n          _this2.previewCode = session.classId; // 原件显示创建编辑评论不显示评论列表，自己copy的时不显示创建编辑评论列表\n\n          _this2.reviewList = false; // !isOrigin\n\n          _this2.reviewCreate = false;\n          _this2.reviewEdit = false;\n          _this2.previewVisible = true;\n        });\n        this.$emit('preview', session);\n      }\n    },\n    handlePreviewClose: function handlePreviewClose() {\n      this.$logger.info('handlePreviewClose');\n      this.previewVisible = false;\n      this.previewCurrentId = null;\n      this.previewType = null;\n      this.previewCode = null;\n    },\n    updateEditSlideStatus: function updateEditSlideStatus() {\n      var _this3 = this;\n\n      return Object(_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var contentType, res, _res;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (_this3.updateEditSlideLoading) {\n                  _context2.next = 26;\n                  break;\n                }\n\n                _context2.prev = 1;\n                _this3.updateEditSlideLoading = true;\n                contentType = parseInt(_this3.content.type);\n                res = null; // 只有task 和 pd需要save changes\n\n                if (!(contentType === _this3.$classcipe.typeMap.task)) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                _context2.next = 8;\n                return Object(_api_template__WEBPACK_IMPORTED_MODULE_6__[/* TemplatesGetPresentation */ \"c\"])({\n                  taskId: _this3.content.id,\n                  needRefresh: true\n                });\n\n              case 8:\n                res = _context2.sent;\n                _context2.next = 15;\n                break;\n\n              case 11:\n                if (!(contentType === _this3.$classcipe.typeMap.pd)) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                _context2.next = 14;\n                return Object(_api_template__WEBPACK_IMPORTED_MODULE_6__[/* TemplatesGetPresentation */ \"c\"])({\n                  taskId: _this3.content.id,\n                  needRefresh: true\n                });\n\n              case 14:\n                res = _context2.sent;\n\n              case 15:\n                if (res && res.code === 0) {\n                  _this3.content.presentationId = res.result.presentationId;\n                  _this3.content.pageObjects = res.result.pageObjects;\n                }\n\n                _this3.content.slideEditing = false;\n                _context2.next = 21;\n                break;\n\n              case 19:\n                _context2.prev = 19;\n                _context2.t0 = _context2[\"catch\"](1);\n\n              case 21:\n                _context2.prev = 21;\n                _this3.updateEditSlideLoading = false; // this.calculateCanPublish()\n                // 直接重新获取数据\n\n                _res = _this3.contentReget();\n\n                if (_res.code === 0) {\n                  _this3.content.canPublish = _res.result.canPublish;\n                }\n\n                return _context2.finish(21);\n\n              case 26:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 19, 21, 26]]);\n      }))();\n    },\n    contentReget: function contentReget() {\n      var _this4 = this;\n\n      return Object(_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var contentType, res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                contentType = parseInt(_this4.content.type);\n                res = null; // 只有task 和 pd需要save changes\n\n                if (!(contentType === _this4.$classcipe.typeMap.task)) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                _context3.next = 5;\n                return Object(_api_task__WEBPACK_IMPORTED_MODULE_8__[\"TaskQueryById\"])({\n                  id: _this4.content.id\n                });\n\n              case 5:\n                res = _context3.sent;\n                _context3.next = 12;\n                break;\n\n              case 8:\n                if (!(contentType === _this4.$classcipe.typeMap.pd)) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                _context3.next = 11;\n                return Object(_api_pdContent__WEBPACK_IMPORTED_MODULE_9__[/* PDContentQueryById */ \"c\"])({\n                  id: _this4.content.id\n                });\n\n              case 11:\n                res = _context3.sent;\n\n              case 12:\n                return _context3.abrupt(\"return\", res);\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    simpleIsEmpty: function simpleIsEmpty(value) {\n      if (value === null || value === '' || value === undefined) {\n        return true;\n      }\n\n      if (value.hasOwnProperty('length') && value.length === 0) {\n        return true;\n      }\n\n      if (JSON.stringify(value) === '{}') {\n        return true;\n      }\n\n      return false;\n    },\n    calculateCanPublish: function calculateCanPublish() {\n      var _this5 = this;\n\n      // 给有未填写字段的step添加红色提示\n      var canPublish = true;\n      this.emptyRequiredFields = [];\n      this.formSteps.forEach(function (step) {\n        step.showRequiredTips = false;\n        step.showSatisfiedTips = false;\n      });\n      this.requiredFields.forEach(function (field) {\n        if (field === _const_common__WEBPACK_IMPORTED_MODULE_7__[/* TaskField */ \"R\"].Slides || field === _const_common__WEBPACK_IMPORTED_MODULE_7__[/* PdField */ \"u\"].Slides) {\n          var _this5$content$pageOb;\n\n          if (!_this5.content.presentationId || !((_this5$content$pageOb = _this5.content.pageObjects) !== null && _this5$content$pageOb !== void 0 && _this5$content$pageOb.length)) {\n            _this5.emptyRequiredFields.push(field);\n\n            _this5.formSteps.forEach(function (step) {\n              if (step.commonFields.indexOf(field) > -1) {\n                step.showRequiredTips = true;\n                step.showSatisfiedTips = false;\n                canPublish = false;\n              }\n            });\n          }\n        } else if (field === _const_common__WEBPACK_IMPORTED_MODULE_7__[/* TaskField */ \"R\"].Link || field === _const_common__WEBPACK_IMPORTED_MODULE_7__[/* PlanField */ \"v\"].Link) {// TODO\n          // if (!this.associateUnitPlanIdList?.length && !this.associateTaskIdList?.length) {\n          //   this.$logger.info(`${field} is empty`, this.associateUnitPlanIdList, this.associateTaskIdList)\n          //   this.emptyRequiredFields.push(field)\n          //   this.formSteps.forEach(step => {\n          //     if (step.commonFields.indexOf(field) > -1) {\n          //       step.showRequiredTips = true\n          //       step.showSatisfiedTips = false\n          //       canPublish = false\n          //     }\n          //   })\n          // }\n        } else if (field === 'learnOuts') {// console.log('learnOuts test', this.content.learnOuts)\n          // if (!this.content.learnOuts?.length) {\n          //   console.log('learnOuts is empty')\n          //   this.emptyRequiredFields.push(field)\n          // this.formSteps.forEach(step => {\n          //   if (step.commonFields.indexOf(field) > -1) {\n          //     console.log(field, step)\n          //     step.showRequiredTips = true\n          //     step.showSatisfiedTips = false\n          //     canPublish = false\n          //   }\n          // })\n          // }\n        } else if (field === 'questions') {// TODO列表后端未返回\n          // console.log('questions is ', this.content.questions)\n          // if (this.content.hasOwnProperty('questions')) {\n          //   console.log('questions test ', this.content.questions)\n          //   if (this.content.questions.length === 0) {\n          //     console.log('questions is empty')\n          //     this.emptyRequiredFields.push(field)\n          //     this.formSteps.forEach(step => {\n          //       if (step.commonFields.indexOf(field) > -1) {\n          //         step.showRequiredTips = true\n          //         step.showSatisfiedTips = false\n          //         canPublish = false\n          //       }\n          //     })\n          //   }\n          // }\n        } else {\n          // TODO列表后端未返回\n          if (field === 'overview' || field === 'goals') {} else if (_this5.simpleIsEmpty(_this5.content[field])) {\n            _this5.$logger.info(\"\".concat(field, \" is empty\"), _this5.content[field]);\n\n            _this5.emptyRequiredFields.push(field);\n\n            _this5.formSteps.forEach(function (step) {\n              if (step.commonFields.indexOf(field) > -1) {\n                step.showRequiredTips = true;\n                step.showSatisfiedTips = false;\n                canPublish = false;\n              }\n            });\n          }\n        }\n      });\n\n      if (this.content.canPublish !== canPublish) {// TODO 需要部分保存\n        // const params = {\n        //   slideEditing: this.content.slideEditing,\n        //   canPublish: canPublish,\n        //   presentationId: this.content.presentationId,\n        //   pageObjects: this.content.pageObjects,\n        //   id: this.content.id\n        // }\n        // const contentType = parseInt(this.content.type)\n        // if (contentType === this.$classcipe.typeMap.task) {\n        //   TaskAddOrUpdate(params)\n        // }\n        // if (contentType === this.$classcipe.typeMap.pd) {\n        //   PDContentAddOrUpdate(params)\n        // }\n      }\n\n      this.content.canPublish = canPublish;\n    }\n  }\n};\n\n//# sourceURL=webpack:///./src/mixins/ContentItemMixin.js?")},fe45:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_ContentPreview_vue_vue_type_style_index_0_id_499cb44e_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("d340");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_ContentPreview_vue_vue_type_style_index_0_id_499cb44e_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_ContentPreview_vue_vue_type_style_index_0_id_499cb44e_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n//# sourceURL=webpack:///./src/components/Preview/ContentPreview.vue?')}}]);