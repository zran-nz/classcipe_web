(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d5c5efa"],{"0937":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_AvatarModal_vue_vue_type_style_index_0_id_4170057c_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("bd2f");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_AvatarModal_vue_vue_type_style_index_0_id_4170057c_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_AvatarModal_vue_vue_type_style_index_0_id_4170057c_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n//# sourceURL=webpack:///./src/views/account/settings/AvatarModal.vue?')},"0fac":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AutoSaveLocalMixin; });\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("85b1");\n/* harmony import */ var _utils_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("ca00");\n/* harmony import */ var store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("8ded");\n/* harmony import */ var store__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(store__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar AutoSaveLocalMixin = {\n  data: function data() {\n    return {\n      saving: false,\n      saveTime: null,\n      asyncSaveLocalDataFn: null,\n      asyncSaveDataFn: null,\n      autoSaveLocalKey: \'FORM_\',\n      needAutoSave: false,\n      needAutoSaveRemote: false\n    };\n  },\n  created: function created() {\n    this.asyncSaveLocalDataFn = Object(lodash_es__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(this.autoSaveLocalData, 200);\n    this.asyncSaveDataFn = Object(lodash_es__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"])(this.autoSaveData, 3000);\n  },\n  watch: {\n    formModel: {\n      deep: true,\n      handler: function handler(newVal, oldVal) {\n        if (this.needAutoSave) {\n          this.asyncSaveLocalDataFn(newVal);\n        }\n\n        if (this.needAutoSaveRemote && !this.loading) {\n          this.asyncSaveDataFn(newVal);\n        }\n      }\n    }\n  },\n  computed: {\n    lastChangeSavedTime: function lastChangeSavedTime() {\n      var time = this.saveTime || this.formModel && (this.formModel.updateTime || this.form.createTime);\n\n      if (time) {\n        return Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["formatLocalUTC"])(time);\n      } else {\n        return \'\';\n      }\n    }\n  },\n  methods: {\n    autoSaveLocalData: function autoSaveLocalData(newVal) {\n      var userId = this.$store.getters.userInfo.id;\n      var schoolId = this.$store.state.user.currentSchool.id;\n      store__WEBPACK_IMPORTED_MODULE_2___default.a.set(this.autoSaveLocalKey + userId + schoolId, JSON.stringify(newVal));\n      this.saveTime = new Date();\n    },\n    autoSaveData: function autoSaveData(newVal) {\n      var _this = this;\n\n      this.handleSave(function () {\n        _this.saveTime = new Date();\n      });\n    },\n    getAutoLocalData: function getAutoLocalData() {\n      var userId = this.$store.getters.userInfo.id;\n      var schoolId = this.$store.state.user.currentSchool.id;\n      var data = store__WEBPACK_IMPORTED_MODULE_2___default.a.get(this.autoSaveLocalKey + userId + schoolId);\n      return data ? JSON.parse(data) : {};\n    },\n    clearLocalData: function clearLocalData() {\n      var userId = this.$store.getters.userInfo.id;\n      var schoolId = this.$store.state.user.currentSchool.id;\n      store__WEBPACK_IMPORTED_MODULE_2___default.a.remove(this.autoSaveLocalKey + userId + schoolId);\n    }\n  }\n};\n\n//# sourceURL=webpack:///./src/mixins/AutoSaveLocalMixin.js?')},"17f2":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_SchoolStudentAdd_vue_vue_type_style_index_0_id_835479dc_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("f2d0");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_SchoolStudentAdd_vue_vue_type_style_index_0_id_835479dc_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_SchoolStudentAdd_vue_vue_type_style_index_0_id_835479dc_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n//# sourceURL=webpack:///./src/views/account/manage/schoolUser/SchoolStudentAdd.vue?')},"21fb":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CurrentSchoolMixin; });\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("b0c0");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__);\n\nvar CurrentSchoolMixin = {\n  data: function data() {\n    return {\n      unwatch: null,\n      routeName: this.$route.name\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.unwatch = this.$store.watch(function (state) {\n      return state.user.currentSchool;\n    }, function (currentSchool) {\n      return currentSchool && _this.$route.name === _this.routeName && _this.handleSchoolChange(currentSchool);\n    });\n  },\n  computed: {},\n  beforeDestroy: function beforeDestroy() {\n    this.unwatch && this.unwatch();\n  },\n  methods: {\n    // 默认方法，各个组件可自定义覆盖此方法\n    handleSchoolChange: function handleSchoolChange(currentSchool) {}\n  }\n};\n\n//# sourceURL=webpack:///./src/mixins/CurrentSchoolMixin.js?')},4992:function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "img/default-avatar.db1c5445.png";\n\n//# sourceURL=webpack:///./src/assets/icons/library/default-avatar.png?')},"6d78":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SubmitBeforeMixin; });\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("4de4");\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("07ac");\n/* harmony import */ var core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("b64b");\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("8ded");\n/* harmony import */ var store__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(store__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar SubmitBeforeMixin = {\n  data: function data() {\n    return {\n      validateFileds: {},\n      refName: \'form\'\n    };\n  },\n  computed: {\n    hasErrors: function hasErrors() {\n      return Object.values(this.validateFileds).filter(function (item) {\n        return !item;\n      }).length > 0;\n    }\n  },\n  methods: {\n    initValidate: function initValidate(isEdit) {\n      var _this = this;\n\n      if (!isEdit && this.validatorRules) {\n        this.$refs[this.refName].validateField(Object.keys(this.validatorRules), function (res) {\n          var userId = _this.$store.getters.userInfo.id;\n          var data = _this.autoSaveLocalKey ? store__WEBPACK_IMPORTED_MODULE_3___default.a.get(_this.autoSaveLocalKey + userId) : \'\';\n\n          if (!data) {\n            _this.$refs[_this.refName].clearValidate();\n          }\n        });\n      }\n    },\n    fillValidate: function fillValidate(key, value) {\n      this.$set(this.validateFileds, key, value);\n    }\n  }\n};\n\n//# sourceURL=webpack:///./src/mixins/SubmitBeforeMixin.js?')},"6e84":function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return UserModeMixin; });\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"b0c0\");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__);\n\nvar UserModeMixin = {\n  data: function data() {\n    return {\n      unwatch: null,\n      routeName: this.$route.name\n    };\n  },\n  computed: {\n    redirectUrl: function redirectUrl() {\n      return '/account/info?_=UserModeMixin:13'; // if (this.$store.state.user.currentRole === 'student') {\n      //   return '/student/main/my-task'\n      // } else {\n      // }\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    this.unwatch = this.$store.watch(function (state) {\n      return state.app.userMode;\n    }, function (userMode) {\n      if (userMode && _this.$route.name === _this.routeName) {\n        _this.handleModeChange(userMode);\n\n        _this.routeInMode();\n      }\n    });\n    this.routeInMode();\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.unwatch && this.unwatch();\n  },\n  methods: {\n    // 判断路由是否存在\n    routeInMode: function routeInMode() {\n      if (this.$route.meta.mode && this.$route.meta.mode !== this.$store.state.app.userMode) {\n        // 返回公共页面\n        this.$router.push({\n          path: this.redirectUrl\n        });\n      }\n    },\n    // 默认方法,可覆盖\n    handleModeChange: function handleModeChange(userMode) {}\n  }\n};\n\n//# sourceURL=webpack:///./src/mixins/UserModeMixin.js?")},"7e7a":function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/views/account/manage/SchoolStudentEdit.vue?./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-2!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options")},"8d90":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"719c2c8a-vue-loader-template"}!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/account/settings/AvatarModal.vue?vue&type=template&id=4170057c&scoped=true&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'a-modal\',{attrs:{"title":_vm.$t(\'account.settings.avatar.edit\'),"visible":_vm.visible,"maskClosable":false,"confirmLoading":_vm.confirmLoading,"width":800,"footer":null},on:{"cancel":_vm.cancelHandel}},[_c(\'a-row\',[_c(\'a-col\',{style:({height: \'350px\'}),attrs:{"xs":24,"md":12}},[_c(\'vue-cropper\',{ref:"cropper",attrs:{"img":_vm.options.img,"info":true,"autoCrop":_vm.options.autoCrop,"autoCropWidth":_vm.options.autoCropWidth,"autoCropHeight":_vm.options.autoCropHeight,"fixedBox":_vm.options.fixedBox},on:{"realTime":_vm.realTime}})],1),_c(\'a-col\',{style:({height: \'350px\'}),attrs:{"xs":24,"md":12}},[_c(\'div\',{staticClass:"avatar-upload-preview"},[_c(\'img\',{style:(_vm.previews.img),attrs:{"src":_vm.previews.url}})])])],1),_c(\'br\'),_c(\'a-row\',[_c(\'a-col\',{attrs:{"lg":2,"md":2}},[_c(\'a-upload\',{attrs:{"name":"file","beforeUpload":_vm.beforeUpload,"showUploadList":false}},[_c(\'a-button\',{attrs:{"icon":"upload"}},[_vm._v(_vm._s(_vm.$t(\'account.settings.avatar.select-image\')))])],1)],1),_c(\'a-col\',{attrs:{"lg":{span: 1, offset: 2},"md":2}},[_c(\'a-button\',{attrs:{"icon":"plus"},on:{"click":function($event){return _vm.changeScale(1)}}})],1),_c(\'a-col\',{attrs:{"lg":{span: 1, offset: 1},"md":2}},[_c(\'a-button\',{attrs:{"icon":"minus"},on:{"click":function($event){return _vm.changeScale(-1)}}})],1),_c(\'a-col\',{attrs:{"lg":{span: 1, offset: 1},"md":2}},[_c(\'a-button\',{attrs:{"icon":"undo"},on:{"click":_vm.rotateLeft}})],1),_c(\'a-col\',{attrs:{"lg":{span: 1, offset: 1},"md":2}},[_c(\'a-button\',{attrs:{"icon":"redo"},on:{"click":_vm.rotateRight}})],1),_c(\'a-col\',{attrs:{"lg":{span: 4, offset: 6},"md":4}},[_c(\'a-space\',[_c(\'a-button\',{on:{"click":_vm.close}},[_vm._v(" Cancel ")]),_c(\'a-button\',{attrs:{"type":"primary","disabled":_vm.confirmLoading,"loading":_vm.confirmLoading},on:{"click":_vm.uploadImage}},[_vm._v("Save")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/views/account/settings/AvatarModal.vue?vue&type=template&id=4170057c&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__("ac1f");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.split.js\nvar es_string_split = __webpack_require__("1276");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js\nvar es_string_match = __webpack_require__("466d");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array-buffer.slice.js\nvar es_array_buffer_slice = __webpack_require__("ace4");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__("d3b7");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-array.js\nvar es_typed_array_uint8_array = __webpack_require__("5cc6");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.copy-within.js\nvar es_typed_array_copy_within = __webpack_require__("9a8c");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.every.js\nvar es_typed_array_every = __webpack_require__("a975");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.fill.js\nvar es_typed_array_fill = __webpack_require__("735e");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.filter.js\nvar es_typed_array_filter = __webpack_require__("c1ac");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find.js\nvar es_typed_array_find = __webpack_require__("d139");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-index.js\nvar es_typed_array_find_index = __webpack_require__("3a7b");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.for-each.js\nvar es_typed_array_for_each = __webpack_require__("d5d6");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.includes.js\nvar es_typed_array_includes = __webpack_require__("82f8");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.index-of.js\nvar es_typed_array_index_of = __webpack_require__("e91f");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.iterator.js\nvar es_typed_array_iterator = __webpack_require__("60bd");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.join.js\nvar es_typed_array_join = __webpack_require__("5f96");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.last-index-of.js\nvar es_typed_array_last_index_of = __webpack_require__("3280");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.map.js\nvar es_typed_array_map = __webpack_require__("3fcc");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce.js\nvar es_typed_array_reduce = __webpack_require__("ca91");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce-right.js\nvar es_typed_array_reduce_right = __webpack_require__("25a1");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reverse.js\nvar es_typed_array_reverse = __webpack_require__("cd26");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.set.js\nvar es_typed_array_set = __webpack_require__("3c5d");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.slice.js\nvar es_typed_array_slice = __webpack_require__("2954");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.some.js\nvar es_typed_array_some = __webpack_require__("649e");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.sort.js\nvar es_typed_array_sort = __webpack_require__("219c");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.subarray.js\nvar es_typed_array_subarray = __webpack_require__("170b");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-locale-string.js\nvar es_typed_array_to_locale_string = __webpack_require__("b39a");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-string.js\nvar es_typed_array_to_string = __webpack_require__("72f7");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js\nvar es_array_concat = __webpack_require__("99af");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js\nvar es_array_slice = __webpack_require__("fb6a");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js\nvar es_regexp_to_string = __webpack_require__("25f0");\n\n// EXTERNAL MODULE: ./src/components/AddMaterial/Utils/AwsS3.js\nvar AwsS3 = __webpack_require__("d0d0");\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/account/settings/AvatarModal.vue?vue&type=script&lang=js&\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var AvatarModalvue_type_script_lang_js_ = ({\n  data: function data() {\n    return {\n      visible: false,\n      id: null,\n      confirmLoading: false,\n      fileList: [],\n      uploading: false,\n      options: {\n        img: \'\',\n        autoCrop: true,\n        autoCropWidth: 200,\n        autoCropHeight: 200,\n        fixedBox: true\n      },\n      previews: {}\n    };\n  },\n  methods: {\n    edit: function edit(id) {\n      this.visible = true;\n      this.id = id;\n      /* 获取原始头像 */\n    },\n    close: function close() {\n      this.id = null;\n      this.visible = false;\n    },\n    cancelHandel: function cancelHandel() {\n      this.close();\n    },\n    changeScale: function changeScale(num) {\n      num = num || 1;\n      this.$refs.cropper.changeScale(num);\n    },\n    rotateLeft: function rotateLeft() {\n      this.$refs.cropper.rotateLeft();\n    },\n    rotateRight: function rotateRight() {\n      this.$refs.cropper.rotateRight();\n    },\n    beforeUpload: function beforeUpload(file) {\n      var _this = this;\n\n      var reader = new FileReader(); // 把Array Buffer转化为blob 如果是base64不需要\n      // 转化为base64\n\n      reader.readAsDataURL(file);\n\n      reader.onload = function () {\n        _this.options.img = reader.result;\n      }; // 转化为blob\n      // reader.readAsArrayBuffer(file)\n\n\n      return false;\n    },\n    // 上传图片（点击上传按钮）\n    uploadImage: function uploadImage() {\n      var _this2 = this;\n\n      this.$refs.cropper.getCropData(function (data) {\n        var arr = data.split(\',\');\n        var mime = arr[0].match(/:(.*?);/)[1];\n        var bstr = atob(arr[1]);\n        var n = bstr.length;\n        var u8arr = new Uint8Array(n);\n\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n);\n        }\n\n        _this2.model = true;\n        _this2.modelSrc = data;\n        var suffix = mime.split(\'/\')[1];\n        var file = new File([u8arr], "custom_image_".concat(Date.now(), "_").concat(Math.random().toString(36).slice(2), ".").concat(suffix), {\n          type: mime\n        });\n        _this2.confirmLoading = true;\n        Object(AwsS3["a" /* upAwsS3File */])(_this2.$store.getters.userInfo.id, file, _this2.getProgressUpLoad, function (result) {\n          _this2.onSuccess(file, result);\n        }, true);\n      });\n    },\n    getProgressUpLoad: function getProgressUpLoad(progress) {\n      this.confirmLoading = true;\n    },\n    onSuccess: function onSuccess(file, result) {\n      this.$emit(\'ok\', result);\n      this.confirmLoading = false;\n      this.okHandel();\n    },\n    okHandel: function okHandel() {\n      var vm = this;\n      vm.confirmLoading = true;\n      setTimeout(function () {\n        vm.confirmLoading = false;\n        vm.close();\n        vm.$message.success(\'update avatar successfully!\');\n      }, 2000);\n    },\n    realTime: function realTime(data) {\n      this.previews = data;\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/views/account/settings/AvatarModal.vue?vue&type=script&lang=js&\n /* harmony default export */ var settings_AvatarModalvue_type_script_lang_js_ = (AvatarModalvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/views/account/settings/AvatarModal.vue?vue&type=style&index=0&id=4170057c&lang=less&scoped=true&\nvar AvatarModalvue_type_style_index_0_id_4170057c_lang_less_scoped_true_ = __webpack_require__("0937");\n\n// EXTERNAL MODULE: ./node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__("0c7c");\n\n// CONCATENATED MODULE: ./src/views/account/settings/AvatarModal.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer["a" /* default */])(\n  settings_AvatarModalvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  "4170057c",\n  null\n  \n)\n\n/* harmony default export */ var AvatarModal = __webpack_exports__["a"] = (component.exports);\n\n//# sourceURL=webpack:///./src/views/account/settings/AvatarModal.vue_+_4_modules?')},"9e9b":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"719c2c8a-vue-loader-template"}!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/account/manage/SchoolStudentEdit.vue?vue&type=template&id=346afe82&scoped=true&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',{staticClass:"my-full-form-wrapper",attrs:{"id":"formRoot"}},[_c(\'fixed-form-header\',{scopedSlots:_vm._u([{key:"header",fn:function(){return [_c(\'form-header\',{attrs:{"title":_vm.title,"show-share":false,"show-collaborate":false,"is-preview-mode":true},on:{"back":_vm.goBack},scopedSlots:_vm._u([{key:"back",fn:function(){return [_c(\'img\',{staticClass:"single-logo-img",attrs:{"src":__webpack_require__("be50"),"alt":"classcipe"},on:{"click":function($event){$event.stopPropagation();return _vm.openV2(\'/v2/\')}}})]},proxy:true},{key:"left",fn:function(){return [_c(\'a-space\',{attrs:{"size":5,"align":"center"},on:{"click":function($event){$event.stopPropagation();}}},[_c(\'label\',{staticStyle:{"cursor":"pointer"},on:{"click":function($event){return _vm.openV2(\'/v2/account/info\')}}},[_vm._v("Account Info")]),_c(\'label\',{attrs:{"for":""}},[_vm._v(">")]),_c(\'label\',{staticStyle:{"cursor":"pointer"},on:{"click":function($event){return _vm.$router.push(\'/manage/student/list\')}}},[_vm._v("School Student")]),_c(\'label\',{attrs:{"for":""}},[_vm._v(">")]),(_vm.onlyClass)?[_c(\'label\',{staticStyle:{"cursor":"pointer"},on:{"click":function($event){return _vm.$router.push(\'/manage/student/list?classId=\' + _vm.onlyClass.id)}}},[_vm._v(_vm._s(_vm.onlyClass.name))]),_c(\'label\',{attrs:{"for":""}},[_vm._v(">")])]:_vm._e(),_c(\'label\',{staticStyle:{"font-weight":"normal"}},[_vm._v(_vm._s(_vm.title))])],2)]},proxy:true},{key:"right",fn:function(){return undefined},proxy:true}])})]},proxy:true}])}),_c(\'div\',{staticClass:"form-content"},[_c(\'school-student-add\',{ref:"schoolStudentAdd",attrs:{"school":_vm.currentSchool,"id":_vm.id},on:{"getCls":_vm.changeCls,"save":_vm.handleSave}})],1)],1)}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/views/account/manage/SchoolStudentEdit.vue?vue&type=template&id=346afe82&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__("5530");\n\n// EXTERNAL MODULE: ./src/const/common.js\nvar common = __webpack_require__("f93e");\n\n// EXTERNAL MODULE: ./src/mixins/UserModeMixin.js\nvar UserModeMixin = __webpack_require__("6e84");\n\n// EXTERNAL MODULE: ./src/mixins/CurrentSchoolMixin.js\nvar CurrentSchoolMixin = __webpack_require__("21fb");\n\n// EXTERNAL MODULE: ./src/components/Common/FixedFormHeader.vue + 4 modules\nvar FixedFormHeader = __webpack_require__("b5ff8");\n\n// EXTERNAL MODULE: ./src/components/FormHeader/FormHeader.vue + 9 modules\nvar FormHeader = __webpack_require__("b5a9");\n\n// EXTERNAL MODULE: ./src/views/account/manage/schoolUser/SchoolStudentAdd.vue + 4 modules\nvar SchoolStudentAdd = __webpack_require__("b116");\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__("2f62");\n\n// EXTERNAL MODULE: ./node_modules/store/dist/store.legacy.js\nvar store_legacy = __webpack_require__("8ded");\nvar store_legacy_default = /*#__PURE__*/__webpack_require__.n(store_legacy);\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/account/manage/SchoolStudentEdit.vue?vue&type=script&lang=js&\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n\nvar _require = __webpack_require__("4fcf"),\n    debounce = _require.debounce;\n\n/* harmony default export */ var SchoolStudentEditvue_type_script_lang_js_ = ({\n  name: \'SchoolStudentEdit\',\n  mixins: [UserModeMixin["a" /* UserModeMixin */], CurrentSchoolMixin["a" /* CurrentSchoolMixin */]],\n  components: {\n    FixedFormHeader: FixedFormHeader["a" /* default */],\n    FormHeader: FormHeader["a" /* default */],\n    SchoolStudentAdd: SchoolStudentAdd["a" /* default */]\n  },\n  props: {\n    id: {\n      type: String,\n      default: null\n    }\n  },\n  data: function data() {\n    return {\n      USER_MODE: common["T" /* USER_MODE */],\n      SCHOOL_USER_STATUS: common["z" /* SCHOOL_USER_STATUS */],\n      onlyClass: null\n    };\n  },\n  created: function created() {\n    var _storage$get;\n\n    if (store_legacy_default.a.get(\'user_mode\') != common["T" /* USER_MODE */].SCHOOL || ((_storage$get = store_legacy_default.a.get(\'SET_CURRENT_SCHOOL\')) === null || _storage$get === void 0 ? void 0 : _storage$get.id) !== this.currentSchool.id) {\n      this.openV2(\'/v2/account/info\');\n    }\n\n    this.debounceLoad = debounce(this.loadData, 300);\n  },\n  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["e" /* mapState */])({\n    userMode: function userMode(state) {\n      return state.app.userMode;\n    },\n    currentSchool: function currentSchool(state) {\n      return state.user.currentSchool;\n    }\n  })), {}, {\n    title: function title() {\n      return this.id ? \'Edit\' : \'Add\';\n    }\n  }),\n  methods: {\n    goBack: function goBack() {\n      this.$router.go(-1);\n    },\n    handleSchoolChange: function handleSchoolChange(currentSchool) {\n      if (this.userMode === common["T" /* USER_MODE */].SCHOOL) {\n        this.queryParam.schoolId = currentSchool.id;\n        this.initDict();\n        this.debounceInit();\n      }\n    },\n    handleModeChange: function handleModeChange(userMode) {\n      // 模式切换，个人还是学校 个人接口\n      this.debounceInit();\n    },\n    loadData: function loadData() {},\n    handleSave: function handleSave(data) {\n      this.goBack();\n    },\n    changeCls: function changeCls(cls) {\n      this.onlyClass = cls;\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/views/account/manage/SchoolStudentEdit.vue?vue&type=script&lang=js&\n /* harmony default export */ var manage_SchoolStudentEditvue_type_script_lang_js_ = (SchoolStudentEditvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/views/account/manage/SchoolStudentEdit.vue?vue&type=style&index=0&id=346afe82&lang=less&scoped=true&\nvar SchoolStudentEditvue_type_style_index_0_id_346afe82_lang_less_scoped_true_ = __webpack_require__("a777");\n\n// EXTERNAL MODULE: ./node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__("0c7c");\n\n// CONCATENATED MODULE: ./src/views/account/manage/SchoolStudentEdit.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer["a" /* default */])(\n  manage_SchoolStudentEditvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  "346afe82",\n  null\n  \n)\n\n/* harmony default export */ var SchoolStudentEdit = __webpack_exports__["default"] = (component.exports);\n\n//# sourceURL=webpack:///./src/views/account/manage/SchoolStudentEdit.vue_+_4_modules?')},a777:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_SchoolStudentEdit_vue_vue_type_style_index_0_id_346afe82_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("7e7a");\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_SchoolStudentEdit_vue_vue_type_style_index_0_id_346afe82_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_SchoolStudentEdit_vue_vue_type_style_index_0_id_346afe82_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n//# sourceURL=webpack:///./src/views/account/manage/SchoolStudentEdit.vue?')},b116:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"719c2c8a-vue-loader-template"}!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/account/manage/schoolUser/SchoolStudentAdd.vue?vue&type=template&id=835479dc&scoped=true&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',[(_vm.studentId)?_c(\'div\',{staticClass:"account-info-self"},[_c(\'div\',{staticClass:"info-self-avatar"},[(_vm.formModel.avatar)?_c(\'img\',{attrs:{"src":_vm.formModel.avatar}}):_c(\'img\',{attrs:{"src":__webpack_require__("4992")}}),_c(\'a-button\',{attrs:{"type":"primary","size":"small"},on:{"click":function($event){return _vm.$refs.avatarModal.edit(1)}}},[_vm._v("Upload")])],1),_c(\'div\',{staticClass:"info-self-detail"},[_c(\'div\',{staticClass:"self-detail-name"},[_vm._v(" ID: "+_vm._s(_vm.origin.workNo || _vm.studentId)+" ")]),_c(\'div\',{staticClass:"self-detail-email"},[_vm._v(_vm._s(_vm.formModel.inviteEmail))])])]):_vm._e(),_c(\'a-form-model\',_vm._b({ref:"form",attrs:{"layout":"horizontal","model":_vm.formModel,"rules":_vm.validatorRules},on:{"validate":_vm.doValidate}},\'a-form-model\',_vm.formItemLayout,false),[(_vm.studentId)?_c(\'a-form-model-item\',{attrs:{"label":"Last Login","wrapperCol":{ span: 18 }}},[_c(\'a-row\',{attrs:{"gutter":0}},[_c(\'a-col\',{attrs:{"span":16}},[(_vm.origin.lastLogin)?_c(\'label\',{attrs:{"for":""}},[_vm._v(_vm._s(_vm._f("dayjs")(_vm.origin.lastLogin)))]):_c(\'label\',{attrs:{"for":""}},[_vm._v("-")])]),_c(\'a-col\',{staticStyle:{"text-align":"center"},attrs:{"span":2}}),(!_vm.origin.inviteEmail && !_vm.origin.parentEmailStatus)?_c(\'a-col\',{staticStyle:{"text-align":"center"},attrs:{"span":6}},[_c(\'a-button\',{attrs:{"type":"black","loading":_vm.confirmLoading},on:{"click":_vm.handleReset}},[_vm._v("Reset Password")])],1):_vm._e()],1)],1):_vm._e(),_c(\'a-form-model-item\',{staticClass:"mb0",attrs:{"label":"Name","required":true}},[_c(\'a-row\',{attrs:{"gutter":16}},[_c(\'a-col\',{attrs:{"span":12}},[_c(\'a-form-model-item\',{attrs:{"prop":"firstName","hasFeedback":true}},[_c(\'a-input\',{attrs:{"placeholder":"First name"},on:{"change":_vm.doValidParentEmail},model:{value:(_vm.formModel.firstName),callback:function ($$v) {_vm.$set(_vm.formModel, "firstName", $$v)},expression:"formModel.firstName"}})],1)],1),_c(\'a-col\',{attrs:{"span":12}},[_c(\'a-form-model-item\',{attrs:{"prop":"lastName","hasFeedback":true}},[_c(\'a-input\',{attrs:{"placeholder":"Last name"},on:{"change":_vm.doValidParentEmail},model:{value:(_vm.formModel.lastName),callback:function ($$v) {_vm.$set(_vm.formModel, "lastName", $$v)},expression:"formModel.lastName"}})],1)],1)],1)],1),_c(\'a-form-model-item\',{staticClass:"mb0",attrs:{"label":"Email","prop":"inviteEmail","required":false,"wrapperCol":{ span: 18 }}},[_c(\'a-row\',{attrs:{"gutter":0}},[_c(\'a-col\',{attrs:{"span":16}},[_c(\'a-form-model-item\',[_c(\'a-input\',{attrs:{"placeholder":"Email","disabled":_vm.studentId && !!_vm.formModel.inviteEmail && _vm.origin.status === 1},model:{value:(_vm.formModel.inviteEmail),callback:function ($$v) {_vm.$set(_vm.formModel, "inviteEmail", $$v)},expression:"formModel.inviteEmail"}})],1)],1),(!!_vm.formModel.inviteEmail && _vm.origin.status === 1)?_c(\'a-col\',{staticStyle:{"text-align":"center"},attrs:{"span":2}},[_c(\'a-tooltip\',{attrs:{"title":"Student Active"}},[_c(\'a-icon\',{staticStyle:{"color":"#007990"},attrs:{"type":"check"}})],1)],1):_vm._e(),(!!_vm.formModel.inviteEmail && _vm.origin.status === 0)?_c(\'a-col\',{staticStyle:{"text-align":"center"},attrs:{"span":6}},[_c(\'a-tooltip\',{attrs:{"title":"Student InActive"}},[_c(\'a-icon\',{staticStyle:{"color":"#8D9496"},attrs:{"type":"check"}})],1)],1):_vm._e()],1)],1),_c(\'a-form-model-item\',{attrs:{"label":"DOB"}},[_c(\'a-date-picker\',{attrs:{"disabled-date":_vm.disabledDate},model:{value:(_vm.formModel.birthDay),callback:function ($$v) {_vm.$set(_vm.formModel, "birthDay", $$v)},expression:"formModel.birthDay"}})],1),_c(\'a-form-model-item\',{staticClass:"mb0",attrs:{"label":"Class","required":true}},[_c(\'a-row\',{attrs:{"gutter":16}},[_c(\'a-col\',{attrs:{"span":18}},[_c(\'a-form-model-item\',{staticClass:"select",attrs:{"prop":"classes"}},[(!_vm.classUnModify)?[_c(\'a-select\',{attrs:{"showSearch":"","optionFilterProp":"children","getPopupContainer":function (trigger) { return trigger.parentElement; },"option-label-prop":"label","placeholder":"Please select class"},model:{value:(_vm.formModel.classes),callback:function ($$v) {_vm.$set(_vm.formModel, "classes", $$v)},expression:"formModel.classes"}},_vm._l((_vm.classNameList),function(className,id){return _c(\'a-select-option\',{key:id,attrs:{"label":className}},[_vm._v(" "+_vm._s(className)+" ")])}),1)]:_c(\'a-space\',[(_vm.classArrDetail.length > 0)?_c(\'a-space\',{staticClass:"flex-wrap"},[_vm._l((_vm.classArrDetail),function(cls){return [_c(\'a-tag\',{key:cls.id,attrs:{"color":cls.classType === 0 ? \'#2db7f5\' : \'#f50\'}},[_vm._v(" "+_vm._s(cls.classType === 1 ? _vm.formatViewName(cls.subject) + \'-\' + cls.name : cls.name)+" ")])]})],2):_c(\'label\',{attrs:{"for":""}},[_vm._v(" - ")])],1)],2)],1),(_vm.showClassLink)?_c(\'a-col\',{attrs:{"span":6}},[_c(\'a-button\',{attrs:{"type":"link"},on:{"click":_vm.handelGoClass}},[_vm._v("Class Manage")])],1):_vm._e()],1)],1),_c(\'div\',{staticClass:"sub-title"},[_c(\'label\',{attrs:{"for":""}},[_vm._v("Parent guardian")])]),_c(\'a-form-model-item\',{staticClass:"mb0",attrs:{"label":"Name"}},[_c(\'a-row\',{attrs:{"gutter":16}},[_c(\'a-col\',{attrs:{"span":12}},[_c(\'a-form-model-item\',{attrs:{"prop":"parentFirstName"}},[_c(\'a-input\',{attrs:{"placeholder":"First name"},model:{value:(_vm.formModel.parentFirstName),callback:function ($$v) {_vm.$set(_vm.formModel, "parentFirstName", $$v)},expression:"formModel.parentFirstName"}})],1)],1),_c(\'a-col\',{attrs:{"span":12}},[_c(\'a-form-model-item\',{attrs:{"prop":"parentLastName"}},[_c(\'a-input\',{attrs:{"placeholder":"Last name"},model:{value:(_vm.formModel.parentLastName),callback:function ($$v) {_vm.$set(_vm.formModel, "parentLastName", $$v)},expression:"formModel.parentLastName"}})],1)],1)],1)],1),_c(\'a-form-model-item\',{staticClass:"mb0",attrs:{"label":"Email","required":true,"wrapperCol":{ span: 18 }}},[_c(\'a-row\',{attrs:{"gutter":0}},[_c(\'a-col\',{attrs:{"span":16}},[_c(\'a-form-model-item\',{attrs:{"prop":"parentEmail","hasFeedback":true}},[_c(\'a-input\',{attrs:{"placeholder":"Email"},model:{value:(_vm.formModel.parentEmail),callback:function ($$v) {_vm.$set(_vm.formModel, "parentEmail", $$v)},expression:"formModel.parentEmail"}})],1)],1),(_vm.origin.parentEmailStatus === 1)?_c(\'a-col\',{staticStyle:{"text-align":"center"},attrs:{"span":2}},[_c(\'a-icon\',{staticStyle:{"color":"#007990"},attrs:{"type":"check"}})],1):_vm._e(),(_vm.origin.parentEmailStatus === 0)?_c(\'a-col\',{staticStyle:{"text-align":"center"},attrs:{"span":6}},[_c(\'a-button\',{attrs:{"type":"black","loading":_vm.loading},on:{"click":_vm.resendParent}},[_vm._v("Resend")])],1):_vm._e()],1)],1),_c(\'a-form-model-item\',{attrs:{"label":"Phone"}},[_c(\'a-input\',{attrs:{"placeholder":"Phone"},model:{value:(_vm.formModel.parentPhone),callback:function ($$v) {_vm.$set(_vm.formModel, "parentPhone", $$v)},expression:"formModel.parentPhone"}})],1),(!_vm.studentId)?_c(\'a-form-model-item\',{attrs:{"wrapperCol":{offset: 6}}},[_c(\'a-button\',{attrs:{"disabled":_vm.hasErrors,"loading":_vm.loading,"type":"primary"},on:{"click":function (e) { return _vm.handleSave(); }}},[_vm._v(_vm._s(_vm.studentId ? \'Update\': \'Create\'))])],1):_vm._e()],1),_c(\'a-modal\',{attrs:{"destroyOnClose":"","title":"Reset Password","width":"600px","footer":null},model:{value:(_vm.passwordVis),callback:function ($$v) {_vm.passwordVis=$$v},expression:"passwordVis"}},[_c(\'a-space\',{staticStyle:{"justify-content":"center","width":"100%"}},[_c(\'label\',{staticStyle:{"font-size":"20px","color":"#15c39a","font-weight":"bold"},attrs:{"for":""}},[_vm._v(_vm._s(_vm.randomPass))]),_c(\'a-icon\',{staticStyle:{"cursor":"pointer"},attrs:{"type":"copy"},on:{"click":_vm.onCopy}})],1)],1),_c(\'avatar-modal\',{ref:"avatarModal",on:{"ok":_vm.setAvatar}})],1)}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/views/account/manage/schoolUser/SchoolStudentAdd.vue?vue&type=template&id=835479dc&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__("3835");\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__("1da1");\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__("5530");\n\n// EXTERNAL MODULE: ./node_modules/regenerator-runtime/runtime.js\nvar runtime = __webpack_require__("96cf");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__("159b");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js\nvar es_array_filter = __webpack_require__("4de4");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js\nvar es_array_concat = __webpack_require__("99af");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js\nvar es_array_map = __webpack_require__("d81d");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js\nvar es_array_includes = __webpack_require__("caad");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.includes.js\nvar es_string_includes = __webpack_require__("2532");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__("d3b7");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js\nvar es_string_iterator = __webpack_require__("3ca3");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__("ddb0");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js\nvar es_function_name = __webpack_require__("b0c0");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.join.js\nvar es_array_join = __webpack_require__("a15b");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__("ac1f");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.split.js\nvar es_string_split = __webpack_require__("1276");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find.js\nvar es_array_find = __webpack_require__("7db0");\n\n// EXTERNAL MODULE: ./src/api/v2/schoolClass.js\nvar schoolClass = __webpack_require__("ad59");\n\n// EXTERNAL MODULE: ./src/api/v2/schoolUser.js\nvar schoolUser = __webpack_require__("ec09");\n\n// EXTERNAL MODULE: ./src/api/academicSettingSubject.js\nvar academicSettingSubject = __webpack_require__("9bfe");\n\n// EXTERNAL MODULE: ./src/api/academicSettingCurriculum.js\nvar academicSettingCurriculum = __webpack_require__("8ee6");\n\n// EXTERNAL MODULE: ./src/views/account/manage/persona/ResetPassword.vue + 4 modules\nvar ResetPassword = __webpack_require__("f371");\n\n// EXTERNAL MODULE: ./src/views/account/settings/AvatarModal.vue + 4 modules\nvar AvatarModal = __webpack_require__("8d90");\n\n// EXTERNAL MODULE: ./src/mixins/SubmitBeforeMixin.js\nvar SubmitBeforeMixin = __webpack_require__("6d78");\n\n// EXTERNAL MODULE: ./src/mixins/AutoSaveLocalMixin.js\nvar AutoSaveLocalMixin = __webpack_require__("0fac");\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__("2f62");\n\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment = __webpack_require__("c1df");\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment);\n\n// EXTERNAL MODULE: ./src/utils/util.js\nvar util = __webpack_require__("ca00");\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/account/manage/schoolUser/SchoolStudentAdd.vue?vue&type=script&lang=js&\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n\n\n\n\nvar _require = __webpack_require__("4fcf"),\n    sortBy = _require.sortBy;\n\n/* harmony default export */ var SchoolStudentAddvue_type_script_lang_js_ = ({\n  name: \'SchoolStudentAdd\',\n  components: {\n    ResetPassword: ResetPassword["a" /* default */],\n    AvatarModal: AvatarModal["a" /* default */]\n  },\n  mixins: [SubmitBeforeMixin["a" /* SubmitBeforeMixin */], AutoSaveLocalMixin["a" /* AutoSaveLocalMixin */]],\n  props: {\n    school: {\n      type: Object,\n      default: function _default() {}\n    },\n    id: {\n      type: String,\n      default: null\n    },\n    showClassLink: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    school: {\n      handler: function handler(val) {\n        this.currentSchool = Object(objectSpread2["a" /* default */])({}, val);\n        this.initData();\n      },\n      deep: true,\n      immediate: true\n    },\n    id: {\n      handler: function handler(val) {\n        this.studentId = val;\n        this.initForm();\n      },\n      immediate: true\n    }\n  },\n  data: function data() {\n    var _this$school;\n\n    return {\n      currentSchool: this.school,\n      studentId: this.id,\n      classList: [],\n      classNameList: {},\n      formModel: {\n        firstName: \'\',\n        lastName: \'\',\n        birthDay: \'\',\n        classes: \'\',\n        classArr: [],\n        subjectCls: [],\n        inviteEmail: \'\',\n        parentEmail: \'\',\n        parentEmailStatus: 0,\n        parentFirstName: \'\',\n        parentLastName: \'\',\n        parentPhone: \'\',\n        avatar: \'\',\n        schoolId: ((_this$school = this.school) === null || _this$school === void 0 ? void 0 : _this$school.id) || \'\'\n      },\n      formItemLayout: {\n        labelCol: {\n          span: 6\n        },\n        wrapperCol: {\n          span: 12\n        }\n      },\n      loading: false,\n      passwordVis: false,\n      origin: {},\n      confirmLoading: false,\n      cacheKey: \'SUBMIT_VALIDATE_SCHOOL_STUDENT_\',\n      autoSaveLocalKey: \'FORM_SCHOOL_STUDENT_\',\n      needAutoSave: !this.id,\n      needAutoSaveRemote: this.id,\n      randomPass: \'\',\n      classUnModify: false,\n      subjectOptions: [],\n      curriculumOptions: [],\n      gradeOptions: [],\n      studentCount: 0\n    };\n  },\n  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["e" /* mapState */])({\n    info: function info(state) {\n      return state.user.info;\n    }\n  })), {}, {\n    validatorRules: function validatorRules() {\n      return {\n        firstName: [{\n          required: true,\n          message: \'Please Input First Name!\'\n        }],\n        lastName: [{\n          required: true,\n          message: \'Please Input Last Name!\'\n        }],\n        inviteEmail: [// { required: true, message: \'Please Input Email!\', trigger: \'change\' },\n        // { type: \'email\', message: \'Please Input Valid Email!\', trigger: \'blur\' },\n        {\n          validator: this.validateRemoteEmail,\n          trigger: \'blur\'\n        }],\n        // parentFirstName: [{ required: true, message: \'Please Input First Name!\' }],\n        // parentLastName: [{ required: true, message: \'Please Input Last Name!\' }],\n        parentEmail: [{\n          required: true,\n          message: \'Please Input Email!\',\n          trigger: \'change\'\n        }, {\n          type: \'email\',\n          message: \'Please Input Valid Email!\',\n          trigger: \'blur\'\n        } // { validator: this.validateRemoteParentEmail, trigger: \'blur\' }\n        ],\n        classes: [{\n          required: true,\n          message: \'Please Select a class!\',\n          trigger: \'change\'\n        }] // parentPhone: [\n        //   { required: true, message: \'Please Input Phone!\' }\n        // ]\n\n      };\n    },\n    filterClassList: function filterClassList() {\n      var _this = this;\n\n      // return this.classList.filter(cc => !this.formModel.classArr.includes(cc.id))\n      if (this.gradeOptions && this.gradeOptions.length > 0) {\n        var cls = [];\n        this.gradeOptions.forEach(function (grade) {\n          var currentCls = _this.classList.filter(function (cls) {\n            return cls.gradeId === grade.gradeId;\n          });\n\n          cls = cls.concat(currentCls.map(function (cls) {\n            return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, cls), {}, {\n              curriculumName: grade.curriculumName\n            });\n          }));\n        });\n        return cls;\n      }\n\n      return [];\n    },\n    classArrDetail: function classArrDetail() {\n      var _this2 = this;\n\n      var clses = this.classList.filter(function (cc) {\n        return _this2.formModel.classArr.includes(cc.id);\n      });\n      return sortBy(clses, \'classType\');\n    }\n  }),\n  methods: {\n    initData: function initData() {\n      var _this3 = this;\n\n      return Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Promise.all([Object(schoolClass["g" /* listClass */])({\n                  schoolId: _this3.currentSchool.id,\n                  pageNo: 1,\n                  pageSize: 10000\n                }), Object(academicSettingSubject["a" /* getSubjectBySchoolId */])({\n                  schoolId: _this3.currentSchool.id\n                }), Object(academicSettingCurriculum["a" /* getCurriculumBySchoolId */])({\n                  schoolId: _this3.currentSchool.id\n                }), Object(schoolUser["m" /* getSchoolUsers */])({\n                  schoolId: _this3.currentSchool.id,\n                  roles: \'student\',\n                  pageNo: 1,\n                  pageSize: 1\n                })]).then(function (_ref) {\n                  var _ref2 = Object(slicedToArray["a" /* default */])(_ref, 4),\n                      clsRes = _ref2[0],\n                      subjectRes = _ref2[1],\n                      gradeRes = _ref2[2],\n                      studentRes = _ref2[3];\n\n                  if (clsRes.code === 0) {\n                    _this3.classNameList = {};\n                    _this3.classList = clsRes.result.records;\n                    clsRes.result.records.map(function (v) {\n                      var arr = [v.name]; // if (v.gradeName) arr.unshift(v.gradeName)\n\n                      _this3.classNameList[v.id] = arr.join(\' - \');\n                    });\n\n                    _this3.$forceUpdate();\n\n                    if (_this3.formModel.classes) {\n                      if (!_this3.classNameList[_this3.formModel.classes]) {\n                        _this3.formModel.classes = \'\';\n                        _this3.formModel.classArr = [];\n                      }\n                    }\n\n                    _this3.classUnModify = false;\n                    var query = _this3.$route.query;\n\n                    if (query.classId && _this3.classNameList[query.classId]) {\n                      if (!_this3.studentId) {\n                        _this3.formModel.classArr = [query.classId];\n                        _this3.formModel.classes = query.classId;\n                      }\n\n                      _this3.classUnModify = true;\n\n                      _this3.$emit(\'getCls\', {\n                        id: query.classId,\n                        name: _this3.classNameList[query.classId]\n                      });\n\n                      _this3.$nextTick(function () {\n                        _this3.initValidate(!!_this3.studentId);\n                      });\n                    }\n                  }\n\n                  if (subjectRes.success) {\n                    var subjects = [];\n                    subjectRes.result.forEach(function (item) {\n                      if (item.subjectList && item.subjectList.length > 0) {\n                        subjects = subjects.concat(item.subjectList);\n                      }\n                    });\n                    var options = [];\n                    subjects.forEach(function (item) {\n                      options.push({\n                        subjectId: item.subjectId,\n                        subjectName: item.subjectName\n                      });\n                      options.push({\n                        subjectId: item.parentSubjectId,\n                        subjectName: item.parentSubjectName\n                      });\n                    });\n                    _this3.subjectOptions = options;\n                  }\n\n                  if (gradeRes.success && gradeRes.result) {\n                    var grades = [];\n                    _this3.curriculumOptions = gradeRes.result;\n                    gradeRes.result.forEach(function (item) {\n                      grades = grades.concat((item.gradeSettingInfo || []).map(function (grade) {\n                        return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, grade), {}, {\n                          curriculumId: item.curriculumId,\n                          curriculumName: item.curriculumName\n                        });\n                      }));\n                    });\n                    _this3.gradeOptions = grades;\n                  }\n\n                  if (studentRes && studentRes.code === 0 && studentRes.result) {\n                    _this3.studentCount = studentRes.result.total;\n                  }\n                });\n\n              case 1:\n              case "end":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    // modal模式传值\n    initForm: function initForm(defaultForm) {\n      var _this4 = this;\n\n      if (this.id) {\n        this.loading = true;\n        Object(schoolUser["n" /* getStudentInfo */])({\n          schoolId: this.currentSchool.id,\n          userId: this.id\n        }).then(function (res) {\n          if (res.code === 0) {\n            _this4.origin = Object(objectSpread2["a" /* default */])({}, res.result);\n            _this4.formModel.id = res.result.id;\n            _this4.formModel.firstName = res.result.firstname;\n            _this4.formModel.lastName = res.result.lastname;\n            _this4.formModel.birthDay = res.result.birthday;\n            _this4.formModel.avatar = res.result.avatar;\n            _this4.formModel.inviteEmail = res.result.inviteEmail;\n            _this4.formModel.parentEmail = res.result.parentEmail;\n            _this4.formModel.parentEmailStatus = res.result.parentEmailStatus || 0;\n            _this4.formModel.parentFirstName = res.result.parentFirstName;\n            _this4.formModel.parentLastName = res.result.parentLastName;\n            _this4.formModel.avatar = res.result.avatar;\n            _this4.formModel.parentPhone = res.result.parentPhone;\n\n            if (res.result.classes) {\n              var gradeCls = res.result.classes.filter(function (item) {\n                return item.classType === 0;\n              });\n              var subjectCls = res.result.classes.filter(function (item) {\n                return item.classType === 1;\n              });\n              _this4.formModel.classArr = gradeCls.map(function (item) {\n                return item.id;\n              });\n              _this4.formModel.classes = _this4.formModel.classArr.join(\',\');\n              _this4.formModel.subjectCls = subjectCls.map(function (item) {\n                return item.id;\n              });\n            }\n          }\n        }).finally(function () {\n          _this4.loading = false;\n        });\n      } else {\n        var fromCache = this.getAutoLocalData();\n        this.formModel = Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, this.formModel), fromCache), defaultForm);\n        var query = this.$route.query;\n\n        if (query.classId && this.classNameList[query.classId]) {\n          this.formModel.classArr = [query.classId];\n          this.formModel.classes = query.classId;\n        }\n\n        if (this.formModel.classes) {\n          this.formModel.classArr = this.formModel.classes.split(\',\');\n        }\n      }\n\n      this.$nextTick(function () {\n        _this4.initValidate(!!_this4.id);\n      });\n    },\n    doValidate: function doValidate(key, value) {\n      this.fillValidate(key, value);\n    },\n    setAvatar: function setAvatar(url) {\n      this.formModel.avatar = url;\n    },\n    disabledDate: function disabledDate(current) {\n      return current && current > moment_default()();\n    },\n    resendParent: function resendParent() {\n      var _this5 = this;\n\n      if (this.formModel.parentEmail && Object(util["isEmail"])(this.formModel.parentEmail)) {\n        this.loading = true;\n        Object(schoolUser["x" /* sendParentEmail */])({\n          parentEmail: this.formModel.parentEmail,\n          schoolId: this.currentSchool.id,\n          userId: this.studentId\n        }).then(function (res) {\n          if (res.code === 0) {\n            _this5.$message.success(\'Send successfully\');\n          }\n        }).finally(function () {\n          _this5.loading = false;\n        });\n      } else {\n        this.$message.error(\'Please input valid email\');\n      }\n    },\n    validateRemoteEmail: function validateRemoteEmail(rule, value, callback) {\n      if (!value) {\n        return callback();\n      } else {\n        // 调用封装了的异步效验方法，\n        if (this.studentId && value === this.origin.inviteEmail) {\n          return callback();\n        }\n\n        Object(schoolUser["j" /* checkEmailStudent */])({\n          emails: value,\n          schoolId: this.currentSchool.id\n        }).then(function (response) {\n          if (response.code === 0 && response.result && response.result[0].exists) {\n            callback(new Error(\'already exists at this school\'));\n          } else {\n            callback();\n          }\n        }).catch(function (res) {\n          callback(new Error(res.message));\n        });\n      }\n    },\n    validateRemoteParentEmail: function validateRemoteParentEmail(rule, value, callback) {\n      if (!value) {\n        return callback();\n      } else {\n        if (!this.formModel.firstName || !this.formModel.lastName) {\n          callback();\n        }\n\n        if (this.studentId && value === this.origin.parentEmail) {\n          return callback();\n        } // 调用封装了的异步效验方法，\n\n\n        Object(schoolUser["i" /* checkEmailParent */])({\n          \'parentEmailInfos[0].firstName\': this.formModel.firstName,\n          \'parentEmailInfos[0].lastName\': this.formModel.lastName,\n          \'parentEmailInfos[0].parentEmail\': value,\n          userId: this.id,\n          schoolId: this.currentSchool.id\n        }).then(function (response) {\n          if (response.code === 0 && response.result && response.result[0].exists) {\n            callback(new Error(\'Existing student\'));\n          } else {\n            callback();\n          }\n        }).catch(function (res) {\n          callback(new Error(res.message));\n        });\n      }\n    },\n    doValidParentEmail: function doValidParentEmail() {\n      if (this.formModel.firstName && this.formModel.lastName && this.formModel.parentEmail) {\n        this.$refs.form.validateField(\'parentEmail\');\n      }\n    },\n    handelGoClass: function handelGoClass() {\n      this.$router.push(\'/manage/class\');\n    },\n    doReset: function doReset(params) {\n      return Object(schoolUser["w" /* resetUserPassword */])(Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, params), {}, {\n        schoolId: this.currentSchool.id,\n        userId: this.studentId\n      }));\n    },\n    handleClose: function handleClose() {\n      this.passwordVis = false;\n    },\n    handleReset: function handleReset() {\n      var _this6 = this;\n\n      this.randomPass = Object(util["randomString"])(6);\n      Object(schoolUser["w" /* resetUserPassword */])({\n        newPassword: this.randomPass,\n        schoolId: this.currentSchool.id,\n        userId: this.studentId\n      }).then(function (res) {\n        if (res.code === 0) {\n          _this6.passwordVis = true;\n        }\n      }); // this.$confirm({\n      //   title: `Confirm Reset Password`,\n      //   content: `Do you want to reset password?`,\n      //   centered: true,\n      //   onOk: () => {\n      //     this.confirmLoading = true\n      //     resetPassword({\n      //       userIds: [this.studentId] // reset\n      //     }).then(res => {\n      //       if (res.code === 0) {\n      //         this.$message.success(\'Opt Successfully\')\n      //       }\n      //     }).finally(() => {\n      //       this.confirmLoading = false\n      //     })\n      //   }\n      // })\n    },\n    handleSave: function handleSave(cb) {\n      var _this7 = this;\n\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          var params = Object(objectSpread2["a" /* default */])({}, _this7.formModel);\n\n          _this7.validateRemoteParentEmail(null, params.parentEmail, function (err) {\n            if (err && err.message) {\n              _this7.$message.error(err.message);\n            } else {\n              params.schoolId = _this7.currentSchool.id; // 变成单选\n              // params.classes = params.classArr.join(\',\')\n\n              if (params.birthDay) {\n                params.birthday = params.birthDay = moment_default.a.utc(params.birthDay).format(\'YYYY-MM-DD HH:mm:ss\');\n              }\n\n              params.classes = params.classes.split(\',\').concat(params.subjectCls).filter(function (item) {\n                return !!item;\n              }).join(\',\');\n              var promise = null;\n\n              if (_this7.id) {\n                promise = schoolUser["z" /* updateStudent */];\n              } else {\n                promise = schoolUser["c" /* addStudents */]; // 判断是否超出套餐限制\n\n                if (_this7.info.planInfo && _this7.info.planInfo.studentCount) {\n                  if (_this7.studentCount === _this7.info.planInfo.studentCount) {\n                    _this7.$confirm({\n                      title: \'Alert\',\n                      content: "You have reached the limits of people.",\n                      centered: true,\n                      okText: \'Confirm\',\n                      cancelText: \'Cancel\',\n                      okButtonProps: {\n                        style: {\n                          display: \'none\'\n                        }\n                      },\n                      onOk: function onOk() {},\n                      onCancel: function onCancel() {}\n                    });\n\n                    return;\n                  }\n                }\n              }\n\n              _this7.loading = true;\n              promise(params).then(function (res) {\n                if (res.code === 0) {\n                  _this7.$message.success(\'Save successfully\');\n\n                  _this7.clearLocalData();\n\n                  _this7.origin = Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, params), {}, {\n                    id: _this7.id\n                  });\n\n                  if (cb) {\n                    cb();\n                  } else {\n                    _this7.$emit(\'save\', res.result);\n                  }\n                }\n              }).finally(function () {\n                _this7.loading = false;\n              });\n            }\n          });\n        } else {}\n      });\n    },\n    onCopy: function onCopy() {\n      var _this8 = this;\n\n      this.$copyText(this.randomPass).then(function (message) {\n        _this8.$message.success(\'Copy success!\');\n      }).catch(function (err) {\n        _this8.$message.error(\'Copy Failed\');\n      });\n    },\n    formatName: function formatName(key, arr) {\n      var find = arr.find(function (item) {\n        return item.id === key;\n      });\n      return find ? find.name : \'\';\n    },\n    closeCls: function closeCls(id) {\n      this.formModel.classArr = this.formModel.classArr.filter(function (clsId) {\n        return clsId !== id;\n      });\n    },\n    showSelect: function showSelect(e) {\n      this.$refs.tagRender.previousElementSibling.click();\n    },\n    formatViewName: function formatViewName(id) {\n      var findSubject = this.subjectOptions.find(function (subject) {\n        return subject.subjectId === id;\n      });\n      if (findSubject) return findSubject.subjectName; // const findGrade = this.gradeOptions.find(grade => grade.gradeId === id)\n      // if (findGrade) return findGrade.gradeName\n\n      return \'Untitle\';\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/views/account/manage/schoolUser/SchoolStudentAdd.vue?vue&type=script&lang=js&\n /* harmony default export */ var schoolUser_SchoolStudentAddvue_type_script_lang_js_ = (SchoolStudentAddvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/views/account/manage/schoolUser/SchoolStudentAdd.vue?vue&type=style&index=0&id=835479dc&scoped=true&lang=less&\nvar SchoolStudentAddvue_type_style_index_0_id_835479dc_scoped_true_lang_less_ = __webpack_require__("17f2");\n\n// EXTERNAL MODULE: ./node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__("0c7c");\n\n// CONCATENATED MODULE: ./src/views/account/manage/schoolUser/SchoolStudentAdd.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer["a" /* default */])(\n  schoolUser_SchoolStudentAddvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  "835479dc",\n  null\n  \n)\n\n/* harmony default export */ var SchoolStudentAdd = __webpack_exports__["a"] = (component.exports);\n\n//# sourceURL=webpack:///./src/views/account/manage/schoolUser/SchoolStudentAdd.vue_+_4_modules?')},bd2f:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/views/account/settings/AvatarModal.vue?./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-2!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options")},ec09:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* unused harmony export schoolUserApi */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return getSchoolUsers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return addStudents; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return addTeacher; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return removeStudents; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return removeTeachers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return getInvite; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "y", function() { return updateInvite; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "A", function() { return updateTeacher; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return bulkActTeacher; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return bulkActStudent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return acceptInvite; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return batchAddStudent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return batchAddTeacher; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return getStudentInfo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return getTeacherInfo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return checkEmailParent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return checkEmailStudent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return checkEmailTeacher; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "v", function() { return resetPassword; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return moveClassStudent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "z", function() { return updateStudent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x", function() { return sendParentEmail; });\n/* unused harmony export addAdmin */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return removeAdmins; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "w", function() { return resetUserPassword; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return addSchoolAdmin; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return getTeacherCount; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return listStudents; });\n/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("b775");\n/* harmony import */ var _utils_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("ca00");\n\n\nvar API_PREFIX = \'api2/school/user\';\nvar schoolUserApi = {\n  getSchoolUsers: "/classcipe/".concat(API_PREFIX, "/getSchoolUsers"),\n  addStudents: "/classcipe/".concat(API_PREFIX, "/addStudents"),\n  addTeacher: "/classcipe/".concat(API_PREFIX, "/addTeacher"),\n  removeStudents: "/classcipe/".concat(API_PREFIX, "/removeStudents"),\n  removeTeachers: "/classcipe/".concat(API_PREFIX, "/removeTeachers"),\n  updateTeacher: "/classcipe/".concat(API_PREFIX, "/updateTeacher"),\n  getInvite: "/classcipe/".concat(API_PREFIX, "/getInvite"),\n  updateInvite: "/classcipe/".concat(API_PREFIX, "/updateInvite"),\n  bulkActTeacher: "/classcipe/".concat(API_PREFIX, "/teacher/bulkAct"),\n  bulkActStudent: "/classcipe/".concat(API_PREFIX, "/student/bulkAct"),\n  acceptInvite: "/classcipe/".concat(API_PREFIX, "/acceptInvite"),\n  batchAddStudent: "/classcipe/".concat(API_PREFIX, "/batchAddStudent"),\n  batchAddTeacher: "/classcipe/".concat(API_PREFIX, "/batchAddTeacher"),\n  getStudentInfo: "/classcipe/".concat(API_PREFIX, "/getStudentInfo"),\n  getTeacherInfo: "/classcipe/".concat(API_PREFIX, "/getTeacherInfo"),\n  checkEmailParent: "/classcipe/".concat(API_PREFIX, "/parent/checkEmail"),\n  resetPassword: "/classcipe/".concat(API_PREFIX, "/resetPassword"),\n  checkEmailStudent: "/classcipe/".concat(API_PREFIX, "/student/checkEmail"),\n  moveClassStudent: "/classcipe/".concat(API_PREFIX, "/student/moveClass"),\n  sendParentEmail: "/classcipe/".concat(API_PREFIX, "/student/sendParentEmail"),\n  checkEmailTeacher: "/classcipe/".concat(API_PREFIX, "/teacher/checkEmail"),\n  updateStudent: "/classcipe/".concat(API_PREFIX, "/updateStudent"),\n  addAdmin: "/classcipe/".concat(API_PREFIX, "/addAdmin"),\n  removeAdmins: "/classcipe/".concat(API_PREFIX, "/removeAdmins"),\n  resetUserPassword: "/classcipe/".concat(API_PREFIX, "/user/resetPassword"),\n  addSchoolAdmin: "/classcipe/".concat(API_PREFIX, "/addSchoolAdmin"),\n  getTeacherCount: "/classcipe/".concat(API_PREFIX, "/getTeacherCount"),\n  listStudents: "/classcipe/".concat(API_PREFIX, "/list/students")\n};\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction getSchoolUsers(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.getSchoolUsers,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction addStudents(parameter) {\n  // 去除空格\n  parameter = Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["trimParams"])(parameter);\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.addStudents,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction addTeacher(parameter) {\n  // 去除空格\n  parameter = Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["trimParams"])(parameter);\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.addTeacher,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction removeStudents(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.removeStudents,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction removeTeachers(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.removeTeachers,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction getInvite(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.getInvite,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction updateInvite(parameter) {\n  // 去除空格\n  parameter = Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["trimParams"])(parameter);\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.updateInvite,\n    method: \'post\',\n    data: parameter,\n    params: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction updateTeacher(parameter) {\n  // 去除空格\n  parameter = Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["trimParams"])(parameter);\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.updateTeacher,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction bulkActTeacher(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.bulkActTeacher,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction bulkActStudent(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.bulkActStudent,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction acceptInvite(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.acceptInvite,\n    method: \'post\',\n    data: parameter,\n    params: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction batchAddStudent(parameter) {\n  // 去除空格\n  parameter = Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["trimParams"])(parameter);\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.batchAddStudent,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction batchAddTeacher(parameter) {\n  // 去除空格\n  parameter = Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["trimParams"])(parameter);\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.batchAddTeacher,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction getStudentInfo(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.getStudentInfo,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction getTeacherInfo(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.getTeacherInfo,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction checkEmailParent(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.checkEmailParent,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction checkEmailStudent(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.checkEmailStudent,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction checkEmailTeacher(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.checkEmailTeacher,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction resetPassword(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.resetPassword,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction moveClassStudent(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.moveClassStudent,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction updateStudent(parameter) {\n  // 去除空格\n  parameter = Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["trimParams"])(parameter);\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.updateStudent,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction sendParentEmail(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.sendParentEmail,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction addAdmin(parameter) {\n  // 去除空格\n  parameter = Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["trimParams"])(parameter);\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.addAdmin,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction removeAdmins(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.removeAdmins,\n    method: \'post\',\n    data: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction resetUserPassword(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.resetUserPassword,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction addSchoolAdmin(parameter) {\n  // 去除空格\n  parameter = Object(_utils_util__WEBPACK_IMPORTED_MODULE_1__["trimParams"])(parameter);\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.addSchoolAdmin,\n    method: \'post\',\n    data: parameter,\n    params: parameter,\n    headers: {\n      \'Content-Type\': \'application/json;charset=UTF-8\'\n    }\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction getTeacherCount(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.getTeacherCount,\n    method: \'get\',\n    params: parameter\n  });\n}\n/**\n * @param parameter\n * @returns {AxiosPromise}\n * @constructor\n */\n\nfunction listStudents(parameter) {\n  return Object(_utils_request__WEBPACK_IMPORTED_MODULE_0__[/* default */ "d"])({\n    url: schoolUserApi.listStudents,\n    method: \'get\',\n    params: parameter\n  });\n}\n\n//# sourceURL=webpack:///./src/api/v2/schoolUser.js?')},f2d0:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/views/account/manage/schoolUser/SchoolStudentAdd.vue?./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-2!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options")},f371:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"719c2c8a-vue-loader-template"}!./node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/account/manage/persona/ResetPassword.vue?vue&type=template&id=f6bcd576&scoped=true&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'a-form-model\',_vm._b({ref:"form",attrs:{"layout":"horizontal","model":_vm.formModel,"rules":_vm.validatorRules}},\'a-form-model\',_vm.formItemLayout,false),[(_vm.needOld)?_c(\'a-form-model-item\',{attrs:{"label":"Old Password","prop":"password"}},[_c(\'a-input-password\',{attrs:{"autocomplete":"off","required":true,"type":"password","placeholder":"input password"},model:{value:(_vm.formModel.password),callback:function ($$v) {_vm.$set(_vm.formModel, "password", $$v)},expression:"formModel.password"}})],1):_vm._e(),_c(\'a-form-model-item\',{attrs:{"label":"New Password","prop":"newPassword"}},[_c(\'a-input-password\',{attrs:{"autocomplete":"off","type":"password","placeholder":"input password"},model:{value:(_vm.formModel.newPassword),callback:function ($$v) {_vm.$set(_vm.formModel, "newPassword", $$v)},expression:"formModel.newPassword"}})],1),_c(\'a-form-model-item\',{attrs:{"label":"Confirm Password","prop":"confirmPassword"}},[_c(\'a-input-password\',{attrs:{"autocomplete":"off","type":"password","placeholder":"input password"},model:{value:(_vm.formModel.confirmPassword),callback:function ($$v) {_vm.$set(_vm.formModel, "confirmPassword", $$v)},expression:"formModel.confirmPassword"}})],1),_c(\'a-form-model-item\',{attrs:{"wrapperCol":{offset: 6, span: 12},"label":""}},[_c(\'a-button\',{attrs:{"loading":_vm.loading,"type":"primary"},on:{"click":_vm.handleSave}},[_vm._v("update")])],1)],1)}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/views/account/manage/persona/ResetPassword.vue?vue&type=template&id=f6bcd576&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__("d3b7");\n\n// EXTERNAL MODULE: ./src/api/login.js + 1 modules\nvar login = __webpack_require__("7ded");\n\n// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader/lib??vue-loader-options!./src/views/account/manage/persona/ResetPassword.vue?vue&type=script&lang=js&\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var ResetPasswordvue_type_script_lang_js_ = ({\n  name: \'ResetPassword\',\n  props: {\n    needOld: {\n      type: Boolean,\n      default: true\n    },\n    saveFn: {\n      type: Function,\n      default: null\n    }\n  },\n  data: function data() {\n    var _this = this;\n\n    var reg = /^(?=.*[a-zA-Z])(?=.*[0-9])[^]{8,}$/;\n\n    var validateRemote = function validateRemote(rule, value, callback) {\n      if (!value) {\n        return callback(new Error(\'Please input the password\'));\n      } else {\n        // 调用封装了的异步效验方法，\n        Object(login["b" /* CheckPassword */])({\n          password: value\n        }).then(function (response) {\n          if (response.result !== \'Success\') {\n            callback(new Error(\'Incorrect password\'));\n          } else {\n            callback();\n          }\n        });\n      }\n    };\n\n    var validatePass = function validatePass(rule, value, callback) {\n      if (value === \'\') {\n        callback(new Error(\'Please input the password\'));\n      } else if (!reg.test(value)) {\n        callback(new Error(\'The password must be a combination of letters and numbers, and it must be 8 characters or more.\'));\n      } else {\n        if (_this.formModel.confirmPassword !== \'\') {\n          _this.$refs.form.validateField(\'confirmPassword\');\n        }\n\n        callback();\n      }\n    };\n\n    var validatePassConfirm = function validatePassConfirm(rule, value, callback) {\n      if (value === \'\') {\n        callback(new Error(\'Please input the password again\'));\n      } else if (value !== _this.formModel.newPassword) {\n        callback(new Error(\'Passwords did not match!\'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      formModel: {\n        password: \'\',\n        newPassword: \'\',\n        confirmPassword: \'\'\n      },\n      formItemLayout: {\n        labelCol: {\n          span: 6\n        },\n        wrapperCol: {\n          span: 18\n        }\n      },\n      validatorRules: {\n        password: [{\n          required: true,\n          trigger: \'change\',\n          message: \'Please input the password\'\n        }, {\n          validator: validateRemote,\n          trigger: \'blur\'\n        }],\n        newPassword: [{\n          validator: validatePass,\n          trigger: \'change\'\n        }],\n        confirmPassword: [{\n          validator: validatePassConfirm,\n          trigger: \'change\'\n        }]\n      },\n      loading: false\n    };\n  },\n  methods: {\n    handleSave: function handleSave() {\n      var _this2 = this;\n\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          _this2.loading = true;\n\n          if (_this2.saveFn) {\n            _this2.saveFn({\n              newPassword: _this2.formModel.newPassword,\n              oldPassword: _this2.formModel.password\n            }).then(function (res) {\n              if (res.code === 0) {\n                _this2.$message.success(\'Update password successfully\'); // this.$emit(\'close\')\n\n              }\n            }).finally(function () {\n              _this2.loading = false;\n            });\n          } else {\n            Object(login["a" /* ChangePassword */])({\n              newPassword: _this2.formModel.newPassword,\n              oldPassword: _this2.formModel.password\n            }).then(function (res) {\n              if (res.code === 0) {\n                _this2.$message.success(\'Update password successfully\'); // this.$emit(\'close\')\n\n              }\n            }).finally(function () {\n              _this2.loading = false;\n            });\n          }\n        }\n      });\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/views/account/manage/persona/ResetPassword.vue?vue&type=script&lang=js&\n /* harmony default export */ var persona_ResetPasswordvue_type_script_lang_js_ = (ResetPasswordvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__("0c7c");\n\n// CONCATENATED MODULE: ./src/views/account/manage/persona/ResetPassword.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer["a" /* default */])(\n  persona_ResetPasswordvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  "f6bcd576",\n  null\n  \n)\n\n/* harmony default export */ var ResetPassword = __webpack_exports__["a"] = (component.exports);\n\n//# sourceURL=webpack:///./src/views/account/manage/persona/ResetPassword.vue_+_4_modules?')}}]);