(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32a01919"],{"023b":function(t,e,a){},"05be":function(t,e,a){var i=a("b2b7");t.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"27.223",height:"28",viewBox:"0 0 27.223 28"},children:[{tag:"path",attrsMap:{id:"pubu_","data-name":"pubu ",class:"cls-1",d:"M17422.268,9413v-7.046h6.957V9413Zm-9.953,0v-7.046h7.268V9413Zm-10.312,0v-7.046h6.953V9413Zm20.266-10.41v-7.231h6.957v7.231Zm-9.953,0v-7.231h7.268v7.231Zm-10.312,0v-7.231h6.953v7.231Zm20.266-10.638V9385h6.957v6.952Zm-9.953,0V9385h7.268v6.952Zm-10.312,0V9385h6.953v6.952Z",transform:"translate(-17402.002 -9385.001)"}}]})}},"05c1":function(t,e,a){},"0618":function(t,e,a){},"07d3":function(t,e,a){"use strict";a("aad3")},"0f1d":function(t,e,a){"use strict";a("4830")},"0fa0":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relevant-tag-selector-wrapper"},[a("div",{staticClass:"question-list"},t._l(t.relevantQuestionList,(function(e,i){return a("div",{key:i,staticClass:"question-item"},[e.questionId?a("div",{class:{question:!0,"checked-item":-1!==t.selectedQuestionIdList.indexOf(e.questionId)},on:{click:function(a){return t.handleSelectQuestion(e)}}},[a("div",{staticClass:"content-text"},[t._v(" "+t._s(e.questionName?e.questionName:"Unnamed question")+" ")]),a("div",{staticClass:"selected-icon"},[-1!==t.selectedQuestionIdList.indexOf(e.questionId)?a("a-icon",{attrs:{type:"check-circle",theme:"filled"}}):t._e()],1)]):t._e(),a("div",{staticClass:"item-list"},t._l(e.knowledgeTagList,(function(e,i){return a("div",{key:i,class:{"item-item":!0,"checked-item":-1!==t.selectedKnowledgeTagIdList.indexOf(e.id)},on:{click:function(a){return t.handleSelectKnowledge(e)}}},[a("div",{staticClass:"item-name"},[a("div",{staticClass:"content-text"},[t._v(" "+t._s(e.info.description?e.info.description:"Unnamed description")+" ")]),a("div",{staticClass:"selected-icon"},[-1!==t.selectedKnowledgeTagIdList.indexOf(e.id)?a("a-icon",{attrs:{type:"check-circle",theme:"filled"}}):t._e()],1)])])})),0),a("div",{staticClass:"item-list"},t._l(e.skillTagList,(function(e,i){return a("div",{key:i,class:{"item-item":!0,"checked-item":-1!==t.selectedSkillTagIdList.indexOf(e.id)},on:{click:function(a){return t.handleSelectSkill(e)}}},[a("div",{staticClass:"item-name"},[a("div",{staticClass:"content-text"},[t._v(" "+t._s(e.info.description?e.info.description:"Unnamed description")+" ")]),a("div",{staticClass:"selected-icon"},[-1!==t.selectedSkillTagIdList.indexOf(e.id)?a("a-icon",{attrs:{type:"check-circle",theme:"filled"}}):t._e()],1)])])})),0)])})),0)])},s=[],n=(a("c740"),a("a434"),a("159b"),a("99af"),{name:"RelevantTagSelector",props:{relevantQuestionList:{type:Array,default:function(){return[]}}},data:function(){return{selectedQuestionIdList:[],selectedQuestionList:[],selectedKnowledgeTagList:[],selectedKnowledgeTagIdList:[],selectedSkillTagList:[],selectedSkillTagIdList:[]}},created:function(){this.$logger.info("RelevantTagSelector relevantQuestionList",this.relevantQuestionList)},methods:{handleSelectQuestion:function(t){var e=this;this.$logger.info("handleSelectQuestion",t);var a=this.selectedQuestionIdList.indexOf(t.questionId),i=this.selectedQuestionList.findIndex((function(e){return e.questionId===t.questionId}));-1!==a&&-1!==i?(this.selectedQuestionIdList.splice(a,1),this.selectedQuestionList.splice(i,1),t.knowledgeTagList.forEach((function(t){var a=e.selectedKnowledgeTagIdList.findIndex((function(e){return e===t.id})),i=e.selectedKnowledgeTagList.findIndex((function(e){return e.info.id===t.id}));-1!==a&&-1!==i&&(e.selectedKnowledgeTagIdList.splice(a,1),e.selectedKnowledgeTagList.splice(i,1))})),t.skillTagList.forEach((function(t){var a=e.selectedSkillTagIdList.findIndex((function(e){return e===t.id})),i=e.selectedSkillTagList.findIndex((function(e){return e.info.id===t.id}));-1!==a&&-1!==i&&(e.selectedSkillTagIdList.splice(a,1),e.selectedSkillTagList.splice(i,1))}))):(this.selectedQuestionIdList.push(t.questionId),this.selectedQuestionList.push(t)),this.updateSelected()},handleSelectKnowledge:function(t){this.$logger.info("handleSelectKnowledge",t);var e=this.selectedKnowledgeTagIdList.findIndex((function(e){return e===t.id})),a=this.selectedKnowledgeTagList.findIndex((function(e){return e.info.id===t.id}));-1!==e&&-1!==a?(this.selectedKnowledgeTagIdList.splice(e,1),this.selectedKnowledgeTagList.splice(a,1)):(this.selectedKnowledgeTagIdList.push(t.id),this.selectedKnowledgeTagList.push(t)),this.updateSelected()},handleSelectSkill:function(t){this.$logger.info("handleSelectSkill",t);var e=this.selectedSkillTagIdList.findIndex((function(e){return e===t.id})),a=this.selectedSkillTagList.findIndex((function(e){return e.id===t.id}));-1!==e&&-1!==a?(this.selectedSkillTagIdList.splice(e,1),this.selectedSkillTagList.splice(a,1)):(this.selectedSkillTagIdList.push(t.id),this.selectedSkillTagList.push(t)),this.updateSelected()},updateSelected:function(){var t=this;this.$logger.info("updateSelected",this.selectedQuestionList,this.selectedKnowledgeTagIdList,this.selectedSkillTagIdList);var e=[];this.selectedQuestionList.forEach((function(a){var i={id:a.questionId,name:a.questionName,knowledgeTags:[],skillTags:[]};a.knowledgeTagList.forEach((function(e){-1!==t.selectedKnowledgeTagIdList.indexOf(e.info.id)&&(i.knowledgeTags=i.knowledgeTags.concat(e.tagList))})),a.skillTagList.forEach((function(e){-1!==t.selectedSkillTagIdList.indexOf(e.info.id)&&(i.skillTags=i.skillTags.concat(e.tagList))})),e.push(i)})),this.$logger.info("updateSelected data",e),this.$emit("update-selected",{questionList:e})}}}),o=n,r=(a("e76a"),a("0c7c")),l=Object(r["a"])(o,i,s,!1,null,"5235376e",null);e["a"]=l.exports},1077:function(t,e,a){var i=a("b2b7");t.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{t:"1649489113509",class:"icon",viewBox:"0 0 1049 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2299","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"204.8828125",height:"200"},children:[{tag:"defs"},{tag:"path",attrsMap:{d:"M498.572908 914.311043 136.915348 914.311043c-13.711277 0-26.391441-4.56833-35.716719-12.868783-4.677728-4.162172-12.519211-13.064946-12.519211-25.906064L88.679418 233.106795c0-12.833574 7.841482-21.737605 12.519211-25.897262 9.326535-8.302968 22.005442-12.87004 35.716719-12.87004l205.567298 0L342.482646 105.661332 124.340809 105.661332c-32.390754 0-63.044964 11.416424-86.321692 32.130461C13.501282 159.622449 0 189.006631 0 220.532257l0 667.578478c0 31.534428 13.501282 60.917352 38.019117 82.741721 23.276728 20.720325 53.930938 32.129203 86.314147 32.129203l434.183726 0C534.790094 980.983761 514.506106 942.74459 498.572908 914.311043L498.572908 914.311043zM498.572908 914.311043","p-id":"2300",fill:"#2c2c2c"}},{tag:"path",attrsMap:{d:"M897.337931 207.209533c4.677728 4.160915 12.520468 13.063688 12.520468 25.897262l0 241.393416c27.487941 10.736141 65.641606 25.273565 88.678161 42.964683L998.536559 220.538544c0-31.525626-13.508827-60.914837-38.026662-82.739206-23.269184-20.721582-53.923394-32.130461-86.314147-32.130461L646.926056 105.668877l0 88.670616 214.696413 0C875.333746 194.339493 888.013911 198.907823 897.337931 207.209533L897.337931 207.209533zM897.337931 207.209533","p-id":"2301",fill:"#2c2c2c"}},{tag:"path",attrsMap:{d:"M789.258515 359.675813l-64.738754-64.733724L540.434804 479.001896 540.434804 34.339807C540.434804 15.384948 525.056143 0 506.100027 0l-22.89069 0c-18.954859 0-34.33855 15.384948-34.33855 34.339807l0 425.156465L284.705157 295.329384l-67.003429 67.004686 278.62411 278.61908 0 0","p-id":"2302",fill:"#2c2c2c"}},{tag:"path",attrsMap:{d:"M803.458941 533.592998c-135.430295 0-245.203501 109.750572-245.203501 245.202244 0 135.416463 109.773206 245.204759 245.203501 245.204759 135.415205 0 245.203501-109.788296 245.203501-245.204759C1048.662442 643.34357 938.874147 533.592998 803.458941 533.592998L803.458941 533.592998 803.458941 533.592998zM956.254674 718.593381 784.663778 884.059218c-2.294853 2.294853-4.851257 4.069121-7.603823 5.407052-10.77135 7.664181-25.859538 6.703486-35.518042-2.953759l-73.693083-73.711945c-10.775122-10.775122-10.775122-28.237384 0-38.993644 10.775122-10.816618 28.236126-10.816618 39.009991 0l55.314138 55.295276 155.069209-149.501203c10.75626-10.795241 28.234869-10.795241 39.011248 0C967.024766 690.355997 967.024766 707.834606 956.254674 718.593381L956.254674 718.593381 956.254674 718.593381zM956.254674 718.593381","p-id":"2303",fill:"#2c2c2c"}}]})}},"11aa":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAsCAYAAADxRjE/AAAAAXNSR0IArs4c6QAABJ1JREFUaEPNmWnI5XMUxz9f+75lCaGQlK3EG5GSFyRrsi/T2IYZqWFGDAaTNWuIPBSFGDOl0YzGTJNRNBJhsrywNUi27Brr0ffpXN153P92527n1VP33Pv//M/v/M75nvOIEbaI2Bw4C7gE2Al4EZihUWSOCHPtDNwAnAusm5x/A4+PHHRErAfsA9wFHDEhqP8Ai0cKOiI2AA4GHgAO6JAFfwHXjAx0Ah8C3Afs2wHYUf4EOGokoCNiE+BI4E5gz4J79gswXdLY0KEjYgvgeODWrBCdmH8HngamSFo9VOiI2Bo4DbgR2LYgws7jt4ATJH1hn6FBR8R2wDm+WMBWBcABfAVcKOn5ls9QoCNie2AScFUJsBl/Bu5xvZbkGj1uA4eOiB2AycCVwJYlzW11dsBJkr5v9xsodETski15KuAWXWSO6rvA2ZLemeg0MOiI2B24DLgA2LgE2Hn8JTBL0mOd/AYC3QZ8PuCaXGY/Ak8Cl7u8DQU6IvY2QKq1jSqAXY+XO+db5W3g0BHhdjwDOBXYsALYebwSmCbplTLfvqVHROyfFeJkwEKoyj4HbgYekuS8LrS+QEeEpaVL2ik1Imy4H4Cn/B1J1hil1nPoTAkDO8JVOWw4X7alwFRJq6qA/XlPoRN4FnBizQhbbr45PkJJL9UB7il0ROyaOuLMGmWtxfcxcDswJskvUMt6FumIaLXmvWo9Gb4F3Dyul/Rrze+Mu/US2prYiu2gGgC/AQuAmZI+q+G/hktX0DktHwocDlgbvAz4eKentrDsLDLrY/u7Ta9oCtx1pCPCO4g7LMwBQ9wPPAisA1yd3a9Tu3b9dQO5CXi2qh4XvVC3kbakvAU4I+Wlj/tR4N580EzAF3LTCQ/2xbsbeFjSH91EuXGks0J4yvgU8IWbk7sJdzzXWzcIn4BFz7RUdK0xyhdvzLOgpJ+6Ba4NHRE+9uOA2cBuuUh5BHDuegt0dDYSR29+lrEPc8L2Wsva+TlgrqTv1ga4FnTuI3zBLgV2zIrjdPBCxbnsrndtNhSng3N8UU7XK7rN27IXK83pjPDFOct5t9ZulpGus15f+W/Pe6cDXglYsS3LvF/epHHUOYUq6GPy4uyRlWHib/7pKpDp8A1wRQ6sXg0Y3J/NkfReHZi6PoXQOYA+ARxWoSMM90LKyo/yAl4EeOJ+LaEX1gWq41cGbVnp8d15XGWuv544rIctgHxCJwFvuxTWVW9VD2l9XgbtS+ZlStnU3P4cg7+eebxobepwFXxH6NwROzWObaDYWs96NZcr3tr3xYqgXX/dKKryuROUL91sSfP6Qlyk8nK+eya7nhtLE/NQ6jXWkiZfauJbFGlP0K67Ll1NzI3FGuQ2SV6A98X+B536wvX1QMD//2hib+TadmH7wrDJD9TxXQM6ItbPsjUF2KzOD7T5WFdbci4o2gw1/L1C9/+gU9h7bWXJuU2DqcaKzidjLbKynxFuvcU4dJvGsNS09KzS2e6C1sbudC6Nhu1aHzc9AeVG/jrgvJJtplWdIT8AnLeLgff7nQZFL2Noi/X9UhBZ9Dhi3vJ8nf86cBVYNSzATuD/Aok9WzfHt1isAAAAAElFTkSuQmCC"},1449:function(t,e,a){"use strict";var i=function(){var t=this,e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"my-unit-plan-preview"},[e.loading?[s("a-skeleton",{attrs:{active:""}})]:[s("a-row",{staticClass:"action-header"},[s("a-col",{staticClass:"action-header-toggle",attrs:{span:"24"}},[s("a-radio-group",{attrs:{"button-style":"solid"},on:{change:e.handleViewModeChange},model:{value:e.viewMode,callback:function(t){e.viewMode=t},expression:"viewMode"}},[s("a-radio-button",{staticClass:"left-button",attrs:{value:"Detail"}},[e._v(" Info ")]),s("a-radio-button",{staticClass:"right-button",attrs:{value:"Preview"}},[e._v(" Detail ")]),s("a-radio-button",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student","teacher"],expression:"['student', 'teacher']"}],staticClass:"right-button",attrs:{value:"Reviews"}},[e._v(" Reviews ")])],1)],1)],1),s("a-row",{staticClass:"top-header"},[s("a-col",{attrs:{span:"24"}},[s("div",{staticClass:"title-line"},[s("div",{staticClass:"name"},[e._v(" "+e._s(e.data.name)+" ")]),s("div",{staticClass:"action-item"},[s("div",{staticClass:"star"},[e.data.createBy!==e.$store.getters.userInfo.email?[e.data.isFavorite?e._e():s("img",{attrs:{src:a("58e7")},on:{click:function(t){return e.handleFavorite(e.data)}}}),e.data.isFavorite?s("img",{attrs:{src:a("24e3")},on:{click:function(t){return e.handleFavorite(e.data)}}}):e._e()]:e._e()],2),this.isOwner||this.isCollaborater?s("div",{staticClass:"edit"},[s("a-button",{attrs:{type:"primary",shape:"round"},on:{click:function(t){return e.handleEditItem(e.data)}}},[s("div",{staticClass:"button-content"},[e._v(" Edit "),s("img",{staticClass:"edit-icon",attrs:{src:a("11aa")}})])])],1):s("div",{staticClass:"edit"},[e.myContentId?s("a-button",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:e.copyLoading,type:"primary",shape:"round"},on:{click:function(t){return e.handleEditItem({id:e.myContentId})}}},[s("div",{staticClass:"button-content"},[e._v(" Edit in my content "),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"edit"}})],1)]):s("a-button",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:e.copyLoading,type:"primary",shape:"round"},on:{click:e.handleDuplicateItem}},[s("div",{staticClass:"button-content"},[e._v(" Copy "),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"copy"}})],1)]),e.data.type===e.typeMap.task?s("a-button",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:e.copyLoading,type:"primary",shape:"round"},on:{click:e.handleStartTask}},[s("div",{staticClass:"button-content"},[e._v(" Start "+e._s(e.data.buyed?"Session":"")),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"play-circle"}})],1)]):e._e()],1)])])])],1),s("a-row",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"author-info"},[s("a-col",{staticClass:"avatar-icon",attrs:{span:"3"}},[s("img",{attrs:{src:e.collaborate.owner&&e.collaborate.owner.avatar}})]),s("a-col",{attrs:{span:"21"}},[s("div",{staticClass:"sub-info"},[s("div",{staticClass:"created-by"},[e._v(" "+e._s(e.data.createBy)+" ")]),s("div",{staticClass:"created-time"},[e.lastChangeSavedTime?[e._v(" "+e._s(e.lastChangeSavedTime)+" ")]:e._e()],2)]),s("div",{staticClass:"star-info"},[s("review-score",{attrs:{review:e.reviewsStats,placement:"bottom"}}),s("a-button",{attrs:{type:"link"}},[e._v(e._s(e._f("percentFormat")(e.reviewsStats.overall))+" ("+e._s(e.reviewsStats.reviewsCount)+" reviews)")])],1)])],1),s("a-space",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"},{name:"show",rawName:"v-show",value:"Reviews"!==e.viewMode,expression:"viewMode !== 'Reviews'"}],staticClass:"author-info"},[s("div",{staticClass:"avatar-icon"},[s("img",{attrs:{src:e.collaborate.owner&&e.collaborate.owner.avatar}})]),s("div",[s("div",{staticClass:"sub-info"},[s("div",{staticClass:"created-by"},[e._v(" "+e._s(e.collaborate.owner&&e.collaborate.owner.nickname)+" ")]),s("div",{staticClass:"created-time"},[e.lastChangeSavedTime?[e._v(" "+e._s(e.lastChangeSavedTime)+" ")]:e._e()],2)]),s("div",{staticClass:"star-info",on:{click:function(){return t.viewMode="Reviews"}}},[s("a-tooltip",{attrs:{placement:"right"}},[s("template",{slot:"title"},[e._v(" "+e._s(e.reviewsStats.reviewsScoreStatDetail&&e.reviewsStats.reviewsScoreStatDetail[4]&&e.reviewsStats.reviewsScoreStatDetail[4].reviewsScoreCount)+" people gave a score of 5 stars ")]),s("a-rate",{attrs:{value:e.reviewsStats.avgReviewsScore,"allow-half":"",disabled:""}})],2)],1)])]),s("a-row",{directives:[{name:"show",rawName:"v-show",value:"Detail"===e.viewMode,expression:"viewMode === 'Detail'"}],staticClass:"data-info"},[s("a-col",{staticClass:"right-detail",attrs:{span:"24"}},[s("div",{staticClass:"sub-detail"},[s("div",{staticClass:"detail-block"},[s("div",{staticClass:"block-main-label"},[e.data.type===e.typeMap.task?[e._v("Task details")]:[e._v("Overview")]],2),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"view-text"},[e._v(" "+e._s(e.data.overview)+" ")])]),e.data.type===e.typeMap.task&&e.data.questionNames.length>0?[s("div",{staticClass:"block-main-label"},[e._v(" Key question(s)/Line(s) of Inquiry ")]),s("div",{staticClass:"detail-block",staticStyle:{margin:"10px"}},[s("div",{staticClass:"keyword-block-content"},[s("div",{staticClass:"content-list"},e._l(e.data.questionNames,(function(t,a){return s("div",{key:a,staticClass:"content-item"},[t?s("div",{staticClass:"question"},[e._v(" "+e._s(t)+" ")]):e._e()])})),0)])])]:e._e(),s("div",{staticClass:"block-main-label"},[e._v(" Customized tags ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"custom-tags"},e._l(e.data.customTags,(function(t,a){return s("div",{key:"tagIndex"+a,staticClass:"tag-item"},[s("a-tooltip",{attrs:{title:t.parentName}},[s("a-tag",{staticClass:"tag"},[e._v(" "+e._s(t.name)+" ")])],1)],1)})),0)]),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"block-main-label"},[e._v(" This task contains interactive questions of ")]),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"overview-block"},[s("div",{staticClass:"custom-tags"},e._l(e.inActiveTypes,(function(t,a){return s("div",{key:"interActiveIndex"+a,staticClass:"tag-item"},[s("a-tooltip",{attrs:{title:t}},[s("a-tag",{staticClass:"tag",attrs:{color:e.tagColorList[a]}},[e._v(" "+e._s(t)+" ")])],1)],1)})),0)]),s("div",{staticClass:"block-main-label"},[e._v(" Learning Objectives ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"learn-question-tag"},[s("div",{staticClass:"learn-out",staticStyle:{margin:"10px"}},[s("ui-learn-out-sub",{attrs:{"learn-outs":e.data.learnOuts,"self-outs":e.data.selfOuts,"class-info-list":e.itemsList}})],1)])]),e.data.inquiry?[s("div",{staticClass:"block-main-label"},[e._v(" Big idea ")]),s("div",{staticClass:"inquiry-block-content"},[s("div",{staticClass:"inquiry"},[e._v(" "+e._s(e.data.inquiry)+" ")])])]:e._e(),e.data.materialList&&e.data.materialList.length?[s("div",{staticClass:"block-main-label"},[e._v(" Material list ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"material-list"},e._l(e.data.materialList,(function(t,a){return s("div",{key:a,staticClass:"material-item"},[s("div",{staticClass:"material-name"},[e._v(" "+e._s(t.name)+" ")]),s("div",{staticClass:"material-link",on:{click:function(a){return e.handleOpenLink(t.link)}}},[e._v(" "+e._s(t.link)+" ")])])})),0)])]:e._e(),e.data.rwc?[s("div",{staticClass:"block-main-label"},[e._v(" Real World Connection(s) ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"view-text"},[e._v(" "+e._s(e.data.rwc)+" ")])])]:e._e()],2)])])],1),s("a-row",{directives:[{name:"show",rawName:"v-show",value:"Preview"===e.viewMode,expression:"viewMode === 'Preview'"}],staticClass:"preview-data-info"},[s("a-col",{staticClass:"slide-preview",attrs:{span:"24"}},[e.data.scenarios||e.data.inquiry||e.data.questions&&e.data.questions.length?s("div",{staticClass:"data-detail-wrapper"},[e.data.scenarios?[s("div",{staticClass:"block-main-label"},[e._v(" Sustainable development goal ")]),s("div",{staticClass:"detail-block"},e._l(e.data.scenarios,(function(t,a){return s("div",{key:a,staticClass:"scenario-item ref-block"},[s("div",{staticClass:"scenario-block-content"},[s("div",{staticClass:"content-list"},[s("div",{staticClass:"content-item"},[s("div",{staticClass:"question"},[t.description?[s("a-tooltip",{attrs:{title:t.description,placement:"top"}},[e._v(" "+e._s(t.sdgName)+" ")])]:[e._v(" "+e._s(t.sdgName))]],2),s("div",{staticClass:"tags"},e._l(t.sdgKeyWords,(function(t,a){return s("div",{key:"tagIndex"+a,staticClass:"tag-item"},[s("a-tag",{staticClass:"tag"},[e._v(" "+e._s(t.name)+" ")])],1)})),0)])])])])})),0)]:e._e(),e.data&&e.data.inquiry?[s("div",{staticClass:"detail-block"},[s("div",{staticClass:"block-main-label"},[e._v(" Big idea ")]),s("div",{staticClass:"inquiry-block-content"},[s("div",{staticClass:"inquiry"},[e._v(" "+e._s(e.data.inquiry)+" ")])])])]:e._e(),e.data&&e.data.questions&&e.data.questions.length?[s("div",{staticClass:"block-main-label"},[e._v(" Key question(s)/Line(s) of Inquiry ")]),s("div",{staticClass:"detail-block"},[s("div",{staticClass:"keyword-block-content"},[e.data.questions&&e.data.questions.length?s("div",{staticClass:"content-list"},e._l(e.data.questions,(function(t,a){return s("div",{key:"qIndex"+a,staticClass:"content-item"},[t&&t.name?s("div",{staticClass:"question"},[e._v(" "+e._s(t.name)+" ")]):e._e()])})),0):e._e()])])]:e._e()],2):e._e(),e.type===e.typeMap.task&&e.data.presentationId&&e.imgList.length>0?[s("div",{staticClass:"top-icon-groups"},[s("a-col",{staticClass:"material-row"},[Object.keys(e.currentPageMaterial).length>0?s("div",{staticClass:"icon-group"},[e.currentPageMaterial.hasOwnProperty("text")?s("a-badge",{attrs:{count:e.showMaterialSize("text")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("text")}}},[s("text-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Text")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("image")?s("a-badge",{attrs:{count:e.showMaterialSize("image")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("image")}}},[s("image-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Image")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("video")?s("a-badge",{attrs:{count:e.showMaterialSize("video")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("video")}}},[s("video-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Video")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("audio")?s("a-badge",{attrs:{count:e.showMaterialSize("audio")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("audio")}}},[s("audio-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Audio")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("iframe")?s("a-badge",{attrs:{count:e.showMaterialSize("iframe")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("iframe")}}},[s("youtube-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Youtube")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("pdf")?s("a-badge",{attrs:{count:e.showMaterialSize("pdf")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("pdf")}}},[s("pdf-type-svg"),s("div",{staticClass:"icon-text"},[e._v("PDF")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("website")?s("a-badge",{attrs:{count:e.showMaterialSize("website")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("website")}}},[s("url-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Website")])],1)]):e._e()],1):e._e()])],1),s("a-skeleton",{attrs:{loading:e.slideLoading,active:""}},[s("div",{ref:"slide",staticClass:"slide-select-wrapper"},[s("div",{staticClass:"slide-select"},[s("div",{staticClass:"slide-select-and-preview"},[s("div",{staticClass:"slide-preview",style:{width:"600px"}},[s("a-carousel",{ref:"carousel",attrs:{arrows:"","after-change":e.onChangePage}},[s("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"10px",zIndex:"9"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[s("a-icon",{attrs:{type:"left-circle"}})],1),s("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"10px",zIndex:"9"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[s("a-icon",{attrs:{type:"right-circle"}})],1),e._l(e.imgList,(function(t,e){return s("div",{key:e},[s("img",{attrs:{src:t}})])}))],2),e.currentPageItem?s("div",{staticClass:"plugin-tags"},[s("a-row",{staticClass:"tag-row"},[e.currentPageItem.data.bloomLevel?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Bloom's Taxonomy:")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[e._v(e._s(e.currentPageItem.data.bloomLevel))])]):e._e(),e.currentPageItem.data.knowledgeLevel?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Knowledge dimension(s):")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[e._v(e._s(e.currentPageItem.data.knowledgeLevel))])]):e._e()]),s("a-row",{staticClass:"tag-row"},[e.currentPageItem.data.verbs&&e.currentPageItem.data.verbs.length>0?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Command terms:")]),e._l(e.currentPageItem.data.verbs,(function(t,a){return s("span",{key:a,staticClass:"tag-value",staticStyle:{color:"#15C39A"}},[e._v(e._s(t))])}))],2):e._e(),e.currentPageTips?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Tip added:")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#0054FF"}},[e._v(e._s(e.currentPageTips.tip))])]):e._e()]),e.currentPageItem.data.learnOuts&&e.currentPageItem.data.learnOuts.length>0?s("a-row",{staticClass:"tag-row"},[s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Learning Objectives:")]),e._l(e.currentPageItem.data.learnOuts,(function(t,a){return s("span",{key:a,staticClass:"tag-value",staticStyle:{color:"#00BCF2"}},[s("a-tooltip",{attrs:{title:t.path,overlayStyle:{"z-index":"3000"}}},[e._v(e._s(t.name)+" ")])],1)}))],2)]):e._e(),s("a-row",{staticClass:"tag-row"},[s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("This is a "),s("span",[e._v(e._s(e.currentPageItem.type))]),e._v(" slide")])])])],1):e._e(),e.imgList&&e.imgList.length?s("div",{staticClass:"page-info"},[e._v(" "+e._s(e.currentImgIndex+1)+" / "+e._s(e.imgList.length)+" ")]):e._e(),s("div",{staticClass:"carousel-page"},[s("div",{staticClass:"img-list-wrapper"},[s("div",{staticClass:"img-list"},e._l(e.imgList,(function(t,a){return s("div",{key:"index"+a,staticClass:"img-item",on:{click:function(t){return e.handleGotoImgIndex(a)}}},[s("img",{attrs:{src:t}})])})),0)])])],1)])])])])]:e._e(),e.type===e.typeMap.evaluation?[s("evaluation-table-preview",{attrs:{"evaluation-id":e.data.id}})]:e._e()],2)],1),s("a-row",{directives:[{name:"show",rawName:"v-show",value:"Reviews"===e.viewMode,expression:"viewMode === 'Reviews'"}],staticClass:"reviews-info"},["student"===e.currentRole?s("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[s("rate-by-percent",{attrs:{rates:e.reviewsStats}}),s("reviews-preview",{attrs:{id:e.id,role:"student",list:e.ReviewsTask.ReviewsTaskList,save:e.ReviewsTask.ReviewsTaskSave,del:e.ReviewsTask.ReviewsTaskDelete,myReview:e.ReviewsTask.ReviewsTaskMyReview}})],1):s("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[s("reviews-preview",{attrs:{id:e.id,role:"teacher",list:e.ReviewsTeacher.ReviewsTeacherList,save:e.ReviewsTeacher.ReviewsTeacherSave,del:e.ReviewsTeacher.ReviewsTeacherDelete,myReview:e.ReviewsTeacher.ReviewsTeacherMyReview,canEdit:!0},on:{update:e.loadReviewStats}})],1)],1)],s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px",zIndex:6e3,title:"My Materials"},on:{ok:function(t){e.materialVisible=!1},cancel:function(t){e.materialVisible=!1}},model:{value:e.materialVisible,callback:function(t){e.materialVisible=t},expression:"materialVisible"}},[s("task-material-preview",{attrs:{"current-page-element-lists":e.currentPageElementLists,"filter-type":e.filterMaterialType,"current-page-index":e.currentImgIndex}})],1),s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"900px",zIndex:5e3,title:null},on:{ok:function(t){e.mediaVisible=!1},cancel:function(t){e.mediaVisible=!1}},model:{value:e.mediaVisible,callback:function(t){e.mediaVisible=t},expression:"mediaVisible"}},[s("media-preview",{attrs:{"media-list":e.mediaList,"material-type":e.filterMaterialType}})],1)],2)},s=[],n=a("5530"),o=(a("a9e3"),a("d81d"),a("a630"),a("3ca3"),a("d3b7"),a("6062"),a("ddb0"),a("159b"),a("b0c0"),a("823b")),r=a("3f76"),l=a("69b3"),c=a("8c95"),d=a("c621"),u=a("972f"),p=a("7eee"),h=a("d33b"),f=a("873a"),m=a("542c"),v=a("91ff"),g=a("d980"),y=a("dd6e"),C=a("abb8"),w=a("e11c"),b=a("9afb"),k=a("f93e"),T=a("2934"),S=a("5225"),L=a("9fb0"),I=a("8ded"),_=a.n(I),A=a("2f59"),M=a("2f62"),D=a("6b36"),x=a("c2e5"),O=a("ca00"),E=O.formatLocalUTC,R=a("de0d"),P=R.UnitPlanQueryById,N=a("b199"),Y=N.TaskQueryById,j=a("9f06"),F=j.EvaluationQueryById,B=a("95c6"),H=B.FavoritesAdd,V=a("56f2"),G=V.SelfStudyTaskBye,U=V.SelfStudyTaskStart,z={name:"CommonPreview",components:{UiLearnOutSub:v["a"],EvaluationTablePreview:u["a"],CommonAssociatePreview:c["a"],NoMoreResources:l["a"],TaskLink:p["a"],MediaPreview:f["a"],TaskMaterialPreview:m["a"],RateByPercent:g["a"],ReviewsPreview:y["a"],ReviewScore:C["a"]},props:{id:{type:String,required:!0},type:{type:Number,required:!0},isLibrary:{type:Boolean,default:!1},myContentId:{type:String,default:null}},mixins:[h["a"],w["a"],A["a"]],computed:Object(n["a"])(Object(n["a"])({},Object(M["e"])({userMode:function(t){return t.app.userMode},currentRole:function(t){return t.user.currentRole}})),{},{lastChangeSavedTime:function(){if(this.data){o["info"]("lastChangeSavedTime data",this.data);var t=this.data.updateTime||this.data.createTime;if(t)return E(t)}return""},inActiveTypes:function(){var t=[];return this.itemsList&&(t=this.itemsList.map((function(t){return t.type}))),Array.from(new Set(t))}}),mixin:[A["a"]],data:function(){return{loading:!0,slideLoading:!1,copyLoading:!1,data:null,imgList:[],viewMode:"Detail",RATE_TOOLTIPS:k["x"],ReviewsTask:D,ReviewsTeacher:x,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:-1,typeMap:r["e"],subPreviewVisible:!1,currentImgIndex:0,initPrompts:[],reviewsStats:{avgReviewsScore:0,reviewsScoreStatDetail:[],reviewsCount:0,effectiveness:0,overall:0,quality:0,studentsEngagement:0}}},created:function(){o["info"]("CommonPreview id "+this.id+" type "+this.type),this.loadData()},methods:{loadData:function(){var t=this;o["info"]("loadData "+this.id+" type "+this.type),this.loading=!0,this.type===this.typeMap["unit-plan"]?P({id:this.id}).then((function(e){o["info"]("UnitPlanQueryById "+t.id,e.result),t.data=e.result,t.oldForm=t.data,t.data&&t.data.image&&(t.imgList=[t.data.image])})).finally((function(){t.loading=!1,t.queryContentCollaborates(t.id,t.type)})):this.type===this.typeMap.task?Y({id:this.id}).then((function(e){o["info"]("TaskQueryById "+t.id,e.result),t.data=e.result,t.loading=!1,t.oldForm=t.data,t.queryContentCollaborates(t.id,t.type),t.loadThumbnail(),t.data.presentationId&&t.getClassInfo(t.data.presentationId)})):this.type===this.typeMap.evaluation&&F({id:this.id}).then((function(e){o["info"]("EvaluationQueryById "+t.id,e.result),t.data=e.result,t.oldForm=t.data,t.data&&t.data.image&&(t.imgList=[t.data.image])})).finally((function(){t.loading=!1,t.queryContentCollaborates(t.id,t.type)})),Object(T["a"])(k["q"]).then((function(e){e.success&&(o["info"]("DICT_PROMPT_TYPE",e.result),t.initPrompts=e.result)})),this.loadReviewStats()},handleAuthCallback:function(){this.$logger.info("Preview handleAuthCallback"),"loadThumbnail"===this.currentMethodName?this.loadThumbnail():"handleDuplicateItem"===this.currentMethodName&&this.handleDuplicateItem()},loadThumbnail:function(){var t=this;this.$logger.info("Preview loadThumbnail ",this.data),this.data.presentationId?this.isLibrary?Object(d["d"])({taskId:this.data.id}).then((function(e){if(e.code!==t.ErrorCode.ppt_google_token_expires&&e.code!==t.ErrorCode.ppt_forbidden){var a=e.result.pageObjects;t.thumbnailList=[],a.length?a.forEach((function(e){t.imgList.push(e.contentUrl),t.thumbnailList.push({contentUrl:e.contentUrl,id:e.pageObjectId}),t.slideLoading=!1,t.$logger.info("current imgList ",t.imgList)})):(t.imgList=[],t.slideLoading=!1)}else t.$logger.info("等待授权事件通知"),t.currentMethodName="loadThumbnail"})):Object(d["d"])({taskId:this.data.id}).then((function(e){if(e.code!==t.ErrorCode.ppt_google_token_expires&&e.code!==t.ErrorCode.ppt_forbidden){var a=e.result.pageObjects;t.thumbnailList=[],a.length?a.forEach((function(e){t.imgList.push(e.contentUrl),t.thumbnailList.push({contentUrl:e.contentUrl,id:e.pageObjectId}),t.slideLoading=!1,t.$logger.info("current imgList ",t.imgList)})):(t.imgList=[],t.slideLoading=!1)}else t.$logger.info("等待授权事件通知"),t.currentMethodName="loadThumbnail"})):this.slideLoading=!1},loadReviewStats:function(){var t=this,e=null;e="student"===this.currentRole?D["ReviewsTaskStats"]:x["ReviewsTeacherStats"],e&&e({taskId:this.id,purchasesId:this.id}).then((function(e){e.success&&(t.reviewsStats=e.result)}))},handleSelectContentType:function(t){o["info"]("handleSelectContentType "+t),this.activeContentType=t},handleSubPreviewClose:function(){o["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1},handleViewModeChange:function(){this.$logger.info("handleViewModeChange "+this.viewMode)},handleFavorite:function(t){var e=this;o["info"]("handleFavorite",t),H({sourceId:t.id,sourceType:t.type}).then((function(a){o["info"]("FavoritesAdd ",a),t.isFavorite=!t.isFavorite,e.data.isFavorite=t.isFavorite,e.$emit("favoritiesAdd",Object(n["a"])({},e.data))}))},handleGotoImgIndex:function(t){this.$logger.info("handleGotoImgIndex "+t),this.currentImgIndex=t,this.$refs.carousel.goTo(t)},handleEditItem:function(t){t.type=this.type,o["info"]("handleEditItem",t),t.type===r["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+t.id,"_blank"):t.type===r["e"].task?window.open("/teacher/task-redirect/"+t.id,"_blank"):t.type===r["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+t.id,"_blank")},handleDuplicateItem:function(){var t=this;this.$logger.info("handleDuplicateItem",this.data),this.$confirm({title:"Confirm to copy",content:"Are you sure to copy "+this.data.name+" ?",centered:!0,onOk:function(){t.copyLoading=!0,Object(b["Duplicate"])({id:t.data.id,type:t.data.type}).then((function(e){e.code!==t.ErrorCode.ppt_google_token_expires&&e.code!==t.ErrorCode.ppt_forbidden?(t.$logger.info("Duplicate response",e),t.$message.success("Copy successfully")):t.currentMethodName="handleDuplicateItem"})).finally((function(){t.copyLoading=!1}))}})},handleStartTask:function(){var t=this;this.$confirm({title:"Confirm to start",content:"Are you sure to start "+this.data.name+" ?",centered:!0,onOk:function(){t.copyLoading=!0,t.data.buyed||k["U"].SCHOOL===t.userMode?t.handleStartSession(t.data.id):G({taskId:t.data.id}).then((function(e){e.success&&t.handleStartSession(t.data.id)})).finally((function(){t.copyLoading=!1}))}})},handleOpenLink:function(t){window.open(t,"_blank")},handleStartSession:function(t){var e=this;this.copyLoading=!0,U({taskId:t}).then((function(t){if(e.$logger.info("StartOpenSession res",t),t.success){e.copyLoading=!1;var a=S["a"]+"s/"+t.result.classId+"?token="+_.a.get(L["a"]);e.$logger.info("try open "+a),window.location.href=a}else e.$message.warn("StartLesson Failed! "+t.message)})).finally((function(){e.copyLoading=!1}))}}},q=z,$=(a("7569"),a("0c7c")),Q=Object($["a"])(q,i,s,!1,null,"0a1695ec",null);e["a"]=Q.exports},1899:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-link"},[i("div",{staticClass:"link-group-wrapper"},[t.groups.length&&!t.linkGroupLoading?[i("draggable",{attrs:{disabled:!t.canEdit,animation:"300",group:"group",move:t.onMove},model:{value:t.groups,callback:function(e){t.groups=e},expression:"groups"}},t._l(t.groups,(function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:!(t.hiddenEmptyGroup&&0===e.contents.length),expression:"!(hiddenEmptyGroup && group.contents.length === 0)"}],key:s,staticClass:"link-group"},[i("div",{staticClass:"group-item"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.groupName,expression:"group.groupName"}],staticClass:"group-header"},[i("div",{staticClass:"group-left-info"},[i("div",{staticClass:"group-name"},[e.editing?t._e():i("div",{staticClass:"group-name-text"},[t._v(" "+t._s(e.groupName?e.groupName:"Untitled")+" ")]),e.editing?i("div",{staticClass:"group-name-input"},[i("a-input",{staticClass:"group-name-input",on:{pressEnter:function(a){return t.handleToggleEditGroupName(e,s)}},model:{value:t.newGroupName,callback:function(e){t.newGroupName=e},expression:"newGroupName"}})],1):t._e()]),t.canEdit?i("div",{staticClass:"group-edit-icon",on:{click:function(a){return t.handleToggleEditGroupName(e,s)}}},[i("a-tooltip",[i("template",{slot:"title"},[t._v(" Rename ")]),e.editing?t._e():i("a-icon",{style:{fontSize:"20px",color:"#15C39A"},attrs:{type:"edit"}})],2),e.editing?i("a-icon",{style:{fontSize:"20px",color:"#15C39A"},attrs:{type:"check"}}):t._e()],1):t._e()]),t.canEdit?i("div",{staticClass:"group-right-info"},[i("div",{staticClass:"group-action"},[i("a-button",{style:{"background-color":"#fff",color:"#000",border:"none"},attrs:{type:"primary"},on:{click:function(a){return t.handleLinkGroup(e)}}},[i("div",{staticClass:"btn-text"},[t._v(" + Link ")])])],1),i("a-popconfirm",{attrs:{"cancel-text":"No","ok-text":"Yes",title:"Delete group?"},on:{confirm:function(a){return t.handleDeleteGroup(e)}}},[i("span",{staticClass:"delete-action"},[i("img",{attrs:{src:a("1ffa")}})])])],1):t._e()]),i("draggable",{staticStyle:{width:"100%","min-height":"50px"},attrs:{disabled:!t.canEdit,animation:"300",group:"link-content"},on:{add:t.handleDragContent,update:t.handleDragContent,end:t.handleDragEnd},model:{value:e.contents,callback:function(a){t.$set(e,"contents",a)},expression:"group.contents"}},t._l(e.contents,(function(e){return i("div",{key:e.id,staticClass:"group-link-item"},[i("div",{staticClass:"left-info"},[i("div",{staticClass:"icon"},[i("content-type-icon",{attrs:{type:e.type}})],1),i("div",{staticClass:"name",on:{click:function(a){return t.handleViewDetail(e)}}},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t._v(" Click and drag tasks to move between categorys ")]),t._v(" "+t._s(e.name?e.name:"untitled")+" ")],2)],1),e.type===t.typeMap.task?["fa"===e.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag green-active-task-type"},[t._v(" "+t._s(e.taskType)+" ")]):t._e(),"sa"===e.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag red-active-task-type"},[t._v(" "+t._s(e.taskType)+" ")]):t._e(),"activity"===e.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag blue-active-task-type"},[t._v(" "+t._s(e.taskType)+" ")]):t._e()]:t._e(),e.isCreated?i("div",{staticClass:"downloaded-icon"},[i("a-tooltip",{attrs:{placement:"top",title:"already saved in my content"}},[i("downloaded-svg")],1)],1):t._e()],2),i("div",{staticClass:"right-info"},[i("div",{staticClass:"date"},[t._v(t._s(t._f("dayjs")(e.createTime)))]),i("div",{staticClass:"status"},[0===e.status?[t._v("Draft")]:t._e(),1===e.status?[t._v("Published")]:t._e()],2),t.canEdit?i("div",{staticClass:"more-action-wrapper action-item-wrapper"},[i("a-dropdown",[i("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"more"}}),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("a-popconfirm",{attrs:{title:t.$t("teacher.my-content.action-delete")+"?","cancel-text":"No","ok-text":"Yes"},on:{confirm:function(a){return t.handleDeleteLinkItem(e)}}},[i("a",{staticClass:"delete-action",attrs:{href:"#"}},[i("a-icon",{attrs:{type:"delete"}}),t._v(" "+t._s(t.$t("teacher.my-content.action-delete"))+" ")],1)])],1),i("a-menu-item",[i("a",{on:{click:function(a){return t.handleEditLinkItem(e)}}},[i("a-icon",{attrs:{type:"form"}}),t._v(" "+t._s(t.$t("teacher.my-content.action-edit"))+" ")],1)])],1)],1)],1):t._e()])])})),0)],1)])})),0)]:t._e()],2),i("a-modal",{attrs:{"dialog-style":{top:"0px"},footer:null,destroyOnClose:"",width:"900px"},model:{value:t.selectLinkContentVisible,callback:function(e){t.selectLinkContentVisible=e},expression:"selectLinkContentVisible"}},[i("div",{staticClass:"my-modal-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.linkTitle)+" ")]),i("div",{staticClass:"link-content-wrapper"},[i("new-my-content",{attrs:{"default-group-name":t.subDefaultGroupName,"filter-type-list":t.subFilterTypeList,"from-id":t.fromId,"from-type":t.fromType,"group-name-list":t.groupNameList,mode:"common-link","selected-list":t.selectedList,"show-create":t.showCreate,"show-tabs":t.showTabs},on:{cancel:function(e){t.selectLinkContentVisible=!1},ensure:t.handleEnsureSelectedLink}})],1)]),i("a-drawer",{attrs:{closable:!1,visible:t.previewVisible,destroyOnClose:"",placement:"right",width:"1000px"},on:{close:function(e){t.previewVisible=!1}}},[i("div",{staticClass:"preview-wrapper-row"},[i("div",{staticClass:"view-back"},[i("a-button",{staticClass:"preview-back-btn",attrs:{type:"primary",shape:"round"},on:{click:function(e){t.previewVisible=!1}}},[i("a-icon",{style:{"font-size":"12px"},attrs:{type:"left"}}),t._v("Back")],1)],1),t.previewCurrentId&&t.previewType?i("div",{staticClass:"detail-wrapper"},[i("common-preview-v2",{attrs:{id:t.previewCurrentId,type:t.previewType}})],1):t._e()])])],1)},s=[],n=a("2909"),o=(a("a9e3"),a("159b"),a("d3b7"),a("498a"),a("9afb")),r=a("9586"),l=a("1e7f"),c=a("3f76"),d=a("8f46"),u=a("823b"),p=a("adfc"),h=a("b76a"),f=a.n(h),m=a("1077"),v=a.n(m),g={name:"PlanLink",components:{ContentTypeIcon:d["a"],NewMyContent:l["a"],MyContentSelector:r["a"],CommonPreviewV2:p["a"],draggable:f.a,DownloadedSvg:v.a},props:{fromType:{type:Number,required:!0},fromId:{type:String,required:!0},filterType:{type:Number,default:0},hiddenEmptyGroup:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!0},isLibrary:{type:Boolean,default:!1}},computed:{groupNameList:function(){var t=[];return this.groups.forEach((function(e){t.push(e.groupName)})),t}},data:function(){return{defaultGroupName:"Untitled category",defaultGroupNameEditMode:"view",defaultGroupOtherContents:[],linkGroupLoading:!0,ownerLinkGroupList:[],othersLinkGroupList:[],groups:[],subDefaultGroupName:["Untitled category"],currentGroupId:null,selectLinkContentVisible:!1,typeMap:c["e"],previewVisible:!1,previewCurrentId:"",previewType:"",subFilterTypeList:[c["e"].evaluation],showCreate:!0,showTabs:!0,linkTitle:"Link Content",editingGroup:"",groupRransition:[],newGroupName:null,selectedList:[]}},created:function(){this.$logger.info("load PlanLink with id["+this.fromId+"] fromType["+this.fromType+"]"),this.subFilterTypeList=[c["e"].task],this.getAssociate()},methods:{getAssociate:function(){var t=this;this.$logger.info("GetAssociate id["+this.fromId+"] fromType["+this.fromType+"]"),this.linkGroupLoading=!0,Object(o["GetAssociate"])({id:this.fromId,type:this.fromType,published:this.isLibrary?1:0}).then((function(e){t.$logger.info("CommonLink GetAssociate response",e),t.groups=e.result.groups,t.$logger.info("formatted owner",e.result.owner),t.$logger.info("formatted others",e.result.others),t.othersLinkGroupList=[],t.ownerLinkGroupList=e.result.owner,t.groups.forEach((function(e){e.editing=!1,e.contents=[],t.ownerLinkGroupList.forEach((function(t){t.group===e.groupName&&(e.contents=t.contents)}))})),t.groups=t.groups.sort((function(t,e){return t.groupName?1:-1})),t.$logger.info("formatted groups",t.groups),t.$logger.info("ownerLinkGroupList",t.ownerLinkGroupList),e.result.others.forEach((function(e){var a;(a=t.othersLinkGroupList).unshift.apply(a,Object(n["a"])(e.contents))})),t.$logger.info("othersLinkGroupList",t.othersLinkGroupList),t.$emit("group-name-list-update")})).finally((function(){t.linkGroupLoading=!1}))},handleEnsureSelectedLink:function(t){this.$logger.info("handleEnsureSelectedLink",t),this.selectLinkContentVisible=!1,this.getAssociate()},handleLinkGroup:function(t){var e=this;this.$logger.info("handleLinkGroup",t),this.subDefaultGroupName=t.groupName,this.selectLinkContentVisible=!0,this.selectedList=[],t.contents.forEach((function(t){e.selectedList.push(t.type+"-"+t.id)})),this.fromType===c["e"]["unit-plan"]?this.subFilterTypeList=[c["e"].task]:this.filterType===c["e"].task&&(this.subFilterTypeList=[c["e"].evaluation,c["e"]["unit-plan"]])},handleToggleEditGroupName:function(t,e){var a=this;this.$logger.info("handleToggleEditGroupName",t),t.editing?function(){var i="Untitled group ",s=1;while(1){var n=!0;if(a.groups.forEach((function(t){t.groupName===i+s&&(n=!1)})),n){i+=s;break}s++}t.groupName=a.newGroupName&&a.newGroupName.trim().length?a.newGroupName:i,Object(o["AddOrSaveGroupName"])({fromId:a.fromId,fromType:a.fromType,id:t.id,groupName:t.groupName}).then((function(t){a.$logger.info("AddOrSaveGroupName",t)})).finally((function(){t.editing=!1,a.$set(a.groups,e,t)}))}():(this.newGroupName=t.groupName,t.editing=!0,this.$set(this.groups,e,t))},handleDeleteGroup:function(t){var e=this;this.$logger.info("handleDeleteGroup",t),Object(o["DeleteGroup"])({fromId:this.fromId,fromType:this.fromType,id:t.id}).then((function(t){e.$logger.info("DeleteGroup",t),e.getAssociate()}))},handleViewDetail:function(t){u["info"]("handleViewDetail",t),this.previewCurrentId=t.id,this.previewType=t.type,this.previewVisible=!0},handleEditLinkItem:function(t){u["info"]("handleEditLinkItem",t),t.type===c["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+t.id,"_blank"):t.type===c["e"].task?window.open("/teacher/task-redirect/"+t.id,"_blank"):t.type===c["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+t.id,"_blank")},handleDeleteLinkItem:function(t){var e=this;this.$logger.info("handleDeleteLinkItem",t),Object(o["AssociateCancel"])({fromId:this.fromId,fromType:this.fromType,toId:t.id,toType:t.type}).then((function(t){e.$logger.info("handleDeleteLinkItem response ",t),e.getAssociate()}))},handleDragEnd:function(){var t=this;u["info"]("handleDragEnd ",this.groups),this.groups.forEach((function(e,a){t.$set(t.groups,a,e)})),Object(o["SaveGroupItems"])({fromId:this.fromId,fromType:this.fromType,groups:this.groups}).then((function(e){t.$logger.info("AddOrSaveGroupName",e)})).finally((function(){}))},onMove:function(t,e){return!!t.draggedContext.element.groupName&&!!t.relatedContext.element.groupName},handleDragContent:function(t,e){this.$logger.info("PlanLink handleDragContent",t,this.groups,e);var a=JSON.parse(t.item.dataset.item);this.$logger.info("drag in data ",a)}}},y=g,C=(a("8b49"),a("0c7c")),w=Object(C["a"])(y,i,s,!1,null,"39bd8b28",null);e["a"]=w.exports},"1d3c":function(t,e,a){},"1e7f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-content"},[t.showTabs?i("div",{staticClass:"display-type-toggle"},[-1!==t.filterTypeList.indexOf(t.typeMap["unit-plan"])?i("div",{class:{"display-type-item":!0,"active-display-type":t.currentType===t.typeMap["unit-plan"]},on:{click:function(e){return t.handleToggleDisplayType(t.typeMap["unit-plan"])}}},[t._v(" "+t._s(t.$t("teacher.my-content.unit-plan-type"))+" ")]):t._e(),-1!==t.filterTypeList.indexOf(t.typeMap.task)?i("div",{class:{"display-type-item":!0,"active-display-type":t.currentType===t.typeMap.task},on:{click:function(e){return t.handleToggleDisplayType(t.typeMap.task)}}},[t._v(" "+t._s(t.$t("teacher.my-content.tasks-type"))+" ")]):t._e(),-1!==t.filterTypeList.indexOf(t.typeMap.evaluation)?i("div",{class:{"display-type-item":!0,"active-display-type":t.currentType===t.typeMap.evaluation},on:{click:function(e){return t.handleToggleDisplayType(t.typeMap.evaluation)}}},[t._v(" "+t._s(t.$t("teacher.my-content.evaluation-type"))+" ")]):t._e()]):t._e(),t.showCreate?i("div",{staticClass:"create-new-action"},[i("div",{staticClass:"create-action"},[i("a-button",{attrs:{type:"primary",shape:"round",icon:"plus",loading:t.createLoading},on:{click:t.handleEnsureCreate}},[t._v(" Create New "+t._s(t.currentTypeLabel)+" ")])],1)]):t._e(),i("div",{staticClass:"content-wrapper"},[i("a-skeleton",{attrs:{loading:t.skeletonLoading,active:""}},[i("div",{staticClass:"content-list"},["list"===t.dataListMode?i("a-list",{attrs:{size:"large",pagination:t.pagination,"data-source":t.myContentList,loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e){return i("a-list-item",{key:"item.key",class:{"my-list-item":!0,"active-item":-1!==t.mySelectedList.indexOf(e.type+"-"+e.id),"active-new-item":e.id===t.editId},attrs:{"data-id":e.type+"-"+e.id}},[i("div",{staticClass:"select-block",on:{click:function(a){return t.handleLinkItem(e,a)}}},[-1===t.mySelectedList.indexOf(e.type+"-"+e.id)?i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):t._e(),-1!==t.mySelectedList.indexOf(e.type+"-"+e.id)?i("div",{staticClass:"selected-icon"},[i("img",{attrs:{src:a("7aa6")}})]):t._e()],1),i("span",{staticClass:"content-info-left"},[i("content-type-icon",{attrs:{type:e.type}}),i("span",{staticClass:"name-content"},[t.editId===e.id&&"input"===t.createNewNameMode?i("a-input",{ref:"inputRef",attrs:{size:"small",type:"text",placeholder:"Input name"},on:{blur:function(a){return t.handleConfirmName(e)},pressEnter:function(a){return t.handleConfirmName(e)}},model:{value:t.createNewName,callback:function(e){t.createNewName=e},expression:"createNewName"}}):i("a-tooltip",{attrs:{title:"Rename"}},[i("span",{staticClass:"name-text",on:{click:function(a){return t.handleRename(e)}}},[t._v(" "+t._s(e.name?e.name:"Untitled")+" ")])])],1)],1),i("span",{staticClass:"content-info-right"},[i("span",{staticClass:"status"},[0===e.status?[t._v("Draft")]:t._e(),1===e.status?[t._v("Published")]:t._e()],2),i("span",{staticClass:"update-time"},[t._v(" "+t._s(t._f("dayjs")(e.updateTime||e.createTime))+" ")]),i("div",{staticClass:"action"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item",on:{click:function(a){return t.handleViewDetail(e,a)}}},[i("span",{staticClass:"btn-text"},[t._v("Preview")])]),i("div",{staticClass:"action-item",on:{click:function(a){return t.handleEditItem(e)}}},[i("span",{staticClass:"btn-text"},[t._v("Edit")])])]),t.mode===t.displayMode.Link?i("div",{attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link this content to my Unit?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleLinkItem(e,a)}}},[i("span",[i("a-icon",{attrs:{type:"form"}}),t._v(" Link ")],1)])],1)])]):t._e(),t.mode===t.displayMode.Refer?i("div",{attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item refer-item"},[i("a-button",{staticClass:"refer-btn",attrs:{type:"primary"},on:{click:function(a){return t.handleReferItem(e,a)}}},[i("img",{staticClass:"btn-icon btn-icon-white",attrs:{src:a("e568")}}),i("img",{staticClass:"btn-icon btn-icon-color",attrs:{src:a("83d7")}}),i("div",{staticClass:"btn-text"},[t._v(" Refer ")])])],1)])]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.mode===t.displayMode.Evaluation,expression:"mode === displayMode.Evaluation"}],attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleLinkItem(e,a)}}},[i("div",{staticClass:"link-item"},[i("img",{staticClass:"link-icon",attrs:{src:a("de1a")}}),t._v(" "+t._s("Link this evaluation to this "+(e.type===t.typeMap.task?"task":e.type===t.typeMap.task?"lesson":""))+" ")])])],1)])])])])])}}],null,!1,2451434729)}):t._e(),"card"===t.dataListMode?i("a-list",{attrs:{size:"large",pagination:t.pagination,"data-source":t.myContentList,loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e){return i("div",{key:"item.key",staticClass:"my-card-list-item"},[i("div",{staticClass:"cover-img-wrapper"},[i("div",{staticClass:"cover-image",style:{backgroundImage:"url('"+e.image+"')"}})]),i("div",{staticClass:"item-intro"},[i("div",{staticClass:"page-info"},[i("span",{staticClass:"page-num-tag"},[t._v(" 1/1 ")])]),i("div",{staticClass:"main-title",on:{click:function(a){return t.handleViewDetail(e,a)}}},[t._v(" "+t._s(e.name?e.name:"Untitled")+" ")]),i("div",{staticClass:"sub-title"},[t._v(" "+t._s(t._f("dayjs")(e.createTime))+" ")])]),i("div",{staticClass:"item-action-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.mode===t.displayMode.Link,expression:"mode === displayMode.Link"}]},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link this content to my Unit?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleLinkItem(e,a)}}},[i("span",[i("a-icon",{attrs:{type:"form"}}),t._v(" Link ")],1)])],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.mode===t.displayMode.Refer,expression:"mode === displayMode.Refer"}]},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item refer-item"},[i("a-button",{staticClass:"refer-btn",attrs:{type:"primary"},on:{click:function(a){return t.handleReferItem(e,a)}}},[i("img",{staticClass:"btn-icon btn-icon-white",attrs:{src:a("e568")}}),i("img",{staticClass:"btn-icon btn-icon-color",attrs:{src:a("83d7")}}),i("div",{staticClass:"btn-text"},[t._v(" Refer ")])])],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.mode===t.displayMode.Evaluation,expression:"mode === displayMode.Evaluation"}]},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleLinkItem(e,a)}}},[i("div",{staticClass:"link-item"},[i("img",{staticClass:"link-icon",attrs:{src:a("de1a")}}),t._v(" "+t._s("Link this evaluation to this "+(e.type===t.typeMap.task?"task":e.type===t.typeMap.task?"lesson":""))+" ")])])],1)])])]),i("div",{staticClass:"card-action-icon"},[-1!==t.mySelectedList.indexOf(e.type+"-"+e.id)?i("img",{attrs:{src:a("7aa6")}}):t._e()])])}}],null,!1,2986142521)}):t._e(),i("div",{staticClass:"modal-ensure-action-line"},[i("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:t.handleCancel}},[t._v("Cancel")]),i("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round",loading:t.ensureLoading},on:{click:t.handleEnsure}},[t._v("Ok")])],1)],1)]),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",width:"800px",closable:!1,visible:t.previewVisible},on:{close:t.handlePreviewClose}},[i("div",{staticClass:"preview-wrapper"},[i("a-row",{staticClass:"preview-wrapper-row"},[i("a-col",{attrs:{span:"3"}},[i("div",{staticClass:"view-back",on:{click:t.handlePreviewClose}},[i("div",{staticClass:"back-icon"},[i("img",{attrs:{src:a("217a")}})])])]),i("a-col",{attrs:{span:"21"}},[i("div",{staticClass:"detail-wrapper"},[t.previewCurrentId&&t.previewType?i("div",{staticClass:"preview-detail"},[i("common-preview-no-link",{attrs:{id:t.previewCurrentId,type:t.previewType}})],1):t._e()])])],1)],1)])],1)])},s=[],n=a("3835"),o=a("b85c"),r=a("1da1"),l=(a("96cf"),a("a9e3"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("fb6a"),a("159b"),a("a434"),a("b0c0"),a("823b")),c=a("ea23"),d=a("7d7a"),u=a("9afb"),p=a("95c6"),h=a("3f76"),f=a("4803"),m=a("8f46"),v=a("4fb2"),g=a("57a5b"),y=a("69b3"),C=a("05be"),w=a.n(C),b=a("8d47"),k=a.n(b),T=a("9f06"),S=a("b199"),L=a("de0d"),I=a("1449"),_={name:"NewMyContent",components:{CommonPreviewNoLink:I["a"],ContentStatusIcon:f["a"],ContentTypeIcon:m["a"],UnitPlanPreview:c["default"],MaterialPreview:d["default"],NoMoreResources:y["a"],PuBuIcon:w.a,ListModeIcon:k.a},props:{filterTypeList:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}},mode:{type:String,default:g["a"].Link},selectedType:{type:String,default:"created-by-me"},currentId:{type:String,default:""},fromType:{type:Number,required:!0},fromId:{type:String,required:!0},defaultGroupName:{type:String,default:null},showTabs:{type:Boolean,default:!0},showCreate:{type:Boolean,default:!0},noSelectedTips:{type:String,default:"Please select at least one content."}},data:function(){var t=this;return{skeletonLoading:!0,loading:!0,createLoading:!1,loadFailed:!1,myContentList:[],displayMode:g["a"],currentStatus:"all-status",currentStatusLabel:this.$t("teacher.my-content.all-status"),currentType:null,currentTypeLabel:null,currentOwner:"all-owner",currentOwnerLabel:this.$t("teacher.my-content.all-owner"),previewVisible:!1,previewCurrentId:"",previewType:"",pagination:{onChange:function(e){l["info"]("pagination onChange",e),t.pageNo=e,t.loadMyContent()},showTotal:function(t){return"Total ".concat(t," items")},total:0,pageSize:10},pageNo:1,typeMap:h["e"],dataListMode:"list",createdType:"All",createNewName:"",createNewNameMode:"hide",mySelectedList:[],waitCancelAssociateMap:new Map,waitAddAssociateMap:new Map,editId:"",ensureLoading:!1}},watch:{selectedType:function(t){this.$logger.info("watch select type "+t),this.pageNo=1,this.myContentList=[],this.pagination.total=0,this.pagination.pageSize=8,this.loadMyContent()}},created:function(){this.$logger.info("NewMyContent filterTypeList",this.filterTypeList),this.filterTypeList.length&&(this.currentType=this.filterTypeList[0],this.currentTypeLabel=Object(h["b"])(this.filterTypeList[0])),this.$logger.info("currentTypeLabel "+this.currentTypeLabel),this.$logger.info("NewMyContent selectedList",this.selectedList),this.mySelectedList=this.selectedList.slice(),this.loadMyContent()},methods:{loadMyContent:function(){this.loading=!0,"Created by me"===this.createdType?this.getMyContent():"My Favorite"===this.createdType?this.getMyFavorites():"Shared"===this.createdType?(this.loading=!1,this.skeletonLoading=!1,this.$logger.info("shared coming soon!")):this.getMyContent()},handleToggleDataListMode:function(t){this.$logger.info("handleToggleDataListMode"+t),this.dataListMode=t},getMyContent:function(){var t=this,e=[];this.filterTypeList.forEach((function(t){e.push(h["e"][t])})),Object(u["FindMyContent"])({owner:h["c"][this.currentOwner],types:this.currentType?[this.currentType]:e,pageNo:this.pageNo,pageSize:this.pagination.pageSize,currentId:this.currentId}).then((function(e){l["info"]("getMyContent",e),e.result&&e.result.records&&e.result.records.length?(e.result.records.forEach((function(t,e){t.key=e})),t.myContentList=e.result.records,t.pagination.total=e.result.total):(t.myContentList=[],t.pagination.total=0),l["info"]("myContentList",t.myContentList)})).finally((function(){t.loading=!1,t.skeletonLoading=!1,t.$nextTick((function(){t.$refs.inputRef&&t.$refs.inputRef.focus()}))}))},getMyFavorites:function(){var t=this;this.$logger.info("getMyFavorites"),Object(p["FavoritesGetMyFavorites"])({type:this.currentType,pageNo:this.pageNo,pageSize:this.pagination.pageSize}).then((function(e){t.$logger.info("FavoritesGetMyFavorites response",e),e.result&&e.result.records&&e.result.records.length?(e.result.records.forEach((function(t,e){t.key=e})),t.myContentList=e.result.records,t.pagination.total=e.result.total,t.pagination.current=e.result.current):(t.myContentList=[],t.pagination.total=0)})).finally((function(){t.loading=!1,t.skeletonLoading=!1}))},toggleStatus:function(t,e){l["info"]("toggleStatus "+t+" label "+e),this.currentStatus=t,this.currentStatusLabel=e,this.loadMyContent()},toggleType:function(t,e){l["info"]("toggleType "+t+" label "+e),this.currentType=t,this.currentTypeLabel=e,this.loadMyContent()},toggleOwner:function(t,e){l["info"]("toggleOwner "+t+" label "+e),this.currentOwner=t,this.currentOwnerLabel=e,this.loadMyContent()},handleLinkItem:function(t,e){l["info"]("handleLinkItem",t),e.preventDefault(),e.stopPropagation();var a=t.type+"-"+t.id,i=this.mySelectedList.indexOf(a);-1!==i?(this.mySelectedList.splice(i,1),this.waitCancelAssociateMap.set(a,t),this.waitAddAssociateMap.delete(a)):(this.mySelectedList.push(a),this.waitAddAssociateMap.set(a,t),this.waitCancelAssociateMap.delete(a))},handleViewDetail:function(t,e){l["info"]("my content created by me handleViewDetail",t,e),e.preventDefault(),e.stopPropagation(),this.previewCurrentId=t.id,this.previewType=t.type,this.previewVisible=!0},handlePreviewClose:function(){l["info"]("handlePreviewClose"),this.previewCurrentId="",this.previewType="",this.previewVisible=!1},handleReferItem:function(t,e){l["info"]("handleReferItem",t),e.preventDefault(),e.stopPropagation(),v["b"].$emit(v["a"].ReferContentItem,{item:t})},handleToggleType:function(t){this.$logger.info("handleToggleType "+t),this.createdType=t,this.loadMyContent()},handleToggleDisplayType:function(t){this.$logger.info("handleToggleDisplayType"+t),this.currentType===t?(this.currentType=null,this.currentTypeLabel=null):(this.currentType=t,this.currentTypeLabel=Object(h["b"])(t)),this.$logger.info("after handleToggleDisplayType"+this.currentType),this.loadMyContent()},handleEnsureCreate:function(){var t=this;this.$logger.info("handleEnsureCreate "+this.currentType+" "+this.createNewName),this.createLoading=!0,this.createNewName="",this.currentType===this.typeMap.evaluation?Object(T["EvaluationAddOrUpdate"])({name:this.createNewName}).then((function(e){t.$logger.info("EvaluationAddOrUpdate response",e),t.editId=e.result.id,t.createNewNameMode="input";var a=t.typeMap.evaluation+"-"+t.editId;t.mySelectedList.push(a),t.waitAddAssociateMap.set(a,{id:t.editId,type:t.typeMap.evaluation}),t.loadMyContent()})).finally((function(){t.createLoading=!1})):this.currentType===this.typeMap.task?Object(S["TaskAddOrUpdate"])({name:this.createNewName}).then((function(e){t.$logger.info("TaskAddOrUpdate response",e),t.editId=e.result.id,t.createNewNameMode="input";var a=t.typeMap.task+"-"+t.editId;t.mySelectedList.push(a),t.waitAddAssociateMap.set(a,{id:t.editId,type:t.typeMap.task}),t.loadMyContent()})).finally((function(){t.createLoading=!1})):this.currentType===this.typeMap["unit-plan"]&&Object(L["UnitPlanAddOrUpdate"])({name:this.createNewName}).then((function(e){t.$logger.info("UnitPlanAddOrUpdate response",e),t.editId=e.result.id,t.createNewNameMode="input";var a=t.typeMap["unit-plan"]+"-"+t.editId;t.mySelectedList.push(a),t.waitAddAssociateMap.set(a,{id:t.editId,type:t.typeMap["unit-plan"]}),t.loadMyContent()})).finally((function(){t.createLoading=!1}))},handleCancel:function(){this.$emit("cancel")},handleEnsure:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i,s,r,l,c,d,p,h,f,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$logger.info("handleEnsure add group associate",t.waitAddAssociateMap,t.waitCancelAssociateMap,t.defaultGroupName),t.ensureLoading=!0,!t.waitCancelAssociateMap.size&&!t.waitAddAssociateMap.size){e.next=18;break}a={fromId:t.fromId,fromType:t.fromType,groupName:t.defaultGroupName,otherContents:[]},i=Object(o["a"])(t.waitAddAssociateMap);try{for(i.s();!(s=i.n()).done;)r=Object(n["a"])(s.value,2),l=r[0],c=r[1],-1===t.selectedList.indexOf(l)?a.otherContents.push({toId:c.id,toType:c.type}):t.$logger.info("handleEnsure waitAddAssociateMap item is selected skip "+l,c,t.selectedList)}catch(g){i.e(g)}finally{i.f()}d={fromId:t.fromId,fromType:t.fromType,others:[]},p=Object(o["a"])(t.waitCancelAssociateMap);try{for(p.s();!(h=p.n()).done;)f=Object(n["a"])(h.value,2),m=f[0],v=f[1],-1!==t.selectedList.indexOf(m)?d.others.push({toId:v.id,toType:v.type}):t.$logger.info("handleEnsure waitCancelAssociateMap item is no selected skip "+m,v,t.selectedList)}catch(g){p.e(g)}finally{p.f()}if(t.ensureLoading=!0,t.$logger.info("associate data",a),!a.otherContents.length){e.next=14;break}return e.next=14,Object(u["Associate"])(a);case 14:if(t.$logger.info("cancelAssociateData data",d),!d.others.length){e.next=18;break}return e.next=18,Object(u["AssociateCancel"])(d);case 18:t.ensureLoading=!1,t.$emit("ensure");case 20:case"end":return e.stop()}}),e)})))()},handleEditItem:function(t){l["info"]("handleEditItem",t),t.type===h["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+t.id,"_blank"):t.type===h["e"].task?window.open("/teacher/task-redirect/"+t.id,"_blank"):t.type===h["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+t.id,"_blank")},handleConfirmName:function(t){var e=this;this.createNewNameMode="hide",t.name!==this.createNewName&&(t.name=this.createNewName,Object(u["Rename"])({id:t.id,type:t.type,name:this.createNewName}).then((function(t){e.$logger.info("Rename response",t),t.success||e.$message.error(t.message)})))},handleRename:function(t){var e=this;this.editId=t.id,this.createNewNameMode="input",this.createNewName=t.name,this.$nextTick((function(){e.$refs.inputRef.focus()}))}}},A=_,M=(a("2d67"),a("0c7c")),D=Object(M["a"])(A,i,s,!1,null,"1eae7179",null);e["a"]=D.exports},"1f7f":function(t,e,a){"use strict";a("1d3c")},"1ffa":function(t,e,a){t.exports=a.p+"img/delete.531182ef.png"},"20de":function(t,e,a){var i=a("b2b7");t.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"30.75",height:"24.6",viewBox:"0 0 30.75 24.6"},children:[{tag:"g",attrsMap:{id:"黄色文件夹",transform:"translate(0)"},children:[{tag:"path",attrsMap:{id:"路径_406","data-name":"路径 406",style:"fill: #ce9f06;",class:"cls-1",d:"M269.187,4.28H258.341L255.592.494A1.286,1.286,0,0,0,254.676,0h-7.638c-.916,0-1.526.988-1.221,2.305l2.749,17.288a1.486,1.486,0,0,0,1.375,1.317h16.8a1.513,1.513,0,0,0,1.375-1.316l2.139-13.173c.305-1.153-.305-2.14-1.07-2.14Z",transform:"translate(-239.833)"}},{tag:"path",attrsMap:{id:"路径_407","data-name":"路径 407",style:"fill: #fff;",class:"cls-2",d:"M358.4,286.514V275.456h18.45v11.058Z",transform:"translate(-349.793 -268.839)"}},{tag:"path",attrsMap:{id:"路径_408","data-name":"路径 408",style:" fill: #ffcd2c;",class:"cls-3",d:"M29.158,229.582H15.641l-3.615-3.806a1.656,1.656,0,0,0-1.1-.5H1.5a1.552,1.552,0,0,0-1.415,2.15L4.64,243.31a1.766,1.766,0,0,0,1.728,1.159H25.413a1.768,1.768,0,0,0,1.729-1.157l3.588-12.076a1.523,1.523,0,0,0-1.572-1.653Z",transform:"translate(0 -219.868)"}}]}]})}},"214d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-tag"},[a("div",{staticStyle:{"font-family":"Inter-Bold"}},[t._v(" "+t._s(t.knowledge.name)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tags.length,expression:"tags.length"}],staticClass:"tag-select-wrapper"},[a("a-row",[a("a-col",{attrs:{offset:"0",span:"24"}},[a("div",{staticClass:"skt-tag-list"},t._l(t.tags,(function(e){return a("div",{key:e,staticClass:"skt-tag-item "},[a("a-tag",{staticClass:"tag-item",attrs:{closable:!0},on:{close:function(a){return t.closeTag(e)}}},[t._v(" "+t._s(e)+" ")])],1)})),0)])],1)],1),a("a-spin",{directives:[{name:"show",rawName:"v-show",value:t.tagLoading,expression:"tagLoading"}],staticClass:"spin-loading"}),a("a-row",[a("a-col",[a("div",{staticClass:"tag-search-input"},[a("a-input-search",{staticClass:"search-input",attrs:{size:"large",placeholder:"Search tag"},on:{search:t.searchTag,keyup:t.searchTag},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleKeyup.apply(null,arguments)}},model:{value:t.inputTag,callback:function(e){t.inputTag=e},expression:"inputTag"}})],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tagSearchList.length||t.inputTag,expression:"tagSearchList.length || inputTag"}],staticClass:"skt-tag-wrapper"},[a("a-row",[a("a-col",{attrs:{offset:"0"}},[a("div",{staticClass:"skt-tag-list"},[a("div",{staticClass:"triangle"}),a("div",{staticClass:"search-tag-wrapper tag-wrapper"},t._l(t.tagSearchList,(function(e){return a("div",{key:e,staticClass:"skt-tag-item"},[a("a-tag",{class:{"tag-item":!0,"tag-disable":t.tags.indexOf(e)>-1},attrs:{draggable:"true"},on:{click:function(a){return t.selectChooseTag(e)}}},[t._v(" "+t._s(e)+" ")])],1)})),0),a("div",{staticClass:"create-tag-wrapper tag-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.tagIsExist(t.inputTag,t.tagSearchList)&&t.inputTag&&t.inputTag.length>=1,expression:"!tagIsExist(inputTag,tagSearchList) && inputTag && inputTag.length >= 1"}],staticClass:"skt-tag-create-line",on:{click:t.handleCreateTagByInput}},[a("div",{staticClass:"create-tag-label"},[t._v(" Create ")]),a("div",{staticClass:"create-tag"},[a("a-tag",{staticClass:"created-tag-item"},[t._v(" "+t._s(t.inputTag)+" ")])],1)])])])])],1)],1),t.contentLoading?t._e():a("div",{directives:[{name:"show",rawName:"v-show",value:!t.inputTag,expression:"!inputTag"}],staticClass:"hot-select-wrapper"},[a("a-row",[a("a-col",{attrs:{offset:"0",span:"24"}},[a("div",{staticClass:"title"},[t._v("Hot")]),a("div",{staticClass:"skt-tag-list"},t._l(t.hotList,(function(e,i){return a("div",{key:i,staticClass:"skt-tag-item"},[a("a-tag",{class:{"tag-item":!0,"tag-disable":t.tags.indexOf(e)>-1},on:{click:function(a){return t.addTag(e)}}},[t._v(" "+t._s(e)+" ")])],1)})),0)]),a("a-col",{attrs:{offset:"0",span:"24"}},[a("div",{staticClass:"title"},[t._v("Knowledge")]),a("div",{ref:"knowledgeTagRef",class:{"skt-tag-list":!0,"hide-some":t.isHideSome}},t._l(t.recommendList,(function(e,i){return a("div",{key:i,staticClass:"skt-tag-item "},[a("a-tag",{class:{"tag-item":!0,"tag-disable":t.tags.indexOf(e)>-1},on:{click:function(a){return t.addTag(e)}}},[t._v(" "+t._s(e)+" ")])],1)})),0),a("div",{staticClass:"downUp"},[t.isHideSome?a("a-icon",{attrs:{type:"double-right"},on:{click:t.showAll}}):t._e(),t.isHideSome?t._e():a("a-icon",{attrs:{type:"double-left"},on:{click:t.showAll}})],1)])],1)],1),a("a-skeleton",{attrs:{loading:t.contentLoading,active:""}})],1)},s=[],n=(a("a434"),a("498a"),a("823b")),o=a("db6a"),r=a("d33b4"),l=a("4fcf"),c=l.debounce,d={name:"LearnOutAddTag",components:{},mixins:[r["a"]],computed:{},props:{knowledge:{type:Object,default:function(){}}},data:function(){return{tags:this.knowledge.tags?this.knowledge.tags:[],hotList:[],recommendList:[],tagLoading:!1,contentLoading:!1,visible:!0,inputTag:"",tagName:"",tagSearchList:[],userTags:[],isHideSome:!0}},created:function(){this.debouncedSearchKnowledge=c(this.searchTag,500),this.$logger.info("knowledge ",this.knowledge),this.loadRecommendTags()},watch:{},methods:{handleOk:function(){},closeTag:function(t){this.tags.splice(this.tags.indexOf(t),1),this.$emit("handle-select-tags",this.tags),this.$logger.info("handle-select-tags ",this.tags)},selectChooseTag:function(t){this.addTag(t)},loadRecommendTags:function(){var t=this;this.contentLoading=!0,Object(o["FindRecommendByKnowledgeId"])({knowledgeId:this.knowledge.knowledgeId}).then((function(e){t.$logger.info("loadRecommendTags response",e.result),e.success?(t.hotList=e.result.hots,t.recommendList=e.result.tags,t.contentLoading=!1,setTimeout((function(){t.$refs.knowledgeTagRef.offsetHeight<200&&(t.isHideSome=!1)}),100)):t.$message.error(e.message)}))},addTag:function(t){-1===this.tags.indexOf(t)&&this.tags.push(t),this.$emit("handle-select-tags",this.tags),this.$logger.info("handle-select-tags ",this.tags)},handleKeyup:function(){this.$logger.info("tag handleKeyup ",this.inputTag),this.debouncedSearchKnowledge(this.inputTag),this.handleCreateTagByInput()},handleCreateTagByInput:function(){this.$logger.info("skill handleCreateTagByInput "+this.inputTag),this.addTag(this.inputTag),this.inputTag=""},searchTag:function(){var t=this;n["info"]("searchTag",this.inputTag);var e=this.inputTag;e&&"string"===typeof e&&e.trim().length>=3?Object(o["FindRecommendByKnowledgeId"])({knowledgeId:this.knowledge.knowledgeId,key:e}).then((function(e){n["info"]("searchByDescription",e),t.tagSearchList=e.result.tags})):this.tagSearchList=[]},handleEnsureSelectData:function(){this.addTagVisible=!1,this.knowledge.tags=this.tags,this.$emit("remove-learn-outs",this.tags)},showAll:function(){this.isHideSome=!this.isHideSome}}},u=d,p=(a("9ee6"),a("0c7c")),h=Object(p["a"])(u,i,s,!1,null,"29f8bd7a",null);e["a"]=h.exports},"217a":function(t,e,a){t.exports=a.p+"img/back.c46424eb.png"},"24e3":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAmCAYAAAC29NkdAAAAAXNSR0IArs4c6QAAA2BJREFUWEfNmEloFEEUhr83iTHGLQqCMaKIIO4KehARNJLMaDwYMQRF8SxuF8WD4JKgB1HEBZFchIAobogLWWYSoiAo0aCCIgQRcQUXEteAmfST7jjjOHv3lGCdBrr+731dXVNd1UKapi1U4aMaZQZCKcpIhNfAAyya+MFlWUVPWsYNRlHAamA5wlyU8QifgVfAY5Tz4qcxFUOSXdAQSxCOosxJVxz4DpzAYr8EnN/Rpu0MI8weYDNQlJajdGCxVZbREd8vQVBb2Y1Sl0Es/vJD+qmUZbyzL2gbE7GcUZnughMG9kkFB2IzfwlqiJPAJhfQ2K7PgTL6KSCPW8A4TxylTvzsjWSjgtrKNpRjnqCRkPIEwQdMy4GjWNRIgEs2wxHUFibh4wkwJAewuajyBYup9pQZEAxyDmGNuQoGSEq9+Nko2kYpFi+AfANYk4he+hgrGmQ7wmGTZGMsZYMt2IwQMAY1CVIaREO8BUpMcg2yOm1BNQg0jfpoC9oreJ5pshGeYtmC3UCxEaB5SI8t+AiYbZ5thPjQFmwANhjBmYbYi7W2sA4fZ0yzDfGqRK9TRCFv/rt5qHQTpiSyWTiEjx2G7toMxqJWAuwbEGxkDIN4BowwQ8+RorxnEJOljG+x+8GdKAdzRJuJKxvFT70N+yPYTj593EWYZ6aKZ8o9brNAarH+EnQedTMz8NGJMNgzPrdgLzBPKngawSQemkJsBY7nVsdzepNUcCo2nfzYGeQiQrXnMt6C56UicVefXLCdQsKEgEXearlO3aIEv8zkZ3wyqaAzH69QzDDn+Piv39Od/KBMVvI12W2lFPz9pykhjzvARNdjkl2gC2GhlPMpVfe0go5kK1NQbv6DXfdL8lksZc6BLWXLKBgjac/JCdkNTMZeXeQTyCSXsA6mw2qQcQjNwKyM5dOCuE+YSqnkQzacrEYwAtJ2ignTBCzIBp6kTxvdVEkN37LNuxJ0HncLQ8njGsrSbIs4/ZQr9LBGahKXkpznYDxAL1DAaBrQrD+XnKKcLSID71c3zfUIRh+3IoTYj7ArTcF+lJ3i54gbqdi+ngWjokHWIpwGCuMkehDWSrnzx/LcchZ0pleQ+QjXomul8ow+VsgKujyb/Q4aEXQkrzKcItZjf37s5WyqV5db4V8Yk/SC1H4NzQAAAABJRU5ErkJggg=="},"27aa":function(t,e,a){"use strict";a("5bb5")},"27f0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAHs0lEQVRoQ+Wbf2xb1RXHv+c9203a9AetQn/Edl7IqKYq1cYoEhs0td0utFC0MamghcFAMMIPiUpsTC0//hlsoE6ruk3rWpBoGWsRaCtsLeNXG7sdoZ2SMnWhIAQsL7aT/kCkTWc3sfP8zvTsxYl/JL7Pz40d7f1l6X3vOefjc9959953L+ESXT0epUoi/WqwtIKIlgPcRKA6BtcQqMZwy+AIgSIM7iOibjB3S8RdcZ0+aAiow5ciNCql0bCnzgnY2liSbgDwNQCOIu3HAZwg1t8Ca885A33hIu3kNCsJcN8q97d1WdoEwAOQVKrgUnZYByMgsf5MXSB40KptS8BBn6uFID8L0FVWAxFpz0AnoD3hbg+9I6LPpykK+JRHUTQJWwG6pVjHltrp/JoNeGRxQFXN2jENHPK4fwBJ2gHQLLPOSqvnKHT9flcg+EczdoWB+69eMjMxx74DJN1hxsGl1jJ4t20w/tCS4/0XRXwJAYe+6ZyPavtbAK4RMTrVGmZ0SVJ8rfNQ35eFfBcENl41TI43QWgqZKys95lPcjzR4u4I9U8Wx6TAA2uumBtN8HsVDztKyHxSY1zfEFDPTwQ9IbAxUpKJDhLhurJmzqRzZnQkmNdMNFKbEDjoU3YR6C6T/ipCzjrvdgfUu4Xfw2GP8kOWaHdFRF9kEITEnc724EvZzXMyrDbXN8g26i7/e7ZI0rFmFxKa/nXlSG/PeEs5wCGfsq9sIyjLjJkGGPy6u13NGA1mAPf5XC06bG+b8TtrfStqbr0X9jrFTDNTWk5oiH3QgcHnt2Dk849NtZWg3VA3buydARz2KccZ9A1RiwbovLbHROWWdfpQFGfuWYvEmT5xW8z/cPnVa0cbpIHV5nqfbJMOiVoixwws3tcFqXpqh9TRv72Cc7/aLBpmSqez1xVQA8bPNHDIq7wBohtFLcmLnFi854iovGS6+CfdOPvgd8zZY/0Nl793fRr405WLaqvsVacAkkUtlQtYOx3G6dubRcNM6gjQhkaGllz599NfJDMc8igbIdE2M1amE3CKK/Gwqz342xSwT+kA6FtWgfWLUQwfOwS+GDVjakKtfWkTHEuXZ9wvJsPJLDPec/p7VtJZT21NjGoGQLCbiTJfhs9vfwrx7k4zZgpq5/3kWTgal6V1xQIzY6SKI/Mp5FHWQqI3C3rOEuQDHvj5RmjhjIGNWbM5+jn3PIqqFSstA/+vWq+jsFfZzES/MBtZPuCRzz9C5MDLQCJh1lxevW2REzW3tYHksVpabIYNB8z64xT2Kbu4iFnR9CtaRrXm3VRMwTL+rekIDPD7RpfuYSLTA+HpCEzMqpHhLwGab/ahywdsDPuMSs1DQguIBV3aly5H7S9fglQzpzRFCzxAIV/DEICqgt4FqvTpO7zQ+nvNmppUP3/zVsxc890SAWO4pMDntj2B6P69JQOm6plYuPMAbOOmnlaqNJAELl2XNkjjn/yrZF3a1rAU8tzMp80aMA/8HxYtr3IUROkJsmh/nI5VGszHKOhVXiSiO0VBR3X5gPXIBcROHge0kbQ5uXZxzgRAxFdk/17ogwOY/f37QbKtJEWLmf9AYW/Dk0z4mUgQ4zV5X0vv7kPiVCjHVLVnPezuRmEX53/3FCL7diX1l/34Gcy68baSABPzYyWdPERLADweFrKMy7e9Cseyse/tloqWzutKOj1MdekuQNPGuvSChXB81djuMXbFPv4nLrywFVXXNGP2rT9K38iGXfD4b1C9al1GWwvAw4N6pDa1AOBVDoPI1LqJlaL1xaa7EOtMrYfVfO9uzHvoSYjAGvqigZnbXX51dRI46FMeINB24YfM4uQh+vafcG7LT9Pu7I3LYEwtk5csI19mR8XFAjP4QXe7+vsksLGIV22v7mdgrBwWoLeSYcP0f/78Aga3P53ppQCshQzHh0eGnOlFvFS3rj8Akm4SzbJV4BxoAVijTTHLtMT8V6dfTa7tptelg82uZrLZDosCl2ohPrJ/Dy4e/Atmb7gX1de3FHRfzEI8a9oq95FQsmhkfGoJeZUOkPjq5TT51PK+y6+mP+pnA68C4AdRwb0fo6mYdXNrstKaGVgUTGOWgOMxxE4cM/8xjZkBeF1+Nd1zcz+XepU9IGo1G1RF6pn3uvzq7eNjywEOXudaAof8IRFdVpEQokExn+N4oil7V0/erhv2uTcw5FdFbVeijnW+xR1QX8+ObcJnNeRVdoLovkqEKRQTg3e429UH8ukmBP5wGRxzFyrvgMgoZNPnYj48eEZtafoIxp7rnGvSatzjUebZCAEQZY7+KxWf+YTG8BS1MW2UadpsPQS6OaattbT1cBTayLRMdKBSd+UZu+9GZLqp8eC/Bwt1PuEBxqdfwYwZLuXXRNRWyOhU3mfmnbGQuvHKzxAT8SsMPGos5K1vJZJ2MpA8mVKui4AIs97m8veaWgg3DWwAJo8AAFshlekIAPg1mz5FRwDGZ9Q45AHYnqap2zjeyeU45JHdjXu97tUy5E1MWHMpujgB7yb0xJb6ch/jyYZLvcLkVkDeAMIKS/CMLmb9FYolXnYdDZvYeje516KeYRGQ8Oq6BWDZxyytAKiRiBuY6fJ8R/GI+Cwz9YD4MzB3Yjjhdx0ND4j4Mav5LxqBYn78Go3TAAAAAElFTkSuQmCC"},"2ae5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAID0lEQVRoQ+Wbe3BU5RXAf2c3PCSppTDptKgzWNuOVZQkazt9iKAgBCyFkKzTUkuttkRw0LFTrVDpILbW0crQMoPo2GnQNgzNA1QoiopBhUohD4xQp+qQmSo6UCjKK4TsPZ0vN4/N5t69j90kdPrN5J/s+c45v/ude77zPa7QT03HThrOyFExonIVcAUq4xAuQMlDyOswq5xAOIHyAUozaDMqezj27wZpqWvtD9ckm0r1yjkXEo2UIzINGI8wNJR+pQ3Yi+rzJKwn5M3a90PpceiUFWAtiF9PhHuBSQiRbDnXGQUWaB1q/UYaa1/KVHdGwBormwo8BFKYqSO++iu7Seh9srd6qy/5bI2wFsweSyRnBSIlYQ1n1E91A1b7T6VpY0tQPYFHWItKb4LIGoTcoMayKq+cBOs2aaj5UxC9voE1NnMEOnQNEvlBEAP9LqtWBdJ2u9Q/d8qPLV/Aenl8FMN4HuGrfpQOuIzqHk4liuXtDUe8bHsCd0w1Q6JbgHFeygb3d92H1TZVGp89mM6PtMAai38aeP3ch+1C1H0k2q+Wpo3H3KBdgTsqpdH5Zt771uCOXGDrOzhyeIpbpeYOXBT/I8LNgc2dCx3UqpCGmh85ueIIrLHSH0Kkwpfv474EN8+Cgkth5Pm+uvQSKl8G9fvtf31vBqz7a3AdTj2sxDxprH069ac+wHrlzIvJGd7sa54tvR7uvgVyouGdTAbe8xd4tCJb0J9wtrVA3nzuQLJzfYGL4rUI3hWUGdknl2cGazxJBTb/yxa0slEaqnqx9AK2a2N5wddw/fZumJSFadkJOJvQ7TotufZOAY7XA0W+gF96Mtw7m6rcDThb0Kq7pKH6611mu4G1KH4dwsu+YI2Qed+y0dIBZws6oddKU3WdUdcDHItvBmb4Zhgo4GxAq26WhupvdwNr4fR8InkfAv7T7UACZwyt7Vgnx0jjlsMdI6yx0jshstL36GYzpJeshK07bdNeeSGT7G3pHdJYvcoGLirbgcg3BwW4cjOsWGubNvP64p+4u9GeAPOAtu0K5Gqn8OtSXzVB9LJ4HudxFBgSSEu2Qvr4SSi7C4501vtfHgtfuwJGDHd2x0Cbaux04E3Ns5xmlGhRSTGSY5Z/wVq2gI3Vprdh0YNhIIL5rO3TRWNli0EeDNYzi9NSl+GDh+APtVC3Gz4+HtgdXx1UfyEadlXkd4Sb34G7HoKrY7BsoS+/PIWS525P4SQBpUJCJawgWfpnj9ijZlrlw2De0UxbaGDdaUb4AEJwL/yM8KlWmHIrtJ21EW+dAwu+64578DC8/5GdtNK10MC0iMbiZuNrVOCH7gd4y2uwdFWP6os+Bxt+72zKPJxp8+3EtXwRzJjg7lJYYDhqgE8DLnNAmsfgBzg5nLtUuYX1h4dh5u221Py4/efWwgO39h9wcjiPHtkzz6aG9f734LH1YObjt96xET+fD2PyYUIMbprZFztD4P4J6eRwvq/chjLFRWpYO0VBMuKrT/UtQsIDH+2/pNUFEo3AC0/Aqkp4ZlvfbP1aPax82n53D5mCD8gbAZ/KhW8UwBKHUjMssJqkVRT/G0L3Atl38kr3DieHs8m4q5fC35th4QPu2Xog3mHlDVNprQWZ5xu0SzAdcGo4z54MpgYung/HjvcNa6PTvMNmCktYcM8tcGNxPyQtfcoALwVZnlXg5Pfyxmk9W0Fbd0BL50mIU7au3wctH8Csyek3B8OGNLok+4uH1GLD7Ul6FSH9UniYxUO2l4epxYab4+mKEK9wCzfCrZwmv3MDIL4d4RovO71+d3uHk7OzCdvzUmqatc9AzYt9s3UQ42GAlW3SUDXZBi6MLyDC6iA2HXctnbJzqlKz9v3xL92ztR8nwgBbLJTGqsc6gc0mXu5BkBw/9jpknEbYKTs7KZxxmz3nhg3roMDmGpSeuLB7E69jlIvKNiFyQ0bAP18BL78BXcWG2+Fa8mbc+kfhkot8m+0QDAysz0pD9SzTtWdfunDONUSi231bdhrhZathU519BGOOYtyaqZ/nLbYfTPVKe6SDtKDAVmKiNNa+2gu4c5T9717uWgfRlG3sM232AsActA3zuIRn5lvTxl4QBNWWDQKsulMaqrsP9XufLRXGJyL6CiKedz8IE4rB0Zx7lNwB//rIW5uqonKtNFZ1R27f49LC0j8Ticz11JZJ4eCpPI3AP1tg7j3+NFhWpTTWfD9Z2AH4O2OQYW8hfCatVjO/Vvw6eMLx56qzlHllyu/vWTen06X8Bz0zLvVWj/OVh4KyOFHxPh40C/sHFnnvQWUC2dXXbOPev7rneoSXzoRVIk01G1PF0l1qeRxhvpfejt+/8gWIXe5+WuBLSRqhf7wHu5p7NgM99ekaqa9e4CTmDnxZfCjDdSsiEz31n0sCqttplamyv8rcue7T0l9MK5g9ksiQOoTx5xKTqy/KXqyzk0JdTOtS+j9z9dB8QqBnijO6etgNbUZahmwics7eytsB3CD1VR97RaJ3gdGpQb84fRjn5/4OkXIvpQP6u+rjfHLyTnl3yxk/dn0D94z2nLlEoiaD21+mDFYzX8RYiXJpqq0M4kJgYKP8/+oTgOSnqePLphKVXw3YxfHB+sgjNYS0sGwyIvciTAkSXgFkX8RKPDzon/H0ATe353M6Fh5xpOOLtPDNXOu3WI+2rpO9mzrXkuHVdfUM9Q77MauXlowmN3odylUglyBcDPpZx0/xkEMoBxB9F0t30xZ5RfZVdZ67+LHmX+a/GaNLoRgqWz4AAAAASUVORK5CYII="},"2ae9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("a-spin",{attrs:{spinning:t.loading}},[a("div",{staticClass:"schedule-header"},["timeGridFourDay"!==t.viewType?a("div",{staticClass:"schedule-title"},[t._v(t._s(t.viewDate))]):a("div",{staticClass:"schedule-title"},[a("a-select",{attrs:{optionFilterProp:"children",getPopupContainer:function(t){return t.parentElement},placeholder:"Please select year"},on:{change:t.handleChangeYear},model:{value:t.currentYear,callback:function(e){t.currentYear=e},expression:"currentYear"}},t._l(t.yearOptions,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-radio-group",{staticClass:"schedule-view",attrs:{"button-style":"solid"},on:{change:t.changeView},model:{value:t.viewType,callback:function(e){t.viewType=e},expression:"viewType"}},[a("a-radio-button",{attrs:{value:"timeGridWeek"}},[t._v(" Week ")]),t.showTerm&&t.userMode===t.USER_MODE.SCHOOL?a("a-radio-button",{attrs:{value:"timeGridFourDay"}},[t._v(" Term ")]):t._e(),a("a-radio-button",{attrs:{value:"dayGridMonth"}},[t._v(" Month ")]),a("a-radio-button",{attrs:{value:"timeGridDay"}},[t._v(" Day ")])],1),a("a-space",{staticClass:"schedule-date-change"},[a("a-icon",{attrs:{type:"caret-left"},on:{click:function(e){return t.handleScheduleChange("prev")}}}),a("span",{on:{click:function(e){return t.handleScheduleChange("today")}}},[t._v("Today")]),a("a-icon",{attrs:{type:"caret-right"},on:{click:function(e){return t.handleScheduleChange("next")}}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"timeGridFourDay"===t.viewType,expression:"viewType === 'timeGridFourDay'"}],ref:"yearLines",staticClass:"year-lines"},t._l(t.yearLines,(function(e){return a("div",{key:e.id,staticClass:"year-lines-item",style:{background:e.background,width:e.width+"%"}},[t._v(" "+t._s(e.name)+" ")])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showNoData||t.totalEvents.length>0,expression:"!showNoData || totalEvents.length > 0"}],ref:"scheduleContent",staticClass:"schedule-content",attrs:{id:"scheduleContent"}},[a("cc-calendar",{ref:"fullCalendar",staticClass:"schedule-calendar",attrs:{eventsApi:t.loadEvents,selfViews:t.selfViews,headerToolbar:t.headerToolbar,scrollTime:t.scrollTime,editable:t.editable,selectAllow:t.selectAllow},on:{select:t.handleDateSelect,eventClick:t.handleEventClick,eventsSet:t.handleEvents,datesSet:t.handleDatesSet,eventMouseEnter:t.handleMouseEnter,eventMouseLeave:t.handleMouseLeave,eventDrop:t.handleEventDrop,eventResize:t.handleEventResize},scopedSlots:t._u([{key:"eventContent",fn:function(e){var i=e.info;return[a("session-event-content",{attrs:{info:i,unitList:t.currentUnitList,type:t.queryType,allDatas:t.calendarDatas},on:{reFetch:t.reFetch,save:t.handleSaveContentEvent,changeDateSelect:t.changeDateSelect}})]}}])})],1),t.showNoData&&0===t.totalEvents.length?a("a-empty",{staticStyle:{"margin-top":"100px"}}):t._e()],1),a("div",{directives:[{name:"clickOutside",rawName:"v-clickOutside",value:t.closeTip,expression:"closeTip"}],staticClass:"tooltip"},[a("div",{ref:"tooltip",staticClass:"tooltip-wrap"},[a("div",{staticClass:"tooltip-content"},[a("div",{staticClass:"content-item",on:{click:t.handleAddUnit}},[a("span",[t._v("Import from Unit")])]),a("div",{staticClass:"content-item",on:{click:function(e){return t.handleAddSession()}}},[a("span",[t._v("Import from Task")])]),a("div",{staticClass:"content-item",on:{click:function(e){return t.handleAddSession(t.typeMap.pd)}}},[a("span",[t._v("Import from PD")])])])])]),a("a-modal",{attrs:{closable:!1,maskClosable:!1,keyboard:!1,footer:null,destroyOnClose:"",width:"80%"},on:{cancel:t.handleCancelImport},model:{value:t.importVisible,callback:function(e){t.importVisible=e},expression:"importVisible"}},[a("session-import-for-calendar",{attrs:{type:t.importType,startDate:t.importModel.startDate,endDate:t.importModel.endDate,classId:t.currentClass,"need-close":!0},on:{cancel:t.handleCancelImport,ok:t.handleChoose}})],1)],1)},s=[],n=a("1da1"),o=a("5530"),r=a("2909"),l=(a("96cf"),a("a15b"),a("7db0"),a("99af"),a("d81d"),a("159b"),a("b0c0"),a("ac1f"),a("1276"),a("4de4"),a("caad"),a("d3b7"),a("c740"),a("2532"),a("6e84")),c=a("21fb"),d=a("a16a"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",["background"===t.info.event.display?i("div",[t.info.event.extendedProps.termId?[t._v(" "+t._s(t._f("dayjs")(t.info.event.start,t.FORMATTER_SIM2))+"-"+t._s(t._f("dayjs")(t.info.event.end,t.FORMATTER_SIM2))+" ")]:t._e()],2):"selectDate"!==t.info.event.extendedProps.eventType?i("a-popover",{attrs:{title:"",trigger:"click",destroyTooltipOnHide:!0,getPopupContainer:function(e){return t.getPopupContainer(e,t.info)}},on:{visibleChange:function(e){return t.showPopover(e,t.info)}}},[i("a",{attrs:{slot:"content"},slot:"content"},[i("a-spin",{attrs:{spinning:t.loading}},[i("div",{staticStyle:{"max-width":"650px"}},[i("content-item-calendar",{ref:"contentItemCalendar",attrs:{content:t.getSession(t.info),units:t.currentUnitList},on:{close:t.closeAllModal,delete:function(e){return t.handleDelete(t.info,e)},"change-unit":function(e){return t.handleSave(e,t.info)},"save-response-limit":function(e){return t.handleSave(e,t.info)}}})],1)])],1),i("div",{staticClass:"schedule-event-content",style:{backgroundColor:t.info.event.extendedProps.backgroundColor,color:"#333",lineHeight:1}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"timeGridWeek"===t.info.view.type||"timeGridDay"===t.info.view.type,expression:"info.view.type === 'timeGridWeek' || info.view.type === 'timeGridDay'"}]},[t._v(" "+t._s(t._f("dayjs")(t.info.event.start,t.FORMATTER_SIM2))+"-"+t._s(t._f("dayjs")(t.info.event.end,t.FORMATTER_SIM2))+" ")]),i("span",{directives:[{name:"show",rawName:"v-show",value:"dayGridMonth"===t.info.view.type,expression:"info.view.type === 'dayGridMonth'"}],staticStyle:{"margin-right":"5px"}},[t._v(" "+t._s(t._f("dayjs")(t.info.event.start,t.FORMATTER_SIM2))+" ")]),"timeGridWeek"===t.info.view.type?i("label",{staticStyle:{display:"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{for:""}},[t._v(t._s(t.info.event.title)+" ")]):t._e(),"timeGridWeek"!==t.info.view.type?i("label",[t._v(" "+t._s(t.info.event.title)+" ")]):t._e(),t.info.event.extendedProps.userRealName&&"timeGridWeek"===t.info.view.type?i("a-space",{staticClass:"user-avatar"},[i("a-tooltip",{attrs:{title:"0"===t.info.event.extendedProps.schoolId?"Personal":t.info.event.extendedProps.schoolName}},[t.info.event.extendedProps.userAvatar?i("img",{attrs:{src:t.info.event.extendedProps.userAvatar,alt:""}}):i("img",{attrs:{src:a("4992")}})]),i("label",{attrs:{for:""}},[t._v(t._s(t.info.event.extendedProps.userRealName))])],1):t._e()],1)]):i("a-popover",{attrs:{title:"Set Date",trigger:"click",defaultVisible:!1,destroyTooltipOnHide:!0},on:{visibleChange:function(e){return t.showDateSelectPopover(e,t.info.event)}}},[i("a",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"date-select"},[i("a-space",{staticClass:"date-select-item"},[i("label",{attrs:{for:""}},[t._v("StartTime: "+t._s(t.moment(t.info.event.start).format("YYYY-MM-DD")))]),i("a-time-picker",{attrs:{allowClear:!1,disabledHours:t.disabledHoursStart,disabledMinutes:t.disabledMinutesStart,format:"HH:mm"},model:{value:t.dateSelect.start,callback:function(e){t.$set(t.dateSelect,"start",e)},expression:"dateSelect.start"}})],1),i("a-space",{staticClass:"date-select-item"},[i("label",{attrs:{for:""}},[t._v("EndTime: "+t._s(t.moment(t.info.event.end).format("YYYY-MM-DD")))]),i("a-time-picker",{attrs:{allowClear:!1,disabledHours:t.disabledHoursEnd,disabledMinutes:t.disabledMinutesEnd,format:"HH:mm"},model:{value:t.dateSelect.end,callback:function(e){t.$set(t.dateSelect,"end",e)},expression:"dateSelect.end"}})],1),i("a-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleChangeDateSelect}},[t._v("Save")])],1)]),i("div",{staticClass:"schedule-event-content",style:{backgroundColor:t.info.event.extendedProps.backgroundColor,color:"#333",minHeight:"auto"}},[i("div",[t._v(" "+t._s(t._f("dayjs")(t.info.event.start,t.FORMATTER_SIM2))+"-"+t._s(t._f("dayjs")(t.info.event.end,t.FORMATTER_SIM2))+" ")]),i("div",{staticClass:"remove",on:{click:t.handleRemoveSelect}},[i("a-icon",{attrs:{type:"close-circle"}})],1)])])],1)},p=[],h=(a("a9e3"),a("a630"),a("3ca3"),a("d82e")),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data?i("div",{staticClass:"content-item"},[i("div",{staticClass:"cover"},[t.data.workshopsDetailInfo&&t.data.workshopsDetailInfo.cover?i("div",{staticClass:"cover-block",style:{"background-image":"url('"+(t.data.workshopsDetailInfo.cover||"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+"')"}}):t.data.cover?i("div",{staticClass:"cover-block",style:{"background-image":"url('"+(t.data.cover||"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+"')"}}):t.data.sessionInfo&&t.data.sessionInfo.image?i("div",{staticClass:"cover-block",style:{"background-image":"url('"+(t.data.sessionInfo.image||"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+"')"}}):t.data.content&&t.data.content.image?i("div",{staticClass:"cover-block",style:{"background-image":"url('"+(t.data.content.image||"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+"')"}}):i("div",{staticClass:"cover-block",staticStyle:{"background-image":'url("http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")'}})]),i("div",{staticClass:"detail"},[i("div",{staticClass:"detail-content"},[i("div",{staticClass:"base-info"},[i("div",{staticClass:"name-con"},[i("a-tooltip",{attrs:{title:t.data.sessionInfo.sessionName}},[i("div",{staticClass:"name"},[t._v(t._s(t.data.sessionInfo.sessionName))])]),i("a-tooltip",{attrs:{title:t.data.sessionInfo.className}},[i("div",{staticClass:"class"},[t._v(t._s(t.data.sessionInfo.className))])])],1),i("div",{staticClass:"detail-con"},[i("div",{staticClass:"info-con"},[i("div",{staticClass:"subject"},[i("a-space",{staticClass:"author-name"},[i("a-tooltip",{attrs:{title:"0"===t.data.schoolId?"Personal":t.data.schoolName}},[t.data.userAvatar?i("img",{attrs:{src:t.data.userAvatar,alt:""}}):i("img",{attrs:{src:a("4992")}})]),i("label",[t._v(t._s(t.data.userRealName))])],1),t.formatSessionType(t.data.sessionInfo.sessionType).name?i("div",[i("a-tag",{attrs:{color:t.formatSessionType(t.data.sessionInfo.sessionType).color}},[t._v(t._s(t.formatSessionType(t.data.sessionInfo.sessionType).name))])],1):t._e(),t.data.sessionInfo&&t.data.sessionInfo.zoomMeeting?i("div",{staticClass:"zoom-icon",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleToZoom(t.content)}}},[i("img",{attrs:{src:a("f496")}})]):t._e(),t.data.content.taskType?i("div",{staticClass:"info-item task-type-info"},[i("div",{staticClass:"self-type-wrapper"},[i("div",{staticClass:"self-field-label"},["FA"===t.data.content.taskType?i("div",{staticClass:"task-type-item green-active-task-type"},[i("a-tooltip",{attrs:{placement:"top",title:"Formative Assessment"}},[t._v("FA")])],1):t._e(),"SA"===t.data.content.taskType?i("div",{staticClass:"task-type-item red-active-task-type"},[i("a-tooltip",{attrs:{placement:"top",title:"Summative Assessment"}},[t._v("SA")])],1):t._e(),"Activity"===t.data.content.taskType?i("div",{staticClass:"task-type-item blue-active-task-type task-type-activity"},[i("a-tooltip",{attrs:{title:"Teaching/Learning Activity",placement:"top"}},[t._v("Activity")])],1):t._e(),"IA"===t.data.content.taskType?i("div",{staticClass:"task-type-item blue-active-task-type task-type-examine"},[i("a-tooltip",{attrs:{title:"Internal Assessment",placement:"top"}},[t._v("IA")])],1):t._e()])])]):t._e(),i("div",{staticClass:"session-time"},[t._v(" "+t._s(t._f("dayjs")(t.data.sessionInfo.sessionStartTime,"HH:mm"))+" - "+t._s(t._f("dayjs")(t.data.sessionInfo.deadline,"HH:mm"))+" ")])],1),i("div",{staticClass:"class-con"},[i("div",{staticClass:"session-deadline"},["workshop"!==t.data.sessionInfo.type?i("div",{staticClass:"session-deadline-tab"},[i("a-radio-group",{attrs:{"button-style":"solid",size:"small"},model:{value:t.data.sessionInfo.responseLimitMode,callback:function(e){t.$set(t.data.sessionInfo,"responseLimitMode",e)},expression:"data.sessionInfo.responseLimitMode"}},[i("a-radio-button",{attrs:{value:0}},[t._v(" Off ")]),i("a-radio-button",{attrs:{value:1}},[t._v(" Deadline ")]),i("a-radio-button",{attrs:{value:2}},[t._v(" Countdown ")])],1),i("a-button",{directives:[{name:"show",rawName:"v-show",value:t.isChangedResonseLimit,expression:"isChangedResonseLimit"}],attrs:{size:"small"},on:{click:t.handleSaveResponseLimit}},[t._v("Save")])],1):t._e(),i("div",{staticClass:"session-deadline-opt"},[2===t.data.sessionInfo.responseLimitMode?i("a-space",[i("a-input-number",{attrs:{suffix:"Min(s)",size:"small"},model:{value:t.responseLimitTimeCountDown,callback:function(e){t.responseLimitTimeCountDown=e},expression:"responseLimitTimeCountDown"}}),i("span",[t._v("Min(s)")]),i("a-tooltip",[i("template",{slot:"title"},[t._v(" Students must complete their work within the allocated time ")]),i("a-icon",{attrs:{type:"question-circle"}})],2)],1):t._e(),1===t.data.sessionInfo.responseLimitMode?i("a-space",[i("a-date-picker",{attrs:{"disabled-date":t.disabledDate,"allow-clear":!1,size:"small","show-time":"",placeholder:"Select Time"},model:{value:t.responseLimitTimeDeadline,callback:function(e){t.responseLimitTimeDeadline=e},expression:"responseLimitTimeDeadline"}}),i("a-tooltip",[i("template",{slot:"title"},[t._v(" Students must complete their work within the allocated time ")]),i("a-icon",{attrs:{type:"question-circle"}})],2)],1):t._e()],1)])])])])]),t._m(0)]),i("div",{staticClass:"action"},[[i("a-space",{attrs:{size:10}},[i("custom-button",{attrs:{label:"Preview"},on:{click:function(e){t.$emit("close"),t.$store.dispatch("setV2Box",t.content.sessionInfo)}},scopedSlots:t._u([{key:"icon",fn:function(){return[i("icon-font",{staticClass:"detail-font",attrs:{type:"icon-xianshi"}})]},proxy:!0}],null,!1,2713343207)}),i("div",{staticClass:"review"},[t._v(" Student-review "),i("a-switch",{attrs:{"default-checked":""},on:{change:t.handleChangeReview}})],1)],1)]],2)])]):t._e()},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right-info"},[a("div",{staticClass:"update-time"})])}],v=a("cd3f"),g=a.n(v),y=a("3f76"),C=a("f93e"),w=a("0381"),b=a("d185"),k=a.n(b),T=a("e6fe"),S=a.n(T),L=a("98f7"),I=a.n(L),_=a("b3e1"),A=a.n(_),M=a("81cf"),D=a.n(M),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"fixed"===t.type?a("div",{directives:[{name:"show",rawName:"v-show",value:t.tags&&t.tags.length>0,expression:"tags && tags.length > 0"}],ref:"tagInfo",class:{"tag-info":!0,"auto-size":"auto"===t.type}},[t._l(t.tags.slice(0,t.showTagLen),(function(e){return a("div",{key:e.id,staticClass:"tag-item"},[a("a-tooltip",{attrs:{title:e.name}},[t._v(" "+t._s(e.name)+" ")])],1)})),t.tags.length>t.showTagLen?a("div",{staticClass:"tag-item"},[a("a-popover",{attrs:{overlayStyle:{width:"310px"},overlayClassName:"tag-info-tip"}},[a("template",{slot:"content"},[a("a-space",{staticClass:"tag-tip"},t._l(t.tags.slice(t.showTagLen),(function(e){return a("a-tag",{key:e.id,staticClass:"tag-item",attrs:{color:"#FFDF9B"}},[a("a-tooltip",{attrs:{title:e.name}},[t._v(" "+t._s(e.name)+" ")])],1)})),1)],1),t._v(" more ")],2)],1):t._e()],2):a("a-popover",{attrs:{trigger:t.trigger,overlayStyle:{width:"310px"},overlayClassName:"tag-info-tip"}},[a("template",{slot:"content"},[a("a-space",{staticClass:"tag-tip"},t._l(t.tags,(function(e){return a("a-tag",{key:e.id,staticClass:"tag-item",attrs:{color:"#FFDF9B"}},[a("a-tooltip",{attrs:{title:e.name}},[t._v(" "+t._s(e.name)+" ")])],1)})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tags&&t.tags.length>0,expression:"tags && tags.length > 0"}],ref:"tagInfo",class:{"tag-info":!0,"auto-size":"auto"===t.type}},[t._l(t.tags.slice(0,t.showTagLen),(function(e){return a("div",{key:e.id,staticClass:"tag-item"},[t._v(" "+t._s(e.name)+" ")])})),t.tags.length>t.showTagLen?a("div",{staticClass:"tag-item"},[t._v(" ... ")]):t._e()],2)],2)},O=[],E={name:"TagsLine",props:{tags:{type:Array,default:function(){return[]}},type:{type:String,default:"auto"}},data:function(){return{showTagLen:this.tags.length,trigger:"hover"}},mounted:function(){this["init"+this.type]()},created:function(){window.addEventListener("resize",this["init"+this.type],!1)},beforeDestroy:function(){window.removeEventListener("resize",this["init"+this.type])},methods:{initfixed:function(){var t=this.$refs.tagInfo,e=t.parentElement,a=this.$refs.tagInfo.getElementsByClassName("tag-item"),i=this.tags?this.tags.length:0;if(1===e.childElementCount&&(t.style.width=e.getBoundingClientRect().width+"px"),a.length>0){var s=a[0].getBoundingClientRect().width+5,n=parseInt(t.getBoundingClientRect().width/s)-1;this.showTagLen=i-n>1?n:i}},initauto:function(){var t=this.$refs.tagInfo,e=t.parentElement,a=this.$refs.tagInfo.getElementsByClassName("tag-item"),i=this.tags?this.tags.length:0;1===e.childElementCount&&(t.style.width=e.getBoundingClientRect().width+"px");var s=0;if(a.length>0){var n=a[0];if(n){var o=100,r=t.getBoundingClientRect().width,l=0;a.forEach((function(t,e){if(r-l>o){var a=t.getBoundingClientRect().width+5;r-a-l>o&&(l+=a,s+=1)}}))}}i-s>0?this.showTagLen=s:(this.showTagLen=i,this.trigger="")}}},R=E,P=(a("a7a5"),a("0c7c")),N=Object(P["a"])(R,x,O,!1,null,"9ff28b5e",null),Y=N.exports,j=a("4663"),F=a.n(j),B=a("c1df"),H=a.n(B),V={name:"ContentItemCalendar",components:{CustomButton:w["a"],EditIcon:k.a,PublishIcon:S.a,ScheduleIcon:I.a,DeleteIcon:A.a,OriginalTipsIcon:D.a,MoreIcon:F.a,TagsLine:Y},props:{content:{type:Object,default:function(){}},units:{type:Array,default:function(){return[]}}},watch:{content:{handler:function(t){this.data=g()(t),this.origin=g()(t);var e=this.data.sessionInfo.responseLimitTime;1===this.data.sessionInfo.responseLimitMode?this.responseLimitTimeDeadline=H()(new Date(1e3*e)):2===this.data.sessionInfo.responseLimitMode&&(this.responseLimitTimeCountDown=this.data.sessionInfo.timeDown||0,this.responseLimitTimeCountDown<0&&(this.responseLimitTimeCountDown=0))},deep:!0,immediate:!0},units:{handler:function(t){this.unitList=g()(t)},deep:!0,immediate:!0}},data:function(){return{typeMap:y["e"],BG_COLORS:C["c"],sessionTypeList:[{id:1,name:"Assignment",allowZoom:!1,enableZoom:!1,color:"#333333",type:this.$classcipe.ScheduleSessionType.assignment},{id:2,name:"Lesson",allowZoom:!0,enableZoom:!1,color:"#15c39a",type:this.$classcipe.ScheduleSessionType.lesson},{id:3,name:"Test",allowZoom:!0,enableZoom:!1,color:"#c92a2a",type:this.$classcipe.ScheduleSessionType.test}],data:this.content,origin:this.content,unitList:this.units,loading:!1,responseLimitTimeDeadline:null,responseLimitTimeCountDown:0}},computed:{responseLimitTime:function(){var t=0;return 1===this.data.sessionInfo.responseLimitMode&&this.responseLimitTimeDeadline?t=this.responseLimitTimeDeadline.valueOf()-this.data.sessionInfo.date:2===this.data.sessionInfo.responseLimitMode&&(t=(new Date).getTime()+60*this.responseLimitTimeCountDown*1e3),t/1e3},isChangedResonseLimit:function(){return this.origin.sessionInfo.responseLimitMode!==this.data.sessionInfo.responseLimitMode||this.origin.sessionInfo.responseLimitTime!==this.responseLimitTime}},methods:{initData:function(){this.data=g()(this.content),this.unitList=g()(this.units)},editItem:function(){var t=this.data.sessionInfo;t.sessionType===y["e"]["unit-plan"]?this.$router.push({path:"/teacher/unit-plan-redirect/"+t.planId}):t.sessionType===y["e"].task?this.$router.push({path:"/teacher/task-redirect/"+t.contentId}):t.sessionType===y["e"].video?this.$router.push({path:"/teacher/video-redirect/"+t.contentId}):t.sessionType===y["e"].pd&&this.$router.push({path:"/teacher/pd-content-redirect/"+t.contentId})},disabledDate:function(t){return!!(this.data&&this.data.sessionInfo&&this.data.sessionInfo.sessionStartTime)&&(t&&t<H()(this.data.sessionInfo.sessionStartTime))},formatSessionType:function(t){var e=this.sessionTypeList.find((function(e){return e.type===t}));return e||{name:""}},handleChangeUnit:function(t){this.$emit("change-unit",{planId:t,id:this.data.sessionInfo.id})},handleDeleteItem:function(){this.$emit("delete",this.data)},handleEvalute:function(){},handleToZoom:function(t){if(t&&t.sessionInfo&&t.sessionInfo.zoomMeeting)try{var e=JSON.parse(t.sessionInfo.zoomMeeting);window.open(e.start_url,"_blank")}catch(a){this.$message.error("parse json error")}},handleSaveResponseLimit:function(){var t={responseLimitMode:this.data.sessionInfo.responseLimitMode,responseLimitTime:this.responseLimitTime,timeType:this.data.sessionInfo.responseLimitMode,timeDown:2===this.data.sessionInfo.responseLimitMode?this.responseLimitTimeCountDown:0,allocatedTimeFlag:0!==this.data.sessionInfo.responseLimitMode?1:0,id:this.data.sessionInfo.id};this.$emit("save-response-limit",t)},handleChangeReview:function(t){}}},G=V,U=(a("663b"),Object(P["a"])(G,f,m,!1,null,"eead5324",null)),z=U.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-item"},[i("div",{staticClass:"cover",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleGoWork(t.content)}}},[i("div",{staticClass:"cover-block",style:{"background-image":"url('"+(t.content.cover||t.content.content&&t.content.content.image||"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+"')"}},[t.isSimple?t._e():i("div",{staticClass:"bottom-action"},[i("div",{staticClass:"bottom-action-item vertical-left"}),t.content.content?i("div",{staticClass:"bottom-action-item vertical-right",on:{click:function(e){return e.stopPropagation(),t.handlePreview(t.content)}}},[i("div",{staticClass:"bottom-action-item-icon"},[i("a-icon",{attrs:{type:"eye"}})],1),i("div",{staticClass:"bottom-action-item-label"},[t._v("Preview")])]):t._e(),t.content.content?t._e():i("div",{staticClass:"bottom-action-item vertical-right",on:{click:function(e){return e.stopPropagation(),t.handlePreviewDeleteDetail(t.content.session)}}},[i("div",{staticClass:"bottom-action-item-icon"},[i("a-icon",{attrs:{type:"eye"}})],1),i("div",{staticClass:"bottom-action-item-label"},[t._v("Preview")])])])]),t.content.session&&t.content.session.classId&&(t.isCurrentType(t.WORK_SHOPS_TYPE.REGISTERED.value)||t.isCurrentType(t.WORK_SHOPS_TYPE.LUNCHEDBYME.value))?i("div",{staticClass:"cover-btn"},[i("label",[t._v("Enter workshop")])]):t._e()]),i("div",{staticClass:"detail"},[i("div",{staticClass:"detail-content",on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[i("div",{staticClass:"base-info"},[t.content.session?i("div",{staticClass:"type-icon"},[i("content-type-icon",{attrs:{type:t.content.session.contentType}})],1):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showEditName,expression:"!showEditName"}],staticClass:"name"},[t._v(" "+t._s(t.content.title||t.content.content&&t.content.content.name||"Untitle")+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showEditName,expression:"showEditName"}],staticClass:"name"},[i("a-input",{attrs:{disabled:t.loading,value:t.choose.title},on:{change:function(e){return t.changeTitle(e.target.value,t.content)}}}),i("div",{staticClass:"opt"},[i("a-icon",{attrs:{type:"check"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSave(t.content)}}}),i("a-icon",{attrs:{type:"close"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCancelSingle(t.content)}}})],1)],1),i("div",{staticClass:"tag-info"},t._l(t.content.customTags,(function(e,a){return i("div",{key:a,staticClass:"tag-info-item"},[i("a-tag",{staticClass:"tag-item",attrs:{color:"#FFEDAF",title:e.category}},[t._v(" "+t._s(e.name)+" ")])],1)})),0)]),t.content.sessionStartTime&&!t.isSimple?i("div",{staticClass:"right-info"},[t.content.unitPlanInfo&&t.content.unitPlanInfo.name?i("div",{staticClass:"update-time"},[t._v("Unit: "+t._s(t.content.unitPlanInfo.name))]):t._e(),i("a-space",{directives:[{name:"show",rawName:"v-show",value:!t.showEditSche,expression:"!showEditSche"}],staticClass:"update-time",staticStyle:{"align-items":"flex-start"},attrs:{direction:"vertical"}},[t.content.sessionStartTime?i("label",{staticStyle:{"text-align":"left"},attrs:{for:""}},[i("span",{staticStyle:{display:"inline-block",width:"100px"}},[t._v("Scheduled:")]),t._v(" "+t._s(t._f("dayjs")(t.content.sessionStartTime,"YYYY-MM-DD HH:mm"))+" - "+t._s(t._f("dayjs")(t.content.sessionEndTime,t.filterSessionEndTime))+" ")]):t._e(),t.filterDeadline&&t.isCurrentType(t.WORK_SHOPS_TYPE.FEATURE.value)&&t.WORK_SHOPS_TYPE.REGISTERED.value!==t.content.workshopsType?i("label",{staticStyle:{"text-align":"left"},attrs:{for:""}},[i("span",{staticStyle:{display:"inline-block",width:"100px"}},[t._v("REG deadline:")]),t._v(" "),i("span",{staticStyle:{"font-weight":"bold",color:"#ef4136"}},[t._v(t._s(t._f("countDown")(t.filterDeadline)))])]):t._e(),(t.isCurrentType(t.WORK_SHOPS_TYPE.LUNCHEDBYME.value)||t.isCurrentType(t.WORK_SHOPS_TYPE.REGISTERED.value))&&t.WORK_SHOPS_STATUS.SCHEDULE.value===t.content.workshopsStatus?i("label",{staticStyle:{"text-align":"left"},attrs:{for:""}},[i("span",{staticStyle:{display:"inline-block",width:"100px"}},[t._v("Countdown:")]),t._v(" "),i("span",{staticStyle:{"font-weight":"bold",color:"#ef4136"}},[t._v(t._s(t._f("countDown")(t.filterSessionStartTime)))])]):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showEditSche,expression:"showEditSche"}],staticClass:"update-time"},[i("a-range-picker",{attrs:{disabled:t.loading,"default-value":[t.moment.utc(t.content.sessionStartTime).local(),t.moment.utc(t.content.sessionEndTime||t.content.sessionStartTime).local()],"disabled-date":t.disabledDateRange,format:"YYYY-MM-DD HH:mm:ss","show-time":{format:"HH:mm"}},on:{change:t.handleDateChange}}),i("div",{staticClass:"opt"},[i("a-icon",{attrs:{type:"check"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSave(t.content)}}}),i("a-icon",{attrs:{type:"close"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCancelSingle(t.content)}}})],1)],1)],1):t._e()]),i("div",{ref:"detailPrice",staticClass:"detail-price"},[i("tags-line",{attrs:{tags:t.content.content?t.content.content.customTags:[]}}),t.content.priceList&&t.content.priceList.length>0&&!t.isSimple?i("div",{staticClass:"price-con"},[i("price-slider",{attrs:{priceList:t.content.priceList,current:t.content.registeredNum,origin:t.content.price}})],1):t._e()],1),i("div",{staticClass:"action"},[i("div",{staticClass:"author-wrap"},[i("a-tooltip",{attrs:{title:"0"===t.content.schoolId?"Personal":t.content.schoolName}},[t.content.userAvatar?i("a-avatar",{attrs:{src:t.content.userAvatar,icon:"user"}}):i("img",{staticClass:"ant-avatar",attrs:{src:a("4992"),alt:"avatar"}})],1),i("div",{staticClass:"author-con"},[i("div",{staticClass:"author-name"},[t._v(" "+t._s(t.content.userRealName||t.content.content&&t.content.content.createBy)+" ")])])],1),t.isSimple?t._e():i("a-space",{on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[t.content.session&&t.content.session.zoomMeeting?i("div",{staticClass:"zoom-icon",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleToZoom(t.content)}}},[i("img",{attrs:{src:a("f496")}})]):t._e(),t.userMode===t.USER_MODE.SELF&&t.WORK_SHOPS_STATUS.ENDED.value!==t.content.workshopsStatus?i("a-tooltip",{attrs:{trigger:"click",getPopupContainer:function(t){return t.parentElement}},on:{visibleChange:function(e){return t.visibleChange(e,t.content)}},model:{value:t.shareVisible,callback:function(e){t.shareVisible=e},expression:"shareVisible"}},[i("template",{slot:"title"},[i("div",{staticClass:"detail-share"},[t.shareItem?i("share-button",{attrs:{link:t.wrapperLink(t.content),title:t.content.title||t.content.content&&t.content.content.name||"Untitle"}}):t._e()],1)]),i("custom-button",{attrs:{label:"Share"},scopedSlots:t._u([{key:"icon",fn:function(){return[i("icon-font",{staticClass:"detail-font",attrs:{type:"icon-share"}})]},proxy:!0}],null,!1,1723803334)})],2):t._e(),t.WORK_SHOPS_TYPE.FEATURE.value===t.content.workshopsType&&t.WORK_SHOPS_STATUS.ENDED.value!==t.content.workshopsStatus&&t.content.session&&(!t.filterDeadline||t.moment.utc(t.filterDeadline).local().isAfter(t.moment()))&&t.isCurrentType(t.WORK_SHOPS_TYPE.FEATURE.value)?void 0:t._e(),t.WORK_SHOPS_TYPE.FEATURE.value===t.content.workshopsType&&t.WORK_SHOPS_STATUS.ENDED.value!==t.content.workshopsStatus&&t.content.session&&t.filterDeadline&&t.moment.utc(t.filterDeadline).local().isBefore(t.moment())&&t.isCurrentType(t.WORK_SHOPS_TYPE.FEATURE.value)?[i("custom-button",{attrs:{label:"Register",disabled:!0,disabledTooltip:"Out of deadline"},scopedSlots:t._u([{key:"icon",fn:function(){return[i("icon-font",{staticClass:"detail-font",attrs:{type:"icon-register"}})]},proxy:!0}],null,!1,2530793602)})]:t._e(),t.WORK_SHOPS_TYPE.REGISTERED.value===t.content.workshopsType&&t.isCurrentType(t.WORK_SHOPS_TYPE.FEATURE.value)?i("div",{staticClass:"label-action"},[t._v(" Registered ")]):t._e(),t.WORK_SHOPS_TYPE.LUNCHEDBYME.value===t.content.workshopsType&&t.isCurrentType(t.WORK_SHOPS_TYPE.LUNCHEDBYME.value)?[t.WORK_SHOPS_STATUS.ENDED.value===t.content.workshopsStatus?i("custom-button",{attrs:{label:"Relaunch"},on:{click:function(e){return t.handleRelaunch(t.content)}},scopedSlots:t._u([{key:"icon",fn:function(){return[i("icon-font",{staticClass:"detail-font",attrs:{type:"icon-tizhibianbie-zhongxinceshi"}})]},proxy:!0}],null,!1,1538896373)}):t._e(),i("a-dropdown",{attrs:{trigger:["click"],getPopupContainer:function(t){return t.parentElement}}},[i("div",{staticClass:"more-action"},[i("more-icon")],1),i("div",{staticClass:"content-item-more-action",attrs:{slot:"overlay"},slot:"overlay"},[0!==t.content.session.delFlag||t.WORK_SHOPS_STATUS.SCHEDULE.value!==t.content.workshopsStatus&&t.WORK_SHOPS_STATUS.ENDED.value!==t.content.workshopsStatus?t._e():i("div",{staticClass:"menu-item"},[i("custom-button",{attrs:{label:"Archive"},on:{click:function(e){return t.handleStatus("Archive")}}})],1),1===t.content.session.delFlag?i("div",{staticClass:"menu-item"},[i("custom-button",{attrs:{label:"Restore"},on:{click:function(e){return t.handleStatus("Restore")}}})],1):t._e(),1===t.content.session.delFlag?i("div",{staticClass:"menu-item"},[i("custom-button",{attrs:{label:"Delete"},on:{click:function(e){return t.handleDel(t.content)}}})],1):t._e(),0===t.content.session.delFlag&&t.WORK_SHOPS_STATUS.ONGOING.value===t.content.workshopsStatus?i("div",{staticClass:"menu-item"},[i("custom-button",{attrs:{label:"End"},on:{click:function(e){return t.handleStatus("End")}}})],1):t._e(),0===t.content.session.delFlag&&t.WORK_SHOPS_STATUS.ENDED.value===t.content.workshopsStatus?i("div",{staticClass:"menu-item"},[i("custom-button",{attrs:{label:"Reopen"},on:{click:function(e){return t.handleStatus("Reopen")}}})],1):t._e()])])]:t._e(),t.WORK_SHOPS_TYPE.REGISTERED.value===t.content.workshopsType&&t.WORK_SHOPS_STATUS.SCHEDULE.value===t.content.workshopsStatus&&t.isCurrentType(t.WORK_SHOPS_TYPE.REGISTERED.value)?i("a-dropdown",{attrs:{trigger:["click"],getPopupContainer:function(t){return t.parentElement}}},[i("div",{staticClass:"more-action"},[i("more-icon")],1),i("div",{staticClass:"content-item-more-action",attrs:{slot:"overlay"},slot:"overlay"},[t.WORK_SHOPS_STATUS.SCHEDULE.value===t.content.workshopsStatus&&t.isReadyStart24(t.content)?i("div",{staticClass:"menu-item"},[i("custom-button",{attrs:{label:"Cancel"},on:{click:function(e){return t.handleCancel(t.content)}}})],1):t._e(),t.WORK_SHOPS_STATUS.SCHEDULE.value!==t.content.workshopsStatus||t.isReadyStart24(t.content)?t._e():i("div",{staticClass:"menu-item"},[i("custom-button",{attrs:{label:"Cancel",disabled:!0,disabledTooltip:"Out of deadline"}})],1)])]):t._e()],2)],1)]),i("a-modal",{attrs:{destroyOnClose:"",width:"600px",zIndex:6e3,confirmLoading:t.loading,title:"Price Set",okText:"Save"},on:{ok:t.handleSavePrice,cancel:function(e){t.showEditPrice=!1}},model:{value:t.showEditPrice,callback:function(e){t.showEditPrice=e},expression:"showEditPrice"}},[i("schedule-price-set",{ref:"priceSet",attrs:{"init-price":t.choose.price,"init-price-list":t.choose.priceList}})],1)],1)},$=[],Q=(a("07ac"),a("44f5")),W=a("5994"),K=a("5225"),Z=a("65a0"),J=a("5fc3"),X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{destroyOnClose:"",placement:"right",closable:!1,width:"1000px",visible:t.previewVisible},on:{close:t.handlePreviewClose}},[a("div",{staticClass:"preview-wrapper-row"},[a("div",{staticClass:"view-back"},[a("a-button",{staticClass:"preview-back-btn",attrs:{type:"primary",shape:"round"},on:{click:t.handlePreviewClose}},[a("a-icon",{style:{"font-size":"12px"},attrs:{type:"left"}}),t._v("Back")],1)],1),t.previewCurrentId&&t.previewType?a("div",{staticClass:"detail-wrapper"},[a("common-preview-v2",{attrs:{id:t.previewCurrentId,type:t.previewType}})],1):t._e()])])},tt=[],et=a("adfc"),at={name:"PreviewContent",components:{CommonPreviewV2:et["a"]},props:{previewCurrentId:{type:String,required:!0},previewType:{type:Number,required:!0}},data:function(){return{previewVisible:!0}},created:function(){},methods:{handlePreviewClose:function(){this.$emit("close")}}},it=at,st=(a("638c"),Object(P["a"])(it,X,tt,!1,null,"93d21cc2",null)),nt=st.exports,ot=a("ce85"),rt=a("8f46"),lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pay-detail"},[a("div",{staticClass:"fee"},[a("span",{staticClass:"fee-title"},[t._v("Pricing")]),a("div",{staticClass:"fee-input"},[a("a-input",{staticClass:"dollar-price-input",attrs:{type:"number",prefix:"$"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1)]),a("div",{staticClass:"pay-discount"},[a("div",{staticClass:"pay-sub-title"},[t._v(" Bulk discount pricing ")]),t._m(0),t._l(t.discountInfo,(function(e,i){return a("div",{key:"discount"+i,staticClass:"pay-discount-item",on:{click:function(a){return a.stopPropagation(),t.handleDiscountEdit(e)}}},[a("div",{staticClass:"person-num"},[e.editing?[a("a-input",{staticClass:"cc-form-input discount-input",attrs:{min:"1",type:"number"},model:{value:e.peopleThreshold,callback:function(a){t.$set(e,"peopleThreshold",a)},expression:"discount.peopleThreshold"}})]:[t._v(" "+t._s(e.peopleThreshold)+" ")],t._v(" and more ")],2),a("div",{staticClass:"discount-off"},[e.editing?[a("a-input",{staticClass:"cc-form-input discount-input",attrs:{min:"0",max:"100",type:"number"},model:{value:e.discount,callback:function(a){t.$set(e,"discount",a)},expression:"discount.discount"}}),t._v("% ")]:[t._v(" "+t._s(e.discount)+"% ")]],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.discountInfo.length>1,expression:"discountInfo.length > 1"}],staticClass:"delete-item",on:{click:function(a){return a.stopPropagation(),t.deleteDiscount(e)}}},[a("delete-icon",{attrs:{color:"#F16A39"}})],1)])}))],2)])},ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pay-discount-title"},[a("div",{staticClass:"pay-participant"},[t._v("No of participants")]),a("div",{staticClass:"pay-percent"},[t._v("Percentage off")])])}],dt=(a("a434"),a("20ae")),ut=a("b5ba"),pt={props:{initPriceList:{type:Array,default:function(){return[]}},initPrice:{type:Number,default:100}},components:{CustomTextButton:dt["a"],DeleteIcon:ut["a"]},watch:{initPrice:{handler:function(t){this.price=t},immediate:!0},initPriceList:{handler:function(t){var e=this;this.discountInfo=t.map((function(t){var a={peopleThreshold:t.registeredNum,discount:0,editing:!1},i=0===e.price?0:Math.round((100*e.price-100*t.price)/e.price);return a.discount=i,a}))},immediate:!0}},data:function(){return{price:100,discountInfo:[{peopleThreshold:1,discount:0,editing:!0}]}},methods:{handleAddDiscount:function(){this.discountInfo.push({peopleThreshold:1,discount:0,editing:!0})},handleDiscountEdit:function(t){t.editing=!0},handleBlurClick:function(){this.discountInfo.forEach((function(t){t.peopleThreshold=Math.max(t.peopleThreshold,1),t.editing=!1}))},deleteDiscount:function(t){var e=this.discountInfo.indexOf(t);e>-1&&this.discountInfo.splice(e,1)},getPriceSet:function(){return{price:this.price,discountInfo:this.discountInfo}}}},ht=pt,ft=(a("9993"),Object(P["a"])(ht,lt,ct,!1,null,"28b0d002",null)),mt=ft.exports,vt=a("f031"),gt=a("9fb0"),yt=a("8ded"),Ct=a.n(yt),wt=a("2f62"),bt=a("ca00"),kt={name:"LiveWorkShopContentItem",components:{PriceSlider:Z["a"],ShareButton:J["a"],CustomButton:w["a"],PreviewContent:nt,ContentPreview:ot["a"],TagsLine:Y,ContentTypeIcon:rt["a"],SchedulePriceSet:mt,MoreIcon:F.a},mixins:[vt["a"]],props:{content:{type:Object,default:null},isSimple:{type:Boolean,default:!1},updateTime:{type:[String,Number],default:0}},watch:{updateTime:{handler:function(t,e){this.updateFilterTime()},immediate:!0}},data:function(){return{typeMap:y["e"],USER_MODE:C["U"],WORK_SHOPS_STATUS:C["W"],WORK_SHOPS_TYPE:C["X"],WORK_SHOPS_TYPE_VALUES:Object.values(C["X"]),moment:H.a,shareVisible:!1,shareItem:{},showTagLen:2,showEditName:!1,showEditSche:!1,showEditPrice:!1,needReload:!1,choose:{id:null,title:"",price:0,priceList:[],sessionStartTime:null,deadline:null},loading:!1,filterSessionStartTime:"",filterDeadline:""}},computed:Object(o["a"])(Object(o["a"])({},Object(wt["e"])({info:function(t){return t.user.info},userMode:function(t){return t.app.userMode},currentSchool:function(t){return t.user.currentSchool}})),{},{isCurrentType:function(){var t=this;return function(e){return t.$route.query&&t.$route.query.workshopsType?t.$route.query.workshopsType===e+"":e+""===C["X"].FEATURE.value+""}},filterSessionEndTime:function(){return this.content.sessionStartTime&&H()(this.content.sessionStartTime).isSame(H()(this.content.sessionEndTime),"day")?"HH:mm":"YYYY-MM-DD HH:mm"},isLibrary:function(){return!this.content.content||this.content.content.createBy!==this.info.email}}),mounted:function(){var t=this.content.content&&this.content.content.customTags?this.content.content.customTags.length:0;this.$refs.detailPrice&&this.$refs.detailPrice.getElementsByClassName("price-slider")[0]&&(this.$refs.detailPrice.style.justifyContent=0===t?"flex-end":"space-between")},methods:{updateFilterTime:function(){this.filterDeadline="",this.filterSessionStartTime="",this.content&&this.content.session&&this.content.session.register&&this.content.session.register.registerBefore&&(this.filterDeadline=this.content.session.register.registerBefore),this.content&&this.content.sessionStartTime&&(this.filterDeadline=this.content.sessionStartTime,this.filterSessionStartTime=this.content.sessionStartTime)},editItem:function(t){t.type===y["e"]["unit-plan"]?this.$router.push({path:"/teacher/unit-plan-redirect/"+t.id}):t.type===y["e"].task?this.$router.push({path:"/teacher/task-redirect/"+t.id}):t.type===y["e"].video?this.$router.push({path:"/teacher/video-redirect/"+t.id}):t.type===y["e"].pd&&this.$router.push({path:"/teacher/pd-content-redirect/"+t.id})},editName:function(t){this.showEditName=!0,this.choose=Object(o["a"])({},t),this.choose.sessionStartTime=t.sessionStartTime,this.choose.deadline=t.sessionEndTime||t.sessionStartTime,this.choose.title||(this.choose.title=t.content.name)},editSche:function(t){this.showEditSche=!0,this.choose=Object(o["a"])({},t),this.choose.sessionStartTime=t.sessionStartTime,this.choose.deadline=t.sessionEndTime||t.sessionStartTime},editPrice:function(t){this.showEditPrice=!0,this.choose=Object(o["a"])({},t),this.choose.sessionStartTime=t.sessionStartTime,this.choose.deadline=t.sessionEndTime||t.sessionStartTime},visibleChange:function(t,e){t&&e.name&&(this.shareVisible=!1,this.shareItem=Object(o["a"])({},e),this.shareVisible=!0)},wrapperLink:function(t){return t&&t.sessionId?"".concat("https://www.classcipe.com","/h5/live/").concat(t.sessionId):""},handleToZoom:function(t){},handleCloseShare:function(){this.shareVisible=!1},changeTitle:function(t,e){this.choose.title=t},isReadyStart24:function(t){if(!t.sessionStartTime)return!0;var e=H.a.utc(t.sessionStartTime).local().subtract(24,"hours");return H()().isBefore(e)},handleCancelSingle:function(t){this.showEditName=!1,this.showEditSche=!1},disabledDateRange:function(t){return t&&t<H()().subtract(1,"minutes")},handleDateChange:function(t,e){t.length>0?(this.choose.sessionStartTime=H()(t[0].toDate()).utc().format("YYYY-MM-DD HH:mm:ss"),this.choose.deadline=H()(t[1].toDate()).utc().format("YYYY-MM-DD HH:mm:ss")):(this.choose.sessionStartTime=null,this.choose.deadline=null)},handleSavePrice:function(){var t=this.$refs.priceSet.getPriceSet();this.handleSave(Object(o["a"])(Object(o["a"])({},t),{},{id:this.choose.id}),!0)},handleSave:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={sessionStartTime:this.choose.sessionStartTime,deadline:this.choose.deadline,register:{title:this.choose.title},id:t.id};t.discountInfo&&(i.register.discountInfo=Object(r["a"])(t.discountInfo),i.register.price=t.price),this.loading=!0,Object(W["e"])(i).then((function(i){i.success&&(e.$message.success("Opt Successfully"),t.title=e.choose.title,t.sessionStartTime=e.choose.sessionStartTime,t.sessionEndTime=e.choose.deadline,e.showEditName=!1,e.showEditSche=!1,e.showEditPrice=!1,a&&e.$emit("reload"))})).finally((function(t){e.loading=!1}))},handleGoWork:function(t){if(t&&t.session&&t.session.classId&&(this.isCurrentType(C["X"].REGISTERED.value)||this.isCurrentType(C["X"].LUNCHEDBYME.value))){var e=this.isCurrentType(C["X"].LUNCHEDBYME.value)?"d/":"s/",a=K["a"]+e+t.session.classId+"?token="+Ct.a.get(gt["a"]);window.location.href=a}},handleShare:function(t){this.shareVisible=!0,this.shareLink=Object(o["a"])({},t)},handleRegister:function(t){var e=this;t&&t.sessionId&&Object(Q["d"])({contentId:t.content?t.content.id:null,sessionId:t.sessionId,channelId:Object(bt["getCookie"])(gt["v"])}).then((function(t){t.success&&(e.$message.success("You have successfully registered in"),setTimeout((function(){e.$emit("reload")}),300))}))},handleCancel:function(t){var e=this;t&&t.sessionId&&Object(Q["a"])({contentId:t.content?t.content.id:null,sessionId:t.sessionId}).then((function(t){t.success&&(e.$message.success("Cancel successfully"),e.$emit("reload"))}))},handleRelaunch:function(t){this.$router.push({path:"/teacher/live-workshop/"+t.content.id+"/"+t.content.type+"?relaunch="+t.sessionId})},handleDel:function(t){var e=this;this.$confirm({title:"Confirm delete this session",content:"All the relevant content will be cleared and you will not be able to retrieve after deleting it.",centered:!0,onOk:function(){Object(W["d"])({sessionId:t.sessionId}).then((function(t){e.$message.success("Remove successfully"),e.$emit("reload")}))}})},handleEnd:function(t){var e=this;Object(W["f"])(t.id).then((function(t){e.$message.success("End successfully"),e.$emit("reload")}))},handleReopen:function(t){var e=this;Object(W["g"])(t.id).then((function(t){e.$message.success("Reopen successfully"),e.$emit("reload")}))},handleStatus:function(t){var e=this;Object(W["c"])({sessionId:this.content.sessionId,statusStr:t}).then((function(a){e.$message.success(t+" successfully"),e.$emit("reload")}))},handleArchive:function(t){var e=this;C["W"].ENDED.value===t.workshopsStatus?this.$confirm({title:"Confirm archive class session",content:"Do you confirm to archive class session? ",centered:!0,onOk:function(){Object(W["b"])(t.id).then((function(t){e.$message.success("Archive successfully"),e.$emit("reload")}))}}):Object(W["b"])(t.id).then((function(t){e.$message.success("Archive successfully"),e.$emit("reload")}))},handleRestore:function(t){var e=this;Object(W["h"])(t.id).then((function(t){e.$message.success("Restore successfully"),e.$emit("reFetch")}))},handleEdit:function(t){this.$message.info("coming soon...")},handlePreview:function(t){this.$store.dispatch("setV2Box",{id:t.session.id,type:"workshop",header:1})},handleRefresh:function(){this.needReload=!0}}},Tt=kt,St=(a("37a4"),Object(P["a"])(Tt,q,$,!1,null,"08e3f996",null)),Lt=St.exports,It={name:"SessionEventContent",components:{SessionImportForCalendar:h["a"],ContentItemCalendar:z,LiveworkshopItem:Lt},mixins:[vt["a"]],props:{info:{type:Object,default:function(){},required:!0},unitList:{type:Array,default:function(){return[]}},type:{type:[Number,String],default:C["d"].MY.value},allDatas:{type:Array,default:function(){return[]}}},watch:{unitList:{handler:function(t){this.currentUnitList=t},immediate:!0},type:{handler:function(t){this.queryType=t},immediate:!0},allDatas:{handler:function(t){this.calendarDatas=t},immediate:!0}},data:function(){return{vis:!1,FORMATTER:"h:mm a",FORMATTER_SIM:"h:mma",FORMATTER_SIM2:"HH:mm",FORMATTER_FULL:"YYYY-MM-DD h:mm a",CALENDAR_QUERY_TYPE:C["d"],BG_COLORS:C["c"],typeMap:y["e"],currentUnitList:this.unitList,queryType:this.type,loading:!1,calendarDatas:[],dateSelect:{start:null,end:null,id:"DateSelect"}}},created:function(){this.initData()},computed:Object(o["a"])(Object(o["a"])({},Object(wt["e"])({userInfo:function(t){return t.user.info},currentSchool:function(t){return t.user.currentSchool}})),{},{isLibrary:function(){return!this.info.event.extendedProps||this.info.event.extendedProps.author!==this.userInfo.email}}),methods:{moment:H.a,initData:function(){"selectDate"===this.info.event.extendedProps.eventType&&this.showDateSelectPopover(!0,this.info.event)},getPopupContainer:function(t,e){var a=t.parentElement.parentElement.parentElement.classList;return a.contains("fc-timegrid-event-harness")||a.contains("fc-daygrid-day-events"),document.body},showPopover:function(t,e){},showDateSelectPopover:function(t,e){this.dateSelect=Object(o["a"])(Object(o["a"])({},e),{},{start:H()(e.start,"HH:mm"),end:H()(e.end,"HH:mm")})},getSession:function(t){var e=this.calendarDatas.find((function(e){return e.sessionInfo.id===t.event.extendedProps.id}));return e?Object(o["a"])({},e):null},getWorkshopItem:function(t){var e=this.calendarDatas.find((function(e){return e.sessionInfo.id===t.event.extendedProps.id}));return e?Object(o["a"])(Object(o["a"])({content:Object(o["a"])({},e.content),sessionInfo:Object(o["a"])({},e.sessionInfo)},e.workshopsDetailInfo),{},{unitPlanInfo:Object(o["a"])({},e.unitPlanInfo)}):{}},handleChangeDateSelect:function(){this.$emit("changeDateSelect",this.dateSelect)},handleRemoveSelect:function(){this.$emit("changeDateSelect",null)},disabledHoursStart:function(){var t=H()(this.info.event.end).isSame(H()(this.info.event.start),"day");if(!t)return[];var e=H()(this.dateSelect.end).hours();return Array.from({length:23-e},(function(t,e){return 23-e}))},disabledHoursEnd:function(){var t=H()(this.info.event.end).isSame(H()(this.info.event.start),"day");if(!t)return[];var e=H()(this.dateSelect.start).hours();return Array.from({length:e},(function(t,e){return e}))},disabledMinutesStart:function(t){var e=H()(this.info.event.end).isSame(H()(this.info.event.start),"day");if(!e)return[];var a=H()(this.dateSelect.start).hours(),i=H()(this.dateSelect.end).hours(),s=H()(this.dateSelect.end).minutes(),n=[];return a===i&&(n=Array.from({length:59-s},(function(t,e){return 59-e}))),n},disabledMinutesEnd:function(t){var e=H()(this.info.event.end).isSame(H()(this.info.event.start),"day");if(!e)return[];var a=H()(this.dateSelect.start).hours(),i=H()(this.dateSelect.end).hours(),s=H()(this.dateSelect.start).minutes(),n=[];return a===i&&(n=Array.from({length:s},(function(t,e){return e}))),n},handleDelete:function(t){var e=this;this.loading=!0,Object(W["d"])({sessionId:t.event.extendedProps.sessionId}).then((function(t){0===t.code&&(e.$message.success("Remove successfully"),e.$emit("reFetch"))})).finally((function(){e.loading=!1}))},handleSave:function(t,e){var a=this;this.loading=!0,Object(W["e"])(t).then((function(i){i.success&&(a.$message.success("Opt Successfully"),a.$emit("save",{params:t,info:e}))})).finally((function(t){a.loading=!1}))},closeAllModal:function(){document.getElementsByClassName("ant-popover").forEach((function(t){return t.style.display="none"}))}}},_t=It,At=(a("903b"),Object(P["a"])(_t,u,p,!1,null,"0b4435da",null)),Mt=At.exports,Dt=a("b85c"),xt=a("b775"),Ot="calendarSchedule",Et={QueryForCalendar:"/classcipe/api2/".concat(Ot,"/queryForCalendar")};function Rt(t){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,i,s,n,o,l,c,d,u,p,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(xt["d"])({url:Et.QueryForCalendar,method:"get",params:e});case 2:if(i=t.sent,null===e||void 0===e||null===(a=e.workshopStatus)||void 0===a||!a.includes("4")){t.next=12;break}return n=new Date(new Date(e.startDate).getTime()+864e5).toLocaleDateString(),o=new Date(new Date(e.endDate).getTime()-864e5).toLocaleDateString(),t.next=8,App.service("session").get("dateList",{query:{zone:(new Date).getTimezoneOffset(),start:n,end:o,school:e.schoolIds.split(",")}});case 8:l=t.sent,c=Object(Dt["a"])(l);try{for(c.s();!(d=c.n()).done;)h=d.value,h.sessionId=h.sid,h.schoolId=h.school||"0",h.startTime=h.start,h.endTime=h.end,h.userAvatar=(null===(u=h.schoolInfo)||void 0===u?void 0:u.logo)||h.owner.avatar,h.userRealName=h.owner.nickname,h.workshopsStatus="close"===h.status?2:1,h.title=h.name,h.cover=h.image,h.content={},h.sessionInfo={_id:h._id,school:h.school,id:h.sid,sessionName:h.name,type:"workshop",isLib:!0},h.unitPlanInfo=null,h.workshopsDetailInfo={sessionId:h.sid,sessionStartTime:h.start,sessionEndTime:h.end,userAvatar:(null===(p=h.schoolInfo)||void 0===p?void 0:p.logo)||h.owner.avatar,userRealName:h.owner.nickname,title:h.name}}catch(f){c.e(f)}finally{c.f()}(s=i.result).push.apply(s,Object(r["a"])(l));case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t)}))),Pt.apply(this,arguments)}var Nt=a("e806"),Yt=a("ad59"),jt=a("85b1"),Ft=a("944d"),Bt={name:"SessionCalendar",mixins:[l["a"],c["a"]],props:{searchType:{type:[String],default:[C["d"].MY.value,C["d"].WORKSHOP.value].join(",")},searchFilters:{type:Array,default:function(){return["FA","SA","IA","Activity"]}},classFilters:{type:Array,default:function(){return[1,2]}},schoolFilters:{type:Array,default:function(){return[]}},editable:{type:Boolean,default:!0},addable:{type:Boolean,default:!0},forSelect:{type:Boolean,default:!1},defaultSelect:{type:Array,default:function(){return[]}},showTerm:{type:Boolean,default:!1},needDisableBefore:{type:Boolean,default:!0},showNoData:{type:Boolean,default:!1},onlyMe:{type:Boolean,default:!1}},watch:{searchType:function(t){this.queryType=t,this.debounceRefetch()},searchFilters:function(t){this.typeFilters=Object(r["a"])(t),this.debounceRefetch()},classFilters:function(t){this.clsFilters=Object(r["a"])(t),this.debounceRefetch()},schoolFilters:function(t){this.schoolIds=Object(r["a"])(t),this.debounceRefetch()},currentUnitList:{handler:function(t){this.$emit("change-units",t)},immediate:!0,deep:!0}},components:{CcCalendar:d["a"],SessionEventContent:Mt,SessionImportForCalendar:h["a"],LiveworkshopItem:Lt},data:function(){var t=this;return{ABSENT_COLORS:C["a"],BG_COLORS:C["c"],CALENDAR_QUERY_TYPE:C["d"],USER_MODE:C["U"],typeMap:y["e"],queryType:this.searchType,typeFilters:this.searchFilters,clsFilters:this.classFilters,schoolIds:this.schoolFilters,currentUnitList:[],timeLabelForYear:[],dayLabelForYear:[],attendanceVisible:!0,loading:!1,startDate:"",endDate:"",viewType:"timeGridWeek",viewDate:"",calendarDatas:[],allEvents:[],currentEvents:[],currentClass:"",event:{title:"My Event",start:"",end:""},headerToolbar:!1,scrollTime:"08:00:00",selfViews:{timeGridFourDay:{type:"timeGrid",duration:{days:12},buttonText:"year",allDaySlot:!1,slotMaxTime:"8:00:00",slotDuration:"00:15:00",slotLabelInterval:"00:15",titleFormat:function(t){return t.start.year},dayPopoverFormat:function(e){var a=H()(e.date).format("HH:mm"),i=H()(e.date).format("YYYY-MM-DD"),s=t.timeLabelForYear.find((function(t){return t.value===a})),n=t.dayLabelForYear.find((function(t){return t.value===i}));return n.label+", "+s.label},eventMaxStack:2,selectable:!1,nowIndicator:!1,slotEventOverlap:!1,eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},slotLabelClassNames:"calendar-year-label",dayHeaderContent:function(e){var a=t.convertDayForYear(),i=a.find((function(t){return t.value===H()(e.date).format("YYYY-MM-DD")}));return i?i.label:e.text},slotLabelContent:function(e){if("timeGridFourDay"===e.view.type){var a=t.timeLabelForYear.find((function(t){return t.value===H()(e.date).format("HH:mm")}));return a?a.label:e.text}return e.text}}},selectAllow:function(e){return H()(e.start).isAfter(H()())||"dayGridMonth"===t.viewType&&H()(e.start).isSame(H()(),"day")},showUnit:[],currentUnit:null,totalEvents:[],importVisible:!1,importType:y["e"].task,importModel:{startDate:null,endDate:null},selectDateEvent:{id:null},currentSession:null,termsInited:!1,blockOptions:{},termsOptions:[],yearOptions:[],currentYear:"",yearLines:[],termBackground:["#CDE7FF","#F7E3FF","#BAEAD0","#FCF2BD","#FDD7DE","#BCDCF7"],clsInited:!1,clsObj:{},clsBlockOptions:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(wt["e"])({currentSchool:function(t){return t.user.currentSchool},classList:function(t){return t.user.classList},userMode:function(t){return t.app.userMode},info:function(t){return t.user.info}})),{},{showSchoolOptions:function(){return[{id:"0",name:"Personal",index:0}].concat(this.info.schoolList.map((function(t,e){return{id:t.id,name:t.schoolName,index:e+1}})))}}),created:function(){this.debounceLoad=Object(jt["a"])(this.loadData,300),this.debounceRefetch=Object(jt["a"])(this.reFetch,300),this.initData()},mounted:function(){var t=this;setTimeout((function(){t.reRender()}),10)},methods:{initData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.currentUnit=t.currentUnitList.length>0?t.currentUnitList[0].id:"",t.showUnit=t.currentUnitList.map((function(t){return t.id})),t.convertTimeForYear();case 3:case"end":return e.stop()}}),e)})))()},loadData:function(t){return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Rt(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},loadBlock:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.queryType===t.CALENDAR_QUERY_TYPE.CLASS.value){e.next=3;break}if(!(t.schoolIds.length>1)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.loadTerm();case 5:if(!(t.searchType===C["d"].CLASS.value&&t.searchFilters.length>0)){e.next=12;break}return e.next=8,t.loadClass();case 8:return a=e.sent,e.abrupt("return",a);case 12:return i=[],t.termsOptions.length>0&&(i=t.transferTermBlock()),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})))()},loadTerm:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.termsInited){e.next=7;break}return a=t.currentSchool.id,t.queryType!==t.CALENDAR_QUERY_TYPE.CLASS.value&&1===t.schoolIds.length&&(a=t.schoolIds),e.next=5,Object(Nt["h"])({schoolId:a});case 5:i=e.sent,i.success&&(t.termsInited=!0,s=[],t.yearOptions=i.result,i.result.forEach((function(e){!t.currentYear&&H()(e.startTime).isBefore(new Date)&&H()(e.endTime).isAfter(new Date)&&(t.currentYear=e.id);var a=e.terms.map((function(a){return t.blockOptions[a.id]=a.block.blockSettings||[],Object(o["a"])(Object(o["a"])({},a),{},{blockSettings:a.block.blockSettings||[],yearName:e.name})}));s=s.concat(a)})),t.termsOptions=s);case 7:case"end":return e.stop()}}),e)})))()},loadClass:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.searchType===C["d"].CLASS.value&&t.searchFilters.length>0)){e.next=12;break}return t.currentClass=t.searchFilters[0],e.next=4,Object(Yt["e"])({classId:t.searchFilters[0]});case 4:if(a=e.sent,!a.success){e.next=12;break}if(t.clsInited=!0,t.clsObj=a.result,!(t.clsObj&&t.clsObj.term&&t.clsObj.blockSetting)){e.next=12;break}if(i=t.termsOptions.find((function(e){return e.id===t.clsObj.term})),!i){e.next=12;break}return e.abrupt("return",t.transferSubjectClsBlock(t.clsObj.blockSetting,i.startTime,i.endTime));case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e)})))()},transferSubjectClsBlock:function(t,e,a){var i=[],s=H.a.utc(e).local(),n=H.a.utc(a).local(),o=H()(this.startDate),r=H()(this.endDate);if(o.isAfter(n)||r.isBefore(s))return[];var l=s,c=n,d=[];t.split(",").forEach((function(t){var e=t.split("~");if(2===e.length){var a=H()(e[0]),i=H()(e[1]),s=a.format("HH:mm:ss"),n=a.format("dddd"),o=i.format("dddd"),r=i.format("HH:mm:ss");d=d.concat([{week:n,start:s,end:n!==o?"23:59:59":r},{week:o,start:n!==o?"00:00:00":s,end:r}])}}));var u=function(){var t=H()(l).format("dddd"),e=d.find((function(e){return e.week===t}));if(e){var a=l.format("YYYY-MM-DD")+" "+e.start,s=l.format("YYYY-MM-DD")+" "+e.end;i.push({start:a,end:s,display:"background",extendedProps:{termId:(new Date).getTime()}})}l=l.add(1,"d")};while(l.isBefore(c))u();return i},transferTermBlock:function(){var t=this,e=[],a=H()(this.startDate),i=H()(this.endDate),s=function(){var i=t.termsOptions.find((function(t){if(t.startTime&&t.endTime){var e=H()(t.startTime),i=H()(t.endTime);if(H()(a).isAfter(e)&&H()(a).isBefore(i))return!0}return!1}));i&&i.blockSettings&&i.blockSettings.forEach((function(t){var s=a.format("YYYY-MM-DD")+" "+t.start+":00",n=a.format("YYYY-MM-DD")+" "+t.end+":59";e.push({start:s,end:n,display:"background",extendedProps:{termId:i.id,yearName:i.yearName,termName:i.name}})})),a=a.add(1,"d")};while(a.isBefore(i))s();return e},convertTimeForYear:function(){var t=H()().startOf("day"),e=H()().endOf("day"),a=[],i=1;while(t.isBefore(e))a.push({value:t.format("HH:mm"),label:i,end:H()(t).add(15,"m").format("HH:mm")}),t=t.add(15,"m"),i++;this.timeLabelForYear=a},convertDayForYear:function(){var t=this,e=this.yearOptions.find((function(e){return e.id===t.currentYear})),a=H.a.utc(e.startTime).local(),i=[],s=H()(this.startDate),n=H()(this.endDate);while(s.isBefore(n))i.push({value:s.format("YYYY-MM-DD"),label:a.format("MMM YY")}),s=s.add(1,"d"),a=a.add(1,"M");return this.dayLabelForYear=i,i},convertYearToTime:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=H()(t).get("month"),i=H()(t).get("date"),s=this.dayLabelForYear[a].value,n=this.timeLabelForYear[i-1][e?"end":"value"];return s+" "+n+":00"},loadEvents:function(t,e,a){var i=this,s=H()(t.start).format("YYYY-MM-DD"),n=H()(t.end).format("YYYY-MM-DD");if(this.startDate=s,this.endDate=n,this.$refs.fullCalendar){var r=this.$refs.fullCalendar.getApi();r&&(r.removeAllEvents(),this.selectDateEvent.id&&r.addEvent(this.selectDateEvent))}var l={};this.totalEvents=[];var c=!1;this.queryType===this.CALENDAR_QUERY_TYPE.CLASS.value?(l.classIds=this.typeFilters,l.classTypes=this.clsFilters,c=0===this.typeFilters.length):this.queryType.indexOf(this.CALENDAR_QUERY_TYPE.WORKSHOP.value)>-1&&(l.workshopStatus=this.typeFilters.filter((function(t){return!["FA","SA","IA","Activity"].includes(t)})).join(","),l.workshopType="1,2",c=0===this.typeFilters.length),this.queryType!==this.CALENDAR_QUERY_TYPE.CLASS.value&&(l.schoolIds=this.schoolIds.join(","),this.termsInited=!1),this.loadBlock().then((function(r){if(i.needDisableBefore&&"timeGridFourDay"!==i.viewType){var d=s,u=H()().format("YYYY-MM-DD");"dayGridMonth"!==i.viewType&&(d=s+" 00:00:00",u=H()().format("YYYY-MM-DD HH:mm:ss")),H()(d).isSameOrBefore(u)&&r.push({start:d,end:u,backgroundColor:"#918585",display:"background",selectable:!1,extendedProps:{}})}if(c)e(r),i.handleViewDidMount(t);else{if(i.loading=!0,"timeGridFourDay"===i.viewType){var p=i.yearOptions.find((function(t){return t.id===i.currentYear}));p?(s=Object(bt["formatLocalUTC"])(p.startTime,"YYYY-MM-DD"),n=Object(bt["formatLocalUTC"])(p.endTime,"YYYY-MM-DD")):(s=H()().startOf("year").format("YYYY-MM-DD"),n=H()().endOf("year").format("YYYY-MM-DD"))}i.loadData(Object(o["a"])(Object(o["a"])({},l),{},{startDate:H()(s+" 00:00:00").utc().format("YYYY-MM-DD"),endDate:H()(n+" 23:59:59").utc().format("YYYY-MM-DD"),queryTypes:i.queryType})).then((function(s){if(s&&s.success&&s.result){var n=[],o=s.result;if(i.calendarDatas=s.result,o.length>0){i.currentUnitList=Object(Ft["a"])(o.filter((function(t){return t.unitPlanInfo})).map((function(t){return t.unitPlanInfo})),"id");var l=o.map((function(t){var e=-1;e=i.queryType!==C["d"].CLASS.value?i.showSchoolOptions.findIndex((function(e){return e.id===(t.sessionInfo?t.sessionInfo.schoolId:"0")})):i.currentUnitList.findIndex((function(e){return e.id===(t.unitPlanInfo?t.unitPlanInfo.id:-1)}));var a=-1===e?"#f6f3f3":C["c"][e],s=t.startTime,n=t.endTime,o=!0;return"timeGridFourDay"===i.viewType?(i.convertDayForYear(),s=i.convertYearToTime(t.startTime),n=i.convertYearToTime(t.endTime,!0),o=!1):(s=i.$options.filters["dayjs"](s),n=i.$options.filters["dayjs"](n)),H()(s).isBefore(H()())&&(o=!1),t.workshopsDetailInfo&&(o=!1),t.sessionInfo.author!==i.info.email&&(o=!1),{id:t.sessionInfo.id,title:t.workshopsDetailInfo&&t.workshopsDetailInfo.title?t.workshopsDetailInfo.title:t.sessionInfo.sessionName,start:s,end:n,backgroundColor:"transparent",borderColor:"transparent",editable:i.editable&&o,extendedProps:{classId:t.sessionInfo.classId,planId:t.sessionInfo.planId,contentId:t.sessionInfo.contentId,sessionType:t.sessionInfo.sessionType,author:t.sessionInfo.author,taskType:t.content?t.content.taskType:"",sessionId:t.sessionId,status:t.attendance||"absent",id:t.sessionInfo.id,backgroundColor:a,start:t.startTime,end:t.endTime,userAvatar:t.userAvatar,userRealName:t.userRealName,schoolId:t.schoolId,schoolName:t.schoolName,isWorkShop:!!t.workshopsDetailInfo}}}));i.calendarDatas=s.result,i.allEvents=l;var c=l.filter((function(t){return!(i.queryType.indexOf(i.CALENDAR_QUERY_TYPE.MY.value)>-1&&!t.extendedProps.isWorkShop&&!i.typeFilters.includes(t.extendedProps.taskType))&&(i.$route.query&&i.$route.query.sessionId?t.extendedProps.sessionId!==i.$route.query.sessionId:i.queryType===i.CALENDAR_QUERY_TYPE.CLASS.value||!i.onlyMe||t.extendedProps.author===i.info.email)}));n=c}else n=[],i.currentUnitList=[];i.totalEvents=n,e(n.concat(r)),i.handleViewDidMount(t),i.handleScrollTime(),i.handleInitSelect()}else a({message:"Error"})})).catch((function(t){var e=t&&(t.message||t)||"Remote Api Error";a({message:e}),i.$message.error(e)})).finally((function(){i.loading=!1}))}}))},getOptions:function(t){var e="";for(var a in this.CALENDAR_QUERY_TYPE)this.CALENDAR_QUERY_TYPE[a].value===t&&(e=this.CALENDAR_QUERY_TYPE[a].label);return this[e]?this[e]:[]},setViewDate:function(t){var e=H()(t.start).format("MMM D, YYYY"),a=H()(t.start).format("MMM D"),i=H()(t.end).subtract(1,"days").format("MMM D, YYYY");this.viewDate="timeGridDay"===this.viewType?e:[a,i].join(" - ")},handleChangeYear:function(t){this.currentYear=t,this.changeView({target:{value:"timeGridFourDay"}})},changeView:function(t){var e=this,a=t.target.value,i=this.$refs.fullCalendar.getApi(),s=this.selfViews;if("timeGridFourDay"===this.viewType){var n=this.yearOptions.find((function(t){return t.id===e.currentYear}));if(n){var o=H.a.utc(n.endTime).local().diff(H.a.utc(n.startTime).local(),"month",!0);s.timeGridFourDay.duration.days=Math.ceil(o),this.computeYearLines()}}i.setOption("views",s),i.changeView(a),this.$nextTick((function(){if("timeGridFourDay"===e.viewType){var t=document.querySelector(".calendar-year-label").offsetWidth;e.$refs.yearLines.style.paddingLeft="".concat(t,"px")}}))},computeYearLines:function(){var t=this,e=this.yearOptions.find((function(e){return e.id===t.currentYear}));if(e.terms&&e.terms.length>0){var a=H()(e.endTime).diff(H()(e.startTime),"days"),i=[],s=H()(e.startTime),n=H()(e.endTime);e.terms.forEach((function(r,l){var c=H()(r.startTime),d=H()(r.endTime),u=d.diff(c,"days"),p=0;s.isBefore(c)&&(p=c.diff(s,"days"),i.push({width:a?p/a*100:0,background:"#fff",name:"rest",startTime:s.format("YYYY-MM-DD"),endTime:c.format("YYYY-MM-DD"),id:(new Date).getTime()+1e3*Math.random()})),i.push(Object(o["a"])(Object(o["a"])({},r),{},{width:a?u/a*100:0,background:t.termBackground[l]})),l===e.terms.length-1&&n.isAfter(d)&&(p=n.diff(d,"days"),i.push({width:a?p/a*100:0,background:"#fff",name:"rest",startTime:s.format("YYYY-MM-DD"),endTime:c.format("YYYY-MM-DD"),id:(new Date).getTime()+1e3*Math.random()})),s=d})),this.yearLines=i}},handleScheduleChange:function(t){var e=this.$refs.fullCalendar.getApi();e[t]()},handleSchoolChange:function(t){var e=this;this.initData(),setTimeout((function(){e.reFetch()}),100)},handleWeekendsToggle:function(){this.calendarOptions.weekends=!this.calendarOptions.weekends},handleViewDidMount:function(t){var e=this;this.$nextTick((function(){if(e.$refs.fullCalendar){var a=e.$refs.fullCalendar.getApi();a&&(e.setViewDate(t),a.render())}var i=document.getElementsByClassName("fc-timegrid-now-indicator-line");if(i&&i.length>0){var s=document.getElementsByClassName("fc-timegrid-body")[0];s.insertBefore(i[0],s.firstChild)}}))},handleScrollTime:function(){var t=this;"timeGridWeek"!==this.viewType&&"timeGridDay"!==this.viewType||this.$nextTick((function(){if(t.$refs.fullCalendar){var e=t.$refs.fullCalendar.getApi(),a=H()().subtract(15,"m").format("HH:mm:ss");t.forSelect&&t.defaultSelect&&t.defaultSelect[1]&&(a=t.defaultSelect[0].format("HH:mm:ss")),e&&e.scrollToTime(a)}}))},handleInitSelect:function(){if(this.forSelect&&this.defaultSelect&&this.defaultSelect[1]){var t=this.$refs.fullCalendar.getApi(),e=t.getEventById("DateSelect");e||(this.selectDateEvent={id:"DateSelect",title:"DateSelect",start:this.defaultSelect[0].format("YYYY-MM-DD HH:mm:ss"),end:this.defaultSelect[1].format("YYYY-MM-DD HH:mm:ss"),backgroundColor:"transparent",borderColor:"transparent",editable:!0,extendedProps:{eventType:"selectDate",backgroundColor:"#3688d8",start:this.defaultSelect[0].format("YYYY-MM-DD HH:mm:ss"),end:this.defaultSelect[1].format("YYYY-MM-DD HH:mm:ss")}},t.addEvent(this.selectDateEvent),t.unselect(),(H()(this.startDate).isAfter(this.defaultSelect[1],"d")||H()(this.endDate).isBefore(this.defaultSelect[0]," d"))&&t.gotoDate(this.defaultSelect[0].toDate()))}},handleDateSelect:function(t){if(this.addable&&(this.$refs.tooltip.style.visibility="visible",this.$refs.tooltip.style.top=t.jsEvent.clientY+"px",this.$refs.tooltip.style.left=t.jsEvent.clientX+"px"),this.event=t,this.importModel.startDate=H()(this.event.start).format("YYYY-MM-DD HH:mm:ss"),this.importModel.endDate=H()(this.event.end).format("YYYY-MM-DD HH:mm:ss"),"dayGridMonth"===this.viewType&&(this.importModel.endDate=H()(this.event.end).subtract(1,"day").endOf("day").format("YYYY-MM-DD HH:mm:ss")),this.forSelect){var e=this.$refs.fullCalendar.getApi(),a=e.getEventById("DateSelect");a&&a.remove(),this.selectDateEvent={id:"DateSelect",title:"DateSelect",start:this.importModel.startDate,end:this.importModel.endDate,backgroundColor:"transparent",borderColor:"transparent",editable:!0,extendedProps:{eventType:"selectDate",backgroundColor:"#3688d8",start:this.importModel.startDate,end:this.importModel.endDate}},e.addEvent(this.selectDateEvent),e.unselect()}this.$emit("date-select",this.importModel)},changeDateSelect:function(t){var e=this.$refs.fullCalendar.getApi(),a=e.getEventById("DateSelect");if(a&&a.remove(),t){var i=H()(t.start).format("YYYY-MM-DD HH:mm:ss"),s=H()(t.end).format("YYYY-MM-DD HH:mm:ss");e.addEvent({id:"DateSelect",title:"DateSelect",start:i,end:s,backgroundColor:"transparent",borderColor:"transparent",editable:!0,extendedProps:{eventType:"selectDate",backgroundColor:"#3688d8",start:i,end:s}}),this.$emit("date-select",{startDate:i,endDate:s})}else this.$emit("date-select",null)},closeTip:function(){this.$refs.tooltip.style.visibility="hidden"},handleStepChange:function(t){this.currentActiveStepIndex=t.index},handleAddUnit:function(){this.closeTip(),this.importType=y["e"]["unit-plan"];var t="/teacher/session-import/".concat(this.importType,"/").concat(this.currentClass,"?startDate=").concat(this.importModel.startDate,"&endDate=").concat(this.importModel.endDate,"&searchType=").concat(this.searchType,"&source=calendar");this.$router.push(t)},handleAddSession:function(t){this.closeTip(),this.importType=t||y["e"].task;var e="/teacher/session-import/".concat(this.importType,"/").concat(this.currentClass,"?startDate=").concat(this.importModel.startDate,"&endDate=").concat(this.importModel.endDate,"&searchType=").concat(this.searchType,"&source=calendar");this.$router.push(e)},handleChoose:function(){this.reFetch(),this.handleCloseImport()},handleCancelImport:function(){var t=this;this.$confirm({title:"Confirm cancel import",content:"Please complete the setting before leaving the page, otherwise the session can not be created",centered:!0,okText:"Leave without saving",cancelText:"Continue",onOk:function(){t.handleCloseImport()}})},handleCloseImport:function(){this.importVisible=!1},handleEventClick:function(t){},handleEvents:function(t){this.currentEvents=t},handleDatesSet:function(t){this.startDate=H()(t.start).format("YYYY-MM-DD"),this.endDate=H()(t.end).format("YYYY-MM-DD"),this.viewType=t.view.type},handleMouseEnter:function(t){},handleChangeEvents:function(){var t=this,e=this.$refs.fullCalendar.getApi();e.removeAllEvents(),this.allEvents.forEach((function(a){var i=a.extendedProps;t.showUnit.includes(i.planId)&&e.addEvent(a)}))},handleMouseLeave:function(t){},handleEventDrop:function(t){var e=t.event,a=e.extendedProps,i=H()(e.start);if(H()().isAfter(i))e.setDates(t.oldEvent.start,t.oldEvent.end);else if("DateSelect"===t.event.id)this.$emit("date-select",{startDate:H()(e.start).format("YYYY-MM-DD HH:mm:ss"),endDate:H()(e.end).format("YYYY-MM-DD HH:mm:ss")});else{var s={sessionStartTime:H()(e.start).utc().format("YYYY-MM-DD HH:mm:ss"),deadline:H()(e.end).utc().format("YYYY-MM-DD HH:mm:ss"),startDate:H()(e.start).utc().format("YYYY-MM-DD HH:mm:ss"),endDate:H()(e.end).utc().format("YYYY-MM-DD HH:mm:ss"),id:a.id};this.handleSave(s,t)}},handleEventResize:function(t){var e=t.event,a=e.extendedProps;if("DateSelect"===t.event.id)this.$emit("date-select",{startDate:H()(e.start).format("YYYY-MM-DD HH:mm:ss"),endDate:H()(e.end).format("YYYY-MM-DD HH:mm:ss")});else{var i={sessionStartTime:H()(e.start).utc().format("YYYY-MM-DD HH:mm:ss"),deadline:H()(e.end).utc().format("YYYY-MM-DD HH:mm:ss"),startDate:H()(e.start).utc().format("YYYY-MM-DD HH:mm:ss"),endDate:H()(e.end).utc().format("YYYY-MM-DD HH:mm:ss"),id:a.id};this.handleSave(i,t)}},handleSave:function(t,e){var a=this;this.loading=!0,Object(W["e"])(t).then((function(i){i.success&&(a.$message.success("Opt Successfully"),a.handleSaveContentEvent({params:t,info:e}))})).finally((function(t){a.loading=!1}))},handleSaveContentEvent:function(t){var e=t.params,a=t.info,i=this.calendarDatas.find((function(t){return t.sessionInfo.id===e.id})),s={};if(e.planId&&(s=this.currentUnitList.find((function(t){return t.id===e.planId}))||{}),i&&(i.sessionInfo=Object(o["a"])(Object(o["a"])({},i.sessionInfo),e),i.unitPlanInfo=Object(o["a"])(Object(o["a"])({},i.unitPlanInfo),s)),e.planId&&a){var n=this.currentUnitList.findIndex((function(t){return t.id===e.planId})),r=C["c"][n];a.event.setExtendedProp("backgroundColor",r),a.event.setExtendedProp("planId",e.planId)}else{var l=a.event.extendedProps.backgroundColor;a.event.setExtendedProp("backgroundColor",l)}},closeAllModal:function(){document.getElementsByClassName("ant-popover").forEach((function(t){return t.style.display="none"}))},reRender:function(){var t=this;this.$nextTick((function(){if(t.$refs.fullCalendar){var e=t.$refs.fullCalendar.getApi();e&&e.render()}}))},reFetch:function(){var t=this;this.$nextTick((function(){if(t.$refs.fullCalendar){var e=t.$refs.fullCalendar.getApi();e&&e.refetchEvents()}}))}}},Ht=Bt,Vt=(a("07d3"),a("d6c0"),Object(P["a"])(Ht,i,s,!1,null,"29bcefbe",null));e["default"]=Vt.exports},"2cea":function(t,e,a){},"2d57":function(t,e,a){},"2d67":function(t,e,a){"use strict";a("3c1d")},3361:function(t,e,a){var i=a("b2b7");t.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"27.909",viewBox:"0 0 28 27.909"},children:[{tag:"defs"},{tag:"path",attrsMap:{id:"liebiao_","data-name":"liebiao ",class:"cls-1",d:"M62,62h6.932v6.93H62V62Zm10.279,0H90v6.93H72.279V62Zm0,10.326H90v7.208H72.279V72.326ZM62,72.326h6.932v7.208H62V72.326Zm0,10.558h6.932v7.024H62V82.885Zm10.279,0H90v7.024H72.279V82.885Z",transform:"translate(-62 -62)"}}]})}},"37a4":function(t,e,a){"use strict";a("0618")},"3c1d":function(t,e,a){},4198:function(t,e,a){"use strict";a("49af")},4768:function(t,e,a){},4803:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status-icon-item"},[0===t.status?[a("a-icon",{attrs:{type:"cloud-upload"}})]:t._e()],2)},s=[],n=(a("a9e3"),{name:"ContentStatusIcon",props:{status:{type:Number,default:-1}}}),o=n,r=(a("0f1d"),a("0c7c")),l=Object(r["a"])(o,i,s,!1,null,"7b28124c",null);e["a"]=l.exports},4830:function(t,e,a){},"49af":function(t,e,a){},"4fb2":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return n}));var i=a("2b0e"),s=new i["default"],n={LinkToMyContentItem:"LinkToMyContentItem",ToggleSelectContentItem:"ToggleSelectContentItem",ReferContentItem:"ReferContentItem",ReloadMyContent:"ReloadMyContent"}},"58e7":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAmCAYAAAC29NkdAAAAAXNSR0IArs4c6QAABzVJREFUWEetWH90U/UV/9yXpC1tgbKVJhSktE0cAlPPdMeibpahglRqEixDxDoO0yIWdMjopuPHOgSRrqf8cLPsIOAcrnY0FZEiHRud+yG2PbJzHD9KwHYiNKTYSC1t07x3d97rXvrSH2mS9v55f3zu593vr3sfIYgkpVutRPQoCNPBNJEIY5lxiQifMEtVXT4c9DRWeoJhjJ2cNS4mKnoBET/ETLcTYRIzviLw5wB9Kkpimfviu0cGw6CBDIlma6aOhBICbguWHEA7M+9EW/sml+tYu9Z3/PiceBrjWy8QngVRbDAcBn/s8/HKa59VftzXrx/BJIt9nQAUDkEswMzgU6KX5rU0VVyRDQmp9pQYPR8BaFqoOAz2QcJG1wXHy9qYAIJJZutrAgkrQgXV+jFw0St6Z+lJiBIEXQ2BkiPBkZgLrzodG9RYP0Fjum0VCbS9L+hCWyYW59yPqZabYIjSo8F5CSc+PIW3yqrxxZWWQHfm0yDoAPqW1jAxORFLFj6AzO/djpvNk9Dt9eHs+f/i93+sxsFDf+v3HSLzQrfTUS4bFILGlPmpZDD8B4RRqnd83Ci8XrIas+/7zoCFaGu7gVUFO3H0z/22TYB/1pwMlGzJR3y8HzrAfuwvtVixugTtNzr9ema+LnbTVHnL9BC02N4m0CLVIyYmCpUHNuG2GelBV8knivhx/jZ8cLx2QL+sOTNRWrIaOp0QFKf+VAPsS9bB6/X1kpS41HXBsZy+OenhifpRhkYC6VXr1sI85C56MKQt1NHZhbn2AjQ4Pw/wnzY1BUf+tBXRUYaQcHbvO4wNm/f2+jI6vOgwUVK6/QVBQJFqSU9NRk3VduiE4F+tzXrmXBPmPfozdHZ5FXVsbAyqK7chbUro58TnEzHz/mdx6bLbDy0xcslktleBMFfVri/IxTPLHgnpq7VOb759DAUbShXVjldXIseaGTbGr3e9g6IdZb1xEvaR0WK7TKAJqra6sggzpqWGDS4HPLWqSKne9lfyI4r/qPY0bI+v0ywz15PJYmct2rn6NzFmdFxECa5fb4feoEPsqJiI4t0tHtx69zJNLLeQ0Wz3kXJ39cils+Vh7b+ImAwSJIoSJt2S47cyQyKj2dZKRAmq9kztfiSMjR/JvCFjfdnahul3/UhDkD1ktNj/TcCtqla+/+6685aQQUfS8Z8nP8WCJ/yvHJj5FJnMtv0gylUT5T9tw0trloxk3pCxNm7Zh9K97/n9JYlLyWh5ZDFB9wdVm5SYgLqaUhgM/ns75ATDcezo6MId9+Wh1dOmXWIrIXl+rDHW8AUR/Puw8KWleOrJh4eTL+zYHa8fxJbiA9orprUZnROUtzgp3bZNEGiNapUPyUfHf4OxYyK7bsJld7XFg4zZKyBXsbd82NjsrPilQjDe/ND4OIpxEmiM6rAg+/vYVfRcuLki8l/+k2K8+/4/tEvrkr7Sm93u8q/9/aDJYl8LYKs2g9yJZM+7J6KkoQY5Dn+otFtaYYmfdl1w/E7WaTrqTL3JPO4kiPwNoLzURw9uRcpkU6j5wvL7rOkK5i4ogPwCqcJAret8RQYAqQ9BwGSePx3Q14MoWg2Qu5vD72wZ8ctbvpTn//DnuNiojDE9wujo7uY7rjU5zqiqfkOTMc36HOmEgJpnfHcayvauR1SIvd1QZezs9CLnyY2o++RcoCtzfrPT8ZpWOeDYmWS2lQvyPKwRuXXfvf0FCGH0iQMRFUURS1e8iuq/1gXuO5bKXM5Kf1c/aAUVw5TMGJNhXDVA92pRFufMxrZfPQNBGPC7hiocREnCqrU7UdFnUGLmGhc658BZpblneuAGzZQwxZoQbRBqtO+0HLDQPiuifk+eX1au2YHK9//ed1nrfR5xVkvLod4nROMRtBSJKfYJegP+BUKKFtWada/SNYf6HHZ5u7H8+eJ+EyAzzt8Quu9ua3ivz/zam23ItUpMs92s0+GEtuuWw+UZd8/OnyoddDC53nYDuXmbcbLOfzDVE9sEn5TZ3FjZGCx+SIJysExSL1A1CJO1YPJYemDPL/CNcf4HKCBXs+tLLFpaiHN9Jj4wN8DHc4YiF3QP9v2qxJuyk3XRuqNE9G2tLXXKBLy1+8V+E9zps414Im8zLl+51mfPoQ7omNfsrOod34KUMKQKqvHKwdHTESKaqcWUm4o9u9binowZivr4iXrkPV8c8LdA1jP4uORptbrdJ74e8sj/3yEsgnKM0fhgHEbHHSKiH2iT6PU6vLxuGbq7Razf/AYkKWAWk8k5XOf1i4DynuE5RAmbYA9uTpTR4tuv/V0SNB/jt83OCnkWVd7XcCRCgkoKeeDaREQvDpaQGSKD1151OorDIaX1HQ5BBceYZn2MBOENEALuG2Z4JObH3BccRyMlp1RhOMFqbGJa9p06nf4QAcofCmY4RYmzWi46GoaLPyIEZRKJidmjhQRhCUiQpFbfgcGernAJ/w+TBoeKz2s5igAAAABJRU5ErkJggg=="},"5bb5":function(t,e,a){},"638c":function(t,e,a){"use strict";a("736b")},"663b":function(t,e,a){"use strict";a("e1b6")},"666c":function(t,e,a){"use strict";a("05c1")},"66d8":function(t,e,a){"use strict";a("a283")},6964:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-card-view"},[a("div",{staticClass:"card-cover",style:{backgroundImage:"url("+t.cover+")"}}),a("div",{class:{"card-info":!0,"active-item":t.activeFlag}},[a("div",{staticClass:"card-title"},[a("div",{staticClass:"type-icon"},[a("content-type-icon",{attrs:{type:t.contentType}})],1),a("div",{staticClass:"title-text"},[t._v(t._s(t.title))])]),a("div",{staticClass:"card-time"},[t._v(" "+t._s(t._f("dayjs")(t.updateTime))+" ")])])])},s=[],n=(a("a9e3"),a("8f46")),o={name:"DataCardView",components:{ContentTypeIcon:n["a"]},props:{cover:{type:String,default:null},title:{type:String,default:null},updateTime:{type:String,default:null},activeFlag:{type:Boolean,default:!1},contentType:{type:Number,required:!0}}},r=o,l=(a("7531"),a("0c7c")),c=Object(l["a"])(r,i,s,!1,null,"3706e6d5",null);e["a"]=c.exports},"6a3c":function(t,e,a){},"6f6b":function(t,e,a){var i=a("b2b7");t.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"30.511",height:"24.408",viewBox:"0 0 30.511 24.408"},children:[{tag:"g",attrsMap:{id:"打开的文件夹",transform:"translate(0)"},children:[{tag:"path",attrsMap:{id:"路径_403","data-name":"路径 403",style:" fill: #009b77;",class:"cls-1",d:"M269,4.247H258.243L255.515.491A1.276,1.276,0,0,0,254.606,0h-7.579c-.909,0-1.515.98-1.212,2.287l2.728,17.153a1.474,1.474,0,0,0,1.364,1.307h16.671a1.5,1.5,0,0,0,1.364-1.306l2.122-13.071c.3-1.144-.3-2.124-1.062-2.124Z",transform:"translate(-239.879 0)"}},{tag:"path",attrsMap:{id:"路径_404","data-name":"路径 404",style:" fill: #fff;",class:"cls-2",d:"M358.4,286.427V275.456h18.306v10.971Z",transform:"translate(-349.86 -268.89)"}},{tag:"path",attrsMap:{id:"路径_405","data-name":"路径 405",style:" fill: #15c39a;",class:"cls-3",d:"M28.931,229.548H15.519l-3.587-3.776a1.643,1.643,0,0,0-1.091-.492H1.484a1.54,1.54,0,0,0-1.4,2.133L4.6,243.169a1.752,1.752,0,0,0,1.715,1.15h18.9a1.754,1.754,0,0,0,1.716-1.148l3.56-11.982a1.511,1.511,0,0,0-1.56-1.64Z",transform:"translate(0 -219.911)"}}]}]})}},7286:function(t,e,a){},"72b3":function(t,e,a){"use strict";a("2cea")},"736b":function(t,e,a){},7531:function(t,e,a){"use strict";a("2d57")},7569:function(t,e,a){"use strict";a("ba70")},"7eee":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-link"},[i("div",{staticClass:"link-group-wrapper"},[t.ownerLinkGroupList.length&&!t.linkGroupLoading?t._l(t.ownerLinkGroupList,(function(e,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:!(t.hiddenEmptyGroup&&0===e.contents.length),expression:"!(hiddenEmptyGroup && linkGroup.contents.length === 0)"}],key:a,staticClass:"link-group"},[i("div",{staticClass:"group-item"},[i("div",{staticClass:"group-header"},[i("div",{staticClass:"group-left-info"},[i("div",{staticClass:"group-name"},[i("div",{staticClass:"group-name-text"},[t._v(" "+t._s(e.group)+" ")])])]),i("div",{staticClass:"group-right-info"},[i("div",{staticClass:"group-action"},[i("a-button",{directives:[{name:"show",rawName:"v-show",value:t.canEdit,expression:"canEdit"}],style:{"background-color":"#fff",color:"#000",border:"none"},attrs:{type:"primary"},on:{click:function(a){return t.handleLinkGroup(e)}}},[i("div",{staticClass:"btn-text",staticStyle:{"line-height":"20px"}},[t._v(" + Link ")])])],1)])]),i("div",{staticClass:"group-body"},[i("draggable",{attrs:{group:"site",animation:"300",disabled:!t.canEdit},on:{end:t.handleDragEnd},model:{value:e.contents,callback:function(a){t.$set(e,"contents",a)},expression:"linkGroup.contents"}},[i("transition-group",t._l(e.contents,(function(e){return i("div",{key:e.id,staticClass:"group-link-item"},[i("div",{staticClass:"left-info",on:{click:function(a){return t.handleViewDetail(e)}}},[i("div",{staticClass:"icon"},[i("content-type-icon",{attrs:{type:e.type}})],1),i("div",{staticClass:"name"},[t.showDragTips?i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t._v(" Click and drag content to change the order ")]),t._v(" "+t._s(e.name?e.name:"untitled")+" ")],2):t._e(),t.showDragTips?t._e():[t._v(" "+t._s(e.name?e.name:"untitled")+" ")]],2),e.type===t.typeMap.task?["fa"===e.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag green-active-task-type"},[t._v(" "+t._s(e.taskType)+" ")]):t._e(),"sa"===e.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag red-active-task-type"},[t._v(" "+t._s(e.taskType)+" ")]):t._e(),"activity"===e.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag blue-active-task-type"},[t._v(" "+t._s(e.taskType)+" ")]):t._e(),"ia"===e.taskType.toLowerCase()?i("a-tag",{staticClass:"task-type-tag blue-active-task-type"},[t._v(" "+t._s(e.taskType)+" ")]):t._e()]:t._e(),e.isCreated?i("div",{staticClass:"downloaded-icon"},[i("a-tooltip",{attrs:{placement:"top",title:"already saved in my content"}},[i("downloaded-svg")],1)],1):t._e()],2),i("div",{staticClass:"right-info"},[i("div",{staticClass:"date",on:{click:function(a){return t.handleViewDetail(e)}}},[t._v(t._s(t._f("dayjs")(e.createTime)))]),i("div",{staticClass:"status",on:{click:function(a){return t.handleViewDetail(e)}}},[0===e.status?[t._v("Draft")]:t._e(),1===e.status?[t._v("Published")]:t._e()],2),t.canEdit?i("div",{staticClass:"more-action-wrapper action-item-wrapper"},[i("a-dropdown",[i("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"more"}}),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("a-popconfirm",{attrs:{title:t.$t("teacher.my-content.action-delete")+"?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleDeleteLinkItem(e)}}},[i("a",{staticClass:"delete-action",attrs:{href:"#"}},[i("a-icon",{attrs:{type:"delete"}}),t._v(" "+t._s(t.$t("teacher.my-content.action-delete"))+" ")],1)])],1),i("a-menu-item",[i("a",{on:{click:function(a){return t.handleEditLinkItem(e)}}},[i("a-icon",{attrs:{type:"form"}}),t._v(" "+t._s(t.$t("teacher.my-content.action-edit"))+" ")],1)])],1)],1)],1):t._e()])])})),0)],1),0===e.contents.length?i("div",{staticClass:"no-link-group-contents"},[i("no-more-resources")],1):t._e()],1)])])})):t._e()],2),i("a-modal",{attrs:{footer:null,"dialog-style":{top:"10px"},destroyOnClose:"",width:"900px"},model:{value:t.selectLinkContentVisible,callback:function(e){t.selectLinkContentVisible=e},expression:"selectLinkContentVisible"}},[i("div",{staticClass:"my-modal-title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.linkTitle)+" ")]),i("div",{staticClass:"link-content-wrapper"},[i("task-new-my-content",{attrs:{"from-id":t.fromId,"from-type":t.fromType,"filter-type":t.subFilterType,"no-selected-tips":t.noSelectedTips,"selected-list":t.selectedList,"group-name":t.groupName},on:{cancel:function(e){t.selectLinkContentVisible=!1},ensure:t.handleEnsureSelectedLink}})],1)]),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",closable:!1,width:"800px",visible:t.previewVisible},on:{close:function(e){t.previewVisible=!1}}},[i("a-row",{staticClass:"preview-wrapper-row"},[i("a-col",{attrs:{span:"2"}},[i("div",{staticClass:"view-back",on:{click:function(e){t.previewVisible=!1}}},[i("div",{staticClass:"back-icon"},[i("img",{attrs:{src:a("217a")}})])])]),i("a-col",{attrs:{span:"22"}},[t.previewCurrentId&&t.previewType?i("div",{staticClass:"detail-wrapper"},[i("common-preview-no-link",{attrs:{id:t.previewCurrentId,type:t.previewType}})],1):t._e()])],1)],1)],1)},s=[],n=(a("a9e3"),a("d3b7"),a("159b"),a("7db0"),a("498a"),a("9afb")),o=a("9586"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-content"},[i("div",{staticClass:"create-new-action"},[i("div",{staticClass:"create-action"},[i("a-button",{attrs:{type:"primary",shape:"round",icon:"plus",loading:t.createLoading},on:{click:t.handleEnsureCreate}},[t._v(" Create New "+t._s(t.currentTypeLabel)+" ")])],1)]),i("div",{staticClass:"content-wrapper"},[i("a-skeleton",{attrs:{loading:t.skeletonLoading,active:""}},[i("div",{staticClass:"content-list"},["list"===t.dataListMode?i("a-list",{attrs:{size:"large",pagination:t.pagination,"data-source":t.myContentList,loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e){return i("a-list-item",{key:"item.key",class:{"my-list-item":!0,"active-item":-1!==t.mySelectedList.indexOf(e.type+"-"+e.id),"active-new-item":e.id===t.editId},attrs:{"data-id":e.type+"-"+e.id}},[i("div",{staticClass:"select-block",on:{click:function(a){return t.handleLinkItem(e,a)}}},[-1===t.mySelectedList.indexOf(e.type+"-"+e.id)?i("a-icon",{staticClass:"select-block-icon",attrs:{type:"border"}}):t._e(),-1!==t.mySelectedList.indexOf(e.type+"-"+e.id)?i("div",{staticClass:"selected-icon"},[i("img",{attrs:{src:a("7aa6")}})]):t._e()],1),i("span",{staticClass:"content-info-left"},[i("content-type-icon",{attrs:{type:e.type}}),i("span",{staticClass:"name-content"},[t.editId===e.id&&"input"===t.createNewNameMode?i("a-input",{ref:"inputRef",attrs:{size:"small",type:"text",placeholder:"Input name"},on:{blur:function(a){return t.handleConfirmName(e)},pressEnter:function(a){return t.handleConfirmName(e)}},model:{value:t.createNewName,callback:function(e){t.createNewName=e},expression:"createNewName"}}):i("a-tooltip",{attrs:{title:"Rename"}},[i("span",{staticClass:"name-text",on:{click:function(a){return t.handleRename(e)}}},[t._v(" "+t._s(e.name?e.name:"Untitled")+" ")])])],1)],1),i("span",{staticClass:"content-info-right"},[i("span",{staticClass:"status"},[0===e.status?[t._v("Draft")]:t._e(),1===e.status?[t._v("Published")]:t._e()],2),i("span",{staticClass:"update-time"},[t._v(" "+t._s(t._f("dayjs")(e.updateTime||e.createTime))+" ")]),i("div",{staticClass:"action"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item",on:{click:function(a){return t.handleViewDetail(e,a)}}},[i("span",{staticClass:"btn-text"},[t._v("Preview")])]),i("div",{staticClass:"action-item",on:{click:function(a){return t.handleEditItem(e)}}},[i("span",{staticClass:"btn-text"},[t._v("Edit")])])])])])])}}],null,!1,69311050)}):t._e(),"card"===t.dataListMode?i("a-list",{attrs:{size:"large",pagination:t.pagination,"data-source":t.myContentList,loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e){return i("div",{key:"item.key",staticClass:"my-card-list-item"},[i("div",{staticClass:"cover-img-wrapper"},[i("div",{staticClass:"cover-image",style:{backgroundImage:"url('"+e.image+"')"}})]),i("div",{staticClass:"item-intro"},[i("div",{staticClass:"page-info"},[i("span",{staticClass:"page-num-tag"},[t._v(" 1/1 ")])]),i("div",{staticClass:"main-title",on:{click:function(a){return t.handleViewDetail(e,a)}}},[t._v(" "+t._s(e.name?e.name:"Untitled")+" ")]),i("div",{staticClass:"sub-title"},[t._v(" "+t._s(t._f("dayjs")(e.createTime))+" ")])]),i("div",{staticClass:"card-action-icon"},[-1!==t.mySelectedList.indexOf(e.type+"-"+e.id)?i("img",{attrs:{src:a("7aa6")}}):t._e()])])}}],null,!1,3242308050)}):t._e(),i("div",{staticClass:"modal-ensure-action-line"},[i("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:t.handleCancel}},[t._v("Cancel")]),i("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round",disabled:!t.mySelectedList.length,loading:t.ensureLoading},on:{click:t.handleEnsure}},[t._v("Ok")])],1)],1)]),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",width:"800px",closable:!1,visible:t.previewVisible},on:{close:t.handlePreviewClose}},[i("div",{staticClass:"preview-wrapper"},[i("a-row",{staticClass:"preview-wrapper-row"},[i("a-col",{attrs:{span:"3"}},[i("div",{staticClass:"view-back",on:{click:t.handlePreviewClose}},[i("div",{staticClass:"back-icon"},[i("img",{attrs:{src:a("217a")}})])])]),i("a-col",{attrs:{span:"21"}},[i("div",{staticClass:"detail-wrapper"},[t.previewCurrentId&&t.previewType?i("div",{staticClass:"preview-detail"},[i("common-preview-no-link",{attrs:{id:t.previewCurrentId,type:t.previewType}})],1):t._e()])])],1)],1)])],1)])},l=[],c=a("3835"),d=a("b85c"),u=a("1da1"),p=(a("96cf"),a("4ec9"),a("3ca3"),a("ddb0"),a("fb6a"),a("a434"),a("b0c0"),a("823b")),h=a("ea23"),f=a("7d7a"),m=a("3f76"),v=a("4803"),g=a("8f46"),y=a("4fb2"),C=a("69b3"),w=a("05be"),b=a.n(w),k=a("8d47"),T=a.n(k),S=a("9f06"),L=a("b199"),I=a("1449"),_={name:"NewMyContent",components:{CommonPreviewNoLink:I["a"],ContentStatusIcon:v["a"],ContentTypeIcon:g["a"],UnitPlanPreview:h["default"],MaterialPreview:f["default"],NoMoreResources:C["a"],PuBuIcon:b.a,ListModeIcon:T.a},props:{filterType:{type:Number,required:!0},selectedList:{type:Array,default:function(){return[]}},fromId:{type:String,required:!0},fromType:{type:Number,required:!0},groupName:{type:String,required:!0},noSelectedTips:{type:String,default:"Please select at least one content."}},data:function(){var t=this;return{skeletonLoading:!0,loading:!0,createLoading:!1,loadFailed:!1,myContentList:[],currentStatus:"all-status",currentStatusLabel:this.$t("teacher.my-content.all-status"),currentType:null,currentTypeLabel:null,currentOwner:"all-owner",currentOwnerLabel:this.$t("teacher.my-content.all-owner"),previewVisible:!1,previewCurrentId:"",previewType:"",pagination:{onChange:function(e){p["info"]("pagination onChange",e),t.pageNo=e,t.getMyContent()},showTotal:function(t){return"Total ".concat(t," items")},total:0,pageSize:10},pageNo:1,typeMap:m["e"],dataListMode:"list",createdType:"All",createNewName:"",createNewNameMode:"hide",mySelectedList:[],mySelectedMap:new Map,editId:"",ensureLoading:!1,waitAddAssociateMap:new Map,waitCancelAssociateMap:new Map}},created:function(){this.$logger.info("NewMyContent filterType",this.filterType),this.currentType=this.filterType,this.currentTypeLabel=Object(m["b"])(this.filterType),this.$logger.info("currentTypeLabel "+this.currentTypeLabel),this.$logger.info("NewMyContent selectedList",this.selectedList),this.mySelectedList=this.selectedList.slice(),this.getMyContent()},methods:{handleToggleDataListMode:function(t){this.$logger.info("handleToggleDataListMode"+t),this.dataListMode=t},getMyContent:function(){var t=this;this.loading=!0,Object(n["FindMyContent"])({owner:m["c"][this.currentOwner],types:[this.currentType],pageNo:this.pageNo,pageSize:this.pagination.pageSize,currentId:this.currentId}).then((function(e){p["info"]("getMyContent",e),e.result&&e.result.records&&e.result.records.length?(e.result.records.forEach((function(t,e){t.key=e})),t.myContentList=e.result.records,t.pagination.total=e.result.total):(t.myContentList=[],t.pagination.total=0),p["info"]("myContentList",t.myContentList)})).finally((function(){t.loading=!1,t.skeletonLoading=!1,t.$nextTick((function(){t.$refs.inputRef&&t.$refs.inputRef.focus()}))}))},handleLinkItem:function(t,e){p["info"]("handleLinkItem",t),e.preventDefault(),e.stopPropagation();var a=t.type+"-"+t.id,i=this.mySelectedList.indexOf(a);-1!==i?(this.mySelectedList.splice(i,1),this.waitCancelAssociateMap.set(a,t),this.waitAddAssociateMap.delete(a)):(this.mySelectedList.push(a),this.waitAddAssociateMap.set(a,t),this.waitCancelAssociateMap.delete(a))},handleViewDetail:function(t,e){p["info"]("my content created by me handleViewDetail",t,e),e.preventDefault(),e.stopPropagation(),this.previewCurrentId=t.id,this.previewType=t.type,this.previewVisible=!0},handleToggleSelect:function(t){p["info"]("handleToggleSelect",t)},handlePreviewClose:function(){p["info"]("handlePreviewClose"),this.previewCurrentId="",this.previewType="",this.previewVisible=!1},handleReferItem:function(t,e){p["info"]("handleReferItem",t),e.preventDefault(),e.stopPropagation(),y["b"].$emit(y["a"].ReferContentItem,{item:t})},handleToggleType:function(t){this.$logger.info("handleToggleType "+t),this.createdType=t,this.getMyContent()},handleToggleDisplayType:function(t){this.$logger.info("handleToggleDisplayType"+t),this.currentType===t?(this.currentType=null,this.currentTypeLabel=null):(this.currentType=t,this.currentTypeLabel=Object(m["b"])(t)),this.$logger.info("after handleToggleDisplayType"+this.currentType),this.getMyContent()},handleEnsureCreate:function(){var t=this;this.$logger.info("handleEnsureCreate "+this.currentType+" "+this.createNewName),this.createLoading=!0,this.createNewName="",this.currentType===this.typeMap.evaluation?Object(S["EvaluationAddOrUpdate"])({name:this.createNewName}).then((function(e){t.$logger.info("EvaluationAddOrUpdate response",e),t.editId=e.result.id,t.createNewNameMode="input";var a=t.typeMap.evaluation+"-"+t.editId;t.mySelectedList.push(a),t.waitAddAssociateMap.set(a,{id:t.editId,type:t.typeMap.evaluation}),t.getMyContent()})).finally((function(){t.createLoading=!1})):this.currentType===this.typeMap.task?Object(L["TaskAddOrUpdate"])({name:this.createNewName}).then((function(e){t.$logger.info("TaskAddOrUpdate response",e),t.editId=e.result.id,t.createNewNameMode="input";var a=t.typeMap.task+"-"+t.editId;t.mySelectedList.push(a),t.waitAddAssociateMap.set(a,{id:t.editId,type:t.typeMap.task}),t.getMyContent()})).finally((function(){t.createLoading=!1})):(this.$logger.info("handleEnsureCreate currentType is not supported"),this.$message.warn("handleEnsureCreate currentType is not supported"))},handleCancel:function(){this.$emit("cancel")},handleEnsure:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,i,s,o,r,l,u,p,h,f,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$logger.info("handleEnsure waitCancelAssociateMap",t.waitAddAssociateMap,"waitCancelAssociateMap",t.waitCancelAssociateMap),t.ensureLoading=!0,!t.waitCancelAssociateMap.size&&!t.waitAddAssociateMap.size){e.next=18;break}a={fromId:t.fromId,fromType:t.fromType,groupName:t.groupName,otherContents:[]},i=Object(d["a"])(t.waitAddAssociateMap);try{for(i.s();!(s=i.n()).done;)o=Object(c["a"])(s.value,2),r=o[0],l=o[1],-1===t.selectedList.indexOf(r)?a.otherContents.push({toId:l.id,toType:l.type}):t.$logger.info("handleEnsure waitAddAssociateMap item is selected skip "+r,l,t.selectedList)}catch(g){i.e(g)}finally{i.f()}u={fromId:t.fromId,fromType:t.fromType,others:[]},p=Object(d["a"])(t.waitCancelAssociateMap);try{for(p.s();!(h=p.n()).done;)f=Object(c["a"])(h.value,2),m=f[0],v=f[1],-1!==t.selectedList.indexOf(m)?u.others.push({toId:v.id,toType:v.type}):t.$logger.info("handleEnsure waitCancelAssociateMap item is no selected skip "+m,v,t.selectedList)}catch(g){p.e(g)}finally{p.f()}if(t.ensureLoading=!0,t.$logger.info("associate data",a),!a.otherContents.length){e.next=14;break}return e.next=14,Object(n["Associate"])(a);case 14:if(t.$logger.info("cancelAssociateData data",u),!u.others.length){e.next=18;break}return e.next=18,Object(n["AssociateCancel"])(u);case 18:t.ensureLoading=!1,t.$emit("ensure");case 20:case"end":return e.stop()}}),e)})))()},handleEditItem:function(t){p["info"]("handleEditItem",t),t.type===m["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+t.id,"_blank"):t.type===m["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+t.id,"_blank")},handleConfirmName:function(t){var e=this;this.createNewNameMode="hide",t.name!==this.createNewName&&(t.name=this.createNewName,Object(n["Rename"])({id:t.id,type:t.type,name:this.createNewName}).then((function(t){e.$logger.info("Rename response",t),t.success||e.$message.error(t.message)})))},handleRename:function(t){var e=this;this.editId=t.id,this.createNewNameMode="input",this.createNewName=t.name,this.$nextTick((function(){e.$refs.inputRef.focus()}))}}},A=_,M=(a("8fb9"),a("0c7c")),D=Object(M["a"])(A,r,l,!1,null,"599b2370",null),x=D.exports,O=a("1077"),E=a.n(O),R=a("b76a"),P=a.n(R),N={name:"TaskLink",components:{NoMoreResources:C["a"],ContentTypeIcon:g["a"],TaskNewMyContent:x,MyContentSelector:o["a"],CommonPreviewNoLink:I["a"],draggable:P.a,DownloadedSvg:E.a},props:{fromType:{type:Number,required:!0},fromId:{type:String,required:!0},filterType:{type:Number,default:0},canEdit:{type:Boolean,default:!0},isLibrary:{type:Boolean,default:!1},hiddenEmptyGroup:{type:Boolean,default:!1},showDragTips:{type:Boolean,default:!0}},data:function(){return{defaultGroupName:"Untitled category",defaultGroupNameEditMode:"view",defaultGroupOtherContents:[],linkGroupLoading:!0,ownerLinkGroupList:[],subDefaultGroupName:["Untitled category"],noSelectedTips:"",currentGroupId:null,selectLinkContentVisible:!1,typeMap:m["e"],previewVisible:!1,previewCurrentId:"",previewType:"",subFilterType:null,selectedList:[],showCreate:!0,showTabs:!0,linkTitle:null,groupName:null}},created:function(){this.$logger.info("load TaskLink with id["+this.fromId+"] fromType["+this.fromType+"]"),this.getAssociate()},methods:{getAssociate:function(){var t=this;this.$logger.info("GetAssociate id["+this.fromId+"] fromType["+this.fromType+"]"),this.linkGroupLoading=!0,Object(n["GetAssociate"])({id:this.fromId,type:this.fromType,published:this.isLibrary?1:0}).then((function(e){if(t.$logger.info("TaskLink GetAssociate response",e),e.success){var a=e.result;t.ownerLinkGroupList=[],a.groups.forEach((function(e){t.ownerLinkGroupList.push({group:e.groupName,contents:[]}),e.editing=!1}));var i=[],s=[];a.owner.forEach((function(e){e.contents.forEach((function(e){e.type===t.typeMap["unit-plan"]?i.push(e):e.type===t.typeMap.evaluation&&s.push(e)}))}));var n=t.ownerLinkGroupList.find((function(t){return"Relevant Unit Plan(s)"===t.group}));n&&(n.contents=i);var o=t.ownerLinkGroupList.find((function(t){return"Linked assessment tool(s)"===t.group}));o&&(o.contents=s),t.ownerLinkGroupList=t.ownerLinkGroupList.sort((function(t,e){return-1!==t.group.indexOf("Unit Plan")?-1:1})),t.selectedList=[],t.ownerLinkGroupList.forEach((function(e){e.contents.forEach((function(e){t.selectedList.push(e.type+"-"+e.id)}))})),t.$logger.info("ownerLinkGroupList",t.ownerLinkGroupList)}else t.$message.error(e.message)})).finally((function(){t.linkGroupLoading=!1}))},handleEnsureSelectedLink:function(t){this.$logger.info("handleEnsureSelectedLink",t),this.selectLinkContentVisible=!1,this.getAssociate()},handleLinkGroup:function(t){this.$logger.info("handleLinkGroup",t),this.subDefaultGroupName=t.group,"Linked assessment tool(s)"===t.group.trim()?(this.subFilterType=m["e"].evaluation,this.linkTitle="Link Assessment tool(s)",this.groupName="Linked assessment tool(s)",this.noSelectedTips="No assessment rubric(s) selected",this.selectLinkContentVisible=!0):"Relevant Unit Plan(s)"===t.group.trim()?(this.subFilterType=m["e"]["unit-plan"],this.linkTitle="Link Unit Plan",this.groupName="Relevant Unit Plan(s)",this.noSelectedTips="No new Unit plan selected",this.selectLinkContentVisible=!0):(this.$logger.warn("handleLinkGroup unknown group",t),this.$message.warn("handleLinkGroup unknown group "+t))},handleToggleEditGroupName:function(t){var e=this;if(this.$logger.info("handleToggleEditGroupName",t),t.editing){t.editing=!1;var a=[];t.contents.forEach((function(t){a.push(t.id)})),Object(n["AddOrSaveGroupName"])({fromId:this.fromId,fromType:this.fromType,groupName:t.group,ids:a}).then((function(a){e.$logger.info("AddOrSaveGroupName",a),t.editing=!1}))}else t.editing=!0},handleViewDetail:function(t){p["info"]("handleViewDetail",t),this.previewCurrentId=t.id,this.previewType=t.type,this.previewVisible=!0},handleEditLinkItem:function(t){p["info"]("handleEditLinkItem",t),t.type===m["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+t.id,"_blank"):t.type===m["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+t.id,"_blank")},handleDeleteLinkItem:function(t){var e=this;this.$logger.info("handleDeleteLinkItem",t),Object(n["AssociateCancel"])({fromId:this.fromId,fromType:this.fromType,toId:t.id,toType:t.type}).then((function(t){e.$logger.info("handleDeleteLinkItem response ",t),e.getAssociate()}))},handleDragEnd:function(){var t=this;p["info"]("handleDragEnd ",this.ownerLinkGroupList),this.ownerLinkGroupList.forEach((function(e){var a=[];e.contents.forEach((function(t){a.push(t.id)})),Object(n["AddOrSaveGroupName"])({fromId:t.fromId,fromType:t.fromType,groupName:e.group,ids:a}).then((function(e){t.$logger.info("AddOrSaveGroupName",e)}))}))}}},Y=N,j=(a("666c"),Object(M["a"])(Y,i,s,!1,null,"1c31a9fc",null));e["a"]=j.exports},"81d3":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-select"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],staticClass:"content-select-title"},[t._v(" "+t._s(t.title)+" ")]),i("div",{staticClass:"content-select-wrap"},[i("div",{staticClass:"content-select-left"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showFilter,expression:"showFilter"}],staticClass:"content-select-filter"},[i("a-radio-group",{attrs:{"button-style":"solid"},on:{change:t.handleSearch},model:{value:t.sourceApi,callback:function(e){t.sourceApi=e},expression:"sourceApi"}},[i("a-radio-button",{attrs:{value:"FindMyContent"}},[t._v(" My content ")])],1),i("div",{staticClass:"filter-search"},[i("a-input-search",{attrs:{placeholder:"Search",allowClear:!0},on:{search:t.handleSearch,pressEnter:t.handleSearch},model:{value:t.queryParams.searchKey,callback:function(e){t.$set(t.queryParams,"searchKey",e)},expression:"queryParams.searchKey"}})],1)],1),i("div",{staticClass:"content-select-con"},[i("a-spin",{attrs:{spinning:t.loading}},[i("div",{staticClass:"content-list"},[0===t.myContentList.length||t.loading?t._e():[t._l(t.myContentList,(function(e){return[i("div",{key:e.id,class:{"content-item":!0,selected:t.selectedId===e.id,unselect:t.calculateCantSelect(e)},on:{click:function(a){return t.handlePreviewDetail(e)}}},[i("div",{staticClass:"cover"},[i("div",{staticClass:"cover-block",style:{"background-image":"url('"+(e.image||"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+"')"}})]),i("div",{staticClass:"detail"},[i("div",{staticClass:"detail-content"},[i("div",{staticClass:"base-info"},[i("div",{staticClass:"header-line vertical-between"},[i("div",{staticClass:"left vertical-left"},[i("div",{staticClass:"type-icon vertical-left"},[i("a-space",[i("content-type-icon",{attrs:{type:e.type}}),e.collaborates>0?i("collaborate-icon"):t._e(),e.sourceFrom?i("a-icon",{attrs:{type:"shopping"}}):t._e()],1)],1),i("div",{staticClass:"name"},[t._v(" "+t._s(e.name||"Untitled "+t.contentTypeName(e))+" ")])]),i("div",{staticClass:"right vertical-right",staticStyle:{width:"90px"}},[i("div",{staticClass:"time-at"},[t._v(" "+t._s(t._f("datejs")(e.updateTime||e.createTime))+" ")])])]),i("div",{staticClass:"extra-info"},[i("a-space",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.curriculumName(e)&&e.type!==t.typeMap.pd,expression:"curriculumName(content) && content.type !== typeMap.pd"}],staticClass:"info-item curriculum-info"},[t._v(" "+t._s(t.curriculumName(e))+" ")]),i("div",{staticClass:"info-item subject-info"},[i("a-space",t._l(e.subjectList.slice(0,2),(function(e,a){return i("div",{key:e+a,staticClass:"subject-item"},[t._v(t._s(e))])})),0),e.subjectList.slice(2).length?i("div",{staticClass:"more-item"},[i("a-tooltip",{attrs:{placement:"top",title:e.subjectList.slice(2).join("、 ")}},[t._v("more("+t._s(e.subjectList.slice(2).length)+")")])],1):t._e()],1),i("div",{staticClass:"info-item year-info"},[i("a-space",t._l(e.yearList.slice(0,4),(function(e,a){return i("div",{key:e+a,staticClass:"subject-item"},[t._v(t._s(e))])})),0),e.yearList.slice(4).length?i("div",{staticClass:"more-item"},[i("a-tooltip",{attrs:{placement:"top",title:e.yearList.slice(4).join("、 ")}},[t._v("more("+t._s(e.yearList.slice(4).length)+")")])],1):t._e()],1),e.taskType?i("div",{staticClass:"info-item task-type-info"},[i("div",{staticClass:"self-type-wrapper"},[i("div",{staticClass:"self-field-label"},["FA"===e.taskType?i("div",{staticClass:"task-type-item green-active-task-type"},[i("a-tooltip",{attrs:{placement:"top",title:"Formative Assessment"}},[t._v("FA")])],1):t._e(),"SA"===e.taskType?i("div",{staticClass:"task-type-item red-active-task-type"},[i("a-tooltip",{attrs:{placement:"top",title:"Summative Assessment"}},[t._v("SA")])],1):t._e(),"Activity"===e.taskType?i("div",{staticClass:"task-type-item blue-active-task-type task-type-activity"},[i("a-tooltip",{attrs:{title:"Teaching/Learning Activity",placement:"top"}},[t._v("Activity")])],1):t._e(),"IA"===e.taskType?i("div",{staticClass:"task-type-item blue-active-task-type task-type-examine"},[i("a-tooltip",{attrs:{title:"Internal Assessment",placement:"top"}},[t._v("IA")])],1):t._e()])])]):t._e()])],1),t.knowledgeTagsList(e).length?i("div",{staticClass:"tag-info"},t._l(t.knowledgeTagsList(e),(function(e,a){return i("div",{key:e+a,staticClass:"tag-info-item"},[i("a-tag",{staticClass:"tag-item knowledge-tag",attrs:{color:"#EABA7F",title:e}},[t._v(t._s(e))])],1)})),0):t._e(),i("div",{staticClass:"tag-info"},[t.commandTermsList(e).length?t._l(t.commandTermsList(e),(function(e,a){return i("div",{key:e+a,staticClass:"tag-info-item"},[i("a-tag",{staticClass:"tag-item command-tag",attrs:{color:"#06ACD7",title:e}},[t._v(t._s(e))])],1)})):t._e(),t._l(e.customTags,(function(e,a){return i("div",{key:e.name+a,staticClass:"tag-info-item"},[i("a-tag",{staticClass:"tag-item",attrs:{color:"#FFEDAF",title:e.category}},[t._v(" "+t._s(e.name)+" ")])],1)}))],2)])]),i("div",{staticClass:"footer-line"},[i("div",{staticClass:"avatar-info"},[i("div",{staticClass:"owner"},[e.owner?[e.owner.avatar?i("a-avatar",{attrs:{src:e.owner.avatar,size:"small"}}):i("img",{attrs:{src:a("4992")}})]:[i("a-avatar",{attrs:{size:"small"}},[t._v(t._s(e.createBy.toUpperCase()[0]))])],i("div",{staticClass:"user-name"},[t._v(" "+t._s(t._f("upCaseFirst")(e.owner?e.owner.firstname+" "+e.owner.lastname:e.createBy))+" ")])],2)]),i("div",{staticClass:"action vertical-right"},[t.calculateCantSelect(e)?i("a-tooltip",{attrs:{title:"Incompleted content"}},[i("a-icon",{staticStyle:{"font-size":"16px","font-weight":"bold",color:"#ef4136"},attrs:{type:"exclamation"}})],1):t._e()],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedId===e.id,expression:"selectedId === content.id"}],staticClass:"opt"},[t.calculateCantSelect(e)?i("a-tooltip",{attrs:{title:"Incompleted content"}},[i("a-icon",{attrs:{type:"check-circle",theme:"filled"}})],1):i("a-icon",{attrs:{type:"check-circle",theme:"filled"}})],1)])]}))],0!==t.myContentList.length||t.loading?t._e():[i("div",{staticClass:"empty-tips"},[i("no-more-resources")],1)]],2)])],1)]),i("div",{staticClass:"content-select-right"},[t.selectedId?t._e():i("div",{staticClass:"empty-tips"},[i("no-more-resources",{attrs:{tips:"No content selected"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedId,expression:"selectedId"}],staticClass:"preview-wrap"},[i("iframe",{ref:"previewFrame",staticClass:"preview-iframe",attrs:{src:"/v2/v2Box?header=0"}})])])]),i("div",{staticClass:"content-select-action"},[i("a-button",{attrs:{type:""},on:{click:t.handleCancel}},[t._v(t._s(t.backText))]),!t.selectedId||t.calculateCantSelect(t.selectedObj)?i("a-tooltip",{attrs:{title:"No completed content selected"}},[i("a-button",{attrs:{disabled:!0,type:"primary"}},[t._v("Next")])],1):i("a-button",{attrs:{type:"primary"},on:{click:t.handleNext}},[t._v("Next")])],1)])},s=[],n=a("1da1"),o=a("5530"),r=(a("96cf"),a("a9e3"),a("99af"),a("4de4"),a("d3b7"),a("7db0"),a("d81d"),a("0481"),a("b0c0"),a("9afb")),l=a("d573"),c=a("69b3"),d=a("8f46"),u=a("3404"),p=a.n(u),h=a("6e84"),f=a("21fb"),m=a("f93e"),v=a("3f76"),g=a("2f62"),y=a("944d"),C={name:"ContentSelect",mixins:[h["a"],f["a"]],components:{NoMoreResources:c["a"],ContentTypeIcon:d["a"],CollaborateIcon:p.a},props:{type:{type:Number,default:void 0},title:{type:String,default:""},backTxt:{type:String,default:"Discard"},datas:{type:Array,default:function(){return[]}},needFilter:{type:Boolean,default:!0}},watch:{datas:function(t){var e=this;t&&!this.showFilter&&(this.myContentList=t.filter((function(t){return t.owner.email===e.$store.getters.email})).concat(),0===this.myContentList.length&&(this.selectedId=""))},needFilter:function(t){var e=this;this.showFilter=t,!t&&this.datas&&(this.myContentList=this.datas.filter((function(t){return t.owner.email===e.$store.getters.email})).concat(),0===this.myContentList.length&&(this.selectedId=""))},backTxt:function(t,e){this.backText=t}},data:function(){return{typeMap:v["e"],FindMyContent:r["FindMyContent"],QueryContentsFilter:l["QueryContentsFilter"],loading:!1,sourceApi:"FindMyContent",queryParams:{type:[this.type],searchKey:"",delFlag:0,pageNo:1,pageSize:1e3,types:[this.type]},myContentList:[],selectedId:"",selectedObj:"",previewLoading:!0,backText:this.backTxt,showFilter:this.needFilter,baseUrl:null}},computed:Object(o["a"])({},Object(g["e"])({userMode:function(t){return t.app.userMode},currentSchool:function(t){return t.user.currentSchool}})),created:function(){this.init();var t=window.location.host;-1!==t.indexOf("localhost")?this.baseUrl="http://localhost:9004":-1!==t.indexOf("dev.classcipe.com")?this.baseUrl="https://dev.classcipe.com":-1!==t.indexOf("my.classcipe.com")?this.baseUrl="https://my.classcipe.com":this.$logger.warn("ContentPreview: unknown host",t)},methods:{init:function(){var t=this;this.showFilter&&(this.loading=!0,this.type===v["e"]["unit-plan"]?this.queryParams.linkedTask=!0:delete this.queryParams.linkedTask,this[this.sourceApi](Object(o["a"])(Object(o["a"])({},this.queryParams),{},{schoolId:this.currentSchool.id})).then((function(e){e.success&&(t.myContentList=(e.result&&e.result.records||[]).filter((function(e){return e.owner.email===t.$store.getters.email})))})).finally((function(e){t.loading=!1})))},handleSchoolChange:function(t){this.init()},handleModeChange:function(t){t===m["U"].SELF&&this.init()},handlePreviewDetail:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={4:"task",2:"unit",9:"pd",8:"video",slide:"session"}[t.type],window._test=e.$refs.previewFrame,e.$refs.previewFrame.contentWindow.postMessage({id:"iframeBox",data:{path:"/v2Box",query:{header:0}}}),a.next=5,sleep(300);case 5:e.$refs.previewFrame.contentWindow.postMessage({id:"iframeBox",data:{path:"/".concat(i,"/view/").concat(t.id),query:{header:0}}}),e.selectedId===t.id?(e.selectedId="",e.selectedObj=null):(e.selectedId=t.id,e.selectedObj=Object(o["a"])({},t)),e.previewLoading=!0,setTimeout((function(){e.previewLoading=!1}),300);case 9:case"end":return a.stop()}}),a)})))()},calculateCantSelect:function(t){return!t||!t.canPublish||t.slideEditing},handleSearch:function(){this.init()},handleCancel:function(){this.$emit("cancel")},handleNext:function(){var t=this,e=this.myContentList.find((function(e){return e.id===t.selectedId}));this.$emit("choose",e)},contentTypeName:function(t){return t?Object(v["b"])(t.type):null},curriculumName:function(t){return this.$store.getters.curriculumId2NameMap.hasOwnProperty(t.curriculumId)?this.$store.getters.curriculumId2NameMap[t.curriculumId]:null},isOwner:function(t){return this.$store.getters.userInfo.email===t.createBy},commandTermsList:function(t){return Object(y["a"])(t.learnOuts.map((function(t){return t.commandTerms})).flat(2),"name").map((function(t){return t.name}))},knowledgeTagsList:function(t){return Object(y["a"])(t.learnOuts.map((function(t){return t.knowledgeTags})).flat(2),"name").map((function(t){return t.name}))}}},w=C,b=(a("ef3b"),a("0c7c")),k=Object(b["a"])(w,i,s,!1,null,"01ecf95b",null);e["a"]=k.exports},8275:function(t,e,a){},"83d7":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAAAAXNSR0IArs4c6QAABFVJREFUSEvVV19oW1UY//1O7k3btVuStndz3bAbIlqngqWT4dquxU0dMnAIFVEfOm1r53yosD74sFAVHSIKss2lFeaDjtEHcSBjIJK2aR+EysCJTETpUFdmbtdmmnZtkvPJTZo0mzdbyqrgebqc7/t+v+985/tzLrGCy//1kVrTa54W8AECKg/aFuA8oD6wJ9ecQVtbijnheMi0tLdK5hIPg7pGwDUUXtBInLui/5hEa1/yVj5WjYR6FdVhQJZwl4wEgnmB7rGbXz6eVrCGT9wNT+JV0bIX5FoCzj4F0IRMCXASNN63G1+8dDNya/j4M1DqUwBGQT1BDIZqYHVkoIWUd0WwjkAZgNUASnOGpEB0CoLzmuieaur6piDo94Nea3qmF5CHBMyEmlAU2QZwbdZOiPdYNRJ6ShR/UrPz0zTVWhhmvQB7CbQCKF9yABoiEwLVZjd1fFuQfDDorSmrMbB+SSMRlz1Q6lSOWOQcEQ4aGIJGX58gGCRaWpSFH0q1Ye5VgjdAbMojEQEuJJXaPbP9pYu3uvOs3Dc8sNmr5Jc8/ctuSZCRj4fMyji3KoWTBGqvPzlOR2fkeezpml3cpy9yzB9Lls2htf3ajQ4FIqE7DTDfUbswsWM9OOix1l/dJdCfEajMhQpIiGbP1I6Oo1b4aIUYZguAXiRTh+zW7qHbJ3YQwkGj2lPTQ/LtG7L1EgX7tMILFDzpJOWCknti27t+XhliADXjoVWJOX4BYFf+fQOYAVABwAQwH03+XuFW7+6hlqDyja7zOYCxxssxsE+7JU1l+Ng2j8czBLLETe4knd3UWecmcyX2j33cbGr9VrphUA7ZjV3hG4zTieMR9aiCGiDhd89mfh5t6ni6aGJrpP87ULY4lS6CH+2mzi3OZxogFDKr71MPAjoIsImAExn3hCTeiTZ2vl48caTf6cGetAGhoxvMcmzOlET16PEGQp0SLbUkC7dBAFqhfWp75yfLIc6cbnFFy6QcDZn6DHwV8hleHIBiG0Q2iOJqCrxu4MlUsnm6ZX9kRYgdkE3hE6V/eRYCJO6CYB9Ip2arF9tpdvTJtfkF68+dB6ZWjDgHJEJr6Fg5SkruQELXi2I3oe8F4BNw2m7s2AhnoLgs16y2Iv0FQ+2evZmOtmbjVZ83JZtF5DFCDLu5681C+itHnM9w5sOSjf6k+u2R1+b+W+KCYVkS/Dsn/v8Tz8Yq8PjBeBEHKVrFP3ak1tTeiTwDm1YkNAvQeWul12yJuT4+UR4tGrUIxcCGq3WG1uezqkJepBXpd95P9blN8CMy9SWgXGuyCJ7rVISikOKzJJ7L6wlnWT06cJCQw5DcAzwFII7FObFcon/qp2eKM7OzXU5rsJ2B8ZDPmOMIiPvzyG+fzx1BCzBsB/xPpN2pGh6oo9L9BLelPbv5S2z5TmUuTQM8m9IL+6/seOXXHIUzibiKOz0aW52fi+WjF7bQWiaVh2PReGwkWzF/Ay535VYy6arNAAAAAElFTkSuQmCC"},"867e":function(t,e,a){},"870d":function(t,e,a){},"8b49":function(t,e,a){"use strict";a("023b")},"8c95":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"associate-preview"},[i("a-row",{staticClass:"bottom-relative"},[i("a-col",{staticClass:"content-type-filter",attrs:{span:"24"}},[i("a-radio-group",{attrs:{"button-style":"solid"},on:{change:t.handleUserTypeChange},model:{value:t.activeUserType,callback:function(e){t.activeUserType=e},expression:"activeUserType"}},[i("a-radio-button",{staticClass:"left-button",attrs:{value:"owner"}},[t._v(" "+t._s(t.$t("teacher.unit-plan-preview.by-owner"))+" ")]),i("a-radio-button",{staticClass:"right-button",attrs:{value:"others"}},[t._v(" "+t._s(t.$t("teacher.unit-plan-preview.by-others"))+" ")])],1),i("div",{staticClass:"content-type-list"},[i("div",{staticClass:"toggle-mode-type-wrapper"},[i("div",{staticClass:"toggle-mode-type"},[i("div",{staticClass:"toggle-mode"},[i("div",{class:{"mode-item":!0,"skill-active-mode":t.activeContentType===t.typeMap.task},on:{click:function(e){return t.handleSelectContentType(t.typeMap.task)}}},[t._v(" "+t._s(t.$t("teacher.unit-plan-preview.task"))+" ")]),i("div",{class:{"mode-item":!0,"general-active-mode":t.activeContentType===t.typeMap.evaluation},on:{click:function(e){return t.handleSelectContentType(t.typeMap.evaluation)}}},[t._v(" "+t._s(t.$t("teacher.unit-plan-preview.evaluation"))+" ")])])])])])],1),i("a-col",{staticClass:"created-toggle",attrs:{span:"24"}},[i("div",{staticClass:"toggle-view-type"},[i("div",{staticClass:"switch-icon"},[i("div",{class:{"icon-item":!0,"active-icon":"list"===t.dataListMode},on:{click:function(e){return t.handleToggleDataListMode("list")}}},[i("list-mode-icon")],1),i("div",{class:{"icon-item":!0,"active-icon":"card"===t.dataListMode},on:{click:function(e){return t.handleToggleDataListMode("card")}}},[i("pu-bu-icon")],1)])])])],1),i("a-row",[i("a-col",{attrs:{span:"24"}},[i("div",{staticClass:"associate-info"},["list"===t.dataListMode?t._l(t.currentAssociateList,(function(e,s){return e.type===t.activeContentType?i("div",{key:s,staticClass:"associate-block-list"},[i("div",{staticClass:"question-item list-question-item"},[i("div",{class:{"list-item":!0,"browser-item":!0,"odd-line":s%2===0}},[i("div",{staticClass:"item-name"},[i("dir-icon",{attrs:{"content-type":e.type}}),i("span",{staticClass:"data-name",on:{click:function(a){return t.handleClickTitle(e)}}},[t._v(" "+t._s(e.name?e.name:"Untitled")+" ")])],1),i("div",{staticClass:"arrow-item"},[i("span",{staticClass:"data-time"},[t._v(" "+t._s(t._f("dayjs")(e.updateTime||e.createTime))+" ")]),i("div",{staticClass:"edit-item-icon",on:{click:function(a){return t.handleEditItem(e.type,e)}}},[i("img",{attrs:{src:a("ae3c")}})]),i("div",{staticClass:"star-it",on:{click:function(a){return t.handleFavorite(e)}}},[e.createBy!==t.$store.getters.userInfo.email?[e.isFavorite?t._e():i("img",{attrs:{src:a("58e7")}}),e.isFavorite?i("img",{attrs:{src:a("24e3")}}):t._e()]:t._e()],2),i("div",{staticClass:"edit-it",on:{click:function(a){return t.handleEditItem(e.type,e)}}},[i("a-icon",{attrs:{type:"more"}})],1)])])])]):t._e()})):t._e(),"card"===t.dataListMode?[i("div",{staticClass:"associate-block-list associate-block-list-card"},t._l(t.currentAssociateList,(function(e,s){return e.type===t.activeContentType?i("div",{key:s,staticClass:"question-item card-question-item"},[i("div",{class:{"card-item":!0,"browser-item":!0,"odd-line":s%2===0}},[i("data-card-view",{attrs:{title:e.name,"update-time":e.updateTime,cover:e.image,"content-type":e.type}}),i("div",{staticClass:"card-action-item"},[i("div",{staticClass:"action-left"},[i("div",{staticClass:"edit-item-icon",on:{click:function(a){return t.handleEditItem(e.type,e)}}},[i("img",{attrs:{src:a("ae3c")}})]),e.createBy!==t.$store.getters.userInfo.email?[i("div",{staticClass:"star-it",on:{click:function(a){return t.handleFavorite(e)}}},[e.isFavorite?t._e():i("img",{attrs:{src:a("58e7")}}),e.isFavorite?i("img",{attrs:{src:a("24e3")}}):t._e()])]:t._e()],2),i("div",{staticClass:"action-right"},[i("div",{staticClass:"edit-it",on:{click:function(a){return t.handleEditItem(e.type,e)}}},[i("a-icon",{attrs:{type:"more"}})],1)])])],1)]):t._e()})),0)]:t._e()],2)])],1),i("a-row")],1)},s=[],n=(a("a9e3"),a("d3b7"),a("159b"),a("823b")),o=a("3f76"),r=a("8f46"),l=a("05be"),c=a.n(l),d=a("8d47"),u=a.n(d),p=a("6964"),h=a("faaa"),f=a("69b3"),m=a("95c6"),v=m.FavoritesAdd,g=a("9afb"),y=g.GetAssociate,C={name:"IsLibrary",props:{id:{type:String,required:!0},contentType:{type:Number,required:!0}},components:{NoMoreResources:f["a"],DirIcon:h["a"],DataCardView:p["a"],ContentTypeIcon:r["a"],PuBuIcon:c.a,ListModeIcon:u.a},data:function(){return{loading:!0,associateData:null,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:o["e"].task,activeUserType:"owner",currentAssociateList:[],typeMap:o["e"],previewType:"",dataListMode:"list"}},created:function(){n["info"]("Associate Preview id "+this.id),this.loadAssociateData()},methods:{loadAssociateData:function(){var t=this;n["info"]("loadAssociateData "+this.id+" "+this.contentType),this.loading=!0,y({id:this.id,type:this.contentType,published:this.isLibrary?1:0,preview:!0}).then((function(e){n["info"]("GetAssociate ",e),t.associateData=e.result,t.handleUserTypeChange()})).then((function(){n["info"]("get favorite "+t.id)})).finally((function(){t.loading=!1}))},handleToggleDataListMode:function(t){this.$logger.info("handleToggleDataListMode"+t),this.dataListMode=t},handleSelectContentType:function(t){n["info"]("handleSelectContentType "+t),this.activeContentType=t},handleSubPreviewClose:function(){n["info"]("handleSubPreviewClose"),this.previewType=null},handleUserTypeChange:function(){var t=this;n["info"]("handleUserTypeChange "+this.activeUserType);var e=this.associateData[this.activeUserType];this.currentAssociateList=[],e.forEach((function(e){e.contents&&e.contents.length&&e.contents.forEach((function(e){t.currentAssociateList.push(e)}))})),n["info"]("currentAssociateList",this.currentAssociateList)},handleClickTitle:function(t){n["info"]("handleClickTitle",t),this.previewType=o["e"]["unit-plan"]},handleSubPreview:function(t,e){n["info"]("handleSubPreview",t,e),this.previewType=o["e"]["unit-plan"]},handleFavorite:function(t){n["info"]("handleFavorite",t),v({sourceId:t.id,sourceType:t.type}).then((function(e){n["info"]("FavoritesAdd ",e),t.isFavorite=!t.isFavorite}))},handleEditItem:function(t,e){n["info"]("handleEditItem",t,e),e.type===o["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+e.id,"_blank"):e.type===o["e"].task?window.open("/teacher/task-redirect/"+e.id,"_blank"):e.type===o["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+e.id,"_blank")}}},w=C,b=(a("fa0b"),a("0c7c")),k=Object(b["a"])(w,i,s,!1,null,"3b8f30d4",null);e["a"]=k.exports},"8d47":function(t,e,a){var i=a("b2b7");t.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"27.909",viewBox:"0 0 28 27.909"},children:[{tag:"path",attrsMap:{id:"liebiao_","data-name":"liebiao ",class:"cls-1",d:"M62,62h6.932v6.93H62V62Zm10.279,0H90v6.93H72.279V62Zm0,10.326H90v7.208H72.279V72.326ZM62,72.326h6.932v7.208H62V72.326Zm0,10.558h6.932v7.024H62V82.885Zm10.279,0H90v7.024H72.279V82.885Z",transform:"translate(-62 -62)"}}]})}},"8fb9":function(t,e,a){"use strict";a("8275")},"903b":function(t,e,a){"use strict";a("b1d4b")},"91ff":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tag-ui"},[a("a-col",[a("div",{staticClass:"objectives-wrapper"},[t.getknowledgeListType(t.TagType.skill).length>0?a("a-row",{staticClass:"objectives-wrapper-block"},[a("div",{staticClass:"title-item title-skill"},[t._v("Achievement objectives")]),t._l(t.getknowledgeListType(t.TagType.skill),(function(e,i){return a("div",{key:i,staticClass:"objectives-list"},[a("div",{staticClass:"objectives-list-item objectives-list-item-skill objectives-list-item-top-fixed"},[a("div",{staticClass:"skt-description"},[a("a-tooltip",{attrs:{title:e.path}},[e.key?a("span",{staticClass:"self-out-icon"},[a("a-icon",{attrs:{type:"user-add"}})],1):t._e(),t._v(" "+t._s(e.name)+" "),e.subjectId&&t.getSubjectName(e.subjectId)?a("span",{staticClass:"subject-name-tag"},[a("a-tag",{staticClass:"my-subject-name-tag"},[t._v(t._s(t.getSubjectName(e.subjectId)))])],1):t._e()]),t.bloomInfo(e.knowledgeId,"isExist")?a("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"skt-chart"},[a("div",{staticClass:"skt-chart-detail"},[a("label",[t._v("Bloom Taxonomy")]),a("a-rate",{staticClass:"rate-bar-con small",attrs:{tooltips:t.bloomLevelDesc,count:6,value:t.bloomInfo(e.knowledgeId,"bloomLevel"),disabled:""}},[a("div",{attrs:{slot:"character"},slot:"character"},[a("div",{staticClass:"rate-bar"})])])],1),a("div",{staticClass:"skt-chart-detail"},[a("label",[t._v("Knowledge dimension")]),t._l(t.bloomInfo(e.knowledgeId,"knowledgeLevel"),(function(i,s){return a("a-tag",{key:e.name+"bloom_tag"+s,staticClass:"tag-item",attrs:{color:"purple"}},[t._v(" "+t._s(i)+" ")])}))],2)]):t._e()],1)])])}))],2):t._e(),t.getknowledgeListType(t.TagType.knowledge).length>0?a("a-row",{staticClass:"objectives-wrapper-block"},[a("div",{staticClass:"title-item title-learnout"},[t._v("Learning outcomes")]),t._l(t.getknowledgeListType(t.TagType.knowledge),(function(e,i){return a("div",{key:i,staticClass:"objectives-list"},[a("div",{staticClass:"objectives-list-item objectives-list-item-learn objectives-list-item-top-fixed"},[a("div",{staticClass:"skt-description"},[a("a-tooltip",{attrs:{title:e.path}},[e.key?a("span",{staticClass:"self-out-icon"},[a("a-icon",{attrs:{type:"user-add"}})],1):t._e(),t._v(" "+t._s(e.name)+" "),e.subjectId&&t.getSubjectName(e.subjectId)?a("span",{staticClass:"subject-name-tag"},[a("a-tag",{staticClass:"my-subject-name-tag"},[t._v(t._s(t.getSubjectName(e.subjectId)))])],1):t._e()]),t.bloomInfo(e.knowledgeId,"isExist")?a("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"skt-chart"},[a("div",{staticClass:"skt-chart-detail"},[a("label",[t._v("Bloom Taxonomy")]),a("a-rate",{staticClass:"rate-bar-con small",attrs:{tooltips:t.bloomLevelDesc,count:6,value:t.bloomInfo(e.knowledgeId,"bloomLevel"),disabled:""}},[a("div",{attrs:{slot:"character"},slot:"character"},[a("div",{staticClass:"rate-bar"})])])],1),a("div",{staticClass:"skt-chart-detail"},[a("label",[t._v("Knowledge dimension")]),t._l(t.bloomInfo(e.knowledgeId,"knowledgeLevel"),(function(i,s){return a("a-tag",{key:e.name+"bloom_tag"+s,staticClass:"tag-item",attrs:{color:"purple"}},[t._v(" "+t._s(i)+" ")])}))],2)]):t._e()],1)])])}))],2):t._e(),t.getknowledgeListType(t.TagType.century).length>0?a("a-row",{staticClass:"objectives-wrapper-block"},[a("div",{staticClass:"title-item title-21"},[t.$store.getters.bindCurriculum===t.AllCurriculums.NZ?[t._v(" Key competencies ")]:t.$store.getters.bindCurriculum===t.AllCurriculums.AU?[t._v(" General capabilities ")]:[t._v(" 21st Century Skills ")]],2),t._l(t.getknowledgeListType(t.TagType.century),(function(e,i){return a("div",{key:i,staticClass:"objectives-list"},[a("div",{staticClass:"objectives-list-item objectives-list-item-21 objectives-list-item-top-fixed",on:{click:function(a){return t.handleActiveDescription(t.TagType.century,e)}}},[a("div",{staticClass:"skt-description skt-description-21"},[a("a-tooltip",{attrs:{title:e.path}},[e.key?a("span",{staticClass:"self-out-icon"},[a("a-icon",{attrs:{type:"user-add"}})],1):t._e(),t._v(" "+t._s(e.name)+" "),e.subjectId&&t.getSubjectName(e.subjectId)?a("span",{staticClass:"subject-name-tag"},[a("a-tag",{staticClass:"my-subject-name-tag"},[t._v(t._s(t.getSubjectName(e.subjectId)))])],1):t._e()]),t.bloomInfo(e.knowledgeId,"isExist")?a("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"skt-chart"},[a("div",{staticClass:"skt-chart-detail"},[a("label",[t._v("Bloom Taxonomy")]),a("a-rate",{staticClass:"rate-bar-con small",attrs:{tooltips:t.bloomLevelDesc,count:6,value:t.bloomInfo(e.knowledgeId,"bloomLevel"),disabled:""}},[a("div",{attrs:{slot:"character"},slot:"character"},[a("div",{staticClass:"rate-bar"})])])],1),a("div",{staticClass:"skt-chart-detail"},[a("label",[t._v("Knowledge dimension")]),t._l(t.bloomInfo(e.knowledgeId,"knowledgeLevel"),(function(i,s){return a("a-tag",{key:e.name+"bloom_tag"+s,staticClass:"tag-item",attrs:{color:"purple"}},[t._v(" "+t._s(i)+" ")])}))],2)]):t._e()],1),e.tagListVisible?a("a-divider",{staticStyle:{margin:"10px 0px"}}):t._e(),e.tagListVisible?a("div",{staticClass:"skt-description-tag-list"},t._l(e.tags,(function(i){return a("div",{key:i,class:{"tag-list-item":!0,"skill-mode":!0}},[a("a-tag",{staticClass:"tag-item",attrs:{closable:!0},on:{close:function(a){return t.handleDeleteTag(e,i)}}},[t._v(t._s(i))])],1)})),0):t._e()],1)])}))],2):t._e()],1)]),a("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px"},model:{value:t.addTagVisible,callback:function(e){t.addTagVisible=e},expression:"addTagVisible"}},[a("div",{staticClass:"my-modal-title",attrs:{slot:"title"},slot:"title"},[t._v(" Add tag ")]),a("learn-out-add-tag",{attrs:{knowledge:t.knowledge},on:{"handle-select-tags":t.handleEnsureTags}})],1),a("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"1000px",title:"Add tag"},model:{value:t.centuryTagVisible,callback:function(e){t.centuryTagVisible=e},expression:"centuryTagVisible"}},[a("div",{staticClass:"ensure-setting-modal"},[a("div",{staticClass:"tips"},[a("p",[t._v(" "+t._s(t.knowledge.name)+" ")])]),a("div",[t._l(t.centuryTagList,(function(e,i){return a("div",{key:i,staticClass:"row-cascader"},[a("a-cascader",{staticStyle:{width:"900px"},attrs:{fieldNames:{label:"name",value:"name",children:"children"},options:t.centuryList,"change-on-select":""},model:{value:t.centuryTagList[i],callback:function(e){t.$set(t.centuryTagList,i,e)},expression:"centuryTagList[index]"}}),t.centuryTagList.length>1?a("a-button",{attrs:{type:"link",icon:"minus",size:"large"},on:{click:function(e){return t.handleRemoveCenturyTag(i)}}}):t._e()],1)})),a("a-button",{attrs:{type:"link",icon:"plus-circle",size:"large"},on:{click:function(e){return t.handleAddCenturyTag()}}})],2),a("div",{staticClass:"modal-ensure-action-line-center"},[a("a-button",{staticClass:"action-item action-cancel",attrs:{shape:"round"},on:{click:function(e){t.centuryTagVisible=!1}}},[t._v("Cancel")]),a("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:t.handleEnsureCenturyTags}},[t._v("Confirm")])],1)])])],1)},s=[],n=(a("ac1f"),a("1276"),a("d81d"),a("4de4"),a("7db0"),a("a630"),a("3ca3"),a("d3b7"),a("6062"),a("ddb0"),a("99af"),a("c740"),a("a434"),a("159b"),a("b0c0"),a("823b")),o=a("69b3"),r=a("214d"),l=a("f93e"),c=a("db6a"),d=a("2934"),u={name:"UiLearnOutSub",components:{LearnOutAddTag:r["a"],NoMoreResources:o["a"]},props:{learnOuts:{type:Array,default:function(){return[]}},selfOuts:{type:Array,default:function(){return[]}},classInfoList:{type:Array,default:function(){return[]}}},mounted:function(){},destroyed:function(){},computed:{dealPath:function(){return function(t){return t?t.split(">"):t}},bloomInfo:function(){var t=this;return function(e,a){if(!e||0===t.classInfoList.length)return null;var i=t.classInfoList.map((function(t){return t.data&&t.data.data?t.data.data:""})),s=i.filter((function(t){return t&&t.learnOuts&&t.learnOuts.length>0})),n=s.filter((function(t){return t.learnOuts.find((function(t){return t.knowledgeId===e}))})),o={knowledgeLevel:[],bloomLevel:0};return o.knowledgeLevel=Array.from(new Set(n.map((function(t){return t.knowledgeLevel})).filter((function(t){return""!==t})))),o.bloomLevel=n.map((function(e){var a=t.bloomLevel.find((function(t){return t.text===e.bloomLevel}));return a?parseInt(a.value):""})).filter((function(t){return""!==t})).sort().pop(),"isExist"===a?o.knowledgeLevel.length>0||o.bloomLevel>0:o[a]}},bloomLevelDesc:function(){return this.bloomLevel&&this.bloomLevel.length>0?this.bloomLevel.map((function(t){return t.title})):[]}},data:function(){return{knowledgeList:[],addTagVisible:!1,centuryTagVisible:!1,centuryTagList:[],knowledge:{},tags:[],TagType:l["Q"],AllCurriculums:l["b"],centuryList:[],bloomLevel:[]}},created:function(){this.knowledgeList=this.learnOuts.concat(this.selfOuts),n["info"]("knowledgeList ",this.knowledgeList),this.get21century(),this.initData()},watch:{},methods:{initData:function(){var t=this;Object(d["a"])(l["k"]).then((function(e){e.success&&(n["info"]("DICT_BLOOM_TAXONOMY",e.result),t.bloomLevel=e.result)}))},handleActiveDescription:function(t,e){var a=this.knowledgeList.findIndex((function(t){return t.knowledgeId===e.knowledgeId}));this.knowledgeList[a].tagType!==l["Q"].knowledge&&this.knowledgeList[a].tagType!==l["Q"].century||(this.knowledgeList[a].tagListVisible?this.knowledgeList[a].tagListVisible=!1:this.knowledgeList[a].tagListVisible=!0,this.$set(this.knowledgeList,a,this.knowledgeList[a]),n["info"]("tagListVisible ",this.knowledgeList[a].tagListVisible))},handleDeleteTag:function(t,e){var a=this.knowledgeList.findIndex((function(e){return e.knowledgeId===t.knowledgeId}));this.knowledgeList[a].tags.splice(this.knowledgeList[a].tags.indexOf(e),1)},handleDeleteKnowledgeItem:function(t){var e=this.knowledgeList.findIndex((function(e){return e.knowledgeId===t.knowledgeId})),a=this.knowledgeList[e];this.knowledgeList.splice(e,1),this.$emit("remove-learn-outs",a)},handleAddTag:function(t){n["info"]("handleAddTag ",t),t.tagType===l["Q"].knowledge?(this.knowledge=t,this.addTagVisible=!0):t.tagType===l["Q"].century&&(this.knowledge=t,this.centuryTagList=[],this.centuryTagList.push([]),this.centuryTagVisible=!0)},handleEnsureSelectData:function(){this.addTagVisible=!1},handleEnsureTags:function(t){var e=this;this.knowledge.tags=t;var a=this.knowledgeList.findIndex((function(t){return t.knowledgeId===e.knowledge.knowledgeId}));this.knowledgeList[a].tagListVisible=!0},handleEnsureCenturyTags:function(){var t=this;n["info"]("handleEnsureCenturyTags ",this.centuryTagList),0!==this.centuryTagList[0].length?(this.centuryTagList.forEach((function(e){t.knowledge.tags||(t.knowledge.tags=[]),-1===t.knowledge.tags.indexOf(e[e.length-1])&&t.knowledge.tags.push(e[e.length-1]),n["info"]("this.knowledge.tags ",t.knowledge.tags)})),this.centuryTagVisible=!1,this.knowledge.tagListVisible=!0):this.$message.error("Please select tags")},handleRemoveCenturyTag:function(t){n["info"]("handleRemoveCenturyTag ",t),this.centuryTagList.splice(t,1)},handleAddCenturyTag:function(){this.centuryTagList.push([])},treeForeach:function(t,e){var a=this;t.forEach((function(t){t.children&&a.treeForeach(t.children,e),e(t)}))},get21century:function(){var t=this;Object(c["getAll21Century"])({}).then((function(e){t.$logger.info("getAll21Century response",e),e.success&&(t.centuryList=e.result,t.treeForeach(t.centuryList,(function(e){0===e.children.length&&(e.title=t.$options.filters["gradeFormat"](e.gradeNames))})))})).finally((function(){t.subTreeLoading=!1}))},getknowledgeListType:function(t){return t===l["Q"].skill?this.knowledgeList.filter((function(t){return t.tagType===l["Q"].skill||t.tagType===l["Q"].ibSkill||t.tagType===l["Q"].idu})):t===l["Q"].century?this.knowledgeList.filter((function(t){return t.tagType===l["Q"].century||t.tagType===l["Q"].common})):this.knowledgeList.filter((function(e){return e.tagType===t}))},getSubjectName:function(t){var e=this.$store.getters.allSubjects.find((function(e){return e.id===t}));return e?e.name:null}}},p=u,h=(a("66d8"),a("0c7c")),f=Object(h["a"])(p,i,s,!1,null,"306ae012",null);e["a"]=f.exports},9516:function(t,e,a){},9586:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-content-selector"},[a("my-content-created-by-me",{attrs:{"filter-type-list":t.filterTypeList,"selected-list":t.selectedList,mode:t.mode,"selected-type":t.selectedType,"current-id":t.currentId}})],1)},s=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-content"},[i("div",{staticClass:"filter-line"},[i("div",{staticClass:"status-tab"},["created-by-me"===t.selectedType?i("div",{staticClass:"toggle-mode-type-wrapper"},[i("div",{staticClass:"toggle-mode-type"},[i("div",{staticClass:"toggle-mode"},[i("div",{class:{"mode-item":!0,"skill-active-mode":"all-status"===t.currentStatus},on:{click:function(e){t.toggleStatus("all-status",t.$t("teacher.my-content.all-status"))}}},[t._v(" "+t._s(t.$t("teacher.my-content.all-status"))+" ")]),i("div",{class:{"mode-item":!0,"knowledge-active-mode":"published"===t.currentStatus},on:{click:function(e){t.toggleStatus("published",t.$t("teacher.my-content.published-status"))}}},[t._v(" "+t._s(t.$t("teacher.my-content.published-status"))+" ")]),i("div",{class:{"mode-item":!0,"general-active-mode":"draft"===t.currentStatus},on:{click:function(e){t.toggleStatus("draft",t.$t("teacher.my-content.draft-status"))}}},[t._v(" "+t._s(t.$t("teacher.my-content.draft-status"))+" ")])])])]):t._e()])]),i("div",{staticClass:"content-wrapper"},[i("a-skeleton",{attrs:{loading:t.skeletonLoading,active:""}},[i("div",{staticClass:"content-list"},["list"===t.dataListMode?i("a-list",{attrs:{size:"large",pagination:t.pagination,"data-source":t.myContentList,loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e){return i("a-list-item",{key:"item.key",class:{"my-list-item":!0,"active-item":-1!==t.selectedList.indexOf(e.id)},on:{click:function(a){return t.handleToggleSelect(e,a)}}},[i("span",{staticClass:"content-info-left"},[i("content-type-icon",{attrs:{type:e.type}}),i("span",{staticClass:"name-content"},[i("span",{staticClass:"name-text",on:{click:function(a){return t.handleViewDetail(e,a)}}},[t._v(" "+t._s(e.name?e.name:"Untitled")+" ")])])],1),i("span",{staticClass:"content-info-right"},[i("span",{staticClass:"update-time"},[t._v(" "+t._s(t._f("dayjs")(e.updateTime||e.createTime))+" ")]),i("span",{staticClass:"status"},[0===e.status?[t._v("Draft")]:t._e(),1===e.status?[t._v("Published")]:t._e()],2),i("div",{staticClass:"action"},[t.mode===t.displayMode.Link?i("div",{attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link this content to my Unit?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleLinkItem(e,a)}}},[i("span",[i("a-icon",{attrs:{type:"form"}}),t._v(" Link ")],1)])],1)])]):t._e(),t.mode===t.displayMode.Refer?i("div",{attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item refer-item"},[i("a-button",{staticClass:"refer-btn",attrs:{type:"primary"},on:{click:function(a){return t.handleReferItem(e,a)}}},[i("img",{staticClass:"btn-icon btn-icon-white",attrs:{src:a("e568")}}),i("img",{staticClass:"btn-icon btn-icon-color",attrs:{src:a("83d7")}}),i("div",{staticClass:"btn-text"},[t._v(" Refer ")])])],1)])]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.mode===t.displayMode.Evaluation,expression:"mode === displayMode.Evaluation"}],attrs:{slot:"actions"},slot:"actions"},[i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"action-item"},[i("a-popconfirm",{attrs:{title:"Link ?","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(a){return t.handleLinkItem(e,a)}}},[i("div",{staticClass:"link-item"},[i("img",{staticClass:"link-icon",attrs:{src:a("de1a")}}),t._v(" "+t._s("Link this evaluation to this "+(e.type===t.typeMap.task?"task":e.type===t.typeMap.lesson?"lesson":""))+" ")])])],1)])])])]),-1!==t.selectedList.indexOf(e.id)?i("div",{directives:[{name:"show",rawName:"v-show",value:"refer"!==t.mode,expression:"mode !== 'refer'"}],staticClass:"action-icon"},[i("img",{attrs:{src:a("7aa6")}})]):t._e()])}}],null,!1,2472396095)}):t._e(),"card"===t.dataListMode?i("a-list",{attrs:{size:"large",pagination:t.pagination,"data-source":t.myContentList,loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e){return i("div",{key:"item.key",staticClass:"my-card-list-item"},[i("div",{staticClass:"ppt-preview-wrapper"},[i("div",{staticClass:"template-hover-action-mask"},[i("div",{staticClass:"template-hover-action"},[i("div",{staticClass:"modal-ensure-action-line"},[i("a-button",{staticClass:"action-ensure action-item",attrs:{shape:"round"},on:{click:function(a){return t.handlePreviewTemplate(e)}}},[i("a-icon",{attrs:{type:"eye",theme:"filled"}}),i("div",{staticClass:"btn-text"},[t._v(" Preview ")])],1),-1===t.selectedList.indexOf(e.id)?i("a-button",{staticClass:"action-ensure action-item",attrs:{shape:"round"},on:{click:function(a){return t.handleToggleSelect(e,a)}}},[i("a-icon",{attrs:{type:"plus-circle",theme:"filled"}}),i("div",{staticClass:"btn-text"},[t._v(" Add ")])],1):i("a-button",{staticClass:"action-ensure action-item",attrs:{shape:"round"},on:{click:function(a){return t.handleToggleSelect(e,a)}}},[i("a-icon",{attrs:{type:"minus-circle",theme:"filled"}}),i("div",{staticClass:"btn-text"},[t._v(" Remove ")])],1)],1)])]),i("div",{staticClass:"cover-img-wrapper"},[i("div",{staticClass:"cover-image",style:{backgroundImage:"url('"+e.image+"')"}})])]),i("div",{staticClass:"item-intro",on:{click:function(a){return t.handleViewDetail(e,a)}}},[i("div",{staticClass:"page-info"},[i("span",{staticClass:"page-num-tag"},[t._v(" 1/"+t._s(e.pageObjectIds.length)+" ")])]),i("div",{staticClass:"main-title"},[t._v(" "+t._s(e.name?e.name:"Untitled")+" ")]),i("div",{staticClass:"sub-title"},[t._v(" "+t._s(t._f("dayjs")(e.createTime))+" ")])]),i("div",{staticClass:"card-action-icon"},[-1!==t.selectedList.indexOf(e.id)?i("img",{attrs:{src:a("7aa6")}}):t._e()])])}}],null,!1,815843547)}):t._e()],1)]),i("a-drawer",{attrs:{destroyOnClose:"",placement:"right",width:"1000px",closable:!1,"z-index":4e3,visible:t.previewVisible},on:{close:t.handlePreviewClose}},[i("div",{staticClass:"preview-wrapper-row"},[i("div",{staticClass:"view-back"},[i("a-button",{staticClass:"preview-back-btn",attrs:{type:"primary",shape:"round"},on:{click:t.handlePreviewClose}},[i("a-icon",{style:{"font-size":"12px"},attrs:{type:"left"}}),t._v("Back")],1)],1),i("div",{staticClass:"detail-wrapper"},[t.previewCurrentId&&t.previewType?i("div",{staticClass:"preview-detail"},[i("common-preview-v2",{attrs:{id:t.previewCurrentId,type:t.previewType}})],1):t._e()])])]),i("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"1000px",zIndex:4e3,title:null},on:{ok:function(e){t.previewTemplateVisible=!1},cancel:function(e){t.previewTemplateVisible=!1}},model:{value:t.previewTemplateVisible,callback:function(e){t.previewTemplateVisible=e},expression:"previewTemplateVisible"}},[i("div",{staticClass:"link-content-wrapper"},[i("template-preview",{attrs:{template:t.previewTemplate,"selected-template-id-list":t.selectedList},on:{"handle-select":t.handleToggleSelect}})],1)])],1)])},o=[],r=(a("ac1f"),a("1276"),a("159b"),a("d3b7"),a("823b")),l=a("ea23"),c=a("7d7a"),d=a("9afb"),u=a("95c6"),p=a("3f76"),h=a("4803"),f=a("8f46"),m=a("4fb2"),v=a("57a5b"),g=a("adfc"),y=a("69b3"),C=a("3361"),w=a.n(C),b=a("9b5b"),k=a.n(b),T=a("e709"),S={name:"MyContentCreatedByMe",components:{CommonPreviewV2:g["a"],ContentStatusIcon:h["a"],ContentTypeIcon:f["a"],UnitPlanPreview:l["default"],MaterialPreview:c["default"],NoMoreResources:y["a"],PubuSvg:k.a,LiebiaoSvg:w.a,TemplatePreview:T["a"]},props:{filterTypeList:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}},mode:{type:String,default:v["a"].Link},selectedType:{type:String,default:"created-by-me"},currentId:{type:String,default:""}},data:function(){var t=this;return{skeletonLoading:!0,loading:!0,loadFailed:!1,myContentList:[],displayMode:v["a"],currentStatus:"all-status",currentStatusLabel:this.$t("teacher.my-content.all-status"),currentType:"",currentTypeLabel:this.$t("teacher.my-content.all-type"),currentOwner:"all-owner",currentOwnerLabel:this.$t("teacher.my-content.all-owner"),previewVisible:!1,previewCurrentId:"",previewType:"",pagination:{onChange:function(e){r["info"]("pagination onChange",e),t.pageNo=e,t.loadMyContent()},showTotal:function(t){return"Total ".concat(t," items")},total:0,pageSize:100},pageNo:1,typeMap:p["e"],dataListMode:"card",previewTemplate:{},previewTemplateVisible:!1}},watch:{selectedType:function(t){this.$logger.info("watch select type "+t),this.pageNo=1,this.myContentList=[],this.pagination.total=0,this.pagination.pageSize=100,this.loadMyContent()}},computed:{countPptSize:function(){return function(t){return t?t.split(",").length:0}}},created:function(){r["info"]("teacher my content filter type ",this.filterTypeList),this.loadMyContent()},mounted:function(){},methods:{loadMyContent:function(){this.loading=!0,"created-by-me"===this.selectedType?this.getMyContent():"my-favorite"===this.selectedType?this.getMyFavorites():"shared"===this.selectedType&&(this.loading=!1,this.skeletonLoading=!1,this.$logger.info("shared coming soon!"))},handleToggleDataListMode:function(t){this.$logger.info("handleToggleDataListMode"+t),this.dataListMode=t},getMyContent:function(){var t=this,e=[];this.filterTypeList.forEach((function(t){e.push(p["e"][t])})),Object(d["FindMyContent"])({owner:p["c"][this.currentOwner],status:p["d"][this.currentStatus],types:this.currentType?[p["e"][this.currentType]]:e,pageNo:this.pageNo,pageSize:this.pagination.pageSize,currentId:this.currentId,slideStatus:1}).then((function(e){r["info"]("getMyContent",e),e.result&&e.result.records&&e.result.records.length?(e.result.records.forEach((function(t,e){t.key=e})),t.myContentList=e.result.records,t.pagination.total=e.result.total):(t.myContentList=[],t.pagination.total=0),r["info"]("myContentList",t.myContentList)})).finally((function(){t.loading=!1,t.skeletonLoading=!1}))},getMyFavorites:function(){var t=this;this.$logger.info("getMyFavorites"),Object(u["FavoritesGetMyFavorites"])({type:p["e"][this.currentType],pageNo:this.pageNo,pageSize:this.pagination.pageSize}).then((function(e){t.$logger.info("FavoritesGetMyFavorites response",e),e.result&&e.result.records&&e.result.records.length?(e.result.records.forEach((function(t,e){t.key=e})),t.myContentList=e.result.records,t.pagination.total=e.result.total,t.pagination.current=e.result.current):(t.myContentList=[],t.pagination.total=0)})).finally((function(){t.loading=!1,t.skeletonLoading=!1}))},toggleStatus:function(t,e){r["info"]("toggleStatus "+t+" label "+e),this.currentStatus=t,this.currentStatusLabel=e,this.loadMyContent()},toggleType:function(t,e){r["info"]("toggleType "+t+" label "+e),this.currentType=t,this.currentTypeLabel=e,this.loadMyContent()},toggleOwner:function(t,e){r["info"]("toggleOwner "+t+" label "+e),this.currentOwner=t,this.currentOwnerLabel=e,this.loadMyContent()},handleLinkItem:function(t,e){r["info"]("handleLinkItem",t),e.preventDefault(),e.stopPropagation(),m["b"].$emit(m["a"].LinkToMyContentItem,{item:t})},handleViewDetail:function(t,e){r["info"]("my content created by me handleViewDetail",t,e),e.preventDefault(),e.stopPropagation(),this.previewCurrentId=t.id,this.previewType=t.type,this.previewVisible=!0},handleToggleSelect:function(t,e){r["info"]("handleToggleSelect",t,e),m["b"].$emit(m["a"].ToggleSelectContentItem,t,e),this.previewTemplateVisible=!1},handlePreviewClose:function(){r["info"]("handlePreviewClose"),this.previewCurrentId="",this.previewType="",this.previewVisible=!1},handleReferItem:function(t,e){r["info"]("handleReferItem",t),e.preventDefault(),e.stopPropagation(),m["b"].$emit(m["a"].ReferContentItem,{item:t})},handlePreviewTemplate:function(t){this.$logger.info("handlePreviewTemplate ",t),this.previewTemplateVisible=!0,this.previewTemplate=t}}},L=S,I=(a("72b3"),a("0c7c")),_=Object(I["a"])(L,n,o,!1,null,"4b50f0f9",null),A=_.exports,M={name:"MyContentSelector",components:{MyContentCreatedByMe:A},props:{filterTypeList:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}},mode:{type:String,default:v["a"].Link},currentId:{type:String,default:""}},data:function(){return{displayMode:v["a"],selectedType:"created-by-me"}},computed:{},created:function(){this.$logger.info("MyContentSelector selectedType "+this.selectedType+", mode:"+this.mode+", filterType ",this.filterTypeList)},mounted:function(){},methods:{handleToggleType:function(t){this.$logger.info("handleToggleType "+t),this.selectedType=t}}},D=M,x=(a("27aa"),Object(I["a"])(D,i,s,!1,null,"1ed7a2f5",null));e["a"]=x.exports},"972f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"evaluation-preview"},[t.loading?[a("a-skeleton",{attrs:{active:""}})]:[a("a-row",{staticClass:"top-info",attrs:{gutter:[16,24]}},[a("a-col",{attrs:{span:"24"}},t._l(t.forms,(function(e,i){return a("div",{key:i,class:{"form-item":!0,"form-item-active":!0}},[a("evaluation-table",{ref:"evaluationTable",refInFor:!0,attrs:{"form-id":e.formId,"init-raw-headers":e.initRawHeaders,"init-raw-data":e.initRawData,"form-type":e.formType,mode:t.EvaluationTableMode.Preview}})],1)})),0)],1)]],2)},s=[],n=(a("d3b7"),a("159b"),a("823b")),o=a("8f46"),r=a("c0f4"),l=a("9f06"),c=a("ca00"),d=a("9586"),u=a("0fa0"),p=a("1138"),h=a("90e8"),f={name:"EvaluationTablePreview",components:{EvaluationTable:p["a"],ContentTypeIcon:o["a"],InputSearch:r["a"],MyContentSelector:d["a"],RelevantTagSelector:u["a"]},props:{evaluationId:{type:String,default:null}},data:function(){return{loading:!0,forms:[],evaluationTableList:[],initRawHeaders:[],initRawData:[],selfType:!1,EvaluationTableMode:h["a"]}},computed:{lastChangeSavedTime:function(){var t=this.form.updateTime||this.form.createTime;return t?Object(c["formatLocalUTC"])(this.form.updateTime||this.form.createTime):""}},created:function(){n["info"]("EvaluationTablePreview created "+this.evaluationId),this.initData()},methods:{initData:function(){var t=this;n["info"]("initData doing..."),Object(l["EvaluationQueryByIds"])({ids:[this.evaluationId]}).then((function(e){t.$logger.info("handleToggleSelect EvaluationQueryByIds "+t.evaluationId,e);var a=[];e.result.forEach((function(t){t.forms.forEach((function(t){a.push({title:t.title,titleEditing:!1,formType:t.formType,se:t.se,pe:t.pe,menuVisible:!1,id:t.id,formId:t.formId,initRawHeaders:JSON.parse(t.initRawHeaders),initRawData:JSON.parse(t.initRawData)})}))})),t.forms=a,0===t.forms.length&&t.$message.warn("The current assessment tool form has not been created")})).finally((function(){t.loading=!1}))}}},m=f,v=(a("4198"),a("0c7c")),g=Object(v["a"])(m,i,s,!1,null,"e834b3c0",null);e["a"]=g.exports},9993:function(t,e,a){"use strict";a("ae99")},"9a45":function(t,e,a){},"9b5b":function(t,e,a){var i=a("b2b7");t.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"27.223",height:"28",viewBox:"0 0 27.223 28"},children:[{tag:"defs"},{tag:"path",attrsMap:{id:"pubu_","data-name":"pubu ",class:"cls-1",d:"M17422.268,9413v-7.046h6.957V9413Zm-9.953,0v-7.046h7.268V9413Zm-10.312,0v-7.046h6.953V9413Zm20.266-10.41v-7.231h6.957v7.231Zm-9.953,0v-7.231h7.268v7.231Zm-10.312,0v-7.231h6.953v7.231Zm20.266-10.638V9385h6.957v6.952Zm-9.953,0V9385h7.268v6.952Zm-10.312,0V9385h6.953v6.952Z",transform:"translate(-17402.002 -9385.001)"}}]})}},"9ee6":function(t,e,a){"use strict";a("9a45")},a16a:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FullCalendar",{ref:"fullCalendar",staticClass:"schedule-calendar",attrs:{options:t.calendarOptions},scopedSlots:t._u([{key:"eventContent",fn:function(e){return[t._t("eventContent",(function(){return[t._v(t._s(e.event.title))]}),{info:e})]}}],null,!0)})},s=[],n=(a("5574"),a("f5ff")),o=a("3cdd"),r=a("3e32"),l=a("a20c"),c=a("c1df"),d=a.n(c),u={name:"CcCalendar",props:{eventsApi:{type:Function,default:function(t,e,a){return e([])},required:!0},slotDuration:{type:String,default:"00:15:00"},slotMinTime:{type:String,default:"00:00:00"},slotMaxTime:{type:String,default:"24:00:00"},scrollTime:{type:String,default:"06:00:00"},slotLabelInterval:{type:String,default:"01:00"},editable:{type:Boolean,default:!0},selectable:{type:Boolean,default:!0},headerToolbar:{type:[Object,Boolean],default:function(){return{left:"prev,next,today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"}}},selfViews:{type:Object,default:function(){}},initView:{type:String,default:"timeGridWeek"},selectAllow:{type:Function,default:function(){return!0}},dayHeaderContent:{type:Function,default:function(t){return t.text}},validRange:{type:Function,default:function(){}}},components:{FullCalendar:n["a"]},data:function(){return{loading:!1,calendarOptions:{plugins:[o["b"],l["a"],r["a"]],initialView:this.initView,headerToolbar:this.headerToolbar,views:this.selfViews,events:this.eventsApi,slotEventOverlap:!0,editable:this.editable,selectable:this.selectable,allDaySlot:!1,selectMirror:!0,dayMaxEvents:!0,nowIndicator:!0,weekends:!0,lazyFetching:!1,slotMinTime:this.slotMinTime,slotMaxTime:this.slotMaxTime,scrollTime:this.scrollTime,slotDuration:this.slotDuration,slotLabelInterval:this.slotLabelInterval,select:this.handleDateSelect,eventClick:this.handleEventClick,eventsSet:this.handleEvents,datesSet:this.handleDatesSet,eventMouseEnter:this.handleMouseEnter,eventMouseLeave:this.handleMouseLeave,eventDrop:this.handleEventDrop,eventResize:this.handleEventResize,dayHeaderContent:this.dayHeaderContent,eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1,meridiem:!1},slotLabelFormat:function(t){return d()(t.date).format("HH:mm")},viewDidMount:this.handleViewDidMount,selectAllow:this.selectAllow,validRange:this.validRange}}},mounted:function(){var t=this;setTimeout((function(){t.reRender()}),100)},methods:{handleViewDidMount:function(){this.$nextTick((function(){var t=document.getElementsByClassName("fc-timegrid-now-indicator-line");if(t&&t.length>0){var e=document.getElementsByClassName("fc-timegrid-body")[0];e.insertBefore(t[0],e.firstChild)}}))},getApi:function(){return this.$refs.fullCalendar?this.$refs.fullCalendar.getApi():null},handleDateSelect:function(t){this.$emit("select",t)},handleEventClick:function(t){this.$emit("eventClick",t)},handleEvents:function(t){this.$emit("eventsSet",t)},handleDatesSet:function(t){this.$emit("datesSet",t)},handleMouseEnter:function(t){this.$emit("eventMouseEnter",t)},handleMouseLeave:function(t){this.$emit("eventMouseLeave",t)},handleEventDrop:function(t){this.$emit("eventDrop",t)},handleEventResize:function(t){this.$emit("eventResize",t)},reRender:function(){var t=this;this.$nextTick((function(){if(t.$refs.fullCalendar){var e=t.$refs.fullCalendar.getApi();e&&e.render()}}))},reFetch:function(){var t=this;this.$nextTick((function(){if(t.$refs.fullCalendar){var e=t.$refs.fullCalendar.getApi();e&&e.refetchEvents()}}))}}},p=u,h=(a("cc1a"),a("0c7c")),f=Object(h["a"])(p,i,s,!1,null,"9d6e228e",null);e["a"]=f.exports},a283:function(t,e,a){},a7a5:function(t,e,a){"use strict";a("ed29")},aad3:function(t,e,a){},aafd:function(t,e,a){"use strict";a("867e")},adfc:function(t,e,a){"use strict";var i=function(){var t=this,e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"my-common-preview"},[e.loading?[s("a-skeleton",{attrs:{active:""}})]:[s("div",{staticClass:"main-content-preview",class:{"has-extra-info":-1!==[e.typeMap.task,e.typeMap["unit-plan"]].indexOf(e.type)}},[s("div",{staticClass:"top-header"},[s("div",{staticClass:"title-line"},[s("div",{staticClass:"name"},[e._v(" "+e._s(e.data.name)+" ")]),s("div",{staticClass:"action-item"},[s("div",{staticClass:"star"},[e.data.createBy!==e.$store.getters.userInfo.email?[e.data.isFavorite?e._e():s("img",{attrs:{src:a("58e7")},on:{click:function(t){return e.handleFavorite(e.data)}}}),e.data.isFavorite?s("img",{attrs:{src:a("24e3")},on:{click:function(t){return e.handleFavorite(e.data)}}}):e._e()]:e._e()],2),this.isOwner||this.isCollaborater?s("div",{staticClass:"edit"},[s("a-button",{attrs:{type:"primary",shape:"round"},on:{click:function(t){return e.handleEditItem(e.data)}}},[s("div",{staticClass:"button-content"},[e._v(" Edit "),s("img",{staticClass:"edit-icon",attrs:{src:a("11aa")}})])])],1):s("div",{staticClass:"edit"},[e.myContentId?s("a-button",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:e.copyLoading,type:"primary",shape:"round"},on:{click:function(t){return e.handleEditItem({id:e.myContentId})}}},[s("div",{staticClass:"button-content"},[e._v(" Edit in my content "),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"edit"}})],1)]):s("a-button",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:e.copyLoading,type:"primary",shape:"round"},on:{click:e.handleDuplicateItem}},[s("div",{staticClass:"button-content"},[e._v(" Copy "),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"copy"}})],1)]),e.data.type===e.typeMap.task?s("a-button",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"copy-button",attrs:{loading:e.copyLoading,type:"primary",shape:"round"},on:{click:e.handleStartTask}},[s("div",{staticClass:"button-content"},[e._v(" Start "+e._s(e.data.buyed?"Session":"")),s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"play-circle"}})],1)]):e._e()],1)])])]),s("a-row",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"author-info"},[s("a-col",{staticClass:"avatar-icon",attrs:{span:"3"}},[s("img",{attrs:{src:e.collaborate.owner&&e.collaborate.owner.avatar}})]),s("a-col",{attrs:{span:"21"}},[s("div",{staticClass:"sub-info"},[s("div",{staticClass:"created-by"},[e._v(" "+e._s(e.data.createBy)+" ")]),s("div",{staticClass:"created-time"},[e.lastChangeSavedTime?[e._v(" "+e._s(e.lastChangeSavedTime)+" ")]:e._e()],2)]),s("div",{staticClass:"star-info"},[s("review-score",{attrs:{review:e.reviewsStats,placement:"bottom"}}),s("a-button",{attrs:{type:"link"}},[e._v(e._s(e._f("percentFormat")(e.reviewsStats.overall))+" ("+e._s(e.reviewsStats.reviewsCount)+" reviews)")])],1)])],1),s("a-space",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"author-info"},[s("div",{staticClass:"avatar-icon"},[s("img",{attrs:{src:e.collaborate.owner&&e.collaborate.owner.avatar}})]),s("div",[s("div",{staticClass:"sub-info"},[s("div",{staticClass:"created-by"},[e._v(" "+e._s(e.collaborate.owner&&e.collaborate.owner.nickname)+" ")]),s("div",{staticClass:"created-time"},[e.lastChangeSavedTime?[e._v(" "+e._s(e.lastChangeSavedTime)+" ")]:e._e()],2)]),s("div",{staticClass:"star-info",on:{click:function(){return t.viewMode="Reviews"}}},[s("a-tooltip",{attrs:{placement:"right"}},[s("template",{slot:"title"},[e._v(" "+e._s(e.reviewsStats.reviewsScoreStatDetail&&e.reviewsStats.reviewsScoreStatDetail[4]&&e.reviewsStats.reviewsScoreStatDetail[4].reviewsScoreCount)+" people gave a score of 5 stars ")]),s("a-rate",{attrs:{value:e.reviewsStats.avgReviewsScore,"allow-half":"",disabled:""}})],2)],1)])]),s("a-row",{staticClass:"data-info"},[s("a-col",{staticClass:"right-detail",attrs:{span:"24"}},[s("div",{staticClass:"sub-detail"},[s("div",{staticClass:"detail-block"},[s("div",{staticClass:"block-main-label"},[e.data.type===e.typeMap.task?[e._v("Task details")]:[e._v("Overview")]],2),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"view-text"},[e._v(" "+e._s(e.data.overview)+" ")])]),e.data.type===e.typeMap.task&&e.data.questionNames.length>0?[s("div",{staticClass:"block-main-label"},[e._v(" Key question(s)/Line(s) of Inquiry ")]),s("div",{staticClass:"detail-block",staticStyle:{margin:"10px"}},[s("div",{staticClass:"keyword-block-content"},[s("div",{staticClass:"content-list"},e._l(e.data.questionNames,(function(t,a){return s("div",{key:a,staticClass:"content-item"},[t?s("div",{staticClass:"question"},[e._v(" "+e._s(t)+" ")]):e._e()])})),0)])])]:e._e(),s("div",{staticClass:"block-main-label"},[e._v(" Customized tags ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"custom-tags"},e._l(e.data.customTags,(function(t,a){return s("div",{key:"tagIndex"+a,staticClass:"tag-item"},[s("a-tooltip",{attrs:{title:t.parentName}},[s("a-tag",{staticClass:"tag"},[e._v(" "+e._s(t.name)+" ")])],1)],1)})),0)]),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"block-main-label"},[e._v(" This task contains interactive questions of ")]),s("div",{directives:[{name:"hasRole",rawName:"v-hasRole",value:["student"],expression:"['student']"}],staticClass:"overview-block"},[s("div",{staticClass:"custom-tags"},e._l(e.inActiveTypes,(function(t,a){return s("div",{key:"interActiveIndex"+a,staticClass:"tag-item"},[s("a-tooltip",{attrs:{title:t}},[s("a-tag",{staticClass:"tag",attrs:{color:e.tagColorList[a]}},[e._v(" "+e._s(t)+" ")])],1)],1)})),0)]),s("div",{staticClass:"block-main-label"},[e._v(" Learning Objectives ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"learn-question-tag"},[s("div",{staticClass:"learn-out",staticStyle:{margin:"10px"}},[s("ui-learn-out-sub",{attrs:{"learn-outs":e.data.learnOuts,"self-outs":e.data.selfOuts,"class-info-list":e.itemsList}})],1)])]),e.data.inquiry?[s("div",{staticClass:"block-main-label"},[e._v(" Big idea ")]),s("div",{staticClass:"inquiry-block-content"},[s("div",{staticClass:"inquiry"},[e._v(" "+e._s(e.data.inquiry)+" ")])])]:e._e(),e.data.materialList&&e.data.materialList.length?[s("div",{staticClass:"block-main-label"},[e._v(" Material list ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"material-list"},e._l(e.data.materialList,(function(t,a){return s("div",{key:a,staticClass:"material-item"},[s("div",{staticClass:"material-name"},[e._v(" "+e._s(t.name)+" ")]),s("div",{staticClass:"material-link",on:{click:function(a){return e.handleOpenLink(t.link)}}},[e._v(" "+e._s(t.link)+" ")])])})),0)])]:e._e(),e.data.rwc?[s("div",{staticClass:"block-main-label"},[e._v(" Real World Connection(s) ")]),s("div",{staticClass:"overview-block"},[s("div",{staticClass:"view-text"},[e._v(" "+e._s(e.data.rwc)+" ")])])]:e._e()],2)])])],1),s("a-row",{staticClass:"preview-data-info"},[s("a-col",{staticClass:"slide-preview",attrs:{span:"24"}},[e.data.scenarios||e.data.inquiry||e.data.questions&&e.data.questions.length?s("div",{staticClass:"data-detail-wrapper"},[e.data.scenarios?[s("div",{staticClass:"block-main-label"},[e._v(" Sustainable development goal ")]),s("div",{staticClass:"detail-block"},e._l(e.data.scenarios,(function(t,a){return s("div",{key:a,staticClass:"scenario-item ref-block"},[s("div",{staticClass:"scenario-block-content"},[s("div",{staticClass:"content-list"},[s("div",{staticClass:"content-item"},[s("div",{staticClass:"question"},[t.description?[s("a-tooltip",{attrs:{title:t.description,placement:"top"}},[e._v(" "+e._s(t.sdgName)+" ")])]:[e._v(" "+e._s(t.sdgName))]],2),s("div",{staticClass:"tags"},e._l(t.sdgKeyWords,(function(t,a){return s("div",{key:"tagIndex"+a,staticClass:"tag-item"},[s("a-tag",{staticClass:"tag"},[e._v(" "+e._s(t.name)+" ")])],1)})),0)])])])])})),0)]:e._e(),e.data&&e.data.inquiry?[s("div",{staticClass:"detail-block"},[s("div",{staticClass:"block-main-label"},[e._v(" Big idea ")]),s("div",{staticClass:"inquiry-block-content"},[s("div",{staticClass:"inquiry"},[e._v(" "+e._s(e.data.inquiry)+" ")])])])]:e._e(),e.data&&e.data.questions&&e.data.questions.length?[s("div",{staticClass:"block-main-label"},[e._v(" Key question(s)/Line(s) of Inquiry ")]),s("div",{staticClass:"detail-block"},[s("div",{staticClass:"keyword-block-content"},[e.data.questions&&e.data.questions.length?s("div",{staticClass:"content-list"},e._l(e.data.questions,(function(t,a){return s("div",{key:"qIndex"+a,staticClass:"content-item"},[t&&t.name?s("div",{staticClass:"question"},[e._v(" "+e._s(t.name)+" ")]):e._e()])})),0):e._e()])])]:e._e()],2):e._e(),e.type===e.typeMap.evaluation?[s("evaluation-table-preview",{attrs:{"evaluation-id":e.data.id}})]:e._e()],2)],1),s("div",{directives:[{name:"excludeRole",rawName:"v-excludeRole",value:["student"],expression:"['student']"}],staticClass:"associate-info"},[e.type===e.typeMap.task?[s("task-link",{ref:"commonLink",attrs:{"show-drag-tips":!1,isLibrary:e.isLibrary,"hidden-empty-group":!0,"can-edit":!1,"from-id":e.id,"from-type":e.type}})]:e._e(),e.type===e.typeMap["unit-plan"]?[s("plan-link",{ref:"commonLink",attrs:{isLibrary:e.isLibrary,"hidden-empty-group":!0,"can-edit":!1,"from-id":e.id,"from-type":e.type}})]:e._e()],2),s("a-row",{staticClass:"reviews-info"},["student"===e.currentRole?s("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[s("rate-by-percent",{attrs:{rates:e.reviewsStats}}),s("reviews-preview",{attrs:{id:e.id,role:"student",list:e.ReviewsTask.ReviewsTaskList,save:e.ReviewsTask.ReviewsTaskSave,del:e.ReviewsTask.ReviewsTaskDelete,myReview:e.ReviewsTask.ReviewsTaskMyReview}})],1):s("a-col",{staticClass:"slide-reviews",attrs:{span:"24"}},[s("reviews-preview",{attrs:{id:e.id,role:"teacher",list:e.ReviewsTeacher.ReviewsTeacherList,save:e.ReviewsTeacher.ReviewsTeacherSave,del:e.ReviewsTeacher.ReviewsTeacherDelete,myReview:e.ReviewsTeacher.ReviewsTeacherMyReview,canEdit:!0},on:{update:e.loadReviewStats}})],1)],1)],1),-1!==[e.typeMap.task,e.typeMap["unit-plan"]].indexOf(e.type)?s("div",{staticClass:"extra-content-preview"},[e.type===e.typeMap.task&&e.data.presentationId&&e.imgList.length>0?[s("div",{staticClass:"top-icon-groups"},[s("a-col",{staticClass:"material-row"},[Object.keys(e.currentPageMaterial).length>0?s("div",{staticClass:"icon-group"},[e.currentPageMaterial.hasOwnProperty("text")?s("a-badge",{attrs:{count:e.showMaterialSize("text")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("text")}}},[s("text-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Text")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("image")?s("a-badge",{attrs:{count:e.showMaterialSize("image")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("image")}}},[s("image-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Image")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("video")?s("a-badge",{attrs:{count:e.showMaterialSize("video")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("video")}}},[s("video-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Video")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("audio")?s("a-badge",{attrs:{count:e.showMaterialSize("audio")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("audio")}}},[s("audio-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Audio")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("iframe")?s("a-badge",{attrs:{count:e.showMaterialSize("iframe")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("iframe")}}},[s("youtube-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Youtube")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("pdf")?s("a-badge",{attrs:{count:e.showMaterialSize("pdf")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("pdf")}}},[s("pdf-type-svg"),s("div",{staticClass:"icon-text"},[e._v("PDF")])],1)]):e._e(),e.currentPageMaterial.hasOwnProperty("website")?s("a-badge",{attrs:{count:e.showMaterialSize("website")}},[s("div",{staticClass:"icon",on:{click:function(t){return e.showPluginMaterial("website")}}},[s("url-type-svg"),s("div",{staticClass:"icon-text"},[e._v("Website")])],1)]):e._e()],1):e._e()])],1),s("a-skeleton",{attrs:{loading:e.slideLoading,active:""}},[s("div",{ref:"slide",staticClass:"slide-select-wrapper"},[s("div",{staticClass:"slide-select"},[s("div",{staticClass:"slide-select-and-preview"},[s("div",{staticClass:"slide-preview",style:{width:"310px"}},[s("a-carousel",{ref:"carousel",attrs:{arrows:"","after-change":e.onChangePage}},[s("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"-23px","z-index":"9"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[s("a-icon",{style:{"font-size":"20px",color:"#aaa",opacity:.6},attrs:{type:"left-circle"}})],1),s("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"-23px","z-index":"9"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[s("a-icon",{style:{"font-size":"20px",color:"#aaa",opacity:.6},attrs:{type:"right-circle"}})],1),e._l(e.imgList,(function(t,e){return s("div",{key:e,staticClass:"slide-item"},[s("img",{attrs:{src:t}})])}))],2),e.currentPageItem?s("div",{staticClass:"plugin-tags"},[s("a-row",{staticClass:"tag-row"},[e.currentPageItem.data.bloomLevel?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Bloom's Taxonomy:")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[e._v(e._s(e.currentPageItem.data.bloomLevel))])]):e._e(),e.currentPageItem.data.knowledgeLevel?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Knowledge dimension(s):")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[e._v(e._s(e.currentPageItem.data.knowledgeLevel))])]):e._e()]),s("a-row",{staticClass:"tag-row"},[e.currentPageItem.data.verbs&&e.currentPageItem.data.verbs.length>0?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Command terms:")]),e._l(e.currentPageItem.data.verbs,(function(t,a){return s("span",{key:a,staticClass:"tag-value",staticStyle:{color:"#15C39A"}},[e._v(e._s(t))])}))],2):e._e(),e.currentPageTips?s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Tip added:")]),s("span",{staticClass:"tag-value",staticStyle:{color:"#0054FF"}},[e._v(e._s(e.currentPageTips.tip))])]):e._e()]),e.currentPageItem.data.learnOuts&&e.currentPageItem.data.learnOuts.length>0?s("a-row",{staticClass:"tag-row"},[s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("Learning Objectives:")]),e._l(e.currentPageItem.data.learnOuts,(function(t,a){return s("span",{key:a,staticClass:"tag-value",staticStyle:{color:"#00BCF2"}},[s("a-tooltip",{attrs:{title:t.path,overlayStyle:{"z-index":"3000"}}},[e._v(e._s(t.name)+" ")])],1)}))],2)]):e._e(),s("a-row",{staticClass:"tag-row"},[s("span",{staticClass:"tag-item"},[s("span",{staticClass:"tag-title"},[e._v("This is a "),s("span",[e._v(e._s(e.currentPageItem.type))]),e._v(" slide")])])])],1):e._e(),e.imgList&&e.imgList.length?s("div",{staticClass:"page-info"},[e._v(" "+e._s(e.currentImgIndex+1)+" / "+e._s(e.imgList.length)+" ")]):e._e()],1)])])])])]:e._e(),e.type===e.typeMap["unit-plan"]?[s("div",{staticClass:"unit-cover",style:{"background-image":"url('"+(e.data.image||"http://dcdkqlzgpl5ba.cloudfront.net/1392467808404684802/file/202208140641519097-20220814143449.png")+"')"}})]:e._e(),e.type===e.typeMap.task?s("div",{staticClass:"recommend"},[s("div",{staticClass:"recommend-title"},[s("a-divider",[e._v("Recommend")])],1),s("div",{staticClass:"recommend-list"},e._l(e.recommendTemplateList,(function(t,a){return s("div",{key:a,staticClass:"slide-preview-item",style:{width:"310px"}},[s("a-carousel",{ref:"carousel",refInFor:!0,attrs:{arrows:""}},[s("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"-23px","z-index":"9"},attrs:{slot:"prevArrow"},slot:"prevArrow"},[s("a-icon",{style:{"font-size":"20px",color:"#aaa",opacity:.6},attrs:{type:"left-circle"}})],1),s("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"-23px","z-index":"9"},attrs:{slot:"nextArrow"},slot:"nextArrow"},[s("a-icon",{style:{"font-size":"20px",color:"#aaa",opacity:.6},attrs:{type:"right-circle"}})],1),e._l(t.images,(function(t,e){return s("div",{key:e,staticClass:"slide-item"},[s("img",{attrs:{src:t}})])}))],2),t.introduce?s("a-row",{staticClass:"slide-desc",attrs:{title:t.introduce}},[e._v(" "+e._s(t.introduce)+" ")]):e._e(),s("div",{staticClass:"recommend-slide-name"},[e._v(" "+e._s(t.name)+" ")])],1)})),0)]):e._e()],2):e._e()],s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px",zIndex:6e3,title:"My Materials"},on:{ok:function(t){e.materialVisible=!1},cancel:function(t){e.materialVisible=!1}},model:{value:e.materialVisible,callback:function(t){e.materialVisible=t},expression:"materialVisible"}},[s("task-material-preview",{attrs:{"current-page-element-lists":e.currentPageElementLists,"filter-type":e.filterMaterialType,"current-page-index":e.currentImgIndex}})],1),s("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"900px",zIndex:5e3,title:null},on:{ok:function(t){e.mediaVisible=!1},cancel:function(t){e.mediaVisible=!1}},model:{value:e.mediaVisible,callback:function(t){e.mediaVisible=t},expression:"mediaVisible"}},[s("media-preview",{attrs:{"media-list":e.mediaList,"material-type":e.filterMaterialType}})],1)],2)},s=[],n=a("5530"),o=(a("a9e3"),a("d81d"),a("a630"),a("3ca3"),a("d3b7"),a("6062"),a("ddb0"),a("159b"),a("b0c0"),a("823b")),r=a("3f76"),l=a("69b3"),c=a("8c95"),d=a("c621"),u=a("972f"),p=a("7eee"),h=a("d33b"),f=a("873a"),m=a("542c"),v=a("91ff"),g=a("d980"),y=a("dd6e"),C=a("abb8"),w=a("e11c"),b=a("9afb"),k=a("f93e"),T=a("2934"),S=a("5225"),L=a("9fb0"),I=a("8ded"),_=a.n(I),A=a("2f62"),M=a("6b36"),D=a("c2e5"),x=a("1899"),O=a("2f59"),E=a("ca00"),R=E.formatLocalUTC,P=a("de0d"),N=P.UnitPlanQueryById,Y=a("b199"),j=Y.TaskQueryById,F=a("9f06"),B=F.EvaluationQueryById,H=a("95c6"),V=H.FavoritesAdd,G=a("56f2"),U=G.SelfStudyTaskBye,z=G.SelfStudyTaskStart,q={name:"CommonPreviewV2",components:{PlanLink:x["a"],UiLearnOutSub:v["a"],EvaluationTablePreview:u["a"],CommonAssociatePreview:c["a"],NoMoreResources:l["a"],TaskLink:p["a"],MediaPreview:f["a"],TaskMaterialPreview:m["a"],RateByPercent:g["a"],ReviewsPreview:y["a"],ReviewScore:C["a"]},props:{id:{type:String,required:!0},type:{type:Number,required:!0},isLibrary:{type:Boolean,default:!1},myContentId:{type:String,default:null}},mixins:[h["a"],w["a"],O["a"]],computed:Object(n["a"])(Object(n["a"])({},Object(A["e"])({userMode:function(t){return t.app.userMode},currentRole:function(t){return t.user.currentRole}})),{},{lastChangeSavedTime:function(){if(this.data){o["info"]("lastChangeSavedTime data",this.data);var t=this.data.updateTime||this.data.createTime;if(t)return R(t)}return""},inActiveTypes:function(){var t=[];return this.itemsList&&(t=this.itemsList.map((function(t){return t.type}))),Array.from(new Set(t))}}),data:function(){return{loading:!0,slideLoading:!1,copyLoading:!1,data:null,imgList:[],viewMode:"Detail",RATE_TOOLTIPS:k["x"],ReviewsTask:M,ReviewsTeacher:D,tagColorList:["pink","orange","green","cyan","blue","red","purple"],activeContentType:-1,typeMap:r["e"],subPreviewVisible:!1,currentImgIndex:0,initPrompts:[],reviewsStats:{avgReviewsScore:0,reviewsScoreStatDetail:[],reviewsCount:0,effectiveness:0,overall:0,quality:0,studentsEngagement:0},recommendTemplateList:[]}},created:function(){o["info"]("CommonPreviewV2 id "+this.id+" type "+this.type),this.loadData()},methods:{loadData:function(){var t=this;o["info"]("loadData "+this.id+" type "+this.type),this.loading=!0,this.type===this.typeMap["unit-plan"]?N({id:this.id}).then((function(e){o["info"]("UnitPlanQueryById "+t.id,e.result),t.data=e.result,t.oldForm=t.data,t.data&&t.data.image&&(t.imgList=[t.data.image])})).finally((function(){t.loading=!1,t.queryContentCollaborates(t.id,t.type)})):this.type===this.typeMap.task?(j({id:this.id}).then((function(e){o["info"]("TaskQueryById "+t.id,e.result),t.data=e.result,t.loading=!1,t.oldForm=t.data,t.queryContentCollaborates(t.id,t.type),t.loadThumbnail(),t.data.presentationId&&t.getClassInfo(t.data.presentationId)})),this.$logger.info("loadRecommendThumbnail"),Object(d["f"])({taskId:this.id}).then((function(e){o["info"]("loadRecommendThumbnail res:",e.result),e.success&&(t.recommendTemplateList=e.result)}))):this.type===this.typeMap.evaluation&&B({id:this.id}).then((function(e){o["info"]("EvaluationQueryById "+t.id,e.result),t.data=e.result,t.oldForm=t.data,t.data&&t.data.image&&(t.imgList=[t.data.image])})).finally((function(){t.loading=!1,t.queryContentCollaborates(t.id,t.type)})),Object(T["a"])(k["q"]).then((function(e){e.success&&(o["info"]("DICT_PROMPT_TYPE",e.result),t.initPrompts=e.result)})),this.loadReviewStats()},handleAuthCallback:function(){this.$logger.info("Preview handleAuthCallback"),"loadThumbnail"===this.currentMethodName?this.loadThumbnail():"handleDuplicateItem"===this.currentMethodName&&this.handleDuplicateItem()},loadThumbnail:function(){var t=this;this.$logger.info("Preview loadThumbnail ",this.data),this.data.presentationId?this.isLibrary?Object(d["d"])({taskId:this.data.id}).then((function(e){if(e.code!==t.ErrorCode.ppt_google_token_expires&&e.code!==t.ErrorCode.ppt_forbidden){var a=e.result.pageObjects;t.thumbnailList=[],a.length?a.forEach((function(e){t.imgList.push(e.contentUrl),t.thumbnailList.push({contentUrl:e.contentUrl,id:e.pageObjectId}),t.slideLoading=!1,t.$logger.info("current imgList ",t.imgList)})):(t.imgList=[],t.slideLoading=!1)}else t.$logger.info("等待授权事件通知"),t.currentMethodName="loadThumbnail"})):Object(d["d"])({taskId:this.data.id}).then((function(e){if(e.code!==t.ErrorCode.ppt_google_token_expires&&e.code!==t.ErrorCode.ppt_forbidden){var a=e.result.pageObjects;t.thumbnailList=[],a.length?a.forEach((function(e){t.imgList.push(e.contentUrl),t.thumbnailList.push({contentUrl:e.contentUrl,id:e.pageObjectId}),t.slideLoading=!1,t.$logger.info("current imgList ",t.imgList)})):(t.imgList=[],t.slideLoading=!1)}else t.$logger.info("等待授权事件通知"),t.currentMethodName="loadThumbnail"})):this.slideLoading=!1},loadReviewStats:function(){var t=this,e=null;e="student"===this.currentRole?M["ReviewsTaskStats"]:D["ReviewsTeacherStats"],e&&e({taskId:this.id,purchasesId:this.id}).then((function(e){e.success&&(t.reviewsStats=e.result)}))},handleSelectContentType:function(t){o["info"]("handleSelectContentType "+t),this.activeContentType=t},handleSubPreviewClose:function(){o["info"]("handleSubPreviewClose"),this.subPreviewVisible=!1},handleViewModeChange:function(){this.$logger.info("handleViewModeChange "+this.viewMode)},handleFavorite:function(t){var e=this;o["info"]("handleFavorite",t),V({sourceId:t.id,sourceType:t.type}).then((function(a){o["info"]("FavoritesAdd ",a),t.isFavorite=!t.isFavorite,e.data.isFavorite=t.isFavorite,e.$emit("favoritiesAdd",Object(n["a"])({},e.data))}))},handleGotoImgIndex:function(t){this.$logger.info("handleGotoImgIndex "+t),this.currentImgIndex=t,this.$refs.carousel.goTo(t)},handleEditItem:function(t){t.type=this.type,o["info"]("handleEditItem",t),t.type===r["e"]["unit-plan"]?window.open("/teacher/unit-plan-redirect/"+t.id,"_blank"):t.type===r["e"].task?window.open("/teacher/task-redirect/"+t.id,"_blank"):t.type===r["e"].evaluation&&window.open("/teacher/evaluation-redirect/"+t.id,"_blank")},handleDuplicateItem:function(){var t=this;this.$logger.info("handleDuplicateItem",this.data),this.$confirm({title:"Confirm to copy",content:"Are you sure to copy "+this.data.name+" ?",centered:!0,onOk:function(){t.copyLoading=!0,Object(b["Duplicate"])({id:t.data.id,type:t.data.type}).then((function(e){e.code!==t.ErrorCode.ppt_google_token_expires&&e.code!==t.ErrorCode.ppt_forbidden?(t.$logger.info("Duplicate response",e),t.$message.success("Copy successfully"),t.$router.push({path:"/teacher/main/created-by-me"})):t.currentMethodName="handleDuplicateItem"})).finally((function(){t.copyLoading=!1}))}})},handleStartTask:function(){var t=this;this.$confirm({title:"Confirm to start",content:"Are you sure to start "+this.data.name+" ?",centered:!0,onOk:function(){t.copyLoading=!0,t.data.buyed||k["U"].SCHOOL===t.userMode?t.handleStartSession(t.data.id):U({taskId:t.data.id}).then((function(e){e.success&&t.handleStartSession(t.data.id)})).finally((function(){t.copyLoading=!1}))}})},handleOpenLink:function(t){window.open(t,"_blank")},handleStartSession:function(t){var e=this;this.copyLoading=!0,z({taskId:t}).then((function(t){if(e.$logger.info("StartOpenSession res",t),t.success){e.copyLoading=!1;var a=S["a"]+"s/"+t.result.classId+"?token="+_.a.get(L["a"]);e.$logger.info("try open "+a),window.location.href=a}else e.$message.warn("StartLesson Failed! "+t.message)})).finally((function(){e.copyLoading=!1}))}}},$=q,Q=(a("1f7f"),a("0c7c")),W=Object(Q["a"])($,i,s,!1,null,"5cac3e1c",null);e["a"]=W.exports},ae3c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAAXNSR0IArs4c6QAABDNJREFUWEfNl2FoG2UYx//Pm6TO6GBikov7MGpyQWQqg30pE93cPinU5oJa5kQGInVaNkVGPzgtOBmbyNbpRBHZHGgV63ppRTYQtgmF6hcFURB2VyedNZdtzbSr7dbc+0hC03XtJblrm9T7ev/neX78732f5znC/+BZubo5FAwGOgG0EjhnA3toubmijclGBOgUQPfMYvltWcFC8eR6vyhChW4yiPHjsoHdGdc2+wWlCVg596tJyI5lAVPUlmaC6AHRLfOOEvMwj43fW3ewsJp8SpD4lIDAXChmZmJ7S8bsP1NXsIiqbSPCJwTyO106ZtllGelXCu/qBhZRkzsI4ggRhDMUf28ZuYeAs/m6gYXjyXZB9C4RORrBwFVmuS5rpM0SdM0dC6vaSwJ4rxxUAYRtfs4a0o/OdrKmYEosuYt8oqtSE2fwF9Y5fetcTc3AFDX1MsAHKzkFxoVr0ndfbqjn77qAKfHUXhLYU9EphrTBmy8Z+ndOuiV3TElobxHotWozmJn3WYZeVrekYFFV6wDRfhdQZy1D3wJAltMuGVjhTBHhUDUogC/nJ+0HLg33j1TSLgmYEtd2kqDD1aEAKZHKmr16Ne2iwaLx1HYmPlrx9k1TMKPLMnqLI6fas0iwJ31Kws45rS4OA3rQMnIPl0ZOjcEARU39QoS1VQqNXpf2ulGzb7ga0IJHUiShvUCMFyXh0MVz+rHiFkpiAIQVzsMZtmTZfNFMn3QLtaAhrqip00R4pBAsJe/Omvo7Siy5FT5x3GnHksydWUN/0wuUJ7Db41rkqqlnw7GWx4RP9M3sVFLuzZjpN0KN2kafH2kiWjUDwTiRMXytQI9dE7DpHnWAmTstQ98fvrvlCeH3dZccKi14kTWpmGjgIwCaJNCdnczsxoXBCa9QLhzb5FfUO44R0TOl5FLi7azZ26GoWgsRfQmgofCOmT+2DL2tUjf3AlixXURV7TiInp2XUPKHGVPfEY4nH/WR6C0dfGZ0W0bvNi8AnkeSEteeJ0EflQtk5s8sI7ddia3aSIL6QRQsOmfLp62h9OeLhSvj2PqAkljzB4HuqlSAmfssTLaG8iua/AF8VfxxZW7PGPr7NQGLqslNIHHGTXJmPo2x8cev3RoMNPjE2qw5+oPb7l4pv6NjhSYqQB+4AZs++IOWoW9wq3ejcwRTEtphAu10k6CkyYxP3YaRr//1EuPZMUXVfiai+90WYWbLMvSoW70b3TzHFDXVRIRBN8E3OjwfzBj6q55iqoidwAaI8KDrIoxfr2Niw6hx8h/XMS6EN4FFEqnXBeB+4DJOjE9w29if+mUXtTxJZsCURHIXofLP6Y3MPGBL3ud1lfFCRljdHFSCgQNEaC/b5YHfCfyTBL7NS/mNl4XPC8xsLUXiqTZBmLlRzJwHcUYyRiDw19QUzl85n76y0AILjfsPWT6SVuLmISoAAAAASUVORK5CYII="},ae99:function(t,e,a){},b1d4b:function(t,e,a){},ba70:function(t,e,a){},be9d:function(t,e,a){},c0f4:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-search"},[a("a-textarea",{staticClass:"cc-form-textarea",attrs:{"auto-size":{minRows:2,maxRows:6},placeholder:t.placeholder,disabled:!t.canEdit},on:{keyup:t.handleSearch,focus:t.handleSearch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t.fetching?a("a-spin",{attrs:{slot:"notFoundContent",size:"small"},slot:"notFoundContent"}):t._e(),t.showSearchListFlag?a("div",{staticClass:"search-list-wrapper"},[a("ul",{staticClass:"search-list"},t._l(t.searchList,(function(e,i){return a("li",{key:i,staticClass:"search-list-item input-search-item",on:{click:function(a){return t.handleSelectItem(e)}}},[t._v(t._s(e[t.label]))])})),0)]):t._e()],1)},s=[],n=(a("a9e3"),a("823b")),o={name:"InputSearch",props:{defaultValue:{type:String,default:null},keyIndex:{type:Number,default:null},currendIndex:{type:Number,default:null},label:{type:String,default:"name"},placeholder:{type:String,default:"name"},searchList:{type:Array,default:function(){return[]}},canEdit:{type:Boolean,default:!0}},computed:{showSearchListFlag:function(){return this.searchList.length>0&&this.keyIndex===this.currendIndex}},mounted:function(){this.globalClick(this.handleClick)},data:function(){return{fetching:!1,lastFetchId:0,value:null}},created:function(){this.value=this.defaultValue,n["info"]("inputSearch value",this.value)},watch:{defaultValue:function(t){this.$logger.info("defaultValue change",t),this.value=t}},methods:{handleClick:function(t){t.target.classList.contains("input-search-item")||this.$emit("reset")},handleSearch:function(){n["info"]("handleSearch"+this.value),this.$emit("search",this.keyIndex,this.value),this.$emit("change")},handleSelectItem:function(t){n["info"]("handleSelectItem",t),this.value=t[this.label],this.$emit("select-item",this.keyIndex,t),this.$emit("reset")},handleResetSearchList:function(){n["info"]("handleResetSearchList"),this.$emit("reset")}}},r=o,l=(a("cad2"),a("0c7c")),c=Object(l["a"])(r,i,s,!1,null,"c65473be",null);e["a"]=c.exports},c164:function(t,e,a){"use strict";a("be9d")},cad2:function(t,e,a){"use strict";a("f424")},cc1a:function(t,e,a){"use strict";a("6a3c")},d573:function(t,e,a){"use strict";a.r(e),a.d(e,"libraryURL",(function(){return s})),a.d(e,"Search",(function(){return n})),a.d(e,"QueryContents",(function(){return o})),a.d(e,"QueryKeyContents",(function(){return r})),a.d(e,"QueryRecommendContents",(function(){return l})),a.d(e,"QueryContentsFilter",(function(){return c}));var i=a("b775"),s={Search:"/classcipe/api/library/search",QueryContents:"/classcipe/api/library/queryContents",QueryKeyContents:"/classcipe/api/library/queryKeyContents",queryContentsFilter:"/classcipe/api/library/queryContentsFilter",QueryRecommendContents:"/classcipe/api/library/queryRecommendContents"};function n(t){return Object(i["d"])({url:s.Search,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(t){return Object(i["d"])({url:s.QueryContents,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(t){return Object(i["d"])({url:s.QueryKeyContents,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(t){return Object(i["d"])({url:s.QueryRecommendContents,method:"get",params:t})}function c(t){return Object(i["d"])({url:s.queryContentsFilter,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},d6c0:function(t,e,a){"use strict";a("ea1d")},d82e:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"nav-back"},[a("custom-link-text",{attrs:{text:"Back"},on:{click:t.handleBack},scopedSlots:t._u([{key:"prefix",fn:function(){return[a("a-icon",{attrs:{type:"left"}})]},proxy:!0}])})],1),a("my-vertical-steps",{ref:"steps-nav",attrs:{"allow-switch":!1,steps:t.ScheduleStepsFilter,"step-index":t.currentActiveStepIndex},on:{"step-change":t.handleStepChange}}),t.needClose?a("div",{staticClass:"close"},[a("a-icon",{attrs:{type:"close"},on:{click:t.handleBack}})],1):t._e(),a("div",{staticClass:"import-content"},[a("content-select",{directives:[{name:"show",rawName:"v-show",value:"unit"===t.ScheduleStepsFilter[t.currentActiveStepIndex].type,expression:"'unit' === ScheduleStepsFilter[currentActiveStepIndex].type"}],attrs:{type:t.typeMap["unit-plan"]},on:{choose:function(e){return t.handleChoose(e,"unit")},cancel:t.handleBack}}),a("content-select",{directives:[{name:"show",rawName:"v-show",value:"task"===t.ScheduleStepsFilter[t.currentActiveStepIndex].type,expression:"'task' === ScheduleStepsFilter[currentActiveStepIndex].type"}],attrs:{type:t.typeMap.task,datas:t.importDatas,"need-filter":t.importType===t.typeMap["task"],"back-txt":(t.currentActiveStepIndex,"Discard")},on:{choose:function(e){return t.handleChoose(e,"task")},cancel:t.handleCloseImport}}),a("content-select",{directives:[{name:"show",rawName:"v-show",value:"pd"===t.ScheduleStepsFilter[t.currentActiveStepIndex].type,expression:"'pd' === ScheduleStepsFilter[currentActiveStepIndex].type"}],attrs:{type:t.typeMap.pd,datas:t.importDatas,"need-filter":t.importType===t.typeMap["pd"],"back-txt":(t.currentActiveStepIndex,"Discard")},on:{choose:function(e){return t.handleChoose(e,"pd")},cancel:t.handleCloseImport}})],1),t.selectSessionUnitVisible?a("select-session-unit",{attrs:{list:t.associateUnitList},on:{back:t.handleCancelUnit,select:t.handleSelectUnit}}):t._e()],1)},s=[],n=a("1da1"),o=a("5530"),r=(a("96cf"),a("a9e3"),a("4de4"),a("159b"),a("7db0"),a("b0c0"),a("81d3")),l=a("c55e"),c=a("ea5a"),d=a("5907"),u=a("33b9"),p=a("bf92"),h=a("076d"),f=a("4357"),m=a("9afb"),v=a("5994"),g=a("8a30"),y=a("3f76"),C=a("f93e"),w=a("5225"),b=a("8ded"),k=a.n(b),T=a("9fb0"),S=a("2f62"),L=a("c1df"),I=a.n(L),_={name:"SessionImportForCalendar",mixins:[g["a"]],components:{ContentSelect:r["a"],MyVerticalSteps:l["a"],SelectParticipant:c["a"],ScheduleDate:d["a"],SchedulePayInfo:u["a"],SelectSessionUnit:h["a"],SchoolSchedule:p["a"],CustomLinkText:f["a"]},props:{type:{type:Number,default:y["e"].task},startDate:{type:String,default:null},endDate:{type:String,default:null},needClose:{type:Boolean,default:!1},classId:{type:String,default:""},source:{type:String,default:""},searchType:{type:[Number,String],default:C["d"].MY.value}},watch:{type:function(t){this.importType=t},classId:function(t){this.currentClass=t},startDate:{handler:function(t){this.importModel.startDate=t},immediate:!0},endDate:{handler:function(t){this.importModel.endDate=t},immediate:!0},searchType:{handler:function(t){this.typeMode=t},immediate:!0}},data:function(){return{typeMap:y["e"],USER_MODE:C["U"],CALENDAR_QUERY_TYPE:C["d"],currentClass:this.classId,typeMode:this.searchType,ScheduleSteps:[{id:"1",name:"Select Unit",description:null,filter:y["e"]["unit-plan"],type:"unit"},{id:"2",name:"Select Task",description:null,type:"task"}],currentActiveStepIndex:0,selectSessionUnitVisible:!1,importLoading:!1,importType:this.type,importDatas:[],associateUnitList:[],classList:[],scheduleReq:{classIds:[],contentId:null,endDate:null,openSession:!1,planId:null,register:{discountInfo:[],maxParticipants:0,price:0,registerBefore:null,title:""},selectStudents:[],sessionType:0,startDate:null,teachSessionNow:0,password:!0,waitingRoom:!0,workshopType:0,zoom:0},importModel:{startDate:null,endDate:null,task:null,unit:null,pd:null},calendarSearchFilters:[],calendarSearchType:C["d"].CLASS.value}},computed:Object(o["a"])(Object(o["a"])({},Object(S["e"])({userMode:function(t){return t.app.userMode},currentSchool:function(t){return t.user.currentSchool}})),{},{ScheduleStepsFilter:function(){var t=this;return this.importType===y["e"].pd?[{id:"3",name:"Select PD",description:null,filter:y["e"]["pd"],type:"pd"}]:this.ScheduleSteps.filter((function(e){return!e.filter||e.filter===t.importType}))},defaultDate:function(){return this.importModel.startDate&&this.importModel.endDate?[I()(this.importModel.startDate),I()(this.importModel.endDate)]:null}}),created:function(){this.initData()},methods:{initData:function(){},getAssociate:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,n,o,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.importLoading=!0,i.next=3,Object(m["GetAssociate"])({id:t,type:e,published:0});case 3:return s=i.sent,s.result.owner.forEach((function(t){var e=s.result.groups.find((function(e){return e.groupName===t.group}));e&&(t.groupId=e.id,e.contents=JSON.parse(JSON.stringify(t.contents)))})),n=s.result.owner,o=[],r=e===y["e"].task?y["e"]["unit-plan"]:y["e"].task,n.forEach((function(t){t.contents.forEach((function(t){t.type===r&&o.push(t)}))})),a.importLoading=!1,i.abrupt("return",o);case 11:case"end":return i.stop()}}),i)})))()},handleStepChange:function(t){this.currentActiveStepIndex=t.index},handleCloseImport:function(){this.$emit("cancel")},handleBack:function(t){0===this.currentActiveStepIndex?this.handleCloseImport():this.$refs["steps-nav"].prevStep()},handleChoose:function(t,e){var a=this,i=[];t&&e?(t.type!==y["e"].task&&t.type!==y["e"].pd||(this.scheduleReq.contentId=t.id,this.scheduleReq.register.title=t.name),this.importModel[e]=Object(o["a"])({},t),"pd"===e&&(this.currentActiveStepIndex===this.ScheduleStepsFilter.length-1?this.goCreateSession():this.$refs["steps-nav"].nextStep()),this.getAssociate(t.id,t.type).then((function(e){a.importType===t.type&&(i=e.filter((function(t){return t.owner.email===a.$store.getters.email}))),a.importType===y["e"]["unit-plan"]&&y["e"]["unit-plan"]===t.type&&(a.importDatas=e.filter((function(t){return t.owner.email===a.$store.getters.email})),a.scheduleReq.planId=t.id),a.importType===y["e"].task?i.length>0?(a.associateUnitList=i,a.selectSessionUnitVisible=!0):(0===i.length||(a.scheduleReq.planId=i[0].id),a.currentActiveStepIndex===a.ScheduleStepsFilter.length-1?a.goCreateSession():a.$refs["steps-nav"].nextStep()):a.currentActiveStepIndex===a.ScheduleStepsFilter.length-1?a.goCreateSession():a.$refs["steps-nav"].nextStep()}))):this.currentActiveStepIndex===this.ScheduleStepsFilter.length-1?this.goCreateSession():this.$refs["steps-nav"].nextStep()},goCreateSession:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("quick"!==t.source){e.next=11;break}return t.scheduleReq.classIds=[t.currentClass],t.scheduleReq.startDate=I()().utc().format("YYYY-MM-DD HH:mm:ss"),t.scheduleReq.endDate=I()().add(40,"m").utc().format("YYYY-MM-DD HH:mm:ss"),e.next=6,t.createSession(!0);case 6:return a=e.sent,t.$message.success("The scheduled tiem above will be cleard by starting the session now."),i=w["a"]+"t/"+a[0].classId+"?token="+k.a.get(T["a"]),window.location.href=i,e.abrupt("return");case 11:s="/teacher/schedule-session/"+t.scheduleReq.contentId+"/"+y["e"].task,t.importType===y["e"].pd&&(s="/teacher/schedule-workshop/"+t.scheduleReq.contentId+"/"+t.importType),t.$router.push({path:s,query:{startDate:t.importModel.startDate,endDate:t.importModel.endDate,planId:t.scheduleReq.planId,classId:t.currentClass||"",source:t.source}});case 14:case"end":return e.stop()}}),e)})))()},handleCancelUnit:function(){this.selectSessionUnitVisible=!1},handleSelectUnit:function(t){this.scheduleReq.planId=t.id,this.selectSessionUnitVisible=!1,this.currentActiveStepIndex===this.ScheduleStepsFilter.length-1?this.goCreateSession():this.$refs["steps-nav"].nextStep()},createSession:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.scheduleReq.startDate&&e.scheduleReq.endDate){a.next=3;break}return e.$message.warn("Please select Schedule time!"),a.abrupt("return");case 3:return e.$logger.info("try createSession scheduleReq",e.scheduleReq),e.importLoading=!0,a.prev=5,a.next=8,Object(v["a"])(e.scheduleReq);case 8:if(i=a.sent,e.$logger.info("save scheduleReq",i),!i.result||!i.success||0!==i.code){a.next=19;break}if(e.$message.success("Schedule session successfully"),t){a.next=16;break}e.$emit("ok"),a.next=17;break;case 16:return a.abrupt("return",i.result);case 17:a.next=20;break;case 19:e.$confirm({title:"Warn",content:"Schedule session failed."+i.message+". Please try again.",centered:!0});case 20:a.next=25;break;case 22:a.prev=22,a.t0=a["catch"](5),e.$confirm({title:"Error",content:"Schedule session error."+a.t0.message+". Please try again.",centered:!0});case 25:return a.prev=25,e.importLoading=!1,a.finish(25);case 28:return a.abrupt("return",null);case 29:case"end":return a.stop()}}),a,null,[[5,22,25,28]])})))()}}},A=_,M=(a("aafd"),a("0c7c")),D=Object(M["a"])(A,i,s,!1,null,"00032d27",null);e["a"]=D.exports},de1a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABL5JREFUWEetV11oHFUU/s7dieQh0GzzswvmYdudiEKlBQ0oJrjQhhpIdGdVaJGCog8RLe1DHyoqFSxYkGJFwYqKLRZSMGbXpEjElKRYaB8CBlowmNk04A+72TZJMUrC7twjd5LdnZ39T5y3uXPvOd/5+b57hvA/PK3B8GOaoEMAngDQAVAAjDUGm8Q0DcZwYn7pR2Aq43ZH2/Hf8lD/g5psOE9E/dXt8Cxb/GZyPnbVuXfLANp3GXvJQ+NE8Fd3vrGDwRlAnEjOffdx9syWALTrzx0k8gwT0FSrc+c+CQwuzo18rtbqBuDbHd4PFTlIcxq1o2NclsxXifkPQOgk6CCI+9177f5g7krGo7frAqCazSPElDtyZphgNpRBd0bags/qHtKGQHi8ADAjljRHjLoA+HRjzN1wzDwjM+t9qYUfEuXK0dYWavLs2DlZBELyo/UB6DSGCDbdNh++bq0s96VSU6vVeqElMPBwQ0PDr4Vlw+m6ANjpFJ6vmbEHoAvy/tK7hc5Dmj/o/YQJh0A0LdNrR5yZ8XVGfiLgQA4+42ZdACpHGdLade+QIHohu08CFxbnRl7Jvvs6I+8T8E4eAK+UBxAINbY80NRy77crf1ZLL1DsfJP44wlzpC973q9HToHwXlUhUjwXJC4B1MqQE8m5lb5SMrphqLRzRUspMZCKR8dzAILGZxA06ChBoigD7Z3h5wl0uYC7kl9OxKMXizNRwTnLwynz++H8mZDm1713QNSR72FWlM4/JZ0DsNh6sdBY+cjVFwYdd8qtWvPrxhsg+rQgCOaTOQCtuvG0hzBRpHDMU0lzubewBGVqXsZ5ezDyFAkVrUM9GWtWZm2XDcAfCAdYEzeKL5ZinitRETt2fkOEsLskpSLfcI7xYvXkM0kz+pYNwFckMHYiS4hMSPN3eicB6t6m8xl5f7lHaQj5gsYeEnTLZXDWWlnqcouMm+e5bi5Vc5XVBnGrxL2RkJzpScVHTXWe/Hr4FEgUcDNjZbruzo9OOzu4Hud2VnXjAyI66QyMgVVwujdpjt3MrpNPj6jaq1HKfhiYSM6N9G7H+UZZw8cI4pyT80DacDrfzIDxewE3pTyaiMdydPEFjbdJ0Olaal6wJxBq9GneL4jQzSAzk04fvbcwNuu2Q/7OCDsXpZTGYjwWy6759ci3IOT0vRzP3YZrfSefbiwTUXM+VfK1pBn7KvveHgyHhRDRSg3XHAg3N2q0V1rW7OKd0WStzu0S+HTjFyLalwfAl5Jm9IjTSNtuo9sjaD8gryXM2JTzm+K5EBzbuDewKtOyJ7UQm6kVhGrCj4hwPB+hukSsR7I0qWSopMhIPp+IR1+vGYAdnYd+LqCLGrM2haKcoQ3ppitunkuJE4vxkbM1A1Ab/boxCaKQ69AsmAcTZvSau7v9mvcYkxqnCidjACUErDIUW4rbAuF9Hk3cAKGxiG7Mt4lomhkrBO5gomdK/w/wgpVef7LScFoKSu429OmRV4nwZa2pc2fLkpmBWvqmSAecCwoECOfq+eNRyvnvP+nDf/81dncr4IsmIjU+a5r2YbUfTmZ7oDyTMJfPlh/XqkMqO5SqWxKElwh0gMG6LVbMKkr19zNuZdYv1lvvUnD+A2xgPb8puyDSAAAAAElFTkSuQmCC"},e11c:function(t,e,a){"use strict";a.d(e,"b",(function(){return g})),a.d(e,"a",(function(){return y}));var i=a("2909"),s=a("5530"),n=(a("c740"),a("159b"),a("b0c0"),a("d81d"),a("4de4"),a("d3b7"),a("523d")),o=a("d4ec"),r=a("bee2"),l=a("ade3"),c=function(){function t(){Object(o["a"])(this,t),Object(l["a"])(this,"id",""),Object(l["a"])(this,"type",0),Object(l["a"])(this,"fieldName",""),Object(l["a"])(this,"inputValue","")}return Object(r["a"])(t,null,[{key:"convert2CollborateMsg",value:function(e){var a=new t;return a.id=e.id,a.type=e.type,a.fieldName=e.fieldName,a.inputValue=e.inputValue,a}}]),t}(),d=function(){function t(){Object(o["a"])(this,t),Object(l["a"])(this,"id",""),Object(l["a"])(this,"type",0),Object(l["a"])(this,"details",{})}return Object(r["a"])(t,null,[{key:"convert2SaveContentMsg",value:function(e){var a=new t;return a.id=e.id,a.type=e.type,a.details=e.details,a}}]),t}(),u=a("39e6"),p=a("f93e"),h=a("2f62"),f=a("8ded"),m=a.n(f),v=a("9fb0"),g={collaborate:1,collaborateComment:2,imageUpload:3,customTag:4,taskDetails:5,recommend:6,associate:7,assessmentToolsLearnOuts:8},y={data:function(){return{shareVisible:!1,shareStatus:0,oldForm:{},rightModule:g,showModuleList:[g.customTag,g.recommend],rightWidth:600,leftWidth:730,collaborate:{},initCompleted:!1,updateContentVisible:!1,defaultHistoryKey:"1",showCollaborateModalVisible:!1,collaborateContent:null,currentFieldName:{},historyList:[],collaborateCommentList:[],currentCollaborateCommentList:[],currentRightModule:null,showHistoryLoading:!1}},watch:{needRefreshCollaborate:function(t){t&&t.indexOf(this.oldForm.id)>-1&&this.isOwner&&(this.refreshCollaborateAction(!1),this.handleStartCollaborate())},changeCollaborate:function(t){t&&t.indexOf(this.form.id)>-1&&(this.changeCollaborateAction(!1),this.$logger.info("need changeCollaborate"),this.queryContentCollaborates(this.form.id,this.form.type))}},filters:{unitLabelName:function(t,e,a){return a&&a.planFieldMap&&a.planFieldMap[e]?a.planFieldMap[e]:t},unitLabelHint:function(t,e,a){return a&&a.planHintMap&&a.planHintMap[e]?a.planHintMap[e]:t},taskLabelName:function(t,e,a){return a&&a.taskFieldMap&&a.taskFieldMap[e]?a.taskFieldMap[e]:t},taskLabelHint:function(t,e,a){return a&&a.taskHintMap&&a.taskHintMap[e]?a.taskHintMap[e]:t}},created:function(){var t=this.$route.query.token;t||(t=m.a.get(v["a"]))},mounted:function(){var t=this;this.resetWidth(),window.onresize=function(){t.resetWidth()},window.addEventListener("beforeunload",(function(e){return t.beforeunloadHandler(e)})),this.receiveSaveContentMsg("")},destroyed:function(){var t=this;window.removeEventListener("beforeunload",(function(e){return t.beforeunloadHandler(e)}))},computed:Object(s["a"])(Object(s["a"])({getCollaborateUsers:function(){return function(t){var e=[];return t.users&&(e=Object(i["a"])(t.users)),t.owner.nickName=t.owner.nickname,e.push(t.owner),e}},isOwner:function(){return!!this.oldForm&&this.$store.getters.userInfo.email===this.oldForm.createBy},isCollaborater:function(){var t=this;if(!this.collaborate.users)return!1;var e=this.collaborate.users.findIndex((function(e){return e.email===t.$store.getters.userInfo.email}));return e>-1},isEditCollaborater:function(){var t=this;if(!this.collaborate.users)return!1;var e=this.collaborate.users.findIndex((function(e){return e.email===t.$store.getters.userInfo.email}));return e>-1&&"Edit"===this.collaborate.users[e].permissions},canEdit:function(){return this.isOwner||this.isEditCollaborater},showRightModule:function(){return function(t){return this.showModuleList.indexOf(t)>-1}},showUpdateContent:function(){var t=this.$store.state.websocket.saveContentMsg;return!(!t||t.content.id!==this.form.id)&&(t.content.details.updateTime=this.oldForm.updateTime,t.content.details.gradeId=this.oldForm.gradeId,!t.hideUpdate&&!Object(u["a"])(t.content.details,this.oldForm))},associateIdTypeList:function(){var t=this,e=[];return this.associateUnitPlanIdList&&this.associateUnitPlanIdList.forEach((function(a){e.push({id:a,type:t.$classcipe.typeMap["unit-plan"]})})),this.associateTaskIdList&&this.associateTaskIdList.forEach((function(a){e.push({id:a,type:t.$classcipe.typeMap.task})})),e}},Object(h["c"])({vueSocket:"vueSocket"})),Object(h["e"])({needRefreshCollaborate:function(t){return t.websocket.needRefreshCollaborate},removedCollaborate:function(t){return t.websocket.removedCollaborate},changeCollaborate:function(t){return t.websocket.changeCollaborate},collapsed:function(t){return t.app.sideCollapsed}})),methods:Object(s["a"])(Object(s["a"])({},Object(h["b"])(["refreshCollaborateAction","changeCollaborateAction","removedCollaborateAction","receiveSaveContentMsg"])),{},{setRightModuleVisible:function(t){t===this.rightModule.collaborate?this.showModuleList=[g.collaborate]:t===this.rightModule.collaborateComment?this.showModuleList=[g.collaborateComment]:t===this.rightModule.customTag?this.showModuleList=[g.customTag]:t===this.rightModule.taskDetails?this.showModuleList=[g.taskDetails]:t===this.rightModule.recommend?this.showModuleList=[g.recommend]:this.showModuleList=[g.customTag,g.recommend]},resetRightModuleVisible:function(){this.showModuleList=[g.customTag,g.recommend]},beforeunloadHandler:function(t){if(this.$logger.info("beforeunloadHandler ",this.$route.name),"AddTask"===this.$route.name||"UnitPlan"===this.$route.name)return t=t||window.event,t&&(t.returnValue="alert"),"alert"},resetWidth:function(){document.body.clientWidth<1400?(this.rightWidth=480,this.leftWidth=550):(this.rightWidth=600,this.leftWidth=720)},queryContentCollaborates:function(t,e){var a=this;this.collaborate={},Object(n["t"])({id:t,type:e}).then((function(t){a.$logger.info("QueryContentCollaborates response:",t),t.success&&(a.collaborate=t.result)}))},confirmSelectCollaborateUsers:function(t){this.collaborate=t},handleBack:function(){this.$logger.info("handleBack"),this.$router.push({path:"/teacher/main/created-by-me"})},handleCollaborateEvent:function(t,e,a){var i=this,s=new c;s.id=t,s.fieldName=e,s.inputValue=a;var n=this.collaborate.users.filter((function(t){return t.userId!==i.$store.getters.userInfo.id})).map((function(t){return t.userId}));this.isOwner||-1===n.indexOf(this.collaborate.owner.id)&&n.push(this.collaborate.owner.id),n.length},handleSaveContentEvent:function(t,e,a){var i=this,s=new d;s.id=t,s.type=e,s.details=a;var n=this.collaborate.users.filter((function(t){return t.userId!==i.$store.getters.userInfo.id})).map((function(t){return t.userId}));this.isOwner||-1===n.indexOf(this.collaborate.owner.id)&&n.push(this.collaborate.owner.id),n.length},handleCancelComment:function(){this.handleDisplayRightModule(),this.currentFieldName=""},handleStartCollaborate:function(){this.$logger.info("handleStartCollaborate"),this.collaborateContent=Object.assign({},this.form),this.showCollaborateModalVisible=!0},cleaPageCache:function(){sessionStorage.removeItem(p["D"]),sessionStorage.removeItem(p["F"]),sessionStorage.removeItem(p["E"])},GetCollaborateModifiedHistory:function(t,e){var a=this;Object(n["r"])({sourceType:t,sourceId:e}).then((function(t){a.historyList=[],a.$logger.info("GetCollaborateModifiedHistory",t),t.code||(a.historyList=t.result)}))},GetCollaborateComment:function(t,e){var a=this;Object(n["q"])({sourceType:t,sourceId:e}).then((function(t){a.$logger.info("GetCollaborateComment",t),t.code||(a.collaborateCommentList=t.result)})).finally((function(){a.showHistoryLoading=!1}))},loadCollaborateData:function(t,e){this.GetCollaborateModifiedHistory(t,e),this.GetCollaborateComment(t,e)},handleShareStatus:function(t){this.$logger.info("handleShareStatus",t),this.shareStatus=t}})}},e1b6:function(t,e,a){},e568:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAAAAXNSR0IArs4c6QAAAw1JREFUSEvdl02ojmkYx3//g/H97fiOkYQwRUY2RIZIihRNWLAjFmfBwoJCQxIrmdjMAlmJkuzMkIWFFBvSTE6K5GhY+MrHNf1P962nx/u85z28Wcy1euq+7ut/ffyv674e0USJiInARWAW0FIw3QHcBY4BlyV9VD6MiF7AcGAeMBYYBNwDbgNPJH3oyseI2AUcAj7bLdwJ4B3QJun3ToWImALsANYAI9NFn30CngNngaOSHtcDj4j1wGmgZx29l8BcRcQi4DAwCugLDAT6lDz9mFK1VdLNKqMR8QPgqGcXUu2Uz08B5atHDLwaeAD8mw7npMgXA/0LII7+IbBO0q0uwMsRrwLOFe7cNrCVbNQ1cHrtoSN22vcBP5aid91XSGrvquYF/kwC/inoP61Fgs7zRLafU33N1ix20szdKOl10rWdIcAbSW/LDkXEBKDoaEclcDLYA1gKnAGGFQy+T+w8HhEDAPPEtd0j6c9vBk7gLkUb8FuJrWb4FmATsDKRcqqkv5sCnMD7ARdS9J9LB7wAHLFngHt0QK1+r5nqiDCZBidrLyW5hl9IRLglnMbeFaS6J2l6xd0vaxwRC4EDidGu0dXi5YjIxFkCnEokqmX/vKS13QG+A8xIF+77W5JbKzP7J2AvsCBlpoqQByXt7g6wZ7DZa3Ga++eWiIi5qfHdTvXGoO9ulvRHd4A7oyuIgXN/uvbbPa2AcYm5Hou1ZKGk600BTun2FBsKTE7t454dkcZpfvrsfKskPyi1iFmTXJUR1yCZZ/dowPN8KzAt1d1zfnzmRhm5qp0aAi45YU64DJ7By1x/SfsrSmCSfn3EdYy6r1skvfmuwFVgpQw1P+L/BbAH/atGImlUJ22f3l6ydHgD8bDwrpVlDPCsUaMN6vnx8Hqbpd3A3p/cl1lOAJfSKtSg3bpqHjK/AhsKWlcMvDPtwnkKeaNsaqrTm53t+z3YbGAPgmvAzNL234xoyzYM+hewPC/0rsHJtP8Wfz2aCW7QK8A2SY+KvzCO/BfAm2VrMxH9CwTccGZzx/wHLF5e3RCoSfoAAAAASUVORK5CYII="},e709:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"preview-preview"},[t.loading?[a("a-skeleton",{attrs:{active:""}})]:[a("a-row",{staticClass:"action-header"},[a("a-col",{staticClass:"action-header-toggle",attrs:{span:"24"}},[t._v(" "+t._s(t.templateData.name)+" ")])],1),a("a-row",{staticClass:"top-header"},[a("a-col",{staticClass:"material-row"},[a("div",{staticClass:"icon-group"},[t.currentPageMaterial.hasOwnProperty("text")?a("a-badge",{attrs:{count:t.showMaterialSize("text")}},[a("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("text")}}},[a("text-type-svg"),a("div",{staticClass:"icon-text"},[t._v("Text")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("image")?a("a-badge",{attrs:{count:t.showMaterialSize("image")}},[a("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("image")}}},[a("image-type-svg"),a("div",{staticClass:"icon-text"},[t._v("Image")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("video")?a("a-badge",{attrs:{count:t.showMaterialSize("video")}},[a("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("video")}}},[a("video-type-svg"),a("div",{staticClass:"icon-text"},[t._v("Video")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("audio")?a("a-badge",{attrs:{count:t.showMaterialSize("audio")}},[a("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("audio")}}},[a("audio-type-svg"),a("div",{staticClass:"icon-text"},[t._v("Audio")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("iframe")?a("a-badge",{attrs:{count:t.showMaterialSize("iframe")}},[a("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("iframe")}}},[a("youtube-type-svg"),a("div",{staticClass:"icon-text"},[t._v("Youtube")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("pdf")?a("a-badge",{attrs:{count:t.showMaterialSize("pdf")}},[a("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("pdf")}}},[a("pdf-type-svg"),a("div",{staticClass:"icon-text"},[t._v("PDF")])],1)]):t._e(),t.currentPageMaterial.hasOwnProperty("website")?a("a-badge",{attrs:{count:t.showMaterialSize("website")}},[a("div",{staticClass:"icon",on:{click:function(e){return t.showPluginMaterial("website")}}},[a("url-type-svg"),a("div",{staticClass:"icon-text"},[t._v("Website")])],1)]):t._e()],1)])],1),a("a-row",{staticClass:"preview-data-info"},[a("a-col",{staticClass:"slide-preview",attrs:{span:"24"}},[a("a-col",{attrs:{span:"24"}},[t.thumbnailList.length?t._e():a("div",{staticClass:"no-preview-img"},[a("no-more-resources")],1)]),a("a-col",{staticClass:"left-preview",staticStyle:{display:"flex","flex-direction":"row"},attrs:{span:"24"}},[a("div",{staticClass:"left-preview-left",staticStyle:{display:"flex"}},[t.thumbnailList.length?a("a-carousel",{ref:"carousel",staticClass:"my-carousel"},t._l(t.thumbnailList,(function(t,e){return a("div",{key:"cIndex"+e},[a("img",{attrs:{src:t.contentUrl}})])})),0):t._e(),t.currentPageItem?a("div",{staticClass:"plugin-tags"},[a("a-row",{staticClass:"tag-row"},[t.currentPageItem.data.bloomLevel?a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[t._v("Bloom's Taxonomy:")]),a("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[t._v(t._s(t.currentPageItem.data.bloomLevel))])]):t._e(),t.currentPageItem.data.knowledgeLevel?a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[t._v("Knowledge dimension(s):")]),a("span",{staticClass:"tag-value",staticStyle:{color:"#F16A39"}},[t._v(t._s(t.currentPageItem.data.knowledgeLevel))])]):t._e()]),a("a-row",{staticClass:"tag-row"},[t.currentPageItem.data.verbs&&t.currentPageItem.data.verbs.length>0?a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[t._v("Command terms:")]),t._l(t.currentPageItem.data.verbs,(function(e,i){return a("span",{key:i,staticClass:"tag-value",staticStyle:{color:"#15C39A"}},[t._v(t._s(e))])}))],2):t._e(),t.currentPageTips?a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[t._v("Tip added:")]),a("span",{staticClass:"tag-value",staticStyle:{color:"#0054FF"}},[t._v(t._s(t.currentPageTips.tip))])]):t._e()]),t.currentPageItem.data.learnOuts&&t.currentPageItem.data.learnOuts.length>0?a("a-row",{staticClass:"tag-row"},[a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[t._v("Assessment objective(s):")]),t._l(t.currentPageItem.data.learnOuts,(function(e,i){return a("span",{key:i,staticClass:"tag-value",staticStyle:{color:"#00BCF2"}},[a("a-tooltip",{attrs:{title:e.path,overlayStyle:{"z-index":"3000"}}},[t._v(t._s(e.name)+" ")])],1)}))],2)]):t._e(),a("a-row",{staticClass:"tag-row"},[a("span",{staticClass:"tag-item"},[a("span",{staticClass:"tag-title"},[t._v("This is a "),a("span",[t._v(t._s(t.currentPageItem.type))]),t._v(" slide")])])])],1):t._e(),t.thumbnailList&&t.thumbnailList.length?a("div",{staticClass:"page-info"},[t._v(" "+t._s(t.currentImgIndex+1)+" / "+t._s(t.thumbnailList.length)+" ")]):t._e(),-1===t.selectIds.indexOf(t.template.id)?a("a-button",{staticClass:"action-ensure action-item",attrs:{type:"primary",shape:"round"},on:{click:function(e){return t.handleSelectTemplate(e)}}},[a("a-icon",{staticClass:"btn-icon",attrs:{type:"plus-circle"}}),a("div",{staticClass:"btn-text"},[t._v(" Insert ")])],1):t._e()],1),a("div",{staticClass:"carousel-page"},[a("div",{staticClass:"img-list-wrapper"},[a("div",{staticClass:"img-list"},t._l(t.thumbnailList,(function(e,i){return a("div",{key:"index"+i,staticClass:"img-item",on:{click:function(e){return t.handleGotoImgIndex(i)}}},[a("img",{attrs:{src:e.contentUrl}})])})),0)])])])],1)],1),a("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"800px",zIndex:6e3,title:"My Materials"},on:{ok:function(e){t.materialVisible=!1},cancel:function(e){t.materialVisible=!1}},model:{value:t.materialVisible,callback:function(e){t.materialVisible=e},expression:"materialVisible"}},[a("task-material-preview",{attrs:{"current-page-element-lists":t.currentPageElementLists,"filter-type":t.filterMaterialType,"current-page-index":t.currentImgIndex}})],1),a("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"900px",zIndex:5e3,title:null},on:{ok:function(e){t.mediaVisible=!1},cancel:function(e){t.mediaVisible=!1}},model:{value:t.mediaVisible,callback:function(e){t.mediaVisible=e},expression:"mediaVisible"}},[a("media-preview",{attrs:{"media-list":t.mediaList,"material-type":t.filterMaterialType}})],1)]],2)},s=[],n=(a("d3b7"),a("159b"),a("b0c0"),a("69b3")),o=a("8448"),r=a.n(o),l=a("998c"),c=a.n(l),d=a("4084"),u=a.n(d),p=a("8a21"),h=a.n(p),f=a("1eeb"),m=a.n(f),v=a("5a1d"),g=a.n(v),y=a("6631"),C=a.n(y),w=a("3111"),b=a("542c"),k=a("3f76"),T=a("c621"),S=a("d33b"),L=a("873a"),I=a("4fb2"),_=a("2f59"),A={name:"TemplatePreview",components:{TaskMaterialPreview:b["a"],MaterialTypeIcon:w["a"],NoMoreResources:n["a"],TextTypeSvg:r.a,ImageTypeSvg:c.a,VideoTypeSvg:u.a,AudioTypeSvg:h.a,YoutubeTypeSvg:m.a,PdfTypeSvg:g.a,UrlTypeSvg:C.a,MediaPreview:L["a"]},props:{template:{type:Object,default:function(){return null}},selectedTemplateIdList:{type:Array,default:function(){return[]}}},watch:{selectedTemplateIdList:function(t){this.$logger.info("selectedTemplateIdList ",t),this.selectIds=t}},computed:{},mounted:function(){},data:function(){return{selectIds:[],templateData:{},loading:!0,loadingClass:!1,data:null,subPreviewVisible:!1}},mixins:[S["a"],_["a"]],created:function(){this.loadData()},methods:{loadData:function(){var t=this;this.templateData=this.template,this.$logger.info("selectedTemplateIdList ",this.selectedTemplateIdList),this.selectIds=this.selectedTemplateIdList,this.templateData.type===k["e"].task?(this.loading=!0,Object(T["d"])({taskId:this.templateData.id}).then((function(e){if(t.$logger.info("task loadThumbnail response",e.result),e.code!==t.ErrorCode.ppt_google_token_expires&&e.code!==t.ErrorCode.ppt_forbidden){var a=e.result.pageObjects;t.templateData.pageObjectIds=[],a.forEach((function(e){t.templateData.pageObjectIds.push(e.id),t.thumbnailList.push({contentUrl:e.contentUrl,id:e.pageObjectId}),t.$logger.info("current thumbnailList ",t.thumbnailList)}))}})).finally((function(){t.loading=!1,t.getClassInfo(t.templateData.presentationId)}))):(this.loading=!1,this.templateData.images.forEach((function(e,a){t.thumbnailList.push({contentUrl:e,id:t.templateData.pageObjectIds[a]})})),this.getClassInfo(this.templateData.presentationId))},handleAuthCallback:function(){this.$logger.info("handleAuthCallback"),this.loadData()},handleGotoImgIndex:function(t){this.$logger.info("handleGotoImgIndex "+t),this.currentImgIndex=t,this.$refs.carousel.goTo(t)},handleSelectTemplate:function(t){this.$logger.info("handleSelectTemplate "+this.templateData.name),I["b"].$emit(I["a"].ToggleSelectContentItem,this.templateData,t)},handlePreviewMaterial:function(t){this.$logger.info("handlePreviewMaterial "+t),"tip"!==t.type&&window.open(t.url,"_blank")}}},M=A,D=(a("ff58"),a("0c7c")),x=Object(D["a"])(M,i,s,!1,null,"18f143d6",null);e["a"]=x.exports},e76a:function(t,e,a){"use strict";a("4768")},e806:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return l})),a.d(e,"b",(function(){return c})),a.d(e,"e",(function(){return d})),a.d(e,"f",(function(){return u})),a.d(e,"g",(function(){return p})),a.d(e,"h",(function(){return h}));var i=a("b775"),s="academic/academicTermInfo",n={addTerm:"/classcipe/".concat(s,"/addTerm"),addYear:"/classcipe/".concat(s,"/addYear"),deleteTerm:"/classcipe/".concat(s,"/deleteTerm"),deleteYear:"/classcipe/".concat(s,"/deleteYear"),editTerm:"/classcipe/".concat(s,"/editTerm"),editYear:"/classcipe/".concat(s,"/editYear"),saveBlockSetting:"/classcipe/".concat(s,"/saveBlockSetting"),termList:"/classcipe/".concat(s,"/termList")};function o(t){return Object(i["d"])({url:n.addTerm,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function r(t){return Object(i["d"])({url:n.deleteTerm,method:"delete",params:t})}function l(t){return Object(i["d"])({url:n.deleteYear,method:"delete",params:t})}function c(t){return Object(i["d"])({url:n.addYear,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(t){return Object(i["d"])({url:n.editTerm,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(t){return Object(i["d"])({url:n.editYear,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(t){return Object(i["d"])({url:n.saveBlockSetting,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(t){return Object(i["d"])({url:n.termList,method:"get",params:t})}},ea1d:function(t,e,a){},ed29:function(t,e,a){},ed70:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAIDElEQVRoQ+Wbe5BT9RXHv+fmebPZLeCrs8IUCn9Vre+2Sl2SsF230IdosTPYWlstD2WBZIdWgU47nQLCmOx2FpRltGyt4qOt0IoD5bEJyIqWxalda6VacaTglA4rj2ySTXLv6dwsySabZO+9udklO/7+TM7rc8/5Pe/vEkaoue5jO42L3sgm3ETM14DoagBXgtkJImfKLXMYRGEAJwjUw8w9BHTLveKboQ6KjURoVE6jrqbIRFhpgQC+HcC1AKwl2o8DeIuZd3GCNofaHP8p0U6eWlmAZzTHvmaC/DAAFwChXMFdsCMzEGKitaHHxL1GbRsC9nhjDSD5URCuNxqINn0+DJlXdbY4d2uTz5cqCdi1LDpZEDgAwpxSHRvRkxnbIJMv1Cp+qNeObmCXL/w9gYRNAKr0OiuzfJ/M8sJQwPmMHruagW+cz46a6ugmAr6vx8GIyzJ3nA07HjqymSJafGkCvsXLE0QhugvAzVqMjrYMM7qF/mTjvo01p9V8qwK7fhKZSBLtJLAyj1ZsY6Z/xONyQ9eGqpPDBTkscP1P+TNSMnaw0mHTgAo0y7GvhlrHnykGXRQ4tVKaEN1LhOkVm9YCgTGji3vF+mIrtaLAHl/fFhDdN5Zg07HKzB2hQNUPC8VeENjljf5AELhjLMJmYpbkeztbnb8bypAHXLf4zBSzzdpTAfOssefNdC4Zx3UHNojHsg3lAXt8kZeMrKB+PMuMu+rMsJgJH5+WseKpOD46xarBN95swuI7LBBthLN9jDVb4+g+KqvqDSvAvL0zUJWzGswB9iyPNUCW/1KqF4cNeHm1mKO+vSuJtm0JVZNbV9pwxfjBfcffP5DgfVzZNBlssnB7Z4s9s/bOBfZFjoBwQ6kuxlcDf/h5LvDu7iTWPa8O/Mdf2DHOORjOeydkLGzpLzWUjB4DbwT9jq+kf8h4qFt23mM2mfbp8VB/gwm1lw4GKVqBu12WHBP/Pinj4NuSqtnvusywWwdtnT7H2PF6Mkfvr+9KePcj9e4x1JksSe5Qa3VI+T3jwe2LvkLEs1QjuyDwo0Yz7qnPhdOqW6pcIslY3h5HzzF9fZvBrwT9Vd/IAN/WdP4yi8X0MQgmrcHsWG1PDTCj3fYckfDoc7r7djIRl2pfbav+XypiV3NkqQC06gl+32O5fVWPrhFZpawfeVI3sOJySaff0ZYC9jRHugDcqieQsQbMwMGg33EbuR5kJ9mjvUTQ1SHHHDAjwTFxArm84UZBEHbqya4iO9aAlZhlWf46uX3RR4h4zacBmEErydMc3QKw7l3RSGU4+LckJl0uYFpt4dNeA4OWMgt3UCkD1kiV9LaDCWzYnoRTBPwLrZh2Zf4saQwYr5HbFzlGhMkXu6RfejWBjX8aXFmNcwLPrrDnrL6UGI0AM+NDJcPKwdeEcgKfOiOjxkF5wRbzMRRWkbtjuhlNc/InDiPAAHoV4CgAe7mAPzgpYfnmOCZ/lrDmfhtsluFXY+kyzvb/zVtMWHqnBUT5ugaBY2UFPn5KRtOGfpy/cEJ83VQBq++3Fs10ocx+61YTlswpDGu0pAGkgMtW0kePy1i6sR+JrE3OFz8vYO0D+dDFMrvsruFfOBrMcG/ZB63uoxJWbYnnQF8zhbD2AVtms1EIdvaXTfB+p3hm0yVvBDg1aLl9kUNEyGyQtfbl4ebhI/+SsOo3ccSzMn3V5wjr5tuw63AyNfVkN62wRkuaGa8rK63fEvG9WkHTcmoLjzffk7DyqVzo2ksIJ0/nbuAVWN9c7e/N3/inlDonK6Ux09MK8M+I+Jd6DagBK/YKQWf7mfUlBVa9jLN1jJU0rRjxzUMxaOWUsvluC4QCU89wD98IcGrzMBrbw6HQpcIa7MMxORq+LDWzu5sj+wmo01PWWko6214a2nN9aZk1Okoz0Bn0O2YOnHj4+haB6PGRBFZsn+tj1FQZOwcruaSZH+wMVD2R8p46xLOalPeqZq3QejOs1a6aXInA8URcmpg5xBso674dBJqt5lDrtKTVjl65UoCZ8edgwPFtxdfgQXzz+TozTPu1BjCWMpyENOOAv/pADvCFwauLNJ5e7lkvQij3FTQNT/vQOwOrOK2NgdeCfkfmpX7OCOL2RmeAOEg0mPlihgOLrLh2quZze63xqcq1v5zAi/tzl6bFlJjBYHIHW8RM5eYNmW5f5FkizFPzfGkNYcmdFkwtcvakpq/3f2aG8tbh6T1JsMbXS8zYGgw47sn2lQc8fXFfrdWGtwk0Xm9QlSTP4E/i/bh66K2egpOixxeZC8KLlQSgNxYZPCfkr9o+VK/oKsDdHG0n8Hy9jipDnjZ1+sVFhWIpCvyFuWy9YlJ0NxFmVAaEtiiYsf+/x8WGd35PBYfyYdd5rmWfjCPBGiIi5bJ3xTdmfovluKuki2lpOuWWO1l5JyF1hb9yG6On38yNXesNXD3MQKcybdtRqbfylNt3Jos4e+86OquWEc1bl2lNbJtkifyaiBaoGR3N/5mp/XjCvvT9NtJ0A0YzcBrC7Y3OI0I7iAe+TLlYjSnMjAXBFnGrnhB0AyvGlU8AIHBAuEifAICxTR6tTwCyn6bHG26AQL8CaLQujh+GLI/+Rx5DS8jtC88E0cMEqtdTXtplaY8sSetDrc6L+xnP0IAHpjDMA2MuEW7SDpQvqVzrZ+CFfsZzh1ocJ4zYytYtqQ9rcT7zoXOXsM3sYaTApxIwhQmXF/oUjxjK9dNjBHqfwYdjLAYPtVCvFj96Zf4PqQt02/Mf+s8AAAAASUVORK5CYII="},ef3b:function(t,e,a){"use strict";a("9516")},f424:function(t,e,a){},f8935:function(t,e,a){var i=a("b2b7");t.exports={__esModule:!0,default:i.svgComponent({tag:"svg",attrsMap:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"23.635",viewBox:"0 0 25 23.635"},children:[{tag:"g",attrsMap:{id:"蓝色文件夹",transform:"translate(-70.998 -72.533)"},children:[{tag:"path",attrsMap:{id:"路径_393","data-name":"路径 393",style:"fill: #4273f6;",class:"cls-1",d:"M93.425,96.167h-15.9A4.639,4.639,0,0,1,73,91.443V77.256a4.636,4.636,0,0,1,4.519-4.723l3.19.056a2.244,2.244,0,0,1,1.517.6l2.386,2.244a2.238,2.238,0,0,0,1.517.6h7.3a4.637,4.637,0,0,1,4.519,4.723v10.7a4.642,4.642,0,0,1-4.521,4.725Z",transform:"translate(-1.949)"}},{tag:"path",attrsMap:{id:"路径_394","data-name":"路径 394",style:"fill: #465cdb;\n        opacity: 0.69;",class:"cls-2",d:"M92.217,350.112H78.981a5.913,5.913,0,0,1-5.85-5.941V335.8a1.288,1.288,0,0,1,1.278-1.3H96.788a1.289,1.289,0,0,1,1.278,1.3v8.365a5.908,5.908,0,0,1-5.847,5.942Z",transform:"translate(-2.073 -254.958)"}},{tag:"path",attrsMap:{id:"路径_395","data-name":"路径 395",style:" fill: #fff;",class:"cls-3",d:"M177.619,318.685H160.68a1.6,1.6,0,0,1-1.575-1.606v-8.956a1.6,1.6,0,0,1,1.575-1.606h16.94a1.6,1.6,0,0,1,1.575,1.606v8.954a1.6,1.6,0,0,1-1.575,1.61Z",transform:"translate(-85.625 -227.596)"}},{tag:"path",attrsMap:{id:"路径_396","data-name":"路径 396",style:" fill: #fff; opacity: 0.16;",class:"cls-4",d:"M179.624,299.657h-16.94a1.6,1.6,0,0,1-1.575-1.606v-8.957a1.6,1.6,0,0,1,1.575-1.606h16.94a1.6,1.6,0,0,1,1.575,1.606v8.954A1.6,1.6,0,0,1,179.624,299.657Z",transform:"translate(-87.573 -209.086)"}},{tag:"path",attrsMap:{id:"路径_397","data-name":"路径 397",style:"fill: #4273f6;",class:"cls-1",d:"M93.371,418.174h-15.8A4.621,4.621,0,0,1,73,413.532V403.5H97.94v10.033a4.616,4.616,0,0,1-4.569,4.643Z",transform:"translate(-1.948 -322.007)"}},{tag:"path",attrsMap:{id:"路径_398","data-name":"路径 398",style:"fill: #5066fb;\n        opacity: 0.14;",class:"cls-5",d:"M91.367,747.612H75.57A4.621,4.621,0,0,1,71,742.97v-.484H95.936v.484a4.616,4.616,0,0,1-4.569,4.643Z",transform:"translate(0 -651.445)"}},{tag:"path",attrsMap:{id:"路径_399","data-name":"路径 399",style:" fill: #5d75ce;\n        opacity: 0.52;",class:"cls-6",d:"M347.708,457.546h-5.143a2.043,2.043,0,1,1,0-4.085h5.14a2.043,2.043,0,1,1,0,4.085Z",transform:"translate(-262.114 -370.394)"}},{tag:"path",attrsMap:{id:"路径_400","data-name":"路径 400",style:" fill: #ffd629;",class:"cls-7",d:"M372.261,471.719H367.7a1.619,1.619,0,1,1,0-3.239h4.561a1.619,1.619,0,0,1,0,3.239Z",transform:"translate(-286.952 -384.99)"}}]}]})}},fa0b:function(t,e,a){"use strict";a("7286")},faaa:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dir-icon"},["blue"===t.dirType?i("blue-dir-svg",{staticClass:"blue"}):"yellow"===t.dirType?i("yellow-dir-svg",{staticClass:"yellow"}):"opened"===t.dirType?i("open-dir-svg",{staticClass:"opened"}):t.contentType===t.typeMap.task?i("img",{attrs:{src:a("ed70")}}):t.contentType===t.typeMap["unit-plan"]?i("img",{attrs:{src:a("27f0")}}):(t.contentType,t.typeMap.evaluation,i("img",{attrs:{src:a("2ae5")}}))],1)},s=[],n=(a("a9e3"),a("f8935")),o=a.n(n),r=a("20de"),l=a.n(r),c=a("6f6b"),d=a.n(c),u=a("3f76"),p={name:"DirIcon",components:{BlueDirSvg:o.a,YellowDirSvg:l.a,OpenDirSvg:d.a},props:{dirType:{type:String,default:null},contentType:{type:Number,default:null}},data:function(){return{typeMap:u["e"]}}},h=p,f=(a("c164"),a("0c7c")),m=Object(f["a"])(h,i,s,!1,null,"1cf1c170",null);e["a"]=m.exports},ff58:function(t,e,a){"use strict";a("870d")}}]);