(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["authResult"],{"754d":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main-content"},[e.authFailed?e._e():o("a-spin",{attrs:{size:"large"}}),e.authFailed?o("div",{staticClass:"auth-failed"},[o("div",{staticClass:"auth-failed-detail"},[o("no-more-resources",{attrs:{tips:""}})],1),o("div",{staticClass:"auth-failed-tips"},[e._v(" Classcipe needs access to your google account to work properly, please grant permission again. ")]),o("div",{staticClass:"auth-failed-action"},[o("a-button",{attrs:{icon:"redo",shape:"round",type:"primary"},on:{click:e.handleRetryAuth}},[e._v("Retry")])],1)]):e._e()],1)},a=[],r=(o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("ac1f"),o("841c"),o("d73b")),i=o("dbdc"),c=o("69b3"),s=o("f93e"),u=o("9fb0"),d=o("ca00"),l={name:"AuthResult",components:{NoMoreResources:c["a"]},data:function(){return{authFailed:!1,failedMessage:""}},created:function(){var e=this,t=new URLSearchParams(window.location.search),o=t.get("accessToken");this.$store.dispatch("LoginWithToken",o).then((function(){e.$store.dispatch("GetInfo").then((function(t){e.$logger.info("auth-result-redirect",e.$route);var n=window.sessionStorage.getItem(s["C"]);e.handleOpener(),n?(window.sessionStorage.removeItem(s["C"]),window.location.href=n+(n.indexOf("?")>-1?"&":"?")+"token="+o):e.$store.getters.currentRole?e.$router.push(e.$store.getters.defaultRouter):e.$router.push({path:r["f"]})})).catch((function(t){e.authFailed=!0,e.failedMessage=t}))})).catch((function(){e.handleOpener(),e.$router.push({path:"/user/login"})}))},methods:{handleRetryAuth:function(){var e=Object(i["b"])("google");e+="?role=teacher",e+="&channelId=".concat(Object(d["getCookie"])(u["v"])),e+="&callbackUrl=",e+=i["c"],window.location.href=e},handleOpener:function(){var e=window.sessionStorage.getItem("SESSION_AUTH_TYPE");window.opener&&(window.opener.postMessage&&e&&window.opener.postMessage({authType:e,event:"authUpdate",data:null},"*"),window.close())}}},h=l,p=(o("7e6b"),o("0c7c")),f=Object(p["a"])(h,n,a,!1,null,"62c03cd6",null);t["default"]=f.exports},"7e6b":function(e,t,o){"use strict";o("86d7")},"86d7":function(e,t,o){},dbdc:function(e,t,o){"use strict";o.d(t,"c",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"a",(function(){return c})),o.d(t,"d",(function(){return s}));o("498a"),o("d3b7"),o("25f0"),o("99af");var n=o("a18c"),a=o("b775"),r=window.location.origin+("hash"===n["a"].mode?"#":"")+"/user/auth-result",i=function(e){if(!e)throw new Error("getThirdAuthURL got a illegal source: "+e);switch(e.toString().trim()){case"google":return"https://api.classcipe.com/classcipe/thirdLogin/render/google";case"zoom":return"https://api.classcipe.com/classcipe/thirdLogin/render/zoom";case"microsoft":return"https://api.classcipe.com/classcipe/thirdLogin/render/microsoft";default:throw new Error("not config auth url for source["+e+"]")}};function c(e,t){return Object(a["d"])({url:"/classcipe/thirdLogin/".concat(e,"/refreshToken?email=").concat(t),method:"get"})}function s(e){return Object(a["d"])({url:"/classcipe/thirdLogin/".concat(e,"/unbind"),method:"get"})}}}]);